var vNe=Object.defineProperty;var bNe=(e,t,n)=>t in e?vNe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var xNe=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var jc=(e,t,n)=>bNe(e,typeof t!="symbol"?t+"":t,n);var $Vt=xNe((YHt,See)=>{function _Ne(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var ya=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function hc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function wNe(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var G7={exports:{}},BC={},Y7={exports:{}},qr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vte;function ENe(){if(vte)return qr;vte=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),l=Symbol.for("react.memo"),c=Symbol.for("react.lazy"),f=Symbol.iterator;function d(q){return q===null||typeof q!="object"?null:(q=f&&q[f]||q["@@iterator"],typeof q=="function"?q:null)}var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,m={};function g(q,te,W){this.props=q,this.context=te,this.refs=m,this.updater=W||h}g.prototype.isReactComponent={},g.prototype.setState=function(q,te){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,te,"setState")},g.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function b(){}b.prototype=g.prototype;function y(q,te,W){this.props=q,this.context=te,this.refs=m,this.updater=W||h}var x=y.prototype=new b;x.constructor=y,p(x,g.prototype),x.isPureReactComponent=!0;var w=Array.isArray,T=Object.prototype.hasOwnProperty,A={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function I(q,te,W){var Z,oe={},pe=null,ce=null;if(te!=null)for(Z in te.ref!==void 0&&(ce=te.ref),te.key!==void 0&&(pe=""+te.key),te)T.call(te,Z)&&!k.hasOwnProperty(Z)&&(oe[Z]=te[Z]);var he=arguments.length-2;if(he===1)oe.children=W;else if(1<he){for(var Ee=Array(he),Ae=0;Ae<he;Ae++)Ee[Ae]=arguments[Ae+2];oe.children=Ee}if(q&&q.defaultProps)for(Z in he=q.defaultProps,he)oe[Z]===void 0&&(oe[Z]=he[Z]);return{$$typeof:e,type:q,key:pe,ref:ce,props:oe,_owner:A.current}}function O(q,te){return{$$typeof:e,type:q.type,key:te,ref:q.ref,props:q.props,_owner:q._owner}}function M(q){return typeof q=="object"&&q!==null&&q.$$typeof===e}function L(q){var te={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(W){return te[W]})}var H=/\/+/g;function D(q,te){return typeof q=="object"&&q!==null&&q.key!=null?L(""+q.key):te.toString(36)}function B(q,te,W,Z,oe){var pe=typeof q;(pe==="undefined"||pe==="boolean")&&(q=null);var ce=!1;if(q===null)ce=!0;else switch(pe){case"string":case"number":ce=!0;break;case"object":switch(q.$$typeof){case e:case t:ce=!0}}if(ce)return ce=q,oe=oe(ce),q=Z===""?"."+D(ce,0):Z,w(oe)?(W="",q!=null&&(W=q.replace(H,"$&/")+"/"),B(oe,te,W,"",function(Ae){return Ae})):oe!=null&&(M(oe)&&(oe=O(oe,W+(!oe.key||ce&&ce.key===oe.key?"":(""+oe.key).replace(H,"$&/")+"/")+q)),te.push(oe)),1;if(ce=0,Z=Z===""?".":Z+":",w(q))for(var he=0;he<q.length;he++){pe=q[he];var Ee=Z+D(pe,he);ce+=B(pe,te,W,Ee,oe)}else if(Ee=d(q),typeof Ee=="function")for(q=Ee.call(q),he=0;!(pe=q.next()).done;)pe=pe.value,Ee=Z+D(pe,he++),ce+=B(pe,te,W,Ee,oe);else if(pe==="object")throw te=String(q),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.");return ce}function U(q,te,W){if(q==null)return q;var Z=[],oe=0;return B(q,Z,"","",function(pe){return te.call(W,pe,oe++)}),Z}function G(q){if(q._status===-1){var te=q._result;te=te(),te.then(function(W){(q._status===0||q._status===-1)&&(q._status=1,q._result=W)},function(W){(q._status===0||q._status===-1)&&(q._status=2,q._result=W)}),q._status===-1&&(q._status=0,q._result=te)}if(q._status===1)return q._result.default;throw q._result}var ee={current:null},ne={transition:null},ue={ReactCurrentDispatcher:ee,ReactCurrentBatchConfig:ne,ReactCurrentOwner:A};function X(){throw Error("act(...) is not supported in production builds of React.")}return qr.Children={map:U,forEach:function(q,te,W){U(q,function(){te.apply(this,arguments)},W)},count:function(q){var te=0;return U(q,function(){te++}),te},toArray:function(q){return U(q,function(te){return te})||[]},only:function(q){if(!M(q))throw Error("React.Children.only expected to receive a single React element child.");return q}},qr.Component=g,qr.Fragment=n,qr.Profiler=i,qr.PureComponent=y,qr.StrictMode=r,qr.Suspense=u,qr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ue,qr.act=X,qr.cloneElement=function(q,te,W){if(q==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+q+".");var Z=p({},q.props),oe=q.key,pe=q.ref,ce=q._owner;if(te!=null){if(te.ref!==void 0&&(pe=te.ref,ce=A.current),te.key!==void 0&&(oe=""+te.key),q.type&&q.type.defaultProps)var he=q.type.defaultProps;for(Ee in te)T.call(te,Ee)&&!k.hasOwnProperty(Ee)&&(Z[Ee]=te[Ee]===void 0&&he!==void 0?he[Ee]:te[Ee])}var Ee=arguments.length-2;if(Ee===1)Z.children=W;else if(1<Ee){he=Array(Ee);for(var Ae=0;Ae<Ee;Ae++)he[Ae]=arguments[Ae+2];Z.children=he}return{$$typeof:e,type:q.type,key:oe,ref:pe,props:Z,_owner:ce}},qr.createContext=function(q){return q={$$typeof:o,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},q.Provider={$$typeof:s,_context:q},q.Consumer=q},qr.createElement=I,qr.createFactory=function(q){var te=I.bind(null,q);return te.type=q,te},qr.createRef=function(){return{current:null}},qr.forwardRef=function(q){return{$$typeof:a,render:q}},qr.isValidElement=M,qr.lazy=function(q){return{$$typeof:c,_payload:{_status:-1,_result:q},_init:G}},qr.memo=function(q,te){return{$$typeof:l,type:q,compare:te===void 0?null:te}},qr.startTransition=function(q){var te=ne.transition;ne.transition={};try{q()}finally{ne.transition=te}},qr.unstable_act=X,qr.useCallback=function(q,te){return ee.current.useCallback(q,te)},qr.useContext=function(q){return ee.current.useContext(q)},qr.useDebugValue=function(){},qr.useDeferredValue=function(q){return ee.current.useDeferredValue(q)},qr.useEffect=function(q,te){return ee.current.useEffect(q,te)},qr.useId=function(){return ee.current.useId()},qr.useImperativeHandle=function(q,te,W){return ee.current.useImperativeHandle(q,te,W)},qr.useInsertionEffect=function(q,te){return ee.current.useInsertionEffect(q,te)},qr.useLayoutEffect=function(q,te){return ee.current.useLayoutEffect(q,te)},qr.useMemo=function(q,te){return ee.current.useMemo(q,te)},qr.useReducer=function(q,te,W){return ee.current.useReducer(q,te,W)},qr.useRef=function(q){return ee.current.useRef(q)},qr.useState=function(q){return ee.current.useState(q)},qr.useSyncExternalStore=function(q,te,W){return ee.current.useSyncExternalStore(q,te,W)},qr.useTransition=function(){return ee.current.useTransition()},qr.version="18.3.1",qr}var bte;function C1(){return bte||(bte=1,Y7.exports=ENe()),Y7.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xte;function SNe(){if(xte)return BC;xte=1;var e=C1(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(a,u,l){var c,f={},d=null,h=null;l!==void 0&&(d=""+l),u.key!==void 0&&(d=""+u.key),u.ref!==void 0&&(h=u.ref);for(c in u)r.call(u,c)&&!s.hasOwnProperty(c)&&(f[c]=u[c]);if(a&&a.defaultProps)for(c in u=a.defaultProps,u)f[c]===void 0&&(f[c]=u[c]);return{$$typeof:t,type:a,key:d,ref:h,props:f,_owner:i.current}}return BC.Fragment=n,BC.jsx=o,BC.jsxs=o,BC}var _te;function TNe(){return _te||(_te=1,G7.exports=SNe()),G7.exports}var R=TNe(),z=C1();const sr=hc(z),CNe=_Ne({__proto__:null,default:sr},[z]);var e6={},K7={exports:{}},Mf={},X7={exports:{}},Q7={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wte;function ANe(){return wte||(wte=1,function(e){function t(ne,ue){var X=ne.length;ne.push(ue);e:for(;0<X;){var q=X-1>>>1,te=ne[q];if(0<i(te,ue))ne[q]=ue,ne[X]=te,X=q;else break e}}function n(ne){return ne.length===0?null:ne[0]}function r(ne){if(ne.length===0)return null;var ue=ne[0],X=ne.pop();if(X!==ue){ne[0]=X;e:for(var q=0,te=ne.length,W=te>>>1;q<W;){var Z=2*(q+1)-1,oe=ne[Z],pe=Z+1,ce=ne[pe];if(0>i(oe,X))pe<te&&0>i(ce,oe)?(ne[q]=ce,ne[pe]=X,q=pe):(ne[q]=oe,ne[Z]=X,q=Z);else if(pe<te&&0>i(ce,X))ne[q]=ce,ne[pe]=X,q=pe;else break e}}return ue}function i(ne,ue){var X=ne.sortIndex-ue.sortIndex;return X!==0?X:ne.id-ue.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var u=[],l=[],c=1,f=null,d=3,h=!1,p=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(ne){for(var ue=n(l);ue!==null;){if(ue.callback===null)r(l);else if(ue.startTime<=ne)r(l),ue.sortIndex=ue.expirationTime,t(u,ue);else break;ue=n(l)}}function w(ne){if(m=!1,x(ne),!p)if(n(u)!==null)p=!0,G(T);else{var ue=n(l);ue!==null&&ee(w,ue.startTime-ne)}}function T(ne,ue){p=!1,m&&(m=!1,b(I),I=-1),h=!0;var X=d;try{for(x(ue),f=n(u);f!==null&&(!(f.expirationTime>ue)||ne&&!L());){var q=f.callback;if(typeof q=="function"){f.callback=null,d=f.priorityLevel;var te=q(f.expirationTime<=ue);ue=e.unstable_now(),typeof te=="function"?f.callback=te:f===n(u)&&r(u),x(ue)}else r(u);f=n(u)}if(f!==null)var W=!0;else{var Z=n(l);Z!==null&&ee(w,Z.startTime-ue),W=!1}return W}finally{f=null,d=X,h=!1}}var A=!1,k=null,I=-1,O=5,M=-1;function L(){return!(e.unstable_now()-M<O)}function H(){if(k!==null){var ne=e.unstable_now();M=ne;var ue=!0;try{ue=k(!0,ne)}finally{ue?D():(A=!1,k=null)}}else A=!1}var D;if(typeof y=="function")D=function(){y(H)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,U=B.port2;B.port1.onmessage=H,D=function(){U.postMessage(null)}}else D=function(){g(H,0)};function G(ne){k=ne,A||(A=!0,D())}function ee(ne,ue){I=g(function(){ne(e.unstable_now())},ue)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ne){ne.callback=null},e.unstable_continueExecution=function(){p||h||(p=!0,G(T))},e.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<ne?Math.floor(1e3/ne):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(ne){switch(d){case 1:case 2:case 3:var ue=3;break;default:ue=d}var X=d;d=ue;try{return ne()}finally{d=X}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(ne,ue){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var X=d;d=ne;try{return ue()}finally{d=X}},e.unstable_scheduleCallback=function(ne,ue,X){var q=e.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?q+X:q):X=q,ne){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=X+te,ne={id:c++,callback:ue,priorityLevel:ne,startTime:X,expirationTime:te,sortIndex:-1},X>q?(ne.sortIndex=X,t(l,ne),n(u)===null&&ne===n(l)&&(m?(b(I),I=-1):m=!0,ee(w,X-q))):(ne.sortIndex=te,t(u,ne),p||h||(p=!0,G(T))),ne},e.unstable_shouldYield=L,e.unstable_wrapCallback=function(ne){var ue=d;return function(){var X=d;d=ue;try{return ne.apply(this,arguments)}finally{d=X}}}}(Q7)),Q7}var Ete;function rq(){return Ete||(Ete=1,X7.exports=ANe()),X7.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ste;function kNe(){if(Ste)return Mf;Ste=1;var e=C1(),t=rq();function n(v){for(var _="https://reactjs.org/docs/error-decoder.html?invariant="+v,N=1;N<arguments.length;N++)_+="&args[]="+encodeURIComponent(arguments[N]);return"Minified React error #"+v+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(v,_){o(v,_),o(v+"Capture",_)}function o(v,_){for(i[v]=_,v=0;v<_.length;v++)r.add(_[v])}var a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,l=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,c={},f={};function d(v){return u.call(f,v)?!0:u.call(c,v)?!1:l.test(v)?f[v]=!0:(c[v]=!0,!1)}function h(v,_,N,j){if(N!==null&&N.type===0)return!1;switch(typeof _){case"function":case"symbol":return!0;case"boolean":return j?!1:N!==null?!N.acceptsBooleans:(v=v.toLowerCase().slice(0,5),v!=="data-"&&v!=="aria-");default:return!1}}function p(v,_,N,j){if(_===null||typeof _>"u"||h(v,_,N,j))return!0;if(j)return!1;if(N!==null)switch(N.type){case 3:return!_;case 4:return _===!1;case 5:return isNaN(_);case 6:return isNaN(_)||1>_}return!1}function m(v,_,N,j,Q,ie,de){this.acceptsBooleans=_===2||_===3||_===4,this.attributeName=j,this.attributeNamespace=Q,this.mustUseProperty=N,this.propertyName=v,this.type=_,this.sanitizeURL=ie,this.removeEmptyString=de}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(v){g[v]=new m(v,0,!1,v,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(v){var _=v[0];g[_]=new m(_,1,!1,v[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(v){g[v]=new m(v,2,!1,v.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(v){g[v]=new m(v,2,!1,v,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(v){g[v]=new m(v,3,!1,v.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(v){g[v]=new m(v,3,!0,v,null,!1,!1)}),["capture","download"].forEach(function(v){g[v]=new m(v,4,!1,v,null,!1,!1)}),["cols","rows","size","span"].forEach(function(v){g[v]=new m(v,6,!1,v,null,!1,!1)}),["rowSpan","start"].forEach(function(v){g[v]=new m(v,5,!1,v.toLowerCase(),null,!1,!1)});var b=/[\-:]([a-z])/g;function y(v){return v[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(v){var _=v.replace(b,y);g[_]=new m(_,1,!1,v,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(v){var _=v.replace(b,y);g[_]=new m(_,1,!1,v,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(v){var _=v.replace(b,y);g[_]=new m(_,1,!1,v,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(v){g[v]=new m(v,1,!1,v.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(v){g[v]=new m(v,1,!1,v.toLowerCase(),null,!0,!0)});function x(v,_,N,j){var Q=g.hasOwnProperty(_)?g[_]:null;(Q!==null?Q.type!==0:j||!(2<_.length)||_[0]!=="o"&&_[0]!=="O"||_[1]!=="n"&&_[1]!=="N")&&(p(_,N,Q,j)&&(N=null),j||Q===null?d(_)&&(N===null?v.removeAttribute(_):v.setAttribute(_,""+N)):Q.mustUseProperty?v[Q.propertyName]=N===null?Q.type===3?!1:"":N:(_=Q.attributeName,j=Q.attributeNamespace,N===null?v.removeAttribute(_):(Q=Q.type,N=Q===3||Q===4&&N===!0?"":""+N,j?v.setAttributeNS(j,_,N):v.setAttribute(_,N))))}var w=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,T=Symbol.for("react.element"),A=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),M=Symbol.for("react.provider"),L=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),U=Symbol.for("react.memo"),G=Symbol.for("react.lazy"),ee=Symbol.for("react.offscreen"),ne=Symbol.iterator;function ue(v){return v===null||typeof v!="object"?null:(v=ne&&v[ne]||v["@@iterator"],typeof v=="function"?v:null)}var X=Object.assign,q;function te(v){if(q===void 0)try{throw Error()}catch(N){var _=N.stack.trim().match(/\n( *(at )?)/);q=_&&_[1]||""}return`
`+q+v}var W=!1;function Z(v,_){if(!v||W)return"";W=!0;var N=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(_)if(_=function(){throw Error()},Object.defineProperty(_.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(_,[])}catch(st){var j=st}Reflect.construct(v,[],_)}else{try{_.call()}catch(st){j=st}v.call(_.prototype)}else{try{throw Error()}catch(st){j=st}v()}}catch(st){if(st&&j&&typeof st.stack=="string"){for(var Q=st.stack.split(`
`),ie=j.stack.split(`
`),de=Q.length-1,ke=ie.length-1;1<=de&&0<=ke&&Q[de]!==ie[ke];)ke--;for(;1<=de&&0<=ke;de--,ke--)if(Q[de]!==ie[ke]){if(de!==1||ke!==1)do if(de--,ke--,0>ke||Q[de]!==ie[ke]){var Le=`
`+Q[de].replace(" at new "," at ");return v.displayName&&Le.includes("<anonymous>")&&(Le=Le.replace("<anonymous>",v.displayName)),Le}while(1<=de&&0<=ke);break}}}finally{W=!1,Error.prepareStackTrace=N}return(v=v?v.displayName||v.name:"")?te(v):""}function oe(v){switch(v.tag){case 5:return te(v.type);case 16:return te("Lazy");case 13:return te("Suspense");case 19:return te("SuspenseList");case 0:case 2:case 15:return v=Z(v.type,!1),v;case 11:return v=Z(v.type.render,!1),v;case 1:return v=Z(v.type,!0),v;default:return""}}function pe(v){if(v==null)return null;if(typeof v=="function")return v.displayName||v.name||null;if(typeof v=="string")return v;switch(v){case k:return"Fragment";case A:return"Portal";case O:return"Profiler";case I:return"StrictMode";case D:return"Suspense";case B:return"SuspenseList"}if(typeof v=="object")switch(v.$$typeof){case L:return(v.displayName||"Context")+".Consumer";case M:return(v._context.displayName||"Context")+".Provider";case H:var _=v.render;return v=v.displayName,v||(v=_.displayName||_.name||"",v=v!==""?"ForwardRef("+v+")":"ForwardRef"),v;case U:return _=v.displayName||null,_!==null?_:pe(v.type)||"Memo";case G:_=v._payload,v=v._init;try{return pe(v(_))}catch{}}return null}function ce(v){var _=v.type;switch(v.tag){case 24:return"Cache";case 9:return(_.displayName||"Context")+".Consumer";case 10:return(_._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return v=_.render,v=v.displayName||v.name||"",_.displayName||(v!==""?"ForwardRef("+v+")":"ForwardRef");case 7:return"Fragment";case 5:return _;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return pe(_);case 8:return _===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof _=="function")return _.displayName||_.name||null;if(typeof _=="string")return _}return null}function he(v){switch(typeof v){case"boolean":case"number":case"string":case"undefined":return v;case"object":return v;default:return""}}function Ee(v){var _=v.type;return(v=v.nodeName)&&v.toLowerCase()==="input"&&(_==="checkbox"||_==="radio")}function Ae(v){var _=Ee(v)?"checked":"value",N=Object.getOwnPropertyDescriptor(v.constructor.prototype,_),j=""+v[_];if(!v.hasOwnProperty(_)&&typeof N<"u"&&typeof N.get=="function"&&typeof N.set=="function"){var Q=N.get,ie=N.set;return Object.defineProperty(v,_,{configurable:!0,get:function(){return Q.call(this)},set:function(de){j=""+de,ie.call(this,de)}}),Object.defineProperty(v,_,{enumerable:N.enumerable}),{getValue:function(){return j},setValue:function(de){j=""+de},stopTracking:function(){v._valueTracker=null,delete v[_]}}}}function ge(v){v._valueTracker||(v._valueTracker=Ae(v))}function me(v){if(!v)return!1;var _=v._valueTracker;if(!_)return!0;var N=_.getValue(),j="";return v&&(j=Ee(v)?v.checked?"true":"false":v.value),v=j,v!==N?(_.setValue(v),!0):!1}function Oe(v){if(v=v||(typeof document<"u"?document:void 0),typeof v>"u")return null;try{return v.activeElement||v.body}catch{return v.body}}function Me(v,_){var N=_.checked;return X({},_,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:N??v._wrapperState.initialChecked})}function Ye(v,_){var N=_.defaultValue==null?"":_.defaultValue,j=_.checked!=null?_.checked:_.defaultChecked;N=he(_.value!=null?_.value:N),v._wrapperState={initialChecked:j,initialValue:N,controlled:_.type==="checkbox"||_.type==="radio"?_.checked!=null:_.value!=null}}function lt(v,_){_=_.checked,_!=null&&x(v,"checked",_,!1)}function We(v,_){lt(v,_);var N=he(_.value),j=_.type;if(N!=null)j==="number"?(N===0&&v.value===""||v.value!=N)&&(v.value=""+N):v.value!==""+N&&(v.value=""+N);else if(j==="submit"||j==="reset"){v.removeAttribute("value");return}_.hasOwnProperty("value")?yt(v,_.type,N):_.hasOwnProperty("defaultValue")&&yt(v,_.type,he(_.defaultValue)),_.checked==null&&_.defaultChecked!=null&&(v.defaultChecked=!!_.defaultChecked)}function nt(v,_,N){if(_.hasOwnProperty("value")||_.hasOwnProperty("defaultValue")){var j=_.type;if(!(j!=="submit"&&j!=="reset"||_.value!==void 0&&_.value!==null))return;_=""+v._wrapperState.initialValue,N||_===v.value||(v.value=_),v.defaultValue=_}N=v.name,N!==""&&(v.name=""),v.defaultChecked=!!v._wrapperState.initialChecked,N!==""&&(v.name=N)}function yt(v,_,N){(_!=="number"||Oe(v.ownerDocument)!==v)&&(N==null?v.defaultValue=""+v._wrapperState.initialValue:v.defaultValue!==""+N&&(v.defaultValue=""+N))}var _t=Array.isArray;function Rt(v,_,N,j){if(v=v.options,_){_={};for(var Q=0;Q<N.length;Q++)_["$"+N[Q]]=!0;for(N=0;N<v.length;N++)Q=_.hasOwnProperty("$"+v[N].value),v[N].selected!==Q&&(v[N].selected=Q),Q&&j&&(v[N].defaultSelected=!0)}else{for(N=""+he(N),_=null,Q=0;Q<v.length;Q++){if(v[Q].value===N){v[Q].selected=!0,j&&(v[Q].defaultSelected=!0);return}_!==null||v[Q].disabled||(_=v[Q])}_!==null&&(_.selected=!0)}}function Et(v,_){if(_.dangerouslySetInnerHTML!=null)throw Error(n(91));return X({},_,{value:void 0,defaultValue:void 0,children:""+v._wrapperState.initialValue})}function Ke(v,_){var N=_.value;if(N==null){if(N=_.children,_=_.defaultValue,N!=null){if(_!=null)throw Error(n(92));if(_t(N)){if(1<N.length)throw Error(n(93));N=N[0]}_=N}_==null&&(_=""),N=_}v._wrapperState={initialValue:he(N)}}function Lt(v,_){var N=he(_.value),j=he(_.defaultValue);N!=null&&(N=""+N,N!==v.value&&(v.value=N),_.defaultValue==null&&v.defaultValue!==N&&(v.defaultValue=N)),j!=null&&(v.defaultValue=""+j)}function sn(v){var _=v.textContent;_===v._wrapperState.initialValue&&_!==""&&_!==null&&(v.value=_)}function Fe(v){switch(v){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Qe(v,_){return v==null||v==="http://www.w3.org/1999/xhtml"?Fe(_):v==="http://www.w3.org/2000/svg"&&_==="foreignObject"?"http://www.w3.org/1999/xhtml":v}var wt,Vt=function(v){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(_,N,j,Q){MSApp.execUnsafeLocalFunction(function(){return v(_,N,j,Q)})}:v}(function(v,_){if(v.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in v)v.innerHTML=_;else{for(wt=wt||document.createElement("div"),wt.innerHTML="<svg>"+_.valueOf().toString()+"</svg>",_=wt.firstChild;v.firstChild;)v.removeChild(v.firstChild);for(;_.firstChild;)v.appendChild(_.firstChild)}});function Wt(v,_){if(_){var N=v.firstChild;if(N&&N===v.lastChild&&N.nodeType===3){N.nodeValue=_;return}}v.textContent=_}var bn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Nn=["Webkit","ms","Moz","O"];Object.keys(bn).forEach(function(v){Nn.forEach(function(_){_=_+v.charAt(0).toUpperCase()+v.substring(1),bn[_]=bn[v]})});function Zn(v,_,N){return _==null||typeof _=="boolean"||_===""?"":N||typeof _!="number"||_===0||bn.hasOwnProperty(v)&&bn[v]?(""+_).trim():_+"px"}function wr(v,_){v=v.style;for(var N in _)if(_.hasOwnProperty(N)){var j=N.indexOf("--")===0,Q=Zn(N,_[N],j);N==="float"&&(N="cssFloat"),j?v.setProperty(N,Q):v[N]=Q}}var Hn=X({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function nr(v,_){if(_){if(Hn[v]&&(_.children!=null||_.dangerouslySetInnerHTML!=null))throw Error(n(137,v));if(_.dangerouslySetInnerHTML!=null){if(_.children!=null)throw Error(n(60));if(typeof _.dangerouslySetInnerHTML!="object"||!("__html"in _.dangerouslySetInnerHTML))throw Error(n(61))}if(_.style!=null&&typeof _.style!="object")throw Error(n(62))}}function Ei(v,_){if(v.indexOf("-")===-1)return typeof _.is=="string";switch(v){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Dr=null;function Co(v){return v=v.target||v.srcElement||window,v.correspondingUseElement&&(v=v.correspondingUseElement),v.nodeType===3?v.parentNode:v}var Ji=null,Di=null,Zi=null;function ei(v){if(v=Na(v)){if(typeof Ji!="function")throw Error(n(280));var _=v.stateNode;_&&(_=Oo(_),Ji(v.stateNode,v.type,_))}}function po(v){Di?Zi?Zi.push(v):Zi=[v]:Di=v}function Wu(){if(Di){var v=Di,_=Zi;if(Zi=Di=null,ei(v),_)for(v=0;v<_.length;v++)ei(_[v])}}function Ea(v,_){return v(_)}function Sa(){}var Kr=!1;function Oi(v,_,N){if(Kr)return v(_,N);Kr=!0;try{return Ea(v,_,N)}finally{Kr=!1,(Di!==null||Zi!==null)&&(Sa(),Wu())}}function si(v,_){var N=v.stateNode;if(N===null)return null;var j=Oo(N);if(j===null)return null;N=j[_];e:switch(_){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(j=!j.disabled)||(v=v.type,j=!(v==="button"||v==="input"||v==="select"||v==="textarea")),v=!j;break e;default:v=!1}if(v)return null;if(N&&typeof N!="function")throw Error(n(231,_,typeof N));return N}var Js=!1;if(a)try{var Xr={};Object.defineProperty(Xr,"passive",{get:function(){Js=!0}}),window.addEventListener("test",Xr,Xr),window.removeEventListener("test",Xr,Xr)}catch{Js=!1}function Hi(v,_,N,j,Q,ie,de,ke,Le){var st=Array.prototype.slice.call(arguments,3);try{_.apply(N,st)}catch(Ot){this.onError(Ot)}}var Zs=!1,mo=null,Qo=!1,Ta=null,dd={onError:function(v){Zs=!0,mo=v}};function Hr(v,_,N,j,Q,ie,de,ke,Le){Zs=!1,mo=null,Hi.apply(dd,arguments)}function Rl(v,_,N,j,Q,ie,de,ke,Le){if(Hr.apply(this,arguments),Zs){if(Zs){var st=mo;Zs=!1,mo=null}else throw Error(n(198));Qo||(Qo=!0,Ta=st)}}function bs(v){var _=v,N=v;if(v.alternate)for(;_.return;)_=_.return;else{v=_;do _=v,_.flags&4098&&(N=_.return),v=_.return;while(v)}return _.tag===3?N:null}function Ya(v){if(v.tag===13){var _=v.memoizedState;if(_===null&&(v=v.alternate,v!==null&&(_=v.memoizedState)),_!==null)return _.dehydrated}return null}function Jo(v){if(bs(v)!==v)throw Error(n(188))}function mh(v){var _=v.alternate;if(!_){if(_=bs(v),_===null)throw Error(n(188));return _!==v?null:v}for(var N=v,j=_;;){var Q=N.return;if(Q===null)break;var ie=Q.alternate;if(ie===null){if(j=Q.return,j!==null){N=j;continue}break}if(Q.child===ie.child){for(ie=Q.child;ie;){if(ie===N)return Jo(Q),v;if(ie===j)return Jo(Q),_;ie=ie.sibling}throw Error(n(188))}if(N.return!==j.return)N=Q,j=ie;else{for(var de=!1,ke=Q.child;ke;){if(ke===N){de=!0,N=Q,j=ie;break}if(ke===j){de=!0,j=Q,N=ie;break}ke=ke.sibling}if(!de){for(ke=ie.child;ke;){if(ke===N){de=!0,N=ie,j=Q;break}if(ke===j){de=!0,j=ie,N=Q;break}ke=ke.sibling}if(!de)throw Error(n(189))}}if(N.alternate!==j)throw Error(n(190))}if(N.tag!==3)throw Error(n(188));return N.stateNode.current===N?v:_}function hd(v){return v=mh(v),v!==null?df(v):null}function df(v){if(v.tag===5||v.tag===6)return v;for(v=v.child;v!==null;){var _=df(v);if(_!==null)return _;v=v.sibling}return null}var hf=t.unstable_scheduleCallback,yc=t.unstable_cancelCallback,vc=t.unstable_shouldYield,bc=t.unstable_requestPaint,Er=t.unstable_now,xc=t.unstable_getCurrentPriorityLevel,xs=t.unstable_ImmediatePriority,Ka=t.unstable_UserBlockingPriority,As=t.unstable_NormalPriority,Il=t.unstable_LowPriority,_c=t.unstable_IdlePriority,Zo=null,qi=null;function ti(v){if(qi&&typeof qi.onCommitFiberRoot=="function")try{qi.onCommitFiberRoot(Zo,v,void 0,(v.current.flags&128)===128)}catch{}}var rr=Math.clz32?Math.clz32:Se,ve=Math.log,Ie=Math.LN2;function Se(v){return v>>>=0,v===0?32:31-(ve(v)/Ie|0)|0}var Be=64,Ue=4194304;function De(v){switch(v&-v){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return v&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return v&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return v}}function ht(v,_){var N=v.pendingLanes;if(N===0)return 0;var j=0,Q=v.suspendedLanes,ie=v.pingedLanes,de=N&268435455;if(de!==0){var ke=de&~Q;ke!==0?j=De(ke):(ie&=de,ie!==0&&(j=De(ie)))}else de=N&~Q,de!==0?j=De(de):ie!==0&&(j=De(ie));if(j===0)return 0;if(_!==0&&_!==j&&!(_&Q)&&(Q=j&-j,ie=_&-_,Q>=ie||Q===16&&(ie&4194240)!==0))return _;if(j&4&&(j|=N&16),_=v.entangledLanes,_!==0)for(v=v.entanglements,_&=j;0<_;)N=31-rr(_),Q=1<<N,j|=v[N],_&=~Q;return j}function At(v,_){switch(v){case 1:case 2:case 4:return _+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return _+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Pt(v,_){for(var N=v.suspendedLanes,j=v.pingedLanes,Q=v.expirationTimes,ie=v.pendingLanes;0<ie;){var de=31-rr(ie),ke=1<<de,Le=Q[de];Le===-1?(!(ke&N)||ke&j)&&(Q[de]=At(ke,_)):Le<=_&&(v.expiredLanes|=ke),ie&=~ke}}function kt(v){return v=v.pendingLanes&-1073741825,v!==0?v:v&1073741824?1073741824:0}function jt(){var v=Be;return Be<<=1,!(Be&4194240)&&(Be=64),v}function Zt(v){for(var _=[],N=0;31>N;N++)_.push(v);return _}function qn(v,_,N){v.pendingLanes|=_,_!==536870912&&(v.suspendedLanes=0,v.pingedLanes=0),v=v.eventTimes,_=31-rr(_),v[_]=N}function Sn(v,_){var N=v.pendingLanes&~_;v.pendingLanes=_,v.suspendedLanes=0,v.pingedLanes=0,v.expiredLanes&=_,v.mutableReadLanes&=_,v.entangledLanes&=_,_=v.entanglements;var j=v.eventTimes;for(v=v.expirationTimes;0<N;){var Q=31-rr(N),ie=1<<Q;_[Q]=0,j[Q]=-1,v[Q]=-1,N&=~ie}}function lr(v,_){var N=v.entangledLanes|=_;for(v=v.entanglements;N;){var j=31-rr(N),Q=1<<j;Q&_|v[j]&_&&(v[j]|=_),N&=~Q}}var _n=0;function br(v){return v&=-v,1<v?4<v?v&268435455?16:536870912:4:1}var ls,Ao,Pl,pd,Gu,pf=!1,eo=[],Mi=null,ko=null,ea=null,cr=new Map,Ca=new Map,Aa=[],gp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Nl(v,_){switch(v){case"focusin":case"focusout":Mi=null;break;case"dragenter":case"dragleave":ko=null;break;case"mouseover":case"mouseout":ea=null;break;case"pointerover":case"pointerout":cr.delete(_.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ca.delete(_.pointerId)}}function ks(v,_,N,j,Q,ie){return v===null||v.nativeEvent!==ie?(v={blockedOn:_,domEventName:N,eventSystemFlags:j,nativeEvent:ie,targetContainers:[Q]},_!==null&&(_=Na(_),_!==null&&Ao(_)),v):(v.eventSystemFlags|=j,_=v.targetContainers,Q!==null&&_.indexOf(Q)===-1&&_.push(Q),v)}function Rs(v,_,N,j,Q){switch(_){case"focusin":return Mi=ks(Mi,v,_,N,j,Q),!0;case"dragenter":return ko=ks(ko,v,_,N,j,Q),!0;case"mouseover":return ea=ks(ea,v,_,N,j,Q),!0;case"pointerover":var ie=Q.pointerId;return cr.set(ie,ks(cr.get(ie)||null,v,_,N,j,Q)),!0;case"gotpointercapture":return ie=Q.pointerId,Ca.set(ie,ks(Ca.get(ie)||null,v,_,N,j,Q)),!0}return!1}function md(v){var _=Rc(v.target);if(_!==null){var N=bs(_);if(N!==null){if(_=N.tag,_===13){if(_=Ya(N),_!==null){v.blockedOn=_,Gu(v.priority,function(){Pl(N)});return}}else if(_===3&&N.stateNode.current.memoizedState.isDehydrated){v.blockedOn=N.tag===3?N.stateNode.containerInfo:null;return}}}v.blockedOn=null}function wc(v){if(v.blockedOn!==null)return!1;for(var _=v.targetContainers;0<_.length;){var N=Or(v.domEventName,v.eventSystemFlags,_[0],v.nativeEvent);if(N===null){N=v.nativeEvent;var j=new N.constructor(N.type,N);Dr=j,N.target.dispatchEvent(j),Dr=null}else return _=Na(N),_!==null&&Ao(_),v.blockedOn=N,!1;_.shift()}return!0}function Dl(v,_,N){wc(v)&&N.delete(_)}function Y0(){pf=!1,Mi!==null&&wc(Mi)&&(Mi=null),ko!==null&&wc(ko)&&(ko=null),ea!==null&&wc(ea)&&(ea=null),cr.forEach(Dl),Ca.forEach(Dl)}function xr(v,_){v.blockedOn===_&&(v.blockedOn=null,pf||(pf=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Y0)))}function Gn(v){function _(Q){return xr(Q,v)}if(0<eo.length){xr(eo[0],v);for(var N=1;N<eo.length;N++){var j=eo[N];j.blockedOn===v&&(j.blockedOn=null)}}for(Mi!==null&&xr(Mi,v),ko!==null&&xr(ko,v),ea!==null&&xr(ea,v),cr.forEach(_),Ca.forEach(_),N=0;N<Aa.length;N++)j=Aa[N],j.blockedOn===v&&(j.blockedOn=null);for(;0<Aa.length&&(N=Aa[0],N.blockedOn===null);)md(N),N.blockedOn===null&&Aa.shift()}var Ec=w.ReactCurrentBatchConfig,Ce=!0;function Ne(v,_,N,j){var Q=_n,ie=Ec.transition;Ec.transition=null;try{_n=1,hn(v,_,N,j)}finally{_n=Q,Ec.transition=ie}}function rt(v,_,N,j){var Q=_n,ie=Ec.transition;Ec.transition=null;try{_n=4,hn(v,_,N,j)}finally{_n=Q,Ec.transition=ie}}function hn(v,_,N,j){if(Ce){var Q=Or(v,_,N,j);if(Q===null)W1(v,_,j,ir,N),Nl(v,j);else if(Rs(Q,v,_,N,j))j.stopPropagation();else if(Nl(v,j),_&4&&-1<gp.indexOf(v)){for(;Q!==null;){var ie=Na(Q);if(ie!==null&&ls(ie),ie=Or(v,_,N,j),ie===null&&W1(v,_,j,ir,N),ie===Q)break;Q=ie}Q!==null&&j.stopPropagation()}else W1(v,_,j,null,N)}}var ir=null;function Or(v,_,N,j){if(ir=null,v=Co(j),v=Rc(v),v!==null)if(_=bs(v),_===null)v=null;else if(N=_.tag,N===13){if(v=Ya(_),v!==null)return v;v=null}else if(N===3){if(_.stateNode.current.memoizedState.isDehydrated)return _.tag===3?_.stateNode.containerInfo:null;v=null}else _!==v&&(v=null);return ir=v,null}function gi(v){switch(v){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(xc()){case xs:return 1;case Ka:return 4;case As:case Il:return 16;case _c:return 536870912;default:return 16}default:return 16}}var dn=null,Tr=null,Ir=null;function _s(){if(Ir)return Ir;var v,_=Tr,N=_.length,j,Q="value"in dn?dn.value:dn.textContent,ie=Q.length;for(v=0;v<N&&_[v]===Q[v];v++);var de=N-v;for(j=1;j<=de&&_[N-j]===Q[ie-j];j++);return Ir=Q.slice(v,1<j?1-j:void 0)}function ta(v){var _=v.keyCode;return"charCode"in v?(v=v.charCode,v===0&&_===13&&(v=13)):v=_,v===10&&(v=13),32<=v||v===13?v:0}function Mr(){return!0}function js(){return!1}function Li(v){function _(N,j,Q,ie,de){this._reactName=N,this._targetInst=Q,this.type=j,this.nativeEvent=ie,this.target=de,this.currentTarget=null;for(var ke in v)v.hasOwnProperty(ke)&&(N=v[ke],this[ke]=N?N(ie):ie[ke]);return this.isDefaultPrevented=(ie.defaultPrevented!=null?ie.defaultPrevented:ie.returnValue===!1)?Mr:js,this.isPropagationStopped=js,this}return X(_.prototype,{preventDefault:function(){this.defaultPrevented=!0;var N=this.nativeEvent;N&&(N.preventDefault?N.preventDefault():typeof N.returnValue!="unknown"&&(N.returnValue=!1),this.isDefaultPrevented=Mr)},stopPropagation:function(){var N=this.nativeEvent;N&&(N.stopPropagation?N.stopPropagation():typeof N.cancelBubble!="unknown"&&(N.cancelBubble=!0),this.isPropagationStopped=Mr)},persist:function(){},isPersistent:Mr}),_}var to={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(v){return v.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xa=Li(to),na=X({},to,{view:0,detail:0}),Fg=Li(na),no,Sc,oi,Ro=X({},na,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xu,button:0,buttons:0,relatedTarget:function(v){return v.relatedTarget===void 0?v.fromElement===v.srcElement?v.toElement:v.fromElement:v.relatedTarget},movementX:function(v){return"movementX"in v?v.movementX:(v!==oi&&(oi&&v.type==="mousemove"?(no=v.screenX-oi.screenX,Sc=v.screenY-oi.screenY):Sc=no=0,oi=v),no)},movementY:function(v){return"movementY"in v?v.movementY:Sc}}),yi=Li(Ro),ka=X({},Ro,{dataTransfer:0}),ra=Li(ka),gd=X({},na,{relatedTarget:0}),vi=Li(gd),Yu=X({},to,{animationName:0,elapsedTime:0,pseudoElement:0}),Ku=Li(Yu),$g=X({},to,{clipboardData:function(v){return"clipboardData"in v?v.clipboardData:window.clipboardData}}),yd=Li($g),Bg=X({},to,{data:0}),mf=Li(Bg),gh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ra={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vd(v){var _=this.nativeEvent;return _.getModifierState?_.getModifierState(v):(v=gf[v])?!!_[v]:!1}function xu(){return vd}var F=X({},na,{key:function(v){if(v.key){var _=gh[v.key]||v.key;if(_!=="Unidentified")return _}return v.type==="keypress"?(v=ta(v),v===13?"Enter":String.fromCharCode(v)):v.type==="keydown"||v.type==="keyup"?Ra[v.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xu,charCode:function(v){return v.type==="keypress"?ta(v):0},keyCode:function(v){return v.type==="keydown"||v.type==="keyup"?v.keyCode:0},which:function(v){return v.type==="keypress"?ta(v):v.type==="keydown"||v.type==="keyup"?v.keyCode:0}}),re=Li(F),le=X({},Ro,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),be=Li(le),Xe=X({},na,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xu}),ut=Li(Xe),Xt=X({},to,{propertyName:0,elapsedTime:0,pseudoElement:0}),Lr=Li(Xt),Us=X({},Ro,{deltaX:function(v){return"deltaX"in v?v.deltaX:"wheelDeltaX"in v?-v.wheelDeltaX:0},deltaY:function(v){return"deltaY"in v?v.deltaY:"wheelDeltaY"in v?-v.wheelDeltaY:"wheelDelta"in v?-v.wheelDelta:0},deltaZ:0,deltaMode:0}),Pr=Li(Us),ai=[9,13,27,32],cs=a&&"CompositionEvent"in window,Io=null;a&&"documentMode"in document&&(Io=document.documentMode);var go=a&&"TextEvent"in window&&!Io,yo=a&&(!cs||Io&&8<Io&&11>=Io),Ol=" ",z1=!1;function hx(v,_){switch(v){case"keyup":return ai.indexOf(_.keyCode)!==-1;case"keydown":return _.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Tc(v){return v=v.detail,typeof v=="object"&&"data"in v?v.data:null}var Xu=!1;function yh(v,_){switch(v){case"compositionend":return Tc(_);case"keypress":return _.which!==32?null:(z1=!0,Ol);case"textInput":return v=_.data,v===Ol&&z1?null:v;default:return null}}function a2(v,_){if(Xu)return v==="compositionend"||!cs&&hx(v,_)?(v=_s(),Ir=Tr=dn=null,Xu=!1,v):null;switch(v){case"paste":return null;case"keypress":if(!(_.ctrlKey||_.altKey||_.metaKey)||_.ctrlKey&&_.altKey){if(_.char&&1<_.char.length)return _.char;if(_.which)return String.fromCharCode(_.which)}return null;case"compositionend":return yo&&_.locale!=="ko"?null:_.data;default:return null}}var bd={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cc(v){var _=v&&v.nodeName&&v.nodeName.toLowerCase();return _==="input"?!!bd[v.type]:_==="textarea"}function K0(v,_,N,j){po(j),_=G1(_,"onChange"),0<_.length&&(N=new Xa("onChange","change",null,N,j),v.push({event:N,listeners:_}))}var Qu=null,Ac=null;function u2(v){vx(v,0)}function vh(v){var _=On(v);if(me(_))return v}function Ml(v,_){if(v==="change")return _}var kc=!1;if(a){var Po;if(a){var Ju="oninput"in document;if(!Ju){var V1=document.createElement("div");V1.setAttribute("oninput","return;"),Ju=typeof V1.oninput=="function"}Po=Ju}else Po=!1;kc=Po&&(!document.documentMode||9<document.documentMode)}function yp(){Qu&&(Qu.detachEvent("onpropertychange",px),Ac=Qu=null)}function px(v){if(v.propertyName==="value"&&vh(Ac)){var _=[];K0(_,Ac,v,Co(v)),Oi(u2,_)}}function mx(v,_,N){v==="focusin"?(yp(),Qu=_,Ac=N,Qu.attachEvent("onpropertychange",px)):v==="focusout"&&yp()}function ws(v){if(v==="selectionchange"||v==="keyup"||v==="keydown")return vh(Ac)}function xd(v,_){if(v==="click")return vh(_)}function ze(v,_){if(v==="input"||v==="change")return vh(_)}function mt(v,_){return v===_&&(v!==0||1/v===1/_)||v!==v&&_!==_}var et=typeof Object.is=="function"?Object.is:mt;function on(v,_){if(et(v,_))return!0;if(typeof v!="object"||v===null||typeof _!="object"||_===null)return!1;var N=Object.keys(v),j=Object.keys(_);if(N.length!==j.length)return!1;for(j=0;j<N.length;j++){var Q=N[j];if(!u.call(_,Q)||!et(v[Q],_[Q]))return!1}return!0}function $n(v){for(;v&&v.firstChild;)v=v.firstChild;return v}function Dn(v,_){var N=$n(v);v=0;for(var j;N;){if(N.nodeType===3){if(j=v+N.textContent.length,v<=_&&j>=_)return{node:N,offset:_-v};v=j}e:{for(;N;){if(N.nextSibling){N=N.nextSibling;break e}N=N.parentNode}N=void 0}N=$n(N)}}function Cr(v,_){return v&&_?v===_?!0:v&&v.nodeType===3?!1:_&&_.nodeType===3?Cr(v,_.parentNode):"contains"in v?v.contains(_):v.compareDocumentPosition?!!(v.compareDocumentPosition(_)&16):!1:!1}function er(){for(var v=window,_=Oe();_ instanceof v.HTMLIFrameElement;){try{var N=typeof _.contentWindow.location.href=="string"}catch{N=!1}if(N)v=_.contentWindow;else break;_=Oe(v.document)}return _}function bh(v){var _=v&&v.nodeName&&v.nodeName.toLowerCase();return _&&(_==="input"&&(v.type==="text"||v.type==="search"||v.type==="tel"||v.type==="url"||v.type==="password")||_==="textarea"||v.contentEditable==="true")}function jg(v){var _=er(),N=v.focusedElem,j=v.selectionRange;if(_!==N&&N&&N.ownerDocument&&Cr(N.ownerDocument.documentElement,N)){if(j!==null&&bh(N)){if(_=j.start,v=j.end,v===void 0&&(v=_),"selectionStart"in N)N.selectionStart=_,N.selectionEnd=Math.min(v,N.value.length);else if(v=(_=N.ownerDocument||document)&&_.defaultView||window,v.getSelection){v=v.getSelection();var Q=N.textContent.length,ie=Math.min(j.start,Q);j=j.end===void 0?ie:Math.min(j.end,Q),!v.extend&&ie>j&&(Q=j,j=ie,ie=Q),Q=Dn(N,ie);var de=Dn(N,j);Q&&de&&(v.rangeCount!==1||v.anchorNode!==Q.node||v.anchorOffset!==Q.offset||v.focusNode!==de.node||v.focusOffset!==de.offset)&&(_=_.createRange(),_.setStart(Q.node,Q.offset),v.removeAllRanges(),ie>j?(v.addRange(_),v.extend(de.node,de.offset)):(_.setEnd(de.node,de.offset),v.addRange(_)))}}for(_=[],v=N;v=v.parentNode;)v.nodeType===1&&_.push({element:v,left:v.scrollLeft,top:v.scrollTop});for(typeof N.focus=="function"&&N.focus(),N=0;N<_.length;N++)v=_[N],v.element.scrollLeft=v.left,v.element.scrollTop=v.top}}var Ia=a&&"documentMode"in document&&11>=document.documentMode,_d=null,No=null,Ll=null,xh=!1;function vp(v,_,N){var j=N.window===N?N.document:N.nodeType===9?N:N.ownerDocument;xh||_d==null||_d!==Oe(j)||(j=_d,"selectionStart"in j&&bh(j)?j={start:j.selectionStart,end:j.selectionEnd}:(j=(j.ownerDocument&&j.ownerDocument.defaultView||window).getSelection(),j={anchorNode:j.anchorNode,anchorOffset:j.anchorOffset,focusNode:j.focusNode,focusOffset:j.focusOffset}),Ll&&on(Ll,j)||(Ll=j,j=G1(No,"onSelect"),0<j.length&&(_=new Xa("onSelect","select",null,_,N),v.push({event:_,listeners:j}),_.target=_d)))}function mr(v,_){var N={};return N[v.toLowerCase()]=_.toLowerCase(),N["Webkit"+v]="webkit"+_,N["Moz"+v]="moz"+_,N}var ia={animationend:mr("Animation","AnimationEnd"),animationiteration:mr("Animation","AnimationIteration"),animationstart:mr("Animation","AnimationStart"),transitionend:mr("Transition","TransitionEnd")},_h={},bp={};a&&(bp=document.createElement("div").style,"AnimationEvent"in window||(delete ia.animationend.animation,delete ia.animationiteration.animation,delete ia.animationstart.animation),"TransitionEvent"in window||delete ia.transitionend.transition);function X0(v){if(_h[v])return _h[v];if(!ia[v])return v;var _=ia[v],N;for(N in _)if(_.hasOwnProperty(N)&&N in bp)return _h[v]=_[N];return v}var gx=X0("animationend"),yx=X0("animationiteration"),Q0=X0("animationstart"),yf=X0("transitionend"),J0=new Map,H1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fl(v,_){J0.set(v,_),s(_,[v])}for(var Ug=0;Ug<H1.length;Ug++){var wh=H1[Ug],zg=wh.toLowerCase(),Vg=wh[0].toUpperCase()+wh.slice(1);Fl(zg,"on"+Vg)}Fl(gx,"onAnimationEnd"),Fl(yx,"onAnimationIteration"),Fl(Q0,"onAnimationStart"),Fl("dblclick","onDoubleClick"),Fl("focusin","onFocus"),Fl("focusout","onBlur"),Fl(yf,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $l="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Eh=new Set("cancel close invalid load scroll toggle".split(" ").concat($l));function xp(v,_,N){var j=v.type||"unknown-event";v.currentTarget=N,Rl(j,_,void 0,v),v.currentTarget=null}function vx(v,_){_=(_&4)!==0;for(var N=0;N<v.length;N++){var j=v[N],Q=j.event;j=j.listeners;e:{var ie=void 0;if(_)for(var de=j.length-1;0<=de;de--){var ke=j[de],Le=ke.instance,st=ke.currentTarget;if(ke=ke.listener,Le!==ie&&Q.isPropagationStopped())break e;xp(Q,ke,st),ie=Le}else for(de=0;de<j.length;de++){if(ke=j[de],Le=ke.instance,st=ke.currentTarget,ke=ke.listener,Le!==ie&&Q.isPropagationStopped())break e;xp(Q,ke,st),ie=Le}}}if(Qo)throw v=Ta,Qo=!1,Ta=null,v}function Wi(v,_){var N=_[Yg];N===void 0&&(N=_[Yg]=new Set);var j=v+"__bubble";N.has(j)||(Hg(_,v,2,!1),N.add(j))}function q1(v,_,N){var j=0;_&&(j|=4),Hg(N,v,j,_)}var Sh="_reactListening"+Math.random().toString(36).slice(2);function vf(v){if(!v[Sh]){v[Sh]=!0,r.forEach(function(N){N!=="selectionchange"&&(Eh.has(N)||q1(N,!1,v),q1(N,!0,v))});var _=v.nodeType===9?v:v.ownerDocument;_===null||_[Sh]||(_[Sh]=!0,q1("selectionchange",!1,_))}}function Hg(v,_,N,j){switch(gi(_)){case 1:var Q=Ne;break;case 4:Q=rt;break;default:Q=hn}N=Q.bind(null,_,N,v),Q=void 0,!Js||_!=="touchstart"&&_!=="touchmove"&&_!=="wheel"||(Q=!0),j?Q!==void 0?v.addEventListener(_,N,{capture:!0,passive:Q}):v.addEventListener(_,N,!0):Q!==void 0?v.addEventListener(_,N,{passive:Q}):v.addEventListener(_,N,!1)}function W1(v,_,N,j,Q){var ie=j;if(!(_&1)&&!(_&2)&&j!==null)e:for(;;){if(j===null)return;var de=j.tag;if(de===3||de===4){var ke=j.stateNode.containerInfo;if(ke===Q||ke.nodeType===8&&ke.parentNode===Q)break;if(de===4)for(de=j.return;de!==null;){var Le=de.tag;if((Le===3||Le===4)&&(Le=de.stateNode.containerInfo,Le===Q||Le.nodeType===8&&Le.parentNode===Q))return;de=de.return}for(;ke!==null;){if(de=Rc(ke),de===null)return;if(Le=de.tag,Le===5||Le===6){j=ie=de;continue e}ke=ke.parentNode}}j=j.return}Oi(function(){var st=ie,Ot=Co(N),Ut=[];e:{var Dt=J0.get(v);if(Dt!==void 0){var pn=Xa,En=v;switch(v){case"keypress":if(ta(N)===0)break e;case"keydown":case"keyup":pn=re;break;case"focusin":En="focus",pn=vi;break;case"focusout":En="blur",pn=vi;break;case"beforeblur":case"afterblur":pn=vi;break;case"click":if(N.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":pn=yi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":pn=ra;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":pn=ut;break;case gx:case yx:case Q0:pn=Ku;break;case yf:pn=Lr;break;case"scroll":pn=Fg;break;case"wheel":pn=Pr;break;case"copy":case"cut":case"paste":pn=yd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":pn=be}var Tn=(_&4)!==0,so=!Tn&&v==="scroll",Je=Tn?Dt!==null?Dt+"Capture":null:Dt;Tn=[];for(var je=st,tt;je!==null;){tt=je;var Yt=tt.stateNode;if(tt.tag===5&&Yt!==null&&(tt=Yt,Je!==null&&(Yt=si(je,Je),Yt!=null&&Tn.push(_p(je,Yt,tt)))),so)break;je=je.return}0<Tn.length&&(Dt=new pn(Dt,En,null,N,Ot),Ut.push({event:Dt,listeners:Tn}))}}if(!(_&7)){e:{if(Dt=v==="mouseover"||v==="pointerover",pn=v==="mouseout"||v==="pointerout",Dt&&N!==Dr&&(En=N.relatedTarget||N.fromElement)&&(Rc(En)||En[_u]))break e;if((pn||Dt)&&(Dt=Ot.window===Ot?Ot:(Dt=Ot.ownerDocument)?Dt.defaultView||Dt.parentWindow:window,pn?(En=N.relatedTarget||N.toElement,pn=st,En=En?Rc(En):null,En!==null&&(so=bs(En),En!==so||En.tag!==5&&En.tag!==6)&&(En=null)):(pn=null,En=st),pn!==En)){if(Tn=yi,Yt="onMouseLeave",Je="onMouseEnter",je="mouse",(v==="pointerout"||v==="pointerover")&&(Tn=be,Yt="onPointerLeave",Je="onPointerEnter",je="pointer"),so=pn==null?Dt:On(pn),tt=En==null?Dt:On(En),Dt=new Tn(Yt,je+"leave",pn,N,Ot),Dt.target=so,Dt.relatedTarget=tt,Yt=null,Rc(Ot)===st&&(Tn=new Tn(Je,je+"enter",En,N,Ot),Tn.target=tt,Tn.relatedTarget=so,Yt=Tn),so=Yt,pn&&En)t:{for(Tn=pn,Je=En,je=0,tt=Tn;tt;tt=wp(tt))je++;for(tt=0,Yt=Je;Yt;Yt=wp(Yt))tt++;for(;0<je-tt;)Tn=wp(Tn),je--;for(;0<tt-je;)Je=wp(Je),tt--;for(;je--;){if(Tn===Je||Je!==null&&Tn===Je.alternate)break t;Tn=wp(Tn),Je=wp(Je)}Tn=null}else Tn=null;pn!==null&&ro(Ut,Dt,pn,Tn,!1),En!==null&&so!==null&&ro(Ut,so,En,Tn,!0)}}e:{if(Dt=st?On(st):window,pn=Dt.nodeName&&Dt.nodeName.toLowerCase(),pn==="select"||pn==="input"&&Dt.type==="file")var Cn=Ml;else if(Cc(Dt))if(kc)Cn=ze;else{Cn=ws;var jn=mx}else(pn=Dt.nodeName)&&pn.toLowerCase()==="input"&&(Dt.type==="checkbox"||Dt.type==="radio")&&(Cn=xd);if(Cn&&(Cn=Cn(v,st))){K0(Ut,Cn,N,Ot);break e}jn&&jn(v,Dt,st),v==="focusout"&&(jn=Dt._wrapperState)&&jn.controlled&&Dt.type==="number"&&yt(Dt,"number",Dt.value)}switch(jn=st?On(st):window,v){case"focusin":(Cc(jn)||jn.contentEditable==="true")&&(_d=jn,No=st,Ll=null);break;case"focusout":Ll=No=_d=null;break;case"mousedown":xh=!0;break;case"contextmenu":case"mouseup":case"dragend":xh=!1,vp(Ut,N,Ot);break;case"selectionchange":if(Ia)break;case"keydown":case"keyup":vp(Ut,N,Ot)}var Un;if(cs)e:{switch(v){case"compositionstart":var Xn="onCompositionStart";break e;case"compositionend":Xn="onCompositionEnd";break e;case"compositionupdate":Xn="onCompositionUpdate";break e}Xn=void 0}else Xu?hx(v,N)&&(Xn="onCompositionEnd"):v==="keydown"&&N.keyCode===229&&(Xn="onCompositionStart");Xn&&(yo&&N.locale!=="ko"&&(Xu||Xn!=="onCompositionStart"?Xn==="onCompositionEnd"&&Xu&&(Un=_s()):(dn=Ot,Tr="value"in dn?dn.value:dn.textContent,Xu=!0)),jn=G1(st,Xn),0<jn.length&&(Xn=new mf(Xn,v,null,N,Ot),Ut.push({event:Xn,listeners:jn}),Un?Xn.data=Un:(Un=Tc(N),Un!==null&&(Xn.data=Un)))),(Un=go?yh(v,N):a2(v,N))&&(st=G1(st,"onBeforeInput"),0<st.length&&(Ot=new mf("onBeforeInput","beforeinput",null,N,Ot),Ut.push({event:Ot,listeners:st}),Ot.data=Un))}vx(Ut,_)})}function _p(v,_,N){return{instance:v,listener:_,currentTarget:N}}function G1(v,_){for(var N=_+"Capture",j=[];v!==null;){var Q=v,ie=Q.stateNode;Q.tag===5&&ie!==null&&(Q=ie,ie=si(v,N),ie!=null&&j.unshift(_p(v,ie,Q)),ie=si(v,_),ie!=null&&j.push(_p(v,ie,Q))),v=v.return}return j}function wp(v){if(v===null)return null;do v=v.return;while(v&&v.tag!==5);return v||null}function ro(v,_,N,j,Q){for(var ie=_._reactName,de=[];N!==null&&N!==j;){var ke=N,Le=ke.alternate,st=ke.stateNode;if(Le!==null&&Le===j)break;ke.tag===5&&st!==null&&(ke=st,Q?(Le=si(N,ie),Le!=null&&de.unshift(_p(N,Le,ke))):Q||(Le=si(N,ie),Le!=null&&de.push(_p(N,Le,ke)))),N=N.return}de.length!==0&&v.push({event:_,listeners:de})}var Pa=/\r\n?/g,l2=/\u0000|\uFFFD/g;function bx(v){return(typeof v=="string"?v:""+v).replace(Pa,`
`).replace(l2,"")}function Z0(v,_,N){if(_=bx(_),bx(v)!==_&&N)throw Error(n(425))}function Ep(){}var qg=null,Sp=null;function Wg(v,_){return v==="textarea"||v==="noscript"||typeof _.children=="string"||typeof _.children=="number"||typeof _.dangerouslySetInnerHTML=="object"&&_.dangerouslySetInnerHTML!==null&&_.dangerouslySetInnerHTML.__html!=null}var Do=typeof setTimeout=="function"?setTimeout:void 0,Tp=typeof clearTimeout=="function"?clearTimeout:void 0,wd=typeof Promise=="function"?Promise:void 0,Gg=typeof queueMicrotask=="function"?queueMicrotask:typeof wd<"u"?function(v){return wd.resolve(null).then(v).catch(Cp)}:Do;function Cp(v){setTimeout(function(){throw v})}function Y1(v,_){var N=_,j=0;do{var Q=N.nextSibling;if(v.removeChild(N),Q&&Q.nodeType===8)if(N=Q.data,N==="/$"){if(j===0){v.removeChild(Q),Gn(_);return}j--}else N!=="$"&&N!=="$?"&&N!=="$!"||j++;N=Q}while(N);Gn(_)}function bf(v){for(;v!=null;v=v.nextSibling){var _=v.nodeType;if(_===1||_===3)break;if(_===8){if(_=v.data,_==="$"||_==="$!"||_==="$?")break;if(_==="/$")return null}}return v}function Ap(v){v=v.previousSibling;for(var _=0;v;){if(v.nodeType===8){var N=v.data;if(N==="$"||N==="$!"||N==="$?"){if(_===0)return v;_--}else N==="/$"&&_++}v=v.previousSibling}return null}var Th=Math.random().toString(36).slice(2),Bl="__reactFiber$"+Th,Ch="__reactProps$"+Th,_u="__reactContainer$"+Th,Yg="__reactEvents$"+Th,ye="__reactListeners$"+Th,kp="__reactHandles$"+Th;function Rc(v){var _=v[Bl];if(_)return _;for(var N=v.parentNode;N;){if(_=N[_u]||N[Bl]){if(N=_.alternate,_.child!==null||N!==null&&N.child!==null)for(v=Ap(v);v!==null;){if(N=v[Bl])return N;v=Ap(v)}return _}v=N,N=v.parentNode}return null}function Na(v){return v=v[Bl]||v[_u],!v||v.tag!==5&&v.tag!==6&&v.tag!==13&&v.tag!==3?null:v}function On(v){if(v.tag===5||v.tag===6)return v.stateNode;throw Error(n(33))}function Oo(v){return v[Ch]||null}var K1=[],Rp=-1;function Qa(v){return{current:v}}function Gi(v){0>Rp||(v.current=K1[Rp],K1[Rp]=null,Rp--)}function Fi(v,_){Rp++,K1[Rp]=v.current,v.current=_}var xf={},sa=Qa(xf),Da=Qa(!1),Oa=xf;function Ip(v,_){var N=v.type.contextTypes;if(!N)return xf;var j=v.stateNode;if(j&&j.__reactInternalMemoizedUnmaskedChildContext===_)return j.__reactInternalMemoizedMaskedChildContext;var Q={},ie;for(ie in N)Q[ie]=_[ie];return j&&(v=v.stateNode,v.__reactInternalMemoizedUnmaskedChildContext=_,v.__reactInternalMemoizedMaskedChildContext=Q),Q}function Ma(v){return v=v.childContextTypes,v!=null}function em(){Gi(Da),Gi(sa)}function xx(v,_,N){if(sa.current!==xf)throw Error(n(168));Fi(sa,_),Fi(Da,N)}function X1(v,_,N){var j=v.stateNode;if(_=_.childContextTypes,typeof j.getChildContext!="function")return N;j=j.getChildContext();for(var Q in j)if(!(Q in _))throw Error(n(108,ce(v)||"Unknown",Q));return X({},N,j)}function Ja(v){return v=(v=v.stateNode)&&v.__reactInternalMemoizedMergedChildContext||xf,Oa=sa.current,Fi(sa,v),Fi(Da,Da.current),!0}function c2(v,_,N){var j=v.stateNode;if(!j)throw Error(n(169));N?(v=X1(v,_,Oa),j.__reactInternalMemoizedMergedChildContext=v,Gi(Da),Gi(sa),Fi(sa,v)):Gi(Da),Fi(Da,N)}var _f=null,tm=!1,Q1=!1;function Kg(v){_f===null?_f=[v]:_f.push(v)}function Za(v){tm=!0,Kg(v)}function Ah(){if(!Q1&&_f!==null){Q1=!0;var v=0,_=_n;try{var N=_f;for(_n=1;v<N.length;v++){var j=N[v];do j=j(!0);while(j!==null)}_f=null,tm=!1}catch(Q){throw _f!==null&&(_f=_f.slice(v+1)),hf(xs,Ah),Q}finally{_n=_,Q1=!1}}return null}var eu=[],oa=0,kh=null,Rh=0,tu=[],nu=0,Ih=null,wu=1,es="";function Pp(v,_){eu[oa++]=Rh,eu[oa++]=kh,kh=v,Rh=_}function f2(v,_,N){tu[nu++]=wu,tu[nu++]=es,tu[nu++]=Ih,Ih=v;var j=wu;v=es;var Q=32-rr(j)-1;j&=~(1<<Q),N+=1;var ie=32-rr(_)+Q;if(30<ie){var de=Q-Q%5;ie=(j&(1<<de)-1).toString(32),j>>=de,Q-=de,wu=1<<32-rr(_)+Q|N<<Q|j,es=ie+v}else wu=1<<ie|N<<Q|j,es=v}function Ph(v){v.return!==null&&(Pp(v,1),f2(v,1,0))}function Is(v){for(;v===kh;)kh=eu[--oa],eu[oa]=null,Rh=eu[--oa],eu[oa]=null;for(;v===Ih;)Ih=tu[--nu],tu[nu]=null,es=tu[--nu],tu[nu]=null,wu=tu[--nu],tu[nu]=null}var La=null,nn=null,bi=!1,Zu=null;function Ic(v,_){var N=Pf(5,null,null,0);N.elementType="DELETED",N.stateNode=_,N.return=v,_=v.deletions,_===null?(v.deletions=[N],v.flags|=16):_.push(N)}function J1(v,_){switch(v.tag){case 5:var N=v.type;return _=_.nodeType!==1||N.toLowerCase()!==_.nodeName.toLowerCase()?null:_,_!==null?(v.stateNode=_,La=v,nn=bf(_.firstChild),!0):!1;case 6:return _=v.pendingProps===""||_.nodeType!==3?null:_,_!==null?(v.stateNode=_,La=v,nn=null,!0):!1;case 13:return _=_.nodeType!==8?null:_,_!==null?(N=Ih!==null?{id:wu,overflow:es}:null,v.memoizedState={dehydrated:_,treeContext:N,retryLane:1073741824},N=Pf(18,null,null,0),N.stateNode=_,N.return=v,v.child=N,La=v,nn=null,!0):!1;default:return!1}}function el(v){return(v.mode&1)!==0&&(v.flags&128)===0}function aa(v){if(bi){var _=nn;if(_){var N=_;if(!J1(v,_)){if(el(v))throw Error(n(418));_=bf(N.nextSibling);var j=La;_&&J1(v,_)?Ic(j,N):(v.flags=v.flags&-4097|2,bi=!1,La=v)}}else{if(el(v))throw Error(n(418));v.flags=v.flags&-4097|2,bi=!1,La=v}}}function Z1(v){for(v=v.return;v!==null&&v.tag!==5&&v.tag!==3&&v.tag!==13;)v=v.return;La=v}function nm(v){if(v!==La)return!1;if(!bi)return Z1(v),bi=!0,!1;var _;if((_=v.tag!==3)&&!(_=v.tag!==5)&&(_=v.type,_=_!=="head"&&_!=="body"&&!Wg(v.type,v.memoizedProps)),_&&(_=nn)){if(el(v))throw ev(),Error(n(418));for(;_;)Ic(v,_),_=bf(_.nextSibling)}if(Z1(v),v.tag===13){if(v=v.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(n(317));e:{for(v=v.nextSibling,_=0;v;){if(v.nodeType===8){var N=v.data;if(N==="/$"){if(_===0){nn=bf(v.nextSibling);break e}_--}else N!=="$"&&N!=="$!"&&N!=="$?"||_++}v=v.nextSibling}nn=null}}else nn=La?bf(v.stateNode.nextSibling):null;return!0}function ev(){for(var v=nn;v;)v=bf(v.nextSibling)}function Pc(){nn=La=null,bi=!1}function jl(v){Zu===null?Zu=[v]:Zu.push(v)}var tv=w.ReactCurrentBatchConfig;function zs(v,_,N){if(v=N.ref,v!==null&&typeof v!="function"&&typeof v!="object"){if(N._owner){if(N=N._owner,N){if(N.tag!==1)throw Error(n(309));var j=N.stateNode}if(!j)throw Error(n(147,v));var Q=j,ie=""+v;return _!==null&&_.ref!==null&&typeof _.ref=="function"&&_.ref._stringRef===ie?_.ref:(_=function(de){var ke=Q.refs;de===null?delete ke[ie]:ke[ie]=de},_._stringRef=ie,_)}if(typeof v!="string")throw Error(n(284));if(!N._owner)throw Error(n(290,v))}return v}function ua(v,_){throw v=Object.prototype.toString.call(_),Error(n(31,v==="[object Object]"?"object with keys {"+Object.keys(_).join(", ")+"}":v))}function Nc(v){var _=v._init;return _(v._payload)}function Xg(v){function _(Je,je){if(v){var tt=Je.deletions;tt===null?(Je.deletions=[je],Je.flags|=16):tt.push(je)}}function N(Je,je){if(!v)return null;for(;je!==null;)_(Je,je),je=je.sibling;return null}function j(Je,je){for(Je=new Map;je!==null;)je.key!==null?Je.set(je.key,je):Je.set(je.index,je),je=je.sibling;return Je}function Q(Je,je){return Je=Nd(Je,je),Je.index=0,Je.sibling=null,Je}function ie(Je,je,tt){return Je.index=tt,v?(tt=Je.alternate,tt!==null?(tt=tt.index,tt<je?(Je.flags|=2,je):tt):(Je.flags|=2,je)):(Je.flags|=1048576,je)}function de(Je){return v&&Je.alternate===null&&(Je.flags|=2),Je}function ke(Je,je,tt,Yt){return je===null||je.tag!==6?(je=DC(tt,Je.mode,Yt),je.return=Je,je):(je=Q(je,tt),je.return=Je,je)}function Le(Je,je,tt,Yt){var Cn=tt.type;return Cn===k?Ot(Je,je,tt.props.children,Yt,tt.key):je!==null&&(je.elementType===Cn||typeof Cn=="object"&&Cn!==null&&Cn.$$typeof===G&&Nc(Cn)===je.type)?(Yt=Q(je,tt.props),Yt.ref=zs(Je,je,tt),Yt.return=Je,Yt):(Yt=k2(tt.type,tt.key,tt.props,null,Je.mode,Yt),Yt.ref=zs(Je,je,tt),Yt.return=Je,Yt)}function st(Je,je,tt,Yt){return je===null||je.tag!==4||je.stateNode.containerInfo!==tt.containerInfo||je.stateNode.implementation!==tt.implementation?(je=OC(tt,Je.mode,Yt),je.return=Je,je):(je=Q(je,tt.children||[]),je.return=Je,je)}function Ot(Je,je,tt,Yt,Cn){return je===null||je.tag!==7?(je=dy(tt,Je.mode,Yt,Cn),je.return=Je,je):(je=Q(je,tt),je.return=Je,je)}function Ut(Je,je,tt){if(typeof je=="string"&&je!==""||typeof je=="number")return je=DC(""+je,Je.mode,tt),je.return=Je,je;if(typeof je=="object"&&je!==null){switch(je.$$typeof){case T:return tt=k2(je.type,je.key,je.props,null,Je.mode,tt),tt.ref=zs(Je,null,je),tt.return=Je,tt;case A:return je=OC(je,Je.mode,tt),je.return=Je,je;case G:var Yt=je._init;return Ut(Je,Yt(je._payload),tt)}if(_t(je)||ue(je))return je=dy(je,Je.mode,tt,null),je.return=Je,je;ua(Je,je)}return null}function Dt(Je,je,tt,Yt){var Cn=je!==null?je.key:null;if(typeof tt=="string"&&tt!==""||typeof tt=="number")return Cn!==null?null:ke(Je,je,""+tt,Yt);if(typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case T:return tt.key===Cn?Le(Je,je,tt,Yt):null;case A:return tt.key===Cn?st(Je,je,tt,Yt):null;case G:return Cn=tt._init,Dt(Je,je,Cn(tt._payload),Yt)}if(_t(tt)||ue(tt))return Cn!==null?null:Ot(Je,je,tt,Yt,null);ua(Je,tt)}return null}function pn(Je,je,tt,Yt,Cn){if(typeof Yt=="string"&&Yt!==""||typeof Yt=="number")return Je=Je.get(tt)||null,ke(je,Je,""+Yt,Cn);if(typeof Yt=="object"&&Yt!==null){switch(Yt.$$typeof){case T:return Je=Je.get(Yt.key===null?tt:Yt.key)||null,Le(je,Je,Yt,Cn);case A:return Je=Je.get(Yt.key===null?tt:Yt.key)||null,st(je,Je,Yt,Cn);case G:var jn=Yt._init;return pn(Je,je,tt,jn(Yt._payload),Cn)}if(_t(Yt)||ue(Yt))return Je=Je.get(tt)||null,Ot(je,Je,Yt,Cn,null);ua(je,Yt)}return null}function En(Je,je,tt,Yt){for(var Cn=null,jn=null,Un=je,Xn=je=0,fa=null;Un!==null&&Xn<tt.length;Xn++){Un.index>Xn?(fa=Un,Un=null):fa=Un.sibling;var xi=Dt(Je,Un,tt[Xn],Yt);if(xi===null){Un===null&&(Un=fa);break}v&&Un&&xi.alternate===null&&_(Je,Un),je=ie(xi,je,Xn),jn===null?Cn=xi:jn.sibling=xi,jn=xi,Un=fa}if(Xn===tt.length)return N(Je,Un),bi&&Pp(Je,Xn),Cn;if(Un===null){for(;Xn<tt.length;Xn++)Un=Ut(Je,tt[Xn],Yt),Un!==null&&(je=ie(Un,je,Xn),jn===null?Cn=Un:jn.sibling=Un,jn=Un);return bi&&Pp(Je,Xn),Cn}for(Un=j(Je,Un);Xn<tt.length;Xn++)fa=pn(Un,Je,Xn,tt[Xn],Yt),fa!==null&&(v&&fa.alternate!==null&&Un.delete(fa.key===null?Xn:fa.key),je=ie(fa,je,Xn),jn===null?Cn=fa:jn.sibling=fa,jn=fa);return v&&Un.forEach(function(mm){return _(Je,mm)}),bi&&Pp(Je,Xn),Cn}function Tn(Je,je,tt,Yt){var Cn=ue(tt);if(typeof Cn!="function")throw Error(n(150));if(tt=Cn.call(tt),tt==null)throw Error(n(151));for(var jn=Cn=null,Un=je,Xn=je=0,fa=null,xi=tt.next();Un!==null&&!xi.done;Xn++,xi=tt.next()){Un.index>Xn?(fa=Un,Un=null):fa=Un.sibling;var mm=Dt(Je,Un,xi.value,Yt);if(mm===null){Un===null&&(Un=fa);break}v&&Un&&mm.alternate===null&&_(Je,Un),je=ie(mm,je,Xn),jn===null?Cn=mm:jn.sibling=mm,jn=mm,Un=fa}if(xi.done)return N(Je,Un),bi&&Pp(Je,Xn),Cn;if(Un===null){for(;!xi.done;Xn++,xi=tt.next())xi=Ut(Je,xi.value,Yt),xi!==null&&(je=ie(xi,je,Xn),jn===null?Cn=xi:jn.sibling=xi,jn=xi);return bi&&Pp(Je,Xn),Cn}for(Un=j(Je,Un);!xi.done;Xn++,xi=tt.next())xi=pn(Un,Je,Xn,xi.value,Yt),xi!==null&&(v&&xi.alternate!==null&&Un.delete(xi.key===null?Xn:xi.key),je=ie(xi,je,Xn),jn===null?Cn=xi:jn.sibling=xi,jn=xi);return v&&Un.forEach(function(M7){return _(Je,M7)}),bi&&Pp(Je,Xn),Cn}function so(Je,je,tt,Yt){if(typeof tt=="object"&&tt!==null&&tt.type===k&&tt.key===null&&(tt=tt.props.children),typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case T:e:{for(var Cn=tt.key,jn=je;jn!==null;){if(jn.key===Cn){if(Cn=tt.type,Cn===k){if(jn.tag===7){N(Je,jn.sibling),je=Q(jn,tt.props.children),je.return=Je,Je=je;break e}}else if(jn.elementType===Cn||typeof Cn=="object"&&Cn!==null&&Cn.$$typeof===G&&Nc(Cn)===jn.type){N(Je,jn.sibling),je=Q(jn,tt.props),je.ref=zs(Je,jn,tt),je.return=Je,Je=je;break e}N(Je,jn);break}else _(Je,jn);jn=jn.sibling}tt.type===k?(je=dy(tt.props.children,Je.mode,Yt,tt.key),je.return=Je,Je=je):(Yt=k2(tt.type,tt.key,tt.props,null,Je.mode,Yt),Yt.ref=zs(Je,je,tt),Yt.return=Je,Je=Yt)}return de(Je);case A:e:{for(jn=tt.key;je!==null;){if(je.key===jn)if(je.tag===4&&je.stateNode.containerInfo===tt.containerInfo&&je.stateNode.implementation===tt.implementation){N(Je,je.sibling),je=Q(je,tt.children||[]),je.return=Je,Je=je;break e}else{N(Je,je);break}else _(Je,je);je=je.sibling}je=OC(tt,Je.mode,Yt),je.return=Je,Je=je}return de(Je);case G:return jn=tt._init,so(Je,je,jn(tt._payload),Yt)}if(_t(tt))return En(Je,je,tt,Yt);if(ue(tt))return Tn(Je,je,tt,Yt);ua(Je,tt)}return typeof tt=="string"&&tt!==""||typeof tt=="number"?(tt=""+tt,je!==null&&je.tag===6?(N(Je,je.sibling),je=Q(je,tt),je.return=Je,Je=je):(N(Je,je),je=DC(tt,Je.mode,Yt),je.return=Je,Je=je),de(Je)):N(Je,je)}return so}var Es=Xg(!0),Eu=Xg(!1),rm=Qa(null),Ps=null,Nh=null,Np=null;function wf(){Np=Nh=Ps=null}function Qg(v){var _=rm.current;Gi(rm),v._currentValue=_}function Mo(v,_,N){for(;v!==null;){var j=v.alternate;if((v.childLanes&_)!==_?(v.childLanes|=_,j!==null&&(j.childLanes|=_)):j!==null&&(j.childLanes&_)!==_&&(j.childLanes|=_),v===N)break;v=v.return}}function Dc(v,_){Ps=v,Np=Nh=null,v=v.dependencies,v!==null&&v.firstContext!==null&&(v.lanes&_&&(ae=!0),v.firstContext=null)}function ru(v){var _=v._currentValue;if(Np!==v)if(v={context:v,memoizedValue:_,next:null},Nh===null){if(Ps===null)throw Error(n(308));Nh=v,Ps.dependencies={lanes:0,firstContext:v}}else Nh=Nh.next=v;return _}var Ef=null;function im(v){Ef===null?Ef=[v]:Ef.push(v)}function Dp(v,_,N,j){var Q=_.interleaved;return Q===null?(N.next=N,im(_)):(N.next=Q.next,Q.next=N),_.interleaved=N,tl(v,j)}function tl(v,_){v.lanes|=_;var N=v.alternate;for(N!==null&&(N.lanes|=_),N=v,v=v.return;v!==null;)v.childLanes|=_,N=v.alternate,N!==null&&(N.childLanes|=_),N=v,v=v.return;return N.tag===3?N.stateNode:null}var Su=!1;function sm(v){v.updateQueue={baseState:v.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function nv(v,_){v=v.updateQueue,_.updateQueue===v&&(_.updateQueue={baseState:v.baseState,firstBaseUpdate:v.firstBaseUpdate,lastBaseUpdate:v.lastBaseUpdate,shared:v.shared,effects:v.effects})}function Sf(v,_){return{eventTime:v,lane:_,tag:0,payload:null,callback:null,next:null}}function Tu(v,_,N){var j=v.updateQueue;if(j===null)return null;if(j=j.shared,ui&2){var Q=j.pending;return Q===null?_.next=_:(_.next=Q.next,Q.next=_),j.pending=_,tl(v,N)}return Q=j.interleaved,Q===null?(_.next=_,im(j)):(_.next=Q.next,Q.next=_),j.interleaved=_,tl(v,N)}function rv(v,_,N){if(_=_.updateQueue,_!==null&&(_=_.shared,(N&4194240)!==0)){var j=_.lanes;j&=v.pendingLanes,N|=j,_.lanes=N,lr(v,N)}}function Jg(v,_){var N=v.updateQueue,j=v.alternate;if(j!==null&&(j=j.updateQueue,N===j)){var Q=null,ie=null;if(N=N.firstBaseUpdate,N!==null){do{var de={eventTime:N.eventTime,lane:N.lane,tag:N.tag,payload:N.payload,callback:N.callback,next:null};ie===null?Q=ie=de:ie=ie.next=de,N=N.next}while(N!==null);ie===null?Q=ie=_:ie=ie.next=_}else Q=ie=_;N={baseState:j.baseState,firstBaseUpdate:Q,lastBaseUpdate:ie,shared:j.shared,effects:j.effects},v.updateQueue=N;return}v=N.lastBaseUpdate,v===null?N.firstBaseUpdate=_:v.next=_,N.lastBaseUpdate=_}function Dh(v,_,N,j){var Q=v.updateQueue;Su=!1;var ie=Q.firstBaseUpdate,de=Q.lastBaseUpdate,ke=Q.shared.pending;if(ke!==null){Q.shared.pending=null;var Le=ke,st=Le.next;Le.next=null,de===null?ie=st:de.next=st,de=Le;var Ot=v.alternate;Ot!==null&&(Ot=Ot.updateQueue,ke=Ot.lastBaseUpdate,ke!==de&&(ke===null?Ot.firstBaseUpdate=st:ke.next=st,Ot.lastBaseUpdate=Le))}if(ie!==null){var Ut=Q.baseState;de=0,Ot=st=Le=null,ke=ie;do{var Dt=ke.lane,pn=ke.eventTime;if((j&Dt)===Dt){Ot!==null&&(Ot=Ot.next={eventTime:pn,lane:0,tag:ke.tag,payload:ke.payload,callback:ke.callback,next:null});e:{var En=v,Tn=ke;switch(Dt=_,pn=N,Tn.tag){case 1:if(En=Tn.payload,typeof En=="function"){Ut=En.call(pn,Ut,Dt);break e}Ut=En;break e;case 3:En.flags=En.flags&-65537|128;case 0:if(En=Tn.payload,Dt=typeof En=="function"?En.call(pn,Ut,Dt):En,Dt==null)break e;Ut=X({},Ut,Dt);break e;case 2:Su=!0}}ke.callback!==null&&ke.lane!==0&&(v.flags|=64,Dt=Q.effects,Dt===null?Q.effects=[ke]:Dt.push(ke))}else pn={eventTime:pn,lane:Dt,tag:ke.tag,payload:ke.payload,callback:ke.callback,next:null},Ot===null?(st=Ot=pn,Le=Ut):Ot=Ot.next=pn,de|=Dt;if(ke=ke.next,ke===null){if(ke=Q.shared.pending,ke===null)break;Dt=ke,ke=Dt.next,Dt.next=null,Q.lastBaseUpdate=Dt,Q.shared.pending=null}}while(!0);if(Ot===null&&(Le=Ut),Q.baseState=Le,Q.firstBaseUpdate=st,Q.lastBaseUpdate=Ot,_=Q.shared.interleaved,_!==null){Q=_;do de|=Q.lane,Q=Q.next;while(Q!==_)}else ie===null&&(Q.shared.lanes=0);cm|=de,v.lanes=de,v.memoizedState=Ut}}function Ss(v,_,N){if(v=_.effects,_.effects=null,v!==null)for(_=0;_<v.length;_++){var j=v[_],Q=j.callback;if(Q!==null){if(j.callback=null,j=N,typeof Q!="function")throw Error(n(191,Q));Q.call(j)}}}var fr={},$i=Qa(fr),fs=Qa(fr),Ns=Qa(fr);function Vs(v){if(v===fr)throw Error(n(174));return v}function Oh(v,_){switch(Fi(Ns,_),Fi(fs,v),Fi($i,fr),v=_.nodeType,v){case 9:case 11:_=(_=_.documentElement)?_.namespaceURI:Qe(null,"");break;default:v=v===8?_.parentNode:_,_=v.namespaceURI||null,v=v.tagName,_=Qe(_,v)}Gi($i),Fi($i,_)}function Yi(){Gi($i),Gi(fs),Gi(Ns)}function Op(v){Vs(Ns.current);var _=Vs($i.current),N=Qe(_,v.type);_!==N&&(Fi(fs,v),Fi($i,N))}function Tf(v){fs.current===v&&(Gi($i),Gi(fs))}var Bi=Qa(0);function Ed(v){for(var _=v;_!==null;){if(_.tag===13){var N=_.memoizedState;if(N!==null&&(N=N.dehydrated,N===null||N.data==="$?"||N.data==="$!"))return _}else if(_.tag===19&&_.memoizedProps.revealOrder!==void 0){if(_.flags&128)return _}else if(_.child!==null){_.child.return=_,_=_.child;continue}if(_===v)break;for(;_.sibling===null;){if(_.return===null||_.return===v)return null;_=_.return}_.sibling.return=_.return,_=_.sibling}return null}var Mp=[];function la(){for(var v=0;v<Mp.length;v++)Mp[v]._workInProgressVersionPrimary=null;Mp.length=0}var Lp=w.ReactCurrentDispatcher,Zg=w.ReactCurrentBatchConfig,Fa=0,Ti=null,ds=null,Hs=null,nl=!1,Mh=!1,Cu=0,dr=0;function io(){throw Error(n(321))}function ey(v,_){if(_===null)return!1;for(var N=0;N<_.length&&N<v.length;N++)if(!et(v[N],_[N]))return!1;return!0}function Cf(v,_,N,j,Q,ie){if(Fa=ie,Ti=_,_.memoizedState=null,_.updateQueue=null,_.lanes=0,Lp.current=v===null||v.memoizedState===null?yC:Lc,v=N(j,Q),Mh){ie=0;do{if(Mh=!1,Cu=0,25<=ie)throw Error(n(301));ie+=1,Hs=ds=null,_.updateQueue=null,Lp.current=Cd,v=N(j,Q)}while(Mh)}if(Lp.current=am,_=ds!==null&&ds.next!==null,Fa=0,Hs=ds=Ti=null,nl=!1,_)throw Error(n(300));return v}function Fp(){var v=Cu!==0;return Cu=0,v}function ts(){var v={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Hs===null?Ti.memoizedState=Hs=v:Hs=Hs.next=v,Hs}function vo(){if(ds===null){var v=Ti.alternate;v=v!==null?v.memoizedState:null}else v=ds.next;var _=Hs===null?Ti.memoizedState:Hs.next;if(_!==null)Hs=_,ds=v;else{if(v===null)throw Error(n(310));ds=v,v={memoizedState:ds.memoizedState,baseState:ds.baseState,baseQueue:ds.baseQueue,queue:ds.queue,next:null},Hs===null?Ti.memoizedState=Hs=v:Hs=Hs.next=v}return Hs}function ji(v,_){return typeof _=="function"?_(v):_}function $a(v){var _=vo(),N=_.queue;if(N===null)throw Error(n(311));N.lastRenderedReducer=v;var j=ds,Q=j.baseQueue,ie=N.pending;if(ie!==null){if(Q!==null){var de=Q.next;Q.next=ie.next,ie.next=de}j.baseQueue=Q=ie,N.pending=null}if(Q!==null){ie=Q.next,j=j.baseState;var ke=de=null,Le=null,st=ie;do{var Ot=st.lane;if((Fa&Ot)===Ot)Le!==null&&(Le=Le.next={lane:0,action:st.action,hasEagerState:st.hasEagerState,eagerState:st.eagerState,next:null}),j=st.hasEagerState?st.eagerState:v(j,st.action);else{var Ut={lane:Ot,action:st.action,hasEagerState:st.hasEagerState,eagerState:st.eagerState,next:null};Le===null?(ke=Le=Ut,de=j):Le=Le.next=Ut,Ti.lanes|=Ot,cm|=Ot}st=st.next}while(st!==null&&st!==ie);Le===null?de=j:Le.next=ke,et(j,_.memoizedState)||(ae=!0),_.memoizedState=j,_.baseState=de,_.baseQueue=Le,N.lastRenderedState=j}if(v=N.interleaved,v!==null){Q=v;do ie=Q.lane,Ti.lanes|=ie,cm|=ie,Q=Q.next;while(Q!==v)}else Q===null&&(N.lanes=0);return[_.memoizedState,N.dispatch]}function $p(v){var _=vo(),N=_.queue;if(N===null)throw Error(n(311));N.lastRenderedReducer=v;var j=N.dispatch,Q=N.pending,ie=_.memoizedState;if(Q!==null){N.pending=null;var de=Q=Q.next;do ie=v(ie,de.action),de=de.next;while(de!==Q);et(ie,_.memoizedState)||(ae=!0),_.memoizedState=ie,_.baseQueue===null&&(_.baseState=ie),N.lastRenderedState=ie}return[ie,j]}function om(){}function ty(v,_){var N=Ti,j=vo(),Q=_(),ie=!et(j.memoizedState,Q);if(ie&&(j.memoizedState=Q,ae=!0),j=j.queue,kf(Af.bind(null,N,j,v),[v]),j.getSnapshot!==_||ie||Hs!==null&&Hs.memoizedState.tag&1){if(N.flags|=2048,Bp(9,qs.bind(null,N,j,Q,_),void 0,null),ja===null)throw Error(n(349));Fa&30||_x(N,_,Q)}return Q}function _x(v,_,N){v.flags|=16384,v={getSnapshot:_,value:N},_=Ti.updateQueue,_===null?(_={lastEffect:null,stores:null},Ti.updateQueue=_,_.stores=[v]):(N=_.stores,N===null?_.stores=[v]:N.push(v))}function qs(v,_,N,j){_.value=N,_.getSnapshot=j,ny(_)&&ry(v)}function Af(v,_,N){return N(function(){ny(_)&&ry(v)})}function ny(v){var _=v.getSnapshot;v=v.value;try{var N=_();return!et(v,N)}catch{return!0}}function ry(v){var _=tl(v,1);_!==null&&Pd(_,v,1,-1)}function Oc(v){var _=ts();return typeof v=="function"&&(v=v()),_.memoizedState=_.baseState=v,v={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ji,lastRenderedState:v},_.queue=v,v=v.dispatch=Ax.bind(null,Ti,v),[_.memoizedState,v]}function Bp(v,_,N,j){return v={tag:v,create:_,destroy:N,deps:j,next:null},_=Ti.updateQueue,_===null?(_={lastEffect:null,stores:null},Ti.updateQueue=_,_.lastEffect=v.next=v):(N=_.lastEffect,N===null?_.lastEffect=v.next=v:(j=N.next,N.next=v,v.next=j,_.lastEffect=v)),v}function iy(){return vo().memoizedState}function jp(v,_,N,j){var Q=ts();Ti.flags|=v,Q.memoizedState=Bp(1|_,N,void 0,j===void 0?null:j)}function Sd(v,_,N,j){var Q=vo();j=j===void 0?null:j;var ie=void 0;if(ds!==null){var de=ds.memoizedState;if(ie=de.destroy,j!==null&&ey(j,de.deps)){Q.memoizedState=Bp(_,N,ie,j);return}}Ti.flags|=v,Q.memoizedState=Bp(1|_,N,ie,j)}function iv(v,_){return jp(8390656,8,v,_)}function kf(v,_){return Sd(2048,8,v,_)}function wx(v,_){return Sd(4,2,v,_)}function Rf(v,_){return Sd(4,4,v,_)}function Td(v,_){if(typeof _=="function")return v=v(),_(v),function(){_(null)};if(_!=null)return v=v(),_.current=v,function(){_.current=null}}function Ex(v,_,N){return N=N!=null?N.concat([v]):null,Sd(4,4,Td.bind(null,_,v),N)}function Mc(){}function Sx(v,_){var N=vo();_=_===void 0?null:_;var j=N.memoizedState;return j!==null&&_!==null&&ey(_,j[1])?j[0]:(N.memoizedState=[v,_],v)}function ns(v,_){var N=vo();_=_===void 0?null:_;var j=N.memoizedState;return j!==null&&_!==null&&ey(_,j[1])?j[0]:(v=v(),N.memoizedState=[v,_],v)}function d2(v,_,N){return Fa&21?(et(N,_)||(N=jt(),Ti.lanes|=N,cm|=N,v.baseState=!0),_):(v.baseState&&(v.baseState=!1,ae=!0),v.memoizedState=N)}function Tx(v,_){var N=_n;_n=N!==0&&4>N?N:4,v(!0);var j=Zg.transition;Zg.transition={};try{v(!1),_()}finally{_n=N,Zg.transition=j}}function Cx(){return vo().memoizedState}function gC(v,_,N){var j=hm(v);if(N={lane:j,action:N,hasEagerState:!1,eagerState:null,next:null},sv(v))iu(_,N);else if(N=Dp(v,_,N,j),N!==null){var Q=sl();Pd(N,v,j,Q),Ds(N,_,j)}}function Ax(v,_,N){var j=hm(v),Q={lane:j,action:N,hasEagerState:!1,eagerState:null,next:null};if(sv(v))iu(_,Q);else{var ie=v.alternate;if(v.lanes===0&&(ie===null||ie.lanes===0)&&(ie=_.lastRenderedReducer,ie!==null))try{var de=_.lastRenderedState,ke=ie(de,N);if(Q.hasEagerState=!0,Q.eagerState=ke,et(ke,de)){var Le=_.interleaved;Le===null?(Q.next=Q,im(_)):(Q.next=Le.next,Le.next=Q),_.interleaved=Q;return}}catch{}finally{}N=Dp(v,_,Q,j),N!==null&&(Q=sl(),Pd(N,v,j,Q),Ds(N,_,j))}}function sv(v){var _=v.alternate;return v===Ti||_!==null&&_===Ti}function iu(v,_){Mh=nl=!0;var N=v.pending;N===null?_.next=_:(_.next=N.next,N.next=_),v.pending=_}function Ds(v,_,N){if(N&4194240){var j=_.lanes;j&=v.pendingLanes,N|=j,_.lanes=N,lr(v,N)}}var am={readContext:ru,useCallback:io,useContext:io,useEffect:io,useImperativeHandle:io,useInsertionEffect:io,useLayoutEffect:io,useMemo:io,useReducer:io,useRef:io,useState:io,useDebugValue:io,useDeferredValue:io,useTransition:io,useMutableSource:io,useSyncExternalStore:io,useId:io,unstable_isNewReconciler:!1},yC={readContext:ru,useCallback:function(v,_){return ts().memoizedState=[v,_===void 0?null:_],v},useContext:ru,useEffect:iv,useImperativeHandle:function(v,_,N){return N=N!=null?N.concat([v]):null,jp(4194308,4,Td.bind(null,_,v),N)},useLayoutEffect:function(v,_){return jp(4194308,4,v,_)},useInsertionEffect:function(v,_){return jp(4,2,v,_)},useMemo:function(v,_){var N=ts();return _=_===void 0?null:_,v=v(),N.memoizedState=[v,_],v},useReducer:function(v,_,N){var j=ts();return _=N!==void 0?N(_):_,j.memoizedState=j.baseState=_,v={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:v,lastRenderedState:_},j.queue=v,v=v.dispatch=gC.bind(null,Ti,v),[j.memoizedState,v]},useRef:function(v){var _=ts();return v={current:v},_.memoizedState=v},useState:Oc,useDebugValue:Mc,useDeferredValue:function(v){return ts().memoizedState=v},useTransition:function(){var v=Oc(!1),_=v[0];return v=Tx.bind(null,v[1]),ts().memoizedState=v,[_,v]},useMutableSource:function(){},useSyncExternalStore:function(v,_,N){var j=Ti,Q=ts();if(bi){if(N===void 0)throw Error(n(407));N=N()}else{if(N=_(),ja===null)throw Error(n(349));Fa&30||_x(j,_,N)}Q.memoizedState=N;var ie={value:N,getSnapshot:_};return Q.queue=ie,iv(Af.bind(null,j,ie,v),[v]),j.flags|=2048,Bp(9,qs.bind(null,j,ie,N,_),void 0,null),N},useId:function(){var v=ts(),_=ja.identifierPrefix;if(bi){var N=es,j=wu;N=(j&~(1<<32-rr(j)-1)).toString(32)+N,_=":"+_+"R"+N,N=Cu++,0<N&&(_+="H"+N.toString(32)),_+=":"}else N=dr++,_=":"+_+"r"+N.toString(32)+":";return v.memoizedState=_},unstable_isNewReconciler:!1},Lc={readContext:ru,useCallback:Sx,useContext:ru,useEffect:kf,useImperativeHandle:Ex,useInsertionEffect:wx,useLayoutEffect:Rf,useMemo:ns,useReducer:$a,useRef:iy,useState:function(){return $a(ji)},useDebugValue:Mc,useDeferredValue:function(v){var _=vo();return d2(_,ds.memoizedState,v)},useTransition:function(){var v=$a(ji)[0],_=vo().memoizedState;return[v,_]},useMutableSource:om,useSyncExternalStore:ty,useId:Cx,unstable_isNewReconciler:!1},Cd={readContext:ru,useCallback:Sx,useContext:ru,useEffect:kf,useImperativeHandle:Ex,useInsertionEffect:wx,useLayoutEffect:Rf,useMemo:ns,useReducer:$p,useRef:iy,useState:function(){return $p(ji)},useDebugValue:Mc,useDeferredValue:function(v){var _=vo();return ds===null?_.memoizedState=v:d2(_,ds.memoizedState,v)},useTransition:function(){var v=$p(ji)[0],_=vo().memoizedState;return[v,_]},useMutableSource:om,useSyncExternalStore:ty,useId:Cx,unstable_isNewReconciler:!1};function Lo(v,_){if(v&&v.defaultProps){_=X({},_),v=v.defaultProps;for(var N in v)_[N]===void 0&&(_[N]=v[N]);return _}return _}function Up(v,_,N,j){_=v.memoizedState,N=N(j,_),N=N==null?_:X({},_,N),v.memoizedState=N,v.lanes===0&&(v.updateQueue.baseState=N)}var um={isMounted:function(v){return(v=v._reactInternals)?bs(v)===v:!1},enqueueSetState:function(v,_,N){v=v._reactInternals;var j=sl(),Q=hm(v),ie=Sf(j,Q);ie.payload=_,N!=null&&(ie.callback=N),_=Tu(v,ie,Q),_!==null&&(Pd(_,v,Q,j),rv(_,v,Q))},enqueueReplaceState:function(v,_,N){v=v._reactInternals;var j=sl(),Q=hm(v),ie=Sf(j,Q);ie.tag=1,ie.payload=_,N!=null&&(ie.callback=N),_=Tu(v,ie,Q),_!==null&&(Pd(_,v,Q,j),rv(_,v,Q))},enqueueForceUpdate:function(v,_){v=v._reactInternals;var N=sl(),j=hm(v),Q=Sf(N,j);Q.tag=2,_!=null&&(Q.callback=_),_=Tu(v,Q,j),_!==null&&(Pd(_,v,j,N),rv(_,v,j))}};function sy(v,_,N,j,Q,ie,de){return v=v.stateNode,typeof v.shouldComponentUpdate=="function"?v.shouldComponentUpdate(j,ie,de):_.prototype&&_.prototype.isPureReactComponent?!on(N,j)||!on(Q,ie):!0}function zp(v,_,N){var j=!1,Q=xf,ie=_.contextType;return typeof ie=="object"&&ie!==null?ie=ru(ie):(Q=Ma(_)?Oa:sa.current,j=_.contextTypes,ie=(j=j!=null)?Ip(v,Q):xf),_=new _(N,ie),v.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=um,v.stateNode=_,_._reactInternals=v,j&&(v=v.stateNode,v.__reactInternalMemoizedUnmaskedChildContext=Q,v.__reactInternalMemoizedMaskedChildContext=ie),_}function Vp(v,_,N,j){v=_.state,typeof _.componentWillReceiveProps=="function"&&_.componentWillReceiveProps(N,j),typeof _.UNSAFE_componentWillReceiveProps=="function"&&_.UNSAFE_componentWillReceiveProps(N,j),_.state!==v&&um.enqueueReplaceState(_,_.state,null)}function ov(v,_,N,j){var Q=v.stateNode;Q.props=N,Q.state=v.memoizedState,Q.refs={},sm(v);var ie=_.contextType;typeof ie=="object"&&ie!==null?Q.context=ru(ie):(ie=Ma(_)?Oa:sa.current,Q.context=Ip(v,ie)),Q.state=v.memoizedState,ie=_.getDerivedStateFromProps,typeof ie=="function"&&(Up(v,_,ie,N),Q.state=v.memoizedState),typeof _.getDerivedStateFromProps=="function"||typeof Q.getSnapshotBeforeUpdate=="function"||typeof Q.UNSAFE_componentWillMount!="function"&&typeof Q.componentWillMount!="function"||(_=Q.state,typeof Q.componentWillMount=="function"&&Q.componentWillMount(),typeof Q.UNSAFE_componentWillMount=="function"&&Q.UNSAFE_componentWillMount(),_!==Q.state&&um.enqueueReplaceState(Q,Q.state,null),Dh(v,N,Q,j),Q.state=v.memoizedState),typeof Q.componentDidMount=="function"&&(v.flags|=4194308)}function Lh(v,_){try{var N="",j=_;do N+=oe(j),j=j.return;while(j);var Q=N}catch(ie){Q=`
Error generating stack: `+ie.message+`
`+ie.stack}return{value:v,source:_,stack:Q,digest:null}}function oy(v,_,N){return{value:v,source:null,stack:N??null,digest:_??null}}function Ad(v,_){try{console.error(_.value)}catch(N){setTimeout(function(){throw N})}}var h2=typeof WeakMap=="function"?WeakMap:Map;function ay(v,_,N){N=Sf(-1,N),N.tag=3,N.payload={element:null};var j=_.value;return N.callback=function(){_2||(_2=!0,CC=j),Ad(v,_)},N}function S(v,_,N){N=Sf(-1,N),N.tag=3;var j=v.type.getDerivedStateFromError;if(typeof j=="function"){var Q=_.value;N.payload=function(){return j(Q)},N.callback=function(){Ad(v,_)}}var ie=v.stateNode;return ie!==null&&typeof ie.componentDidCatch=="function"&&(N.callback=function(){Ad(v,_),typeof j!="function"&&(fm===null?fm=new Set([this]):fm.add(this));var de=_.stack;this.componentDidCatch(_.value,{componentStack:de!==null?de:""})}),N}function C(v,_,N){var j=v.pingCache;if(j===null){j=v.pingCache=new h2;var Q=new Set;j.set(_,Q)}else Q=j.get(_),Q===void 0&&(Q=new Set,j.set(_,Q));Q.has(N)||(Q.add(N),v=C7.bind(null,v,_,N),_.then(v,v))}function $(v){do{var _;if((_=v.tag===13)&&(_=v.memoizedState,_=_!==null?_.dehydrated!==null:!0),_)return v;v=v.return}while(v!==null);return null}function Y(v,_,N,j,Q){return v.mode&1?(v.flags|=65536,v.lanes=Q,v):(v===_?v.flags|=65536:(v.flags|=128,N.flags|=131072,N.flags&=-52805,N.tag===1&&(N.alternate===null?N.tag=17:(_=Sf(-1,1),_.tag=2,Tu(N,_,1))),N.lanes|=1),v)}var J=w.ReactCurrentOwner,ae=!1;function xe(v,_,N,j){_.child=v===null?Eu(_,null,N,j):Es(_,v.child,N,j)}function Ve(v,_,N,j,Q){N=N.render;var ie=_.ref;return Dc(_,Q),j=Cf(v,_,N,j,ie,Q),N=Fp(),v!==null&&!ae?(_.updateQueue=v.updateQueue,_.flags&=-2053,v.lanes&=~Q,$o(v,_,Q)):(bi&&N&&Ph(_),_.flags|=1,xe(v,_,j,Q),_.child)}function at(v,_,N,j,Q){if(v===null){var ie=N.type;return typeof ie=="function"&&!A2(ie)&&ie.defaultProps===void 0&&N.compare===null&&N.defaultProps===void 0?(_.tag=15,_.type=ie,Ft(v,_,ie,j,Q)):(v=k2(N.type,null,j,_,_.mode,Q),v.ref=_.ref,v.return=_,_.child=v)}if(ie=v.child,!(v.lanes&Q)){var de=ie.memoizedProps;if(N=N.compare,N=N!==null?N:on,N(de,j)&&v.ref===_.ref)return $o(v,_,Q)}return _.flags|=1,v=Nd(ie,j),v.ref=_.ref,v.return=_,_.child=v}function Ft(v,_,N,j,Q){if(v!==null){var ie=v.memoizedProps;if(on(ie,j)&&v.ref===_.ref)if(ae=!1,_.pendingProps=j=ie,(v.lanes&Q)!==0)v.flags&131072&&(ae=!0);else return _.lanes=v.lanes,$o(v,_,Q)}return an(v,_,N,j,Q)}function yn(v,_,N){var j=_.pendingProps,Q=j.children,ie=v!==null?v.memoizedState:null;if(j.mode==="hidden")if(!(_.mode&1))_.memoizedState={baseLanes:0,cachePool:null,transitions:null},Fi(lv,$c),$c|=N;else{if(!(N&1073741824))return v=ie!==null?ie.baseLanes|N:N,_.lanes=_.childLanes=1073741824,_.memoizedState={baseLanes:v,cachePool:null,transitions:null},_.updateQueue=null,Fi(lv,$c),$c|=v,null;_.memoizedState={baseLanes:0,cachePool:null,transitions:null},j=ie!==null?ie.baseLanes:N,Fi(lv,$c),$c|=j}else ie!==null?(j=ie.baseLanes|N,_.memoizedState=null):j=N,Fi(lv,$c),$c|=j;return xe(v,_,Q,N),_.child}function tr(v,_){var N=_.ref;(v===null&&N!==null||v!==null&&v.ref!==N)&&(_.flags|=512,_.flags|=2097152)}function an(v,_,N,j,Q){var ie=Ma(N)?Oa:sa.current;return ie=Ip(_,ie),Dc(_,Q),N=Cf(v,_,N,j,ie,Q),j=Fp(),v!==null&&!ae?(_.updateQueue=v.updateQueue,_.flags&=-2053,v.lanes&=~Q,$o(v,_,Q)):(bi&&j&&Ph(_),_.flags|=1,xe(v,_,N,Q),_.child)}function Ui(v,_,N,j,Q){if(Ma(N)){var ie=!0;Ja(_)}else ie=!1;if(Dc(_,Q),_.stateNode===null)Br(v,_),zp(_,N,j),ov(_,N,j,Q),j=!0;else if(v===null){var de=_.stateNode,ke=_.memoizedProps;de.props=ke;var Le=de.context,st=N.contextType;typeof st=="object"&&st!==null?st=ru(st):(st=Ma(N)?Oa:sa.current,st=Ip(_,st));var Ot=N.getDerivedStateFromProps,Ut=typeof Ot=="function"||typeof de.getSnapshotBeforeUpdate=="function";Ut||typeof de.UNSAFE_componentWillReceiveProps!="function"&&typeof de.componentWillReceiveProps!="function"||(ke!==j||Le!==st)&&Vp(_,de,j,st),Su=!1;var Dt=_.memoizedState;de.state=Dt,Dh(_,j,de,Q),Le=_.memoizedState,ke!==j||Dt!==Le||Da.current||Su?(typeof Ot=="function"&&(Up(_,N,Ot,j),Le=_.memoizedState),(ke=Su||sy(_,N,ke,j,Dt,Le,st))?(Ut||typeof de.UNSAFE_componentWillMount!="function"&&typeof de.componentWillMount!="function"||(typeof de.componentWillMount=="function"&&de.componentWillMount(),typeof de.UNSAFE_componentWillMount=="function"&&de.UNSAFE_componentWillMount()),typeof de.componentDidMount=="function"&&(_.flags|=4194308)):(typeof de.componentDidMount=="function"&&(_.flags|=4194308),_.memoizedProps=j,_.memoizedState=Le),de.props=j,de.state=Le,de.context=st,j=ke):(typeof de.componentDidMount=="function"&&(_.flags|=4194308),j=!1)}else{de=_.stateNode,nv(v,_),ke=_.memoizedProps,st=_.type===_.elementType?ke:Lo(_.type,ke),de.props=st,Ut=_.pendingProps,Dt=de.context,Le=N.contextType,typeof Le=="object"&&Le!==null?Le=ru(Le):(Le=Ma(N)?Oa:sa.current,Le=Ip(_,Le));var pn=N.getDerivedStateFromProps;(Ot=typeof pn=="function"||typeof de.getSnapshotBeforeUpdate=="function")||typeof de.UNSAFE_componentWillReceiveProps!="function"&&typeof de.componentWillReceiveProps!="function"||(ke!==Ut||Dt!==Le)&&Vp(_,de,j,Le),Su=!1,Dt=_.memoizedState,de.state=Dt,Dh(_,j,de,Q);var En=_.memoizedState;ke!==Ut||Dt!==En||Da.current||Su?(typeof pn=="function"&&(Up(_,N,pn,j),En=_.memoizedState),(st=Su||sy(_,N,st,j,Dt,En,Le)||!1)?(Ot||typeof de.UNSAFE_componentWillUpdate!="function"&&typeof de.componentWillUpdate!="function"||(typeof de.componentWillUpdate=="function"&&de.componentWillUpdate(j,En,Le),typeof de.UNSAFE_componentWillUpdate=="function"&&de.UNSAFE_componentWillUpdate(j,En,Le)),typeof de.componentDidUpdate=="function"&&(_.flags|=4),typeof de.getSnapshotBeforeUpdate=="function"&&(_.flags|=1024)):(typeof de.componentDidUpdate!="function"||ke===v.memoizedProps&&Dt===v.memoizedState||(_.flags|=4),typeof de.getSnapshotBeforeUpdate!="function"||ke===v.memoizedProps&&Dt===v.memoizedState||(_.flags|=1024),_.memoizedProps=j,_.memoizedState=En),de.props=j,de.state=En,de.context=Le,j=st):(typeof de.componentDidUpdate!="function"||ke===v.memoizedProps&&Dt===v.memoizedState||(_.flags|=4),typeof de.getSnapshotBeforeUpdate!="function"||ke===v.memoizedProps&&Dt===v.memoizedState||(_.flags|=1024),j=!1)}return Si(v,_,N,j,ie,Q)}function Si(v,_,N,j,Q,ie){tr(v,_);var de=(_.flags&128)!==0;if(!j&&!de)return Q&&c2(_,N,!1),$o(v,_,ie);j=_.stateNode,J.current=_;var ke=de&&typeof N.getDerivedStateFromError!="function"?null:j.render();return _.flags|=1,v!==null&&de?(_.child=Es(_,v.child,null,ie),_.child=Es(_,null,ke,ie)):xe(v,_,ke,ie),_.memoizedState=j.state,Q&&c2(_,N,!0),_.child}function su(v){var _=v.stateNode;_.pendingContext?xx(v,_.pendingContext,_.pendingContext!==_.context):_.context&&xx(v,_.context,!1),Oh(v,_.containerInfo)}function Fo(v,_,N,j,Q){return Pc(),jl(Q),_.flags|=256,xe(v,_,N,j),_.child}var it={dehydrated:null,treeContext:null,retryLane:0};function qe(v){return{baseLanes:v,cachePool:null,transitions:null}}function ct(v,_,N){var j=_.pendingProps,Q=Bi.current,ie=!1,de=(_.flags&128)!==0,ke;if((ke=de)||(ke=v!==null&&v.memoizedState===null?!1:(Q&2)!==0),ke?(ie=!0,_.flags&=-129):(v===null||v.memoizedState!==null)&&(Q|=1),Fi(Bi,Q&1),v===null)return aa(_),v=_.memoizedState,v!==null&&(v=v.dehydrated,v!==null)?(_.mode&1?v.data==="$!"?_.lanes=8:_.lanes=1073741824:_.lanes=1,null):(de=j.children,v=j.fallback,ie?(j=_.mode,ie=_.child,de={mode:"hidden",children:de},!(j&1)&&ie!==null?(ie.childLanes=0,ie.pendingProps=de):ie=R2(de,j,0,null),v=dy(v,j,N,null),ie.return=_,v.return=_,ie.sibling=v,_.child=ie,_.child.memoizedState=qe(N),_.memoizedState=it,v):rn(_,de));if(Q=v.memoizedState,Q!==null&&(ke=Q.dehydrated,ke!==null))return Gt(v,_,de,j,ke,Q,N);if(ie){ie=j.fallback,de=_.mode,Q=v.child,ke=Q.sibling;var Le={mode:"hidden",children:j.children};return!(de&1)&&_.child!==Q?(j=_.child,j.childLanes=0,j.pendingProps=Le,_.deletions=null):(j=Nd(Q,Le),j.subtreeFlags=Q.subtreeFlags&14680064),ke!==null?ie=Nd(ke,ie):(ie=dy(ie,de,N,null),ie.flags|=2),ie.return=_,j.return=_,j.sibling=ie,_.child=j,j=ie,ie=_.child,de=v.child.memoizedState,de=de===null?qe(N):{baseLanes:de.baseLanes|N,cachePool:null,transitions:de.transitions},ie.memoizedState=de,ie.childLanes=v.childLanes&~N,_.memoizedState=it,j}return ie=v.child,v=ie.sibling,j=Nd(ie,{mode:"visible",children:j.children}),!(_.mode&1)&&(j.lanes=N),j.return=_,j.sibling=null,v!==null&&(N=_.deletions,N===null?(_.deletions=[v],_.flags|=16):N.push(v)),_.child=j,_.memoizedState=null,j}function rn(v,_){return _=R2({mode:"visible",children:_},v.mode,0,null),_.return=v,v.child=_}function kn(v,_,N,j){return j!==null&&jl(j),Es(_,v.child,null,N),v=rn(_,_.pendingProps.children),v.flags|=2,_.memoizedState=null,v}function Gt(v,_,N,j,Q,ie,de){if(N)return _.flags&256?(_.flags&=-257,j=oy(Error(n(422))),kn(v,_,de,j)):_.memoizedState!==null?(_.child=v.child,_.flags|=128,null):(ie=j.fallback,Q=_.mode,j=R2({mode:"visible",children:j.children},Q,0,null),ie=dy(ie,Q,de,null),ie.flags|=2,j.return=_,ie.return=_,j.sibling=ie,_.child=j,_.mode&1&&Es(_,v.child,null,de),_.child.memoizedState=qe(de),_.memoizedState=it,ie);if(!(_.mode&1))return kn(v,_,de,null);if(Q.data==="$!"){if(j=Q.nextSibling&&Q.nextSibling.dataset,j)var ke=j.dgst;return j=ke,ie=Error(n(419)),j=oy(ie,j,void 0),kn(v,_,de,j)}if(ke=(de&v.childLanes)!==0,ae||ke){if(j=ja,j!==null){switch(de&-de){case 4:Q=2;break;case 16:Q=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:Q=32;break;case 536870912:Q=268435456;break;default:Q=0}Q=Q&(j.suspendedLanes|de)?0:Q,Q!==0&&Q!==ie.retryLane&&(ie.retryLane=Q,tl(v,Q),Pd(j,v,Q,-1))}return NC(),j=oy(Error(n(421))),kn(v,_,de,j)}return Q.data==="$?"?(_.flags|=128,_.child=v.child,_=A7.bind(null,v),Q._reactRetry=_,null):(v=ie.treeContext,nn=bf(Q.nextSibling),La=_,bi=!0,Zu=null,v!==null&&(tu[nu++]=wu,tu[nu++]=es,tu[nu++]=Ih,wu=v.id,es=v.overflow,Ih=_),_=rn(_,j.children),_.flags|=4096,_)}function Kn(v,_,N){v.lanes|=_;var j=v.alternate;j!==null&&(j.lanes|=_),Mo(v.return,_,N)}function Fr(v,_,N,j,Q){var ie=v.memoizedState;ie===null?v.memoizedState={isBackwards:_,rendering:null,renderingStartTime:0,last:j,tail:N,tailMode:Q}:(ie.isBackwards=_,ie.rendering=null,ie.renderingStartTime=0,ie.last=j,ie.tail=N,ie.tailMode=Q)}function rs(v,_,N){var j=_.pendingProps,Q=j.revealOrder,ie=j.tail;if(xe(v,_,j.children,N),j=Bi.current,j&2)j=j&1|2,_.flags|=128;else{if(v!==null&&v.flags&128)e:for(v=_.child;v!==null;){if(v.tag===13)v.memoizedState!==null&&Kn(v,N,_);else if(v.tag===19)Kn(v,N,_);else if(v.child!==null){v.child.return=v,v=v.child;continue}if(v===_)break e;for(;v.sibling===null;){if(v.return===null||v.return===_)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}j&=1}if(Fi(Bi,j),!(_.mode&1))_.memoizedState=null;else switch(Q){case"forwards":for(N=_.child,Q=null;N!==null;)v=N.alternate,v!==null&&Ed(v)===null&&(Q=N),N=N.sibling;N=Q,N===null?(Q=_.child,_.child=null):(Q=N.sibling,N.sibling=null),Fr(_,!1,Q,N,ie);break;case"backwards":for(N=null,Q=_.child,_.child=null;Q!==null;){if(v=Q.alternate,v!==null&&Ed(v)===null){_.child=Q;break}v=Q.sibling,Q.sibling=N,N=Q,Q=v}Fr(_,!0,N,null,ie);break;case"together":Fr(_,!1,null,null,void 0);break;default:_.memoizedState=null}return _.child}function Br(v,_){!(_.mode&1)&&v!==null&&(v.alternate=null,_.alternate=null,_.flags|=2)}function $o(v,_,N){if(v!==null&&(_.dependencies=v.dependencies),cm|=_.lanes,!(N&_.childLanes))return null;if(v!==null&&_.child!==v.child)throw Error(n(153));if(_.child!==null){for(v=_.child,N=Nd(v,v.pendingProps),_.child=N,N.return=_;v.sibling!==null;)v=v.sibling,N=N.sibling=Nd(v,v.pendingProps),N.return=_;N.sibling=null}return _.child}function p2(v,_,N){switch(_.tag){case 3:su(_),Pc();break;case 5:Op(_);break;case 1:Ma(_.type)&&Ja(_);break;case 4:Oh(_,_.stateNode.containerInfo);break;case 10:var j=_.type._context,Q=_.memoizedProps.value;Fi(rm,j._currentValue),j._currentValue=Q;break;case 13:if(j=_.memoizedState,j!==null)return j.dehydrated!==null?(Fi(Bi,Bi.current&1),_.flags|=128,null):N&_.child.childLanes?ct(v,_,N):(Fi(Bi,Bi.current&1),v=$o(v,_,N),v!==null?v.sibling:null);Fi(Bi,Bi.current&1);break;case 19:if(j=(N&_.childLanes)!==0,v.flags&128){if(j)return rs(v,_,N);_.flags|=128}if(Q=_.memoizedState,Q!==null&&(Q.rendering=null,Q.tail=null,Q.lastEffect=null),Fi(Bi,Bi.current),j)break;return null;case 22:case 23:return _.lanes=0,yn(v,_,N)}return $o(v,_,N)}var ou,vC,PI,bC;ou=function(v,_){for(var N=_.child;N!==null;){if(N.tag===5||N.tag===6)v.appendChild(N.stateNode);else if(N.tag!==4&&N.child!==null){N.child.return=N,N=N.child;continue}if(N===_)break;for(;N.sibling===null;){if(N.return===null||N.return===_)return;N=N.return}N.sibling.return=N.return,N=N.sibling}},vC=function(){},PI=function(v,_,N,j){var Q=v.memoizedProps;if(Q!==j){v=_.stateNode,Vs($i.current);var ie=null;switch(N){case"input":Q=Me(v,Q),j=Me(v,j),ie=[];break;case"select":Q=X({},Q,{value:void 0}),j=X({},j,{value:void 0}),ie=[];break;case"textarea":Q=Et(v,Q),j=Et(v,j),ie=[];break;default:typeof Q.onClick!="function"&&typeof j.onClick=="function"&&(v.onclick=Ep)}nr(N,j);var de;N=null;for(st in Q)if(!j.hasOwnProperty(st)&&Q.hasOwnProperty(st)&&Q[st]!=null)if(st==="style"){var ke=Q[st];for(de in ke)ke.hasOwnProperty(de)&&(N||(N={}),N[de]="")}else st!=="dangerouslySetInnerHTML"&&st!=="children"&&st!=="suppressContentEditableWarning"&&st!=="suppressHydrationWarning"&&st!=="autoFocus"&&(i.hasOwnProperty(st)?ie||(ie=[]):(ie=ie||[]).push(st,null));for(st in j){var Le=j[st];if(ke=Q!=null?Q[st]:void 0,j.hasOwnProperty(st)&&Le!==ke&&(Le!=null||ke!=null))if(st==="style")if(ke){for(de in ke)!ke.hasOwnProperty(de)||Le&&Le.hasOwnProperty(de)||(N||(N={}),N[de]="");for(de in Le)Le.hasOwnProperty(de)&&ke[de]!==Le[de]&&(N||(N={}),N[de]=Le[de])}else N||(ie||(ie=[]),ie.push(st,N)),N=Le;else st==="dangerouslySetInnerHTML"?(Le=Le?Le.__html:void 0,ke=ke?ke.__html:void 0,Le!=null&&ke!==Le&&(ie=ie||[]).push(st,Le)):st==="children"?typeof Le!="string"&&typeof Le!="number"||(ie=ie||[]).push(st,""+Le):st!=="suppressContentEditableWarning"&&st!=="suppressHydrationWarning"&&(i.hasOwnProperty(st)?(Le!=null&&st==="onScroll"&&Wi("scroll",v),ie||ke===Le||(ie=[])):(ie=ie||[]).push(st,Le))}N&&(ie=ie||[]).push("style",N);var st=ie;(_.updateQueue=st)&&(_.flags|=4)}},bC=function(v,_,N,j){N!==j&&(_.flags|=4)};function kx(v,_){if(!bi)switch(v.tailMode){case"hidden":_=v.tail;for(var N=null;_!==null;)_.alternate!==null&&(N=_),_=_.sibling;N===null?v.tail=null:N.sibling=null;break;case"collapsed":N=v.tail;for(var j=null;N!==null;)N.alternate!==null&&(j=N),N=N.sibling;j===null?_||v.tail===null?v.tail=null:v.tail.sibling=null:j.sibling=null}}function au(v){var _=v.alternate!==null&&v.alternate.child===v.child,N=0,j=0;if(_)for(var Q=v.child;Q!==null;)N|=Q.lanes|Q.childLanes,j|=Q.subtreeFlags&14680064,j|=Q.flags&14680064,Q.return=v,Q=Q.sibling;else for(Q=v.child;Q!==null;)N|=Q.lanes|Q.childLanes,j|=Q.subtreeFlags,j|=Q.flags,Q.return=v,Q=Q.sibling;return v.subtreeFlags|=j,v.childLanes=N,_}function b7(v,_,N){var j=_.pendingProps;switch(Is(_),_.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return au(_),null;case 1:return Ma(_.type)&&em(),au(_),null;case 3:return j=_.stateNode,Yi(),Gi(Da),Gi(sa),la(),j.pendingContext&&(j.context=j.pendingContext,j.pendingContext=null),(v===null||v.child===null)&&(nm(_)?_.flags|=4:v===null||v.memoizedState.isDehydrated&&!(_.flags&256)||(_.flags|=1024,Zu!==null&&(RC(Zu),Zu=null))),vC(v,_),au(_),null;case 5:Tf(_);var Q=Vs(Ns.current);if(N=_.type,v!==null&&_.stateNode!=null)PI(v,_,N,j,Q),v.ref!==_.ref&&(_.flags|=512,_.flags|=2097152);else{if(!j){if(_.stateNode===null)throw Error(n(166));return au(_),null}if(v=Vs($i.current),nm(_)){j=_.stateNode,N=_.type;var ie=_.memoizedProps;switch(j[Bl]=_,j[Ch]=ie,v=(_.mode&1)!==0,N){case"dialog":Wi("cancel",j),Wi("close",j);break;case"iframe":case"object":case"embed":Wi("load",j);break;case"video":case"audio":for(Q=0;Q<$l.length;Q++)Wi($l[Q],j);break;case"source":Wi("error",j);break;case"img":case"image":case"link":Wi("error",j),Wi("load",j);break;case"details":Wi("toggle",j);break;case"input":Ye(j,ie),Wi("invalid",j);break;case"select":j._wrapperState={wasMultiple:!!ie.multiple},Wi("invalid",j);break;case"textarea":Ke(j,ie),Wi("invalid",j)}nr(N,ie),Q=null;for(var de in ie)if(ie.hasOwnProperty(de)){var ke=ie[de];de==="children"?typeof ke=="string"?j.textContent!==ke&&(ie.suppressHydrationWarning!==!0&&Z0(j.textContent,ke,v),Q=["children",ke]):typeof ke=="number"&&j.textContent!==""+ke&&(ie.suppressHydrationWarning!==!0&&Z0(j.textContent,ke,v),Q=["children",""+ke]):i.hasOwnProperty(de)&&ke!=null&&de==="onScroll"&&Wi("scroll",j)}switch(N){case"input":ge(j),nt(j,ie,!0);break;case"textarea":ge(j),sn(j);break;case"select":case"option":break;default:typeof ie.onClick=="function"&&(j.onclick=Ep)}j=Q,_.updateQueue=j,j!==null&&(_.flags|=4)}else{de=Q.nodeType===9?Q:Q.ownerDocument,v==="http://www.w3.org/1999/xhtml"&&(v=Fe(N)),v==="http://www.w3.org/1999/xhtml"?N==="script"?(v=de.createElement("div"),v.innerHTML="<script><\/script>",v=v.removeChild(v.firstChild)):typeof j.is=="string"?v=de.createElement(N,{is:j.is}):(v=de.createElement(N),N==="select"&&(de=v,j.multiple?de.multiple=!0:j.size&&(de.size=j.size))):v=de.createElementNS(v,N),v[Bl]=_,v[Ch]=j,ou(v,_,!1,!1),_.stateNode=v;e:{switch(de=Ei(N,j),N){case"dialog":Wi("cancel",v),Wi("close",v),Q=j;break;case"iframe":case"object":case"embed":Wi("load",v),Q=j;break;case"video":case"audio":for(Q=0;Q<$l.length;Q++)Wi($l[Q],v);Q=j;break;case"source":Wi("error",v),Q=j;break;case"img":case"image":case"link":Wi("error",v),Wi("load",v),Q=j;break;case"details":Wi("toggle",v),Q=j;break;case"input":Ye(v,j),Q=Me(v,j),Wi("invalid",v);break;case"option":Q=j;break;case"select":v._wrapperState={wasMultiple:!!j.multiple},Q=X({},j,{value:void 0}),Wi("invalid",v);break;case"textarea":Ke(v,j),Q=Et(v,j),Wi("invalid",v);break;default:Q=j}nr(N,Q),ke=Q;for(ie in ke)if(ke.hasOwnProperty(ie)){var Le=ke[ie];ie==="style"?wr(v,Le):ie==="dangerouslySetInnerHTML"?(Le=Le?Le.__html:void 0,Le!=null&&Vt(v,Le)):ie==="children"?typeof Le=="string"?(N!=="textarea"||Le!=="")&&Wt(v,Le):typeof Le=="number"&&Wt(v,""+Le):ie!=="suppressContentEditableWarning"&&ie!=="suppressHydrationWarning"&&ie!=="autoFocus"&&(i.hasOwnProperty(ie)?Le!=null&&ie==="onScroll"&&Wi("scroll",v):Le!=null&&x(v,ie,Le,de))}switch(N){case"input":ge(v),nt(v,j,!1);break;case"textarea":ge(v),sn(v);break;case"option":j.value!=null&&v.setAttribute("value",""+he(j.value));break;case"select":v.multiple=!!j.multiple,ie=j.value,ie!=null?Rt(v,!!j.multiple,ie,!1):j.defaultValue!=null&&Rt(v,!!j.multiple,j.defaultValue,!0);break;default:typeof Q.onClick=="function"&&(v.onclick=Ep)}switch(N){case"button":case"input":case"select":case"textarea":j=!!j.autoFocus;break e;case"img":j=!0;break e;default:j=!1}}j&&(_.flags|=4)}_.ref!==null&&(_.flags|=512,_.flags|=2097152)}return au(_),null;case 6:if(v&&_.stateNode!=null)bC(v,_,v.memoizedProps,j);else{if(typeof j!="string"&&_.stateNode===null)throw Error(n(166));if(N=Vs(Ns.current),Vs($i.current),nm(_)){if(j=_.stateNode,N=_.memoizedProps,j[Bl]=_,(ie=j.nodeValue!==N)&&(v=La,v!==null))switch(v.tag){case 3:Z0(j.nodeValue,N,(v.mode&1)!==0);break;case 5:v.memoizedProps.suppressHydrationWarning!==!0&&Z0(j.nodeValue,N,(v.mode&1)!==0)}ie&&(_.flags|=4)}else j=(N.nodeType===9?N:N.ownerDocument).createTextNode(j),j[Bl]=_,_.stateNode=j}return au(_),null;case 13:if(Gi(Bi),j=_.memoizedState,v===null||v.memoizedState!==null&&v.memoizedState.dehydrated!==null){if(bi&&nn!==null&&_.mode&1&&!(_.flags&128))ev(),Pc(),_.flags|=98560,ie=!1;else if(ie=nm(_),j!==null&&j.dehydrated!==null){if(v===null){if(!ie)throw Error(n(318));if(ie=_.memoizedState,ie=ie!==null?ie.dehydrated:null,!ie)throw Error(n(317));ie[Bl]=_}else Pc(),!(_.flags&128)&&(_.memoizedState=null),_.flags|=4;au(_),ie=!1}else Zu!==null&&(RC(Zu),Zu=null),ie=!0;if(!ie)return _.flags&65536?_:null}return _.flags&128?(_.lanes=N,_):(j=j!==null,j!==(v!==null&&v.memoizedState!==null)&&j&&(_.child.flags|=8192,_.mode&1&&(v===null||Bi.current&1?ca===0&&(ca=3):NC())),_.updateQueue!==null&&(_.flags|=4),au(_),null);case 4:return Yi(),vC(v,_),v===null&&vf(_.stateNode.containerInfo),au(_),null;case 10:return Qg(_.type._context),au(_),null;case 17:return Ma(_.type)&&em(),au(_),null;case 19:if(Gi(Bi),ie=_.memoizedState,ie===null)return au(_),null;if(j=(_.flags&128)!==0,de=ie.rendering,de===null)if(j)kx(ie,!1);else{if(ca!==0||v!==null&&v.flags&128)for(v=_.child;v!==null;){if(de=Ed(v),de!==null){for(_.flags|=128,kx(ie,!1),j=de.updateQueue,j!==null&&(_.updateQueue=j,_.flags|=4),_.subtreeFlags=0,j=N,N=_.child;N!==null;)ie=N,v=j,ie.flags&=14680066,de=ie.alternate,de===null?(ie.childLanes=0,ie.lanes=v,ie.child=null,ie.subtreeFlags=0,ie.memoizedProps=null,ie.memoizedState=null,ie.updateQueue=null,ie.dependencies=null,ie.stateNode=null):(ie.childLanes=de.childLanes,ie.lanes=de.lanes,ie.child=de.child,ie.subtreeFlags=0,ie.deletions=null,ie.memoizedProps=de.memoizedProps,ie.memoizedState=de.memoizedState,ie.updateQueue=de.updateQueue,ie.type=de.type,v=de.dependencies,ie.dependencies=v===null?null:{lanes:v.lanes,firstContext:v.firstContext}),N=N.sibling;return Fi(Bi,Bi.current&1|2),_.child}v=v.sibling}ie.tail!==null&&Er()>uy&&(_.flags|=128,j=!0,kx(ie,!1),_.lanes=4194304)}else{if(!j)if(v=Ed(de),v!==null){if(_.flags|=128,j=!0,N=v.updateQueue,N!==null&&(_.updateQueue=N,_.flags|=4),kx(ie,!0),ie.tail===null&&ie.tailMode==="hidden"&&!de.alternate&&!bi)return au(_),null}else 2*Er()-ie.renderingStartTime>uy&&N!==1073741824&&(_.flags|=128,j=!0,kx(ie,!1),_.lanes=4194304);ie.isBackwards?(de.sibling=_.child,_.child=de):(N=ie.last,N!==null?N.sibling=de:_.child=de,ie.last=de)}return ie.tail!==null?(_=ie.tail,ie.rendering=_,ie.tail=_.sibling,ie.renderingStartTime=Er(),_.sibling=null,N=Bi.current,Fi(Bi,j?N&1|2:N&1),_):(au(_),null);case 22:case 23:return PC(),j=_.memoizedState!==null,v!==null&&v.memoizedState!==null!==j&&(_.flags|=8192),j&&_.mode&1?$c&1073741824&&(au(_),_.subtreeFlags&6&&(_.flags|=8192)):au(_),null;case 24:return null;case 25:return null}throw Error(n(156,_.tag))}function x7(v,_){switch(Is(_),_.tag){case 1:return Ma(_.type)&&em(),v=_.flags,v&65536?(_.flags=v&-65537|128,_):null;case 3:return Yi(),Gi(Da),Gi(sa),la(),v=_.flags,v&65536&&!(v&128)?(_.flags=v&-65537|128,_):null;case 5:return Tf(_),null;case 13:if(Gi(Bi),v=_.memoizedState,v!==null&&v.dehydrated!==null){if(_.alternate===null)throw Error(n(340));Pc()}return v=_.flags,v&65536?(_.flags=v&-65537|128,_):null;case 19:return Gi(Bi),null;case 4:return Yi(),null;case 10:return Qg(_.type._context),null;case 22:case 23:return PC(),null;case 24:return null;default:return null}}var m2=!1,Os=!1,rl=typeof WeakSet=="function"?WeakSet:Set,vn=null;function av(v,_){var N=v.ref;if(N!==null)if(typeof N=="function")try{N(null)}catch(j){Ws(v,_,j)}else N.current=null}function Rx(v,_,N){try{N()}catch(j){Ws(v,_,j)}}var NI=!1;function _7(v,_){if(qg=Ce,v=er(),bh(v)){if("selectionStart"in v)var N={start:v.selectionStart,end:v.selectionEnd};else e:{N=(N=v.ownerDocument)&&N.defaultView||window;var j=N.getSelection&&N.getSelection();if(j&&j.rangeCount!==0){N=j.anchorNode;var Q=j.anchorOffset,ie=j.focusNode;j=j.focusOffset;try{N.nodeType,ie.nodeType}catch{N=null;break e}var de=0,ke=-1,Le=-1,st=0,Ot=0,Ut=v,Dt=null;t:for(;;){for(var pn;Ut!==N||Q!==0&&Ut.nodeType!==3||(ke=de+Q),Ut!==ie||j!==0&&Ut.nodeType!==3||(Le=de+j),Ut.nodeType===3&&(de+=Ut.nodeValue.length),(pn=Ut.firstChild)!==null;)Dt=Ut,Ut=pn;for(;;){if(Ut===v)break t;if(Dt===N&&++st===Q&&(ke=de),Dt===ie&&++Ot===j&&(Le=de),(pn=Ut.nextSibling)!==null)break;Ut=Dt,Dt=Ut.parentNode}Ut=pn}N=ke===-1||Le===-1?null:{start:ke,end:Le}}else N=null}N=N||{start:0,end:0}}else N=null;for(Sp={focusedElem:v,selectionRange:N},Ce=!1,vn=_;vn!==null;)if(_=vn,v=_.child,(_.subtreeFlags&1028)!==0&&v!==null)v.return=_,vn=v;else for(;vn!==null;){_=vn;try{var En=_.alternate;if(_.flags&1024)switch(_.tag){case 0:case 11:case 15:break;case 1:if(En!==null){var Tn=En.memoizedProps,so=En.memoizedState,Je=_.stateNode,je=Je.getSnapshotBeforeUpdate(_.elementType===_.type?Tn:Lo(_.type,Tn),so);Je.__reactInternalSnapshotBeforeUpdate=je}break;case 3:var tt=_.stateNode.containerInfo;tt.nodeType===1?tt.textContent="":tt.nodeType===9&&tt.documentElement&&tt.removeChild(tt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(Yt){Ws(_,_.return,Yt)}if(v=_.sibling,v!==null){v.return=_.return,vn=v;break}vn=_.return}return En=NI,NI=!1,En}function Hp(v,_,N){var j=_.updateQueue;if(j=j!==null?j.lastEffect:null,j!==null){var Q=j=j.next;do{if((Q.tag&v)===v){var ie=Q.destroy;Q.destroy=void 0,ie!==void 0&&Rx(_,N,ie)}Q=Q.next}while(Q!==j)}}function Ix(v,_){if(_=_.updateQueue,_=_!==null?_.lastEffect:null,_!==null){var N=_=_.next;do{if((N.tag&v)===v){var j=N.create;N.destroy=j()}N=N.next}while(N!==_)}}function g2(v){var _=v.ref;if(_!==null){var N=v.stateNode;switch(v.tag){case 5:v=N;break;default:v=N}typeof _=="function"?_(v):_.current=v}}function DI(v){var _=v.alternate;_!==null&&(v.alternate=null,DI(_)),v.child=null,v.deletions=null,v.sibling=null,v.tag===5&&(_=v.stateNode,_!==null&&(delete _[Bl],delete _[Ch],delete _[Yg],delete _[ye],delete _[kp])),v.stateNode=null,v.return=null,v.dependencies=null,v.memoizedProps=null,v.memoizedState=null,v.pendingProps=null,v.stateNode=null,v.updateQueue=null}function OI(v){return v.tag===5||v.tag===3||v.tag===4}function MI(v){e:for(;;){for(;v.sibling===null;){if(v.return===null||OI(v.return))return null;v=v.return}for(v.sibling.return=v.return,v=v.sibling;v.tag!==5&&v.tag!==6&&v.tag!==18;){if(v.flags&2||v.child===null||v.tag===4)continue e;v.child.return=v,v=v.child}if(!(v.flags&2))return v.stateNode}}function xC(v,_,N){var j=v.tag;if(j===5||j===6)v=v.stateNode,_?N.nodeType===8?N.parentNode.insertBefore(v,_):N.insertBefore(v,_):(N.nodeType===8?(_=N.parentNode,_.insertBefore(v,N)):(_=N,_.appendChild(v)),N=N._reactRootContainer,N!=null||_.onclick!==null||(_.onclick=Ep));else if(j!==4&&(v=v.child,v!==null))for(xC(v,_,N),v=v.sibling;v!==null;)xC(v,_,N),v=v.sibling}function y2(v,_,N){var j=v.tag;if(j===5||j===6)v=v.stateNode,_?N.insertBefore(v,_):N.appendChild(v);else if(j!==4&&(v=v.child,v!==null))for(y2(v,_,N),v=v.sibling;v!==null;)y2(v,_,N),v=v.sibling}var Ba=null,kd=!1;function Fh(v,_,N){for(N=N.child;N!==null;)_C(v,_,N),N=N.sibling}function _C(v,_,N){if(qi&&typeof qi.onCommitFiberUnmount=="function")try{qi.onCommitFiberUnmount(Zo,N)}catch{}switch(N.tag){case 5:Os||av(N,_);case 6:var j=Ba,Q=kd;Ba=null,Fh(v,_,N),Ba=j,kd=Q,Ba!==null&&(kd?(v=Ba,N=N.stateNode,v.nodeType===8?v.parentNode.removeChild(N):v.removeChild(N)):Ba.removeChild(N.stateNode));break;case 18:Ba!==null&&(kd?(v=Ba,N=N.stateNode,v.nodeType===8?Y1(v.parentNode,N):v.nodeType===1&&Y1(v,N),Gn(v)):Y1(Ba,N.stateNode));break;case 4:j=Ba,Q=kd,Ba=N.stateNode.containerInfo,kd=!0,Fh(v,_,N),Ba=j,kd=Q;break;case 0:case 11:case 14:case 15:if(!Os&&(j=N.updateQueue,j!==null&&(j=j.lastEffect,j!==null))){Q=j=j.next;do{var ie=Q,de=ie.destroy;ie=ie.tag,de!==void 0&&(ie&2||ie&4)&&Rx(N,_,de),Q=Q.next}while(Q!==j)}Fh(v,_,N);break;case 1:if(!Os&&(av(N,_),j=N.stateNode,typeof j.componentWillUnmount=="function"))try{j.props=N.memoizedProps,j.state=N.memoizedState,j.componentWillUnmount()}catch(ke){Ws(N,_,ke)}Fh(v,_,N);break;case 21:Fh(v,_,N);break;case 22:N.mode&1?(Os=(j=Os)||N.memoizedState!==null,Fh(v,_,N),Os=j):Fh(v,_,N);break;default:Fh(v,_,N)}}function uv(v){var _=v.updateQueue;if(_!==null){v.updateQueue=null;var N=v.stateNode;N===null&&(N=v.stateNode=new rl),_.forEach(function(j){var Q=k7.bind(null,v,j);N.has(j)||(N.add(j),j.then(Q,Q))})}}function Fc(v,_){var N=_.deletions;if(N!==null)for(var j=0;j<N.length;j++){var Q=N[j];try{var ie=v,de=_,ke=de;e:for(;ke!==null;){switch(ke.tag){case 5:Ba=ke.stateNode,kd=!1;break e;case 3:Ba=ke.stateNode.containerInfo,kd=!0;break e;case 4:Ba=ke.stateNode.containerInfo,kd=!0;break e}ke=ke.return}if(Ba===null)throw Error(n(160));_C(ie,de,Q),Ba=null,kd=!1;var Le=Q.alternate;Le!==null&&(Le.return=null),Q.return=null}catch(st){Ws(Q,_,st)}}if(_.subtreeFlags&12854)for(_=_.child;_!==null;)wC(_,v),_=_.sibling}function wC(v,_){var N=v.alternate,j=v.flags;switch(v.tag){case 0:case 11:case 14:case 15:if(Fc(_,v),Rd(v),j&4){try{Hp(3,v,v.return),Ix(3,v)}catch(Tn){Ws(v,v.return,Tn)}try{Hp(5,v,v.return)}catch(Tn){Ws(v,v.return,Tn)}}break;case 1:Fc(_,v),Rd(v),j&512&&N!==null&&av(N,N.return);break;case 5:if(Fc(_,v),Rd(v),j&512&&N!==null&&av(N,N.return),v.flags&32){var Q=v.stateNode;try{Wt(Q,"")}catch(Tn){Ws(v,v.return,Tn)}}if(j&4&&(Q=v.stateNode,Q!=null)){var ie=v.memoizedProps,de=N!==null?N.memoizedProps:ie,ke=v.type,Le=v.updateQueue;if(v.updateQueue=null,Le!==null)try{ke==="input"&&ie.type==="radio"&&ie.name!=null&&lt(Q,ie),Ei(ke,de);var st=Ei(ke,ie);for(de=0;de<Le.length;de+=2){var Ot=Le[de],Ut=Le[de+1];Ot==="style"?wr(Q,Ut):Ot==="dangerouslySetInnerHTML"?Vt(Q,Ut):Ot==="children"?Wt(Q,Ut):x(Q,Ot,Ut,st)}switch(ke){case"input":We(Q,ie);break;case"textarea":Lt(Q,ie);break;case"select":var Dt=Q._wrapperState.wasMultiple;Q._wrapperState.wasMultiple=!!ie.multiple;var pn=ie.value;pn!=null?Rt(Q,!!ie.multiple,pn,!1):Dt!==!!ie.multiple&&(ie.defaultValue!=null?Rt(Q,!!ie.multiple,ie.defaultValue,!0):Rt(Q,!!ie.multiple,ie.multiple?[]:"",!1))}Q[Ch]=ie}catch(Tn){Ws(v,v.return,Tn)}}break;case 6:if(Fc(_,v),Rd(v),j&4){if(v.stateNode===null)throw Error(n(162));Q=v.stateNode,ie=v.memoizedProps;try{Q.nodeValue=ie}catch(Tn){Ws(v,v.return,Tn)}}break;case 3:if(Fc(_,v),Rd(v),j&4&&N!==null&&N.memoizedState.isDehydrated)try{Gn(_.containerInfo)}catch(Tn){Ws(v,v.return,Tn)}break;case 4:Fc(_,v),Rd(v);break;case 13:Fc(_,v),Rd(v),Q=v.child,Q.flags&8192&&(ie=Q.memoizedState!==null,Q.stateNode.isHidden=ie,!ie||Q.alternate!==null&&Q.alternate.memoizedState!==null||(TC=Er())),j&4&&uv(v);break;case 22:if(Ot=N!==null&&N.memoizedState!==null,v.mode&1?(Os=(st=Os)||Ot,Fc(_,v),Os=st):Fc(_,v),Rd(v),j&8192){if(st=v.memoizedState!==null,(v.stateNode.isHidden=st)&&!Ot&&v.mode&1)for(vn=v,Ot=v.child;Ot!==null;){for(Ut=vn=Ot;vn!==null;){switch(Dt=vn,pn=Dt.child,Dt.tag){case 0:case 11:case 14:case 15:Hp(4,Dt,Dt.return);break;case 1:av(Dt,Dt.return);var En=Dt.stateNode;if(typeof En.componentWillUnmount=="function"){j=Dt,N=Dt.return;try{_=j,En.props=_.memoizedProps,En.state=_.memoizedState,En.componentWillUnmount()}catch(Tn){Ws(j,N,Tn)}}break;case 5:av(Dt,Dt.return);break;case 22:if(Dt.memoizedState!==null){lm(Ut);continue}}pn!==null?(pn.return=Dt,vn=pn):lm(Ut)}Ot=Ot.sibling}e:for(Ot=null,Ut=v;;){if(Ut.tag===5){if(Ot===null){Ot=Ut;try{Q=Ut.stateNode,st?(ie=Q.style,typeof ie.setProperty=="function"?ie.setProperty("display","none","important"):ie.display="none"):(ke=Ut.stateNode,Le=Ut.memoizedProps.style,de=Le!=null&&Le.hasOwnProperty("display")?Le.display:null,ke.style.display=Zn("display",de))}catch(Tn){Ws(v,v.return,Tn)}}}else if(Ut.tag===6){if(Ot===null)try{Ut.stateNode.nodeValue=st?"":Ut.memoizedProps}catch(Tn){Ws(v,v.return,Tn)}}else if((Ut.tag!==22&&Ut.tag!==23||Ut.memoizedState===null||Ut===v)&&Ut.child!==null){Ut.child.return=Ut,Ut=Ut.child;continue}if(Ut===v)break e;for(;Ut.sibling===null;){if(Ut.return===null||Ut.return===v)break e;Ot===Ut&&(Ot=null),Ut=Ut.return}Ot===Ut&&(Ot=null),Ut.sibling.return=Ut.return,Ut=Ut.sibling}}break;case 19:Fc(_,v),Rd(v),j&4&&uv(v);break;case 21:break;default:Fc(_,v),Rd(v)}}function Rd(v){var _=v.flags;if(_&2){try{e:{for(var N=v.return;N!==null;){if(OI(N)){var j=N;break e}N=N.return}throw Error(n(160))}switch(j.tag){case 5:var Q=j.stateNode;j.flags&32&&(Wt(Q,""),j.flags&=-33);var ie=MI(v);y2(v,ie,Q);break;case 3:case 4:var de=j.stateNode.containerInfo,ke=MI(v);xC(v,ke,de);break;default:throw Error(n(161))}}catch(Le){Ws(v,v.return,Le)}v.flags&=-3}_&4096&&(v.flags&=-4097)}function v2(v,_,N){vn=v,EC(v)}function EC(v,_,N){for(var j=(v.mode&1)!==0;vn!==null;){var Q=vn,ie=Q.child;if(Q.tag===22&&j){var de=Q.memoizedState!==null||m2;if(!de){var ke=Q.alternate,Le=ke!==null&&ke.memoizedState!==null||Os;ke=m2;var st=Os;if(m2=de,(Os=Le)&&!st)for(vn=Q;vn!==null;)de=vn,Le=de.child,de.tag===22&&de.memoizedState!==null?LI(Q):Le!==null?(Le.return=de,vn=Le):LI(Q);for(;ie!==null;)vn=ie,EC(ie),ie=ie.sibling;vn=Q,m2=ke,Os=st}Id(v)}else Q.subtreeFlags&8772&&ie!==null?(ie.return=Q,vn=ie):Id(v)}}function Id(v){for(;vn!==null;){var _=vn;if(_.flags&8772){var N=_.alternate;try{if(_.flags&8772)switch(_.tag){case 0:case 11:case 15:Os||Ix(5,_);break;case 1:var j=_.stateNode;if(_.flags&4&&!Os)if(N===null)j.componentDidMount();else{var Q=_.elementType===_.type?N.memoizedProps:Lo(_.type,N.memoizedProps);j.componentDidUpdate(Q,N.memoizedState,j.__reactInternalSnapshotBeforeUpdate)}var ie=_.updateQueue;ie!==null&&Ss(_,ie,j);break;case 3:var de=_.updateQueue;if(de!==null){if(N=null,_.child!==null)switch(_.child.tag){case 5:N=_.child.stateNode;break;case 1:N=_.child.stateNode}Ss(_,de,N)}break;case 5:var ke=_.stateNode;if(N===null&&_.flags&4){N=ke;var Le=_.memoizedProps;switch(_.type){case"button":case"input":case"select":case"textarea":Le.autoFocus&&N.focus();break;case"img":Le.src&&(N.src=Le.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(_.memoizedState===null){var st=_.alternate;if(st!==null){var Ot=st.memoizedState;if(Ot!==null){var Ut=Ot.dehydrated;Ut!==null&&Gn(Ut)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Os||_.flags&512&&g2(_)}catch(Dt){Ws(_,_.return,Dt)}}if(_===v){vn=null;break}if(N=_.sibling,N!==null){N.return=_.return,vn=N;break}vn=_.return}}function lm(v){for(;vn!==null;){var _=vn;if(_===v){vn=null;break}var N=_.sibling;if(N!==null){N.return=_.return,vn=N;break}vn=_.return}}function LI(v){for(;vn!==null;){var _=vn;try{switch(_.tag){case 0:case 11:case 15:var N=_.return;try{Ix(4,_)}catch(Le){Ws(_,N,Le)}break;case 1:var j=_.stateNode;if(typeof j.componentDidMount=="function"){var Q=_.return;try{j.componentDidMount()}catch(Le){Ws(_,Q,Le)}}var ie=_.return;try{g2(_)}catch(Le){Ws(_,ie,Le)}break;case 5:var de=_.return;try{g2(_)}catch(Le){Ws(_,de,Le)}}}catch(Le){Ws(_,_.return,Le)}if(_===v){vn=null;break}var ke=_.sibling;if(ke!==null){ke.return=_.return,vn=ke;break}vn=_.return}}var FI=Math.ceil,b2=w.ReactCurrentDispatcher,SC=w.ReactCurrentOwner,If=w.ReactCurrentBatchConfig,ui=0,ja=null,Bo=null,uu=0,$c=0,lv=Qa(0),ca=0,Px=null,cm=0,Nx=0,x2=0,Dx=null,Ul=null,TC=0,uy=1/0,qp=null,_2=!1,CC=null,fm=null,w2=!1,dm=null,il=0,Ox=0,AC=null,E2=-1,Mx=0;function sl(){return ui&6?Er():E2!==-1?E2:E2=Er()}function hm(v){return v.mode&1?ui&2&&uu!==0?uu&-uu:tv.transition!==null?(Mx===0&&(Mx=jt()),Mx):(v=_n,v!==0||(v=window.event,v=v===void 0?16:gi(v.type)),v):1}function Pd(v,_,N,j){if(50<Ox)throw Ox=0,AC=null,Error(n(185));qn(v,N,j),(!(ui&2)||v!==ja)&&(v===ja&&(!(ui&2)&&(Nx|=N),ca===4&&pm(v,uu)),zl(v,j),N===1&&ui===0&&!(_.mode&1)&&(uy=Er()+500,tm&&Ah()))}function zl(v,_){var N=v.callbackNode;Pt(v,_);var j=ht(v,v===ja?uu:0);if(j===0)N!==null&&yc(N),v.callbackNode=null,v.callbackPriority=0;else if(_=j&-j,v.callbackPriority!==_){if(N!=null&&yc(N),_===1)v.tag===0?Za($I.bind(null,v)):Kg($I.bind(null,v)),Gg(function(){!(ui&6)&&Ah()}),N=null;else{switch(br(j)){case 1:N=xs;break;case 4:N=Ka;break;case 16:N=As;break;case 536870912:N=_c;break;default:N=As}N=qI(N,S2.bind(null,v))}v.callbackPriority=_,v.callbackNode=N}}function S2(v,_){if(E2=-1,Mx=0,ui&6)throw Error(n(327));var N=v.callbackNode;if(cv()&&v.callbackNode!==N)return null;var j=ht(v,v===ja?uu:0);if(j===0)return null;if(j&30||j&v.expiredLanes||_)_=T2(v,j);else{_=j;var Q=ui;ui|=2;var ie=jI();(ja!==v||uu!==_)&&(qp=null,uy=Er()+500,cy(v,_));do try{S7();break}catch(ke){BI(v,ke)}while(!0);wf(),b2.current=ie,ui=Q,Bo!==null?_=0:(ja=null,uu=0,_=ca)}if(_!==0){if(_===2&&(Q=kt(v),Q!==0&&(j=Q,_=kC(v,Q))),_===1)throw N=Px,cy(v,0),pm(v,j),zl(v,Er()),N;if(_===6)pm(v,j);else{if(Q=v.current.alternate,!(j&30)&&!w7(Q)&&(_=T2(v,j),_===2&&(ie=kt(v),ie!==0&&(j=ie,_=kC(v,ie))),_===1))throw N=Px,cy(v,0),pm(v,j),zl(v,Er()),N;switch(v.finishedWork=Q,v.finishedLanes=j,_){case 0:case 1:throw Error(n(345));case 2:fy(v,Ul,qp);break;case 3:if(pm(v,j),(j&130023424)===j&&(_=TC+500-Er(),10<_)){if(ht(v,0)!==0)break;if(Q=v.suspendedLanes,(Q&j)!==j){sl(),v.pingedLanes|=v.suspendedLanes&Q;break}v.timeoutHandle=Do(fy.bind(null,v,Ul,qp),_);break}fy(v,Ul,qp);break;case 4:if(pm(v,j),(j&4194240)===j)break;for(_=v.eventTimes,Q=-1;0<j;){var de=31-rr(j);ie=1<<de,de=_[de],de>Q&&(Q=de),j&=~ie}if(j=Q,j=Er()-j,j=(120>j?120:480>j?480:1080>j?1080:1920>j?1920:3e3>j?3e3:4320>j?4320:1960*FI(j/1960))-j,10<j){v.timeoutHandle=Do(fy.bind(null,v,Ul,qp),j);break}fy(v,Ul,qp);break;case 5:fy(v,Ul,qp);break;default:throw Error(n(329))}}}return zl(v,Er()),v.callbackNode===N?S2.bind(null,v):null}function kC(v,_){var N=Dx;return v.current.memoizedState.isDehydrated&&(cy(v,_).flags|=256),v=T2(v,_),v!==2&&(_=Ul,Ul=N,_!==null&&RC(_)),v}function RC(v){Ul===null?Ul=v:Ul.push.apply(Ul,v)}function w7(v){for(var _=v;;){if(_.flags&16384){var N=_.updateQueue;if(N!==null&&(N=N.stores,N!==null))for(var j=0;j<N.length;j++){var Q=N[j],ie=Q.getSnapshot;Q=Q.value;try{if(!et(ie(),Q))return!1}catch{return!1}}}if(N=_.child,_.subtreeFlags&16384&&N!==null)N.return=_,_=N;else{if(_===v)break;for(;_.sibling===null;){if(_.return===null||_.return===v)return!0;_=_.return}_.sibling.return=_.return,_=_.sibling}}return!0}function pm(v,_){for(_&=~x2,_&=~Nx,v.suspendedLanes|=_,v.pingedLanes&=~_,v=v.expirationTimes;0<_;){var N=31-rr(_),j=1<<N;v[N]=-1,_&=~j}}function $I(v){if(ui&6)throw Error(n(327));cv();var _=ht(v,0);if(!(_&1))return zl(v,Er()),null;var N=T2(v,_);if(v.tag!==0&&N===2){var j=kt(v);j!==0&&(_=j,N=kC(v,j))}if(N===1)throw N=Px,cy(v,0),pm(v,_),zl(v,Er()),N;if(N===6)throw Error(n(345));return v.finishedWork=v.current.alternate,v.finishedLanes=_,fy(v,Ul,qp),zl(v,Er()),null}function IC(v,_){var N=ui;ui|=1;try{return v(_)}finally{ui=N,ui===0&&(uy=Er()+500,tm&&Ah())}}function ly(v){dm!==null&&dm.tag===0&&!(ui&6)&&cv();var _=ui;ui|=1;var N=If.transition,j=_n;try{if(If.transition=null,_n=1,v)return v()}finally{_n=j,If.transition=N,ui=_,!(ui&6)&&Ah()}}function PC(){$c=lv.current,Gi(lv)}function cy(v,_){v.finishedWork=null,v.finishedLanes=0;var N=v.timeoutHandle;if(N!==-1&&(v.timeoutHandle=-1,Tp(N)),Bo!==null)for(N=Bo.return;N!==null;){var j=N;switch(Is(j),j.tag){case 1:j=j.type.childContextTypes,j!=null&&em();break;case 3:Yi(),Gi(Da),Gi(sa),la();break;case 5:Tf(j);break;case 4:Yi();break;case 13:Gi(Bi);break;case 19:Gi(Bi);break;case 10:Qg(j.type._context);break;case 22:case 23:PC()}N=N.return}if(ja=v,Bo=v=Nd(v.current,null),uu=$c=_,ca=0,Px=null,x2=Nx=cm=0,Ul=Dx=null,Ef!==null){for(_=0;_<Ef.length;_++)if(N=Ef[_],j=N.interleaved,j!==null){N.interleaved=null;var Q=j.next,ie=N.pending;if(ie!==null){var de=ie.next;ie.next=Q,j.next=de}N.pending=j}Ef=null}return v}function BI(v,_){do{var N=Bo;try{if(wf(),Lp.current=am,nl){for(var j=Ti.memoizedState;j!==null;){var Q=j.queue;Q!==null&&(Q.pending=null),j=j.next}nl=!1}if(Fa=0,Hs=ds=Ti=null,Mh=!1,Cu=0,SC.current=null,N===null||N.return===null){ca=1,Px=_,Bo=null;break}e:{var ie=v,de=N.return,ke=N,Le=_;if(_=uu,ke.flags|=32768,Le!==null&&typeof Le=="object"&&typeof Le.then=="function"){var st=Le,Ot=ke,Ut=Ot.tag;if(!(Ot.mode&1)&&(Ut===0||Ut===11||Ut===15)){var Dt=Ot.alternate;Dt?(Ot.updateQueue=Dt.updateQueue,Ot.memoizedState=Dt.memoizedState,Ot.lanes=Dt.lanes):(Ot.updateQueue=null,Ot.memoizedState=null)}var pn=$(de);if(pn!==null){pn.flags&=-257,Y(pn,de,ke,ie,_),pn.mode&1&&C(ie,st,_),_=pn,Le=st;var En=_.updateQueue;if(En===null){var Tn=new Set;Tn.add(Le),_.updateQueue=Tn}else En.add(Le);break e}else{if(!(_&1)){C(ie,st,_),NC();break e}Le=Error(n(426))}}else if(bi&&ke.mode&1){var so=$(de);if(so!==null){!(so.flags&65536)&&(so.flags|=256),Y(so,de,ke,ie,_),jl(Lh(Le,ke));break e}}ie=Le=Lh(Le,ke),ca!==4&&(ca=2),Dx===null?Dx=[ie]:Dx.push(ie),ie=de;do{switch(ie.tag){case 3:ie.flags|=65536,_&=-_,ie.lanes|=_;var Je=ay(ie,Le,_);Jg(ie,Je);break e;case 1:ke=Le;var je=ie.type,tt=ie.stateNode;if(!(ie.flags&128)&&(typeof je.getDerivedStateFromError=="function"||tt!==null&&typeof tt.componentDidCatch=="function"&&(fm===null||!fm.has(tt)))){ie.flags|=65536,_&=-_,ie.lanes|=_;var Yt=S(ie,ke,_);Jg(ie,Yt);break e}}ie=ie.return}while(ie!==null)}zI(N)}catch(Cn){_=Cn,Bo===N&&N!==null&&(Bo=N=N.return);continue}break}while(!0)}function jI(){var v=b2.current;return b2.current=am,v===null?am:v}function NC(){(ca===0||ca===3||ca===2)&&(ca=4),ja===null||!(cm&268435455)&&!(Nx&268435455)||pm(ja,uu)}function T2(v,_){var N=ui;ui|=2;var j=jI();(ja!==v||uu!==_)&&(qp=null,cy(v,_));do try{E7();break}catch(Q){BI(v,Q)}while(!0);if(wf(),ui=N,b2.current=j,Bo!==null)throw Error(n(261));return ja=null,uu=0,ca}function E7(){for(;Bo!==null;)UI(Bo)}function S7(){for(;Bo!==null&&!vc();)UI(Bo)}function UI(v){var _=HI(v.alternate,v,$c);v.memoizedProps=v.pendingProps,_===null?zI(v):Bo=_,SC.current=null}function zI(v){var _=v;do{var N=_.alternate;if(v=_.return,_.flags&32768){if(N=x7(N,_),N!==null){N.flags&=32767,Bo=N;return}if(v!==null)v.flags|=32768,v.subtreeFlags=0,v.deletions=null;else{ca=6,Bo=null;return}}else if(N=b7(N,_,$c),N!==null){Bo=N;return}if(_=_.sibling,_!==null){Bo=_;return}Bo=_=v}while(_!==null);ca===0&&(ca=5)}function fy(v,_,N){var j=_n,Q=If.transition;try{If.transition=null,_n=1,T7(v,_,N,j)}finally{If.transition=Q,_n=j}return null}function T7(v,_,N,j){do cv();while(dm!==null);if(ui&6)throw Error(n(327));N=v.finishedWork;var Q=v.finishedLanes;if(N===null)return null;if(v.finishedWork=null,v.finishedLanes=0,N===v.current)throw Error(n(177));v.callbackNode=null,v.callbackPriority=0;var ie=N.lanes|N.childLanes;if(Sn(v,ie),v===ja&&(Bo=ja=null,uu=0),!(N.subtreeFlags&2064)&&!(N.flags&2064)||w2||(w2=!0,qI(As,function(){return cv(),null})),ie=(N.flags&15990)!==0,N.subtreeFlags&15990||ie){ie=If.transition,If.transition=null;var de=_n;_n=1;var ke=ui;ui|=4,SC.current=null,_7(v,N),wC(N,v),jg(Sp),Ce=!!qg,Sp=qg=null,v.current=N,v2(N),bc(),ui=ke,_n=de,If.transition=ie}else v.current=N;if(w2&&(w2=!1,dm=v,il=Q),ie=v.pendingLanes,ie===0&&(fm=null),ti(N.stateNode),zl(v,Er()),_!==null)for(j=v.onRecoverableError,N=0;N<_.length;N++)Q=_[N],j(Q.value,{componentStack:Q.stack,digest:Q.digest});if(_2)throw _2=!1,v=CC,CC=null,v;return il&1&&v.tag!==0&&cv(),ie=v.pendingLanes,ie&1?v===AC?Ox++:(Ox=0,AC=v):Ox=0,Ah(),null}function cv(){if(dm!==null){var v=br(il),_=If.transition,N=_n;try{if(If.transition=null,_n=16>v?16:v,dm===null)var j=!1;else{if(v=dm,dm=null,il=0,ui&6)throw Error(n(331));var Q=ui;for(ui|=4,vn=v.current;vn!==null;){var ie=vn,de=ie.child;if(vn.flags&16){var ke=ie.deletions;if(ke!==null){for(var Le=0;Le<ke.length;Le++){var st=ke[Le];for(vn=st;vn!==null;){var Ot=vn;switch(Ot.tag){case 0:case 11:case 15:Hp(8,Ot,ie)}var Ut=Ot.child;if(Ut!==null)Ut.return=Ot,vn=Ut;else for(;vn!==null;){Ot=vn;var Dt=Ot.sibling,pn=Ot.return;if(DI(Ot),Ot===st){vn=null;break}if(Dt!==null){Dt.return=pn,vn=Dt;break}vn=pn}}}var En=ie.alternate;if(En!==null){var Tn=En.child;if(Tn!==null){En.child=null;do{var so=Tn.sibling;Tn.sibling=null,Tn=so}while(Tn!==null)}}vn=ie}}if(ie.subtreeFlags&2064&&de!==null)de.return=ie,vn=de;else e:for(;vn!==null;){if(ie=vn,ie.flags&2048)switch(ie.tag){case 0:case 11:case 15:Hp(9,ie,ie.return)}var Je=ie.sibling;if(Je!==null){Je.return=ie.return,vn=Je;break e}vn=ie.return}}var je=v.current;for(vn=je;vn!==null;){de=vn;var tt=de.child;if(de.subtreeFlags&2064&&tt!==null)tt.return=de,vn=tt;else e:for(de=je;vn!==null;){if(ke=vn,ke.flags&2048)try{switch(ke.tag){case 0:case 11:case 15:Ix(9,ke)}}catch(Cn){Ws(ke,ke.return,Cn)}if(ke===de){vn=null;break e}var Yt=ke.sibling;if(Yt!==null){Yt.return=ke.return,vn=Yt;break e}vn=ke.return}}if(ui=Q,Ah(),qi&&typeof qi.onPostCommitFiberRoot=="function")try{qi.onPostCommitFiberRoot(Zo,v)}catch{}j=!0}return j}finally{_n=N,If.transition=_}}return!1}function C2(v,_,N){_=Lh(N,_),_=ay(v,_,1),v=Tu(v,_,1),_=sl(),v!==null&&(qn(v,1,_),zl(v,_))}function Ws(v,_,N){if(v.tag===3)C2(v,v,N);else for(;_!==null;){if(_.tag===3){C2(_,v,N);break}else if(_.tag===1){var j=_.stateNode;if(typeof _.type.getDerivedStateFromError=="function"||typeof j.componentDidCatch=="function"&&(fm===null||!fm.has(j))){v=Lh(N,v),v=S(_,v,1),_=Tu(_,v,1),v=sl(),_!==null&&(qn(_,1,v),zl(_,v));break}}_=_.return}}function C7(v,_,N){var j=v.pingCache;j!==null&&j.delete(_),_=sl(),v.pingedLanes|=v.suspendedLanes&N,ja===v&&(uu&N)===N&&(ca===4||ca===3&&(uu&130023424)===uu&&500>Er()-TC?cy(v,0):x2|=N),zl(v,_)}function VI(v,_){_===0&&(v.mode&1?(_=Ue,Ue<<=1,!(Ue&130023424)&&(Ue=4194304)):_=1);var N=sl();v=tl(v,_),v!==null&&(qn(v,_,N),zl(v,N))}function A7(v){var _=v.memoizedState,N=0;_!==null&&(N=_.retryLane),VI(v,N)}function k7(v,_){var N=0;switch(v.tag){case 13:var j=v.stateNode,Q=v.memoizedState;Q!==null&&(N=Q.retryLane);break;case 19:j=v.stateNode;break;default:throw Error(n(314))}j!==null&&j.delete(_),VI(v,N)}var HI;HI=function(v,_,N){if(v!==null)if(v.memoizedProps!==_.pendingProps||Da.current)ae=!0;else{if(!(v.lanes&N)&&!(_.flags&128))return ae=!1,p2(v,_,N);ae=!!(v.flags&131072)}else ae=!1,bi&&_.flags&1048576&&f2(_,Rh,_.index);switch(_.lanes=0,_.tag){case 2:var j=_.type;Br(v,_),v=_.pendingProps;var Q=Ip(_,sa.current);Dc(_,N),Q=Cf(null,_,j,v,Q,N);var ie=Fp();return _.flags|=1,typeof Q=="object"&&Q!==null&&typeof Q.render=="function"&&Q.$$typeof===void 0?(_.tag=1,_.memoizedState=null,_.updateQueue=null,Ma(j)?(ie=!0,Ja(_)):ie=!1,_.memoizedState=Q.state!==null&&Q.state!==void 0?Q.state:null,sm(_),Q.updater=um,_.stateNode=Q,Q._reactInternals=_,ov(_,j,v,N),_=Si(null,_,j,!0,ie,N)):(_.tag=0,bi&&ie&&Ph(_),xe(null,_,Q,N),_=_.child),_;case 16:j=_.elementType;e:{switch(Br(v,_),v=_.pendingProps,Q=j._init,j=Q(j._payload),_.type=j,Q=_.tag=I7(j),v=Lo(j,v),Q){case 0:_=an(null,_,j,v,N);break e;case 1:_=Ui(null,_,j,v,N);break e;case 11:_=Ve(null,_,j,v,N);break e;case 14:_=at(null,_,j,Lo(j.type,v),N);break e}throw Error(n(306,j,""))}return _;case 0:return j=_.type,Q=_.pendingProps,Q=_.elementType===j?Q:Lo(j,Q),an(v,_,j,Q,N);case 1:return j=_.type,Q=_.pendingProps,Q=_.elementType===j?Q:Lo(j,Q),Ui(v,_,j,Q,N);case 3:e:{if(su(_),v===null)throw Error(n(387));j=_.pendingProps,ie=_.memoizedState,Q=ie.element,nv(v,_),Dh(_,j,null,N);var de=_.memoizedState;if(j=de.element,ie.isDehydrated)if(ie={element:j,isDehydrated:!1,cache:de.cache,pendingSuspenseBoundaries:de.pendingSuspenseBoundaries,transitions:de.transitions},_.updateQueue.baseState=ie,_.memoizedState=ie,_.flags&256){Q=Lh(Error(n(423)),_),_=Fo(v,_,j,N,Q);break e}else if(j!==Q){Q=Lh(Error(n(424)),_),_=Fo(v,_,j,N,Q);break e}else for(nn=bf(_.stateNode.containerInfo.firstChild),La=_,bi=!0,Zu=null,N=Eu(_,null,j,N),_.child=N;N;)N.flags=N.flags&-3|4096,N=N.sibling;else{if(Pc(),j===Q){_=$o(v,_,N);break e}xe(v,_,j,N)}_=_.child}return _;case 5:return Op(_),v===null&&aa(_),j=_.type,Q=_.pendingProps,ie=v!==null?v.memoizedProps:null,de=Q.children,Wg(j,Q)?de=null:ie!==null&&Wg(j,ie)&&(_.flags|=32),tr(v,_),xe(v,_,de,N),_.child;case 6:return v===null&&aa(_),null;case 13:return ct(v,_,N);case 4:return Oh(_,_.stateNode.containerInfo),j=_.pendingProps,v===null?_.child=Es(_,null,j,N):xe(v,_,j,N),_.child;case 11:return j=_.type,Q=_.pendingProps,Q=_.elementType===j?Q:Lo(j,Q),Ve(v,_,j,Q,N);case 7:return xe(v,_,_.pendingProps,N),_.child;case 8:return xe(v,_,_.pendingProps.children,N),_.child;case 12:return xe(v,_,_.pendingProps.children,N),_.child;case 10:e:{if(j=_.type._context,Q=_.pendingProps,ie=_.memoizedProps,de=Q.value,Fi(rm,j._currentValue),j._currentValue=de,ie!==null)if(et(ie.value,de)){if(ie.children===Q.children&&!Da.current){_=$o(v,_,N);break e}}else for(ie=_.child,ie!==null&&(ie.return=_);ie!==null;){var ke=ie.dependencies;if(ke!==null){de=ie.child;for(var Le=ke.firstContext;Le!==null;){if(Le.context===j){if(ie.tag===1){Le=Sf(-1,N&-N),Le.tag=2;var st=ie.updateQueue;if(st!==null){st=st.shared;var Ot=st.pending;Ot===null?Le.next=Le:(Le.next=Ot.next,Ot.next=Le),st.pending=Le}}ie.lanes|=N,Le=ie.alternate,Le!==null&&(Le.lanes|=N),Mo(ie.return,N,_),ke.lanes|=N;break}Le=Le.next}}else if(ie.tag===10)de=ie.type===_.type?null:ie.child;else if(ie.tag===18){if(de=ie.return,de===null)throw Error(n(341));de.lanes|=N,ke=de.alternate,ke!==null&&(ke.lanes|=N),Mo(de,N,_),de=ie.sibling}else de=ie.child;if(de!==null)de.return=ie;else for(de=ie;de!==null;){if(de===_){de=null;break}if(ie=de.sibling,ie!==null){ie.return=de.return,de=ie;break}de=de.return}ie=de}xe(v,_,Q.children,N),_=_.child}return _;case 9:return Q=_.type,j=_.pendingProps.children,Dc(_,N),Q=ru(Q),j=j(Q),_.flags|=1,xe(v,_,j,N),_.child;case 14:return j=_.type,Q=Lo(j,_.pendingProps),Q=Lo(j.type,Q),at(v,_,j,Q,N);case 15:return Ft(v,_,_.type,_.pendingProps,N);case 17:return j=_.type,Q=_.pendingProps,Q=_.elementType===j?Q:Lo(j,Q),Br(v,_),_.tag=1,Ma(j)?(v=!0,Ja(_)):v=!1,Dc(_,N),zp(_,j,Q),ov(_,j,Q,N),Si(null,_,j,!0,v,N);case 19:return rs(v,_,N);case 22:return yn(v,_,N)}throw Error(n(156,_.tag))};function qI(v,_){return hf(v,_)}function R7(v,_,N,j){this.tag=v,this.key=N,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=_,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=j,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pf(v,_,N,j){return new R7(v,_,N,j)}function A2(v){return v=v.prototype,!(!v||!v.isReactComponent)}function I7(v){if(typeof v=="function")return A2(v)?1:0;if(v!=null){if(v=v.$$typeof,v===H)return 11;if(v===U)return 14}return 2}function Nd(v,_){var N=v.alternate;return N===null?(N=Pf(v.tag,_,v.key,v.mode),N.elementType=v.elementType,N.type=v.type,N.stateNode=v.stateNode,N.alternate=v,v.alternate=N):(N.pendingProps=_,N.type=v.type,N.flags=0,N.subtreeFlags=0,N.deletions=null),N.flags=v.flags&14680064,N.childLanes=v.childLanes,N.lanes=v.lanes,N.child=v.child,N.memoizedProps=v.memoizedProps,N.memoizedState=v.memoizedState,N.updateQueue=v.updateQueue,_=v.dependencies,N.dependencies=_===null?null:{lanes:_.lanes,firstContext:_.firstContext},N.sibling=v.sibling,N.index=v.index,N.ref=v.ref,N}function k2(v,_,N,j,Q,ie){var de=2;if(j=v,typeof v=="function")A2(v)&&(de=1);else if(typeof v=="string")de=5;else e:switch(v){case k:return dy(N.children,Q,ie,_);case I:de=8,Q|=8;break;case O:return v=Pf(12,N,_,Q|2),v.elementType=O,v.lanes=ie,v;case D:return v=Pf(13,N,_,Q),v.elementType=D,v.lanes=ie,v;case B:return v=Pf(19,N,_,Q),v.elementType=B,v.lanes=ie,v;case ee:return R2(N,Q,ie,_);default:if(typeof v=="object"&&v!==null)switch(v.$$typeof){case M:de=10;break e;case L:de=9;break e;case H:de=11;break e;case U:de=14;break e;case G:de=16,j=null;break e}throw Error(n(130,v==null?v:typeof v,""))}return _=Pf(de,N,_,Q),_.elementType=v,_.type=j,_.lanes=ie,_}function dy(v,_,N,j){return v=Pf(7,v,j,_),v.lanes=N,v}function R2(v,_,N,j){return v=Pf(22,v,j,_),v.elementType=ee,v.lanes=N,v.stateNode={isHidden:!1},v}function DC(v,_,N){return v=Pf(6,v,null,_),v.lanes=N,v}function OC(v,_,N){return _=Pf(4,v.children!==null?v.children:[],v.key,_),_.lanes=N,_.stateNode={containerInfo:v.containerInfo,pendingChildren:null,implementation:v.implementation},_}function P7(v,_,N,j,Q){this.tag=_,this.containerInfo=v,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Zt(0),this.expirationTimes=Zt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zt(0),this.identifierPrefix=j,this.onRecoverableError=Q,this.mutableSourceEagerHydrationData=null}function MC(v,_,N,j,Q,ie,de,ke,Le){return v=new P7(v,_,N,ke,Le),_===1?(_=1,ie===!0&&(_|=8)):_=0,ie=Pf(3,null,null,_),v.current=ie,ie.stateNode=v,ie.memoizedState={element:j,isDehydrated:N,cache:null,transitions:null,pendingSuspenseBoundaries:null},sm(ie),v}function N7(v,_,N){var j=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:A,key:j==null?null:""+j,children:v,containerInfo:_,implementation:N}}function WI(v){if(!v)return xf;v=v._reactInternals;e:{if(bs(v)!==v||v.tag!==1)throw Error(n(170));var _=v;do{switch(_.tag){case 3:_=_.stateNode.context;break e;case 1:if(Ma(_.type)){_=_.stateNode.__reactInternalMemoizedMergedChildContext;break e}}_=_.return}while(_!==null);throw Error(n(171))}if(v.tag===1){var N=v.type;if(Ma(N))return X1(v,N,_)}return _}function GI(v,_,N,j,Q,ie,de,ke,Le){return v=MC(N,j,!0,v,Q,ie,de,ke,Le),v.context=WI(null),N=v.current,j=sl(),Q=hm(N),ie=Sf(j,Q),ie.callback=_??null,Tu(N,ie,Q),v.current.lanes=Q,qn(v,Q,j),zl(v,j),v}function I2(v,_,N,j){var Q=_.current,ie=sl(),de=hm(Q);return N=WI(N),_.context===null?_.context=N:_.pendingContext=N,_=Sf(ie,de),_.payload={element:v},j=j===void 0?null:j,j!==null&&(_.callback=j),v=Tu(Q,_,de),v!==null&&(Pd(v,Q,de,ie),rv(v,Q,de)),de}function P2(v){if(v=v.current,!v.child)return null;switch(v.child.tag){case 5:return v.child.stateNode;default:return v.child.stateNode}}function YI(v,_){if(v=v.memoizedState,v!==null&&v.dehydrated!==null){var N=v.retryLane;v.retryLane=N!==0&&N<_?N:_}}function LC(v,_){YI(v,_),(v=v.alternate)&&YI(v,_)}var KI=typeof reportError=="function"?reportError:function(v){console.error(v)};function FC(v){this._internalRoot=v}Lx.prototype.render=FC.prototype.render=function(v){var _=this._internalRoot;if(_===null)throw Error(n(409));I2(v,_,null,null)},Lx.prototype.unmount=FC.prototype.unmount=function(){var v=this._internalRoot;if(v!==null){this._internalRoot=null;var _=v.containerInfo;ly(function(){I2(null,v,null,null)}),_[_u]=null}};function Lx(v){this._internalRoot=v}Lx.prototype.unstable_scheduleHydration=function(v){if(v){var _=pd();v={blockedOn:null,target:v,priority:_};for(var N=0;N<Aa.length&&_!==0&&_<Aa[N].priority;N++);Aa.splice(N,0,v),N===0&&md(v)}};function N2(v){return!(!v||v.nodeType!==1&&v.nodeType!==9&&v.nodeType!==11)}function D2(v){return!(!v||v.nodeType!==1&&v.nodeType!==9&&v.nodeType!==11&&(v.nodeType!==8||v.nodeValue!==" react-mount-point-unstable "))}function XI(){}function D7(v,_,N,j,Q){if(Q){if(typeof j=="function"){var ie=j;j=function(){var st=P2(de);ie.call(st)}}var de=GI(_,j,v,0,null,!1,!1,"",XI);return v._reactRootContainer=de,v[_u]=de.current,vf(v.nodeType===8?v.parentNode:v),ly(),de}for(;Q=v.lastChild;)v.removeChild(Q);if(typeof j=="function"){var ke=j;j=function(){var st=P2(Le);ke.call(st)}}var Le=MC(v,0,!1,null,null,!1,!1,"",XI);return v._reactRootContainer=Le,v[_u]=Le.current,vf(v.nodeType===8?v.parentNode:v),ly(function(){I2(_,Le,N,j)}),Le}function O2(v,_,N,j,Q){var ie=N._reactRootContainer;if(ie){var de=ie;if(typeof Q=="function"){var ke=Q;Q=function(){var Le=P2(de);ke.call(Le)}}I2(_,de,v,Q)}else de=D7(N,_,v,Q,j);return P2(de)}ls=function(v){switch(v.tag){case 3:var _=v.stateNode;if(_.current.memoizedState.isDehydrated){var N=De(_.pendingLanes);N!==0&&(lr(_,N|1),zl(_,Er()),!(ui&6)&&(uy=Er()+500,Ah()))}break;case 13:ly(function(){var j=tl(v,1);if(j!==null){var Q=sl();Pd(j,v,1,Q)}}),LC(v,1)}},Ao=function(v){if(v.tag===13){var _=tl(v,134217728);if(_!==null){var N=sl();Pd(_,v,134217728,N)}LC(v,134217728)}},Pl=function(v){if(v.tag===13){var _=hm(v),N=tl(v,_);if(N!==null){var j=sl();Pd(N,v,_,j)}LC(v,_)}},pd=function(){return _n},Gu=function(v,_){var N=_n;try{return _n=v,_()}finally{_n=N}},Ji=function(v,_,N){switch(_){case"input":if(We(v,N),_=N.name,N.type==="radio"&&_!=null){for(N=v;N.parentNode;)N=N.parentNode;for(N=N.querySelectorAll("input[name="+JSON.stringify(""+_)+'][type="radio"]'),_=0;_<N.length;_++){var j=N[_];if(j!==v&&j.form===v.form){var Q=Oo(j);if(!Q)throw Error(n(90));me(j),We(j,Q)}}}break;case"textarea":Lt(v,N);break;case"select":_=N.value,_!=null&&Rt(v,!!N.multiple,_,!1)}},Ea=IC,Sa=ly;var M2={usingClientEntryPoint:!1,Events:[Na,On,Oo,po,Wu,IC]},Fx={findFiberByHostInstance:Rc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},O7={bundleType:Fx.bundleType,version:Fx.version,rendererPackageName:Fx.rendererPackageName,rendererConfig:Fx.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(v){return v=hd(v),v===null?null:v.stateNode},findFiberByHostInstance:Fx.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var L2=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!L2.isDisabled&&L2.supportsFiber)try{Zo=L2.inject(O7),qi=L2}catch{}}return Mf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M2,Mf.createPortal=function(v,_){var N=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!N2(_))throw Error(n(200));return N7(v,_,null,N)},Mf.createRoot=function(v,_){if(!N2(v))throw Error(n(299));var N=!1,j="",Q=KI;return _!=null&&(_.unstable_strictMode===!0&&(N=!0),_.identifierPrefix!==void 0&&(j=_.identifierPrefix),_.onRecoverableError!==void 0&&(Q=_.onRecoverableError)),_=MC(v,1,!1,null,null,N,!1,j,Q),v[_u]=_.current,vf(v.nodeType===8?v.parentNode:v),new FC(_)},Mf.findDOMNode=function(v){if(v==null)return null;if(v.nodeType===1)return v;var _=v._reactInternals;if(_===void 0)throw typeof v.render=="function"?Error(n(188)):(v=Object.keys(v).join(","),Error(n(268,v)));return v=hd(_),v=v===null?null:v.stateNode,v},Mf.flushSync=function(v){return ly(v)},Mf.hydrate=function(v,_,N){if(!D2(_))throw Error(n(200));return O2(null,v,_,!0,N)},Mf.hydrateRoot=function(v,_,N){if(!N2(v))throw Error(n(405));var j=N!=null&&N.hydratedSources||null,Q=!1,ie="",de=KI;if(N!=null&&(N.unstable_strictMode===!0&&(Q=!0),N.identifierPrefix!==void 0&&(ie=N.identifierPrefix),N.onRecoverableError!==void 0&&(de=N.onRecoverableError)),_=GI(_,null,v,1,N??null,Q,!1,ie,de),v[_u]=_.current,vf(v),j)for(v=0;v<j.length;v++)N=j[v],Q=N._getVersion,Q=Q(N._source),_.mutableSourceEagerHydrationData==null?_.mutableSourceEagerHydrationData=[N,Q]:_.mutableSourceEagerHydrationData.push(N,Q);return new Lx(_)},Mf.render=function(v,_,N){if(!D2(_))throw Error(n(200));return O2(null,v,_,!1,N)},Mf.unmountComponentAtNode=function(v){if(!D2(v))throw Error(n(40));return v._reactRootContainer?(ly(function(){O2(null,null,v,!1,function(){v._reactRootContainer=null,v[_u]=null})}),!0):!1},Mf.unstable_batchedUpdates=IC,Mf.unstable_renderSubtreeIntoContainer=function(v,_,N,j){if(!D2(N))throw Error(n(200));if(v==null||v._reactInternals===void 0)throw Error(n(38));return O2(v,_,N,!1,j)},Mf.version="18.3.1-next-f1338f8080-20240426",Mf}var Tte;function ume(){if(Tte)return K7.exports;Tte=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),K7.exports=kNe(),K7.exports}var Cte;function RNe(){if(Cte)return e6;Cte=1;var e=ume();return e6.createRoot=e.createRoot,e6.hydrateRoot=e.hydrateRoot,e6}var INe=RNe();const PNe=hc(INe);var Cm=function(){return Cm=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Cm.apply(this,arguments)};function Z4(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function NNe(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}var mP="right-scroll-bar-position",gP="width-before-scroll-bar",DNe="with-scroll-bars-hidden",ONe="--removed-body-scroll-bar-size";function J7(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function MNe(e,t){var n=z.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=t,n.facade}var LNe=typeof window<"u"?z.useLayoutEffect:z.useEffect,Ate=new WeakMap;function FNe(e,t){var n=MNe(null,function(r){return e.forEach(function(i){return J7(i,r)})});return LNe(function(){var r=Ate.get(n);if(r){var i=new Set(r),s=new Set(e),o=n.current;i.forEach(function(a){s.has(a)||J7(a,null)}),s.forEach(function(a){i.has(a)||J7(a,o)})}Ate.set(n,e)},[e]),n}function $Ne(e){return e}function BNe(e,t){t===void 0&&(t=$Ne);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(s){var o=t(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var u=function(){var c=o;o=[],c.forEach(s)},l=function(){return Promise.resolve().then(u)};l(),n={push:function(c){o.push(c),l()},filter:function(c){return o=o.filter(c),n}}}};return i}function jNe(e){e===void 0&&(e={});var t=BNe(null);return t.options=Cm({async:!0,ssr:!1},e),t}var lme=function(e){var t=e.sideCar,n=Z4(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return z.createElement(r,Cm({},n))};lme.isSideCarExport=!0;function UNe(e,t){return e.useMedium(t),lme}var cme=jNe(),Z7=function(){},PO=z.forwardRef(function(e,t){var n=z.useRef(null),r=z.useState({onScrollCapture:Z7,onWheelCapture:Z7,onTouchMoveCapture:Z7}),i=r[0],s=r[1],o=e.forwardProps,a=e.children,u=e.className,l=e.removeScrollBar,c=e.enabled,f=e.shards,d=e.sideCar,h=e.noIsolation,p=e.inert,m=e.allowPinchZoom,g=e.as,b=g===void 0?"div":g,y=e.gapMode,x=Z4(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=d,T=FNe([n,t]),A=Cm(Cm({},x),i);return z.createElement(z.Fragment,null,c&&z.createElement(w,{sideCar:cme,removeScrollBar:l,shards:f,noIsolation:h,inert:p,setCallbacks:s,allowPinchZoom:!!m,lockRef:n,gapMode:y}),o?z.cloneElement(z.Children.only(a),Cm(Cm({},A),{ref:T})):z.createElement(b,Cm({},A,{className:u,ref:T}),a))});PO.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};PO.classNames={fullWidth:gP,zeroRight:mP};var fme=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function zNe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=fme();return t&&e.setAttribute("nonce",t),e}function VNe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function HNe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var qNe=function(){var e=0,t=null;return{add:function(n){e==0&&(t=zNe())&&(VNe(t,n),HNe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},WNe=function(){var e=qNe();return function(t,n){z.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},GNe=function(){var e=WNe(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},YNe={left:0,top:0,right:0,gap:0},eF=function(e){return parseInt(e||"",10)||0},KNe=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[eF(n),eF(r),eF(i)]},XNe=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return YNe;var t=KNe(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},QNe=GNe(),LE="data-scroll-locked",JNe=function(e,t,n,r){var i=e.left,s=e.top,o=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(DNe,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(LE,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(mP,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(gP,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(mP," .").concat(mP,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(gP," .").concat(gP,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(LE,`] {
    `).concat(ONe,": ").concat(a,`px;
  }
`)},kte=function(){var e=parseInt(document.body.getAttribute(LE)||"0",10);return isFinite(e)?e:0},ZNe=function(){z.useEffect(function(){return document.body.setAttribute(LE,(kte()+1).toString()),function(){var e=kte()-1;e<=0?document.body.removeAttribute(LE):document.body.setAttribute(LE,e.toString())}},[])},eDe=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=r===void 0?"margin":r;ZNe();var s=z.useMemo(function(){return XNe(i)},[i]);return z.createElement(QNe,{styles:JNe(s,!t,i,n?"":"!important")})};function tDe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=fme();return t&&e.setAttribute("nonce",t),e}function nDe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function rDe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var iDe=function(){var e=0,t=null;return{add:function(n){e==0&&(t=tDe())&&(nDe(t,n),rDe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},sDe=function(){var e=iDe();return function(t,n){z.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},oDe=function(){var e=sDe(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},Wj=!1;if(typeof window<"u")try{var t6=Object.defineProperty({},"passive",{get:function(){return Wj=!0,!0}});window.addEventListener("test",t6,t6),window.removeEventListener("test",t6,t6)}catch{Wj=!1}var B2=Wj?{passive:!1}:!1,aDe=function(e){return e.tagName==="TEXTAREA"},dme=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!aDe(e)&&n[t]==="visible")},uDe=function(e){return dme(e,"overflowY")},lDe=function(e){return dme(e,"overflowX")},Rte=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=hme(e,r);if(i){var s=pme(e,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},cDe=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},fDe=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},hme=function(e,t){return e==="v"?uDe(t):lDe(t)},pme=function(e,t){return e==="v"?cDe(t):fDe(t)},dDe=function(e,t){return e==="h"&&t==="rtl"?-1:1},hDe=function(e,t,n,r,i){var s=dDe(e,window.getComputedStyle(t).direction),o=s*r,a=n.target,u=t.contains(a),l=!1,c=o>0,f=0,d=0;do{var h=pme(e,a),p=h[0],m=h[1],g=h[2],b=m-g-s*p;(p||b)&&hme(e,a)&&(f+=b,d+=p),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!u&&a!==document.body||u&&(t.contains(a)||t===a));return(c&&Math.abs(f)<1||!c&&Math.abs(d)<1)&&(l=!0),l},n6=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Ite=function(e){return[e.deltaX,e.deltaY]},Pte=function(e){return e&&"current"in e?e.current:e},pDe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},mDe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},gDe=0,j2=[];function yDe(e){var t=z.useRef([]),n=z.useRef([0,0]),r=z.useRef(),i=z.useState(gDe++)[0],s=z.useState(oDe)[0],o=z.useRef(e);z.useEffect(function(){o.current=e},[e]),z.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var m=NNe([e.lockRef.current],(e.shards||[]).map(Pte),!0).filter(Boolean);return m.forEach(function(g){return g.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),m.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var a=z.useCallback(function(m,g){if("touches"in m&&m.touches.length===2||m.type==="wheel"&&m.ctrlKey)return!o.current.allowPinchZoom;var b=n6(m),y=n.current,x="deltaX"in m?m.deltaX:y[0]-b[0],w="deltaY"in m?m.deltaY:y[1]-b[1],T,A=m.target,k=Math.abs(x)>Math.abs(w)?"h":"v";if("touches"in m&&k==="h"&&A.type==="range")return!1;var I=Rte(k,A);if(!I)return!0;if(I?T=k:(T=k==="v"?"h":"v",I=Rte(k,A)),!I)return!1;if(!r.current&&"changedTouches"in m&&(x||w)&&(r.current=T),!T)return!0;var O=r.current||T;return hDe(O,g,m,O==="h"?x:w)},[]),u=z.useCallback(function(m){var g=m;if(!(!j2.length||j2[j2.length-1]!==s)){var b="deltaY"in g?Ite(g):n6(g),y=t.current.filter(function(T){return T.name===g.type&&(T.target===g.target||g.target===T.shadowParent)&&pDe(T.delta,b)})[0];if(y&&y.should){g.cancelable&&g.preventDefault();return}if(!y){var x=(o.current.shards||[]).map(Pte).filter(Boolean).filter(function(T){return T.contains(g.target)}),w=x.length>0?a(g,x[0]):!o.current.noIsolation;w&&g.cancelable&&g.preventDefault()}}},[]),l=z.useCallback(function(m,g,b,y){var x={name:m,delta:g,target:b,should:y,shadowParent:vDe(b)};t.current.push(x),setTimeout(function(){t.current=t.current.filter(function(w){return w!==x})},1)},[]),c=z.useCallback(function(m){n.current=n6(m),r.current=void 0},[]),f=z.useCallback(function(m){l(m.type,Ite(m),m.target,a(m,e.lockRef.current))},[]),d=z.useCallback(function(m){l(m.type,n6(m),m.target,a(m,e.lockRef.current))},[]);z.useEffect(function(){return j2.push(s),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:d}),document.addEventListener("wheel",u,B2),document.addEventListener("touchmove",u,B2),document.addEventListener("touchstart",c,B2),function(){j2=j2.filter(function(m){return m!==s}),document.removeEventListener("wheel",u,B2),document.removeEventListener("touchmove",u,B2),document.removeEventListener("touchstart",c,B2)}},[]);var h=e.removeScrollBar,p=e.inert;return z.createElement(z.Fragment,null,p?z.createElement(s,{styles:mDe(i)}):null,h?z.createElement(eDe,{gapMode:e.gapMode}):null)}function vDe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const bDe=UNe(cme,yDe);var aS=z.forwardRef(function(e,t){return z.createElement(PO,Cm({},e,{ref:t,sideCar:bDe}))});aS.classNames=PO.classNames;function Cs(e){return Object.keys(e)}function tF(e){return e&&typeof e=="object"&&!Array.isArray(e)}function iq(e,t){const n={...e},r=t;return tF(e)&&tF(t)&&Object.keys(t).forEach(i=>{tF(r[i])&&i in e?n[i]=iq(n[i],r[i]):n[i]=r[i]}),n}function xDe(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}function _De(e){var t;return typeof e!="string"||!e.includes("var(--mantine-scale)")?e:(t=e.match(/^calc\((.*?)\)$/))==null?void 0:t[1].split("*")[0].trim()}function jk(e){const t=_De(e);return typeof t=="number"?t:typeof t=="string"?t.includes("calc")||t.includes("var")?t:t.includes("px")?Number(t.replace("px","")):t.includes("rem")?Number(t.replace("rem",""))*16:t.includes("em")?Number(t.replace("em",""))*16:Number(t):NaN}function nF(e){return e==="0rem"?"0rem":`calc(${e} * var(--mantine-scale))`}function mme(e,{shouldScale:t=!1}={}){function n(r){if(r===0||r==="0")return`0${e}`;if(typeof r=="number"){const i=`${r/16}${e}`;return t?nF(i):i}if(typeof r=="string"){if(r===""||r.startsWith("calc(")||r.startsWith("clamp(")||r.includes("rgba("))return r;if(r.includes(","))return r.split(",").map(s=>n(s)).join(",");if(r.includes(" "))return r.split(" ").map(s=>n(s)).join(" ");if(r.includes(e))return t?nF(r):r;const i=r.replace("px","");if(!Number.isNaN(Number(i))){const s=`${Number(i)/16}${e}`;return t?nF(s):s}}return r}return n}const ot=mme("rem",{shouldScale:!0}),X8=mme("em");function Mb(e){return Object.keys(e).reduce((t,n)=>(e[n]!==void 0&&(t[n]=e[n]),t),{})}function gme(e){if(typeof e=="number")return!0;if(typeof e=="string"){if(e.startsWith("calc(")||e.startsWith("var(")||e.includes(" ")&&e.trim()!=="")return!0;const t=/^[+-]?[0-9]+(\.[0-9]+)?(px|em|rem|ex|ch|lh|rlh|vw|vh|vmin|vmax|vb|vi|svw|svh|lvw|lvh|dvw|dvh|cm|mm|in|pt|pc|q|cqw|cqh|cqi|cqb|cqmin|cqmax|%)?$/;return e.trim().split(/\s+/).every(r=>t.test(r))}return!1}function Lb(e){return Array.isArray(e)||e===null?!1:typeof e=="object"?e.type!==z.Fragment:!1}function Al(e){const t=z.createContext(null);return[({children:i,value:s})=>R.jsx(t.Provider,{value:s,children:i}),()=>{const i=z.useContext(t);if(i===null)throw new Error(e);return i}]}function Fb(e=null){const t=z.createContext(e);return[({children:i,value:s})=>R.jsx(t.Provider,{value:s,children:i}),()=>z.useContext(t)]}function Q8(e,t){return n=>{if(typeof n!="string"||n.trim().length===0)throw new Error(t);return`${e}-${n}`}}function J8(e,t){let n=e;for(;(n=n.parentElement)&&!n.matches(t););return n}function wDe(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].disabled)return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].disabled)return r}return e}function EDe(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].disabled)return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].disabled)return r}return e}function SDe(e,t,n){return J8(e,n)===J8(t,n)}function sq({parentSelector:e,siblingSelector:t,onKeyDown:n,loop:r=!0,activateOnFocus:i=!1,dir:s="rtl",orientation:o}){return a=>{var p;n==null||n(a);const u=Array.from(((p=J8(a.currentTarget,e))==null?void 0:p.querySelectorAll(t))||[]).filter(m=>SDe(a.currentTarget,m,e)),l=u.findIndex(m=>a.currentTarget===m),c=EDe(l,u,r),f=wDe(l,u,r),d=s==="rtl"?f:c,h=s==="rtl"?c:f;switch(a.key){case"ArrowRight":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[d].focus(),i&&u[d].click());break}case"ArrowLeft":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[h].focus(),i&&u[h].click());break}case"ArrowUp":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[f].focus(),i&&u[f].click());break}case"ArrowDown":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[c].focus(),i&&u[c].click());break}case"Home":{a.stopPropagation(),a.preventDefault(),!u[0].disabled&&u[0].focus();break}case"End":{a.stopPropagation(),a.preventDefault();const m=u.length-1;!u[m].disabled&&u[m].focus();break}}}}const TDe={app:100,modal:200,popover:300,overlay:400,max:9999};function ld(e){return TDe[e]}const Gj=()=>{};function CDe(e,t={active:!0}){return typeof e!="function"||!t.active?t.onKeyDown||Gj:n=>{var r;n.key==="Escape"&&(e(n),(r=t.onTrigger)==null||r.call(t))}}function _r(e,t="size",n=!0){if(e!==void 0)return gme(e)?n?ot(e):e:`var(--${t}-${e})`}function Ha(e){return _r(e,"mantine-spacing")}function as(e){return e===void 0?"var(--mantine-radius-default)":_r(e,"mantine-radius")}function xl(e){return _r(e,"mantine-font-size")}function yme(e){return _r(e,"mantine-line-height",!1)}function oq(e){if(e)return _r(e,"mantine-shadow",!1)}function Nm(e,t){return n=>{e==null||e(n),t==null||t(n)}}function aq(e,t){return e in t?jk(t[e]):jk(e)}function Uk(e,t){const n=e.map(r=>({value:r,px:aq(r,t)}));return n.sort((r,i)=>r.px-i.px),n}function c0(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function ADe(e,t,n){var r;return n?Array.from(((r=J8(n,t))==null?void 0:r.querySelectorAll(e))||[]).findIndex(i=>i===n):null}function kDe(){const[e,t]=z.useState(-1);return[e,{setHovered:t,resetHovered:()=>t(-1)}]}function Am(e,t,n){return t===void 0&&n===void 0?e:t!==void 0&&n===void 0?Math.max(e,t):Math.min(t===void 0&&n!==void 0?e:Math.max(e,t),n)}function FE(e="mantine-"){return`${e}${Math.random().toString(36).slice(2,11)}`}function Rv(e){const t=z.useRef(e);return z.useEffect(()=>{t.current=e}),z.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}const RDe=()=>{};function NO(e,t){const n=typeof t=="number"?t:t.delay,r=typeof t=="number"?!1:t.flushOnUnmount,i=Rv(e),s=z.useRef(0),o=Object.assign(z.useCallback((...a)=>{window.clearTimeout(s.current);const u=()=>{s.current!==0&&(s.current=0,i(...a))};o.flush=u,s.current=window.setTimeout(u,n)},[i,n]),{flush:RDe});return z.useEffect(()=>()=>{window.clearTimeout(s.current),r&&o.flush()},[o,r]),o}const Nte=["mousedown","touchstart"];function IDe(e,t,n){const r=z.useRef(null);return z.useEffect(()=>{const i=s=>{const{target:o}=s??{};if(Array.isArray(n)){const a=(o==null?void 0:o.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(o)&&o.tagName!=="HTML";n.every(l=>!!l&&!s.composedPath().includes(l))&&!a&&e()}else r.current&&!r.current.contains(o)&&e()};return(t||Nte).forEach(s=>document.addEventListener(s,i)),()=>{(t||Nte).forEach(s=>document.removeEventListener(s,i))}},[r,e,n]),r}function PDe(e,t){try{return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}catch{return e.addListener(t),()=>e.removeListener(t)}}function NDe(e,t){return typeof window<"u"&&"matchMedia"in window?window.matchMedia(e).matches:!1}function DDe(e,t,{getInitialValueInEffect:n}={getInitialValueInEffect:!0}){const[r,i]=z.useState(n?t:NDe(e)),s=z.useRef(null);return z.useEffect(()=>{if("matchMedia"in window)return s.current=window.matchMedia(e),i(s.current.matches),PDe(s.current,o=>i(o.matches))},[e]),r}const ww=typeof document<"u"?z.useLayoutEffect:z.useEffect;function eg(e,t){const n=z.useRef(!1);z.useEffect(()=>()=>{n.current=!1},[]),z.useEffect(()=>{if(n.current)return e();n.current=!0},t)}function vme({opened:e,shouldReturnFocus:t=!0}){const n=z.useRef(null),r=()=>{var i;n.current&&"focus"in n.current&&typeof n.current.focus=="function"&&((i=n.current)==null||i.focus({preventScroll:!0}))};return eg(()=>{let i=-1;const s=o=>{o.key==="Tab"&&window.clearTimeout(i)};return document.addEventListener("keydown",s),e?n.current=document.activeElement:t&&(i=window.setTimeout(r,10)),()=>{window.clearTimeout(i),document.removeEventListener("keydown",s)}},[e,t]),r}const ODe=/input|select|textarea|button|object/,bme="a, input, select, textarea, button, object, [tabindex]";function MDe(e){return e.style.display==="none"}function LDe(e){if(e.getAttribute("aria-hidden")||e.getAttribute("hidden")||e.getAttribute("type")==="hidden")return!1;let n=e;for(;n&&!(n===document.body||n.nodeType===11);){if(MDe(n))return!1;n=n.parentNode}return!0}function xme(e){let t=e.getAttribute("tabindex");return t===null&&(t=void 0),parseInt(t,10)}function Yj(e){const t=e.nodeName.toLowerCase(),n=!Number.isNaN(xme(e));return(ODe.test(t)&&!e.disabled||e instanceof HTMLAnchorElement&&e.href||n)&&LDe(e)}function _me(e){const t=xme(e);return(Number.isNaN(t)||t>=0)&&Yj(e)}function FDe(e){return Array.from(e.querySelectorAll(bme)).filter(_me)}function $De(e,t){const n=FDe(e);if(!n.length){t.preventDefault();return}const r=n[t.shiftKey?0:n.length-1],i=e.getRootNode();let s=r===i.activeElement||e===i.activeElement;const o=i.activeElement;if(o.tagName==="INPUT"&&o.getAttribute("type")==="radio"&&(s=n.filter(c=>c.getAttribute("type")==="radio"&&c.getAttribute("name")===o.getAttribute("name")).includes(r)),!s)return;t.preventDefault();const u=n[t.shiftKey?n.length-1:0];u&&u.focus()}function BDe(e=!0){const t=z.useRef(null),n=i=>{let s=i.querySelector("[data-autofocus]");if(!s){const o=Array.from(i.querySelectorAll(bme));s=o.find(_me)||o.find(Yj)||null,!s&&Yj(i)&&(s=i)}s&&s.focus({preventScroll:!0})},r=z.useCallback(i=>{e&&i!==null&&t.current!==i&&(i?(setTimeout(()=>{i.getRootNode()&&n(i)}),t.current=i):t.current=null)},[e]);return z.useEffect(()=>{if(!e)return;t.current&&setTimeout(()=>n(t.current));const i=s=>{s.key==="Tab"&&t.current&&$De(t.current,s)};return document.addEventListener("keydown",i),()=>document.removeEventListener("keydown",i)},[e]),r}const jDe=e=>(e+1)%1e6;function UDe(){const[,e]=z.useReducer(jDe,0);return e}const zDe=sr.useId||(()=>{});function VDe(){const e=zDe();return e?`mantine-${e.replace(/:/g,"")}`:""}function lf(e){const t=VDe(),[n,r]=z.useState(t);return ww(()=>{r(FE())},[]),typeof e=="string"?e:typeof window>"u"?t:n}function wme(e,t,n){z.useEffect(()=>(window.addEventListener(e,t,n),()=>window.removeEventListener(e,t,n)),[e,t])}function Z8(e,t){if(typeof e=="function")return e(t);typeof e=="object"&&e!==null&&"current"in e&&(e.current=t)}function Eme(...e){const t=new Map;return n=>{if(e.forEach(r=>{const i=Z8(r,n);i&&t.set(r,i)}),t.size>0)return()=>{e.forEach(r=>{const i=t.get(r);i?i():Z8(r,null)}),t.clear()}}}function yu(...e){return z.useCallback(Eme(...e),e)}function HDe(e,t,n="ltr"){const r=z.useRef(null),i=z.useRef(!1),s=z.useRef(!1),o=z.useRef(0),[a,u]=z.useState(!1);return z.useEffect(()=>{i.current=!0},[]),z.useEffect(()=>{var y,x;const l=({x:w,y:T})=>{cancelAnimationFrame(o.current),o.current=requestAnimationFrame(()=>{if(i.current&&r.current){r.current.style.userSelect="none";const A=r.current.getBoundingClientRect();if(A.width&&A.height){const k=Am((w-A.left)/A.width,0,1);e({x:n==="ltr"?k:1-k,y:Am((T-A.top)/A.height,0,1)})}}})},c=()=>{document.addEventListener("mousemove",m),document.addEventListener("mouseup",h),document.addEventListener("touchmove",b),document.addEventListener("touchend",h)},f=()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",h),document.removeEventListener("touchmove",b),document.removeEventListener("touchend",h)},d=()=>{!s.current&&i.current&&(s.current=!0,typeof(t==null?void 0:t.onScrubStart)=="function"&&t.onScrubStart(),u(!0),c())},h=()=>{s.current&&i.current&&(s.current=!1,u(!1),f(),setTimeout(()=>{typeof(t==null?void 0:t.onScrubEnd)=="function"&&t.onScrubEnd()},0))},p=w=>{d(),w.preventDefault(),m(w)},m=w=>l({x:w.clientX,y:w.clientY}),g=w=>{w.cancelable&&w.preventDefault(),d(),b(w)},b=w=>{w.cancelable&&w.preventDefault(),l({x:w.changedTouches[0].clientX,y:w.changedTouches[0].clientY})};return(y=r.current)==null||y.addEventListener("mousedown",p),(x=r.current)==null||x.addEventListener("touchstart",g,{passive:!1}),()=>{r.current&&(r.current.removeEventListener("mousedown",p),r.current.removeEventListener("touchstart",g))}},[n,e]),{ref:r,active:a}}function Bu({value:e,defaultValue:t,finalValue:n,onChange:r=()=>{}}){const[i,s]=z.useState(t!==void 0?t:n),o=(a,...u)=>{s(a),r==null||r(a,...u)};return e!==void 0?[e,r,!0]:[i,o,!1]}function DO(e,t){return DDe("(prefers-reduced-motion: reduce)",e,t)}const qDe={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function eR(e){const t=z.useRef(0),n=z.useRef(null),[r,i]=z.useState(qDe),s=z.useMemo(()=>typeof window<"u"?new ResizeObserver(o=>{const a=o[0];a&&(cancelAnimationFrame(t.current),t.current=requestAnimationFrame(()=>{n.current&&i(a.contentRect)}))}):null,[]);return z.useEffect(()=>(n.current&&(s==null||s.observe(n.current,e)),()=>{s==null||s.disconnect(),t.current&&cancelAnimationFrame(t.current)}),[n.current]),[n,r]}function WDe(e){const[t,{width:n,height:r}]=eR(e);return{ref:t,width:n,height:r}}function uq(e=!1,t){const{onOpen:n,onClose:r}={},[i,s]=z.useState(e),o=z.useCallback(()=>{s(l=>l||(n==null||n(),!0))},[n]),a=z.useCallback(()=>{s(l=>l&&(r==null||r(),!1))},[r]),u=z.useCallback(()=>{i?a():o()},[a,o,i]);return[i,{open:o,close:a,toggle:u}]}function GDe(e){const t=z.useRef(void 0);return z.useEffect(()=>{t.current=e},[e]),t.current}function YDe(e,t){const n=Rv(e),r=z.useRef(null),i=z.useRef(null),s=z.useRef(!0),o=z.useRef(t),a=z.useRef(-1),u=()=>window.clearTimeout(a.current),l=z.useCallback((...d)=>{n(...d),r.current=d,i.current=d,s.current=!1},[n]),c=z.useCallback(()=>{r.current&&r.current!==i.current?(l(...r.current),a.current=window.setTimeout(c,o.current)):s.current=!0},[l]),f=z.useCallback((...d)=>{s.current?(l(...d),a.current=window.setTimeout(c,o.current)):r.current=d},[l,c]);return z.useEffect(()=>{o.current=t},[t]),[f,u]}function KDe(e,t){const[n,r]=z.useState(e),[i,s]=YDe(r,t);return z.useEffect(()=>s,[]),[n,i]}function XDe(e,t){window.dispatchEvent(new CustomEvent(e,{detail:t}))}function QDe(e){function t(r){const i=Object.keys(r).reduce((s,o)=>(s[`${e}:${o}`]=a=>r[o](a.detail),s),{});ww(()=>(Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s]),window.addEventListener(s,i[s])}),()=>Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s])})),[i])}function n(r){return(...i)=>XDe(`${e}:${String(r)}`,i[0])}return[t,n]}var JDe={};function ZDe(){return typeof process<"u"&&JDe?"production":"development"}function Dte(e,t){return t.length===0?e:t.reduce((n,r)=>Math.abs(r-e)<Math.abs(n-e)?r:n)}function OO(e){var n;const t=sr.version;return typeof sr.version!="string"||t.startsWith("18.")?e==null?void 0:e.ref:(n=e==null?void 0:e.props)==null?void 0:n.ref}function Sme(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=Sme(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function va(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=Sme(e))&&(r&&(r+=" "),r+=t);return r}const eOe={};function tOe(e){const t={};return e.forEach(n=>{Object.entries(n).forEach(([r,i])=>{t[r]?t[r]=va(t[r],i):t[r]=i})}),t}function MO({theme:e,classNames:t,props:n,stylesCtx:r}){const s=(Array.isArray(t)?t:[t]).map(o=>typeof o=="function"?o(e,n,r):o||eOe);return tOe(s)}function eN({theme:e,styles:t,props:n,stylesCtx:r}){return(Array.isArray(t)?t:[t]).reduce((s,o)=>typeof o=="function"?{...s,...o(e,n,r)}:{...s,...o},{})}const Tme=z.createContext(null);function $b(){const e=z.useContext(Tme);if(!e)throw new Error("[@mantine/core] MantineProvider was not found in tree");return e}function nOe(){return $b().cssVariablesResolver}function rOe(){return $b().classNamesPrefix}function lq(){return $b().getStyleNonce}function iOe(){return $b().withStaticClasses}function sOe(){return $b().headless}function oOe(){var e;return(e=$b().stylesTransform)==null?void 0:e.sx}function aOe(){var e;return(e=$b().stylesTransform)==null?void 0:e.styles}function uOe(e){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(e)}function lOe(e){let t=e.replace("#","");if(t.length===3){const o=t.split("");t=[o[0],o[0],o[1],o[1],o[2],o[2]].join("")}if(t.length===8){const o=parseInt(t.slice(6,8),16)/255;return{r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:o}}const n=parseInt(t,16),r=n>>16&255,i=n>>8&255,s=n&255;return{r,g:i,b:s,a:1}}function cOe(e){const[t,n,r,i]=e.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:t,g:n,b:r,a:i||1}}function fOe(e){const t=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,n=e.match(t);if(!n)return{r:0,g:0,b:0,a:1};const r=parseInt(n[1],10),i=parseInt(n[2],10)/100,s=parseInt(n[3],10)/100,o=n[5]?parseFloat(n[5]):void 0,a=(1-Math.abs(2*s-1))*i,u=r/60,l=a*(1-Math.abs(u%2-1)),c=s-a/2;let f,d,h;return u>=0&&u<1?(f=a,d=l,h=0):u>=1&&u<2?(f=l,d=a,h=0):u>=2&&u<3?(f=0,d=a,h=l):u>=3&&u<4?(f=0,d=l,h=a):u>=4&&u<5?(f=l,d=0,h=a):(f=a,d=0,h=l),{r:Math.round((f+c)*255),g:Math.round((d+c)*255),b:Math.round((h+c)*255),a:o||1}}function cq(e){return uOe(e)?lOe(e):e.startsWith("rgb")?cOe(e):e.startsWith("hsl")?fOe(e):{r:0,g:0,b:0,a:1}}function r6(e,t){if(e.startsWith("var("))return`color-mix(in srgb, ${e}, black ${t*100}%)`;const{r:n,g:r,b:i,a:s}=cq(e),o=1-t,a=u=>Math.round(u*o);return`rgba(${a(n)}, ${a(r)}, ${a(i)}, ${s})`}function zk(e,t){return typeof e.primaryShade=="number"?e.primaryShade:t==="dark"?e.primaryShade.dark:e.primaryShade.light}function rF(e){return e<=.03928?e/12.92:((e+.055)/1.055)**2.4}function dOe(e){const t=e.match(/oklch\((.*?)%\s/);return t?parseFloat(t[1]):null}function hOe(e){if(e.startsWith("oklch("))return(dOe(e)||0)/100;const{r:t,g:n,b:r}=cq(e),i=t/255,s=n/255,o=r/255,a=rF(i),u=rF(s),l=rF(o);return .2126*a+.7152*u+.0722*l}function jC(e,t=.179){return e.startsWith("var(")?!1:hOe(e)>t}function yg({color:e,theme:t,colorScheme:n}){if(typeof e!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof e}`);if(e==="bright")return{color:e,value:n==="dark"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:jC(n==="dark"?t.white:t.black,t.luminanceThreshold),variable:"--mantine-color-bright"};if(e==="dimmed")return{color:e,value:n==="dark"?t.colors.dark[2]:t.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:jC(n==="dark"?t.colors.dark[2]:t.colors.gray[6],t.luminanceThreshold),variable:"--mantine-color-dimmed"};if(e==="white"||e==="black")return{color:e,value:e==="white"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:jC(e==="white"?t.white:t.black,t.luminanceThreshold),variable:`--mantine-color-${e}`};const[r,i]=e.split("."),s=i?Number(i):void 0,o=r in t.colors;if(o){const a=s!==void 0?t.colors[r][s]:t.colors[r][zk(t,n||"light")];return{color:r,value:a,shade:s,isThemeColor:o,isLight:jC(a,t.luminanceThreshold),variable:i?`--mantine-color-${r}-${s}`:`--mantine-color-${r}-filled`}}return{color:e,value:e,isThemeColor:o,isLight:jC(e,t.luminanceThreshold),shade:s,variable:void 0}}function Fs(e,t){const n=yg({color:e||t.primaryColor,theme:t});return n.variable?`var(${n.variable})`:e}function Kj(e,t){const n={from:(e==null?void 0:e.from)||t.defaultGradient.from,to:(e==null?void 0:e.to)||t.defaultGradient.to,deg:(e==null?void 0:e.deg)||t.defaultGradient.deg||0},r=Fs(n.from,t),i=Fs(n.to,t);return`linear-gradient(${n.deg}deg, ${r} 0%, ${i} 100%)`}function xm(e,t){if(typeof e!="string"||t>1||t<0)return"rgba(0, 0, 0, 1)";if(e.startsWith("var(")){const s=(1-t)*100;return`color-mix(in srgb, ${e}, transparent ${s}%)`}if(e.startsWith("oklch"))return e.includes("/")?e.replace(/\/\s*[\d.]+\s*\)/,`/ ${t})`):e.replace(")",` / ${t})`);const{r:n,g:r,b:i}=cq(e);return`rgba(${n}, ${r}, ${i}, ${t})`}const U2=xm,pOe=({color:e,theme:t,variant:n,gradient:r,autoContrast:i})=>{const s=yg({color:e,theme:t}),o=typeof i=="boolean"?i:t.autoContrast;if(n==="filled"){const a=o&&s.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return s.isThemeColor?s.shade===void 0?{background:`var(--mantine-color-${e}-filled)`,hover:`var(--mantine-color-${e}-filled-hover)`,color:a,border:`${ot(1)} solid transparent`}:{background:`var(--mantine-color-${s.color}-${s.shade})`,hover:`var(--mantine-color-${s.color}-${s.shade===9?8:s.shade+1})`,color:a,border:`${ot(1)} solid transparent`}:{background:e,hover:r6(e,.1),color:a,border:`${ot(1)} solid transparent`}}if(n==="light"){if(s.isThemeColor){if(s.shade===void 0)return{background:`var(--mantine-color-${e}-light)`,hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${ot(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:xm(a,.1),hover:xm(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${ot(1)} solid transparent`}}return{background:xm(e,.1),hover:xm(e,.12),color:e,border:`${ot(1)} solid transparent`}}if(n==="outline")return s.isThemeColor?s.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${e}-outline-hover)`,color:`var(--mantine-color-${e}-outline)`,border:`${ot(1)} solid var(--mantine-color-${e}-outline)`}:{background:"transparent",hover:xm(t.colors[s.color][s.shade],.05),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${ot(1)} solid var(--mantine-color-${s.color}-${s.shade})`}:{background:"transparent",hover:xm(e,.05),color:e,border:`${ot(1)} solid ${e}`};if(n==="subtle"){if(s.isThemeColor){if(s.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${ot(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:"transparent",hover:xm(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${ot(1)} solid transparent`}}return{background:"transparent",hover:xm(e,.12),color:e,border:`${ot(1)} solid transparent`}}return n==="transparent"?s.isThemeColor?s.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${e}-light-color)`,border:`${ot(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${ot(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:e,border:`${ot(1)} solid transparent`}:n==="white"?s.isThemeColor?s.shade===void 0?{background:"var(--mantine-color-white)",hover:r6(t.white,.01),color:`var(--mantine-color-${e}-filled)`,border:`${ot(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:r6(t.white,.01),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${ot(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:r6(t.white,.01),color:e,border:`${ot(1)} solid transparent`}:n==="gradient"?{background:Kj(r,t),hover:Kj(r,t),color:"var(--mantine-color-white)",border:"none"}:n==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${ot(1)} solid var(--mantine-color-default-border)`}:{}},mOe={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},Ote="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",fq={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:mOe,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:pOe,autoContrast:!1,luminanceThreshold:.3,fontFamily:Ote,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:Ote,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:ot(34),lineHeight:"1.3"},h2:{fontSize:ot(26),lineHeight:"1.35"},h3:{fontSize:ot(22),lineHeight:"1.4"},h4:{fontSize:ot(18),lineHeight:"1.45"},h5:{fontSize:ot(16),lineHeight:"1.5"},h6:{fontSize:ot(14),lineHeight:"1.5"}}},fontSizes:{xs:ot(12),sm:ot(14),md:ot(16),lg:ot(18),xl:ot(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:ot(2),sm:ot(4),md:ot(8),lg:ot(16),xl:ot(32)},spacing:{xs:ot(10),sm:ot(12),md:ot(16),lg:ot(20),xl:ot(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${ot(1)} ${ot(3)} rgba(0, 0, 0, 0.05), 0 ${ot(1)} ${ot(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${ot(1)} ${ot(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${ot(10)} ${ot(15)} ${ot(-5)}, rgba(0, 0, 0, 0.04) 0 ${ot(7)} ${ot(7)} ${ot(-5)}`,md:`0 ${ot(1)} ${ot(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${ot(20)} ${ot(25)} ${ot(-5)}, rgba(0, 0, 0, 0.04) 0 ${ot(10)} ${ot(10)} ${ot(-5)}`,lg:`0 ${ot(1)} ${ot(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${ot(28)} ${ot(23)} ${ot(-7)}, rgba(0, 0, 0, 0.04) 0 ${ot(12)} ${ot(12)} ${ot(-7)}`,xl:`0 ${ot(1)} ${ot(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${ot(36)} ${ot(28)} ${ot(-7)}, rgba(0, 0, 0, 0.04) 0 ${ot(17)} ${ot(17)} ${ot(-7)}`},other:{},components:{}};function Mte(e){return e==="auto"||e==="dark"||e==="light"}function gOe({key:e="mantine-color-scheme-value"}={}){let t;return{get:n=>{if(typeof window>"u")return n;try{const r=window.localStorage.getItem(e);return Mte(r)?r:n}catch{return n}},set:n=>{try{window.localStorage.setItem(e,n)}catch(r){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",r)}},subscribe:n=>{t=r=>{r.storageArea===window.localStorage&&r.key===e&&Mte(r.newValue)&&n(r.newValue)},window.addEventListener("storage",t)},unsubscribe:()=>{window.removeEventListener("storage",t)},clear:()=>{window.localStorage.removeItem(e)}}}const yOe="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more  https://mantine.dev/theming/colors/#primary-color",Lte="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function iF(e){return e<0||e>9?!1:parseInt(e.toString(),10)===e}function Fte(e){if(!(e.primaryColor in e.colors))throw new Error(yOe);if(typeof e.primaryShade=="object"&&(!iF(e.primaryShade.dark)||!iF(e.primaryShade.light)))throw new Error(Lte);if(typeof e.primaryShade=="number"&&!iF(e.primaryShade))throw new Error(Lte)}function vOe(e,t){var r;if(!t)return Fte(e),e;const n=iq(e,t);return t.fontFamily&&!((r=t.headings)!=null&&r.fontFamily)&&(n.headings.fontFamily=t.fontFamily),Fte(n),n}const dq=z.createContext(null),bOe=()=>z.useContext(dq)||fq;function Wa(){const e=z.useContext(dq);if(!e)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return e}function Cme({theme:e,children:t,inherit:n=!0}){const r=bOe(),i=z.useMemo(()=>vOe(n?r:fq,e),[e,r,n]);return R.jsx(dq.Provider,{value:i,children:t})}Cme.displayName="@mantine/core/MantineThemeProvider";function xOe(){const e=Wa(),t=lq(),n=Cs(e.breakpoints).reduce((r,i)=>{const s=e.breakpoints[i].includes("px"),o=jk(e.breakpoints[i]),a=s?`${o-.1}px`:X8(o-.1),u=s?`${o}px`:X8(o);return`${r}@media (max-width: ${a}) {.mantine-visible-from-${i} {display: none !important;}}@media (min-width: ${u}) {.mantine-hidden-from-${i} {display: none !important;}}`},"");return R.jsx("style",{"data-mantine-styles":"classes",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:n}})}function sF(e){return Object.entries(e).map(([t,n])=>`${t}: ${n};`).join("")}function UC(e,t){return(Array.isArray(e)?e:[e]).reduce((r,i)=>`${i}{${r}}`,t)}function _Oe(e,t){const n=sF(e.variables),r=n?UC(t,n):"",i=sF(e.dark),s=sF(e.light),o=i?UC(t===":host"?`${t}([data-mantine-color-scheme="dark"])`:`${t}[data-mantine-color-scheme="dark"]`,i):"",a=s?UC(t===":host"?`${t}([data-mantine-color-scheme="light"])`:`${t}[data-mantine-color-scheme="light"]`,s):"";return`${r}${o}${a}`}function Ew({color:e,theme:t,autoContrast:n}){return(typeof n=="boolean"?n:t.autoContrast)&&yg({color:e||t.primaryColor,theme:t}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function $te(e,t){return Ew({color:e.colors[e.primaryColor][zk(e,t)],theme:e,autoContrast:null})}function i6({theme:e,color:t,colorScheme:n,name:r=t,withColorValues:i=!0}){if(!e.colors[t])return{};if(n==="light"){const a=zk(e,"light"),u={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-filled)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${a===9?8:a+1})`,[`--mantine-color-${r}-light`]:U2(e.colors[t][a],.1),[`--mantine-color-${r}-light-hover`]:U2(e.colors[t][a],.12),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline-hover`]:U2(e.colors[t][a],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...u}:u}const s=zk(e,"dark"),o={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-4)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${s})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${s===9?8:s+1})`,[`--mantine-color-${r}-light`]:U2(e.colors[t][Math.max(0,s-2)],.15),[`--mantine-color-${r}-light-hover`]:U2(e.colors[t][Math.max(0,s-2)],.2),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${Math.max(s-5,0)})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${Math.max(s-4,0)})`,[`--mantine-color-${r}-outline-hover`]:U2(e.colors[t][Math.max(s-4,0)],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...o}:o}function wOe(e){return!!e&&typeof e=="object"&&"mantine-virtual-color"in e}function z2(e,t,n){Cs(t).forEach(r=>Object.assign(e,{[`--mantine-${n}-${r}`]:t[r]}))}const Ame=e=>{const t=zk(e,"light"),n=e.defaultRadius in e.radius?e.radius[e.defaultRadius]:ot(e.defaultRadius),r={variables:{"--mantine-scale":e.scale.toString(),"--mantine-cursor-type":e.cursorType,"--mantine-color-scheme":"light dark","--mantine-webkit-font-smoothing":e.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":e.fontSmoothing?"grayscale":"unset","--mantine-color-white":e.white,"--mantine-color-black":e.black,"--mantine-line-height":e.lineHeights.md,"--mantine-font-family":e.fontFamily,"--mantine-font-family-monospace":e.fontFamilyMonospace,"--mantine-font-family-headings":e.headings.fontFamily,"--mantine-heading-font-weight":e.headings.fontWeight,"--mantine-heading-text-wrap":e.headings.textWrap,"--mantine-radius-default":n,"--mantine-primary-color-filled":`var(--mantine-color-${e.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${e.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${e.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${e.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${e.primaryColor}-light-color)`},light:{"--mantine-primary-color-contrast":$te(e,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":e.black,"--mantine-color-body":e.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-${t})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)"},dark:{"--mantine-primary-color-contrast":$te(e,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)"}};z2(r.variables,e.breakpoints,"breakpoint"),z2(r.variables,e.spacing,"spacing"),z2(r.variables,e.fontSizes,"font-size"),z2(r.variables,e.lineHeights,"line-height"),z2(r.variables,e.shadows,"shadow"),z2(r.variables,e.radius,"radius"),e.colors[e.primaryColor].forEach((s,o)=>{r.variables[`--mantine-primary-color-${o}`]=`var(--mantine-color-${e.primaryColor}-${o})`}),Cs(e.colors).forEach(s=>{const o=e.colors[s];if(wOe(o)){Object.assign(r.light,i6({theme:e,name:o.name,color:o.light,colorScheme:"light",withColorValues:!0})),Object.assign(r.dark,i6({theme:e,name:o.name,color:o.dark,colorScheme:"dark",withColorValues:!0}));return}o.forEach((a,u)=>{r.variables[`--mantine-color-${s}-${u}`]=a}),Object.assign(r.light,i6({theme:e,color:s,colorScheme:"light",withColorValues:!1})),Object.assign(r.dark,i6({theme:e,color:s,colorScheme:"dark",withColorValues:!1}))});const i=e.headings.sizes;return Cs(i).forEach(s=>{r.variables[`--mantine-${s}-font-size`]=i[s].fontSize,r.variables[`--mantine-${s}-line-height`]=i[s].lineHeight,r.variables[`--mantine-${s}-font-weight`]=i[s].fontWeight||e.headings.fontWeight}),r};function EOe({theme:e,generator:t}){const n=Ame(e),r=t==null?void 0:t(e);return r?iq(n,r):n}const oF=Ame(fq);function SOe(e){const t={variables:{},light:{},dark:{}};return Cs(e.variables).forEach(n=>{oF.variables[n]!==e.variables[n]&&(t.variables[n]=e.variables[n])}),Cs(e.light).forEach(n=>{oF.light[n]!==e.light[n]&&(t.light[n]=e.light[n])}),Cs(e.dark).forEach(n=>{oF.dark[n]!==e.dark[n]&&(t.dark[n]=e.dark[n])}),t}function TOe(e){return`
  ${e}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${e}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`}function kme({cssVariablesSelector:e,deduplicateCssVariables:t}){const n=Wa(),r=lq(),i=nOe(),s=EOe({theme:n,generator:i}),o=e===":root"&&t,a=o?SOe(s):s,u=_Oe(a,e);return u?R.jsx("style",{"data-mantine-styles":!0,nonce:r==null?void 0:r(),dangerouslySetInnerHTML:{__html:`${u}${o?"":TOe(e)}`}}):null}kme.displayName="@mantine/CssVariables";function COe(){const e=console.error;console.error=(...t)=>{t.length>1&&typeof t[0]=="string"&&t[0].toLowerCase().includes("extra attributes from the server")&&typeof t[1]=="string"&&t[1].toLowerCase().includes("data-mantine-color-scheme")||e(...t)}}function V2(e,t){var i;const n=typeof window<"u"&&"matchMedia"in window&&window.matchMedia("(prefers-color-scheme: dark)").matches,r=e!=="auto"?e:n?"dark":"light";(i=t())==null||i.setAttribute("data-mantine-color-scheme",r)}function AOe({manager:e,defaultColorScheme:t,getRootElement:n,forceColorScheme:r}){const i=z.useRef(null),[s,o]=z.useState(()=>e.get(t)),a=r||s,u=z.useCallback(c=>{r||(V2(c,n),o(c),e.set(c))},[e.set,a,r]),l=z.useCallback(()=>{o(t),V2(t,n),e.clear()},[e.clear,t]);return z.useEffect(()=>(e.subscribe(u),e.unsubscribe),[e.subscribe,e.unsubscribe]),ww(()=>{V2(e.get(t),n)},[]),z.useEffect(()=>{var f;if(r)return V2(r,n),()=>{};r===void 0&&V2(s,n),typeof window<"u"&&"matchMedia"in window&&(i.current=window.matchMedia("(prefers-color-scheme: dark)"));const c=d=>{s==="auto"&&V2(d.matches?"dark":"light",n)};return(f=i.current)==null||f.addEventListener("change",c),()=>{var d;return(d=i.current)==null?void 0:d.removeEventListener("change",c)}},[s,r]),{colorScheme:a,setColorScheme:u,clearColorScheme:l}}function kOe({respectReducedMotion:e,getRootElement:t}){ww(()=>{var n;e&&((n=t())==null||n.setAttribute("data-respect-reduced-motion","true"))},[e])}COe();function Rme({theme:e,children:t,getStyleNonce:n,withStaticClasses:r=!0,withGlobalClasses:i=!0,deduplicateCssVariables:s=!0,withCssVariables:o=!0,cssVariablesSelector:a=":root",classNamesPrefix:u="mantine",colorSchemeManager:l=gOe(),defaultColorScheme:c="light",getRootElement:f=()=>document.documentElement,cssVariablesResolver:d,forceColorScheme:h,stylesTransform:p}){const{colorScheme:m,setColorScheme:g,clearColorScheme:b}=AOe({defaultColorScheme:c,forceColorScheme:h,manager:l,getRootElement:f});return kOe({respectReducedMotion:(e==null?void 0:e.respectReducedMotion)||!1,getRootElement:f}),R.jsx(Tme.Provider,{value:{colorScheme:m,setColorScheme:g,clearColorScheme:b,getRootElement:f,classNamesPrefix:u,getStyleNonce:n,cssVariablesResolver:d,cssVariablesSelector:a,withStaticClasses:r,stylesTransform:p},children:R.jsxs(Cme,{theme:e,children:[o&&R.jsx(kme,{cssVariablesSelector:a,deduplicateCssVariables:s}),i&&R.jsx(xOe,{}),t]})})}Rme.displayName="@mantine/core/MantineProvider";function Sw({classNames:e,styles:t,props:n,stylesCtx:r}){const i=Wa();return{resolvedClassNames:MO({theme:i,classNames:e,props:n,stylesCtx:r||void 0}),resolvedStyles:eN({theme:i,styles:t,props:n,stylesCtx:r||void 0})}}const ROe={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"};function IOe({theme:e,options:t,unstyled:n}){return va((t==null?void 0:t.focusable)&&!n&&(e.focusClassName||ROe[e.focusRing]),(t==null?void 0:t.active)&&!n&&e.activeClassName)}function POe({selector:e,stylesCtx:t,options:n,props:r,theme:i}){return MO({theme:i,classNames:n==null?void 0:n.classNames,props:(n==null?void 0:n.props)||r,stylesCtx:t})[e]}function Bte({selector:e,stylesCtx:t,theme:n,classNames:r,props:i}){return MO({theme:n,classNames:r,props:i,stylesCtx:t})[e]}function NOe({rootSelector:e,selector:t,className:n}){return e===t?n:void 0}function DOe({selector:e,classes:t,unstyled:n}){return n?void 0:t[e]}function OOe({themeName:e,classNamesPrefix:t,selector:n,withStaticClass:r}){return r===!1?[]:e.map(i=>`${t}-${i}-${n}`)}function MOe({themeName:e,theme:t,selector:n,props:r,stylesCtx:i}){return e.map(s=>{var o,a;return(a=MO({theme:t,classNames:(o=t.components[s])==null?void 0:o.classNames,props:r,stylesCtx:i}))==null?void 0:a[n]})}function LOe({options:e,classes:t,selector:n,unstyled:r}){return e!=null&&e.variant&&!r?t[`${n}--${e.variant}`]:void 0}function FOe({theme:e,options:t,themeName:n,selector:r,classNamesPrefix:i,classNames:s,classes:o,unstyled:a,className:u,rootSelector:l,props:c,stylesCtx:f,withStaticClasses:d,headless:h,transformedStyles:p}){return va(IOe({theme:e,options:t,unstyled:a||h}),MOe({theme:e,themeName:n,selector:r,props:c,stylesCtx:f}),LOe({options:t,classes:o,selector:r,unstyled:a}),Bte({selector:r,stylesCtx:f,theme:e,classNames:s,props:c}),Bte({selector:r,stylesCtx:f,theme:e,classNames:p,props:c}),POe({selector:r,stylesCtx:f,options:t,props:c,theme:e}),NOe({rootSelector:l,selector:r,className:u}),DOe({selector:r,classes:o,unstyled:a||h}),d&&!h&&OOe({themeName:n,classNamesPrefix:i,selector:r,withStaticClass:t==null?void 0:t.withStaticClass}),t==null?void 0:t.className)}function $Oe({theme:e,themeName:t,props:n,stylesCtx:r,selector:i}){return t.map(s=>{var o;return eN({theme:e,styles:(o=e.components[s])==null?void 0:o.styles,props:n,stylesCtx:r})[i]}).reduce((s,o)=>({...s,...o}),{})}function Xj({style:e,theme:t}){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...Xj({style:r,theme:t})}),{}):typeof e=="function"?e(t):e??{}}function BOe(e){return e.reduce((t,n)=>(n&&Object.keys(n).forEach(r=>{t[r]={...t[r],...Mb(n[r])}}),t),{})}function jOe({vars:e,varsResolver:t,theme:n,props:r,stylesCtx:i,selector:s,themeName:o,headless:a}){var u;return(u=BOe([a?{}:t==null?void 0:t(n,r,i),...o.map(l=>{var c,f,d;return(d=(f=(c=n.components)==null?void 0:c[l])==null?void 0:f.vars)==null?void 0:d.call(f,n,r,i)}),e==null?void 0:e(n,r,i)]))==null?void 0:u[s]}function UOe({theme:e,themeName:t,selector:n,options:r,props:i,stylesCtx:s,rootSelector:o,styles:a,style:u,vars:l,varsResolver:c,headless:f,withStylesTransform:d}){return{...!d&&$Oe({theme:e,themeName:t,props:i,stylesCtx:s,selector:n}),...!d&&eN({theme:e,styles:a,props:i,stylesCtx:s})[n],...!d&&eN({theme:e,styles:r==null?void 0:r.styles,props:(r==null?void 0:r.props)||i,stylesCtx:s})[n],...jOe({theme:e,props:i,stylesCtx:s,vars:l,varsResolver:c,selector:n,themeName:t,headless:f}),...o===n?Xj({style:u,theme:e}):null,...Xj({style:r==null?void 0:r.style,theme:e})}}function zOe({props:e,stylesCtx:t,themeName:n}){var o;const r=Wa(),i=(o=aOe())==null?void 0:o();return{getTransformedStyles:a=>i?[...a.map(l=>i(l,{props:e,theme:r,ctx:t})),...n.map(l=>{var c;return i((c=r.components[l])==null?void 0:c.styles,{props:e,theme:r,ctx:t})})].filter(Boolean):[],withStylesTransform:!!i}}function xn({name:e,classes:t,props:n,stylesCtx:r,className:i,style:s,rootSelector:o="root",unstyled:a,classNames:u,styles:l,vars:c,varsResolver:f}){const d=Wa(),h=rOe(),p=iOe(),m=sOe(),g=(Array.isArray(e)?e:[e]).filter(x=>x),{withStylesTransform:b,getTransformedStyles:y}=zOe({props:n,stylesCtx:r,themeName:g});return(x,w)=>({className:FOe({theme:d,options:w,themeName:g,selector:x,classNamesPrefix:h,classNames:u,classes:t,unstyled:a,className:i,rootSelector:o,props:n,stylesCtx:r,withStaticClasses:p,headless:m,transformedStyles:y([w==null?void 0:w.styles,l])}),style:UOe({theme:d,themeName:g,selector:x,options:w,props:n,stylesCtx:r,rootSelector:o,styles:l,style:s,vars:c,varsResolver:f,headless:m,withStylesTransform:b})})}function lT(e,t){return typeof e=="boolean"?e:t.autoContrast}function dt(e,t,n){var o;const r=Wa(),i=(o=r.components[e])==null?void 0:o.defaultProps,s=typeof i=="function"?i(r):i;return{...t,...s,...Mb(n)}}function aF(e){return Cs(e).reduce((t,n)=>e[n]!==void 0?`${t}${xDe(n)}:${e[n]};`:t,"").trim()}function VOe({selector:e,styles:t,media:n,container:r}){const i=t?aF(t):"",s=Array.isArray(n)?n.map(a=>`@media${a.query}{${e}{${aF(a.styles)}}}`):[],o=Array.isArray(r)?r.map(a=>`@container ${a.query}{${e}{${aF(a.styles)}}}`):[];return`${i?`${e}{${i}}`:""}${s.join("")}${o.join("")}`.trim()}function Tw(e){const t=lq();return R.jsx("style",{"data-mantine-styles":"inline",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:VOe(e)}})}function Cw(e){const{m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:u,ms:l,p:c,px:f,py:d,pt:h,pb:p,pl:m,pr:g,pe:b,ps:y,bd:x,bg:w,c:T,opacity:A,ff:k,fz:I,fw:O,lts:M,ta:L,lh:H,fs:D,tt:B,td:U,w:G,miw:ee,maw:ne,h:ue,mih:X,mah:q,bgsz:te,bgp:W,bgr:Z,bga:oe,pos:pe,top:ce,left:he,bottom:Ee,right:Ae,inset:ge,display:me,flex:Oe,hiddenFrom:Me,visibleFrom:Ye,lightHidden:lt,darkHidden:We,sx:nt,...yt}=e;return{styleProps:Mb({m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:u,ms:l,p:c,px:f,py:d,pt:h,pb:p,pl:m,pr:g,pe:b,ps:y,bd:x,bg:w,c:T,opacity:A,ff:k,fz:I,fw:O,lts:M,ta:L,lh:H,fs:D,tt:B,td:U,w:G,miw:ee,maw:ne,h:ue,mih:X,mah:q,bgsz:te,bgp:W,bgr:Z,bga:oe,pos:pe,top:ce,left:he,bottom:Ee,right:Ae,inset:ge,display:me,flex:Oe,hiddenFrom:Me,visibleFrom:Ye,lightHidden:lt,darkHidden:We,sx:nt}),rest:yt}}const HOe={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bd:{type:"border",property:"border"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"size",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function hq(e,t){const n=yg({color:e,theme:t});return n.color==="dimmed"?"var(--mantine-color-dimmed)":n.color==="bright"?"var(--mantine-color-bright)":n.variable?`var(${n.variable})`:n.color}function qOe(e,t){const n=yg({color:e,theme:t});return n.isThemeColor&&n.shade===void 0?`var(--mantine-color-${n.color}-text)`:hq(e,t)}function WOe(e,t){if(typeof e=="number")return ot(e);if(typeof e=="string"){const[n,r,...i]=e.split(" ").filter(o=>o.trim()!=="");let s=`${ot(n)}`;return r&&(s+=` ${r}`),i.length>0&&(s+=` ${hq(i.join(" "),t)}`),s.trim()}return e}const jte={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",monospace:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)",headings:"var(--mantine-font-family-headings)"};function GOe(e){return typeof e=="string"&&e in jte?jte[e]:e}const YOe=["h1","h2","h3","h4","h5","h6"];function KOe(e,t){return typeof e=="string"&&e in t.fontSizes?`var(--mantine-font-size-${e})`:typeof e=="string"&&YOe.includes(e)?`var(--mantine-${e}-font-size)`:typeof e=="number"||typeof e=="string"?ot(e):e}function XOe(e){return e}const QOe=["h1","h2","h3","h4","h5","h6"];function JOe(e,t){return typeof e=="string"&&e in t.lineHeights?`var(--mantine-line-height-${e})`:typeof e=="string"&&QOe.includes(e)?`var(--mantine-${e}-line-height)`:e}function ZOe(e){return typeof e=="number"?ot(e):e}function e9e(e,t){if(typeof e=="number")return ot(e);if(typeof e=="string"){const n=e.replace("-","");if(!(n in t.spacing))return ot(e);const r=`--mantine-spacing-${n}`;return e.startsWith("-")?`calc(var(${r}) * -1)`:`var(${r})`}return e}const uF={color:hq,textColor:qOe,fontSize:KOe,spacing:e9e,identity:XOe,size:ZOe,lineHeight:JOe,fontFamily:GOe,border:WOe};function Ute(e){return e.replace("(min-width: ","").replace("em)","")}function t9e({media:e,...t}){const r=Object.keys(e).sort((i,s)=>Number(Ute(i))-Number(Ute(s))).map(i=>({query:i,styles:e[i]}));return{...t,media:r}}function n9e(e){if(typeof e!="object"||e===null)return!1;const t=Object.keys(e);return!(t.length===1&&t[0]==="base")}function r9e(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function i9e(e){return typeof e=="object"&&e!==null?Cs(e).filter(t=>t!=="base"):[]}function s9e(e,t){return typeof e=="object"&&e!==null&&t in e?e[t]:e}function Ime({styleProps:e,data:t,theme:n}){return t9e(Cs(e).reduce((r,i)=>{if(i==="hiddenFrom"||i==="visibleFrom"||i==="sx")return r;const s=t[i],o=Array.isArray(s.property)?s.property:[s.property],a=r9e(e[i]);if(!n9e(e[i]))return o.forEach(l=>{r.inlineStyles[l]=uF[s.type](a,n)}),r;r.hasResponsiveStyles=!0;const u=i9e(e[i]);return o.forEach(l=>{a&&(r.styles[l]=uF[s.type](a,n)),u.forEach(c=>{const f=`(min-width: ${n.breakpoints[c]})`;r.media[f]={...r.media[f],[l]:uF[s.type](s9e(e[i],c),n)}})}),r},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function tR(){return`__m__-${z.useId().replace(/:/g,"")}`}function pq(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...pq(r,t)}),{}):typeof e=="function"?e(t):e??{}}function Pme(e){return e.startsWith("data-")?e:`data-${e}`}function o9e(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return r===void 0||r===""||r===!1||r===null||(t[Pme(n)]=e[n]),t},{})}function Nme(e){return e?typeof e=="string"?{[Pme(e)]:!0}:Array.isArray(e)?[...e].reduce((t,n)=>({...t,...Nme(n)}),{}):o9e(e):null}function Qj(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...Qj(r,t)}),{}):typeof e=="function"?e(t):e??{}}function a9e({theme:e,style:t,vars:n,styleProps:r}){const i=Qj(t,e),s=Qj(n,e);return{...i,...s,...r}}const Dme=z.forwardRef(({component:e,style:t,__vars:n,className:r,variant:i,mod:s,size:o,hiddenFrom:a,visibleFrom:u,lightHidden:l,darkHidden:c,renderRoot:f,__size:d,...h},p)=>{var I;const m=Wa(),g=e||"div",{styleProps:b,rest:y}=Cw(h),x=oOe(),w=(I=x==null?void 0:x())==null?void 0:I(b.sx),T=tR(),A=Ime({styleProps:b,theme:m,data:HOe}),k={ref:p,style:a9e({theme:m,style:t,vars:n,styleProps:A.inlineStyles}),className:va(r,w,{[T]:A.hasResponsiveStyles,"mantine-light-hidden":l,"mantine-dark-hidden":c,[`mantine-hidden-from-${a}`]:a,[`mantine-visible-from-${u}`]:u}),"data-variant":i,"data-size":gme(o)?void 0:o||void 0,size:d,...Nme(s),...y};return R.jsxs(R.Fragment,{children:[A.hasResponsiveStyles&&R.jsx(Tw,{selector:`.${T}`,styles:A.styles,media:A.media}),typeof f=="function"?f(k):R.jsx(g,{...k})]})});Dme.displayName="@mantine/core/Box";const He=Dme;function Ome(e){return e}function u9e(e){const t=e;return n=>{const r=z.forwardRef((i,s)=>R.jsx(t,{...n,...i,ref:s}));return r.extend=t.extend,r.displayName=`WithProps(${t.displayName})`,r}}function Bt(e){const t=z.forwardRef(e);return t.extend=Ome,t.withProps=n=>{const r=z.forwardRef((i,s)=>R.jsx(t,{...n,...i,ref:s}));return r.extend=t.extend,r.displayName=`WithProps(${t.displayName})`,r},t}function Ga(e){const t=z.forwardRef(e);return t.withProps=n=>{const r=z.forwardRef((i,s)=>R.jsx(t,{...n,...i,ref:s}));return r.extend=t.extend,r.displayName=`WithProps(${t.displayName})`,r},t.extend=Ome,t}const l9e=z.createContext({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function Bb(){return z.useContext(l9e)}var LO=ume();const b3=hc(LO);function c9e(e){if(!e||typeof e=="string")return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function lF(e){return e!=null&&e.current?e.current.scrollHeight:"auto"}const zC=typeof window<"u"&&window.requestAnimationFrame;function f9e({transitionDuration:e,transitionTimingFunction:t="ease",onTransitionEnd:n=()=>{},opened:r}){const i=z.useRef(null),s=0,o={display:"none",height:0,overflow:"hidden"},[a,u]=z.useState(r?{}:o),l=p=>{LO.flushSync(()=>u(p))},c=p=>{l(m=>({...m,...p}))};function f(p){const m=e||c9e(p);return{transition:`height ${m}ms ${t}, opacity ${m}ms ${t}`}}eg(()=>{typeof zC=="function"&&zC(r?()=>{c({willChange:"height",display:"block",overflow:"hidden"}),zC(()=>{const p=lF(i);c({...f(p),height:p})})}:()=>{const p=lF(i);c({...f(p),willChange:"height",height:p}),zC(()=>c({height:s,overflow:"hidden"}))})},[r]);const d=p=>{if(!(p.target!==i.current||p.propertyName!=="height"))if(r){const m=lF(i);m===a.height?l({}):c({height:m}),n()}else a.height===s&&(l(o),n())};function h({style:p={},refKey:m="ref",...g}={}){const b=g[m];return{"aria-hidden":!r,...g,[m]:Eme(i,b),onTransitionEnd:d,style:{boxSizing:"border-box",...p,...a}}}return h}const d9e={transitionDuration:200,transitionTimingFunction:"ease",animateOpacity:!0},FO=Bt((e,t)=>{const{children:n,in:r,transitionDuration:i,transitionTimingFunction:s,style:o,onTransitionEnd:a,animateOpacity:u,...l}=dt("Collapse",d9e,e),c=Wa(),f=DO(),h=(c.respectReducedMotion?f:!1)?0:i,p=f9e({opened:r,transitionDuration:h,transitionTimingFunction:s,onTransitionEnd:a});return h===0?r?R.jsx(He,{...l,children:n}):null:R.jsx(He,{...p({style:{opacity:r||!u?1:0,transition:u?`opacity ${h}ms ${s}`:"none",...pq(o,c)},ref:t,...l}),children:n})});FO.displayName="@mantine/core/Collapse";const[h9e,sp]=Al("ScrollArea.Root component was not found in tree");function uS(e,t){const n=Rv(t);ww(()=>{let r=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(e),()=>{window.cancelAnimationFrame(r),i.unobserve(e)}}},[e,n])}const p9e=z.forwardRef((e,t)=>{const{style:n,...r}=e,i=sp(),[s,o]=z.useState(0),[a,u]=z.useState(0),l=!!(s&&a);return uS(i.scrollbarX,()=>{var f;const c=((f=i.scrollbarX)==null?void 0:f.offsetHeight)||0;i.onCornerHeightChange(c),u(c)}),uS(i.scrollbarY,()=>{var f;const c=((f=i.scrollbarY)==null?void 0:f.offsetWidth)||0;i.onCornerWidthChange(c),o(c)}),l?R.jsx("div",{...r,ref:t,style:{...n,width:s,height:a}}):null}),m9e=z.forwardRef((e,t)=>{const n=sp(),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?R.jsx(p9e,{...e,ref:t}):null}),g9e={scrollHideDelay:1e3,type:"hover"},Mme=z.forwardRef((e,t)=>{const n=dt("ScrollAreaRoot",g9e,e),{type:r,scrollHideDelay:i,scrollbars:s,...o}=n,[a,u]=z.useState(null),[l,c]=z.useState(null),[f,d]=z.useState(null),[h,p]=z.useState(null),[m,g]=z.useState(null),[b,y]=z.useState(0),[x,w]=z.useState(0),[T,A]=z.useState(!1),[k,I]=z.useState(!1),O=yu(t,M=>u(M));return R.jsx(h9e,{value:{type:r,scrollHideDelay:i,scrollArea:a,viewport:l,onViewportChange:c,content:f,onContentChange:d,scrollbarX:h,onScrollbarXChange:p,scrollbarXEnabled:T,onScrollbarXEnabledChange:A,scrollbarY:m,onScrollbarYChange:g,scrollbarYEnabled:k,onScrollbarYEnabledChange:I,onCornerWidthChange:y,onCornerHeightChange:w},children:R.jsx(He,{...o,ref:O,__vars:{"--sa-corner-width":s!=="xy"?"0px":`${b}px`,"--sa-corner-height":s!=="xy"?"0px":`${x}px`}})})});Mme.displayName="@mantine/core/ScrollAreaRoot";function Lme(e,t){const n=e/t;return Number.isNaN(n)?0:n}function $O(e){const t=Lme(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function Fme(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function y9e(e,[t,n]){return Math.min(n,Math.max(t,e))}function zte(e,t,n="ltr"){const r=$O(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-i,o=t.content-t.viewport,a=s-r,u=n==="ltr"?[0,o]:[o*-1,0],l=y9e(e,u);return Fme([0,o],[0,a])(l)}function v9e(e,t,n,r="ltr"){const i=$O(n),s=i/2,o=t||s,a=i-o,u=n.scrollbar.paddingStart+o,l=n.scrollbar.size-n.scrollbar.paddingEnd-a,c=n.content-n.viewport,f=r==="ltr"?[0,c]:[c*-1,0];return Fme([u,l],f)(e)}function $me(e,t){return e>0&&e<t}function tN(e){return e?parseInt(e,10):0}function R_(e,t,{checkForDefaultPrevented:n=!0}={}){return r=>{e==null||e(r),(n===!1||!r.defaultPrevented)&&(t==null||t(r))}}const[b9e,Bme]=Al("ScrollAreaScrollbar was not found in tree"),jme=z.forwardRef((e,t)=>{const{sizes:n,hasThumb:r,onThumbChange:i,onThumbPointerUp:s,onThumbPointerDown:o,onThumbPositionChange:a,onDragScroll:u,onWheelScroll:l,onResize:c,...f}=e,d=sp(),[h,p]=z.useState(null),m=yu(t,I=>p(I)),g=z.useRef(null),b=z.useRef(""),{viewport:y}=d,x=n.content-n.viewport,w=Rv(l),T=Rv(a),A=NO(c,10),k=I=>{if(g.current){const O=I.clientX-g.current.left,M=I.clientY-g.current.top;u({x:O,y:M})}};return z.useEffect(()=>{const I=O=>{const M=O.target;(h==null?void 0:h.contains(M))&&w(O,x)};return document.addEventListener("wheel",I,{passive:!1}),()=>document.removeEventListener("wheel",I,{passive:!1})},[y,h,x,w]),z.useEffect(T,[n,T]),uS(h,A),uS(d.content,A),R.jsx(b9e,{value:{scrollbar:h,hasThumb:r,onThumbChange:Rv(i),onThumbPointerUp:Rv(s),onThumbPositionChange:T,onThumbPointerDown:Rv(o)},children:R.jsx("div",{...f,ref:m,"data-mantine-scrollbar":!0,style:{position:"absolute",...f.style},onPointerDown:R_(e.onPointerDown,I=>{I.preventDefault(),I.button===0&&(I.target.setPointerCapture(I.pointerId),g.current=h.getBoundingClientRect(),b.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",k(I))}),onPointerMove:R_(e.onPointerMove,k),onPointerUp:R_(e.onPointerUp,I=>{I.preventDefault();const O=I.target;O.hasPointerCapture(I.pointerId)&&O.releasePointerCapture(I.pointerId),document.body.style.webkitUserSelect=b.current,g.current=null})})})}),Ume=z.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=sp(),[a,u]=z.useState(),l=z.useRef(null),c=yu(t,l,o.onScrollbarXChange);return z.useEffect(()=>{l.current&&u(getComputedStyle(l.current))},[l]),R.jsx(jme,{"data-orientation":"horizontal",...s,ref:c,sizes:n,style:{...i,"--sa-thumb-width":`${$O(n)}px`},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,d)=>{if(o.viewport){const h=o.viewport.scrollLeft+f.deltaX;e.onWheelScroll(h),$me(h,d)&&f.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&r({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:tN(a.paddingLeft),paddingEnd:tN(a.paddingRight)}})}})});Ume.displayName="@mantine/core/ScrollAreaScrollbarX";const zme=z.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=sp(),[a,u]=z.useState(),l=z.useRef(null),c=yu(t,l,o.onScrollbarYChange);return z.useEffect(()=>{l.current&&u(window.getComputedStyle(l.current))},[]),R.jsx(jme,{...s,"data-orientation":"vertical",ref:c,sizes:n,style:{"--sa-thumb-height":`${$O(n)}px`,...i},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,d)=>{if(o.viewport){const h=o.viewport.scrollTop+f.deltaY;e.onWheelScroll(h),$me(h,d)&&f.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&r({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:tN(a.paddingTop),paddingEnd:tN(a.paddingBottom)}})}})});zme.displayName="@mantine/core/ScrollAreaScrollbarY";const BO=z.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,{dir:i}=Bb(),s=sp(),o=z.useRef(null),a=z.useRef(0),[u,l]=z.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=Lme(u.viewport,u.content),f={...r,sizes:u,onSizesChange:l,hasThumb:c>0&&c<1,onThumbChange:h=>{o.current=h},onThumbPointerUp:()=>{a.current=0},onThumbPointerDown:h=>{a.current=h}},d=(h,p)=>v9e(h,a.current,u,p);return n==="horizontal"?R.jsx(Ume,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollLeft,p=zte(h,u,i);o.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollLeft=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollLeft=d(h,i))}}):n==="vertical"?R.jsx(zme,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollTop,p=zte(h,u);u.scrollbar.size===0?o.current.style.setProperty("--thumb-opacity","0"):o.current.style.setProperty("--thumb-opacity","1"),o.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollTop=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollTop=d(h))}}):null});BO.displayName="@mantine/core/ScrollAreaScrollbarVisible";const mq=z.forwardRef((e,t)=>{const n=sp(),{forceMount:r,...i}=e,[s,o]=z.useState(!1),a=e.orientation==="horizontal",u=NO(()=>{if(n.viewport){const l=n.viewport.offsetWidth<n.viewport.scrollWidth,c=n.viewport.offsetHeight<n.viewport.scrollHeight;o(a?l:c)}},10);return uS(n.viewport,u),uS(n.content,u),r||s?R.jsx(BO,{"data-state":s?"visible":"hidden",...i,ref:t}):null});mq.displayName="@mantine/core/ScrollAreaScrollbarAuto";const Vme=z.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=sp(),[s,o]=z.useState(!1);return z.useEffect(()=>{const{scrollArea:a}=i;let u=0;if(a){const l=()=>{window.clearTimeout(u),o(!0)},c=()=>{u=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return a.addEventListener("pointerenter",l),a.addEventListener("pointerleave",c),()=>{window.clearTimeout(u),a.removeEventListener("pointerenter",l),a.removeEventListener("pointerleave",c)}}},[i.scrollArea,i.scrollHideDelay]),n||s?R.jsx(mq,{"data-state":s?"visible":"hidden",...r,ref:t}):null});Vme.displayName="@mantine/core/ScrollAreaScrollbarHover";const x9e=z.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=sp(),s=e.orientation==="horizontal",[o,a]=z.useState("hidden"),u=NO(()=>a("idle"),100);return z.useEffect(()=>{if(o==="idle"){const l=window.setTimeout(()=>a("hidden"),i.scrollHideDelay);return()=>window.clearTimeout(l)}},[o,i.scrollHideDelay]),z.useEffect(()=>{const{viewport:l}=i,c=s?"scrollLeft":"scrollTop";if(l){let f=l[c];const d=()=>{const h=l[c];f!==h&&(a("scrolling"),u()),f=h};return l.addEventListener("scroll",d),()=>l.removeEventListener("scroll",d)}},[i.viewport,s,u]),n||o!=="hidden"?R.jsx(BO,{"data-state":o==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:R_(e.onPointerEnter,()=>a("interacting")),onPointerLeave:R_(e.onPointerLeave,()=>a("idle"))}):null}),Jj=z.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=sp(),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=i,a=e.orientation==="horizontal";return z.useEffect(()=>(a?s(!0):o(!0),()=>{a?s(!1):o(!1)}),[a,s,o]),i.type==="hover"?R.jsx(Vme,{...r,ref:t,forceMount:n}):i.type==="scroll"?R.jsx(x9e,{...r,ref:t,forceMount:n}):i.type==="auto"?R.jsx(mq,{...r,ref:t,forceMount:n}):i.type==="always"?R.jsx(BO,{...r,ref:t}):null});Jj.displayName="@mantine/core/ScrollAreaScrollbar";function _9e(e,t=()=>{}){let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function i(){const s={left:e.scrollLeft,top:e.scrollTop},o=n.left!==s.left,a=n.top!==s.top;(o||a)&&t(),n=s,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)}const Hme=z.forwardRef((e,t)=>{const{style:n,...r}=e,i=sp(),s=Bme(),{onThumbPositionChange:o}=s,a=yu(t,c=>s.onThumbChange(c)),u=z.useRef(void 0),l=NO(()=>{u.current&&(u.current(),u.current=void 0)},100);return z.useEffect(()=>{const{viewport:c}=i;if(c){const f=()=>{if(l(),!u.current){const d=_9e(c,o);u.current=d,o()}};return o(),c.addEventListener("scroll",f),()=>c.removeEventListener("scroll",f)}},[i.viewport,l,o]),R.jsx("div",{"data-state":s.hasThumb?"visible":"hidden",...r,ref:a,style:{width:"var(--sa-thumb-width)",height:"var(--sa-thumb-height)",...n},onPointerDownCapture:R_(e.onPointerDownCapture,c=>{const d=c.target.getBoundingClientRect(),h=c.clientX-d.left,p=c.clientY-d.top;s.onThumbPointerDown({x:h,y:p})}),onPointerUp:R_(e.onPointerUp,s.onThumbPointerUp)})});Hme.displayName="@mantine/core/ScrollAreaThumb";const Zj=z.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Bme();return n||i.hasThumb?R.jsx(Hme,{ref:t,...r}):null});Zj.displayName="@mantine/core/ScrollAreaThumb";const qme=z.forwardRef(({children:e,style:t,...n},r)=>{const i=sp(),s=yu(r,i.onViewportChange);return R.jsx(He,{...n,ref:s,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...t},children:R.jsx("div",{style:{minWidth:"100%",display:"table"},ref:i.onContentChange,children:e})})});qme.displayName="@mantine/core/ScrollAreaViewport";var gq={root:"m_d57069b5",viewport:"m_c0783ff9",viewportInner:"m_f8f631dd",scrollbar:"m_c44ba933",thumb:"m_d8b5e363",corner:"m_21657268"};const Wme={scrollHideDelay:1e3,type:"hover",scrollbars:"xy"},w9e=(e,{scrollbarSize:t})=>({root:{"--scrollarea-scrollbar-size":ot(t)}}),o1=Bt((e,t)=>{const n=dt("ScrollArea",Wme,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,scrollbarSize:u,vars:l,type:c,scrollHideDelay:f,viewportProps:d,viewportRef:h,onScrollPositionChange:p,children:m,offsetScrollbars:g,scrollbars:b,onBottomReached:y,onTopReached:x,...w}=n,[T,A]=z.useState(!1),k=xn({name:"ScrollArea",props:n,classes:gq,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:w9e});return R.jsxs(Mme,{type:c==="never"?"always":c,scrollHideDelay:f,ref:t,scrollbars:b,...k("root"),...w,children:[R.jsx(qme,{...d,...k("viewport",{style:d==null?void 0:d.style}),ref:h,"data-offset-scrollbars":g===!0?"xy":g||void 0,"data-scrollbars":b||void 0,onScroll:I=>{var H;(H=d==null?void 0:d.onScroll)==null||H.call(d,I),p==null||p({x:I.currentTarget.scrollLeft,y:I.currentTarget.scrollTop});const{scrollTop:O,scrollHeight:M,clientHeight:L}=I.currentTarget;O-(M-L)>=0&&(y==null||y()),O===0&&(x==null||x())},children:m}),(b==="xy"||b==="x")&&R.jsx(Jj,{...k("scrollbar"),orientation:"horizontal","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>A(!0),onMouseLeave:()=>A(!1),children:R.jsx(Zj,{...k("thumb")})}),(b==="xy"||b==="y")&&R.jsx(Jj,{...k("scrollbar"),orientation:"vertical","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>A(!0),onMouseLeave:()=>A(!1),children:R.jsx(Zj,{...k("thumb")})}),R.jsx(m9e,{...k("corner"),"data-hovered":T||void 0,"data-hidden":c==="never"||void 0})]})});o1.displayName="@mantine/core/ScrollArea";const yq=Bt((e,t)=>{const{children:n,classNames:r,styles:i,scrollbarSize:s,scrollHideDelay:o,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:f,unstyled:d,variant:h,viewportProps:p,scrollbars:m,style:g,vars:b,onBottomReached:y,onTopReached:x,...w}=dt("ScrollAreaAutosize",Wme,e);return R.jsx(He,{...w,ref:t,style:[{display:"flex",overflow:"auto"},g],children:R.jsx(He,{style:{display:"flex",flexDirection:"column",flex:1},children:R.jsx(o1,{classNames:r,styles:i,scrollHideDelay:o,scrollbarSize:s,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:f,unstyled:d,variant:h,viewportProps:p,vars:b,scrollbars:m,onBottomReached:y,onTopReached:x,children:n})})})});o1.classes=gq;yq.displayName="@mantine/core/ScrollAreaAutosize";yq.classes=gq;o1.Autosize=yq;var Gme={root:"m_87cf2631"};const E9e={__staticSelector:"UnstyledButton"},rh=Ga((e,t)=>{const n=dt("UnstyledButton",E9e,e),{className:r,component:i="button",__staticSelector:s,unstyled:o,classNames:a,styles:u,style:l,...c}=n,f=xn({name:s,props:n,classes:Gme,className:r,style:l,classNames:a,styles:u,unstyled:o});return R.jsx(He,{...f("root",{focusable:!0}),component:i,ref:t,type:i==="button"?"button":void 0,...c})});rh.classes=Gme;rh.displayName="@mantine/core/UnstyledButton";var Yme={root:"m_515a97f8"};const S9e={},vq=Bt((e,t)=>{const n=dt("VisuallyHidden",S9e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,...l}=n,c=xn({name:"VisuallyHidden",classes:Yme,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a});return R.jsx(He,{component:"span",ref:t,...c("root"),...l})});vq.classes=Yme;vq.displayName="@mantine/core/VisuallyHidden";var Kme={root:"m_1b7284a3"};const T9e={},C9e=(e,{radius:t,shadow:n})=>({root:{"--paper-radius":t===void 0?void 0:as(t),"--paper-shadow":oq(n)}}),cT=Ga((e,t)=>{const n=dt("Paper",T9e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,withBorder:u,vars:l,radius:c,shadow:f,variant:d,mod:h,...p}=n,m=xn({name:"Paper",props:n,classes:Kme,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:C9e});return R.jsx(He,{ref:t,mod:[{"data-with-border":u},h],...m("root"),variant:d,...p})});cT.classes=Kme;cT.displayName="@mantine/core/Paper";function jO(){return typeof window<"u"}function Xme(e){return Qme(e)?(e.nodeName||"").toLowerCase():"#document"}function fT(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function A9e(e){var t;return(t=(Qme(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Qme(e){return jO()?e instanceof Node||e instanceof fT(e).Node:!1}function qf(e){return jO()?e instanceof Element||e instanceof fT(e).Element:!1}function bq(e){return jO()?e instanceof HTMLElement||e instanceof fT(e).HTMLElement:!1}function eU(e){return!jO()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof fT(e).ShadowRoot}function k9e(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Vte(e){return["html","body","#document"].includes(Xme(e))}function R9e(e){return fT(e).getComputedStyle(e)}function I9e(e){if(Xme(e)==="html")return e;const t=e.assignedSlot||e.parentNode||eU(e)&&e.host||A9e(e);return eU(t)?t.host:t}function Hte(e){let t=e.activeElement;for(;((n=t)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function Vk(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&eU(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function Jme(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function Zme(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}function P9e(e){return O9e()?!1:!qte()&&e.width===0&&e.height===0||qte()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function N9e(){return/apple/i.test(navigator.vendor)}function qte(){const e=/android/i;return e.test(Jme())||e.test(Zme())}function D9e(){return Jme().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function O9e(){return Zme().includes("jsdom/")}function tU(e,t){const n=["mouse","pen"];return n.push("",void 0),n.includes(e)}function M9e(e){return"nativeEvent"in e}function L9e(e){return e.matches("html,body")}function b_(e){return(e==null?void 0:e.ownerDocument)||document}function cF(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function hE(e){return"composedPath"in e?e.composedPath()[0]:e.target}const F9e="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function $9e(e){return bq(e)&&e.matches(F9e)}const Hd=Math.min,Jl=Math.max,nN=Math.round,s6=Math.floor,ob=e=>({x:e,y:e}),B9e={left:"right",right:"left",bottom:"top",top:"bottom"},j9e={start:"end",end:"start"};function nU(e,t,n){return Jl(e,Hd(t,n))}function a1(e,t){return typeof e=="function"?e(t):e}function E0(e){return e.split("-")[0]}function dT(e){return e.split("-")[1]}function xq(e){return e==="x"?"y":"x"}function _q(e){return e==="y"?"height":"width"}function Aw(e){return["top","bottom"].includes(E0(e))?"y":"x"}function wq(e){return xq(Aw(e))}function U9e(e,t,n){n===void 0&&(n=!1);const r=dT(e),i=wq(e),s=_q(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=rN(o)),[o,rN(o)]}function z9e(e){const t=rN(e);return[rU(e),t,rU(t)]}function rU(e){return e.replace(/start|end/g,t=>j9e[t])}function V9e(e,t,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?s:o;default:return[]}}function H9e(e,t,n,r){const i=dT(e);let s=V9e(E0(e),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),t&&(s=s.concat(s.map(rU)))),s}function rN(e){return e.replace(/left|right|bottom|top/g,t=>B9e[t])}function q9e(e){return{top:0,right:0,bottom:0,left:0,...e}}function Eq(e){return typeof e!="number"?q9e(e):{top:e,right:e,bottom:e,left:e}}function lS(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function Wte(e,t,n){let{reference:r,floating:i}=e;const s=Aw(t),o=wq(t),a=_q(o),u=E0(t),l=s==="y",c=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,d=r[a]/2-i[a]/2;let h;switch(u){case"top":h={x:c,y:r.y-i.height};break;case"bottom":h={x:c,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:f};break;case"left":h={x:r.x-i.width,y:f};break;default:h={x:r.x,y:r.y}}switch(dT(t)){case"start":h[o]-=d*(n&&l?-1:1);break;case"end":h[o]+=d*(n&&l?-1:1);break}return h}const W9e=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),u=await(o.isRTL==null?void 0:o.isRTL(t));let l=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:f}=Wte(l,r,u),d=r,h={},p=0;for(let m=0;m<a.length;m++){const{name:g,fn:b}=a[m],{x:y,y:x,data:w,reset:T}=await b({x:c,y:f,initialPlacement:r,placement:d,strategy:i,middlewareData:h,rects:l,platform:o,elements:{reference:e,floating:t}});c=y??c,f=x??f,h={...h,[g]:{...h[g],...w}},T&&p<=50&&(p++,typeof T=="object"&&(T.placement&&(d=T.placement),T.rects&&(l=T.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):T.rects),{x:c,y:f}=Wte(l,d,u)),m=-1)}return{x:c,y:f,placement:d,strategy:i,middlewareData:h}};async function Sq(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:u}=e,{boundary:l="clippingAncestors",rootBoundary:c="viewport",elementContext:f="floating",altBoundary:d=!1,padding:h=0}=a1(t,e),p=Eq(h),g=a[d?f==="floating"?"reference":"floating":f],b=lS(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(g)))==null||n?g:g.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:l,rootBoundary:c,strategy:u})),y=f==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,x=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),w=await(s.isElement==null?void 0:s.isElement(x))?await(s.getScale==null?void 0:s.getScale(x))||{x:1,y:1}:{x:1,y:1},T=lS(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:y,offsetParent:x,strategy:u}):y);return{top:(b.top-T.top+p.top)/w.y,bottom:(T.bottom-b.bottom+p.bottom)/w.y,left:(b.left-T.left+p.left)/w.x,right:(T.right-b.right+p.right)/w.x}}const G9e=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:u}=t,{element:l,padding:c=0}=a1(e,t)||{};if(l==null)return{};const f=Eq(c),d={x:n,y:r},h=wq(i),p=_q(h),m=await o.getDimensions(l),g=h==="y",b=g?"top":"left",y=g?"bottom":"right",x=g?"clientHeight":"clientWidth",w=s.reference[p]+s.reference[h]-d[h]-s.floating[p],T=d[h]-s.reference[h],A=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l));let k=A?A[x]:0;(!k||!await(o.isElement==null?void 0:o.isElement(A)))&&(k=a.floating[x]||s.floating[p]);const I=w/2-T/2,O=k/2-m[p]/2-1,M=Hd(f[b],O),L=Hd(f[y],O),H=M,D=k-m[p]-L,B=k/2-m[p]/2+I,U=nU(H,B,D),G=!u.arrow&&dT(i)!=null&&B!==U&&s.reference[p]/2-(B<H?M:L)-m[p]/2<0,ee=G?B<H?B-H:B-D:0;return{[h]:d[h]+ee,data:{[h]:U,centerOffset:B-U-ee,...G&&{alignmentOffset:ee}},reset:G}}}),Y9e=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:u,elements:l}=t,{mainAxis:c=!0,crossAxis:f=!0,fallbackPlacements:d,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...g}=a1(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const b=E0(i),y=E0(a)===a,x=await(u.isRTL==null?void 0:u.isRTL(l.floating)),w=d||(y||!m?[rN(a)]:z9e(a));!d&&p!=="none"&&w.push(...H9e(a,m,p,x));const T=[a,...w],A=await Sq(t,g),k=[];let I=((r=s.flip)==null?void 0:r.overflows)||[];if(c&&k.push(A[b]),f){const H=U9e(i,o,x);k.push(A[H[0]],A[H[1]])}if(I=[...I,{placement:i,overflows:k}],!k.every(H=>H<=0)){var O,M;const H=(((O=s.flip)==null?void 0:O.index)||0)+1,D=T[H];if(D)return{data:{index:H,overflows:I},reset:{placement:D}};let B=(M=I.filter(U=>U.overflows[0]<=0).sort((U,G)=>U.overflows[1]-G.overflows[1])[0])==null?void 0:M.placement;if(!B)switch(h){case"bestFit":{var L;const U=(L=I.map(G=>[G.placement,G.overflows.filter(ee=>ee>0).reduce((ee,ne)=>ee+ne,0)]).sort((G,ee)=>G[1]-ee[1])[0])==null?void 0:L[0];U&&(B=U);break}case"initialPlacement":B=a;break}if(i!==B)return{reset:{placement:B}}}return{}}}};function ege(e){const t=Hd(...e.map(s=>s.left)),n=Hd(...e.map(s=>s.top)),r=Jl(...e.map(s=>s.right)),i=Jl(...e.map(s=>s.bottom));return{x:t,y:n,width:r-t,height:i-n}}function K9e(e){const t=e.slice().sort((i,s)=>i.y-s.y),n=[];let r=null;for(let i=0;i<t.length;i++){const s=t[i];!r||s.y-r.y>r.height/2?n.push([s]):n[n.length-1].push(s),r=s}return n.map(i=>lS(ege(i)))}const X9e=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(t){const{placement:n,elements:r,rects:i,platform:s,strategy:o}=t,{padding:a=2,x:u,y:l}=a1(e,t),c=Array.from(await(s.getClientRects==null?void 0:s.getClientRects(r.reference))||[]),f=K9e(c),d=lS(ege(c)),h=Eq(a);function p(){if(f.length===2&&f[0].left>f[1].right&&u!=null&&l!=null)return f.find(g=>u>g.left-h.left&&u<g.right+h.right&&l>g.top-h.top&&l<g.bottom+h.bottom)||d;if(f.length>=2){if(Aw(n)==="y"){const M=f[0],L=f[f.length-1],H=E0(n)==="top",D=M.top,B=L.bottom,U=H?M.left:L.left,G=H?M.right:L.right,ee=G-U,ne=B-D;return{top:D,bottom:B,left:U,right:G,width:ee,height:ne,x:U,y:D}}const g=E0(n)==="left",b=Jl(...f.map(M=>M.right)),y=Hd(...f.map(M=>M.left)),x=f.filter(M=>g?M.left===y:M.right===b),w=x[0].top,T=x[x.length-1].bottom,A=y,k=b,I=k-A,O=T-w;return{top:w,bottom:T,left:A,right:k,width:I,height:O,x:A,y:w}}return d}const m=await s.getElementRects({reference:{getBoundingClientRect:p},floating:r.floating,strategy:o});return i.reference.x!==m.reference.x||i.reference.y!==m.reference.y||i.reference.width!==m.reference.width||i.reference.height!==m.reference.height?{reset:{rects:m}}:{}}}};async function Q9e(e,t){const{placement:n,platform:r,elements:i}=e,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=E0(n),a=dT(n),u=Aw(n)==="y",l=["left","top"].includes(o)?-1:1,c=s&&u?-1:1,f=a1(t,e);let{mainAxis:d,crossAxis:h,alignmentAxis:p}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return a&&typeof p=="number"&&(h=a==="end"?p*-1:p),u?{x:h*c,y:d*l}:{x:d*l,y:h*c}}const J9e=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=t,u=await Q9e(t,e);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+u.x,y:s+u.y,data:{...u,placement:o}}}}},Z9e=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:g=>{let{x:b,y}=g;return{x:b,y}}},...u}=a1(e,t),l={x:n,y:r},c=await Sq(t,u),f=Aw(E0(i)),d=xq(f);let h=l[d],p=l[f];if(s){const g=d==="y"?"top":"left",b=d==="y"?"bottom":"right",y=h+c[g],x=h-c[b];h=nU(y,h,x)}if(o){const g=f==="y"?"top":"left",b=f==="y"?"bottom":"right",y=p+c[g],x=p-c[b];p=nU(y,p,x)}const m=a.fn({...t,[d]:h,[f]:p});return{...m,data:{x:m.x-n,y:m.y-r}}}}},eMe=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=t,{offset:a=0,mainAxis:u=!0,crossAxis:l=!0}=a1(e,t),c={x:n,y:r},f=Aw(i),d=xq(f);let h=c[d],p=c[f];const m=a1(a,t),g=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(u){const x=d==="y"?"height":"width",w=s.reference[d]-s.floating[x]+g.mainAxis,T=s.reference[d]+s.reference[x]-g.mainAxis;h<w?h=w:h>T&&(h=T)}if(l){var b,y;const x=d==="y"?"width":"height",w=["top","left"].includes(E0(i)),T=s.reference[f]-s.floating[x]+(w&&((b=o.offset)==null?void 0:b[f])||0)+(w?0:g.crossAxis),A=s.reference[f]+s.reference[x]+(w?0:((y=o.offset)==null?void 0:y[f])||0)-(w?g.crossAxis:0);p<T?p=T:p>A&&(p=A)}return{[d]:h,[f]:p}}}},tMe=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:r,platform:i,elements:s}=t,{apply:o=()=>{},...a}=a1(e,t),u=await Sq(t,a),l=E0(n),c=dT(n),f=Aw(n)==="y",{width:d,height:h}=r.floating;let p,m;l==="top"||l==="bottom"?(p=l,m=c===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(m=l,p=c==="end"?"top":"bottom");const g=h-u.top-u.bottom,b=d-u.left-u.right,y=Hd(h-u[p],g),x=Hd(d-u[m],b),w=!t.middlewareData.shift;let T=y,A=x;if(f?A=c||w?Hd(x,b):b:T=c||w?Hd(y,g):g,w&&!c){const I=Jl(u.left,0),O=Jl(u.right,0),M=Jl(u.top,0),L=Jl(u.bottom,0);f?A=d-2*(I!==0||O!==0?I+O:Jl(u.left,u.right)):T=h-2*(M!==0||L!==0?M+L:Jl(u.top,u.bottom))}await o({...t,availableWidth:A,availableHeight:T});const k=await i.getDimensions(s.floating);return d!==k.width||h!==k.height?{reset:{rects:!0}}:{}}}};function hT(e){return tge(e)?(e.nodeName||"").toLowerCase():"#document"}function Xd(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function A1(e){var t;return(t=(tge(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function tge(e){return e instanceof Node||e instanceof Xd(e).Node}function tg(e){return e instanceof Element||e instanceof Xd(e).Element}function ng(e){return e instanceof HTMLElement||e instanceof Xd(e).HTMLElement}function Gte(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Xd(e).ShadowRoot}function nR(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=S0(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function nMe(e){return["table","td","th"].includes(hT(e))}function Tq(e){const t=Cq(),n=S0(e);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function rMe(e){let t=ab(e);for(;ng(t)&&!cS(t);){if(Tq(t))return t;t=ab(t)}return null}function Cq(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function cS(e){return["html","body","#document"].includes(hT(e))}function S0(e){return Xd(e).getComputedStyle(e)}function UO(e){return tg(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function ab(e){if(hT(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Gte(e)&&e.host||A1(e);return Gte(t)?t.host:t}function nge(e){const t=ab(e);return cS(t)?e.ownerDocument?e.ownerDocument.body:e.body:ng(t)&&nR(t)?t:nge(t)}function Wy(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=nge(e),s=i===((r=e.ownerDocument)==null?void 0:r.body),o=Xd(i);return s?t.concat(o,o.visualViewport||[],nR(i)?i:[],o.frameElement&&n?Wy(o.frameElement):[]):t.concat(i,Wy(i,[],n))}function rge(e){const t=S0(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=ng(e),s=i?e.offsetWidth:n,o=i?e.offsetHeight:r,a=nN(n)!==s||nN(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function Aq(e){return tg(e)?e:e.contextElement}function $E(e){const t=Aq(e);if(!ng(t))return ob(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=rge(t);let o=(s?nN(n.width):n.width)/r,a=(s?nN(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const iMe=ob(0);function ige(e){const t=Xd(e);return!Cq()||!t.visualViewport?iMe:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function sMe(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Xd(e)?!1:t}function H_(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),s=Aq(e);let o=ob(1);t&&(r?tg(r)&&(o=$E(r)):o=$E(e));const a=sMe(s,n,r)?ige(s):ob(0);let u=(i.left+a.x)/o.x,l=(i.top+a.y)/o.y,c=i.width/o.x,f=i.height/o.y;if(s){const d=Xd(s),h=r&&tg(r)?Xd(r):r;let p=d,m=p.frameElement;for(;m&&r&&h!==p;){const g=$E(m),b=m.getBoundingClientRect(),y=S0(m),x=b.left+(m.clientLeft+parseFloat(y.paddingLeft))*g.x,w=b.top+(m.clientTop+parseFloat(y.paddingTop))*g.y;u*=g.x,l*=g.y,c*=g.x,f*=g.y,u+=x,l+=w,p=Xd(m),m=p.frameElement}}return lS({width:c,height:f,x:u,y:l})}const oMe=[":popover-open",":modal"];function kq(e){return oMe.some(t=>{try{return e.matches(t)}catch{return!1}})}function aMe(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const s=i==="fixed",o=A1(r),a=t?kq(t.floating):!1;if(r===o||a&&s)return n;let u={scrollLeft:0,scrollTop:0},l=ob(1);const c=ob(0),f=ng(r);if((f||!f&&!s)&&((hT(r)!=="body"||nR(o))&&(u=UO(r)),ng(r))){const d=H_(r);l=$E(r),c.x=d.x+r.clientLeft,c.y=d.y+r.clientTop}return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-u.scrollLeft*l.x+c.x,y:n.y*l.y-u.scrollTop*l.y+c.y}}function uMe(e){return Array.from(e.getClientRects())}function sge(e){return H_(A1(e)).left+UO(e).scrollLeft}function lMe(e){const t=A1(e),n=UO(e),r=e.ownerDocument.body,i=Jl(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=Jl(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+sge(e);const a=-n.scrollTop;return S0(r).direction==="rtl"&&(o+=Jl(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function cMe(e,t){const n=Xd(e),r=A1(e),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,u=0;if(i){s=i.width,o=i.height;const l=Cq();(!l||l&&t==="fixed")&&(a=i.offsetLeft,u=i.offsetTop)}return{width:s,height:o,x:a,y:u}}function fMe(e,t){const n=H_(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=ng(e)?$E(e):ob(1),o=e.clientWidth*s.x,a=e.clientHeight*s.y,u=i*s.x,l=r*s.y;return{width:o,height:a,x:u,y:l}}function Yte(e,t,n){let r;if(t==="viewport")r=cMe(e,n);else if(t==="document")r=lMe(A1(e));else if(tg(t))r=fMe(t,n);else{const i=ige(e);r={...t,x:t.x-i.x,y:t.y-i.y}}return lS(r)}function oge(e,t){const n=ab(e);return n===t||!tg(n)||cS(n)?!1:S0(n).position==="fixed"||oge(n,t)}function dMe(e,t){const n=t.get(e);if(n)return n;let r=Wy(e,[],!1).filter(a=>tg(a)&&hT(a)!=="body"),i=null;const s=S0(e).position==="fixed";let o=s?ab(e):e;for(;tg(o)&&!cS(o);){const a=S0(o),u=Tq(o);!u&&a.position==="fixed"&&(i=null),(s?!u&&!i:!u&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||nR(o)&&!u&&oge(e,o))?r=r.filter(c=>c!==o):i=a,o=ab(o)}return t.set(e,r),r}function hMe(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o=[...n==="clippingAncestors"?kq(t)?[]:dMe(t,this._c):[].concat(n),r],a=o[0],u=o.reduce((l,c)=>{const f=Yte(t,c,i);return l.top=Jl(f.top,l.top),l.right=Hd(f.right,l.right),l.bottom=Hd(f.bottom,l.bottom),l.left=Jl(f.left,l.left),l},Yte(t,a,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function pMe(e){const{width:t,height:n}=rge(e);return{width:t,height:n}}function mMe(e,t,n){const r=ng(t),i=A1(t),s=n==="fixed",o=H_(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const u=ob(0);if(r||!r&&!s)if((hT(t)!=="body"||nR(i))&&(a=UO(t)),r){const f=H_(t,!0,s,t);u.x=f.x+t.clientLeft,u.y=f.y+t.clientTop}else i&&(u.x=sge(i));const l=o.left+a.scrollLeft-u.x,c=o.top+a.scrollTop-u.y;return{x:l,y:c,width:o.width,height:o.height}}function fF(e){return S0(e).position==="static"}function Kte(e,t){return!ng(e)||S0(e).position==="fixed"?null:t?t(e):e.offsetParent}function age(e,t){const n=Xd(e);if(kq(e))return n;if(!ng(e)){let i=ab(e);for(;i&&!cS(i);){if(tg(i)&&!fF(i))return i;i=ab(i)}return n}let r=Kte(e,t);for(;r&&nMe(r)&&fF(r);)r=Kte(r,t);return r&&cS(r)&&fF(r)&&!Tq(r)?n:r||rMe(e)||n}const gMe=async function(e){const t=this.getOffsetParent||age,n=this.getDimensions,r=await n(e.floating);return{reference:mMe(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function yMe(e){return S0(e).direction==="rtl"}const vMe={convertOffsetParentRelativeRectToViewportRelativeRect:aMe,getDocumentElement:A1,getClippingRect:hMe,getOffsetParent:age,getElementRects:gMe,getClientRects:uMe,getDimensions:pMe,getScale:$E,isElement:tg,isRTL:yMe};function bMe(e,t){let n=null,r;const i=A1(e);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,u){a===void 0&&(a=!1),u===void 0&&(u=1),s();const{left:l,top:c,width:f,height:d}=e.getBoundingClientRect();if(a||t(),!f||!d)return;const h=s6(c),p=s6(i.clientWidth-(l+f)),m=s6(i.clientHeight-(c+d)),g=s6(l),y={rootMargin:-h+"px "+-p+"px "+-m+"px "+-g+"px",threshold:Jl(0,Hd(1,u))||1};let x=!0;function w(T){const A=T[0].intersectionRatio;if(A!==u){if(!x)return o();A?o(!1,A):r=setTimeout(()=>{o(!1,1e-7)},1e3)}x=!1}try{n=new IntersectionObserver(w,{...y,root:i.ownerDocument})}catch{n=new IntersectionObserver(w,y)}n.observe(e)}return o(!0),s}function xMe(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,l=Aq(e),c=i||s?[...l?Wy(l):[],...Wy(t)]:[];c.forEach(b=>{i&&b.addEventListener("scroll",n,{passive:!0}),s&&b.addEventListener("resize",n)});const f=l&&a?bMe(l,n):null;let d=-1,h=null;o&&(h=new ResizeObserver(b=>{let[y]=b;y&&y.target===l&&h&&(h.unobserve(t),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var x;(x=h)==null||x.observe(t)})),n()}),l&&!u&&h.observe(l),h.observe(t));let p,m=u?H_(e):null;u&&g();function g(){const b=H_(e);m&&(b.x!==m.x||b.y!==m.y||b.width!==m.width||b.height!==m.height)&&n(),m=b,p=requestAnimationFrame(g)}return n(),()=>{var b;c.forEach(y=>{i&&y.removeEventListener("scroll",n),s&&y.removeEventListener("resize",n)}),f==null||f(),(b=h)==null||b.disconnect(),h=null,u&&cancelAnimationFrame(p)}}const _Me=J9e,wMe=Z9e,EMe=Y9e,SMe=tMe,Xte=G9e,TMe=X9e,CMe=eMe,AMe=(e,t,n)=>{const r=new Map,i={platform:vMe,...n},s={...i.platform,_c:r};return W9e(e,t,{...i,platform:s})};var yP=typeof document<"u"?z.useLayoutEffect:z.useEffect;function iN(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!iN(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&e.$$typeof)&&!iN(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function uge(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Qte(e,t){const n=uge(e);return Math.round(t*n)/n}function dF(e){const t=z.useRef(e);return yP(()=>{t.current=e}),t}function kMe(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:u,open:l}=e,[c,f]=z.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[d,h]=z.useState(r);iN(d,r)||h(r);const[p,m]=z.useState(null),[g,b]=z.useState(null),y=z.useCallback(ne=>{ne!==A.current&&(A.current=ne,m(ne))},[]),x=z.useCallback(ne=>{ne!==k.current&&(k.current=ne,b(ne))},[]),w=s||p,T=o||g,A=z.useRef(null),k=z.useRef(null),I=z.useRef(c),O=u!=null,M=dF(u),L=dF(i),H=dF(l),D=z.useCallback(()=>{if(!A.current||!k.current)return;const ne={placement:t,strategy:n,middleware:d};L.current&&(ne.platform=L.current),AMe(A.current,k.current,ne).then(ue=>{const X={...ue,isPositioned:H.current!==!1};B.current&&!iN(I.current,X)&&(I.current=X,LO.flushSync(()=>{f(X)}))})},[d,t,n,L,H]);yP(()=>{l===!1&&I.current.isPositioned&&(I.current.isPositioned=!1,f(ne=>({...ne,isPositioned:!1})))},[l]);const B=z.useRef(!1);yP(()=>(B.current=!0,()=>{B.current=!1}),[]),yP(()=>{if(w&&(A.current=w),T&&(k.current=T),w&&T){if(M.current)return M.current(w,T,D);D()}},[w,T,D,M,O]);const U=z.useMemo(()=>({reference:A,floating:k,setReference:y,setFloating:x}),[y,x]),G=z.useMemo(()=>({reference:w,floating:T}),[w,T]),ee=z.useMemo(()=>{const ne={position:n,left:0,top:0};if(!G.floating)return ne;const ue=Qte(G.floating,c.x),X=Qte(G.floating,c.y);return a?{...ne,transform:"translate("+ue+"px, "+X+"px)",...uge(G.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:ue,top:X}},[n,a,G.floating,c.x,c.y]);return z.useMemo(()=>({...c,update:D,refs:U,elements:G,floatingStyles:ee}),[c,D,U,G,ee])}const RMe=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:i}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?Xte({element:r.current,padding:i}).fn(n):{}:r?Xte({element:r,padding:i}).fn(n):{}}}},lge=(e,t)=>({..._Me(e),options:[e,t]}),Rq=(e,t)=>({...wMe(e),options:[e,t]}),Jte=(e,t)=>({...CMe(e),options:[e,t]}),sN=(e,t)=>({...EMe(e),options:[e,t]}),IMe=(e,t)=>({...SMe(e),options:[e,t]}),ok=(e,t)=>({...TMe(e),options:[e,t]}),cge=(e,t)=>({...RMe(e),options:[e,t]}),fge={...CNe},PMe=fge.useInsertionEffect,NMe=PMe||(e=>e());function Ny(e){const t=z.useRef(()=>{});return NMe(()=>{t.current=e}),z.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}var Bm=typeof document<"u"?z.useLayoutEffect:z.useEffect;let Zte=!1,DMe=0;const ene=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+DMe++;function OMe(){const[e,t]=z.useState(()=>Zte?ene():void 0);return Bm(()=>{e==null&&t(ene())},[]),z.useEffect(()=>{Zte=!0},[]),e}const MMe=fge.useId,dge=MMe||OMe;function LMe(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(i=>i(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(i=>i!==n))||[])}}}const FMe=z.createContext(null),$Me=z.createContext(null),Iq=()=>{var e;return((e=z.useContext(FMe))==null?void 0:e.id)||null},Pq=()=>z.useContext($Me);function Nq(e){return"data-floating-ui-"+e}function hF(e){const t=z.useRef(e);return Bm(()=>{t.current=e}),t}const tne=Nq("safe-polygon");function vP(e,t,n){return n&&!tU(n)?0:typeof e=="number"?e:e==null?void 0:e[t]}function BMe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,dataRef:i,events:s,elements:o}=e,{enabled:a=!0,delay:u=0,handleClose:l=null,mouseOnly:c=!1,restMs:f=0,move:d=!0}=t,h=Pq(),p=Iq(),m=hF(l),g=hF(u),b=hF(n),y=z.useRef(),x=z.useRef(-1),w=z.useRef(),T=z.useRef(-1),A=z.useRef(!0),k=z.useRef(!1),I=z.useRef(()=>{}),O=z.useRef(!1),M=z.useCallback(()=>{var ee;const ne=(ee=i.current.openEvent)==null?void 0:ee.type;return(ne==null?void 0:ne.includes("mouse"))&&ne!=="mousedown"},[i]);z.useEffect(()=>{if(!a)return;function ee(ne){let{open:ue}=ne;ue||(clearTimeout(x.current),clearTimeout(T.current),A.current=!0,O.current=!1)}return s.on("openchange",ee),()=>{s.off("openchange",ee)}},[a,s]),z.useEffect(()=>{if(!a||!m.current||!n)return;function ee(ue){M()&&r(!1,ue,"hover")}const ne=b_(o.floating).documentElement;return ne.addEventListener("mouseleave",ee),()=>{ne.removeEventListener("mouseleave",ee)}},[o.floating,n,r,a,m,M]);const L=z.useCallback(function(ee,ne,ue){ne===void 0&&(ne=!0),ue===void 0&&(ue="hover");const X=vP(g.current,"close",y.current);X&&!w.current?(clearTimeout(x.current),x.current=window.setTimeout(()=>r(!1,ee,ue),X)):ne&&(clearTimeout(x.current),r(!1,ee,ue))},[g,r]),H=Ny(()=>{I.current(),w.current=void 0}),D=Ny(()=>{if(k.current){const ee=b_(o.floating).body;ee.style.pointerEvents="",ee.removeAttribute(tne),k.current=!1}}),B=Ny(()=>i.current.openEvent?["click","mousedown"].includes(i.current.openEvent.type):!1);z.useEffect(()=>{if(!a)return;function ee(q){if(clearTimeout(x.current),A.current=!1,c&&!tU(y.current)||f>0&&!vP(g.current,"open"))return;const te=vP(g.current,"open",y.current);te?x.current=window.setTimeout(()=>{b.current||r(!0,q,"hover")},te):n||r(!0,q,"hover")}function ne(q){if(B())return;I.current();const te=b_(o.floating);if(clearTimeout(T.current),O.current=!1,m.current&&i.current.floatingContext){n||clearTimeout(x.current),w.current=m.current({...i.current.floatingContext,tree:h,x:q.clientX,y:q.clientY,onClose(){D(),H(),B()||L(q,!0,"safe-polygon")}});const Z=w.current;te.addEventListener("mousemove",Z),I.current=()=>{te.removeEventListener("mousemove",Z)};return}(y.current==="touch"?!Vk(o.floating,q.relatedTarget):!0)&&L(q)}function ue(q){B()||i.current.floatingContext&&(m.current==null||m.current({...i.current.floatingContext,tree:h,x:q.clientX,y:q.clientY,onClose(){D(),H(),B()||L(q)}})(q))}if(qf(o.domReference)){var X;const q=o.domReference;return n&&q.addEventListener("mouseleave",ue),(X=o.floating)==null||X.addEventListener("mouseleave",ue),d&&q.addEventListener("mousemove",ee,{once:!0}),q.addEventListener("mouseenter",ee),q.addEventListener("mouseleave",ne),()=>{var te;n&&q.removeEventListener("mouseleave",ue),(te=o.floating)==null||te.removeEventListener("mouseleave",ue),d&&q.removeEventListener("mousemove",ee),q.removeEventListener("mouseenter",ee),q.removeEventListener("mouseleave",ne)}}},[o,a,e,c,f,d,L,H,D,r,n,b,h,g,m,i,B]),Bm(()=>{var ee;if(a&&n&&(ee=m.current)!=null&&ee.__options.blockPointerEvents&&M()){k.current=!0;const ue=o.floating;if(qf(o.domReference)&&ue){var ne;const X=b_(o.floating).body;X.setAttribute(tne,"");const q=o.domReference,te=h==null||(ne=h.nodesRef.current.find(W=>W.id===p))==null||(ne=ne.context)==null?void 0:ne.elements.floating;return te&&(te.style.pointerEvents=""),X.style.pointerEvents="none",q.style.pointerEvents="auto",ue.style.pointerEvents="auto",()=>{X.style.pointerEvents="",q.style.pointerEvents="",ue.style.pointerEvents=""}}}},[a,n,p,o,h,m,M]),Bm(()=>{n||(y.current=void 0,O.current=!1,H(),D())},[n,H,D]),z.useEffect(()=>()=>{H(),clearTimeout(x.current),clearTimeout(T.current),D()},[a,o.domReference,H,D]);const U=z.useMemo(()=>{function ee(ne){y.current=ne.pointerType}return{onPointerDown:ee,onPointerEnter:ee,onMouseMove(ne){const{nativeEvent:ue}=ne;function X(){!A.current&&!b.current&&r(!0,ue,"hover")}c&&!tU(y.current)||n||f===0||O.current&&ne.movementX**2+ne.movementY**2<2||(clearTimeout(T.current),y.current==="touch"?X():(O.current=!0,T.current=window.setTimeout(X,f)))}}},[c,r,n,b,f]),G=z.useMemo(()=>({onMouseEnter(){clearTimeout(x.current)},onMouseLeave(ee){B()||L(ee.nativeEvent,!1)}}),[L,B]);return z.useMemo(()=>a?{reference:U,floating:G}:{},[a,U,G])}const iU=()=>{},hge=z.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:iU,setState:iU,isInstantPhase:!1}),pge=()=>z.useContext(hge);function jMe(e){const{children:t,delay:n,timeoutMs:r=0}=e,[i,s]=z.useReducer((u,l)=>({...u,...l}),{delay:n,timeoutMs:r,initialDelay:n,currentId:null,isInstantPhase:!1}),o=z.useRef(null),a=z.useCallback(u=>{s({currentId:u})},[]);return Bm(()=>{i.currentId?o.current===null?o.current=i.currentId:i.isInstantPhase||s({isInstantPhase:!0}):(i.isInstantPhase&&s({isInstantPhase:!1}),o.current=null)},[i.currentId,i.isInstantPhase]),z.createElement(hge.Provider,{value:z.useMemo(()=>({...i,setState:s,setCurrentId:a}),[i,a])},t)}function UMe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,floatingId:i}=e,{id:s,enabled:o=!0}=t,a=s??i,u=pge(),{currentId:l,setCurrentId:c,initialDelay:f,setState:d,timeoutMs:h}=u;return Bm(()=>{o&&l&&(d({delay:{open:1,close:vP(f,"close")}}),l!==a&&r(!1))},[o,a,r,d,l,f]),Bm(()=>{function p(){r(!1),d({delay:f,currentId:null})}if(o&&l&&!n&&l===a){if(h){const m=window.setTimeout(p,h);return()=>{clearTimeout(m)}}p()}},[o,n,d,l,a,r,f,h]),Bm(()=>{o&&(c===iU||!n||c(a))},[o,n,c,a]),u}function pF(e,t){let n=e.filter(i=>{var s;return i.parentId===t&&((s=i.context)==null?void 0:s.open)}),r=n;for(;r.length;)r=e.filter(i=>{var s;return(s=r)==null?void 0:s.some(o=>{var a;return i.parentId===o.id&&((a=i.context)==null?void 0:a.open)})}),n=n.concat(r);return n}const zMe="data-floating-ui-focusable",VMe={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},HMe={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},nne=e=>{var t,n;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(n=e==null?void 0:e.outsidePress)!=null?n:!0}};function qMe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,elements:i,dataRef:s}=e,{enabled:o=!0,escapeKey:a=!0,outsidePress:u=!0,outsidePressEvent:l="pointerdown",referencePress:c=!1,referencePressEvent:f="pointerdown",ancestorScroll:d=!1,bubbles:h,capture:p}=t,m=Pq(),g=Ny(typeof u=="function"?u:()=>!1),b=typeof u=="function"?g:u,y=z.useRef(!1),x=z.useRef(!1),{escapeKey:w,outsidePress:T}=nne(h),{escapeKey:A,outsidePress:k}=nne(p),I=z.useRef(!1),O=Ny(U=>{var G;if(!n||!o||!a||U.key!=="Escape"||I.current)return;const ee=(G=s.current.floatingContext)==null?void 0:G.nodeId,ne=m?pF(m.nodesRef.current,ee):[];if(!w&&(U.stopPropagation(),ne.length>0)){let ue=!0;if(ne.forEach(X=>{var q;if((q=X.context)!=null&&q.open&&!X.context.dataRef.current.__escapeKeyBubbles){ue=!1;return}}),!ue)return}r(!1,M9e(U)?U.nativeEvent:U,"escape-key")}),M=Ny(U=>{var G;const ee=()=>{var ne;O(U),(ne=hE(U))==null||ne.removeEventListener("keydown",ee)};(G=hE(U))==null||G.addEventListener("keydown",ee)}),L=Ny(U=>{var G;const ee=y.current;y.current=!1;const ne=x.current;if(x.current=!1,l==="click"&&ne||ee||typeof b=="function"&&!b(U))return;const ue=hE(U),X="["+Nq("inert")+"]",q=b_(i.floating).querySelectorAll(X);let te=qf(ue)?ue:null;for(;te&&!Vte(te);){const pe=I9e(te);if(Vte(pe)||!qf(pe))break;te=pe}if(q.length&&qf(ue)&&!L9e(ue)&&!Vk(ue,i.floating)&&Array.from(q).every(pe=>!Vk(te,pe)))return;if(bq(ue)&&B){const pe=ue.clientWidth>0&&ue.scrollWidth>ue.clientWidth,ce=ue.clientHeight>0&&ue.scrollHeight>ue.clientHeight;let he=ce&&U.offsetX>ue.clientWidth;if(ce&&R9e(ue).direction==="rtl"&&(he=U.offsetX<=ue.offsetWidth-ue.clientWidth),he||pe&&U.offsetY>ue.clientHeight)return}const W=(G=s.current.floatingContext)==null?void 0:G.nodeId,Z=m&&pF(m.nodesRef.current,W).some(pe=>{var ce;return cF(U,(ce=pe.context)==null?void 0:ce.elements.floating)});if(cF(U,i.floating)||cF(U,i.domReference)||Z)return;const oe=m?pF(m.nodesRef.current,W):[];if(oe.length>0){let pe=!0;if(oe.forEach(ce=>{var he;if((he=ce.context)!=null&&he.open&&!ce.context.dataRef.current.__outsidePressBubbles){pe=!1;return}}),!pe)return}r(!1,U,"outside-press")}),H=Ny(U=>{var G;const ee=()=>{var ne;L(U),(ne=hE(U))==null||ne.removeEventListener(l,ee)};(G=hE(U))==null||G.addEventListener(l,ee)});z.useEffect(()=>{if(!n||!o)return;s.current.__escapeKeyBubbles=w,s.current.__outsidePressBubbles=T;let U=-1;function G(q){r(!1,q,"ancestor-scroll")}function ee(){window.clearTimeout(U),I.current=!0}function ne(){U=window.setTimeout(()=>{I.current=!1},k9e()?5:0)}const ue=b_(i.floating);a&&(ue.addEventListener("keydown",A?M:O,A),ue.addEventListener("compositionstart",ee),ue.addEventListener("compositionend",ne)),b&&ue.addEventListener(l,k?H:L,k);let X=[];return d&&(qf(i.domReference)&&(X=Wy(i.domReference)),qf(i.floating)&&(X=X.concat(Wy(i.floating))),!qf(i.reference)&&i.reference&&i.reference.contextElement&&(X=X.concat(Wy(i.reference.contextElement)))),X=X.filter(q=>{var te;return q!==((te=ue.defaultView)==null?void 0:te.visualViewport)}),X.forEach(q=>{q.addEventListener("scroll",G,{passive:!0})}),()=>{a&&(ue.removeEventListener("keydown",A?M:O,A),ue.removeEventListener("compositionstart",ee),ue.removeEventListener("compositionend",ne)),b&&ue.removeEventListener(l,k?H:L,k),X.forEach(q=>{q.removeEventListener("scroll",G)}),window.clearTimeout(U)}},[s,i,a,b,l,n,r,d,o,w,T,O,A,M,L,k,H]),z.useEffect(()=>{y.current=!1},[b,l]);const D=z.useMemo(()=>({onKeyDown:O,[VMe[f]]:U=>{c&&r(!1,U.nativeEvent,"reference-press")}}),[O,r,c,f]),B=z.useMemo(()=>({onKeyDown:O,onMouseDown(){x.current=!0},onMouseUp(){x.current=!0},[HMe[l]]:()=>{y.current=!0}}),[O,l]);return z.useMemo(()=>o?{reference:D,floating:B}:{},[o,D,B])}function WMe(e){const{open:t=!1,onOpenChange:n,elements:r}=e,i=dge(),s=z.useRef({}),[o]=z.useState(()=>LMe()),a=Iq()!=null,[u,l]=z.useState(r.reference),c=Ny((h,p,m)=>{s.current.openEvent=h?p:void 0,o.emit("openchange",{open:h,event:p,reason:m,nested:a}),n==null||n(h,p,m)}),f=z.useMemo(()=>({setPositionReference:l}),[]),d=z.useMemo(()=>({reference:u||r.reference||null,floating:r.floating||null,domReference:r.reference}),[u,r.reference,r.floating]);return z.useMemo(()=>({dataRef:s,open:t,onOpenChange:c,elements:d,events:o,floatingId:i,refs:f}),[t,c,d,o,i,f])}function Dq(e){e===void 0&&(e={});const{nodeId:t}=e,n=WMe({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,i=r.elements,[s,o]=z.useState(null),[a,u]=z.useState(null),c=(i==null?void 0:i.domReference)||s,f=z.useRef(null),d=Pq();Bm(()=>{c&&(f.current=c)},[c]);const h=kMe({...e,elements:{...i,...a&&{reference:a}}}),p=z.useCallback(x=>{const w=qf(x)?{getBoundingClientRect:()=>x.getBoundingClientRect(),contextElement:x}:x;u(w),h.refs.setReference(w)},[h.refs]),m=z.useCallback(x=>{(qf(x)||x===null)&&(f.current=x,o(x)),(qf(h.refs.reference.current)||h.refs.reference.current===null||x!==null&&!qf(x))&&h.refs.setReference(x)},[h.refs]),g=z.useMemo(()=>({...h.refs,setReference:m,setPositionReference:p,domReference:f}),[h.refs,m,p]),b=z.useMemo(()=>({...h.elements,domReference:c}),[h.elements,c]),y=z.useMemo(()=>({...h,...r,refs:g,elements:b,nodeId:t}),[h,g,b,t,r]);return Bm(()=>{r.dataRef.current.floatingContext=y;const x=d==null?void 0:d.nodesRef.current.find(w=>w.id===t);x&&(x.context=y)}),z.useMemo(()=>({...h,context:y,refs:g,elements:b}),[h,g,b,y])}function GMe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,events:i,dataRef:s,elements:o}=e,{enabled:a=!0,visibleOnly:u=!0}=t,l=z.useRef(!1),c=z.useRef(),f=z.useRef(!0);z.useEffect(()=>{if(!a)return;const h=fT(o.domReference);function p(){!n&&bq(o.domReference)&&o.domReference===Hte(b_(o.domReference))&&(l.current=!0)}function m(){f.current=!0}return h.addEventListener("blur",p),h.addEventListener("keydown",m,!0),()=>{h.removeEventListener("blur",p),h.removeEventListener("keydown",m,!0)}},[o.domReference,n,a]),z.useEffect(()=>{if(!a)return;function h(p){let{reason:m}=p;(m==="reference-press"||m==="escape-key")&&(l.current=!0)}return i.on("openchange",h),()=>{i.off("openchange",h)}},[i,a]),z.useEffect(()=>()=>{clearTimeout(c.current)},[]);const d=z.useMemo(()=>({onPointerDown(h){P9e(h.nativeEvent)||(f.current=!1)},onMouseLeave(){l.current=!1},onFocus(h){if(l.current)return;const p=hE(h.nativeEvent);if(u&&qf(p))try{if(N9e()&&D9e())throw Error();if(!p.matches(":focus-visible"))return}catch{if(!f.current&&!$9e(p))return}r(!0,h.nativeEvent,"focus")},onBlur(h){l.current=!1;const p=h.relatedTarget,m=h.nativeEvent,g=qf(p)&&p.hasAttribute(Nq("focus-guard"))&&p.getAttribute("data-type")==="outside";c.current=window.setTimeout(()=>{var b;const y=Hte(o.domReference?o.domReference.ownerDocument:document);!p&&y===o.domReference||Vk((b=s.current.floatingContext)==null?void 0:b.refs.floating.current,y)||Vk(o.domReference,y)||g||r(!1,m,"focus")})}}),[s,o.domReference,r,u]);return z.useMemo(()=>a?{reference:d}:{},[a,d])}const rne="active",ine="selected";function mF(e,t,n){const r=new Map,i=n==="item";let s=e;if(i&&e){const{[rne]:o,[ine]:a,...u}=e;s=u}return{...n==="floating"&&{tabIndex:-1,[zMe]:""},...s,...t.map(o=>{const a=o?o[n]:null;return typeof a=="function"?e?a(e):null:a}).concat(e).reduce((o,a)=>(a&&Object.entries(a).forEach(u=>{let[l,c]=u;if(!(i&&[rne,ine].includes(l)))if(l.indexOf("on")===0){if(r.has(l)||r.set(l,[]),typeof c=="function"){var f;(f=r.get(l))==null||f.push(c),o[l]=function(){for(var d,h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];return(d=r.get(l))==null?void 0:d.map(g=>g(...p)).find(g=>g!==void 0)}}}else o[l]=c}),o),{})}}function YMe(e){e===void 0&&(e=[]);const t=e.map(a=>a==null?void 0:a.reference),n=e.map(a=>a==null?void 0:a.floating),r=e.map(a=>a==null?void 0:a.item),i=z.useCallback(a=>mF(a,e,"reference"),t),s=z.useCallback(a=>mF(a,e,"floating"),n),o=z.useCallback(a=>mF(a,e,"item"),r);return z.useMemo(()=>({getReferenceProps:i,getFloatingProps:s,getItemProps:o}),[i,s,o])}const KMe=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function XMe(e,t){var n;t===void 0&&(t={});const{open:r,floatingId:i}=e,{enabled:s=!0,role:o="dialog"}=t,a=(n=KMe.get(o))!=null?n:o,u=dge(),c=Iq()!=null,f=z.useMemo(()=>a==="tooltip"||o==="label"?{["aria-"+(o==="label"?"labelledby":"describedby")]:r?i:void 0}:{"aria-expanded":r?"true":"false","aria-haspopup":a==="alertdialog"?"dialog":a,"aria-controls":r?i:void 0,...a==="listbox"&&{role:"combobox"},...a==="menu"&&{id:u},...a==="menu"&&c&&{role:"menuitem"},...o==="select"&&{"aria-autocomplete":"none"},...o==="combobox"&&{"aria-autocomplete":"list"}},[a,i,c,r,u,o]),d=z.useMemo(()=>{const p={id:i,...a&&{role:a}};return a==="tooltip"||o==="label"?p:{...p,...a==="menu"&&{"aria-labelledby":u}}},[a,i,u,o]),h=z.useCallback(p=>{let{active:m,selected:g}=p;const b={role:"option",...m&&{id:i+"-option"}};switch(o){case"select":return{...b,"aria-selected":m&&g};case"combobox":return{...b,...m&&{"aria-selected":!0}}}return{}},[i,o]);return z.useMemo(()=>s?{reference:f,floating:d,item:h}:{},[s,f,d,h])}function mge(e,t){if(e==="rtl"&&(t.includes("right")||t.includes("left"))){const[n,r]=t.split("-"),i=n==="right"?"left":"right";return r===void 0?i:`${i}-${r}`}return t}function sne(e,t,n,r){return e==="center"||r==="center"?{top:t}:e==="end"?{bottom:n}:e==="start"?{top:n}:{}}function one(e,t,n,r,i){return e==="center"||r==="center"?{left:t}:e==="end"?{[i==="ltr"?"right":"left"]:n}:e==="start"?{[i==="ltr"?"left":"right"]:n}:{}}const QMe={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function JMe({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,arrowX:s,arrowY:o,dir:a}){const[u,l="center"]=e.split("-"),c={width:t,height:t,transform:"rotate(45deg)",position:"absolute",[QMe[u]]:r},f=-t/2;return u==="left"?{...c,...sne(l,o,n,i),right:f,borderLeftColor:"transparent",borderBottomColor:"transparent",clipPath:"polygon(100% 0, 0 0, 100% 100%)"}:u==="right"?{...c,...sne(l,o,n,i),left:f,borderRightColor:"transparent",borderTopColor:"transparent",clipPath:"polygon(0 100%, 0 0, 100% 100%)"}:u==="top"?{...c,...one(l,s,n,i,a),bottom:f,borderTopColor:"transparent",borderLeftColor:"transparent",clipPath:"polygon(0 100%, 100% 100%, 100% 0)"}:u==="bottom"?{...c,...one(l,s,n,i,a),top:f,borderBottomColor:"transparent",borderRightColor:"transparent",clipPath:"polygon(0 100%, 0 0, 100% 0)"}:{}}const Oq=z.forwardRef(({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,visible:s,arrowX:o,arrowY:a,style:u,...l},c)=>{const{dir:f}=Bb();return s?R.jsx("div",{...l,ref:c,style:{...u,...JMe({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,dir:f,arrowX:o,arrowY:a})}}):null});Oq.displayName="@mantine/core/FloatingArrow";var gge={root:"m_9814e45f"};const ZMe={zIndex:ld("modal")},eLe=(e,{gradient:t,color:n,backgroundOpacity:r,blur:i,radius:s,zIndex:o})=>({root:{"--overlay-bg":t||(n!==void 0||r!==void 0)&&xm(n||"#000",r??.6)||void 0,"--overlay-filter":i?`blur(${ot(i)})`:void 0,"--overlay-radius":s===void 0?void 0:as(s),"--overlay-z-index":o==null?void 0:o.toString()}}),fS=Ga((e,t)=>{const n=dt("Overlay",ZMe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,fixed:l,center:c,children:f,radius:d,zIndex:h,gradient:p,blur:m,color:g,backgroundOpacity:b,mod:y,...x}=n,w=xn({name:"Overlay",props:n,classes:gge,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:eLe});return R.jsx(He,{ref:t,...w("root"),mod:[{center:c,fixed:l},y],...x,children:f})});fS.classes=gge;fS.displayName="@mantine/core/Overlay";function tLe(e){const t=document.createElement("div");return t.setAttribute("data-portal","true"),typeof e.className=="string"&&t.classList.add(...e.className.split(" ").filter(Boolean)),typeof e.style=="object"&&Object.assign(t.style,e.style),typeof e.id=="string"&&t.setAttribute("id",e.id),t}const nLe={},yge=z.forwardRef((e,t)=>{const{children:n,target:r,...i}=dt("Portal",nLe,e),[s,o]=z.useState(!1),a=z.useRef(null);return ww(()=>(o(!0),a.current=r?typeof r=="string"?document.querySelector(r):r:tLe(i),Z8(t,a.current),!r&&a.current&&document.body.appendChild(a.current),()=>{!r&&a.current&&document.body.removeChild(a.current)}),[r]),!s||!a.current?null:LO.createPortal(R.jsx(R.Fragment,{children:n}),a.current)});yge.displayName="@mantine/core/Portal";function jb({withinPortal:e=!0,children:t,...n}){return e?R.jsx(yge,{...n,children:t}):R.jsx(R.Fragment,{children:t})}jb.displayName="@mantine/core/OptionalPortal";const VC=e=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${e==="bottom"?10:-10}px)`},transitionProperty:"transform, opacity"}),o6={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},"fade-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(30px)"},transitionProperty:"opacity, transform"},"fade-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-30px)"},transitionProperty:"opacity, transform"},"fade-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(30px)"},transitionProperty:"opacity, transform"},"fade-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-30px)"},transitionProperty:"opacity, transform"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(-20px) skew(-10deg, -5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(20px) skew(-10deg, -5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(-5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...VC("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...VC("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...VC("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...VC("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...VC("top"),common:{transformOrigin:"top right"}}},ane={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function rLe({transition:e,state:t,duration:n,timingFunction:r}){const i={transitionDuration:`${n}ms`,transitionTimingFunction:r};return typeof e=="string"?e in o6?{transitionProperty:o6[e].transitionProperty,...i,...o6[e].common,...o6[e][ane[t]]}:{}:{transitionProperty:e.transitionProperty,...i,...e.common,...e[ane[t]]}}function iLe({duration:e,exitDuration:t,timingFunction:n,mounted:r,onEnter:i,onExit:s,onEntered:o,onExited:a,enterDelay:u,exitDelay:l}){const c=Wa(),f=DO(),d=c.respectReducedMotion?f:!1,[h,p]=z.useState(d?0:e),[m,g]=z.useState(r?"entered":"exited"),b=z.useRef(-1),y=z.useRef(-1),x=z.useRef(-1),w=A=>{const k=A?i:s,I=A?o:a;window.clearTimeout(b.current);const O=d?0:A?e:t;p(O),O===0?(typeof k=="function"&&k(),typeof I=="function"&&I(),g(A?"entered":"exited")):x.current=requestAnimationFrame(()=>{b3.flushSync(()=>{g(A?"pre-entering":"pre-exiting")}),x.current=requestAnimationFrame(()=>{typeof k=="function"&&k(),g(A?"entering":"exiting"),b.current=window.setTimeout(()=>{typeof I=="function"&&I(),g(A?"entered":"exited")},O)})})},T=A=>{if(window.clearTimeout(y.current),typeof(A?u:l)!="number"){w(A);return}y.current=window.setTimeout(()=>{w(A)},A?u:l)};return eg(()=>{T(r)},[r]),z.useEffect(()=>()=>{window.clearTimeout(b.current),cancelAnimationFrame(x.current)},[]),{transitionDuration:h,transitionStatus:m,transitionTimingFunction:n||"ease"}}function vg({keepMounted:e,transition:t="fade",duration:n=250,exitDuration:r=n,mounted:i,children:s,timingFunction:o="ease",onExit:a,onEntered:u,onEnter:l,onExited:c,enterDelay:f,exitDelay:d}){const{transitionDuration:h,transitionStatus:p,transitionTimingFunction:m}=iLe({mounted:i,exitDuration:r,duration:n,timingFunction:o,onExit:a,onEntered:u,onEnter:l,onExited:c,enterDelay:f,exitDelay:d});return h===0?i?R.jsx(R.Fragment,{children:s({})}):e?s({display:"none"}):null:p==="exited"?e?s({display:"none"}):null:R.jsx(R.Fragment,{children:s(rLe({transition:t,duration:h,state:p,timingFunction:m}))})}vg.displayName="@mantine/core/Transition";const[sLe,vge]=Al("Popover component was not found in the tree");function zO({children:e,active:t=!0,refProp:n="ref",innerRef:r}){const i=BDe(t),s=yu(i,r);return Lb(e)?z.cloneElement(e,{[n]:s}):e}function bge(e){return R.jsx(vq,{tabIndex:-1,"data-autofocus":!0,...e})}zO.displayName="@mantine/core/FocusTrap";bge.displayName="@mantine/core/FocusTrapInitialFocus";zO.InitialFocus=bge;var xge={dropdown:"m_38a85659",arrow:"m_a31dc6c1",overlay:"m_3d7bc908"};const oLe={},Mq=Bt((e,t)=>{var g,b,y,x;const n=dt("PopoverDropdown",oLe,e),{className:r,style:i,vars:s,children:o,onKeyDownCapture:a,variant:u,classNames:l,styles:c,...f}=n,d=vge(),h=vme({opened:d.opened,shouldReturnFocus:d.returnFocus}),p=d.withRoles?{"aria-labelledby":d.getTargetId(),id:d.getDropdownId(),role:"dialog",tabIndex:-1}:{},m=yu(t,d.floating);return d.disabled?null:R.jsx(jb,{...d.portalProps,withinPortal:d.withinPortal,children:R.jsx(vg,{mounted:d.opened,...d.transitionProps,transition:((g=d.transitionProps)==null?void 0:g.transition)||"fade",duration:((b=d.transitionProps)==null?void 0:b.duration)??150,keepMounted:d.keepMounted,exitDuration:typeof((y=d.transitionProps)==null?void 0:y.exitDuration)=="number"?d.transitionProps.exitDuration:(x=d.transitionProps)==null?void 0:x.duration,children:w=>R.jsx(zO,{active:d.trapFocus&&d.opened,innerRef:m,children:R.jsxs(He,{...p,...f,variant:u,onKeyDownCapture:CDe(d.onClose,{active:d.closeOnEscape,onTrigger:h,onKeyDown:a}),"data-position":d.placement,"data-fixed":d.floatingStrategy==="fixed"||void 0,...d.getStyles("dropdown",{className:r,props:n,classNames:l,styles:c,style:[{...w,zIndex:d.zIndex,top:d.y??0,left:d.x??0,width:d.width==="target"?void 0:ot(d.width)},d.resolvedStyles.dropdown,c==null?void 0:c.dropdown,i]}),children:[o,R.jsx(Oq,{ref:d.arrowRef,arrowX:d.arrowX,arrowY:d.arrowY,visible:d.withArrow,position:d.placement,arrowSize:d.arrowSize,arrowRadius:d.arrowRadius,arrowOffset:d.arrowOffset,arrowPosition:d.arrowPosition,...d.getStyles("arrow",{props:n,classNames:l,styles:c})})]})})})})});Mq.classes=xge;Mq.displayName="@mantine/core/PopoverDropdown";const aLe={refProp:"ref",popupType:"dialog"},_ge=Bt((e,t)=>{const{children:n,refProp:r,popupType:i,...s}=dt("PopoverTarget",aLe,e);if(!Lb(n))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const o=s,a=vge(),u=yu(a.reference,OO(n),t),l=a.withRoles?{"aria-haspopup":i,"aria-expanded":a.opened,"aria-controls":a.getDropdownId(),id:a.getTargetId()}:{};return z.cloneElement(n,{...o,...l,...a.targetProps,className:va(a.targetProps.className,o.className,n.props.className),[r]:u,...a.controlled?null:{onClick:a.onToggle}})});_ge.displayName="@mantine/core/PopoverTarget";function wge({opened:e,floating:t,position:n,positionDependencies:r}){const[i,s]=z.useState(0);z.useEffect(()=>{if(t.refs.reference.current&&t.refs.floating.current&&e)return xMe(t.refs.reference.current,t.refs.floating.current,t.update)},[t.refs.reference.current,t.refs.floating.current,e,i,n]),eg(()=>{t.update()},r),eg(()=>{s(o=>o+1)},[e])}function uLe(e){if(e===void 0)return{shift:!0,flip:!0};const t={...e};return e.shift===void 0&&(t.shift=!0),e.flip===void 0&&(t.flip=!0),t}function lLe(e,t){const n=uLe(e.middlewares),r=[lge(e.offset)];return n.shift&&r.push(Rq(typeof n.shift=="boolean"?{limiter:Jte(),padding:5}:{limiter:Jte(),padding:5,...n.shift})),n.flip&&r.push(typeof n.flip=="boolean"?sN():sN(n.flip)),n.inline&&r.push(typeof n.inline=="boolean"?ok():ok(n.inline)),r.push(cge({element:e.arrowRef,padding:e.arrowOffset})),(n.size||e.width==="target")&&r.push(IMe({...typeof n.size=="boolean"?{}:n.size,apply({rects:i,availableWidth:s,availableHeight:o,...a}){var c;const l=((c=t().refs.floating.current)==null?void 0:c.style)??{};n.size&&(typeof n.size=="object"&&n.size.apply?n.size.apply({rects:i,availableWidth:s,availableHeight:o,...a}):Object.assign(l,{maxWidth:`${s}px`,maxHeight:`${o}px`})),e.width==="target"&&Object.assign(l,{width:`${i.reference.width}px`})}})),r}function cLe(e){const[t,n]=Bu({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),r=z.useRef(t),i=()=>{t&&n(!1)},s=()=>n(!t),o=Dq({strategy:e.strategy,placement:e.position,middleware:lLe(e,()=>o)});return wge({opened:t,position:e.position,positionDependencies:e.positionDependencies||[],floating:o}),eg(()=>{var a;(a=e.onPositionChange)==null||a.call(e,o.placement)},[o.placement]),eg(()=>{var a,u;t!==r.current&&(t?(u=e.onOpen)==null||u.call(e):(a=e.onClose)==null||a.call(e)),r.current=t},[t,e.onClose,e.onOpen]),{floating:o,controlled:typeof e.opened=="boolean",opened:t,onClose:i,onToggle:s}}const fLe={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,withOverlay:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:ld("popover"),__staticSelector:"Popover",width:"max-content"},dLe=(e,{radius:t,shadow:n})=>({dropdown:{"--popover-radius":t===void 0?void 0:as(t),"--popover-shadow":oq(n)}});function _l(e){var Lt,sn,Fe,Qe,wt,Vt;const t=dt("Popover",fLe,e),{children:n,position:r,offset:i,onPositionChange:s,positionDependencies:o,opened:a,transitionProps:u,onExitTransitionEnd:l,onEnterTransitionEnd:c,width:f,middlewares:d,withArrow:h,arrowSize:p,arrowOffset:m,arrowRadius:g,arrowPosition:b,unstyled:y,classNames:x,styles:w,closeOnClickOutside:T,withinPortal:A,portalProps:k,closeOnEscape:I,clickOutsideEvents:O,trapFocus:M,onClose:L,onOpen:H,onChange:D,zIndex:B,radius:U,shadow:G,id:ee,defaultOpened:ne,__staticSelector:ue,withRoles:X,disabled:q,returnFocus:te,variant:W,keepMounted:Z,vars:oe,floatingStrategy:pe,withOverlay:ce,overlayProps:he,...Ee}=t,Ae=xn({name:ue,props:t,classes:xge,classNames:x,styles:w,unstyled:y,rootSelector:"dropdown",vars:oe,varsResolver:dLe}),{resolvedStyles:ge}=Sw({classNames:x,styles:w,props:t}),me=z.useRef(null),[Oe,Me]=z.useState(null),[Ye,lt]=z.useState(null),{dir:We}=Bb(),nt=lf(ee),yt=cLe({middlewares:d,width:f,position:mge(We,r),offset:typeof i=="number"?i+(h?p/2:0):i,arrowRef:me,arrowOffset:m,onPositionChange:s,positionDependencies:o,opened:a,defaultOpened:ne,onChange:D,onOpen:H,onClose:L,strategy:pe});IDe(()=>T&&yt.onClose(),O,[Oe,Ye]);const _t=z.useCallback(Wt=>{Me(Wt),yt.floating.refs.setReference(Wt)},[yt.floating.refs.setReference]),Rt=z.useCallback(Wt=>{lt(Wt),yt.floating.refs.setFloating(Wt)},[yt.floating.refs.setFloating]),Et=z.useCallback(()=>{var Wt;(Wt=u==null?void 0:u.onExited)==null||Wt.call(u),l==null||l()},[u==null?void 0:u.onExited,l]),Ke=z.useCallback(()=>{var Wt;(Wt=u==null?void 0:u.onEntered)==null||Wt.call(u),c==null||c()},[u==null?void 0:u.onEntered,c]);return R.jsxs(sLe,{value:{returnFocus:te,disabled:q,controlled:yt.controlled,reference:_t,floating:Rt,x:yt.floating.x,y:yt.floating.y,arrowX:(Fe=(sn=(Lt=yt.floating)==null?void 0:Lt.middlewareData)==null?void 0:sn.arrow)==null?void 0:Fe.x,arrowY:(Vt=(wt=(Qe=yt.floating)==null?void 0:Qe.middlewareData)==null?void 0:wt.arrow)==null?void 0:Vt.y,opened:yt.opened,arrowRef:me,transitionProps:{...u,onExited:Et,onEntered:Ke},width:f,withArrow:h,arrowSize:p,arrowOffset:m,arrowRadius:g,arrowPosition:b,placement:yt.floating.placement,trapFocus:M,withinPortal:A,portalProps:k,zIndex:B,radius:U,shadow:G,closeOnEscape:I,onClose:yt.onClose,onToggle:yt.onToggle,getTargetId:()=>`${nt}-target`,getDropdownId:()=>`${nt}-dropdown`,withRoles:X,targetProps:Ee,__staticSelector:ue,classNames:x,styles:w,unstyled:y,variant:W,keepMounted:Z,getStyles:Ae,resolvedStyles:ge,floatingStrategy:pe},children:[n,ce&&R.jsx(vg,{transition:"fade",mounted:yt.opened,duration:(u==null?void 0:u.duration)||250,exitDuration:(u==null?void 0:u.exitDuration)||250,children:Wt=>R.jsx(jb,{withinPortal:A,children:R.jsx(fS,{...he,...Ae("overlay",{className:he==null?void 0:he.className,style:[Wt,he==null?void 0:he.style]})})})})]})}_l.Target=_ge;_l.Dropdown=Mq;_l.displayName="@mantine/core/Popover";_l.extend=e=>e;var f0={root:"m_5ae2e3c",barsLoader:"m_7a2bd4cd",bar:"m_870bb79","bars-loader-animation":"m_5d2b3b9d",dotsLoader:"m_4e3f22d7",dot:"m_870c4af","loader-dots-animation":"m_aac34a1",ovalLoader:"m_b34414df","oval-loader-animation":"m_f8e89c4b"};const Ege=z.forwardRef(({className:e,...t},n)=>R.jsxs(He,{component:"span",className:va(f0.barsLoader,e),...t,ref:n,children:[R.jsx("span",{className:f0.bar}),R.jsx("span",{className:f0.bar}),R.jsx("span",{className:f0.bar})]}));Ege.displayName="@mantine/core/Bars";const Sge=z.forwardRef(({className:e,...t},n)=>R.jsxs(He,{component:"span",className:va(f0.dotsLoader,e),...t,ref:n,children:[R.jsx("span",{className:f0.dot}),R.jsx("span",{className:f0.dot}),R.jsx("span",{className:f0.dot})]}));Sge.displayName="@mantine/core/Dots";const Tge=z.forwardRef(({className:e,...t},n)=>R.jsx(He,{component:"span",className:va(f0.ovalLoader,e),...t,ref:n}));Tge.displayName="@mantine/core/Oval";const Cge={bars:Ege,oval:Tge,dots:Sge},hLe={loaders:Cge,type:"oval"},pLe=(e,{size:t,color:n})=>({root:{"--loader-size":_r(t,"loader-size"),"--loader-color":n?Fs(n,e):void 0}}),bg=Bt((e,t)=>{const n=dt("Loader",hLe,e),{size:r,color:i,type:s,vars:o,className:a,style:u,classNames:l,styles:c,unstyled:f,loaders:d,variant:h,children:p,...m}=n,g=xn({name:"Loader",props:n,classes:f0,className:a,style:u,classNames:l,styles:c,unstyled:f,vars:o,varsResolver:pLe});return p?R.jsx(He,{...g("root"),ref:t,...m,children:p}):R.jsx(He,{...g("root"),ref:t,component:d[s],variant:h,size:r,...m})});bg.defaultLoaders=Cge;bg.classes=f0;bg.displayName="@mantine/core/Loader";var pT={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21",groupSection:"m_437b6484"};const une={orientation:"horizontal"},mLe=(e,{borderWidth:t})=>({group:{"--ai-border-width":ot(t)}}),Lq=Bt((e,t)=>{const n=dt("ActionIconGroup",une,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:f,mod:d,...h}=dt("ActionIconGroup",une,e),p=xn({name:"ActionIconGroup",props:n,classes:pT,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:mLe,rootSelector:"group"});return R.jsx(He,{...p("group"),ref:t,variant:f,mod:[{"data-orientation":u},d],role:"group",...h})});Lq.classes=pT;Lq.displayName="@mantine/core/ActionIconGroup";const lne={},gLe=(e,{radius:t,color:n,gradient:r,variant:i,autoContrast:s,size:o})=>{const a=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:s});return{groupSection:{"--section-height":_r(o,"section-height"),"--section-padding-x":_r(o,"section-padding-x"),"--section-fz":xl(o),"--section-radius":t===void 0?void 0:as(t),"--section-bg":n||i?a.background:void 0,"--section-color":a.color,"--section-bd":n||i?a.border:void 0}}},Fq=Bt((e,t)=>{const n=dt("ActionIconGroupSection",lne,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,vars:u,variant:l,gradient:c,radius:f,autoContrast:d,...h}=dt("ActionIconGroupSection",lne,e),p=xn({name:"ActionIconGroupSection",props:n,classes:pT,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:u,varsResolver:gLe,rootSelector:"groupSection"});return R.jsx(He,{...p("groupSection"),ref:t,variant:l,...h})});Fq.classes=pT;Fq.displayName="@mantine/core/ActionIconGroupSection";const yLe={},vLe=(e,{size:t,radius:n,variant:r,gradient:i,color:s,autoContrast:o})=>{const a=e.variantColorResolver({color:s||e.primaryColor,theme:e,gradient:i,variant:r||"filled",autoContrast:o});return{root:{"--ai-size":_r(t,"ai-size"),"--ai-radius":n===void 0?void 0:as(n),"--ai-bg":s||r?a.background:void 0,"--ai-hover":s||r?a.hover:void 0,"--ai-hover-color":s||r?a.hoverColor:void 0,"--ai-color":a.color,"--ai-bd":s||r?a.border:void 0}}},Ub=Ga((e,t)=>{const n=dt("ActionIcon",yLe,e),{className:r,unstyled:i,variant:s,classNames:o,styles:a,style:u,loading:l,loaderProps:c,size:f,color:d,radius:h,__staticSelector:p,gradient:m,vars:g,children:b,disabled:y,"data-disabled":x,autoContrast:w,mod:T,...A}=n,k=xn({name:["ActionIcon",p],props:n,className:r,style:u,classes:pT,classNames:o,styles:a,unstyled:i,vars:g,varsResolver:vLe});return R.jsxs(rh,{...k("root",{active:!y&&!l&&!x}),...A,unstyled:i,variant:s,size:f,disabled:y||l,ref:t,mod:[{loading:l,disabled:y||x},T],children:[R.jsx(vg,{mounted:!!l,transition:"slide-down",duration:150,children:I=>R.jsx(He,{component:"span",...k("loader",{style:I}),"aria-hidden":!0,children:R.jsx(bg,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...c})})}),R.jsx(He,{component:"span",mod:{loading:l},...k("icon"),children:b})]})});Ub.classes=pT;Ub.displayName="@mantine/core/ActionIcon";Ub.Group=Lq;Ub.GroupSection=Fq;const Age=z.forwardRef(({size:e="var(--cb-icon-size, 70%)",style:t,...n},r)=>R.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...t,width:e,height:e},ref:r,...n,children:R.jsx("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}));Age.displayName="@mantine/core/CloseIcon";var kge={root:"m_86a44da5","root--subtle":"m_220c80f2"};const bLe={variant:"subtle"},xLe=(e,{size:t,radius:n,iconSize:r})=>({root:{"--cb-size":_r(t,"cb-size"),"--cb-radius":n===void 0?void 0:as(n),"--cb-icon-size":ot(r)}}),zb=Ga((e,t)=>{const n=dt("CloseButton",bLe,e),{iconSize:r,children:i,vars:s,radius:o,className:a,classNames:u,style:l,styles:c,unstyled:f,"data-disabled":d,disabled:h,variant:p,icon:m,mod:g,__staticSelector:b,...y}=n,x=xn({name:b||"CloseButton",props:n,className:a,style:l,classes:kge,classNames:u,styles:c,unstyled:f,vars:s,varsResolver:xLe});return R.jsxs(rh,{ref:t,...y,unstyled:f,variant:p,disabled:h,mod:[{disabled:h||d},g],...x("root",{variant:p,active:!h&&!d}),children:[m||R.jsx(Age,{}),i]})});zb.classes=kge;zb.displayName="@mantine/core/CloseButton";function _Le(e){return z.Children.toArray(e).filter(Boolean)}var Rge={root:"m_4081bf90"};const wLe={preventGrowOverflow:!0,gap:"md",align:"center",justify:"flex-start",wrap:"wrap"},ELe=(e,{grow:t,preventGrowOverflow:n,gap:r,align:i,justify:s,wrap:o},{childWidth:a})=>({root:{"--group-child-width":t&&n?a:void 0,"--group-gap":Ha(r),"--group-align":i,"--group-justify":s,"--group-wrap":o}}),co=Bt((e,t)=>{const n=dt("Group",wLe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,children:u,gap:l,align:c,justify:f,wrap:d,grow:h,preventGrowOverflow:p,vars:m,variant:g,__size:b,mod:y,...x}=n,w=_Le(u),T=w.length,A=Ha(l??"md"),I={childWidth:`calc(${100/T}% - (${A} - ${A} / ${T}))`},O=xn({name:"Group",props:n,stylesCtx:I,className:i,style:s,classes:Rge,classNames:r,styles:o,unstyled:a,vars:m,varsResolver:ELe});return R.jsx(He,{...O("root"),ref:t,variant:g,mod:[{grow:h},y],size:b,...x,children:w})});co.classes=Rge;co.displayName="@mantine/core/Group";const[SLe,k1]=Al("ModalBase component was not found in tree");function TLe({opened:e,transitionDuration:t}){const[n,r]=z.useState(e),i=z.useRef(-1),o=DO()?0:t;return z.useEffect(()=>(e?(r(!0),window.clearTimeout(i.current)):o===0?r(!1):i.current=window.setTimeout(()=>r(!1),o),()=>window.clearTimeout(i.current)),[e,o]),n}function CLe({id:e,transitionProps:t,opened:n,trapFocus:r,closeOnEscape:i,onClose:s,returnFocus:o}){const a=lf(e),[u,l]=z.useState(!1),[c,f]=z.useState(!1),d=typeof(t==null?void 0:t.duration)=="number"?t==null?void 0:t.duration:200,h=TLe({opened:n,transitionDuration:d});return wme("keydown",p=>{var m;p.key==="Escape"&&i&&n&&((m=p.target)==null?void 0:m.getAttribute("data-mantine-stop-propagation"))!=="true"&&s()},{capture:!0}),vme({opened:n,shouldReturnFocus:r&&o}),{_id:a,titleMounted:u,bodyMounted:c,shouldLockScroll:h,setTitleMounted:l,setBodyMounted:f}}const Ige=z.forwardRef(({keepMounted:e,opened:t,onClose:n,id:r,transitionProps:i,onExitTransitionEnd:s,onEnterTransitionEnd:o,trapFocus:a,closeOnEscape:u,returnFocus:l,closeOnClickOutside:c,withinPortal:f,portalProps:d,lockScroll:h,children:p,zIndex:m,shadow:g,padding:b,__vars:y,unstyled:x,removeScrollProps:w,...T},A)=>{const{_id:k,titleMounted:I,bodyMounted:O,shouldLockScroll:M,setTitleMounted:L,setBodyMounted:H}=CLe({id:r,transitionProps:i,opened:t,trapFocus:a,closeOnEscape:u,onClose:n,returnFocus:l}),{key:D,...B}=w||{};return R.jsx(jb,{...d,withinPortal:f,children:R.jsx(SLe,{value:{opened:t,onClose:n,closeOnClickOutside:c,onExitTransitionEnd:s,onEnterTransitionEnd:o,transitionProps:{...i,keepMounted:e},getTitleId:()=>`${k}-title`,getBodyId:()=>`${k}-body`,titleMounted:I,bodyMounted:O,setTitleMounted:L,setBodyMounted:H,trapFocus:a,closeOnEscape:u,zIndex:m,unstyled:x},children:R.jsx(aS,{enabled:M&&h,...B,children:R.jsx(He,{ref:A,...T,__vars:{...y,"--mb-z-index":(m||ld("modal")).toString(),"--mb-shadow":oq(g),"--mb-padding":Ha(b)},children:p})},D)})})});Ige.displayName="@mantine/core/ModalBase";function ALe(){const e=k1();return z.useEffect(()=>(e.setBodyMounted(!0),()=>e.setBodyMounted(!1)),[]),e.getBodyId()}var dS={title:"m_615af6c9",header:"m_b5489c3c",inner:"m_60c222c7",content:"m_fd1ab0aa",close:"m_606cb269",body:"m_5df29311"};const Pge=z.forwardRef(({className:e,...t},n)=>{const r=ALe(),i=k1();return R.jsx(He,{ref:n,...t,id:r,className:va({[dS.body]:!i.unstyled},e)})});Pge.displayName="@mantine/core/ModalBaseBody";const Nge=z.forwardRef(({className:e,onClick:t,...n},r)=>{const i=k1();return R.jsx(zb,{ref:r,...n,onClick:s=>{i.onClose(),t==null||t(s)},className:va({[dS.close]:!i.unstyled},e),unstyled:i.unstyled})});Nge.displayName="@mantine/core/ModalBaseCloseButton";const Dge=z.forwardRef(({transitionProps:e,className:t,innerProps:n,onKeyDown:r,style:i,...s},o)=>{const a=k1();return R.jsx(vg,{mounted:a.opened,transition:"pop",...a.transitionProps,onExited:()=>{var u,l,c;(u=a.onExitTransitionEnd)==null||u.call(a),(c=(l=a.transitionProps)==null?void 0:l.onExited)==null||c.call(l)},onEntered:()=>{var u,l,c;(u=a.onEnterTransitionEnd)==null||u.call(a),(c=(l=a.transitionProps)==null?void 0:l.onEntered)==null||c.call(l)},...e,children:u=>R.jsx("div",{...n,className:va({[dS.inner]:!a.unstyled},n.className),children:R.jsx(zO,{active:a.opened&&a.trapFocus,innerRef:o,children:R.jsx(cT,{...s,component:"section",role:"dialog",tabIndex:-1,"aria-modal":!0,"aria-describedby":a.bodyMounted?a.getBodyId():void 0,"aria-labelledby":a.titleMounted?a.getTitleId():void 0,style:[i,u],className:va({[dS.content]:!a.unstyled},t),unstyled:a.unstyled,children:s.children})})})})});Dge.displayName="@mantine/core/ModalBaseContent";const Oge=z.forwardRef(({className:e,...t},n)=>{const r=k1();return R.jsx(He,{component:"header",ref:n,className:va({[dS.header]:!r.unstyled},e),...t})});Oge.displayName="@mantine/core/ModalBaseHeader";const kLe={duration:200,timingFunction:"ease",transition:"fade"};function RLe(e){const t=k1();return{...kLe,...t.transitionProps,...e}}const Mge=z.forwardRef(({onClick:e,transitionProps:t,style:n,visible:r,...i},s)=>{const o=k1(),a=RLe(t);return R.jsx(vg,{mounted:r!==void 0?r:o.opened,...a,transition:"fade",children:u=>R.jsx(fS,{ref:s,fixed:!0,style:[n,u],zIndex:o.zIndex,unstyled:o.unstyled,onClick:l=>{e==null||e(l),o.closeOnClickOutside&&o.onClose()},...i})})});Mge.displayName="@mantine/core/ModalBaseOverlay";function ILe(){const e=k1();return z.useEffect(()=>(e.setTitleMounted(!0),()=>e.setTitleMounted(!1)),[]),e.getTitleId()}const Lge=z.forwardRef(({className:e,...t},n)=>{const r=ILe(),i=k1();return R.jsx(He,{component:"h2",ref:n,className:va({[dS.title]:!i.unstyled},e),...t,id:r})});Lge.displayName="@mantine/core/ModalBaseTitle";function PLe({children:e}){return R.jsx(R.Fragment,{children:e})}const[NLe,DLe]=Fb({size:"sm"}),OLe={},Fge=Bt((e,t)=>{const n=dt("InputClearButton",OLe,e),{size:r,variant:i,vars:s,classNames:o,styles:a,...u}=n,l=DLe(),{resolvedClassNames:c,resolvedStyles:f}=Sw({classNames:o,styles:a,props:n});return R.jsx(zb,{variant:i||"transparent",ref:t,size:r||(l==null?void 0:l.size)||"sm",classNames:c,styles:f,__staticSelector:"InputClearButton",...u})});Fge.displayName="@mantine/core/InputClearButton";const[MLe,mT]=Fb({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var op={wrapper:"m_6c018570",input:"m_8fb7ebe7",section:"m_82577fc2",placeholder:"m_88bacfd0",root:"m_46b77525",label:"m_8fdc1311",required:"m_78a94662",error:"m_8f816625",description:"m_fe47ce59"};const cne={},LLe=(e,{size:t})=>({description:{"--input-description-size":t===void 0?void 0:`calc(${xl(t)} - ${ot(2)})`}}),VO=Bt((e,t)=>{const n=dt("InputDescription",cne,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:f=!0,variant:d,...h}=dt("InputDescription",cne,n),p=mT(),m=xn({name:["InputWrapper",c],props:n,classes:op,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"description",vars:u,varsResolver:LLe}),g=f&&(p==null?void 0:p.getStyles)||m;return R.jsx(He,{component:"p",ref:t,variant:d,size:l,...g("description",p!=null&&p.getStyles?{className:i,style:s}:void 0),...h})});VO.classes=op;VO.displayName="@mantine/core/InputDescription";const FLe={},$Le=(e,{size:t})=>({error:{"--input-error-size":t===void 0?void 0:`calc(${xl(t)} - ${ot(2)})`}}),HO=Bt((e,t)=>{const n=dt("InputError",FLe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:f=!0,variant:d,...h}=n,p=xn({name:["InputWrapper",c],props:n,classes:op,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"error",vars:u,varsResolver:$Le}),m=mT(),g=f&&(m==null?void 0:m.getStyles)||p;return R.jsx(He,{component:"p",ref:t,variant:d,size:l,...g("error",m!=null&&m.getStyles?{className:i,style:s}:void 0),...h})});HO.classes=op;HO.displayName="@mantine/core/InputError";const fne={labelElement:"label"},BLe=(e,{size:t})=>({label:{"--input-label-size":xl(t),"--input-asterisk-color":void 0}}),qO=Bt((e,t)=>{const n=dt("InputLabel",fne,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,labelElement:l,size:c,required:f,htmlFor:d,onMouseDown:h,children:p,__staticSelector:m,variant:g,mod:b,...y}=dt("InputLabel",fne,n),x=xn({name:["InputWrapper",m],props:n,classes:op,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"label",vars:u,varsResolver:BLe}),w=mT(),T=(w==null?void 0:w.getStyles)||x;return R.jsxs(He,{...T("label",w!=null&&w.getStyles?{className:i,style:s}:void 0),component:l,variant:g,size:c,ref:t,htmlFor:l==="label"?d:void 0,mod:[{required:f},b],onMouseDown:A=>{h==null||h(A),!A.defaultPrevented&&A.detail>1&&A.preventDefault()},...y,children:[p,f&&R.jsx("span",{...T("required"),"aria-hidden":!0,children:" *"})]})});qO.classes=op;qO.displayName="@mantine/core/InputLabel";const dne={},$q=Bt((e,t)=>{const n=dt("InputPlaceholder",dne,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,variant:c,error:f,mod:d,...h}=dt("InputPlaceholder",dne,n),p=xn({name:["InputPlaceholder",l],props:n,classes:op,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"placeholder"});return R.jsx(He,{...p("placeholder"),mod:[{error:!!f},d],component:"span",variant:c,ref:t,...h})});$q.classes=op;$q.displayName="@mantine/core/InputPlaceholder";function jLe(e,{hasDescription:t,hasError:n}){const r=e.findIndex(u=>u==="input"),i=e.slice(0,r),s=e.slice(r+1),o=t&&i.includes("description")||n&&i.includes("error");return{offsetBottom:t&&s.includes("description")||n&&s.includes("error"),offsetTop:o}}const ULe={labelElement:"label",inputContainer:e=>e,inputWrapperOrder:["label","description","input","error"]},zLe=(e,{size:t})=>({label:{"--input-label-size":xl(t),"--input-asterisk-color":void 0},error:{"--input-error-size":t===void 0?void 0:`calc(${xl(t)} - ${ot(2)})`},description:{"--input-description-size":t===void 0?void 0:`calc(${xl(t)} - ${ot(2)})`}}),Bq=Bt((e,t)=>{const n=dt("InputWrapper",ULe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,variant:c,__staticSelector:f,inputContainer:d,inputWrapperOrder:h,label:p,error:m,description:g,labelProps:b,descriptionProps:y,errorProps:x,labelElement:w,children:T,withAsterisk:A,id:k,required:I,__stylesApiProps:O,mod:M,...L}=n,H=xn({name:["InputWrapper",f],props:O||n,classes:op,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:zLe}),D={size:l,variant:c,__staticSelector:f},B=lf(k),U=typeof A=="boolean"?A:I,G=(x==null?void 0:x.id)||`${B}-error`,ee=(y==null?void 0:y.id)||`${B}-description`,ne=B,ue=!!m&&typeof m!="boolean",X=!!g,q=`${ue?G:""} ${X?ee:""}`,te=q.trim().length>0?q.trim():void 0,W=(b==null?void 0:b.id)||`${B}-label`,Z=p&&R.jsx(qO,{labelElement:w,id:W,htmlFor:ne,required:U,...D,...b,children:p},"label"),oe=X&&R.jsx(VO,{...y,...D,size:(y==null?void 0:y.size)||D.size,id:(y==null?void 0:y.id)||ee,children:g},"description"),pe=R.jsx(z.Fragment,{children:d(T)},"input"),ce=ue&&z.createElement(HO,{...x,...D,size:(x==null?void 0:x.size)||D.size,key:"error",id:(x==null?void 0:x.id)||G},m),he=h.map(Ee=>{switch(Ee){case"label":return Z;case"input":return pe;case"description":return oe;case"error":return ce;default:return null}});return R.jsx(MLe,{value:{getStyles:H,describedBy:te,inputId:ne,labelId:W,...jLe(h,{hasDescription:X,hasError:ue})},children:R.jsx(He,{ref:t,variant:c,size:l,mod:[{error:!!m},M],...H("root"),...L,children:he})})});Bq.classes=op;Bq.displayName="@mantine/core/InputWrapper";const VLe={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0},HLe=(e,t,n)=>({wrapper:{"--input-margin-top":n.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":n.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":_r(t.size,"input-height"),"--input-fz":xl(t.size),"--input-radius":t.radius===void 0?void 0:as(t.radius),"--input-left-section-width":t.leftSectionWidth!==void 0?ot(t.leftSectionWidth):void 0,"--input-right-section-width":t.rightSectionWidth!==void 0?ot(t.rightSectionWidth):void 0,"--input-padding-y":t.multiline?_r(t.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":t.leftSectionPointerEvents,"--input-right-section-pointer-events":t.rightSectionPointerEvents}}),ys=Ga((e,t)=>{const n=dt("Input",VLe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,required:u,__staticSelector:l,__stylesApiProps:c,size:f,wrapperProps:d,error:h,disabled:p,leftSection:m,leftSectionProps:g,leftSectionWidth:b,rightSection:y,rightSectionProps:x,rightSectionWidth:w,rightSectionPointerEvents:T,leftSectionPointerEvents:A,variant:k,vars:I,pointer:O,multiline:M,radius:L,id:H,withAria:D,withErrorStyles:B,mod:U,inputSize:G,__clearSection:ee,__clearable:ne,__defaultRightSection:ue,...X}=n,{styleProps:q,rest:te}=Cw(X),W=mT(),Z={offsetBottom:W==null?void 0:W.offsetBottom,offsetTop:W==null?void 0:W.offsetTop},oe=xn({name:["Input",l],props:c||n,classes:op,className:i,style:s,classNames:r,styles:o,unstyled:a,stylesCtx:Z,rootSelector:"wrapper",vars:I,varsResolver:HLe}),pe=D?{required:u,disabled:p,"aria-invalid":!!h,"aria-describedby":W==null?void 0:W.describedBy,id:(W==null?void 0:W.inputId)||H}:{},ce=y||ne&&ee||ue;return R.jsx(NLe,{value:{size:f||"sm"},children:R.jsxs(He,{...oe("wrapper"),...q,...d,mod:[{error:!!h&&B,pointer:O,disabled:p,multiline:M,"data-with-right-section":!!y,"data-with-left-section":!!m},U],variant:k,size:f,children:[m&&R.jsx("div",{...g,"data-position":"left",...oe("section",{className:g==null?void 0:g.className,style:g==null?void 0:g.style}),children:m}),R.jsx(He,{component:"input",...te,...pe,ref:t,required:u,mod:{disabled:p,error:!!h&&B},variant:k,__size:G,...oe("input")}),ce&&R.jsx("div",{...x,"data-position":"right",...oe("section",{className:x==null?void 0:x.className,style:x==null?void 0:x.style}),children:ce})]})})});ys.classes=op;ys.Wrapper=Bq;ys.Label=qO;ys.Error=HO;ys.Description=VO;ys.Placeholder=$q;ys.ClearButton=Fge;ys.displayName="@mantine/core/Input";function qLe(e,t,n){const r=dt(e,t,n),{label:i,description:s,error:o,required:a,classNames:u,styles:l,className:c,unstyled:f,__staticSelector:d,__stylesApiProps:h,errorProps:p,labelProps:m,descriptionProps:g,wrapperProps:b,id:y,size:x,style:w,inputContainer:T,inputWrapperOrder:A,withAsterisk:k,variant:I,vars:O,mod:M,...L}=r,{styleProps:H,rest:D}=Cw(L),B={label:i,description:s,error:o,required:a,classNames:u,className:c,__staticSelector:d,__stylesApiProps:h||r,errorProps:p,labelProps:m,descriptionProps:g,unstyled:f,styles:l,size:x,style:w,inputContainer:T,inputWrapperOrder:A,withAsterisk:k,variant:I,id:y,mod:M,...b};return{...D,classNames:u,styles:l,unstyled:f,wrapperProps:{...B,...H},inputProps:{required:a,classNames:u,styles:l,unstyled:f,size:x,__staticSelector:d,__stylesApiProps:h||r,error:o,variant:I,id:y}}}const WLe={__staticSelector:"InputBase",withAria:!0},ap=Ga((e,t)=>{const{inputProps:n,wrapperProps:r,...i}=qLe("InputBase",WLe,e);return R.jsx(ys.Wrapper,{...r,children:R.jsx(ys,{...n,...i,ref:t})})});ap.classes={...ys.classes,...ys.Wrapper.classes};ap.displayName="@mantine/core/InputBase";const GLe={gap:{type:"spacing",property:"gap"},rowGap:{type:"spacing",property:"rowGap"},columnGap:{type:"spacing",property:"columnGap"},align:{type:"identity",property:"alignItems"},justify:{type:"identity",property:"justifyContent"},wrap:{type:"identity",property:"flexWrap"},direction:{type:"identity",property:"flexDirection"}};var $ge={root:"m_8bffd616"};const YLe={},An=Ga((e,t)=>{const n=dt("Flex",YLe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,gap:l,rowGap:c,columnGap:f,align:d,justify:h,wrap:p,direction:m,...g}=n,b=xn({name:"Flex",classes:$ge,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u}),y=Wa(),x=tR(),w=Ime({styleProps:{gap:l,rowGap:c,columnGap:f,align:d,justify:h,wrap:p,direction:m},theme:y,data:GLe});return R.jsxs(R.Fragment,{children:[w.hasResponsiveStyles&&R.jsx(Tw,{selector:`.${x}`,styles:w.styles,media:w.media}),R.jsx(He,{ref:t,...b("root",{className:x,style:Mb(w.inlineStyles)}),...g})]})});An.classes=$ge;An.displayName="@mantine/core/Flex";const[KLe,jq]=Al("Accordion component was not found in the tree");function WO({style:e,size:t=16,...n}){return R.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...e,width:ot(t),height:ot(t),display:"block"},...n,children:R.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}WO.displayName="@mantine/core/AccordionChevron";const[XLe,Bge]=Al("Accordion.Item component was not found in the tree");var rR={root:"m_9bdbb667",panel:"m_df78851f",content:"m_4ba554d4",itemTitle:"m_8fa820a0",control:"m_4ba585b8","control--default":"m_6939a5e9","control--contained":"m_4271d21b",label:"m_df3ffa0f",chevron:"m_3f35ae96",icon:"m_9bd771fe",item:"m_9bd7b098","item--default":"m_fe19b709","item--contained":"m_1f921b3b","item--filled":"m_2cdf939a","item--separated":"m_9f59b069"};const QLe={},Uq=Bt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,chevron:a,icon:u,onClick:l,onKeyDown:c,children:f,disabled:d,mod:h,...p}=dt("AccordionControl",QLe,e),{value:m}=Bge(),g=jq(),b=g.isItemActive(m),y=typeof g.order=="number",x=`h${g.order}`,w=R.jsxs(rh,{...p,...g.getStyles("control",{className:r,classNames:n,style:i,styles:s,variant:g.variant}),unstyled:g.unstyled,mod:["accordion-control",{active:b,"chevron-position":g.chevronPosition,disabled:d},h],ref:t,onClick:T=>{l==null||l(T),g.onChange(m)},type:"button",disabled:d,"aria-expanded":b,"aria-controls":g.getRegionId(m),id:g.getControlId(m),onKeyDown:sq({siblingSelector:"[data-accordion-control]",parentSelector:"[data-accordion]",activateOnFocus:!1,loop:g.loop,orientation:"vertical",onKeyDown:c}),children:[R.jsx(He,{component:"span",mod:{rotate:!g.disableChevronRotation&&b,position:g.chevronPosition},...g.getStyles("chevron",{classNames:n,styles:s}),children:a||g.chevron}),R.jsx("span",{...g.getStyles("label",{classNames:n,styles:s}),children:f}),u&&R.jsx(He,{component:"span",mod:{"chevron-position":g.chevronPosition},...g.getStyles("icon",{classNames:n,styles:s}),children:u})]});return y?R.jsx(x,{...g.getStyles("itemTitle",{classNames:n,styles:s}),children:w}):w});Uq.displayName="@mantine/core/AccordionControl";Uq.classes=rR;const JLe={},zq=Bt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,mod:u,...l}=dt("AccordionItem",JLe,e),c=jq();return R.jsx(XLe,{value:{value:a},children:R.jsx(He,{ref:t,mod:[{active:c.isItemActive(a)},u],...c.getStyles("item",{className:r,classNames:n,styles:s,style:i,variant:c.variant}),...l})})});zq.displayName="@mantine/core/AccordionItem";zq.classes=rR;const ZLe={},Vq=Bt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,...u}=dt("AccordionPanel",ZLe,e),{value:l}=Bge(),c=jq();return R.jsx(FO,{ref:t,...c.getStyles("panel",{className:r,classNames:n,style:i,styles:s}),...u,in:c.isItemActive(l),transitionDuration:c.transitionDuration??200,role:"region",id:c.getRegionId(l),"aria-labelledby":c.getControlId(l),children:R.jsx("div",{...c.getStyles("content",{classNames:n,styles:s}),children:a})})});Vq.displayName="@mantine/core/AccordionPanel";Vq.classes=rR;const e7e={multiple:!1,disableChevronRotation:!1,chevronPosition:"right",variant:"default",chevron:R.jsx(WO,{})},t7e=(e,{transitionDuration:t,chevronSize:n,radius:r})=>({root:{"--accordion-transition-duration":t===void 0?void 0:`${t}ms`,"--accordion-chevron-size":n===void 0?void 0:ot(n),"--accordion-radius":r===void 0?void 0:as(r)}});function Ql(e){const t=dt("Accordion",e7e,e),{classNames:n,className:r,style:i,styles:s,unstyled:o,vars:a,children:u,multiple:l,value:c,defaultValue:f,onChange:d,id:h,loop:p,transitionDuration:m,disableChevronRotation:g,chevronPosition:b,chevronSize:y,order:x,chevron:w,variant:T,radius:A,...k}=t,I=lf(h),[O,M]=Bu({value:c,defaultValue:f,finalValue:l?[]:null,onChange:d}),L=B=>Array.isArray(O)?O.includes(B):B===O,H=B=>{const U=Array.isArray(O)?O.includes(B)?O.filter(G=>G!==B):[...O,B]:B===O?null:B;M(U)},D=xn({name:"Accordion",classes:rR,props:t,className:r,style:i,classNames:n,styles:s,unstyled:o,vars:a,varsResolver:t7e});return R.jsx(KLe,{value:{isItemActive:L,onChange:H,getControlId:Q8(`${I}-control`,"Accordion.Item component was rendered with invalid value or without value"),getRegionId:Q8(`${I}-panel`,"Accordion.Item component was rendered with invalid value or without value"),transitionDuration:m,disableChevronRotation:g,chevronPosition:b,order:x,chevron:w,loop:p,getStyles:D,variant:T,unstyled:o},children:R.jsx(He,{...D("root"),id:I,...k,variant:T,"data-accordion":!0,children:u})})}const n7e=e=>e;Ql.extend=n7e;Ql.withProps=u9e(Ql);Ql.classes=rR;Ql.displayName="@mantine/core/Accordion";Ql.Item=zq;Ql.Panel=Vq;Ql.Control=Uq;Ql.Chevron=WO;var jge={root:"m_7f854edf"};const r7e={position:{bottom:0,right:0},zIndex:ld("modal"),withinPortal:!0},i7e=(e,{zIndex:t,position:n})=>({root:{"--affix-z-index":t==null?void 0:t.toString(),"--affix-top":ot(n==null?void 0:n.top),"--affix-left":ot(n==null?void 0:n.left),"--affix-bottom":ot(n==null?void 0:n.bottom),"--affix-right":ot(n==null?void 0:n.right)}}),Hq=Bt((e,t)=>{const n=dt("Affix",r7e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,portalProps:l,zIndex:c,withinPortal:f,position:d,...h}=n,p=xn({name:"Affix",classes:jge,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:i7e});return R.jsx(jb,{...l,withinPortal:f,children:R.jsx(He,{ref:t,...p("root"),...h})})});Hq.classes=jge;Hq.displayName="@mantine/core/Affix";var Uge={root:"m_66836ed3",wrapper:"m_a5d60502",body:"m_667c2793",title:"m_6a03f287",label:"m_698f4f23",icon:"m_667f2a6a",message:"m_7fa78076",closeButton:"m_87f54839"};const s7e={},o7e=(e,{radius:t,color:n,variant:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:r||"light",autoContrast:i});return{root:{"--alert-radius":t===void 0?void 0:as(t),"--alert-bg":n||r?s.background:void 0,"--alert-color":s.color,"--alert-bd":n||r?s.border:void 0}}},Gy=Bt((e,t)=>{const n=dt("Alert",s7e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,radius:l,color:c,title:f,children:d,id:h,icon:p,withCloseButton:m,onClose:g,closeButtonLabel:b,variant:y,autoContrast:x,...w}=n,T=xn({name:"Alert",classes:Uge,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:o7e}),A=lf(h),k=f&&`${A}-title`||void 0,I=`${A}-body`;return R.jsx(He,{id:A,...T("root",{variant:y}),variant:y,ref:t,...w,role:"alert","aria-describedby":I,"aria-labelledby":k,children:R.jsxs("div",{...T("wrapper"),children:[p&&R.jsx("div",{...T("icon"),children:p}),R.jsxs("div",{...T("body"),children:[f&&R.jsx("div",{...T("title"),"data-with-close-button":m||void 0,children:R.jsx("span",{id:k,...T("label"),children:f})}),d&&R.jsx("div",{id:I,...T("message"),"data-variant":y,children:d})]}),m&&R.jsx(zb,{...T("closeButton"),onClick:g,variant:"transparent",size:16,iconSize:16,"aria-label":b,unstyled:a})]})})});Gy.classes=Uge;Gy.displayName="@mantine/core/Alert";var zge={root:"m_b6d8b162"};function a7e(e){if(e==="start")return"start";if(e==="end"||e)return"end"}const u7e={inherit:!1},l7e=(e,{variant:t,lineClamp:n,gradient:r,size:i,color:s})=>({root:{"--text-fz":xl(i),"--text-lh":yme(i),"--text-gradient":t==="gradient"?Kj(r,e):void 0,"--text-line-clamp":typeof n=="number"?n.toString():void 0,"--text-color":s?Fs(s,e):void 0}}),Nt=Ga((e,t)=>{const n=dt("Text",u7e,e),{lineClamp:r,truncate:i,inline:s,inherit:o,gradient:a,span:u,__staticSelector:l,vars:c,className:f,style:d,classNames:h,styles:p,unstyled:m,variant:g,mod:b,size:y,...x}=n,w=xn({name:["Text",l],props:n,classes:zge,className:f,style:d,classNames:h,styles:p,unstyled:m,vars:c,varsResolver:l7e});return R.jsx(He,{...w("root",{focusable:!0}),ref:t,component:u?"span":"p",variant:g,mod:[{"data-truncate":a7e(i),"data-line-clamp":typeof r=="number","data-inline":s,"data-inherit":o},b],size:y,...x})});Nt.classes=zge;Nt.displayName="@mantine/core/Text";var Vge={root:"m_849cf0da"};const c7e={underline:"hover"},kw=Ga((e,t)=>{const{underline:n,className:r,unstyled:i,mod:s,...o}=dt("Anchor",c7e,e);return R.jsx(Nt,{component:"a",ref:t,className:va({[Vge.root]:!i},r),...o,mod:[{underline:n},s],__staticSelector:"Anchor",unstyled:i})});kw.classes=Vge;kw.displayName="@mantine/core/Anchor";const[f7e,gT]=Al("AppShell was not found in tree");var Vb={root:"m_89ab340",navbar:"m_45252eee",aside:"m_9cdde9a",header:"m_3b16f56b",main:"m_8983817",footer:"m_3840c879",section:"m_6dcfc7c7"};const d7e={},qq=Bt((e,t)=>{const n=dt("AppShellAside",d7e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=gT();return h.disabled?null:R.jsx(He,{component:"aside",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("aside",{className:i,classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-aside-z-index":`calc(${c??h.zIndex} + 1)`}})});qq.classes=Vb;qq.displayName="@mantine/core/AppShellAside";const h7e={},Wq=Bt((e,t)=>{var p;const n=dt("AppShellFooter",h7e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=gT();return h.disabled?null:R.jsx(He,{component:"footer",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("footer",{className:va({[aS.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-footer-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});Wq.classes=Vb;Wq.displayName="@mantine/core/AppShellFooter";const p7e={},Gq=Bt((e,t)=>{var p;const n=dt("AppShellHeader",p7e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=gT();return h.disabled?null:R.jsx(He,{component:"header",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("header",{className:va({[aS.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-header-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});Gq.classes=Vb;Gq.displayName="@mantine/core/AppShellHeader";const m7e={},Yq=Bt((e,t)=>{const n=dt("AppShellMain",m7e,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=gT();return R.jsx(He,{component:"main",ref:t,...l.getStyles("main",{className:i,style:s,classNames:r,styles:o}),...u})});Yq.classes=Vb;Yq.displayName="@mantine/core/AppShellMain";function iR(e){return typeof e=="object"?e.base:e}function sR(e){const t=typeof e=="object"&&e!==null&&typeof e.base<"u"&&Object.keys(e).length===1;return typeof e=="number"||typeof e=="string"||t}function oR(e){return!(typeof e!="object"||e===null||Object.keys(e).length===1&&"base"in e)}function g7e({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,aside:r,theme:i}){var u,l,c;const s=r==null?void 0:r.width,o="translateX(var(--app-shell-aside-width))",a="translateX(calc(var(--app-shell-aside-width) * -1))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-aside-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-aside-offset"]="0px"),sR(s)){const f=ot(iR(s));e["--app-shell-aside-width"]=f,e["--app-shell-aside-offset"]=f}if(oR(s)&&(typeof s.base<"u"&&(e["--app-shell-aside-width"]=ot(s.base),e["--app-shell-aside-offset"]=ot(s.base)),Cs(s).forEach(f=>{f!=="base"&&(t[f]=t[f]||{},t[f]["--app-shell-aside-width"]=ot(s[f]),t[f]["--app-shell-aside-offset"]=ot(s[f]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const f=r.breakpoint;t[f]=t[f]||{},t[f]["--app-shell-aside-transform"]=o,t[f]["--app-shell-aside-transform-rtl"]=a,t[f]["--app-shell-aside-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const f=aq(r.breakpoint,i.breakpoints)-.1;n[f]=n[f]||{},n[f]["--app-shell-aside-width"]="100%",n[f]["--app-shell-aside-offset"]="0px",n[f]["--app-shell-aside-transform"]=o,n[f]["--app-shell-aside-transform-rtl"]=a}}function y7e({baseStyles:e,minMediaStyles:t,footer:n}){const r=n==null?void 0:n.height,i="translateY(var(--app-shell-footer-height))",s=(n==null?void 0:n.offset)??!0;if(sR(r)){const o=ot(iR(r));e["--app-shell-footer-height"]=o,s&&(e["--app-shell-footer-offset"]=o)}oR(r)&&(typeof r.base<"u"&&(e["--app-shell-footer-height"]=ot(r.base),s&&(e["--app-shell-footer-offset"]=ot(r.base))),Cs(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-footer-height"]=ot(r[o]),s&&(t[o]["--app-shell-footer-offset"]=ot(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-footer-transform"]=i,e["--app-shell-footer-offset"]="0px !important")}function v7e({baseStyles:e,minMediaStyles:t,header:n}){const r=n==null?void 0:n.height,i="translateY(calc(var(--app-shell-header-height) * -1))",s=(n==null?void 0:n.offset)??!0;if(sR(r)){const o=ot(iR(r));e["--app-shell-header-height"]=o,s&&(e["--app-shell-header-offset"]=o)}oR(r)&&(typeof r.base<"u"&&(e["--app-shell-header-height"]=ot(r.base),s&&(e["--app-shell-header-offset"]=ot(r.base))),Cs(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-header-height"]=ot(r[o]),s&&(t[o]["--app-shell-header-offset"]=ot(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-header-transform"]=i,e["--app-shell-header-offset"]="0px !important")}function b7e({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,navbar:r,theme:i}){var u,l,c;const s=r==null?void 0:r.width,o="translateX(calc(var(--app-shell-navbar-width) * -1))",a="translateX(var(--app-shell-navbar-width))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-navbar-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-navbar-offset"]="0px"),sR(s)){const f=ot(iR(s));e["--app-shell-navbar-width"]=f,e["--app-shell-navbar-offset"]=f}if(oR(s)&&(typeof s.base<"u"&&(e["--app-shell-navbar-width"]=ot(s.base),e["--app-shell-navbar-offset"]=ot(s.base)),Cs(s).forEach(f=>{f!=="base"&&(t[f]=t[f]||{},t[f]["--app-shell-navbar-width"]=ot(s[f]),t[f]["--app-shell-navbar-offset"]=ot(s[f]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const f=r.breakpoint;t[f]=t[f]||{},t[f]["--app-shell-navbar-transform"]=o,t[f]["--app-shell-navbar-transform-rtl"]=a,t[f]["--app-shell-navbar-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const f=aq(r.breakpoint,i.breakpoints)-.1;n[f]=n[f]||{},n[f]["--app-shell-navbar-width"]="100%",n[f]["--app-shell-navbar-offset"]="0px",n[f]["--app-shell-navbar-transform"]=o,n[f]["--app-shell-navbar-transform-rtl"]=a}}function gF(e){return Number(e)===0?"0px":Ha(e)}function x7e({padding:e,baseStyles:t,minMediaStyles:n}){sR(e)&&(t["--app-shell-padding"]=gF(iR(e))),oR(e)&&(e.base&&(t["--app-shell-padding"]=gF(e.base)),Cs(e).forEach(r=>{r!=="base"&&(n[r]=n[r]||{},n[r]["--app-shell-padding"]=gF(e[r]))}))}function _7e({navbar:e,header:t,footer:n,aside:r,padding:i,theme:s}){const o={},a={},u={};b7e({baseStyles:u,minMediaStyles:o,maxMediaStyles:a,navbar:e,theme:s}),g7e({baseStyles:u,minMediaStyles:o,maxMediaStyles:a,aside:r,theme:s}),v7e({baseStyles:u,minMediaStyles:o,header:t}),y7e({baseStyles:u,minMediaStyles:o,footer:n}),x7e({baseStyles:u,minMediaStyles:o,padding:i});const l=Uk(Cs(o),s.breakpoints).map(d=>({query:`(min-width: ${X8(d.px)})`,styles:o[d.value]})),c=Uk(Cs(a),s.breakpoints).map(d=>({query:`(max-width: ${X8(d.px)})`,styles:a[d.value]})),f=[...l,...c];return{baseStyles:u,media:f}}function w7e({navbar:e,header:t,aside:n,footer:r,padding:i}){const s=Wa(),o=$b(),{media:a,baseStyles:u}=_7e({navbar:e,header:t,footer:r,aside:n,padding:i,theme:s});return R.jsx(Tw,{media:a,styles:u,selector:o.cssVariablesSelector})}const E7e={},Kq=Bt((e,t)=>{const n=dt("AppShellNavbar",E7e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=gT();return h.disabled?null:R.jsx(He,{component:"nav",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("navbar",{className:i,classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-navbar-z-index":`calc(${c??h.zIndex} + 1)`}})});Kq.classes=Vb;Kq.displayName="@mantine/core/AppShellNavbar";const S7e={},Xq=Ga((e,t)=>{const n=dt("AppShellSection",S7e,e),{classNames:r,className:i,style:s,styles:o,vars:a,grow:u,mod:l,...c}=n,f=gT();return R.jsx(He,{ref:t,mod:[{grow:u},l],...f.getStyles("section",{className:i,style:s,classNames:r,styles:o}),...c})});Xq.classes=Vb;Xq.displayName="@mantine/core/AppShellSection";function T7e({transitionDuration:e,disabled:t}){const[n,r]=z.useState(!0),i=z.useRef(-1),s=z.useRef(-1);return wme("resize",()=>{r(!0),clearTimeout(i.current),i.current=window.setTimeout(()=>z.startTransition(()=>{r(!1)}),200)}),ww(()=>{r(!0),clearTimeout(s.current),s.current=window.setTimeout(()=>z.startTransition(()=>{r(!1)}),e||0)},[t,e]),n}const C7e={withBorder:!0,padding:0,transitionDuration:200,transitionTimingFunction:"ease",zIndex:ld("app")},A7e=(e,{transitionDuration:t,transitionTimingFunction:n})=>({root:{"--app-shell-transition-duration":`${t}ms`,"--app-shell-transition-timing-function":n}}),hs=Bt((e,t)=>{const n=dt("AppShell",C7e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,navbar:l,withBorder:c,padding:f,transitionDuration:d,transitionTimingFunction:h,header:p,zIndex:m,layout:g,disabled:b,aside:y,footer:x,offsetScrollbars:w=g!=="alt",mod:T,...A}=n,k=xn({name:"AppShell",classes:Vb,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:A7e}),I=T7e({disabled:b,transitionDuration:d});return R.jsxs(f7e,{value:{getStyles:k,withBorder:c,zIndex:m,disabled:b,offsetScrollbars:w},children:[R.jsx(w7e,{navbar:l,header:p,aside:y,footer:x,padding:f}),R.jsx(He,{ref:t,...k("root"),mod:[{resizing:I,layout:g,disabled:b},T],...A})]})});hs.classes=Vb;hs.displayName="@mantine/core/AppShell";hs.Navbar=Kq;hs.Header=Gq;hs.Main=Yq;hs.Aside=qq;hs.Footer=Wq;hs.Section=Xq;function Hge(e){return typeof e=="string"?{value:e,label:e}:"value"in e&&!("label"in e)?{value:e.value,label:e.value,disabled:e.disabled}:typeof e=="number"?{value:e.toString(),label:e.toString()}:"group"in e?{group:e.group,items:e.items.map(t=>Hge(t))}:e}function qge(e){return e?e.map(t=>Hge(t)):[]}function Qq(e){return e.reduce((t,n)=>"group"in n?{...t,...Qq(n.items)}:(t[n.value]=n,t),{})}var nd={dropdown:"m_88b62a41",search:"m_985517d8",options:"m_b2821a6e",option:"m_92253aa5",empty:"m_2530cd1d",header:"m_858f94bd",footer:"m_82b967cb",group:"m_254f3e4f",groupLabel:"m_2bb2e9e5",chevron:"m_2943220b",optionsDropdownOption:"m_390b5f4",optionsDropdownCheckIcon:"m_8ee53fc2"};const k7e={error:null},R7e=(e,{size:t})=>({chevron:{"--combobox-chevron-size":_r(t,"combobox-chevron-size")}}),Jq=Bt((e,t)=>{const n=dt("ComboboxChevron",k7e,e),{size:r,error:i,style:s,className:o,classNames:a,styles:u,unstyled:l,vars:c,mod:f,...d}=n,h=xn({name:"ComboboxChevron",classes:nd,props:n,style:s,className:o,classNames:a,styles:u,unstyled:l,vars:c,varsResolver:R7e,rootSelector:"chevron"});return R.jsx(He,{component:"svg",...d,...h("chevron"),size:r,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",mod:["combobox-chevron",{error:i},f],ref:t,children:R.jsx("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})});Jq.classes=nd;Jq.displayName="@mantine/core/ComboboxChevron";const[I7e,up]=Al("Combobox component was not found in tree"),Wge=z.forwardRef(({size:e,onMouseDown:t,onClick:n,onClear:r,...i},s)=>R.jsx(ys.ClearButton,{ref:s,tabIndex:-1,"aria-hidden":!0,...i,onMouseDown:o=>{o.preventDefault(),t==null||t(o)},onClick:o=>{r(),n==null||n(o)}}));Wge.displayName="@mantine/core/ComboboxClearButton";const P7e={},Zq=Bt((e,t)=>{const{classNames:n,styles:r,className:i,style:s,hidden:o,...a}=dt("ComboboxDropdown",P7e,e),u=up();return R.jsx(_l.Dropdown,{...a,ref:t,role:"presentation","data-hidden":o||void 0,...u.getStyles("dropdown",{className:i,style:s,classNames:n,styles:r})})});Zq.classes=nd;Zq.displayName="@mantine/core/ComboboxDropdown";const N7e={refProp:"ref"},Gge=Bt((e,t)=>{const{children:n,refProp:r}=dt("ComboboxDropdownTarget",N7e,e);if(up(),!Lb(n))throw new Error("Combobox.DropdownTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");return R.jsx(_l.Target,{ref:t,refProp:r,children:n})});Gge.displayName="@mantine/core/ComboboxDropdownTarget";const D7e={},eW=Bt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=dt("ComboboxEmpty",D7e,e),u=up();return R.jsx(He,{ref:t,...u.getStyles("empty",{className:r,classNames:n,styles:s,style:i}),...a})});eW.classes=nd;eW.displayName="@mantine/core/ComboboxEmpty";function tW({onKeyDown:e,withKeyboardNavigation:t,withAriaAttributes:n,withExpandedAttribute:r,targetType:i,autoComplete:s}){const o=up(),[a,u]=z.useState(null),l=f=>{if(e==null||e(f),!o.readOnly&&t){if(f.nativeEvent.isComposing)return;if(f.nativeEvent.code==="ArrowDown"&&(f.preventDefault(),o.store.dropdownOpened?u(o.store.selectNextOption()):(o.store.openDropdown("keyboard"),u(o.store.selectActiveOption()),o.store.updateSelectedOptionIndex("selected",{scrollIntoView:!0}))),f.nativeEvent.code==="ArrowUp"&&(f.preventDefault(),o.store.dropdownOpened?u(o.store.selectPreviousOption()):(o.store.openDropdown("keyboard"),u(o.store.selectActiveOption()),o.store.updateSelectedOptionIndex("selected",{scrollIntoView:!0}))),f.nativeEvent.code==="Enter"||f.nativeEvent.code==="NumpadEnter"){if(f.nativeEvent.keyCode===229)return;const d=o.store.getSelectedOptionIndex();o.store.dropdownOpened&&d!==-1?(f.preventDefault(),o.store.clickSelectedOption()):i==="button"&&(f.preventDefault(),o.store.openDropdown("keyboard"))}f.nativeEvent.code==="Escape"&&o.store.closeDropdown("keyboard"),f.nativeEvent.code==="Space"&&i==="button"&&(f.preventDefault(),o.store.toggleDropdown("keyboard"))}};return{...n?{"aria-haspopup":"listbox","aria-expanded":r&&!!(o.store.listId&&o.store.dropdownOpened)||void 0,"aria-controls":o.store.dropdownOpened?o.store.listId:void 0,"aria-activedescendant":o.store.dropdownOpened&&a||void 0,autoComplete:s,"data-expanded":o.store.dropdownOpened||void 0,"data-mantine-stop-propagation":o.store.dropdownOpened||void 0}:{},onKeyDown:l}}const O7e={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},Yge=Bt((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:u,...l}=dt("ComboboxEventsTarget",O7e,e);if(!Lb(n))throw new Error("Combobox.EventsTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=up(),f=tW({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:u});return z.cloneElement(n,{...f,...l,[r]:yu(t,c.store.targetRef,OO(n))})});Yge.displayName="@mantine/core/ComboboxEventsTarget";const M7e={},nW=Bt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=dt("ComboboxFooter",M7e,e),u=up();return R.jsx(He,{ref:t,...u.getStyles("footer",{className:r,classNames:n,style:i,styles:s}),...a,onMouseDown:l=>{l.preventDefault()}})});nW.classes=nd;nW.displayName="@mantine/core/ComboboxFooter";const L7e={},rW=Bt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,label:u,...l}=dt("ComboboxGroup",L7e,e),c=up();return R.jsxs(He,{ref:t,...c.getStyles("group",{className:r,classNames:n,style:i,styles:s}),...l,children:[u&&R.jsx("div",{...c.getStyles("groupLabel",{classNames:n,styles:s}),children:u}),a]})});rW.classes=nd;rW.displayName="@mantine/core/ComboboxGroup";const F7e={},iW=Bt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=dt("ComboboxHeader",F7e,e),u=up();return R.jsx(He,{ref:t,...u.getStyles("header",{className:r,classNames:n,style:i,styles:s}),...a,onMouseDown:l=>{l.preventDefault()}})});iW.classes=nd;iW.displayName="@mantine/core/ComboboxHeader";function Kge({value:e,valuesDivider:t=",",...n}){return R.jsx("input",{type:"hidden",value:Array.isArray(e)?e.join(t):e||"",...n})}Kge.displayName="@mantine/core/ComboboxHiddenInput";const $7e={},sW=Bt((e,t)=>{const n=dt("ComboboxOption",$7e,e),{classNames:r,className:i,style:s,styles:o,vars:a,onClick:u,id:l,active:c,onMouseDown:f,onMouseOver:d,disabled:h,selected:p,mod:m,...g}=n,b=up(),y=z.useId(),x=l||y;return R.jsx(He,{...b.getStyles("option",{className:i,classNames:r,styles:o,style:s}),...g,ref:t,id:x,mod:["combobox-option",{"combobox-active":c,"combobox-disabled":h,"combobox-selected":p},m],role:"option",onClick:w=>{var T;h?w.preventDefault():((T=b.onOptionSubmit)==null||T.call(b,n.value,n),u==null||u(w))},onMouseDown:w=>{w.preventDefault(),f==null||f(w)},onMouseOver:w=>{b.resetSelectionOnOptionHover&&b.store.resetSelectedOption(),d==null||d(w)}})});sW.classes=nd;sW.displayName="@mantine/core/ComboboxOption";const B7e={},oW=Bt((e,t)=>{const n=dt("ComboboxOptions",B7e,e),{classNames:r,className:i,style:s,styles:o,id:a,onMouseDown:u,labelledBy:l,...c}=n,f=up(),d=lf(a);return z.useEffect(()=>{f.store.setListId(d)},[d]),R.jsx(He,{ref:t,...f.getStyles("options",{className:i,style:s,classNames:r,styles:o}),...c,id:d,role:"listbox","aria-labelledby":l,onMouseDown:h=>{h.preventDefault(),u==null||u(h)}})});oW.classes=nd;oW.displayName="@mantine/core/ComboboxOptions";const j7e={withAriaAttributes:!0,withKeyboardNavigation:!0},aW=Bt((e,t)=>{const n=dt("ComboboxSearch",j7e,e),{classNames:r,styles:i,unstyled:s,vars:o,withAriaAttributes:a,onKeyDown:u,withKeyboardNavigation:l,size:c,...f}=n,d=up(),h=d.getStyles("search"),p=tW({targetType:"input",withAriaAttributes:a,withKeyboardNavigation:l,withExpandedAttribute:!1,onKeyDown:u,autoComplete:"off"});return R.jsx(ys,{ref:yu(t,d.store.searchRef),classNames:[{input:h.className},r],styles:[{input:h.style},i],size:c||d.size,...p,...f,__staticSelector:"Combobox"})});aW.classes=nd;aW.displayName="@mantine/core/ComboboxSearch";const U7e={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},Xge=Bt((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:u,...l}=dt("ComboboxTarget",U7e,e);if(!Lb(n))throw new Error("Combobox.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=up(),f=tW({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:u}),d=z.cloneElement(n,{...f,...l});return R.jsx(_l.Target,{ref:yu(t,c.store.targetRef),children:d})});Xge.displayName="@mantine/core/ComboboxTarget";function z7e(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function V7e(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function H7e(e){for(let t=0;t<e.length;t+=1)if(!e[t].hasAttribute("data-combobox-disabled"))return t;return-1}function uW({defaultOpened:e,opened:t,onOpenedChange:n,onDropdownClose:r,onDropdownOpen:i,loop:s=!0,scrollBehavior:o="instant"}={}){const[a,u]=Bu({value:t,defaultValue:e,finalValue:!1,onChange:n}),l=z.useRef(null),c=z.useRef(-1),f=z.useRef(null),d=z.useRef(null),h=z.useRef(-1),p=z.useRef(-1),m=z.useRef(-1),g=z.useCallback((G="unknown")=>{a||(u(!0),i==null||i(G))},[u,i,a]),b=z.useCallback((G="unknown")=>{a&&(u(!1),r==null||r(G))},[u,r,a]),y=z.useCallback((G="unknown")=>{a?b(G):g(G)},[b,g,a]),x=z.useCallback(()=>{const G=document.querySelector(`#${l.current} [data-combobox-selected]`);G==null||G.removeAttribute("data-combobox-selected"),G==null||G.removeAttribute("aria-selected")},[]),w=z.useCallback(G=>{const ee=document.getElementById(l.current),ne=ee==null?void 0:ee.querySelectorAll("[data-combobox-option]");if(!ne)return null;const ue=G>=ne.length?0:G<0?ne.length-1:G;return c.current=ue,ne!=null&&ne[ue]&&!ne[ue].hasAttribute("data-combobox-disabled")?(x(),ne[ue].setAttribute("data-combobox-selected","true"),ne[ue].setAttribute("aria-selected","true"),ne[ue].scrollIntoView({block:"nearest",behavior:o}),ne[ue].id):null},[o,x]),T=z.useCallback(()=>{const G=document.querySelector(`#${l.current} [data-combobox-active]`);if(G){const ee=document.querySelectorAll(`#${l.current} [data-combobox-option]`),ne=Array.from(ee).findIndex(ue=>ue===G);return w(ne)}return w(0)},[w]),A=z.useCallback(()=>w(V7e(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),s)),[w,s]),k=z.useCallback(()=>w(z7e(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),s)),[w,s]),I=z.useCallback(()=>w(H7e(document.querySelectorAll(`#${l.current} [data-combobox-option]`))),[w]),O=z.useCallback((G="selected",ee)=>{m.current=window.setTimeout(()=>{var X;const ne=document.querySelectorAll(`#${l.current} [data-combobox-option]`),ue=Array.from(ne).findIndex(q=>q.hasAttribute(`data-combobox-${G}`));c.current=ue,ee!=null&&ee.scrollIntoView&&((X=ne[ue])==null||X.scrollIntoView({block:"nearest",behavior:o}))},0)},[]),M=z.useCallback(()=>{c.current=-1,x()},[x]),L=z.useCallback(()=>{const G=document.querySelectorAll(`#${l.current} [data-combobox-option]`),ee=G==null?void 0:G[c.current];ee==null||ee.click()},[]),H=z.useCallback(G=>{l.current=G},[]),D=z.useCallback(()=>{h.current=window.setTimeout(()=>f.current.focus(),0)},[]),B=z.useCallback(()=>{p.current=window.setTimeout(()=>d.current.focus(),0)},[]),U=z.useCallback(()=>c.current,[]);return z.useEffect(()=>()=>{window.clearTimeout(h.current),window.clearTimeout(p.current),window.clearTimeout(m.current)},[]),{dropdownOpened:a,openDropdown:g,closeDropdown:b,toggleDropdown:y,selectedOptionIndex:c.current,getSelectedOptionIndex:U,selectOption:w,selectFirstOption:I,selectActiveOption:T,selectNextOption:A,selectPreviousOption:k,resetSelectedOption:M,updateSelectedOptionIndex:O,listId:l.current,setListId:H,clickSelectedOption:L,searchRef:f,focusSearchInput:D,targetRef:d,focusTarget:B}}const q7e={keepMounted:!0,withinPortal:!0,resetSelectionOnOptionHover:!1,width:"target",transitionProps:{transition:"fade",duration:0}},W7e=(e,{size:t,dropdownPadding:n})=>({options:{"--combobox-option-fz":xl(t),"--combobox-option-padding":_r(t,"combobox-option-padding")},dropdown:{"--combobox-padding":n===void 0?void 0:ot(n),"--combobox-option-fz":xl(t),"--combobox-option-padding":_r(t,"combobox-option-padding")}});function di(e){const t=dt("Combobox",q7e,e),{classNames:n,styles:r,unstyled:i,children:s,store:o,vars:a,onOptionSubmit:u,onClose:l,size:c,dropdownPadding:f,resetSelectionOnOptionHover:d,__staticSelector:h,readOnly:p,...m}=t,g=uW(),b=o||g,y=xn({name:h||"Combobox",classes:nd,props:t,classNames:n,styles:r,unstyled:i,vars:a,varsResolver:W7e}),x=()=>{l==null||l(),b.closeDropdown()};return R.jsx(I7e,{value:{getStyles:y,store:b,onOptionSubmit:u,size:c,resetSelectionOnOptionHover:d,readOnly:p},children:R.jsx(_l,{opened:b.dropdownOpened,...m,onChange:w=>!w&&x(),withRoles:!1,unstyled:i,children:s})})}const G7e=e=>e;di.extend=G7e;di.classes=nd;di.displayName="@mantine/core/Combobox";di.Target=Xge;di.Dropdown=Zq;di.Options=oW;di.Option=sW;di.Search=aW;di.Empty=eW;di.Chevron=Jq;di.Footer=nW;di.Header=iW;di.EventsTarget=Yge;di.DropdownTarget=Gge;di.Group=rW;di.ClearButton=Wge;di.HiddenInput=Kge;var Qge={root:"m_5f75b09e",body:"m_5f6e695e",labelWrapper:"m_d3ea56bb",label:"m_8ee546b8",description:"m_328f68c0",error:"m_8e8a99cc"};const Jge=Qge,GO=z.forwardRef(({__staticSelector:e,__stylesApiProps:t,className:n,classNames:r,styles:i,unstyled:s,children:o,label:a,description:u,id:l,disabled:c,error:f,size:d,labelPosition:h="left",bodyElement:p="div",labelElement:m="label",variant:g,style:b,vars:y,mod:x,...w},T)=>{const A=xn({name:e,props:t,className:n,style:b,classes:Qge,classNames:r,styles:i,unstyled:s});return R.jsx(He,{...A("root"),ref:T,__vars:{"--label-fz":xl(d),"--label-lh":_r(d,"label-lh")},mod:[{"label-position":h},x],variant:g,size:d,...w,children:R.jsxs(He,{component:p,htmlFor:p==="label"?l:void 0,...A("body"),children:[o,R.jsxs("div",{...A("labelWrapper"),"data-disabled":c||void 0,children:[a&&R.jsx(He,{component:m,htmlFor:m==="label"?l:void 0,...A("label"),"data-disabled":c||void 0,children:a}),u&&R.jsx(ys.Description,{size:d,__inheritStyles:!1,...A("description"),children:u}),f&&typeof f!="boolean"&&R.jsx(ys.Error,{size:d,__inheritStyles:!1,...A("error"),children:f})]})]})})});GO.displayName="@mantine/core/InlineInput";const Zge=z.createContext(null),Y7e=Zge.Provider,eye=()=>z.useContext(Zge),[K7e,X7e]=Fb();var tye={card:"m_26775b0a"};const Q7e={withBorder:!0},J7e=(e,{radius:t})=>({card:{"--card-radius":as(t)}}),lW=Bt((e,t)=>{const n=dt("CheckboxCard",Q7e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,checked:l,mod:c,withBorder:f,value:d,onClick:h,defaultChecked:p,onChange:m,...g}=n,b=xn({name:"CheckboxCard",classes:tye,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:J7e,rootSelector:"card"}),y=eye(),x=typeof l=="boolean"?l:y?y.value.includes(d||""):void 0,[w,T]=Bu({value:x,defaultValue:p,finalValue:!1,onChange:m});return R.jsx(K7e,{value:{checked:w},children:R.jsx(rh,{ref:t,mod:[{"with-border":f,checked:w},c],...b("card"),...g,role:"checkbox","aria-checked":w,onClick:A=>{h==null||h(A),y==null||y.onChange(d||""),T(!w)}})})});lW.displayName="@mantine/core/CheckboxCard";lW.classes=tye;function cW({children:e,role:t}){const n=mT();return n?R.jsx("div",{role:t,"aria-labelledby":n.labelId,"aria-describedby":n.describedBy,children:e}):R.jsx(R.Fragment,{children:e})}const Z7e={},fW=Bt((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:u,...l}=dt("CheckboxGroup",Z7e,e),[c,f]=Bu({value:n,defaultValue:r,finalValue:[],onChange:i}),d=h=>{const p=typeof h=="string"?h:h.currentTarget.value;!u&&f(c.includes(p)?c.filter(m=>m!==p):[...c,p])};return R.jsx(Y7e,{value:{value:c,onChange:d,size:s},children:R.jsx(ys.Wrapper,{size:s,ref:t,...o,...l,labelElement:"div",__staticSelector:"CheckboxGroup",children:R.jsx(cW,{role:"group",children:a})})})});fW.classes=ys.Wrapper.classes;fW.displayName="@mantine/core/CheckboxGroup";function nye({size:e,style:t,...n}){const r=e!==void 0?{width:ot(e),height:ot(e),...t}:t;return R.jsx("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:r,"aria-hidden":!0,...n,children:R.jsx("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function rye({indeterminate:e,...t}){return e?R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 6","aria-hidden":!0,...t,children:R.jsx("rect",{width:"32",height:"6",fill:"currentColor",rx:"3"})}):R.jsx(nye,{...t})}var iye={indicator:"m_5e5256ee",icon:"m_1b1c543a","indicator--outline":"m_76e20374"};const eFe={icon:rye},tFe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=yg({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--checkbox-size":_r(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:as(t),"--checkbox-color":s==="outline"?u:Fs(n,e),"--checkbox-icon-color":i?Fs(i,e):lT(o,e)?Ew({color:n,theme:e,autoContrast:o}):void 0}}},dW=Bt((e,t)=>{const n=dt("CheckboxIndicator",eFe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,icon:l,indeterminate:c,radius:f,color:d,iconColor:h,autoContrast:p,checked:m,mod:g,variant:b,disabled:y,...x}=n,w=l,T=xn({name:"CheckboxIndicator",classes:iye,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:tFe,rootSelector:"indicator"}),A=X7e(),k=typeof m=="boolean"||typeof c=="boolean"?m||c:(A==null?void 0:A.checked)||!1;return R.jsx(He,{ref:t,...T("indicator",{variant:b}),variant:b,mod:[{checked:k,disabled:y},g],...x,children:R.jsx(w,{indeterminate:c,...T("icon")})})});dW.displayName="@mantine/core/CheckboxIndicator";dW.classes=iye;var sye={root:"m_bf2d988c",inner:"m_26062bec",input:"m_26063560",icon:"m_bf295423","input--outline":"m_215c4542"};const nFe={labelPosition:"right",icon:rye},rFe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=yg({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--checkbox-size":_r(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:as(t),"--checkbox-color":s==="outline"?u:Fs(n,e),"--checkbox-icon-color":i?Fs(i,e):lT(o,e)?Ew({color:n,theme:e,autoContrast:o}):void 0}}},nc=Bt((e,t)=>{const n=dt("Checkbox",nFe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,label:c,id:f,size:d,radius:h,wrapperProps:p,checked:m,labelPosition:g,description:b,error:y,disabled:x,variant:w,indeterminate:T,icon:A,rootRef:k,iconColor:I,onChange:O,autoContrast:M,mod:L,...H}=n,D=eye(),B=d||(D==null?void 0:D.size),U=A,G=xn({name:"Checkbox",props:n,classes:sye,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:rFe}),{styleProps:ee,rest:ne}=Cw(H),ue=lf(f),X=D?{checked:D.value.includes(ne.value),onChange:q=>{D.onChange(q),O==null||O(q)}}:{};return R.jsx(GO,{...G("root"),__staticSelector:"Checkbox",__stylesApiProps:n,id:ue,size:B,labelPosition:g,label:c,description:b,error:y,disabled:x,classNames:r,styles:o,unstyled:a,"data-checked":X.checked||m||void 0,variant:w,ref:k,mod:L,...ee,...p,children:R.jsxs(He,{...G("inner"),mod:{"data-label-position":g},children:[R.jsx(He,{component:"input",id:ue,ref:t,checked:m,disabled:x,mod:{error:!!y,indeterminate:T},...G("input",{focusable:!0,variant:w}),onChange:O,...ne,...X,type:"checkbox"}),R.jsx(U,{indeterminate:T,...G("icon")})]})})});nc.classes={...sye,...Jge};nc.displayName="@mantine/core/Checkbox";nc.Group=fW;nc.Indicator=dW;nc.Card=lW;function hS(e){return"group"in e}function oye({options:e,search:t,limit:n}){const r=t.trim().toLowerCase(),i=[];for(let s=0;s<e.length;s+=1){const o=e[s];if(i.length===n)return i;hS(o)&&i.push({group:o.group,items:oye({options:o.items,search:t,limit:n-i.length})}),hS(o)||o.label.toLowerCase().includes(r)&&i.push(o)}return i}function iFe(e){if(e.length===0)return!0;for(const t of e)if(!("group"in t)||t.items.length>0)return!1;return!0}function aye(e,t=new Set){if(Array.isArray(e))for(const n of e)if(hS(n))aye(n.items,t);else{if(typeof n.value>"u")throw new Error("[@mantine/core] Each option must have value property");if(typeof n.value!="string")throw new Error(`[@mantine/core] Option value must be a string, other data formats are not supported, got ${typeof n.value}`);if(t.has(n.value))throw new Error(`[@mantine/core] Duplicate options are not supported. Option with value "${n.value}" was provided more than once`);t.add(n.value)}}function sFe(e,t){return Array.isArray(e)?e.includes(t):e===t}function uye({data:e,withCheckIcon:t,value:n,checkIconPosition:r,unstyled:i,renderOption:s}){if(!hS(e)){const a=sFe(n,e.value),u=t&&a&&R.jsx(nye,{className:nd.optionsDropdownCheckIcon}),l=R.jsxs(R.Fragment,{children:[r==="left"&&u,R.jsx("span",{children:e.label}),r==="right"&&u]});return R.jsx(di.Option,{value:e.value,disabled:e.disabled,className:va({[nd.optionsDropdownOption]:!i}),"data-reverse":r==="right"||void 0,"data-checked":a||void 0,"aria-selected":a,active:a,children:typeof s=="function"?s({option:e,checked:a}):l})}const o=e.items.map(a=>R.jsx(uye,{data:a,value:n,unstyled:i,withCheckIcon:t,checkIconPosition:r,renderOption:s},a.value));return R.jsx(di.Group,{label:e.group,children:o})}function lye({data:e,hidden:t,hiddenWhenEmpty:n,filter:r,search:i,limit:s,maxDropdownHeight:o,withScrollArea:a=!0,filterOptions:u=!0,withCheckIcon:l=!1,value:c,checkIconPosition:f,nothingFoundMessage:d,unstyled:h,labelId:p,renderOption:m,scrollAreaProps:g,"aria-label":b}){aye(e);const x=typeof i=="string"?(r||oye)({options:e,search:u?i:"",limit:s??1/0}):e,w=iFe(x),T=x.map(A=>R.jsx(uye,{data:A,withCheckIcon:l,value:c,checkIconPosition:f,unstyled:h,renderOption:m},hS(A)?A.group:A.value));return R.jsx(di.Dropdown,{hidden:t||n&&w,children:R.jsxs(di.Options,{labelledBy:p,"aria-label":b,children:[a?R.jsx(o1.Autosize,{mah:o??220,type:"scroll",scrollbarSize:"var(--combobox-padding)",offsetScrollbars:"y",...g,children:T}):T,w&&d&&R.jsx(di.Empty,{children:d})]})})}var cye={root:"m_347db0ec","root--dot":"m_fbd81e3d",label:"m_5add502a",section:"m_91fdda9b"};const oFe={},aFe=(e,{radius:t,color:n,gradient:r,variant:i,size:s,autoContrast:o})=>{const a=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:o});return{root:{"--badge-height":_r(s,"badge-height"),"--badge-padding-x":_r(s,"badge-padding-x"),"--badge-fz":_r(s,"badge-fz"),"--badge-radius":t===void 0?void 0:as(t),"--badge-bg":n||i?a.background:void 0,"--badge-color":n||i?a.color:void 0,"--badge-bd":n||i?a.border:void 0,"--badge-dot-color":i==="dot"?Fs(n,e):void 0}}},g0=Ga((e,t)=>{const n=dt("Badge",oFe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,radius:l,color:c,gradient:f,leftSection:d,rightSection:h,children:p,variant:m,fullWidth:g,autoContrast:b,circle:y,mod:x,...w}=n,T=xn({name:"Badge",props:n,classes:cye,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:aFe});return R.jsxs(He,{variant:m,mod:[{block:g,circle:y,"with-right-section":!!h,"with-left-section":!!d},x],...T("root",{variant:m}),ref:t,...w,children:[d&&R.jsx("span",{...T("section"),"data-position":"left",children:d}),R.jsx("span",{...T("label"),children:p}),h&&R.jsx("span",{...T("section"),"data-position":"right",children:h})]})});g0.classes=cye;g0.displayName="@mantine/core/Badge";var yT={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844",groupSection:"m_70be2a01"};const hne={orientation:"horizontal"},uFe=(e,{borderWidth:t})=>({group:{"--button-border-width":ot(t)}}),hW=Bt((e,t)=>{const n=dt("ButtonGroup",hne,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:f,mod:d,...h}=dt("ButtonGroup",hne,e),p=xn({name:"ButtonGroup",props:n,classes:yT,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:uFe,rootSelector:"group"});return R.jsx(He,{...p("group"),ref:t,variant:f,mod:[{"data-orientation":u},d],role:"group",...h})});hW.classes=yT;hW.displayName="@mantine/core/ButtonGroup";const pne={},lFe=(e,{radius:t,color:n,gradient:r,variant:i,autoContrast:s,size:o})=>{const a=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:s});return{groupSection:{"--section-height":_r(o,"section-height"),"--section-padding-x":_r(o,"section-padding-x"),"--section-fz":o!=null&&o.includes("compact")?xl(o.replace("compact-","")):xl(o),"--section-radius":t===void 0?void 0:as(t),"--section-bg":n||i?a.background:void 0,"--section-color":a.color,"--section-bd":n||i?a.border:void 0}}},pW=Bt((e,t)=>{const n=dt("ButtonGroupSection",pne,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,vars:u,variant:l,gradient:c,radius:f,autoContrast:d,...h}=dt("ButtonGroupSection",pne,e),p=xn({name:"ButtonGroupSection",props:n,classes:yT,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:u,varsResolver:lFe,rootSelector:"groupSection"});return R.jsx(He,{...p("groupSection"),ref:t,variant:l,...h})});pW.classes=yT;pW.displayName="@mantine/core/ButtonGroupSection";const cFe={in:{opacity:1,transform:`translate(-50%, calc(-50% + ${ot(1)}))`},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},fFe={},dFe=(e,{radius:t,color:n,gradient:r,variant:i,size:s,justify:o,autoContrast:a})=>{const u=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:a});return{root:{"--button-justify":o,"--button-height":_r(s,"button-height"),"--button-padding-x":_r(s,"button-padding-x"),"--button-fz":s!=null&&s.includes("compact")?xl(s.replace("compact-","")):xl(s),"--button-radius":t===void 0?void 0:as(t),"--button-bg":n||i?u.background:void 0,"--button-hover":n||i?u.hover:void 0,"--button-color":u.color,"--button-bd":n||i?u.border:void 0,"--button-hover-color":n||i?u.hoverColor:void 0}}},Bn=Ga((e,t)=>{const n=dt("Button",fFe,e),{style:r,vars:i,className:s,color:o,disabled:a,children:u,leftSection:l,rightSection:c,fullWidth:f,variant:d,radius:h,loading:p,loaderProps:m,gradient:g,classNames:b,styles:y,unstyled:x,"data-disabled":w,autoContrast:T,mod:A,...k}=n,I=xn({name:"Button",props:n,classes:yT,className:s,style:r,classNames:b,styles:y,unstyled:x,vars:i,varsResolver:dFe}),O=!!l,M=!!c;return R.jsxs(rh,{ref:t,...I("root",{active:!a&&!p&&!w}),unstyled:x,variant:d,disabled:a||p,mod:[{disabled:a||w,loading:p,block:f,"with-left-section":O,"with-right-section":M},A],...k,children:[R.jsx(vg,{mounted:!!p,transition:cFe,duration:150,children:L=>R.jsx(He,{component:"span",...I("loader",{style:L}),"aria-hidden":!0,children:R.jsx(bg,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...m})})}),R.jsxs("span",{...I("inner"),children:[l&&R.jsx(He,{component:"span",...I("section"),mod:{position:"left"},children:l}),R.jsx(He,{component:"span",mod:{loading:p},...I("label"),children:u}),c&&R.jsx(He,{component:"span",...I("section"),mod:{position:"right"},children:c})]})]})});Bn.classes=yT;Bn.displayName="@mantine/core/Button";Bn.Group=hW;Bn.GroupSection=pW;const[hFe,pFe]=Al("Card component was not found in tree");var mW={root:"m_e615b15f",section:"m_599a2148"};const mFe={},YO=Ga((e,t)=>{const n=dt("CardSection",mFe,e),{classNames:r,className:i,style:s,styles:o,vars:a,withBorder:u,inheritPadding:l,mod:c,...f}=n,d=pFe();return R.jsx(He,{ref:t,mod:[{"with-border":u,"inherit-padding":l},c],...d.getStyles("section",{className:i,style:s,styles:o,classNames:r}),...f})});YO.classes=mW;YO.displayName="@mantine/core/CardSection";const gFe={},yFe=(e,{padding:t})=>({root:{"--card-padding":Ha(t)}}),vT=Ga((e,t)=>{const n=dt("Card",gFe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,padding:c,...f}=n,d=xn({name:"Card",props:n,classes:mW,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:yFe}),h=z.Children.toArray(l),p=h.map((m,g)=>typeof m=="object"&&m&&"type"in m&&m.type===YO?z.cloneElement(m,{"data-first-section":g===0||void 0,"data-last-section":g===h.length-1||void 0}):m);return R.jsx(hFe,{value:{getStyles:d},children:R.jsx(cT,{ref:t,unstyled:a,...d("root"),...f,children:p})})});vT.classes=mW;vT.displayName="@mantine/core/Card";vT.Section=YO;var fye={root:"m_4451eb3a"};const vFe={},u1=Ga((e,t)=>{const n=dt("Center",vFe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,inline:l,mod:c,...f}=n,d=xn({name:"Center",props:n,classes:fye,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u});return R.jsx(He,{ref:t,mod:[{inline:l},c],...d("root"),...f})});u1.classes=fye;u1.displayName="@mantine/core/Center";var dye={root:"m_b183c0a2"};const bFe={},xFe=(e,{color:t})=>({root:{"--code-bg":t?Fs(t,e):void 0}}),ak=Bt((e,t)=>{const n=dt("Code",bFe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,block:c,variant:f,mod:d,...h}=n,p=xn({name:"Code",props:n,classes:dye,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:xFe});return R.jsx(He,{component:c?"pre":"code",variant:f,ref:t,mod:[{block:c},d],...p("root"),...h,dir:"ltr"})});ak.classes=dye;ak.displayName="@mantine/core/Code";var hye={root:"m_de3d2490",colorOverlay:"m_862f3d1b",shadowOverlay:"m_98ae7f22",alphaOverlay:"m_95709ac0",childrenOverlay:"m_93e74e3"};const mne={withShadow:!0},_Fe=(e,{radius:t,size:n})=>({root:{"--cs-radius":t===void 0?void 0:as(t),"--cs-size":ot(n)}}),gW=Ga((e,t)=>{const n=dt("ColorSwatch",mne,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,size:c,radius:f,withShadow:d,children:h,variant:p,...m}=dt("ColorSwatch",mne,n),g=xn({name:"ColorSwatch",props:n,classes:hye,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:_Fe});return R.jsxs(He,{ref:t,variant:p,size:c,...g("root",{focusable:!0}),...m,children:[R.jsx("span",{...g("alphaOverlay")}),d&&R.jsx("span",{...g("shadowOverlay")}),R.jsx("span",{...g("colorOverlay",{style:{backgroundColor:l}})}),R.jsx("span",{...g("childrenOverlay"),children:h})]})});gW.classes=hye;gW.displayName="@mantine/core/ColorSwatch";var pye={root:"m_7485cace"};const wFe={},EFe=(e,{size:t,fluid:n})=>({root:{"--container-size":n?void 0:_r(t,"container-size")}}),l1=Bt((e,t)=>{const n=dt("Container",wFe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,fluid:l,mod:c,...f}=n,d=xn({name:"Container",classes:pye,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:EFe});return R.jsx(He,{ref:t,mod:[{fluid:l},c],...d("root"),...f})});l1.classes=pye;l1.displayName="@mantine/core/Container";var mye={root:"m_3eebeb36",label:"m_9e365f20"};const SFe={orientation:"horizontal"},TFe=(e,{color:t,variant:n,size:r})=>({root:{"--divider-color":t?Fs(t,e):void 0,"--divider-border-style":n,"--divider-size":_r(r,"divider-size")}}),jm=Bt((e,t)=>{const n=dt("Divider",SFe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,orientation:c,label:f,labelPosition:d,mod:h,...p}=n,m=xn({name:"Divider",classes:mye,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:TFe});return R.jsx(He,{ref:t,mod:[{orientation:c,"with-label":!!f},h],...m("root"),...p,role:"separator",children:f&&R.jsx(He,{component:"span",mod:{position:d},...m("label"),children:f})})});jm.classes=mye;jm.displayName="@mantine/core/Divider";function CFe({open:e,close:t,openDelay:n,closeDelay:r}){const i=z.useRef(-1),s=z.useRef(-1),o=()=>{window.clearTimeout(i.current),window.clearTimeout(s.current)},a=()=>{o(),n===0||n===void 0?e():i.current=window.setTimeout(e,n)},u=()=>{o(),r===0||r===void 0?t():s.current=window.setTimeout(t,r)};return z.useEffect(()=>o,[]),{openDropdown:a,closeDropdown:u}}const[gne,gye]=Al("Grid component was not found in tree"),sU=(e,t)=>e==="content"?"auto":e==="auto"?"0rem":e?`${100/(t/e)}%`:void 0,yne=(e,t,n)=>n||e==="auto"?"100%":e==="content"?"unset":sU(e,t),vne=(e,t)=>{if(e)return e==="auto"||t?"1":"auto"},bne=(e,t)=>e===0?"0":e?`${100/(t/e)}%`:void 0;function AFe({span:e,order:t,offset:n,selector:r}){var h;const i=Wa(),s=gye(),o=s.breakpoints||i.breakpoints,u=c0(e)===void 0?12:c0(e),l=Mb({"--col-order":(h=c0(t))==null?void 0:h.toString(),"--col-flex-grow":vne(u,s.grow),"--col-flex-basis":sU(u,s.columns),"--col-width":u==="content"?"auto":void 0,"--col-max-width":yne(u,s.columns,s.grow),"--col-offset":bne(c0(n),s.columns)}),c=Cs(o).reduce((p,m)=>{var g;return p[m]||(p[m]={}),typeof t=="object"&&t[m]!==void 0&&(p[m]["--col-order"]=(g=t[m])==null?void 0:g.toString()),typeof e=="object"&&e[m]!==void 0&&(p[m]["--col-flex-grow"]=vne(e[m],s.grow),p[m]["--col-flex-basis"]=sU(e[m],s.columns),p[m]["--col-width"]=e[m]==="content"?"auto":void 0,p[m]["--col-max-width"]=yne(e[m],s.columns,s.grow)),typeof n=="object"&&n[m]!==void 0&&(p[m]["--col-offset"]=bne(n[m],s.columns)),p},{}),d=Uk(Cs(c),o).filter(p=>Cs(c[p.value]).length>0).map(p=>({query:s.type==="container"?`mantine-grid (min-width: ${o[p.value]})`:`(min-width: ${o[p.value]})`,styles:c[p.value]}));return R.jsx(Tw,{styles:l,media:s.type==="container"?void 0:d,container:s.type==="container"?d:void 0,selector:r})}var yW={container:"m_8478a6da",root:"m_410352e9",inner:"m_dee7bd2f",col:"m_96bdd299"};const kFe={span:12},vW=Bt((e,t)=>{const n=dt("GridCol",kFe,e),{classNames:r,className:i,style:s,styles:o,vars:a,span:u,order:l,offset:c,...f}=n,d=gye(),h=tR();return R.jsxs(R.Fragment,{children:[R.jsx(AFe,{selector:`.${h}`,span:u,order:l,offset:c}),R.jsx(He,{ref:t,...d.getStyles("col",{className:va(i,h),style:s,classNames:r,styles:o}),...f})]})});vW.classes=yW;vW.displayName="@mantine/core/GridCol";function xne({gutter:e,selector:t,breakpoints:n,type:r}){const i=Wa(),s=n||i.breakpoints,o=Mb({"--grid-gutter":Ha(c0(e))}),a=Cs(s).reduce((c,f)=>(c[f]||(c[f]={}),typeof e=="object"&&e[f]!==void 0&&(c[f]["--grid-gutter"]=Ha(e[f])),c),{}),l=Uk(Cs(a),s).filter(c=>Cs(a[c.value]).length>0).map(c=>({query:r==="container"?`mantine-grid (min-width: ${s[c.value]})`:`(min-width: ${s[c.value]})`,styles:a[c.value]}));return R.jsx(Tw,{styles:o,media:r==="container"?void 0:l,container:r==="container"?l:void 0,selector:t})}const RFe={gutter:"md",grow:!1,columns:12},IFe=(e,{justify:t,align:n,overflow:r})=>({root:{"--grid-justify":t,"--grid-align":n,"--grid-overflow":r}}),Dm=Bt((e,t)=>{const n=dt("Grid",RFe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,grow:l,gutter:c,columns:f,align:d,justify:h,children:p,breakpoints:m,type:g,...b}=n,y=xn({name:"Grid",classes:yW,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:IFe}),x=tR();return g==="container"&&m?R.jsxs(gne,{value:{getStyles:y,grow:l,columns:f||12,breakpoints:m,type:g},children:[R.jsx(xne,{selector:`.${x}`,...n}),R.jsx("div",{...y("container"),children:R.jsx(He,{ref:t,...y("root",{className:x}),...b,children:R.jsx("div",{...y("inner"),children:p})})})]}):R.jsxs(gne,{value:{getStyles:y,grow:l,columns:f||12,breakpoints:m,type:g},children:[R.jsx(xne,{selector:`.${x}`,...n}),R.jsx(He,{ref:t,...y("root",{className:x}),...b,children:R.jsx("div",{...y("inner"),children:p})})]})});Dm.classes=yW;Dm.displayName="@mantine/core/Grid";Dm.Col=vW;var yye={root:"m_9e117634"};const PFe={},NFe=(e,{radius:t,fit:n})=>({root:{"--image-radius":t===void 0?void 0:as(t),"--image-object-fit":n}}),Hb=Ga((e,t)=>{const n=dt("Image",PFe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,onError:l,src:c,radius:f,fit:d,fallbackSrc:h,mod:p,...m}=n,[g,b]=z.useState(!c);z.useEffect(()=>b(!c),[c]);const y=xn({name:"Image",classes:yye,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:NFe});return g&&h?R.jsx(He,{component:"img",ref:t,src:h,...y("root"),onError:l,mod:["fallback",p],...m}):R.jsx(He,{component:"img",ref:t,...y("root"),src:c,onError:x=>{l==null||l(x),b(!0)},mod:p,...m})});Hb.classes=yye;Hb.displayName="@mantine/core/Image";function oU(){return oU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},oU.apply(null,arguments)}function DFe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var OFe=z.useLayoutEffect,MFe=function(t){var n=z.useRef(t);return OFe(function(){n.current=t}),n},_ne=function(t,n){if(typeof t=="function"){t(n);return}t.current=n},LFe=function(t,n){var r=z.useRef();return z.useCallback(function(i){t.current=i,r.current&&_ne(r.current,null),r.current=n,n&&_ne(n,i)},[n])},wne={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0",display:"block"},FFe=function(t){Object.keys(wne).forEach(function(n){t.style.setProperty(n,wne[n],"important")})},Ene=FFe,Uc=null,Sne=function(t,n){var r=t.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function $Fe(e,t,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),Uc||(Uc=document.createElement("textarea"),Uc.setAttribute("tabindex","-1"),Uc.setAttribute("aria-hidden","true"),Ene(Uc)),Uc.parentNode===null&&document.body.appendChild(Uc);var i=e.paddingSize,s=e.borderSize,o=e.sizingStyle,a=o.boxSizing;Object.keys(o).forEach(function(d){var h=d;Uc.style[h]=o[h]}),Ene(Uc),Uc.value=t;var u=Sne(Uc,e);Uc.value=t,u=Sne(Uc,e),Uc.value="x";var l=Uc.scrollHeight-i,c=l*n;a==="border-box"&&(c=c+i+s),u=Math.max(c,u);var f=l*r;return a==="border-box"&&(f=f+i+s),u=Math.min(f,u),[u,l]}var Tne=function(){},BFe=function(t,n){return t.reduce(function(r,i){return r[i]=n[i],r},{})},jFe=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak","wordSpacing","scrollbarGutter"],UFe=!!document.documentElement.currentStyle,zFe=function(t){var n=window.getComputedStyle(t);if(n===null)return null;var r=BFe(jFe,n),i=r.boxSizing;if(i==="")return null;UFe&&i==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var s=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),o=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:s,borderSize:o}},VFe=zFe;function vye(e,t,n){var r=MFe(n);z.useLayoutEffect(function(){var i=function(o){return r.current(o)};if(e)return e.addEventListener(t,i),function(){return e.removeEventListener(t,i)}},[])}var HFe=function(t){vye(window,"resize",t)},qFe=function(t){vye(document.fonts,"loadingdone",t)},WFe=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],GFe=function(t,n){var r=t.cacheMeasurements,i=t.maxRows,s=t.minRows,o=t.onChange,a=o===void 0?Tne:o,u=t.onHeightChange,l=u===void 0?Tne:u,c=DFe(t,WFe),f=c.value!==void 0,d=z.useRef(null),h=LFe(d,n),p=z.useRef(0),m=z.useRef(),g=function(){var x=d.current,w=r&&m.current?m.current:VFe(x);if(w){m.current=w;var T=$Fe(w,x.value||x.placeholder||"x",s,i),A=T[0],k=T[1];p.current!==A&&(p.current=A,x.style.setProperty("height",A+"px","important"),l(A,{rowHeight:k}))}},b=function(x){f||g(),a(x)};return z.useLayoutEffect(g),HFe(g),qFe(g),z.createElement("textarea",oU({},c,{onChange:b,ref:h}))},YFe=z.forwardRef(GFe);const KFe={},bW=Bt((e,t)=>{const{autosize:n,maxRows:r,minRows:i,__staticSelector:s,resize:o,...a}=dt("Textarea",KFe,e),u=n&&ZDe()!=="test",l=u?{maxRows:r,minRows:i}:{};return R.jsx(ap,{component:u?YFe:"textarea",ref:t,...a,__staticSelector:s||"Textarea",multiline:!0,"data-no-overflow":n&&r===void 0||void 0,__vars:{"--input-resize":o},...l})});bW.classes=ap.classes;bW.displayName="@mantine/core/Textarea";const[XFe,QFe]=Al("List component was not found in tree");var xW={root:"m_abbac491",item:"m_abb6bec2",itemWrapper:"m_75cd9f71",itemIcon:"m_60f83e5b"};const JFe={},_W=Bt((e,t)=>{const n=dt("ListItem",JFe,e),{classNames:r,className:i,style:s,styles:o,vars:a,icon:u,children:l,mod:c,...f}=n,d=QFe(),h=u||d.icon,p={classNames:r,styles:o};return R.jsx(He,{...d.getStyles("item",{...p,className:i,style:s}),component:"li",mod:[{"with-icon":!!h,centered:d.center},c],ref:t,...f,children:R.jsxs("div",{...d.getStyles("itemWrapper",p),children:[h&&R.jsx("span",{...d.getStyles("itemIcon",p),children:h}),R.jsx("span",{...d.getStyles("itemLabel",p),children:l})]})})});_W.classes=xW;_W.displayName="@mantine/core/ListItem";const ZFe={type:"unordered"},e$e=(e,{size:t,spacing:n})=>({root:{"--list-fz":xl(t),"--list-lh":yme(t),"--list-spacing":Ha(n)}}),y0=Bt((e,t)=>{const n=dt("List",ZFe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,type:c,withPadding:f,icon:d,spacing:h,center:p,listStyleType:m,mod:g,...b}=n,y=xn({name:"List",classes:xW,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:e$e});return R.jsx(XFe,{value:{center:p,icon:d,getStyles:y},children:R.jsx(He,{...y("root",{style:{listStyleType:m}}),component:c==="unordered"?"ul":"ol",mod:[{"with-padding":f},g],ref:t,...b,children:l})})});y0.classes=xW;y0.displayName="@mantine/core/List";y0.Item=_W;var bye={root:"m_6e45937b",loader:"m_e8eb006c",overlay:"m_df587f17"};const Cne={transitionProps:{transition:"fade",duration:0},overlayProps:{backgroundOpacity:.75},zIndex:ld("overlay")},t$e=(e,{zIndex:t})=>({root:{"--lo-z-index":t==null?void 0:t.toString()}}),ih=Bt((e,t)=>{const n=dt("LoadingOverlay",Cne,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,transitionProps:l,loaderProps:c,overlayProps:f,visible:d,zIndex:h,...p}=n,m=Wa(),g=xn({name:"LoadingOverlay",classes:bye,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:t$e}),b={...Cne.overlayProps,...f};return R.jsx(vg,{transition:"fade",...l,mounted:!!d,children:y=>R.jsxs(He,{...g("root",{style:y}),ref:t,...p,children:[R.jsx(bg,{...g("loader"),unstyled:a,...c}),R.jsx(fS,{...b,...g("overlay"),darkHidden:!0,unstyled:a,color:(f==null?void 0:f.color)||m.white}),R.jsx(fS,{...b,...g("overlay"),lightHidden:!0,unstyled:a,color:(f==null?void 0:f.color)||m.colors.dark[5]})]})})});ih.classes=bye;ih.displayName="@mantine/core/LoadingOverlay";const[n$e,aR]=Al("Menu component was not found in the tree");var bT={dropdown:"m_dc9b7c9f",label:"m_9bfac126",divider:"m_efdf90cb",item:"m_99ac2aa1",itemLabel:"m_5476e0d3",itemSection:"m_8b75e504"};const r$e={},wW=Bt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=dt("MenuDivider",r$e,e),u=aR();return R.jsx(He,{ref:t,...u.getStyles("divider",{className:r,style:i,styles:s,classNames:n}),...a})});wW.classes=bT;wW.displayName="@mantine/core/MenuDivider";const i$e={},EW=Bt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,onMouseEnter:a,onMouseLeave:u,onKeyDown:l,children:c,...f}=dt("MenuDropdown",i$e,e),d=z.useRef(null),h=aR(),p=Nm(l,b=>{var y,x;(b.key==="ArrowUp"||b.key==="ArrowDown")&&(b.preventDefault(),(x=(y=d.current)==null?void 0:y.querySelectorAll("[data-menu-item]:not(:disabled)")[0])==null||x.focus())}),m=Nm(a,()=>(h.trigger==="hover"||h.trigger==="click-hover")&&h.openDropdown()),g=Nm(u,()=>(h.trigger==="hover"||h.trigger==="click-hover")&&h.closeDropdown());return R.jsxs(_l.Dropdown,{...f,onMouseEnter:m,onMouseLeave:g,role:"menu","aria-orientation":"vertical",ref:yu(t,d),...h.getStyles("dropdown",{className:r,style:i,styles:s,classNames:n,withStaticClass:!1}),tabIndex:-1,"data-menu-dropdown":!0,onKeyDown:p,children:[R.jsx("div",{tabIndex:-1,"data-autofocus":!0,"data-mantine-stop-propagation":!0,style:{outline:0}}),c]})});EW.classes=bT;EW.displayName="@mantine/core/MenuDropdown";const s$e={},SW=Ga((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,color:a,closeMenuOnClick:u,leftSection:l,rightSection:c,children:f,disabled:d,...h}=dt("MenuItem",s$e,e),p=aR(),m=Wa(),{dir:g}=Bb(),b=z.useRef(null),y=p.getItemIndex(b.current),x=h,w=Nm(x.onMouseLeave,()=>p.setHovered(-1)),T=Nm(x.onMouseEnter,()=>p.setHovered(p.getItemIndex(b.current))),A=Nm(x.onClick,()=>{typeof u=="boolean"?u&&p.closeDropdownImmediately():p.closeOnItemClick&&p.closeDropdownImmediately()}),k=Nm(x.onFocus,()=>p.setHovered(p.getItemIndex(b.current))),I=a?m.variantColorResolver({color:a,theme:m,variant:"light"}):void 0,O=a?yg({color:a,theme:m}):null;return R.jsxs(rh,{...h,unstyled:p.unstyled,tabIndex:p.menuItemTabIndex,onFocus:k,...p.getStyles("item",{className:r,style:i,styles:s,classNames:n}),ref:yu(b,t),role:"menuitem",disabled:d,"data-menu-item":!0,"data-disabled":d||void 0,"data-hovered":p.hovered===y?!0:void 0,"data-mantine-stop-propagation":!0,onMouseEnter:T,onMouseLeave:w,onClick:A,onKeyDown:sq({siblingSelector:"[data-menu-item]",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:p.loop,dir:g,orientation:"vertical",onKeyDown:x.onKeyDown}),__vars:{"--menu-item-color":O!=null&&O.isThemeColor&&(O==null?void 0:O.shade)===void 0?`var(--mantine-color-${O.color}-6)`:I==null?void 0:I.color,"--menu-item-hover":I==null?void 0:I.hover},children:[l&&R.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"left",children:l}),f&&R.jsx("div",{...p.getStyles("itemLabel",{styles:s,classNames:n}),children:f}),c&&R.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"right",children:c})]})});SW.classes=bT;SW.displayName="@mantine/core/MenuItem";const o$e={},TW=Bt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=dt("MenuLabel",o$e,e),u=aR();return R.jsx(He,{ref:t,...u.getStyles("label",{className:r,style:i,styles:s,classNames:n}),...a})});TW.classes=bT;TW.displayName="@mantine/core/MenuLabel";const a$e={refProp:"ref"},xye=z.forwardRef((e,t)=>{const{children:n,refProp:r,...i}=dt("MenuTarget",a$e,e);if(!Lb(n))throw new Error("Menu.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const s=aR(),o=n.props,a=Nm(o.onClick,()=>{s.trigger==="click"?s.toggleDropdown():s.trigger==="click-hover"&&(s.setOpenedViaClick(!0),s.opened||s.openDropdown())}),u=Nm(o.onMouseEnter,()=>(s.trigger==="hover"||s.trigger==="click-hover")&&s.openDropdown()),l=Nm(o.onMouseLeave,()=>{(s.trigger==="hover"||s.trigger==="click-hover"&&!s.openedViaClick)&&s.closeDropdown()});return R.jsx(_l.Target,{refProp:r,popupType:"menu",ref:t,...i,children:z.cloneElement(n,{onClick:a,onMouseEnter:u,onMouseLeave:l,"data-expanded":s.opened?!0:void 0})})});xye.displayName="@mantine/core/MenuTarget";const u$e={trapFocus:!0,closeOnItemClick:!0,clickOutsideEvents:["mousedown","touchstart","keydown"],loop:!0,trigger:"click",openDelay:0,closeDelay:100,menuItemTabIndex:-1};function Gc(e){const t=dt("Menu",u$e,e),{children:n,onOpen:r,onClose:i,opened:s,defaultOpened:o,trapFocus:a,onChange:u,closeOnItemClick:l,loop:c,closeOnEscape:f,trigger:d,openDelay:h,closeDelay:p,classNames:m,styles:g,unstyled:b,variant:y,vars:x,menuItemTabIndex:w,keepMounted:T,...A}=t,k=xn({name:"Menu",classes:bT,props:t,classNames:m,styles:g,unstyled:b}),[I,{setHovered:O,resetHovered:M}]=kDe(),[L,H]=Bu({value:s,defaultValue:o,finalValue:!1,onChange:u}),[D,B]=z.useState(!1),U=()=>{H(!1),B(!1),L&&(i==null||i())},G=()=>{H(!0),!L&&(r==null||r())},ee=()=>{L?U():G()},{openDropdown:ne,closeDropdown:ue}=CFe({open:G,close:U,closeDelay:p,openDelay:h}),X=W=>ADe("[data-menu-item]","[data-menu-dropdown]",W),{resolvedClassNames:q,resolvedStyles:te}=Sw({classNames:m,styles:g,props:t});return eg(()=>{M()},[L]),R.jsx(n$e,{value:{getStyles:k,opened:L,toggleDropdown:ee,getItemIndex:X,hovered:I,setHovered:O,openedViaClick:D,setOpenedViaClick:B,closeOnItemClick:l,closeDropdown:d==="click"?U:ue,openDropdown:d==="click"?G:ne,closeDropdownImmediately:U,loop:c,trigger:d,unstyled:b,menuItemTabIndex:w},children:R.jsx(_l,{...A,opened:L,onChange:ee,defaultOpened:o,trapFocus:T?!1:a,closeOnEscape:f,__staticSelector:"Menu",classNames:q,styles:te,unstyled:b,variant:y,keepMounted:T,children:n})})}Gc.extend=e=>e;Gc.classes=bT;Gc.displayName="@mantine/core/Menu";Gc.Item=SW;Gc.Label=TW;Gc.Dropdown=EW;Gc.Target=xye;Gc.Divider=wW;const[l$e,xT]=Al("Modal component was not found in tree");var R1={root:"m_9df02822",content:"m_54c44539",inner:"m_1f958f16",header:"m_d0e2b9cd"};const c$e={},KO=Bt((e,t)=>{const n=dt("ModalBody",c$e,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=xT();return R.jsx(Pge,{ref:t,...l.getStyles("body",{classNames:r,style:s,styles:o,className:i}),...u})});KO.classes=R1;KO.displayName="@mantine/core/ModalBody";const f$e={},XO=Bt((e,t)=>{const n=dt("ModalCloseButton",f$e,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=xT();return R.jsx(Nge,{ref:t,...l.getStyles("close",{classNames:r,style:s,styles:o,className:i}),...u})});XO.classes=R1;XO.displayName="@mantine/core/ModalCloseButton";const d$e={},QO=Bt((e,t)=>{const n=dt("ModalContent",d$e,e),{classNames:r,className:i,style:s,styles:o,vars:a,children:u,__hidden:l,...c}=n,f=xT(),d=f.scrollAreaComponent||PLe;return R.jsx(Dge,{...f.getStyles("content",{className:i,style:s,styles:o,classNames:r}),innerProps:f.getStyles("inner",{className:i,style:s,styles:o,classNames:r}),"data-full-screen":f.fullScreen||void 0,"data-modal-content":!0,"data-hidden":l||void 0,ref:t,...c,children:R.jsx(d,{style:{maxHeight:f.fullScreen?"100dvh":`calc(100dvh - (${ot(f.yOffset)} * 2))`},children:u})})});QO.classes=R1;QO.displayName="@mantine/core/ModalContent";const h$e={},JO=Bt((e,t)=>{const n=dt("ModalHeader",h$e,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=xT();return R.jsx(Oge,{ref:t,...l.getStyles("header",{classNames:r,style:s,styles:o,className:i}),...u})});JO.classes=R1;JO.displayName="@mantine/core/ModalHeader";const p$e={},ZO=Bt((e,t)=>{const n=dt("ModalOverlay",p$e,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=xT();return R.jsx(Mge,{ref:t,...l.getStyles("overlay",{classNames:r,style:s,styles:o,className:i}),...u})});ZO.classes=R1;ZO.displayName="@mantine/core/ModalOverlay";const m$e={__staticSelector:"Modal",closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:ld("modal"),transitionProps:{duration:200,transition:"fade-down"},yOffset:"5dvh"},g$e=(e,{radius:t,size:n,yOffset:r,xOffset:i})=>({root:{"--modal-radius":t===void 0?void 0:as(t),"--modal-size":_r(n,"modal-size"),"--modal-y-offset":ot(r),"--modal-x-offset":ot(i)}}),e9=Bt((e,t)=>{const n=dt("ModalRoot",m$e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,yOffset:l,scrollAreaComponent:c,radius:f,fullScreen:d,centered:h,xOffset:p,__staticSelector:m,...g}=n,b=xn({name:m,classes:R1,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:g$e});return R.jsx(l$e,{value:{yOffset:l,scrollAreaComponent:c,getStyles:b,fullScreen:d},children:R.jsx(Ige,{ref:t,...b("root"),"data-full-screen":d||void 0,"data-centered":h||void 0,unstyled:a,...g})})});e9.classes=R1;e9.displayName="@mantine/core/ModalRoot";const[y$e,v$e]=Fb();function _ye({children:e}){const[t,n]=z.useState([]),[r,i]=z.useState(ld("modal"));return R.jsx(y$e,{value:{stack:t,addModal:(s,o)=>{n(a=>[...new Set([...a,s])]),i(a=>typeof o=="number"&&typeof a=="number"?Math.max(a,o):a)},removeModal:s=>n(o=>o.filter(a=>a!==s)),getZIndex:s=>`calc(${r} + ${t.indexOf(s)} + 1)`,currentId:t[t.length-1],maxZIndex:r},children:e})}_ye.displayName="@mantine/core/ModalStack";const b$e={},t9=Bt((e,t)=>{const n=dt("ModalTitle",b$e,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=xT();return R.jsx(Lge,{ref:t,...l.getStyles("title",{classNames:r,style:s,styles:o,className:i}),...u})});t9.classes=R1;t9.displayName="@mantine/core/ModalTitle";const x$e={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:ld("modal"),transitionProps:{duration:200,transition:"fade-down"},withOverlay:!0,withCloseButton:!0},Eo=Bt((e,t)=>{const{title:n,withOverlay:r,overlayProps:i,withCloseButton:s,closeButtonProps:o,children:a,radius:u,opened:l,stackId:c,zIndex:f,...d}=dt("Modal",x$e,e),h=v$e(),p=!!n||s,m=h&&c?{closeOnEscape:h.currentId===c,trapFocus:h.currentId===c,zIndex:h.getZIndex(c)}:{},g=r===!1?!1:c&&h?h.currentId===c:l;return z.useEffect(()=>{h&&c&&(l?h.addModal(c,f||ld("modal")):h.removeModal(c))},[l,c,f]),R.jsxs(e9,{ref:t,radius:u,opened:l,zIndex:h&&c?h.getZIndex(c):f,...d,...m,children:[r&&R.jsx(ZO,{visible:g,transitionProps:h&&c?{duration:0}:void 0,...i}),R.jsxs(QO,{radius:u,__hidden:h&&c&&l?c!==h.currentId:!1,children:[p&&R.jsxs(JO,{children:[n&&R.jsx(t9,{children:n}),s&&R.jsx(XO,{...o})]}),R.jsx(KO,{children:a})]})]})});Eo.classes=R1;Eo.displayName="@mantine/core/Modal";Eo.Root=e9;Eo.Overlay=ZO;Eo.Content=QO;Eo.Body=KO;Eo.Header=JO;Eo.Title=t9;Eo.CloseButton=XO;Eo.Stack=_ye;const[_$e,CW]=Fb(),[w$e,E$e]=Fb();var n9={root:"m_7cda1cd6","root--default":"m_44da308b","root--contrast":"m_e3a01f8",label:"m_1e0e6180",remove:"m_ae386778",group:"m_1dcfd90b"};const S$e={},T$e=(e,{gap:t},{size:n})=>({group:{"--pg-gap":t!==void 0?_r(t):_r(n,"pg-gap")}}),AW=Bt((e,t)=>{const n=dt("PillGroup",S$e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,disabled:c,...f}=n,d=CW(),h=(d==null?void 0:d.size)||l||void 0,p=xn({name:"PillGroup",classes:n9,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:T$e,stylesCtx:{size:h},rootSelector:"group"});return R.jsx(w$e,{value:{size:h,disabled:c},children:R.jsx(He,{ref:t,size:h,...p("group"),...f})})});AW.classes=n9;AW.displayName="@mantine/core/PillGroup";const C$e={variant:"default"},A$e=(e,{radius:t},{size:n})=>({root:{"--pill-fz":_r(n,"pill-fz"),"--pill-height":_r(n,"pill-height"),"--pill-radius":t===void 0?void 0:as(t)}}),Hk=Bt((e,t)=>{const n=dt("Pill",C$e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,variant:l,children:c,withRemoveButton:f,onRemove:d,removeButtonProps:h,radius:p,size:m,disabled:g,mod:b,...y}=n,x=E$e(),w=CW(),T=m||(x==null?void 0:x.size)||void 0,A=(w==null?void 0:w.variant)==="filled"?"contrast":l||"default",k=xn({name:"Pill",classes:n9,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:A$e,stylesCtx:{size:T}});return R.jsxs(He,{component:"span",ref:t,variant:A,size:T,...k("root",{variant:A}),mod:[{"with-remove":f&&!g,disabled:g||(x==null?void 0:x.disabled)},b],...y,children:[R.jsx("span",{...k("label"),children:c}),f&&R.jsx(zb,{variant:"transparent",radius:p,tabIndex:-1,"aria-hidden":!0,unstyled:a,...h,...k("remove",{className:h==null?void 0:h.className,style:h==null?void 0:h.style}),onMouseDown:I=>{var O;I.preventDefault(),I.stopPropagation(),(O=h==null?void 0:h.onMouseDown)==null||O.call(h,I)},onClick:I=>{var O;I.stopPropagation(),d==null||d(),(O=h==null?void 0:h.onClick)==null||O.call(h,I)}})]})});Hk.classes=n9;Hk.displayName="@mantine/core/Pill";Hk.Group=AW;var wye={field:"m_45c4369d"};const k$e={type:"visible"},kW=Bt((e,t)=>{const n=dt("PillsInputField",k$e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,type:l,disabled:c,id:f,pointer:d,mod:h,...p}=n,m=CW(),g=mT(),b=xn({name:"PillsInputField",classes:wye,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"field"}),y=c||(m==null?void 0:m.disabled);return R.jsx(He,{component:"input",ref:yu(t,m==null?void 0:m.fieldRef),"data-type":l,disabled:y,mod:[{disabled:y,pointer:d},h],...b("field"),...p,id:(g==null?void 0:g.inputId)||f,"aria-invalid":m==null?void 0:m.hasError,"aria-describedby":g==null?void 0:g.describedBy,type:"text",onMouseDown:x=>!d&&x.stopPropagation()})});kW.classes=wye;kW.displayName="@mantine/core/PillsInputField";const R$e={},oN=Bt((e,t)=>{const n=dt("PillsInput",R$e,e),{children:r,onMouseDown:i,onClick:s,size:o,disabled:a,__staticSelector:u,error:l,variant:c,...f}=n,d=z.useRef(null);return R.jsx(_$e,{value:{fieldRef:d,size:o,disabled:a,hasError:!!l,variant:c},children:R.jsx(ap,{size:o,error:l,variant:c,component:"div",ref:t,onMouseDown:h=>{var p;h.preventDefault(),i==null||i(h),(p=d.current)==null||p.focus()},onClick:h=>{var p;h.preventDefault(),s==null||s(h),(p=d.current)==null||p.focus()},...f,multiline:!0,disabled:a,__staticSelector:u||"PillsInput",withAria:!1,children:r})})});oN.displayName="@mantine/core/PillsInput";oN.Field=kW;function I$e({data:e,value:t}){const n=t.map(i=>i.trim().toLowerCase());return e.reduce((i,s)=>(hS(s)?i.push({group:s.group,items:s.items.filter(o=>n.indexOf(o.value.toLowerCase().trim())===-1)}):n.indexOf(s.value.toLowerCase().trim())===-1&&i.push(s),i),[])}const P$e={maxValues:1/0,withCheckIcon:!0,checkIconPosition:"left",hiddenInputValuesDivider:","},RW=Bt((e,t)=>{const n=dt("MultiSelect",P$e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,value:c,defaultValue:f,onChange:d,onKeyDown:h,variant:p,data:m,dropdownOpened:g,defaultDropdownOpened:b,onDropdownOpen:y,onDropdownClose:x,selectFirstOptionOnChange:w,onOptionSubmit:T,comboboxProps:A,filter:k,limit:I,withScrollArea:O,maxDropdownHeight:M,searchValue:L,defaultSearchValue:H,onSearchChange:D,readOnly:B,disabled:U,onFocus:G,onBlur:ee,onPaste:ne,radius:ue,rightSection:X,rightSectionWidth:q,rightSectionPointerEvents:te,rightSectionProps:W,leftSection:Z,leftSectionWidth:oe,leftSectionPointerEvents:pe,leftSectionProps:ce,inputContainer:he,inputWrapperOrder:Ee,withAsterisk:Ae,labelProps:ge,descriptionProps:me,errorProps:Oe,wrapperProps:Me,description:Ye,label:lt,error:We,maxValues:nt,searchable:yt,nothingFoundMessage:_t,withCheckIcon:Rt,checkIconPosition:Et,hidePickedOptions:Ke,withErrorStyles:Lt,name:sn,form:Fe,id:Qe,clearable:wt,clearButtonProps:Vt,hiddenInputProps:Wt,placeholder:bn,hiddenInputValuesDivider:Nn,required:Zn,mod:wr,renderOption:Hn,onRemove:nr,onClear:Ei,scrollAreaProps:Dr,...Co}=n,Ji=lf(Qe),Di=qge(m),Zi=Qq(Di),ei=uW({opened:g,defaultOpened:b,onDropdownOpen:y,onDropdownClose:()=>{x==null||x(),ei.resetSelectedOption()}}),{styleProps:po,rest:{type:Wu,autoComplete:Ea,...Sa}}=Cw(Co),[Kr,Oi]=Bu({value:c,defaultValue:f,finalValue:[],onChange:d}),[si,Js]=Bu({value:L,defaultValue:H,finalValue:"",onChange:D}),Xr=xn({name:"MultiSelect",classes:{},props:n,classNames:r,styles:o,unstyled:a}),{resolvedClassNames:Hi,resolvedStyles:Zs}=Sw({props:n,styles:o,classNames:r}),mo=Hr=>{h==null||h(Hr),Hr.key===" "&&!yt&&(Hr.preventDefault(),ei.toggleDropdown()),Hr.key==="Backspace"&&si.length===0&&Kr.length>0&&(nr==null||nr(Kr[Kr.length-1]),Oi(Kr.slice(0,Kr.length-1)))},Qo=Kr.map((Hr,Rl)=>{var bs,Ya;return R.jsx(Hk,{withRemoveButton:!B&&!((bs=Zi[Hr])!=null&&bs.disabled),onRemove:()=>{Oi(Kr.filter(Jo=>Hr!==Jo)),nr==null||nr(Hr)},unstyled:a,disabled:U,...Xr("pill"),children:((Ya=Zi[Hr])==null?void 0:Ya.label)||Hr},`${Hr}-${Rl}`)});z.useEffect(()=>{w&&ei.selectFirstOption()},[w,Kr]);const Ta=R.jsx(di.ClearButton,{...Vt,onClear:()=>{Ei==null||Ei(),Oi([]),Js("")}}),dd=I$e({data:Di,value:Kr});return R.jsxs(R.Fragment,{children:[R.jsxs(di,{store:ei,classNames:Hi,styles:Zs,unstyled:a,size:l,readOnly:B,__staticSelector:"MultiSelect",onOptionSubmit:Hr=>{T==null||T(Hr),Js(""),ei.updateSelectedOptionIndex("selected"),Kr.includes(Zi[Hr].value)?(Oi(Kr.filter(Rl=>Rl!==Zi[Hr].value)),nr==null||nr(Zi[Hr].value)):Kr.length<nt&&Oi([...Kr,Zi[Hr].value])},...A,children:[R.jsx(di.DropdownTarget,{children:R.jsx(oN,{...po,__staticSelector:"MultiSelect",classNames:Hi,styles:Zs,unstyled:a,size:l,className:i,style:s,variant:p,disabled:U,radius:ue,__defaultRightSection:R.jsx(di.Chevron,{size:l,error:We,unstyled:a}),__clearSection:Ta,__clearable:wt&&Kr.length>0&&!U&&!B,rightSection:X,rightSectionPointerEvents:te||(Ta?"all":"none"),rightSectionWidth:q,rightSectionProps:W,leftSection:Z,leftSectionWidth:oe,leftSectionPointerEvents:pe,leftSectionProps:ce,inputContainer:he,inputWrapperOrder:Ee,withAsterisk:Ae,labelProps:ge,descriptionProps:me,errorProps:Oe,wrapperProps:Me,description:Ye,label:lt,error:We,multiline:!0,withErrorStyles:Lt,__stylesApiProps:{...n,rightSectionPointerEvents:te||(Ta?"all":"none"),multiline:!0},pointer:!yt,onClick:()=>yt?ei.openDropdown():ei.toggleDropdown(),"data-expanded":ei.dropdownOpened||void 0,id:Ji,required:Zn,mod:wr,children:R.jsxs(Hk.Group,{disabled:U,unstyled:a,...Xr("pillsList"),children:[Qo,R.jsx(di.EventsTarget,{autoComplete:Ea,children:R.jsx(oN.Field,{...Sa,ref:t,id:Ji,placeholder:bn,type:!yt&&!bn?"hidden":"visible",...Xr("inputField"),unstyled:a,onFocus:Hr=>{G==null||G(Hr),yt&&ei.openDropdown()},onBlur:Hr=>{ee==null||ee(Hr),ei.closeDropdown(),Js("")},onKeyDown:mo,value:si,onChange:Hr=>{Js(Hr.currentTarget.value),yt&&ei.openDropdown(),w&&ei.selectFirstOption()},disabled:U,readOnly:B||!yt,pointer:!yt})})]})})}),R.jsx(lye,{data:Ke?dd:Di,hidden:B||U,filter:k,search:si,limit:I,hiddenWhenEmpty:!_t,withScrollArea:O,maxDropdownHeight:M,filterOptions:yt,value:Kr,checkIconPosition:Et,withCheckIcon:Rt,nothingFoundMessage:_t,unstyled:a,labelId:lt?`${Ji}-label`:void 0,"aria-label":lt?void 0:Co["aria-label"],renderOption:Hn,scrollAreaProps:Dr})]}),R.jsx(di.HiddenInput,{name:sn,valuesDivider:Nn,value:Kr,form:Fe,disabled:U,...Wt})]})});RW.classes={...ap.classes,...di.classes};RW.displayName="@mantine/core/MultiSelect";var Eye={root:"m_f0824112",description:"m_57492dcc",section:"m_690090b5",label:"m_1f6ac4c4",body:"m_f07af9d2",children:"m_e17b862f",chevron:"m_1fd8a00b"};const N$e={},D$e=(e,{variant:t,color:n,childrenOffset:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:t||"light",autoContrast:i});return{root:{"--nl-bg":n||t?s.background:void 0,"--nl-hover":n||t?s.hover:void 0,"--nl-color":n||t?s.color:void 0},children:{"--nl-offset":Ha(r)}}},r9=Ga((e,t)=>{const n=dt("NavLink",N$e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,opened:l,defaultOpened:c,onChange:f,children:d,onClick:h,active:p,disabled:m,leftSection:g,rightSection:b,label:y,description:x,disableRightSectionRotation:w,noWrap:T,childrenOffset:A,onKeyDown:k,autoContrast:I,mod:O,...M}=n,L=xn({name:"NavLink",props:n,classes:Eye,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:D$e}),[H,D]=Bu({value:l,defaultValue:c,finalValue:!1,onChange:f}),B=!!d,U=G=>{h==null||h(G),B&&(G.preventDefault(),D(!H))};return R.jsxs(R.Fragment,{children:[R.jsxs(rh,{...L("root"),component:"a",ref:t,onClick:U,onKeyDown:G=>{k==null||k(G),G.nativeEvent.code==="Space"&&B&&(G.preventDefault(),D(!H))},unstyled:a,mod:[{disabled:m,active:p,expanded:H},O],...M,children:[g&&R.jsx(He,{component:"span",...L("section"),mod:{position:"left"},children:g}),R.jsxs(He,{...L("body"),mod:{"no-wrap":T},children:[R.jsx(He,{component:"span",...L("label"),children:y}),R.jsx(He,{component:"span",mod:{active:p},...L("description"),children:x})]}),(B||b)&&R.jsx(He,{...L("section"),component:"span",mod:{rotate:H&&!w,position:"right"},children:B?b||R.jsx(WO,{...L("chevron")}):b})]}),B&&R.jsx(FO,{in:H,...L("collapse"),children:R.jsx("div",{...L("children"),children:d})})]})});r9.classes=Eye;r9.displayName="@mantine/core/NavLink";var Sye={root:"m_a513464",icon:"m_a4ceffb",loader:"m_b0920b15",body:"m_a49ed24",title:"m_3feedf16",description:"m_3d733a3a",closeButton:"m_919a4d88"};const O$e={withCloseButton:!0},M$e=(e,{radius:t,color:n})=>({root:{"--notification-radius":t===void 0?void 0:as(t),"--notification-color":n?Fs(n,e):void 0}}),IW=Bt((e,t)=>{const n=dt("Notification",O$e,e),{className:r,color:i,radius:s,loading:o,withCloseButton:a,withBorder:u,title:l,icon:c,children:f,onClose:d,closeButtonProps:h,classNames:p,style:m,styles:g,unstyled:b,variant:y,vars:x,mod:w,...T}=n,A=xn({name:"Notification",classes:Sye,props:n,className:r,style:m,classNames:p,styles:g,unstyled:b,vars:x,varsResolver:M$e});return R.jsxs(He,{...A("root"),mod:[{"data-with-icon":!!c||o,"data-with-border":u},w],ref:t,variant:y,...T,role:"alert",children:[c&&!o&&R.jsx("div",{...A("icon"),children:c}),o&&R.jsx(bg,{size:28,color:i,...A("loader")}),R.jsxs("div",{...A("body"),children:[l&&R.jsx("div",{...A("title"),children:l}),R.jsx(He,{...A("description"),mod:{"data-with-title":!!l},children:f})]}),a&&R.jsx(zb,{iconSize:16,color:"gray",...h,unstyled:b,onClick:d,...A("closeButton")})]})});IW.classes=Sye;IW.displayName="@mantine/core/Notification";function Tye(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}var qk;(function(e){e.event="event",e.props="prop"})(qk||(qk={}));function Iv(){}function L$e(e){var t,n=void 0;return function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t&&r.length===t.length&&r.every(function(s,o){return s===t[o]})||(t=r,n=e.apply(void 0,r)),n}}function Wk(e){return!!(e||"").match(/\d/)}function BE(e){return e==null}function F$e(e){return typeof e=="number"&&isNaN(e)}function Cye(e){return BE(e)||F$e(e)||typeof e=="number"&&!isFinite(e)}function Aye(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function $$e(e){switch(e){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;case"thousand":default:return/(\d)(?=(\d{3})+(?!\d))/g}}function B$e(e,t,n){var r=$$e(n),i=e.search(/[1-9]/);return i=i===-1?e.length:i,e.substring(0,i)+e.substring(i,e.length).replace(r,"$1"+t)}function j$e(e){var t=z.useRef(e);t.current=e;var n=z.useRef(function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t.current.apply(t,r)});return n.current}function PW(e,t){t===void 0&&(t=!0);var n=e[0]==="-",r=n&&t;e=e.replace("-","");var i=e.split("."),s=i[0],o=i[1]||"";return{beforeDecimal:s,afterDecimal:o,hasNegation:n,addNegation:r}}function U$e(e){if(!e)return e;var t=e[0]==="-";t&&(e=e.substring(1,e.length));var n=e.split("."),r=n[0].replace(/^0+/,"")||"0",i=n[1]||"";return(t?"-":"")+r+(i?"."+i:"")}function kye(e,t,n){for(var r="",i=n?"0":"",s=0;s<=t-1;s++)r+=e[s]||i;return r}function Ane(e,t){return Array(t+1).join(e)}function Rye(e){var t=e+"",n=t[0]==="-"?"-":"";n&&(t=t.substring(1));var r=t.split(/[eE]/g),i=r[0],s=r[1];if(s=Number(s),!s)return n+i;i=i.replace(".","");var o=1+s,a=i.length;return o<0?i="0."+Ane("0",Math.abs(o))+i:o>=a?i=i+Ane("0",o-a):i=(i.substring(0,o)||"0")+"."+i.substring(o),n+i}function kne(e,t,n){if(["","-"].indexOf(e)!==-1)return e;var r=(e.indexOf(".")!==-1||n)&&t,i=PW(e),s=i.beforeDecimal,o=i.afterDecimal,a=i.hasNegation,u=parseFloat("0."+(o||"0")),l=o.length<=t?"0."+o:u.toFixed(t),c=l.split("."),f=s;s&&Number(c[0])&&(f=s.split("").reverse().reduce(function(m,g,b){return m.length>b?(Number(m[0])+Number(g)).toString()+m.substring(1,m.length):g+m},c[0]));var d=kye(c[1]||"",t,n),h=a?"-":"",p=r?".":"";return""+h+f+p+d}function f_(e,t){if(e.value=e.value,e!==null){if(e.createTextRange){var n=e.createTextRange();return n.move("character",t),n.select(),!0}return e.selectionStart||e.selectionStart===0?(e.focus(),e.setSelectionRange(t,t),!0):(e.focus(),!1)}}var Iye=L$e(function(e,t){for(var n=0,r=0,i=e.length,s=t.length;e[n]===t[n]&&n<i;)n++;for(;e[i-1-r]===t[s-1-r]&&s-r>n&&i-r>n;)r++;return{from:{start:n,end:i-r},to:{start:n,end:s-r}}}),z$e=function(e,t){var n=Math.min(e.selectionStart,t);return{from:{start:n,end:e.selectionEnd},to:{start:n,end:t}}};function V$e(e,t,n){return Math.min(Math.max(e,t),n)}function yF(e){return Math.max(e.selectionStart,e.selectionEnd)}function H$e(){return typeof navigator<"u"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function q$e(e){return{from:{start:0,end:0},to:{start:0,end:e.length},lastValue:""}}function W$e(e){var t=e.currentValue,n=e.formattedValue,r=e.currentValueIndex,i=e.formattedValueIndex;return t[r]===n[i]}function G$e(e,t,n,r,i,s,o){o===void 0&&(o=W$e);var a=i.findIndex(function(w){return w}),u=e.slice(0,a);!t&&!n.startsWith(u)&&(t=u,n=u+n,r=r+u.length);for(var l=n.length,c=e.length,f={},d=new Array(l),h=0;h<l;h++){d[h]=-1;for(var p=0,m=c;p<m;p++){var g=o({currentValue:n,lastValue:t,formattedValue:e,currentValueIndex:h,formattedValueIndex:p});if(g&&f[p]!==!0){d[h]=p,f[p]=!0;break}}}for(var b=r;b<l&&(d[b]===-1||!s(n[b]));)b++;var y=b===l||d[b]===-1?c:d[b];for(b=r-1;b>0&&d[b]===-1;)b--;var x=b===-1||d[b]===-1?0:d[b]+1;return x>y?y:r-x<y-r?x:y}function Rne(e,t,n,r){var i=e.length;if(t=V$e(t,0,i),r==="left"){for(;t>=0&&!n[t];)t--;t===-1&&(t=n.indexOf(!0))}else{for(;t<=i&&!n[t];)t++;t>i&&(t=n.lastIndexOf(!0))}return t===-1&&(t=i),t}function Y$e(e){for(var t=Array.from({length:e.length+1}).map(function(){return!0}),n=0,r=t.length;n<r;n++)t[n]=!!(Wk(e[n])||Wk(e[n-1]));return t}function Pye(e,t,n,r,i,s){s===void 0&&(s=Iv);var o=j$e(function(p,m){var g,b;return Cye(p)?(b="",g=""):typeof p=="number"||m?(b=typeof p=="number"?Rye(p):p,g=r(b)):(b=i(p,void 0),g=r(b)),{formattedValue:g,numAsString:b}}),a=z.useState(function(){return o(BE(e)?t:e,n)}),u=a[0],l=a[1],c=function(p,m){p.formattedValue!==u.formattedValue&&l({formattedValue:p.formattedValue,numAsString:p.value}),s(p,m)},f=e,d=n;BE(e)&&(f=u.numAsString,d=!0);var h=o(f,d);return z.useMemo(function(){l(h)},[h.formattedValue]),[u,c]}function K$e(e){return e.replace(/[^0-9]/g,"")}function X$e(e){return e}function Q$e(e){var t=e.type;t===void 0&&(t="text");var n=e.displayType;n===void 0&&(n="input");var r=e.customInput,i=e.renderText,s=e.getInputRef,o=e.format;o===void 0&&(o=X$e);var a=e.removeFormatting;a===void 0&&(a=K$e);var u=e.defaultValue,l=e.valueIsNumericString,c=e.onValueChange,f=e.isAllowed,d=e.onChange;d===void 0&&(d=Iv);var h=e.onKeyDown;h===void 0&&(h=Iv);var p=e.onMouseUp;p===void 0&&(p=Iv);var m=e.onFocus;m===void 0&&(m=Iv);var g=e.onBlur;g===void 0&&(g=Iv);var b=e.value,y=e.getCaretBoundary;y===void 0&&(y=Y$e);var x=e.isValidInputCharacter;x===void 0&&(x=Wk);var w=e.isCharacterSame,T=Tye(e,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),A=Pye(b,u,!!l,o,a,c),k=A[0],I=k.formattedValue,O=k.numAsString,M=A[1],L=z.useRef(),H=z.useRef({formattedValue:I,numAsString:O}),D=function(We,nt){H.current={formattedValue:We.formattedValue,numAsString:We.value},M(We,nt)},B=z.useState(!1),U=B[0],G=B[1],ee=z.useRef(null),ne=z.useRef({setCaretTimeout:null,focusTimeout:null});z.useEffect(function(){return G(!0),function(){clearTimeout(ne.current.setCaretTimeout),clearTimeout(ne.current.focusTimeout)}},[]);var ue=o,X=function(We,nt){var yt=parseFloat(nt);return{formattedValue:We,value:nt,floatValue:isNaN(yt)?void 0:yt}},q=function(We,nt,yt){We.selectionStart===0&&We.selectionEnd===We.value.length||(f_(We,nt),ne.current.setCaretTimeout=setTimeout(function(){We.value===yt&&We.selectionStart!==nt&&f_(We,nt)},0))},te=function(We,nt,yt){return Rne(We,nt,y(We),yt)},W=function(We,nt,yt){var _t=y(nt),Rt=G$e(nt,I,We,yt,_t,x,w);return Rt=Rne(nt,Rt,_t),Rt},Z=function(We){var nt=We.formattedValue;nt===void 0&&(nt="");var yt=We.input,_t=We.source,Rt=We.event,Et=We.numAsString,Ke;if(yt){var Lt=We.inputValue||yt.value,sn=yF(yt);yt.value=nt,Ke=W(Lt,nt,sn),Ke!==void 0&&q(yt,Ke,nt)}nt!==I&&D(X(nt,Et),{event:Rt,source:_t})};z.useEffect(function(){var We=H.current,nt=We.formattedValue,yt=We.numAsString;(I!==nt||O!==yt)&&D(X(I,O),{event:void 0,source:qk.props})},[I,O]);var oe=ee.current?yF(ee.current):void 0,pe=typeof window<"u"?z.useLayoutEffect:z.useEffect;pe(function(){var We=ee.current;if(I!==H.current.formattedValue&&We){var nt=W(H.current.formattedValue,I,oe);We.value=I,q(We,nt,I)}},[I]);var ce=function(We,nt,yt){var _t=nt.target,Rt=L.current?z$e(L.current,_t.selectionEnd):Iye(I,We),Et=Object.assign(Object.assign({},Rt),{lastValue:I}),Ke=a(We,Et),Lt=ue(Ke);if(Ke=a(Lt,void 0),f&&!f(X(Lt,Ke))){var sn=nt.target,Fe=yF(sn),Qe=W(We,I,Fe);return sn.value=I,q(sn,Qe,I),!1}return Z({formattedValue:Lt,numAsString:Ke,inputValue:We,event:nt,source:yt,input:nt.target}),!0},he=function(We,nt){nt===void 0&&(nt=0);var yt=We.selectionStart,_t=We.selectionEnd;L.current={selectionStart:yt,selectionEnd:_t+nt}},Ee=function(We){var nt=We.target,yt=nt.value,_t=ce(yt,We,qk.event);_t&&d(We),L.current=void 0},Ae=function(We){var nt=We.target,yt=We.key,_t=nt.selectionStart,Rt=nt.selectionEnd,Et=nt.value;Et===void 0&&(Et="");var Ke;yt==="ArrowLeft"||yt==="Backspace"?Ke=Math.max(_t-1,0):yt==="ArrowRight"?Ke=Math.min(_t+1,Et.length):yt==="Delete"&&(Ke=_t);var Lt=0;yt==="Delete"&&_t===Rt&&(Lt=1);var sn=yt==="ArrowLeft"||yt==="ArrowRight";if(Ke===void 0||_t!==Rt&&!sn){h(We),he(nt,Lt);return}var Fe=Ke;if(sn){var Qe=yt==="ArrowLeft"?"left":"right";Fe=te(Et,Ke,Qe),Fe!==Ke&&We.preventDefault()}else yt==="Delete"&&!x(Et[Ke])?Fe=te(Et,Ke,"right"):yt==="Backspace"&&!x(Et[Ke])&&(Fe=te(Et,Ke,"left"));Fe!==Ke&&q(nt,Fe,Et),h(We),he(nt,Lt)},ge=function(We){var nt=We.target,yt=function(){var _t=nt.selectionStart,Rt=nt.selectionEnd,Et=nt.value;if(Et===void 0&&(Et=""),_t===Rt){var Ke=te(Et,_t);Ke!==_t&&q(nt,Ke,Et)}};yt(),requestAnimationFrame(function(){yt()}),p(We),he(nt)},me=function(We){We.persist&&We.persist();var nt=We.target,yt=We.currentTarget;ee.current=nt,ne.current.focusTimeout=setTimeout(function(){var _t=nt.selectionStart,Rt=nt.selectionEnd,Et=nt.value;Et===void 0&&(Et="");var Ke=te(Et,_t);Ke!==_t&&!(_t===0&&Rt===Et.length)&&q(nt,Ke,Et),m(Object.assign(Object.assign({},We),{currentTarget:yt}))},0)},Oe=function(We){ee.current=null,clearTimeout(ne.current.focusTimeout),clearTimeout(ne.current.setCaretTimeout),g(We)},Me=U&&H$e()?"numeric":void 0,Ye=Object.assign({inputMode:Me},T,{type:t,value:I,onChange:Ee,onKeyDown:Ae,onMouseUp:ge,onFocus:me,onBlur:Oe});if(n==="text")return i?sr.createElement(sr.Fragment,null,i(I,T)||null):sr.createElement("span",Object.assign({},T,{ref:s}),I);if(r){var lt=r;return sr.createElement(lt,Object.assign({},Ye,{ref:s}))}return sr.createElement("input",Object.assign({},Ye,{ref:s}))}function Ine(e,t){var n=t.decimalScale,r=t.fixedDecimalScale,i=t.prefix;i===void 0&&(i="");var s=t.suffix;s===void 0&&(s="");var o=t.allowNegative,a=t.thousandsGroupStyle;if(a===void 0&&(a="thousand"),e===""||e==="-")return e;var u=i9(t),l=u.thousandSeparator,c=u.decimalSeparator,f=n!==0&&e.indexOf(".")!==-1||n&&r,d=PW(e,o),h=d.beforeDecimal,p=d.afterDecimal,m=d.addNegation;return n!==void 0&&(p=kye(p,n,!!r)),l&&(h=B$e(h,l,a)),i&&(h=i+h),s&&(p=p+s),m&&(h="-"+h),e=h+(f&&c||"")+p,e}function i9(e){var t=e.decimalSeparator;t===void 0&&(t=".");var n=e.thousandSeparator,r=e.allowedDecimalSeparators;return n===!0&&(n=","),r||(r=[t,"."]),{decimalSeparator:t,thousandSeparator:n,allowedDecimalSeparators:r}}function J$e(e,t){e===void 0&&(e="");var n=new RegExp("(-)"),r=new RegExp("(-)(.)*(-)"),i=n.test(e),s=r.test(e);return e=e.replace(/-/g,""),i&&!s&&t&&(e="-"+e),e}function Z$e(e,t){return new RegExp("(^-)|[0-9]|"+Aye(e),"g")}function eBe(e,t,n){return e===""?!0:!(t!=null&&t.match(/\d/))&&!(n!=null&&n.match(/\d/))&&typeof e=="string"&&!isNaN(Number(e))}function tBe(e,t,n){var r;t===void 0&&(t=q$e(e));var i=n.allowNegative,s=n.prefix;s===void 0&&(s="");var o=n.suffix;o===void 0&&(o="");var a=n.decimalScale,u=t.from,l=t.to,c=l.start,f=l.end,d=i9(n),h=d.allowedDecimalSeparators,p=d.decimalSeparator,m=e[f]===p;if(Wk(e)&&(e===s||e===o)&&t.lastValue==="")return e;if(f-c===1&&h.indexOf(e[c])!==-1){var g=a===0?"":p;e=e.substring(0,c)+g+e.substring(c+1,e.length)}var b=function(ee,ne,ue){var X=!1,q=!1;s.startsWith("-")?X=!1:ee.startsWith("--")?(X=!1,q=!0):o.startsWith("-")&&ee.length===o.length?X=!1:ee[0]==="-"&&(X=!0);var te=X?1:0;return q&&(te=2),te&&(ee=ee.substring(te),ne-=te,ue-=te),{value:ee,start:ne,end:ue,hasNegation:X}},y=b(e,c,f),x=y.hasNegation;r=y,e=r.value,c=r.start,f=r.end;var w=b(t.lastValue,u.start,u.end),T=w.start,A=w.end,k=w.value,I=e.substring(c,f);e.length&&k.length&&(T>k.length-o.length||A<s.length)&&!(I&&o.startsWith(I))&&(e=k);var O=0;e.startsWith(s)?O+=s.length:c<s.length&&(O=c),e=e.substring(O),f-=O;var M=e.length,L=e.length-o.length;e.endsWith(o)?M=L:(f>L||f>e.length-o.length)&&(M=f),e=e.substring(0,M),e=J$e(x?"-"+e:e,i),e=(e.match(Z$e(p))||[]).join("");var H=e.indexOf(p);e=e.replace(new RegExp(Aye(p),"g"),function(ee,ne){return ne===H?".":""});var D=PW(e,i),B=D.beforeDecimal,U=D.afterDecimal,G=D.addNegation;return l.end-l.start<u.end-u.start&&B===""&&m&&!parseFloat(U)&&(e=G?"-":""),e}function nBe(e,t){var n=t.prefix;n===void 0&&(n="");var r=t.suffix;r===void 0&&(r="");var i=Array.from({length:e.length+1}).map(function(){return!0}),s=e[0]==="-";i.fill(!1,0,n.length+(s?1:0));var o=e.length;return i.fill(!1,o-r.length+1,o+1),i}function rBe(e){var t=i9(e),n=t.thousandSeparator,r=t.decimalSeparator,i=e.prefix;i===void 0&&(i="");var s=e.allowNegative;if(s===void 0&&(s=!0),n===r)throw new Error(`
        Decimal separator can't be same as thousand separator.
        thousandSeparator: `+n+` (thousandSeparator = {true} is same as thousandSeparator = ",")
        decimalSeparator: `+r+` (default value for decimalSeparator is .)
     `);return i.startsWith("-")&&s&&(console.error(`
      Prefix can't start with '-' when allowNegative is true.
      prefix: `+i+`
      allowNegative: `+s+`
    `),s=!1),Object.assign(Object.assign({},e),{allowNegative:s})}function iBe(e){e=rBe(e),e.decimalSeparator,e.allowedDecimalSeparators,e.thousandsGroupStyle;var t=e.suffix,n=e.allowNegative,r=e.allowLeadingZeros,i=e.onKeyDown;i===void 0&&(i=Iv);var s=e.onBlur;s===void 0&&(s=Iv);var o=e.thousandSeparator,a=e.decimalScale,u=e.fixedDecimalScale,l=e.prefix;l===void 0&&(l="");var c=e.defaultValue,f=e.value,d=e.valueIsNumericString,h=e.onValueChange,p=Tye(e,["decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","suffix","allowNegative","allowLeadingZeros","onKeyDown","onBlur","thousandSeparator","decimalScale","fixedDecimalScale","prefix","defaultValue","value","valueIsNumericString","onValueChange"]),m=i9(e),g=m.decimalSeparator,b=m.allowedDecimalSeparators,y=function(G){return Ine(G,e)},x=function(G,ee){return tBe(G,ee,e)},w=BE(f)?c:f,T=d??eBe(w,l,t);BE(f)?BE(c)||(T=T||typeof c=="number"):T=T||typeof f=="number";var A=function(G){return Cye(G)?G:(typeof G=="number"&&(G=Rye(G)),T&&typeof a=="number"?kne(G,a,!!u):G)},k=Pye(A(f),A(c),!!T,y,x,h),I=k[0],O=I.numAsString,M=I.formattedValue,L=k[1],H=function(G){var ee=G.target,ne=G.key,ue=ee.selectionStart,X=ee.selectionEnd,q=ee.value;if(q===void 0&&(q=""),(ne==="Backspace"||ne==="Delete")&&X<l.length){G.preventDefault();return}if(ue!==X){i(G);return}ne==="Backspace"&&q[0]==="-"&&ue===l.length+1&&n&&f_(ee,1),a&&u&&(ne==="Backspace"&&q[ue-1]===g?(f_(ee,ue-1),G.preventDefault()):ne==="Delete"&&q[ue]===g&&G.preventDefault()),b!=null&&b.includes(ne)&&q[ue]===g&&f_(ee,ue+1);var te=o===!0?",":o;ne==="Backspace"&&q[ue-1]===te&&f_(ee,ue-1),ne==="Delete"&&q[ue]===te&&f_(ee,ue+1),i(G)},D=function(G){var ee=O;if(ee.match(/\d/g)||(ee=""),r||(ee=U$e(ee)),u&&a&&(ee=kne(ee,a,u)),ee!==O){var ne=Ine(ee,e);L({formattedValue:ne,value:ee,floatValue:parseFloat(ee)},{event:G,source:qk.event})}s(G)},B=function(G){return G===g?!0:Wk(G)},U=function(G){var ee=G.currentValue,ne=G.lastValue,ue=G.formattedValue,X=G.currentValueIndex,q=G.formattedValueIndex,te=ee[X],W=ue[q],Z=Iye(ne,ee),oe=Z.to,pe=function(ce){return x(ce).indexOf(".")+l.length};return f===0&&u&&a&&ee[oe.start]===g&&pe(ee)<X&&pe(ue)>q?!1:X>=oe.start&&X<oe.end&&b&&b.includes(te)&&W===g?!0:te===W};return Object.assign(Object.assign({},p),{value:M,valueIsNumericString:!1,isValidInputCharacter:B,isCharacterSame:U,onValueChange:L,format:y,removeFormatting:x,getCaretBoundary:function(G){return nBe(G,e)},onKeyDown:H,onBlur:D})}function sBe(e){var t=iBe(e);return sr.createElement(Q$e,Object.assign({},t))}function Pne({direction:e,style:t,...n}){return R.jsx("svg",{style:{width:"var(--ni-chevron-size)",height:"var(--ni-chevron-size)",transform:e==="up"?"rotate(180deg)":void 0,...t},viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n,children:R.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}var aU={root:"m_e2f5cd4e",controls:"m_95e17d22",control:"m_80b4b171"};const oBe=/^(0\.0*|-0(\.0*)?)$/,aBe=/^-?0\d+(\.\d+)?\.?$/;function uU(e){return typeof e=="string"&&e!==""&&!Number.isNaN(Number(e))}function vF(e){return typeof e=="number"?e<Number.MAX_SAFE_INTEGER:e===""||uU(e)&&Number(e)<Number.MAX_SAFE_INTEGER}function uBe(e){return e.toString().replace(".","").length}function lBe(e,t){return(typeof e=="number"?e<Number.MAX_SAFE_INTEGER:!Number.isNaN(Number(e)))&&!Number.isNaN(e)&&uBe(t)<14&&t!==""}function Nne(e,t,n){if(e===void 0)return!0;const r=t===void 0||e>=t,i=n===void 0||e<=n;return r&&i}const cBe={step:1,clampBehavior:"blur",allowDecimal:!0,allowNegative:!0,withKeyboardEvents:!0,allowLeadingZeros:!0,trimLeadingZeroesOnBlur:!0,startValue:0},fBe=(e,{size:t})=>({controls:{"--ni-chevron-size":_r(t,"ni-chevron-size")}}),NW=Bt((e,t)=>{const n=dt("NumberInput",cBe,e),{className:r,classNames:i,styles:s,unstyled:o,vars:a,onChange:u,onValueChange:l,value:c,defaultValue:f,max:d,min:h,step:p,hideControls:m,rightSection:g,isAllowed:b,clampBehavior:y,onBlur:x,allowDecimal:w,decimalScale:T,onKeyDown:A,onKeyDownCapture:k,handlersRef:I,startValue:O,disabled:M,rightSectionPointerEvents:L,allowNegative:H,readOnly:D,size:B,rightSectionWidth:U,stepHoldInterval:G,stepHoldDelay:ee,allowLeadingZeros:ne,withKeyboardEvents:ue,trimLeadingZeroesOnBlur:X,...q}=n,te=xn({name:"NumberInput",classes:aU,props:n,classNames:i,styles:s,unstyled:o,vars:a,varsResolver:fBe}),{resolvedClassNames:W,resolvedStyles:Z}=Sw({classNames:i,styles:s,props:n}),[oe,pe]=Bu({value:c,defaultValue:f,finalValue:"",onChange:u}),ce=ee!==void 0&&G!==void 0,he=z.useRef(null),Ee=z.useRef(null),Ae=z.useRef(0),ge=(Ke,Lt)=>{Lt.source==="event"&&pe(lBe(Ke.floatValue,Ke.value)&&!oBe.test(Ke.value)&&!(ne&&aBe.test(Ke.value))?Ke.floatValue:Ke.value),l==null||l(Ke,Lt)},me=Ke=>{const Lt=String(Ke).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return Lt?Math.max(0,(Lt[1]?Lt[1].length:0)-(Lt[2]?+Lt[2]:0)):0},Oe=Ke=>{he.current&&typeof Ke<"u"&&he.current.setSelectionRange(Ke,Ke)},Me=z.useRef(Gj);Me.current=()=>{if(!vF(oe))return;let Ke;const Lt=me(oe),sn=me(p),Fe=Math.max(Lt,sn),Qe=10**Fe;if(!uU(oe)&&(typeof oe!="number"||Number.isNaN(oe)))Ke=Am(O,h,d);else if(d!==void 0){const Vt=(Math.round(Number(oe)*Qe)+Math.round(p*Qe))/Qe;Ke=Vt<=d?Vt:d}else Ke=(Math.round(Number(oe)*Qe)+Math.round(p*Qe))/Qe;const wt=Ke.toFixed(Fe);pe(parseFloat(wt)),l==null||l({floatValue:parseFloat(wt),formattedValue:wt,value:wt},{source:"increment"}),setTimeout(()=>{var Vt;return Oe((Vt=he.current)==null?void 0:Vt.value.length)},0)};const Ye=z.useRef(Gj);Ye.current=()=>{if(!vF(oe))return;let Ke;const Lt=h!==void 0?h:H?Number.MIN_SAFE_INTEGER:0,sn=me(oe),Fe=me(p),Qe=Math.max(sn,Fe),wt=10**Qe;if(!uU(oe)&&typeof oe!="number"||Number.isNaN(oe))Ke=Am(O,Lt,d);else{const Wt=(Math.round(Number(oe)*wt)-Math.round(p*wt))/wt;Ke=Lt!==void 0&&Wt<Lt?Lt:Wt}const Vt=Ke.toFixed(Qe);pe(parseFloat(Vt)),l==null||l({floatValue:parseFloat(Vt),formattedValue:Vt,value:Vt},{source:"decrement"}),setTimeout(()=>{var Wt;return Oe((Wt=he.current)==null?void 0:Wt.value.length)},0)};const lt=Ke=>{A==null||A(Ke),!(D||!ue)&&(Ke.key==="ArrowUp"&&(Ke.preventDefault(),Me.current()),Ke.key==="ArrowDown"&&(Ke.preventDefault(),Ye.current()))},We=Ke=>{if(k==null||k(Ke),Ke.key==="Backspace"){const Lt=he.current;Lt.selectionStart===0&&Lt.selectionStart===Lt.selectionEnd&&(Ke.preventDefault(),window.setTimeout(()=>Oe(0),0))}};Z8(I,{increment:Me.current,decrement:Ye.current});const nt=Ke=>{Ke?Me.current():Ye.current(),Ae.current+=1},yt=Ke=>{if(nt(Ke),ce){const Lt=typeof G=="number"?G:G(Ae.current);Ee.current=window.setTimeout(()=>yt(Ke),Lt)}},_t=(Ke,Lt)=>{var sn;Ke.preventDefault(),(sn=he.current)==null||sn.focus(),nt(Lt),ce&&(Ee.current=window.setTimeout(()=>yt(Lt),ee))},Rt=()=>{Ee.current&&window.clearTimeout(Ee.current),Ee.current=null,Ae.current=0},Et=R.jsxs("div",{...te("controls"),children:[R.jsx(rh,{...te("control"),tabIndex:-1,"aria-hidden":!0,disabled:M||typeof oe=="number"&&d!==void 0&&oe>=d,mod:{direction:"up"},onMouseDown:Ke=>Ke.preventDefault(),onPointerDown:Ke=>{_t(Ke,!0)},onPointerUp:Rt,onPointerLeave:Rt,children:R.jsx(Pne,{direction:"up"})}),R.jsx(rh,{...te("control"),tabIndex:-1,"aria-hidden":!0,disabled:M||typeof oe=="number"&&h!==void 0&&oe<=h,mod:{direction:"down"},onMouseDown:Ke=>Ke.preventDefault(),onPointerDown:Ke=>{_t(Ke,!1)},onPointerUp:Rt,onPointerLeave:Rt,children:R.jsx(Pne,{direction:"down"})})]});return R.jsx(ap,{component:sBe,allowNegative:H,className:va(aU.root,r),size:B,...q,readOnly:D,disabled:M,value:oe,getInputRef:yu(t,he),onValueChange:ge,rightSection:m||D||!vF(oe)?g:g||Et,classNames:W,styles:Z,unstyled:o,__staticSelector:"NumberInput",decimalScale:w?T:0,onKeyDown:lt,onKeyDownCapture:We,rightSectionPointerEvents:L??(M?"none":void 0),rightSectionWidth:U??`var(--ni-right-section-width-${B||"sm"})`,allowLeadingZeros:ne,onBlur:Ke=>{if(x==null||x(Ke),y==="blur"&&typeof oe=="number"&&Am(oe,h,d)!==oe&&pe(Am(oe,h,d)),X&&typeof oe=="string"&&me(oe)<15){const Lt=oe.replace(/^0+/,""),sn=parseFloat(Lt);pe(Number.isNaN(sn)||sn>Number.MAX_SAFE_INTEGER?Lt:Am(sn,h,d))}},isAllowed:Ke=>y==="strict"?b?b(Ke)&&Nne(Ke.floatValue,h,d):Nne(Ke.floatValue,h,d):b?b(Ke):!0})});NW.classes={...ap.classes,...aU};NW.displayName="@mantine/core/NumberInput";const[dBe,Nye]=Al("Progress.Root component was not found in tree");var uR={root:"m_db6d6462",section:"m_2242eb65","stripes-animation":"m_81a374bd",label:"m_91e40b74"};const hBe={},DW=Bt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=dt("ProgressLabel",hBe,e),u=Nye();return R.jsx(He,{ref:t,...u.getStyles("label",{className:r,style:i,classNames:n,styles:s}),...a})});DW.classes=uR;DW.displayName="@mantine/core/ProgressLabel";const pBe={},mBe=(e,{size:t,radius:n,transitionDuration:r})=>({root:{"--progress-size":_r(t,"progress-size"),"--progress-radius":n===void 0?void 0:as(n),"--progress-transition-duration":typeof r=="number"?`${r}ms`:void 0}}),s9=Bt((e,t)=>{const n=dt("ProgressRoot",pBe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,autoContrast:l,transitionDuration:c,...f}=n,d=xn({name:"Progress",classes:uR,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:mBe});return R.jsx(dBe,{value:{getStyles:d,autoContrast:l},children:R.jsx(He,{ref:t,...d("root"),...f})})});s9.classes=uR;s9.displayName="@mantine/core/ProgressRoot";const gBe={withAria:!0},o9=Bt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,withAria:u,color:l,striped:c,animated:f,mod:d,...h}=dt("ProgressSection",gBe,e),p=Nye(),m=Wa(),g=u?{role:"progressbar","aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":a,"aria-valuetext":`${a}%`}:{};return R.jsx(He,{ref:t,...p.getStyles("section",{className:r,classNames:n,styles:s,style:i}),...h,...g,mod:[{striped:c||f,animated:f},d],__vars:{"--progress-section-width":`${a}%`,"--progress-section-color":Fs(l,m),"--progress-label-color":lT(p.autoContrast,m)?Ew({color:l,theme:m,autoContrast:p.autoContrast}):void 0}})});o9.classes=uR;o9.displayName="@mantine/core/ProgressSection";const yBe={},_T=Bt((e,t)=>{const n=dt("Progress",yBe,e),{value:r,classNames:i,styles:s,vars:o,color:a,striped:u,animated:l,"aria-label":c,...f}=n,{resolvedClassNames:d,resolvedStyles:h}=Sw({classNames:i,styles:s,props:n});return R.jsx(s9,{ref:t,classNames:d,styles:h,vars:o,...f,children:R.jsx(o9,{value:r,color:a,striped:u,animated:l,"aria-label":c})})});_T.classes=uR;_T.displayName="@mantine/core/Progress";_T.Section=o9;_T.Root=s9;_T.Label=DW;const[vBe,Dye]=Fb(),[bBe,xBe]=Fb();var Oye={card:"m_9dc8ae12"};const _Be={withBorder:!0},wBe=(e,{radius:t})=>({card:{"--card-radius":as(t)}}),OW=Bt((e,t)=>{const n=dt("RadioCard",_Be,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,checked:l,mod:c,withBorder:f,value:d,onClick:h,name:p,onKeyDown:m,...g}=n,b=xn({name:"RadioCard",classes:Oye,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:wBe,rootSelector:"card"}),{dir:y}=Bb(),x=Dye(),w=typeof l=="boolean"?l:(x==null?void 0:x.value)===d||!1,T=p||(x==null?void 0:x.name),A=k=>{if(m==null||m(k),["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(k.nativeEvent.code)){k.preventDefault();const I=Array.from(document.querySelectorAll(`[role="radio"][name="${T||"__mantine"}"]`)),O=I.findIndex(H=>H===k.target),M=O+1>=I.length?0:O+1,L=O-1<0?I.length-1:O-1;k.nativeEvent.code==="ArrowDown"&&(I[M].focus(),I[M].click()),k.nativeEvent.code==="ArrowUp"&&(I[L].focus(),I[L].click()),k.nativeEvent.code==="ArrowLeft"&&(I[y==="ltr"?L:M].focus(),I[y==="ltr"?L:M].click()),k.nativeEvent.code==="ArrowRight"&&(I[y==="ltr"?M:L].focus(),I[y==="ltr"?M:L].click())}};return R.jsx(bBe,{value:{checked:w},children:R.jsx(rh,{ref:t,mod:[{"with-border":f,checked:w},c],...b("card"),...g,role:"radio","aria-checked":w,name:T,onClick:k=>{h==null||h(k),x==null||x.onChange(d||"")},onKeyDown:A})})});OW.displayName="@mantine/core/RadioCard";OW.classes=Oye;const EBe={},MW=Bt((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,name:u,readOnly:l,...c}=dt("RadioGroup",EBe,e),f=lf(u),[d,h]=Bu({value:n,defaultValue:r,finalValue:"",onChange:i}),p=m=>!l&&h(typeof m=="string"?m:m.currentTarget.value);return R.jsx(vBe,{value:{value:d,onChange:p,size:s,name:f},children:R.jsx(ys.Wrapper,{size:s,ref:t,...o,...c,labelElement:"div",__staticSelector:"RadioGroup",children:R.jsx(cW,{role:"radiogroup",children:a})})})});MW.classes=ys.Wrapper.classes;MW.displayName="@mantine/core/RadioGroup";function Mye({size:e,style:t,...n}){return R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 5 5",style:{width:ot(e),height:ot(e),...t},"aria-hidden":!0,...n,children:R.jsx("circle",{cx:"2.5",cy:"2.5",r:"2.5",fill:"currentColor"})})}var Lye={indicator:"m_717d7ff6",icon:"m_3e4da632","indicator--outline":"m_2980836c"};const SBe={icon:Mye},TBe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=yg({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--radio-size":_r(r,"radio-size"),"--radio-radius":t===void 0?void 0:as(t),"--radio-color":s==="outline"?u:Fs(n,e),"--radio-icon-size":_r(r,"radio-icon-size"),"--radio-icon-color":i?Fs(i,e):lT(o,e)?Ew({color:n,theme:e,autoContrast:o}):void 0}}},LW=Bt((e,t)=>{const n=dt("RadioIndicator",SBe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,icon:l,radius:c,color:f,iconColor:d,autoContrast:h,checked:p,mod:m,variant:g,disabled:b,...y}=n,x=l,w=xn({name:"RadioIndicator",classes:Lye,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:TBe,rootSelector:"indicator"}),T=xBe(),A=typeof p=="boolean"?p:(T==null?void 0:T.checked)||!1;return R.jsx(He,{ref:t,...w("indicator",{variant:g}),variant:g,mod:[{checked:A,disabled:b},m],...y,children:R.jsx(x,{...w("icon")})})});LW.displayName="@mantine/core/RadioIndicator";LW.classes=Lye;var Fye={root:"m_f3f1af94",inner:"m_89c4f5e4",icon:"m_f3ed6b2b",radio:"m_8a3dbb89","radio--outline":"m_1bfe9d39"};const CBe={labelPosition:"right"},ABe=(e,{size:t,radius:n,color:r,iconColor:i,variant:s,autoContrast:o})=>{const a=yg({color:r||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--radio-size":_r(t,"radio-size"),"--radio-radius":n===void 0?void 0:as(n),"--radio-color":s==="outline"?u:Fs(r,e),"--radio-icon-color":i?Fs(i,e):lT(o,e)?Ew({color:r,theme:e,autoContrast:o}):void 0,"--radio-icon-size":_r(t,"radio-icon-size")}}},Qd=Bt((e,t)=>{const n=dt("Radio",CBe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,id:l,size:c,label:f,labelPosition:d,description:h,error:p,radius:m,color:g,variant:b,disabled:y,wrapperProps:x,icon:w=Mye,rootRef:T,iconColor:A,onChange:k,mod:I,...O}=n,M=xn({name:"Radio",classes:Fye,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:ABe}),L=Dye(),H=(L==null?void 0:L.size)??c,D=n.size?c:H,{styleProps:B,rest:U}=Cw(O),G=lf(l),ee=L?{checked:L.value===U.value,name:U.name??L.name,onChange:ne=>{L.onChange(ne),k==null||k(ne)}}:{};return R.jsx(GO,{...M("root"),__staticSelector:"Radio",__stylesApiProps:n,id:G,size:D,labelPosition:d,label:f,description:h,error:p,disabled:y,classNames:r,styles:o,unstyled:a,"data-checked":ee.checked||void 0,variant:b,ref:T,mod:I,...B,...x,children:R.jsxs(He,{...M("inner"),mod:{"label-position":d},children:[R.jsx(He,{...M("radio",{focusable:!0,variant:b}),onChange:k,...U,...ee,component:"input",mod:{error:!!p},ref:t,id:G,disabled:y,type:"radio"}),R.jsx(w,{...M("icon"),"aria-hidden":!0})]})})});Qd.classes=Fye;Qd.displayName="@mantine/core/Radio";Qd.Group=MW;Qd.Card=OW;Qd.Indicator=LW;const kBe={duration:100,transition:"fade"};function RBe(e,t){return{...kBe,...t,...e}}function IBe({offset:e,position:t,defaultOpened:n}){const[r,i]=z.useState(n),s=z.useRef(null),{x:o,y:a,elements:u,refs:l,update:c,placement:f}=Dq({placement:t,middleware:[Rq({crossAxis:!0,padding:5,rootBoundary:"document"})]}),d=f.includes("right")?e:t.includes("left")?e*-1:0,h=f.includes("bottom")?e:t.includes("top")?e*-1:0,p=z.useCallback(({clientX:m,clientY:g})=>{l.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:m,y:g,left:m+d,top:g+h,right:m,bottom:g}}})},[u.reference]);return z.useEffect(()=>{if(l.floating.current){const m=s.current;m.addEventListener("mousemove",p);const g=Wy(l.floating.current);return g.forEach(b=>{b.addEventListener("scroll",c)}),()=>{m.removeEventListener("mousemove",p),g.forEach(b=>{b.removeEventListener("scroll",c)})}}},[u.reference,l.floating.current,c,p,r]),{handleMouseMove:p,x:o,y:a,opened:r,setOpened:i,boundaryRef:s,floating:l.setFloating}}var a9={tooltip:"m_1b3c8819",arrow:"m_f898399f"};const PBe={refProp:"ref",withinPortal:!0,offset:10,defaultOpened:!1,position:"right",zIndex:ld("popover")},NBe=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:as(t),"--tooltip-bg":n?Fs(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),FW=Bt((e,t)=>{const n=dt("TooltipFloating",PBe,e),{children:r,refProp:i,withinPortal:s,style:o,className:a,classNames:u,styles:l,unstyled:c,radius:f,color:d,label:h,offset:p,position:m,multiline:g,zIndex:b,disabled:y,defaultOpened:x,variant:w,vars:T,portalProps:A,...k}=n,I=Wa(),O=xn({name:"TooltipFloating",props:n,classes:a9,className:a,style:o,classNames:u,styles:l,unstyled:c,rootSelector:"tooltip",vars:T,varsResolver:NBe}),{handleMouseMove:M,x:L,y:H,opened:D,boundaryRef:B,floating:U,setOpened:G}=IBe({offset:p,position:m,defaultOpened:x});if(!Lb(r))throw new Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const ee=yu(B,OO(r),t),ne=r.props,ue=q=>{var te;(te=ne.onMouseEnter)==null||te.call(ne,q),M(q),G(!0)},X=q=>{var te;(te=ne.onMouseLeave)==null||te.call(ne,q),G(!1)};return R.jsxs(R.Fragment,{children:[R.jsx(jb,{...A,withinPortal:s,children:R.jsx(He,{...k,...O("tooltip",{style:{...pq(o,I),zIndex:b,display:!y&&D?"block":"none",top:(H&&Math.round(H))??"",left:(L&&Math.round(L))??""}}),variant:w,ref:U,mod:{multiline:g},children:h})}),z.cloneElement(r,{...ne,[i]:ee,onMouseEnter:ue,onMouseLeave:X})]})});FW.classes=a9;FW.displayName="@mantine/core/TooltipFloating";const $ye=z.createContext(!1),DBe=$ye.Provider,OBe=()=>z.useContext($ye),MBe={openDelay:0,closeDelay:0};function $W(e){const{openDelay:t,closeDelay:n,children:r}=dt("TooltipGroup",MBe,e);return R.jsx(DBe,{value:!0,children:R.jsx(jMe,{delay:{open:t,close:n},children:r})})}$W.displayName="@mantine/core/TooltipGroup";$W.extend=e=>e;function LBe(e){if(e===void 0)return{shift:!0,flip:!0};const t={...e};return e.shift===void 0&&(t.shift=!0),e.flip===void 0&&(t.flip=!0),t}function FBe(e){const t=LBe(e.middlewares),n=[lge(e.offset)];return t.shift&&n.push(Rq(typeof t.shift=="boolean"?{padding:8}:{padding:8,...t.shift})),t.flip&&n.push(typeof t.flip=="boolean"?sN():sN(t.flip)),n.push(cge({element:e.arrowRef,padding:e.arrowOffset})),t.inline?n.push(typeof t.inline=="boolean"?ok():ok(t.inline)):e.inline&&n.push(ok()),n}function $Be(e){var A,k,I;const[t,n]=z.useState(e.defaultOpened),i=typeof e.opened=="boolean"?e.opened:t,s=OBe(),o=lf(),{delay:a,currentId:u,setCurrentId:l}=pge(),c=z.useCallback(O=>{n(O),O&&l(o)},[l,o]),{x:f,y:d,context:h,refs:p,update:m,placement:g,middlewareData:{arrow:{x:b,y}={}}}=Dq({strategy:e.strategy,placement:e.position,open:i,onOpenChange:c,middleware:FBe(e)});UMe(h,{id:o});const{getReferenceProps:x,getFloatingProps:w}=YMe([BMe(h,{enabled:(A=e.events)==null?void 0:A.hover,delay:s?a:{open:e.openDelay,close:e.closeDelay},mouseOnly:!((k=e.events)!=null&&k.touch)}),GMe(h,{enabled:(I=e.events)==null?void 0:I.focus,visibleOnly:!0}),XMe(h,{role:"tooltip"}),qMe(h,{enabled:typeof e.opened>"u"})]);wge({opened:i,position:e.position,positionDependencies:e.positionDependencies,floating:{refs:p,update:m}}),eg(()=>{var O;(O=e.onPositionChange)==null||O.call(e,g)},[g]);const T=i&&u&&u!==o;return{x:f,y:d,arrowX:b,arrowY:y,reference:p.setReference,floating:p.setFloating,getFloatingProps:w,getReferenceProps:x,isGroupPhase:T,opened:i,placement:g}}const Dne={position:"top",refProp:"ref",withinPortal:!0,inline:!1,defaultOpened:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:ld("popover"),positionDependencies:[],middlewares:{flip:!0,shift:!0,inline:!1}},BBe=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:as(t),"--tooltip-bg":n?Fs(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),Ys=Bt((e,t)=>{const n=dt("Tooltip",Dne,e),{children:r,position:i,refProp:s,label:o,openDelay:a,closeDelay:u,onPositionChange:l,opened:c,defaultOpened:f,withinPortal:d,radius:h,color:p,classNames:m,styles:g,unstyled:b,style:y,className:x,withArrow:w,arrowSize:T,arrowOffset:A,arrowRadius:k,arrowPosition:I,offset:O,transitionProps:M,multiline:L,events:H,zIndex:D,disabled:B,positionDependencies:U,onClick:G,onMouseEnter:ee,onMouseLeave:ne,inline:ue,variant:X,keepMounted:q,vars:te,portalProps:W,mod:Z,floatingStrategy:oe,middlewares:pe,...ce}=dt("Tooltip",Dne,n),{dir:he}=Bb(),Ee=z.useRef(null),Ae=$Be({position:mge(he,i),closeDelay:u,openDelay:a,onPositionChange:l,opened:c,defaultOpened:f,events:H,arrowRef:Ee,arrowOffset:A,offset:typeof O=="number"?O+(w?T/2:0):O,positionDependencies:[...U,r],inline:ue,strategy:oe,middlewares:pe}),ge=xn({name:"Tooltip",props:n,classes:a9,className:x,style:y,classNames:m,styles:g,unstyled:b,rootSelector:"tooltip",vars:te,varsResolver:BBe});if(!Lb(r))throw new Error("[@mantine/core] Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const me=yu(Ae.reference,OO(r),t),Oe=RBe(M,{duration:100,transition:"fade"}),Me=r.props;return R.jsxs(R.Fragment,{children:[R.jsx(jb,{...W,withinPortal:d,children:R.jsx(vg,{...Oe,keepMounted:q,mounted:!B&&!!Ae.opened,duration:Ae.isGroupPhase?10:Oe.duration,children:Ye=>R.jsxs(He,{...ce,"data-fixed":oe==="fixed"||void 0,variant:X,mod:[{multiline:L},Z],...Ae.getFloatingProps({ref:Ae.floating,className:ge("tooltip").className,style:{...ge("tooltip").style,...Ye,zIndex:D,top:Ae.y??0,left:Ae.x??0}}),children:[o,R.jsx(Oq,{ref:Ee,arrowX:Ae.arrowX,arrowY:Ae.arrowY,visible:w,position:Ae.placement,arrowSize:T,arrowOffset:A,arrowRadius:k,arrowPosition:I,...ge("arrow")})]})})}),z.cloneElement(r,Ae.getReferenceProps({onClick:G,onMouseEnter:ee,onMouseLeave:ne,onMouseMove:n.onMouseMove,onPointerDown:n.onPointerDown,onPointerEnter:n.onPointerEnter,[s]:me,className:va(x,Me.className),...Me}))]})});Ys.classes=a9;Ys.displayName="@mantine/core/Tooltip";Ys.Floating=FW;Ys.Group=$W;const jBe={searchable:!1,withCheckIcon:!0,allowDeselect:!0,checkIconPosition:"left"},wT=Bt((e,t)=>{const n=dt("Select",jBe,e),{classNames:r,styles:i,unstyled:s,vars:o,dropdownOpened:a,defaultDropdownOpened:u,onDropdownClose:l,onDropdownOpen:c,onFocus:f,onBlur:d,onClick:h,onChange:p,data:m,value:g,defaultValue:b,selectFirstOptionOnChange:y,onOptionSubmit:x,comboboxProps:w,readOnly:T,disabled:A,filter:k,limit:I,withScrollArea:O,maxDropdownHeight:M,size:L,searchable:H,rightSection:D,checkIconPosition:B,withCheckIcon:U,nothingFoundMessage:G,name:ee,form:ne,searchValue:ue,defaultSearchValue:X,onSearchChange:q,allowDeselect:te,error:W,rightSectionPointerEvents:Z,id:oe,clearable:pe,clearButtonProps:ce,hiddenInputProps:he,renderOption:Ee,onClear:Ae,autoComplete:ge,scrollAreaProps:me,__defaultRightSection:Oe,__clearSection:Me,__clearable:Ye,...lt}=n,We=z.useMemo(()=>qge(m),[m]),nt=z.useMemo(()=>Qq(We),[We]),yt=lf(oe),[_t,Rt,Et]=Bu({value:g,defaultValue:b,finalValue:null,onChange:p}),Ke=typeof _t=="string"?nt[_t]:void 0,Lt=GDe(Ke),[sn,Fe]=Bu({value:ue,defaultValue:X,finalValue:Ke?Ke.label:"",onChange:q}),Qe=uW({opened:a,defaultOpened:u,onDropdownOpen:()=>{c==null||c(),Qe.updateSelectedOptionIndex("active",{scrollIntoView:!0})},onDropdownClose:()=>{l==null||l(),Qe.resetSelectedOption()}}),{resolvedClassNames:wt,resolvedStyles:Vt}=Sw({props:n,styles:i,classNames:r});z.useEffect(()=>{y&&Qe.selectFirstOption()},[y,_t]),z.useEffect(()=>{g===null&&Fe(""),typeof g=="string"&&Ke&&((Lt==null?void 0:Lt.value)!==Ke.value||(Lt==null?void 0:Lt.label)!==Ke.label)&&Fe(Ke.label)},[g,Ke]);const Wt=R.jsx(di.ClearButton,{...ce,onClear:()=>{Rt(null,null),Fe(""),Ae==null||Ae()}});return R.jsxs(R.Fragment,{children:[R.jsxs(di,{store:Qe,__staticSelector:"Select",classNames:wt,styles:Vt,unstyled:s,readOnly:T,onOptionSubmit:bn=>{x==null||x(bn);const Nn=te&&nt[bn].value===_t?null:nt[bn],Zn=Nn?Nn.value:null;Zn!==_t&&Rt(Zn,Nn),!Et&&Fe(typeof Zn=="string"&&(Nn==null?void 0:Nn.label)||""),Qe.closeDropdown()},size:L,...w,children:[R.jsx(di.Target,{targetType:H?"input":"button",autoComplete:ge,children:R.jsx(ap,{id:yt,ref:t,__defaultRightSection:R.jsx(di.Chevron,{size:L,error:W,unstyled:s}),__clearSection:Wt,__clearable:pe&&!!_t&&!A&&!T,rightSection:D,rightSectionPointerEvents:Z||(Wt?"all":"none"),...lt,size:L,__staticSelector:"Select",disabled:A,readOnly:T||!H,value:sn,onChange:bn=>{Fe(bn.currentTarget.value),Qe.openDropdown(),y&&Qe.selectFirstOption()},onFocus:bn=>{H&&Qe.openDropdown(),f==null||f(bn)},onBlur:bn=>{var Nn;H&&Qe.closeDropdown(),Fe(_t!=null&&((Nn=nt[_t])==null?void 0:Nn.label)||""),d==null||d(bn)},onClick:bn=>{H?Qe.openDropdown():Qe.toggleDropdown(),h==null||h(bn)},classNames:wt,styles:Vt,unstyled:s,pointer:!H,error:W})}),R.jsx(lye,{data:We,hidden:T||A,filter:k,search:sn,limit:I,hiddenWhenEmpty:!G,withScrollArea:O,maxDropdownHeight:M,filterOptions:H&&(Ke==null?void 0:Ke.label)!==sn,value:_t,checkIconPosition:B,withCheckIcon:U,nothingFoundMessage:G,unstyled:s,labelId:lt.label?`${yt}-label`:void 0,"aria-label":lt.label?void 0:lt["aria-label"],renderOption:Ee,scrollAreaProps:me})]}),R.jsx(di.HiddenInput,{value:_t,name:ee,form:ne,disabled:A,...he})]})});wT.classes={...ap.classes,...di.classes};wT.displayName="@mantine/core/Select";function UBe({spacing:e,verticalSpacing:t,cols:n,selector:r}){var c;const i=Wa(),s=t===void 0?e:t,o=Mb({"--sg-spacing-x":Ha(c0(e)),"--sg-spacing-y":Ha(c0(s)),"--sg-cols":(c=c0(n))==null?void 0:c.toString()}),a=Cs(i.breakpoints).reduce((f,d)=>(f[d]||(f[d]={}),typeof e=="object"&&e[d]!==void 0&&(f[d]["--sg-spacing-x"]=Ha(e[d])),typeof s=="object"&&s[d]!==void 0&&(f[d]["--sg-spacing-y"]=Ha(s[d])),typeof n=="object"&&n[d]!==void 0&&(f[d]["--sg-cols"]=n[d]),f),{}),l=Uk(Cs(a),i.breakpoints).filter(f=>Cs(a[f.value]).length>0).map(f=>({query:`(min-width: ${i.breakpoints[f.value]})`,styles:a[f.value]}));return R.jsx(Tw,{styles:o,media:l,selector:r})}function bF(e){return typeof e=="object"&&e!==null?Cs(e):[]}function zBe(e){return e.sort((t,n)=>jk(t)-jk(n))}function VBe({spacing:e,verticalSpacing:t,cols:n}){const r=Array.from(new Set([...bF(e),...bF(t),...bF(n)]));return zBe(r)}function HBe({spacing:e,verticalSpacing:t,cols:n,selector:r}){var l;const i=t===void 0?e:t,s=Mb({"--sg-spacing-x":Ha(c0(e)),"--sg-spacing-y":Ha(c0(i)),"--sg-cols":(l=c0(n))==null?void 0:l.toString()}),o=VBe({spacing:e,verticalSpacing:t,cols:n}),a=o.reduce((c,f)=>(c[f]||(c[f]={}),typeof e=="object"&&e[f]!==void 0&&(c[f]["--sg-spacing-x"]=Ha(e[f])),typeof i=="object"&&i[f]!==void 0&&(c[f]["--sg-spacing-y"]=Ha(i[f])),typeof n=="object"&&n[f]!==void 0&&(c[f]["--sg-cols"]=n[f]),c),{}),u=o.map(c=>({query:`simple-grid (min-width: ${c})`,styles:a[c]}));return R.jsx(Tw,{styles:s,container:u,selector:r})}var Bye={container:"m_925c2d2c",root:"m_2415a157"};const qBe={cols:1,spacing:"md",type:"media"},BW=Bt((e,t)=>{const n=dt("SimpleGrid",qBe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,cols:l,verticalSpacing:c,spacing:f,type:d,...h}=n,p=xn({name:"SimpleGrid",classes:Bye,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u}),m=tR();return d==="container"?R.jsxs(R.Fragment,{children:[R.jsx(HBe,{...n,selector:`.${m}`}),R.jsx("div",{...p("container"),children:R.jsx(He,{ref:t,...p("root",{className:m}),...h})})]}):R.jsxs(R.Fragment,{children:[R.jsx(UBe,{...n,selector:`.${m}`}),R.jsx(He,{ref:t,...p("root",{className:m}),...h})]})});BW.classes=Bye;BW.displayName="@mantine/core/SimpleGrid";const[WBe,u9]=Al("SliderProvider was not found in tree"),jye=z.forwardRef(({size:e,disabled:t,variant:n,color:r,thumbSize:i,radius:s,...o},a)=>{const{getStyles:u}=u9();return R.jsx(He,{tabIndex:-1,variant:n,size:e,ref:a,...u("root"),...o})});jye.displayName="@mantine/core/SliderRoot";const Uye=z.forwardRef(({max:e,min:t,value:n,position:r,label:i,dragging:s,onMouseDown:o,onKeyDownCapture:a,labelTransitionProps:u,labelAlwaysOn:l,thumbLabel:c,onFocus:f,onBlur:d,showLabelOnHover:h,isHovered:p,children:m=null,disabled:g},b)=>{const{getStyles:y}=u9(),[x,w]=z.useState(!1),T=l||s||x||h&&p;return R.jsxs(He,{tabIndex:0,role:"slider","aria-label":c,"aria-valuemax":e,"aria-valuemin":t,"aria-valuenow":n,ref:b,__vars:{"--slider-thumb-offset":`${r}%`},...y("thumb",{focusable:!0}),mod:{dragging:s,disabled:g},onFocus:A=>{w(!0),typeof f=="function"&&f(A)},onBlur:A=>{w(!1),typeof d=="function"&&d(A)},onTouchStart:o,onMouseDown:o,onKeyDownCapture:a,onClick:A=>A.stopPropagation(),children:[m,R.jsx(vg,{mounted:i!=null&&!!T,transition:"fade",duration:0,...u,children:A=>R.jsx("div",{...y("label",{style:A}),children:i})})]})});Uye.displayName="@mantine/core/SliderThumb";function zye({value:e,min:t,max:n}){const r=(e-t)/(n-t)*100;return Math.min(Math.max(r,0),100)}function GBe({mark:e,offset:t,value:n,inverted:r=!1}){return r?typeof t=="number"&&e.value<=t||e.value>=n:typeof t=="number"?e.value>=t&&e.value<=n:e.value<=n}function Vye({marks:e,min:t,max:n,disabled:r,value:i,offset:s,inverted:o}){const{getStyles:a}=u9();if(!e)return null;const u=e.map((l,c)=>z.createElement(He,{...a("markWrapper"),__vars:{"--mark-offset":`${zye({value:l.value,min:t,max:n})}%`},key:c},R.jsx(He,{...a("mark"),mod:{filled:GBe({mark:l,value:i,offset:s,inverted:o}),disabled:r}}),l.label&&R.jsx("div",{...a("markLabel"),children:l.label})));return R.jsx("div",{children:u})}Vye.displayName="@mantine/core/SliderMarks";function Hye({filled:e,children:t,offset:n,disabled:r,marksOffset:i,inverted:s,containerProps:o,...a}){const{getStyles:u}=u9();return R.jsx(He,{...u("trackContainer"),mod:{disabled:r},...o,children:R.jsxs(He,{...u("track"),mod:{inverted:s,disabled:r},children:[R.jsx(He,{mod:{inverted:s,disabled:r},__vars:{"--slider-bar-width":`calc(${e}% + var(--slider-size))`,"--slider-bar-offset":`calc(${n}% - var(--slider-size))`},...u("bar")}),t,R.jsx(Vye,{...a,offset:i,disabled:r,inverted:s})]})})}Hye.displayName="@mantine/core/SliderTrack";function YBe({value:e,containerWidth:t,min:n,max:r,step:i,precision:s}){const a=(t?Math.min(Math.max(e,0),t)/t:e)*(r-n),u=(a!==0?Math.round(a/i)*i:0)+n,l=Math.max(u,n);return s!==void 0?Number(l.toFixed(s)):l}function a6(e,t){return parseFloat(e.toFixed(t))}function KBe(e){if(!e)return 0;const t=e.toString().split(".");return t.length>1?t[1].length:0}function xF(e,t){const r=[...t].sort((i,s)=>i.value-s.value).find(i=>i.value>e);return r?r.value:e}function _F(e,t){const r=[...t].sort((i,s)=>s.value-i.value).find(i=>i.value<e);return r?r.value:e}function One(e){const t=[...e].sort((n,r)=>n.value-r.value);return t.length>0?t[0].value:0}function Mne(e){const t=[...e].sort((n,r)=>n.value-r.value);return t.length>0?t[t.length-1].value:100}var qye={root:"m_dd36362e",label:"m_c9357328",thumb:"m_c9a9a60a",trackContainer:"m_a8645c2",track:"m_c9ade57f",bar:"m_38aeed47",markWrapper:"m_b7b0423a",mark:"m_dd33bc19",markLabel:"m_68c77a5b"};const XBe={radius:"xl",min:0,max:100,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,thumbLabel:"",showLabelOnHover:!0,disabled:!1,scale:e=>e},QBe=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":_r(t,"slider-size"),"--slider-color":n?Fs(n,e):void 0,"--slider-radius":i===void 0?void 0:as(i),"--slider-thumb-size":r!==void 0?ot(r):"calc(var(--slider-size) * 2)"}}),jW=Bt((e,t)=>{const n=dt("Slider",XBe,e),{classNames:r,styles:i,value:s,onChange:o,onChangeEnd:a,size:u,min:l,max:c,step:f,precision:d,defaultValue:h,name:p,marks:m,label:g,labelTransitionProps:b,labelAlwaysOn:y,thumbLabel:x,showLabelOnHover:w,thumbChildren:T,disabled:A,unstyled:k,scale:I,inverted:O,className:M,style:L,vars:H,hiddenInputProps:D,restrictToMarks:B,thumbProps:U,...G}=n,ee=xn({name:"Slider",props:n,classes:qye,classNames:r,className:M,styles:i,style:L,vars:H,varsResolver:QBe,unstyled:k}),{dir:ne}=Bb(),[ue,X]=z.useState(!1),[q,te]=Bu({value:typeof s=="number"?Am(s,l,c):s,defaultValue:typeof h=="number"?Am(h,l,c):h,finalValue:Am(0,l,c),onChange:o}),W=z.useRef(q),Z=z.useRef(null),oe=z.useRef(null),pe=zye({value:q,min:l,max:c}),ce=I(q),he=typeof g=="function"?g(ce):g,Ee=d??KBe(f),Ae=z.useCallback(({x:Me})=>{if(!A){const Ye=YBe({value:Me,min:l,max:c,step:f,precision:Ee});te(B&&(m!=null&&m.length)?Dte(Ye,m.map(lt=>lt.value)):Ye),W.current=Ye}},[A,l,c,f,Ee,te,m,B]),{ref:ge,active:me}=HDe(Ae,{onScrubEnd:()=>a==null?void 0:a(B&&(m!=null&&m.length)?Dte(W.current,m.map(Me=>Me.value)):W.current)},ne),Oe=Me=>{var Ye,lt,We,nt,yt,_t;if(!A)switch(Me.key){case"ArrowUp":{if(Me.preventDefault(),(Ye=oe.current)==null||Ye.focus(),B&&m){const Et=xF(q,m);te(Et),a==null||a(Et);break}const Rt=a6(Math.min(Math.max(q+f,l),c),Ee);te(Rt),a==null||a(Rt);break}case"ArrowRight":{if(Me.preventDefault(),(lt=oe.current)==null||lt.focus(),B&&m){const Et=ne==="rtl"?_F(q,m):xF(q,m);te(Et),a==null||a(Et);break}const Rt=a6(Math.min(Math.max(ne==="rtl"?q-f:q+f,l),c),Ee);te(Rt),a==null||a(Rt);break}case"ArrowDown":{if(Me.preventDefault(),(We=oe.current)==null||We.focus(),B&&m){const Et=_F(q,m);te(Et),a==null||a(Et);break}const Rt=a6(Math.min(Math.max(q-f,l),c),Ee);te(Rt),a==null||a(Rt);break}case"ArrowLeft":{if(Me.preventDefault(),(nt=oe.current)==null||nt.focus(),B&&m){const Et=ne==="rtl"?xF(q,m):_F(q,m);te(Et),a==null||a(Et);break}const Rt=a6(Math.min(Math.max(ne==="rtl"?q+f:q-f,l),c),Ee);te(Rt),a==null||a(Rt);break}case"Home":{if(Me.preventDefault(),(yt=oe.current)==null||yt.focus(),B&&m){te(One(m)),a==null||a(One(m));break}te(l),a==null||a(l);break}case"End":{if(Me.preventDefault(),(_t=oe.current)==null||_t.focus(),B&&m){te(Mne(m)),a==null||a(Mne(m));break}te(c),a==null||a(c);break}}};return R.jsx(WBe,{value:{getStyles:ee},children:R.jsxs(jye,{...G,ref:yu(t,Z),onKeyDownCapture:Oe,onMouseDownCapture:()=>{var Me;return(Me=Z.current)==null?void 0:Me.focus()},size:u,disabled:A,children:[R.jsx(Hye,{inverted:O,offset:0,filled:pe,marks:m,min:l,max:c,value:ce,disabled:A,containerProps:{ref:ge,onMouseEnter:w?()=>X(!0):void 0,onMouseLeave:w?()=>X(!1):void 0},children:R.jsx(Uye,{max:c,min:l,value:ce,position:pe,dragging:me,label:he,ref:oe,labelTransitionProps:b,labelAlwaysOn:y,thumbLabel:x,showLabelOnHover:w,isHovered:ue,disabled:A,...U,children:T})}),R.jsx("input",{type:"hidden",name:p,value:ce,...D})]})})});jW.classes=qye;jW.displayName="@mantine/core/Slider";const JBe={},Jd=Bt((e,t)=>{const{w:n,h:r,miw:i,mih:s,...o}=dt("Space",JBe,e);return R.jsx(He,{ref:t,...o,w:n,miw:i??n,h:r,mih:s??r})});Jd.displayName="@mantine/core/Space";var Wye={root:"m_559cce2d",content:"m_b912df4e",control:"m_b9131032"};const ZBe={maxHeight:100,initialState:!1},eje=(e,{transitionDuration:t})=>({root:{"--spoiler-transition-duration":t!==void 0?`${t}ms`:void 0}}),UW=Bt((e,t)=>{const n=dt("Spoiler",ZBe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,initialState:l,maxHeight:c,hideLabel:f,showLabel:d,children:h,controlRef:p,transitionDuration:m,id:g,expanded:b,onExpandedChange:y,...x}=n,w=xn({name:"Spoiler",classes:Wye,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:eje}),T=lf(g),A=`${T}-region`,[k,I]=Bu({value:b,defaultValue:l,finalValue:!1,onChange:y}),{ref:O,height:M}=WDe(),L=k?f:d,H=L!==null&&c<M;return R.jsxs(He,{...w("root"),id:T,ref:t,"data-has-spoiler":H||void 0,...x,children:[H&&R.jsx(kw,{component:"button",type:"button",ref:p,onClick:()=>I(!k),"aria-expanded":k,"aria-controls":A,...w("control"),children:L}),R.jsx("div",{...w("content",{style:{maxHeight:k?M?ot(M):void 0:ot(c)}}),"data-reduce-motion":!0,role:"region",id:A,children:R.jsx("div",{ref:O,children:h})})]})});UW.classes=Wye;UW.displayName="@mantine/core/Spoiler";var Gye={root:"m_6d731127"};const tje={gap:"md",align:"stretch",justify:"flex-start"},nje=(e,{gap:t,align:n,justify:r})=>({root:{"--stack-gap":Ha(t),"--stack-align":n,"--stack-justify":r}}),Jf=Bt((e,t)=>{const n=dt("Stack",tje,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,align:l,justify:c,gap:f,variant:d,...h}=n,p=xn({name:"Stack",props:n,classes:Gye,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:nje});return R.jsx(He,{ref:t,...p("root"),variant:d,...h})});Jf.classes=Gye;Jf.displayName="@mantine/core/Stack";const Yye=z.createContext(null),rje=Yye.Provider,ije=()=>z.useContext(Yye),sje={},zW=Bt((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:u,...l}=dt("SwitchGroup",sje,e),[c,f]=Bu({value:n,defaultValue:r,finalValue:[],onChange:i}),d=h=>{const p=h.currentTarget.value;!u&&f(c.includes(p)?c.filter(m=>m!==p):[...c,p])};return R.jsx(rje,{value:{value:c,onChange:d,size:s},children:R.jsx(ys.Wrapper,{size:s,ref:t,...o,...l,labelElement:"div",__staticSelector:"SwitchGroup",children:R.jsx(cW,{role:"group",children:a})})})});zW.classes=ys.Wrapper.classes;zW.displayName="@mantine/core/SwitchGroup";var Kye={root:"m_5f93f3bb",input:"m_926b4011",track:"m_9307d992",thumb:"m_93039a1d",trackLabel:"m_8277e082"};const oje={labelPosition:"right"},aje=(e,{radius:t,color:n,size:r})=>({root:{"--switch-radius":t===void 0?void 0:as(t),"--switch-height":_r(r,"switch-height"),"--switch-width":_r(r,"switch-width"),"--switch-thumb-size":_r(r,"switch-thumb-size"),"--switch-label-font-size":_r(r,"switch-label-font-size"),"--switch-track-label-padding":_r(r,"switch-track-label-padding"),"--switch-color":n?Fs(n,e):void 0}}),I_=Bt((e,t)=>{const n=dt("Switch",oje,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,label:c,offLabel:f,onLabel:d,id:h,size:p,radius:m,wrapperProps:g,thumbIcon:b,checked:y,defaultChecked:x,onChange:w,labelPosition:T,description:A,error:k,disabled:I,variant:O,rootRef:M,mod:L,...H}=n,D=ije(),B=p||(D==null?void 0:D.size),U=xn({name:"Switch",props:n,classes:Kye,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:aje}),{styleProps:G,rest:ee}=Cw(H),ne=lf(h),ue=D?{checked:D.value.includes(ee.value),onChange:D.onChange}:{},[X,q]=Bu({value:ue.checked??y,defaultValue:x,finalValue:!1});return R.jsxs(GO,{...U("root"),__staticSelector:"Switch",__stylesApiProps:n,id:ne,size:B,labelPosition:T,label:c,description:A,error:k,disabled:I,bodyElement:"label",labelElement:"span",classNames:r,styles:o,unstyled:a,"data-checked":ue.checked||y||void 0,variant:O,ref:M,mod:L,...G,...g,children:[R.jsx("input",{...ee,disabled:I,checked:X,"data-checked":ue.checked||y||void 0,onChange:te=>{var W;D?(W=ue.onChange)==null||W.call(ue,te):w==null||w(te),q(te.currentTarget.checked)},id:ne,ref:t,type:"checkbox",role:"switch",...U("input")}),R.jsxs(He,{"aria-hidden":"true",mod:{error:k,"label-position":T,"without-labels":!d&&!f},...U("track"),children:[R.jsx(He,{component:"span",mod:"reduce-motion",...U("thumb"),children:b}),R.jsx("span",{...U("trackLabel"),children:X?d:f})]})]})});I_.classes={...Kye,...Jge};I_.displayName="@mantine/core/Switch";I_.Group=zW;const[uje,lje]=Al("Table component was not found in the tree");var lR={table:"m_b23fa0ef",th:"m_4e7aa4f3",tr:"m_4e7aa4fd",td:"m_4e7aa4ef",tbody:"m_b2404537",thead:"m_b242d975",caption:"m_9e5a3ac7",scrollContainer:"m_a100c15",scrollContainerInner:"m_62259741"};function cje(e,t){if(!t)return;const n={};return t.columnBorder&&e.withColumnBorders&&(n["data-with-column-border"]=!0),t.rowBorder&&e.withRowBorders&&(n["data-with-row-border"]=!0),t.striped&&e.striped&&(n["data-striped"]=e.striped),t.highlightOnHover&&e.highlightOnHover&&(n["data-hover"]=!0),t.captionSide&&e.captionSide&&(n["data-side"]=e.captionSide),t.stickyHeader&&e.stickyHeader&&(n["data-sticky"]=!0),n}function Rw(e,t){const n=`Table${e.charAt(0).toUpperCase()}${e.slice(1)}`,r=Bt((i,s)=>{const o=dt(n,{},i),{classNames:a,className:u,style:l,styles:c,...f}=o,d=lje();return R.jsx(He,{component:e,ref:s,...cje(d,t),...d.getStyles(e,{className:u,classNames:a,style:l,styles:c,props:o}),...f})});return r.displayName=`@mantine/core/${n}`,r.classes=lR,r}const lU=Rw("th",{columnBorder:!0}),Xye=Rw("td",{columnBorder:!0}),bP=Rw("tr",{rowBorder:!0,striped:!0,highlightOnHover:!0}),Qye=Rw("thead",{stickyHeader:!0}),Jye=Rw("tbody"),Zye=Rw("tfoot"),e1e=Rw("caption",{captionSide:!0});function VW({data:e}){return R.jsxs(R.Fragment,{children:[e.caption&&R.jsx(e1e,{children:e.caption}),e.head&&R.jsx(Qye,{children:R.jsx(bP,{children:e.head.map((t,n)=>R.jsx(lU,{children:t},n))})}),e.body&&R.jsx(Jye,{children:e.body.map((t,n)=>R.jsx(bP,{children:t.map((r,i)=>R.jsx(Xye,{children:r},i))},n))}),e.foot&&R.jsx(Zye,{children:R.jsx(bP,{children:e.foot.map((t,n)=>R.jsx(lU,{children:t},n))})})]})}VW.displayName="@mantine/core/TableDataRenderer";const fje={type:"scrollarea"},dje=(e,{minWidth:t,type:n})=>({scrollContainer:{"--table-min-width":ot(t),"--table-overflow":n==="native"?"auto":void 0}}),HW=Bt((e,t)=>{const n=dt("TableScrollContainer",fje,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,minWidth:c,type:f,...d}=n,h=xn({name:"TableScrollContainer",classes:lR,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:dje,rootSelector:"scrollContainer"});return R.jsx(He,{component:f==="scrollarea"?o1:"div",...f==="scrollarea"?{offsetScrollbars:"x"}:{},ref:t,...h("scrollContainer"),...d,children:R.jsx("div",{...h("scrollContainerInner"),children:l})})});HW.classes=lR;HW.displayName="@mantine/core/TableScrollContainer";const hje={withRowBorders:!0,verticalSpacing:7},pje=(e,{layout:t,captionSide:n,horizontalSpacing:r,verticalSpacing:i,borderColor:s,stripedColor:o,highlightOnHoverColor:a,striped:u,highlightOnHover:l,stickyHeaderOffset:c,stickyHeader:f})=>({table:{"--table-layout":t,"--table-caption-side":n,"--table-horizontal-spacing":Ha(r),"--table-vertical-spacing":Ha(i),"--table-border-color":s?Fs(s,e):void 0,"--table-striped-color":u&&o?Fs(o,e):void 0,"--table-highlight-on-hover-color":l&&a?Fs(a,e):void 0,"--table-sticky-header-offset":f?ot(c):void 0}}),zn=Bt((e,t)=>{const n=dt("Table",hje,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,horizontalSpacing:l,verticalSpacing:c,captionSide:f,stripedColor:d,highlightOnHoverColor:h,striped:p,highlightOnHover:m,withColumnBorders:g,withRowBorders:b,withTableBorder:y,borderColor:x,layout:w,variant:T,data:A,children:k,stickyHeader:I,stickyHeaderOffset:O,mod:M,tabularNums:L,...H}=n,D=xn({name:"Table",props:n,className:i,style:s,classes:lR,classNames:r,styles:o,unstyled:a,rootSelector:"table",vars:u,varsResolver:pje});return R.jsx(uje,{value:{getStyles:D,stickyHeader:I,striped:p===!0?"odd":p||void 0,highlightOnHover:m,withColumnBorders:g,withRowBorders:b,captionSide:f||"bottom"},children:R.jsx(He,{component:"table",variant:T,ref:t,mod:[{"data-with-table-border":y,"data-tabular-nums":L},M],...D("table"),...H,children:k||!!A&&R.jsx(VW,{data:A})})})});zn.classes=lR;zn.displayName="@mantine/core/Table";zn.Td=Xye;zn.Th=lU;zn.Tr=bP;zn.Thead=Qye;zn.Tbody=Jye;zn.Tfoot=Zye;zn.Caption=e1e;zn.ScrollContainer=HW;zn.DataRenderer=VW;const[mje,qW]=Al("Tabs component was not found in the tree");var cR={root:"m_89d60db1","list--default":"m_576c9d4",list:"m_89d33d6d",panel:"m_b0c91715",tab:"m_4ec4dce6",tabSection:"m_fc420b1f","tab--default":"m_539e827b","list--outline":"m_6772fbd5","tab--outline":"m_b59ab47c","tab--pills":"m_c3381914"};const gje={},WW=Bt((e,t)=>{const n=dt("TabsList",gje,e),{children:r,className:i,grow:s,justify:o,classNames:a,styles:u,style:l,mod:c,...f}=n,d=qW();return R.jsx(He,{...f,...d.getStyles("list",{className:i,style:l,classNames:a,styles:u,props:n,variant:d.variant}),ref:t,role:"tablist",variant:d.variant,mod:[{grow:s,orientation:d.orientation,placement:d.orientation==="vertical"&&d.placement,inverted:d.inverted},c],"aria-orientation":d.orientation,__vars:{"--tabs-justify":o},children:r})});WW.classes=cR;WW.displayName="@mantine/core/TabsList";const yje={},GW=Bt((e,t)=>{const n=dt("TabsPanel",yje,e),{children:r,className:i,value:s,classNames:o,styles:a,style:u,mod:l,keepMounted:c,...f}=n,d=qW(),h=d.value===s,p=d.keepMounted||c||h?r:null;return R.jsx(He,{...f,...d.getStyles("panel",{className:i,classNames:o,styles:a,style:[u,h?void 0:{display:"none"}],props:n}),ref:t,mod:[{orientation:d.orientation},l],role:"tabpanel",id:d.getPanelId(s),"aria-labelledby":d.getTabId(s),children:p})});GW.classes=cR;GW.displayName="@mantine/core/TabsPanel";const vje={},YW=Bt((e,t)=>{const n=dt("TabsTab",vje,e),{className:r,children:i,rightSection:s,leftSection:o,value:a,onClick:u,onKeyDown:l,disabled:c,color:f,style:d,classNames:h,styles:p,vars:m,mod:g,tabIndex:b,...y}=n,x=Wa(),{dir:w}=Bb(),T=qW(),A=a===T.value,k=O=>{T.onChange(T.allowTabDeactivation&&a===T.value?null:a),u==null||u(O)},I={classNames:h,styles:p,props:n};return R.jsxs(rh,{...y,...T.getStyles("tab",{className:r,style:d,variant:T.variant,...I}),disabled:c,unstyled:T.unstyled,variant:T.variant,mod:[{active:A,disabled:c,orientation:T.orientation,inverted:T.inverted,placement:T.orientation==="vertical"&&T.placement},g],ref:t,role:"tab",id:T.getTabId(a),"aria-selected":A,tabIndex:b||A||T.value===null?0:-1,"aria-controls":T.getPanelId(a),onClick:k,__vars:{"--tabs-color":f?Fs(f,x):void 0},onKeyDown:sq({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:T.activateTabWithKeyboard,loop:T.loop,orientation:T.orientation||"horizontal",dir:w,onKeyDown:l}),children:[o&&R.jsx("span",{...T.getStyles("tabSection",I),"data-position":"left",children:o}),i&&R.jsx("span",{...T.getStyles("tabLabel",I),children:i}),s&&R.jsx("span",{...T.getStyles("tabSection",I),"data-position":"right",children:s})]})});YW.classes=cR;YW.displayName="@mantine/core/TabsTab";const Lne="Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value",bje={keepMounted:!0,orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,allowTabDeactivation:!1,unstyled:!1,inverted:!1,variant:"default",placement:"left"},xje=(e,{radius:t,color:n,autoContrast:r})=>({root:{"--tabs-radius":as(t),"--tabs-color":Fs(n,e),"--tabs-text-color":lT(r,e)?Ew({color:n,theme:e,autoContrast:r}):void 0}}),ci=Bt((e,t)=>{const n=dt("Tabs",bje,e),{defaultValue:r,value:i,onChange:s,orientation:o,children:a,loop:u,id:l,activateTabWithKeyboard:c,allowTabDeactivation:f,variant:d,color:h,radius:p,inverted:m,placement:g,keepMounted:b,classNames:y,styles:x,unstyled:w,className:T,style:A,vars:k,autoContrast:I,mod:O,...M}=n,L=lf(l),[H,D]=Bu({value:i,defaultValue:r,finalValue:null,onChange:s}),B=xn({name:"Tabs",props:n,classes:cR,className:T,style:A,classNames:y,styles:x,unstyled:w,vars:k,varsResolver:xje});return R.jsx(mje,{value:{placement:g,value:H,orientation:o,id:L,loop:u,activateTabWithKeyboard:c,getTabId:Q8(`${L}-tab`,Lne),getPanelId:Q8(`${L}-panel`,Lne),onChange:D,allowTabDeactivation:f,variant:d,color:h,radius:p,inverted:m,keepMounted:b,unstyled:w,getStyles:B},children:R.jsx(He,{ref:t,id:L,variant:d,mod:[{orientation:o,inverted:o==="horizontal"&&m,placement:o==="vertical"&&g},O],...B("root"),...M,children:a})})});ci.classes=cR;ci.displayName="@mantine/core/Tabs";ci.Tab=YW;ci.Panel=GW;ci.List=WW;const _je={},Ly=Bt((e,t)=>{const n=dt("TextInput",_je,e);return R.jsx(ap,{component:"input",ref:t,...n,__staticSelector:"TextInput"})});Ly.classes=ap.classes;Ly.displayName="@mantine/core/TextInput";const wje=["h1","h2","h3","h4","h5","h6"],Eje=["xs","sm","md","lg","xl"];function Sje(e,t){const n=t!==void 0?t:`h${e}`;return wje.includes(n)?{fontSize:`var(--mantine-${n}-font-size)`,fontWeight:`var(--mantine-${n}-font-weight)`,lineHeight:`var(--mantine-${n}-line-height)`}:Eje.includes(n)?{fontSize:`var(--mantine-font-size-${n})`,fontWeight:`var(--mantine-h${e}-font-weight)`,lineHeight:`var(--mantine-h${e}-line-height)`}:{fontSize:ot(n),fontWeight:`var(--mantine-h${e}-font-weight)`,lineHeight:`var(--mantine-h${e}-line-height)`}}var t1e={root:"m_8a5d1357"};const Tje={order:1},Cje=(e,{order:t,size:n,lineClamp:r,textWrap:i})=>{const s=Sje(t,n);return{root:{"--title-fw":s.fontWeight,"--title-lh":s.lineHeight,"--title-fz":s.fontSize,"--title-line-clamp":typeof r=="number"?r.toString():void 0,"--title-text-wrap":i}}},wo=Bt((e,t)=>{const n=dt("Title",Tje,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,order:u,vars:l,size:c,variant:f,lineClamp:d,textWrap:h,mod:p,...m}=n,g=xn({name:"Title",props:n,classes:t1e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:Cje});return[1,2,3,4,5,6].includes(u)?R.jsx(He,{...g("root"),component:`h${u}`,variant:f,ref:t,mod:[{order:u,"data-line-clamp":typeof d=="number"},p],size:c,...m}):null});wo.classes=t1e;wo.displayName="@mantine/core/Title";function Aje(e){let t=e,n=!1;const r=new Set;return{getState(){return t},updateState(i){t=typeof i=="function"?i(t):i},setState(i){this.updateState(i),r.forEach(s=>s(t))},initialize(i){n||(t=i,n=!0)},subscribe(i){return r.add(i),()=>r.delete(i)}}}function kje(e){return z.useSyncExternalStore(e.subscribe,()=>e.getState(),()=>e.getState())}function Rje(e,t,n){const r=[],i=[],s={};for(const o of e){const a=o.position||t;s[a]=s[a]||0,s[a]+=1,s[a]<=n?i.push(o):r.push(o)}return{notifications:i,queue:r}}const Ije=()=>Aje({notifications:[],queue:[],defaultPosition:"bottom-right",limit:5}),Iw=Ije(),Pje=(e=Iw)=>kje(e);function ET(e,t){const n=e.getState(),r=t([...n.notifications,...n.queue]),i=Rje(r,n.defaultPosition,n.limit);e.setState({notifications:i.notifications,queue:i.queue,limit:n.limit,defaultPosition:n.defaultPosition})}function Nje(e,t=Iw){const n=e.id||FE();return ET(t,r=>e.id&&r.some(i=>i.id===e.id)?r:[...r,{...e,id:n}]),n}function n1e(e,t=Iw){return ET(t,n=>n.filter(r=>{var i;return r.id===e?((i=r.onClose)==null||i.call(r,r),!1):!0})),e}function Dje(e,t=Iw){return ET(t,n=>n.map(r=>r.id===e.id?{...r,...e}:r)),e.id}function Oje(e=Iw){ET(e,()=>[])}function Mje(e=Iw){ET(e,t=>t.slice(0,e.getState().limit))}const Pw={show:Nje,hide:n1e,update:Dje,clean:Oje,cleanQueue:Mje,updateState:ET};function cU(){return cU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cU.apply(null,arguments)}function r1e(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}function fU(e,t){return fU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},fU(e,t)}function i1e(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,fU(e,t)}var wF={exports:{}},EF,Fne;function Lje(){if(Fne)return EF;Fne=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return EF=e,EF}var SF,$ne;function Fje(){if($ne)return SF;$ne=1;var e=Lje();function t(){}function n(){}return n.resetWarningCache=t,SF=function(){function r(o,a,u,l,c,f){if(f!==e){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}r.isRequired=r;function i(){return r}var s={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:t};return s.PropTypes=s,s},SF}var Bne;function $je(){return Bne||(Bne=1,wF.exports=Fje()()),wF.exports}var Bje=$je();const jne=hc(Bje),Une={disabled:!1},aN=sr.createContext(null);var jje=function(t){return t.scrollTop},x3="unmounted",e_="exited",t_="entering",pE="entered",dU="exiting",I1=function(e){i1e(t,e);function t(r,i){var s;s=e.call(this,r,i)||this;var o=i,a=o&&!o.isMounting?r.enter:r.appear,u;return s.appearStatus=null,r.in?a?(u=e_,s.appearStatus=t_):u=pE:r.unmountOnExit||r.mountOnEnter?u=x3:u=e_,s.state={status:u},s.nextCallback=null,s}t.getDerivedStateFromProps=function(i,s){var o=i.in;return o&&s.status===x3?{status:e_}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var s=null;if(i!==this.props){var o=this.state.status;this.props.in?o!==t_&&o!==pE&&(s=t_):(o===t_||o===pE)&&(s=dU)}this.updateStatus(!1,s)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,s,o,a;return s=o=a=i,i!=null&&typeof i!="number"&&(s=i.exit,o=i.enter,a=i.appear!==void 0?i.appear:o),{exit:s,enter:o,appear:a}},n.updateStatus=function(i,s){if(i===void 0&&(i=!1),s!==null)if(this.cancelNextCallback(),s===t_){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:b3.findDOMNode(this);o&&jje(o)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===e_&&this.setState({status:x3})},n.performEnter=function(i){var s=this,o=this.props.enter,a=this.context?this.context.isMounting:i,u=this.props.nodeRef?[a]:[b3.findDOMNode(this),a],l=u[0],c=u[1],f=this.getTimeouts(),d=a?f.appear:f.enter;if(!i&&!o||Une.disabled){this.safeSetState({status:pE},function(){s.props.onEntered(l)});return}this.props.onEnter(l,c),this.safeSetState({status:t_},function(){s.props.onEntering(l,c),s.onTransitionEnd(d,function(){s.safeSetState({status:pE},function(){s.props.onEntered(l,c)})})})},n.performExit=function(){var i=this,s=this.props.exit,o=this.getTimeouts(),a=this.props.nodeRef?void 0:b3.findDOMNode(this);if(!s||Une.disabled){this.safeSetState({status:e_},function(){i.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:dU},function(){i.props.onExiting(a),i.onTransitionEnd(o.exit,function(){i.safeSetState({status:e_},function(){i.props.onExited(a)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,s){s=this.setNextCallback(s),this.setState(i,s)},n.setNextCallback=function(i){var s=this,o=!0;return this.nextCallback=function(a){o&&(o=!1,s.nextCallback=null,i(a))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(i,s){this.setNextCallback(s);var o=this.props.nodeRef?this.props.nodeRef.current:b3.findDOMNode(this),a=i==null&&!this.props.addEndListener;if(!o||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var u=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],l=u[0],c=u[1];this.props.addEndListener(l,c)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===x3)return null;var s=this.props,o=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var a=r1e(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return sr.createElement(aN.Provider,{value:null},typeof o=="function"?o(i,a):sr.cloneElement(sr.Children.only(o),a))},t}(sr.Component);I1.contextType=aN;I1.propTypes={};function H2(){}I1.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:H2,onEntering:H2,onEntered:H2,onExit:H2,onExiting:H2,onExited:H2};I1.UNMOUNTED=x3;I1.EXITED=e_;I1.ENTERING=t_;I1.ENTERED=pE;I1.EXITING=dU;function Uje(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function KW(e,t){var n=function(s){return t&&z.isValidElement(s)?t(s):s},r=Object.create(null);return e&&z.Children.map(e,function(i){return i}).forEach(function(i){r[i.key]=n(i)}),r}function zje(e,t){e=e||{},t=t||{};function n(c){return c in t?t[c]:e[c]}var r=Object.create(null),i=[];for(var s in e)s in t?i.length&&(r[s]=i,i=[]):i.push(s);var o,a={};for(var u in t){if(r[u])for(o=0;o<r[u].length;o++){var l=r[u][o];a[r[u][o]]=n(l)}a[u]=n(u)}for(o=0;o<i.length;o++)a[i[o]]=n(i[o]);return a}function x_(e,t,n){return n[t]!=null?n[t]:e.props[t]}function Vje(e,t){return KW(e.children,function(n){return z.cloneElement(n,{onExited:t.bind(null,n),in:!0,appear:x_(n,"appear",e),enter:x_(n,"enter",e),exit:x_(n,"exit",e)})})}function Hje(e,t,n){var r=KW(e.children),i=zje(t,r);return Object.keys(i).forEach(function(s){var o=i[s];if(z.isValidElement(o)){var a=s in t,u=s in r,l=t[s],c=z.isValidElement(l)&&!l.props.in;u&&(!a||c)?i[s]=z.cloneElement(o,{onExited:n.bind(null,o),in:!0,exit:x_(o,"exit",e),enter:x_(o,"enter",e)}):!u&&a&&!c?i[s]=z.cloneElement(o,{in:!1}):u&&a&&z.isValidElement(l)&&(i[s]=z.cloneElement(o,{onExited:n.bind(null,o),in:l.props.in,exit:x_(o,"exit",e),enter:x_(o,"enter",e)}))}}),i}var qje=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},Wje={component:"div",childFactory:function(t){return t}},Ev=function(e){i1e(t,e);function t(r,i){var s;s=e.call(this,r,i)||this;var o=s.handleExited.bind(Uje(s));return s.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},s}var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(i,s){var o=s.children,a=s.handleExited,u=s.firstRender;return{children:u?Vje(i,a):Hje(i,o,a),firstRender:!1}},n.handleExited=function(i,s){var o=KW(this.props.children);i.key in o||(i.props.onExited&&i.props.onExited(s),this.mounted&&this.setState(function(a){var u=cU({},a.children);return delete u[i.key],{children:u}}))},n.render=function(){var i=this.props,s=i.component,o=i.childFactory,a=r1e(i,["component","childFactory"]),u=this.state.contextValue,l=qje(this.state.children).map(o);return delete a.appear,delete a.enter,delete a.exit,s===null?sr.createElement(aN.Provider,{value:u},l):sr.createElement(aN.Provider,{value:u},sr.createElement(s,a,l))},t}(sr.Component);Ev.propTypes={};Ev.defaultProps=Wje;const s1e=["bottom-center","bottom-left","bottom-right","top-center","top-left","top-right"];function Gje(e,t){return e.reduce((n,r)=>(n[r.position||t].push(r),n),s1e.reduce((n,r)=>(n[r]=[],n),{}))}const zne={left:"translateX(-100%)",right:"translateX(100%)","top-center":"translateY(-100%)","bottom-center":"translateY(100%)"},Yje={left:"translateX(0)",right:"translateX(0)","top-center":"translateY(0)","bottom-center":"translateY(0)"};function Kje({state:e,maxHeight:t,position:n,transitionDuration:r}){const[i,s]=n.split("-"),o=s==="center"?`${i}-center`:s,a={opacity:0,maxHeight:t,transform:zne[o],transitionDuration:`${r}ms, ${r}ms, ${r}ms`,transitionTimingFunction:"cubic-bezier(.51,.3,0,1.21), cubic-bezier(.51,.3,0,1.21), linear",transitionProperty:"opacity, transform, max-height"},u={opacity:1,transform:Yje[o]},l={opacity:0,maxHeight:0,transform:zne[o]};return{...a,...{entering:u,entered:u,exiting:l,exited:l}[e]}}function Xje(e,t){return typeof t=="number"?t:t===!1||e===!1?!1:e}const o1e=z.forwardRef(({data:e,onHide:t,autoClose:n,...r},i)=>{const{autoClose:s,message:o,...a}=e,u=Xje(n,e.autoClose),l=z.useRef(-1),c=()=>window.clearTimeout(l.current),f=()=>{t(e.id),c()},d=()=>{typeof u=="number"&&(l.current=window.setTimeout(f,u))};return z.useEffect(()=>{var h;(h=e.onOpen)==null||h.call(e,e)},[]),z.useEffect(()=>(d(),c),[u]),R.jsx(IW,{...r,...a,onClose:f,ref:i,onMouseEnter:c,onMouseLeave:d,children:o})});o1e.displayName="@mantine/notifications/NotificationContainer";var a1e={root:"m_b37d9ac7",notification:"m_5ed0edd0"};const Qje=I1,Jje={position:"bottom-right",autoClose:4e3,transitionDuration:250,containerWidth:440,notificationMaxHeight:200,limit:5,zIndex:ld("overlay"),store:Iw,withinPortal:!0},Zje=(e,{zIndex:t,containerWidth:n})=>({root:{"--notifications-z-index":t==null?void 0:t.toString(),"--notifications-container-width":ot(n)}}),P1=Bt((e,t)=>{const n=dt("Notifications",Jje,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,position:l,autoClose:c,transitionDuration:f,containerWidth:d,notificationMaxHeight:h,limit:p,zIndex:m,store:g,portalProps:b,withinPortal:y,...x}=n,w=Wa(),T=Pje(g),A=UDe(),k=DO(),I=z.useRef({}),O=z.useRef(0),L=(w.respectReducedMotion?k:!1)?1:f,H=xn({name:"Notifications",classes:a1e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Zje});z.useEffect(()=>{g==null||g.updateState(U=>({...U,limit:p||5,defaultPosition:l}))},[p,l]),eg(()=>{T.notifications.length>O.current&&setTimeout(()=>A(),0),O.current=T.notifications.length},[T.notifications]);const D=Gje(T.notifications,l),B=s1e.reduce((U,G)=>(U[G]=D[G].map(({style:ee,...ne})=>R.jsx(Qje,{timeout:L,onEnter:()=>I.current[ne.id].offsetHeight,nodeRef:{current:I.current[ne.id]},children:ue=>R.jsx(o1e,{ref:X=>{I.current[ne.id]=X},data:ne,onHide:X=>n1e(X,g),autoClose:c,...H("notification",{style:{...Kje({state:ue,position:G,transitionDuration:L,maxHeight:h}),...ee}})})},ne.id)),U),{});return R.jsxs(jb,{withinPortal:y,...b,children:[R.jsx(He,{...H("root"),"data-position":"top-center",ref:t,...x,children:R.jsx(Ev,{children:B["top-center"]})}),R.jsx(He,{...H("root"),"data-position":"top-left",...x,children:R.jsx(Ev,{children:B["top-left"]})}),R.jsx(He,{...H("root",{className:aS.classNames.fullWidth}),"data-position":"top-right",...x,children:R.jsx(Ev,{children:B["top-right"]})}),R.jsx(He,{...H("root",{className:aS.classNames.fullWidth}),"data-position":"bottom-right",...x,children:R.jsx(Ev,{children:B["bottom-right"]})}),R.jsx(He,{...H("root"),"data-position":"bottom-left",...x,children:R.jsx(Ev,{children:B["bottom-left"]})}),R.jsx(He,{...H("root"),"data-position":"bottom-center",...x,children:R.jsx(Ev,{children:B["bottom-center"]})})]})});P1.classes=a1e;P1.displayName="@mantine/notifications/Notifications";P1.show=Pw.show;P1.hide=Pw.hide;P1.update=Pw.update;P1.clean=Pw.clean;P1.cleanQueue=Pw.cleanQueue;P1.updateState=Pw.updateState;const u1e=z.createContext({storageEngine:void 0,setStorageEngine:()=>{}}),Yo=()=>z.useContext(u1e);function eUe({children:e}){const[t,n]=z.useState(void 0),r=z.useMemo(()=>({storageEngine:t,setStorageEngine:n}),[t]);return R.jsx(u1e.Provider,{value:r,children:e})}var HC={},Vne;function tUe(){if(Vne)return HC;Vne=1,Object.defineProperty(HC,"__esModule",{value:!0}),HC.parse=o,HC.serialize=l;const e=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,s=(()=>{const d=function(){};return d.prototype=Object.create(null),d})();function o(d,h){const p=new s,m=d.length;if(m<2)return p;const g=(h==null?void 0:h.decode)||c;let b=0;do{const y=d.indexOf("=",b);if(y===-1)break;const x=d.indexOf(";",b),w=x===-1?m:x;if(y>w){b=d.lastIndexOf(";",y-1)+1;continue}const T=a(d,b,y),A=u(d,y,T),k=d.slice(T,A);if(p[k]===void 0){let I=a(d,y+1,w),O=u(d,w,I);const M=g(d.slice(I,O));p[k]=M}b=w+1}while(b<m);return p}function a(d,h,p){do{const m=d.charCodeAt(h);if(m!==32&&m!==9)return h}while(++h<p);return p}function u(d,h,p){for(;h>p;){const m=d.charCodeAt(--h);if(m!==32&&m!==9)return h+1}return p}function l(d,h,p){const m=(p==null?void 0:p.encode)||encodeURIComponent;if(!e.test(d))throw new TypeError(`argument name is invalid: ${d}`);const g=m(h);if(!t.test(g))throw new TypeError(`argument val is invalid: ${h}`);let b=d+"="+g;if(!p)return b;if(p.maxAge!==void 0){if(!Number.isInteger(p.maxAge))throw new TypeError(`option maxAge is invalid: ${p.maxAge}`);b+="; Max-Age="+p.maxAge}if(p.domain){if(!n.test(p.domain))throw new TypeError(`option domain is invalid: ${p.domain}`);b+="; Domain="+p.domain}if(p.path){if(!r.test(p.path))throw new TypeError(`option path is invalid: ${p.path}`);b+="; Path="+p.path}if(p.expires){if(!f(p.expires)||!Number.isFinite(p.expires.valueOf()))throw new TypeError(`option expires is invalid: ${p.expires}`);b+="; Expires="+p.expires.toUTCString()}if(p.httpOnly&&(b+="; HttpOnly"),p.secure&&(b+="; Secure"),p.partitioned&&(b+="; Partitioned"),p.priority)switch(typeof p.priority=="string"?p.priority.toLowerCase():void 0){case"low":b+="; Priority=Low";break;case"medium":b+="; Priority=Medium";break;case"high":b+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${p.priority}`)}if(p.sameSite)switch(typeof p.sameSite=="string"?p.sameSite.toLowerCase():p.sameSite){case!0:case"strict":b+="; SameSite=Strict";break;case"lax":b+="; SameSite=Lax";break;case"none":b+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${p.sameSite}`)}return b}function c(d){if(d.indexOf("%")===-1)return d;try{return decodeURIComponent(d)}catch{return d}}function f(d){return i.call(d)==="[object Date]"}return HC}tUe();/**
 * react-router v7.1.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Hne="popstate";function nUe(e={}){function t(r,i){let{pathname:s,search:o,hash:a}=r.location;return hU("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Gk(i)}return iUe(t,n,null,e)}function fo(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Qh(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function rUe(){return Math.random().toString(36).substring(2,10)}function qne(e,t){return{usr:e.state,key:e.key,idx:t}}function hU(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?ST(t):t,state:n,key:t&&t.key||r||rUe()}}function Gk({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function ST(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function iUe(e,t,n,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a="POP",u=null,l=c();l==null&&(l=0,o.replaceState({...o.state,idx:l},""));function c(){return(o.state||{idx:null}).idx}function f(){a="POP";let g=c(),b=g==null?null:g-l;l=g,u&&u({action:a,location:m.location,delta:b})}function d(g,b){a="PUSH";let y=hU(m.location,g,b);l=c()+1;let x=qne(y,l),w=m.createHref(y);try{o.pushState(x,"",w)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;i.location.assign(w)}s&&u&&u({action:a,location:m.location,delta:1})}function h(g,b){a="REPLACE";let y=hU(m.location,g,b);l=c();let x=qne(y,l),w=m.createHref(y);o.replaceState(x,"",w),s&&u&&u({action:a,location:m.location,delta:0})}function p(g){let b=i.location.origin!=="null"?i.location.origin:i.location.href,y=typeof g=="string"?g:Gk(g);return y=y.replace(/ $/,"%20"),fo(b,`No window.location.(origin|href) available to create URL for href: ${y}`),new URL(y,b)}let m={get action(){return a},get location(){return e(i,o)},listen(g){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(Hne,f),u=g,()=>{i.removeEventListener(Hne,f),u=null}},createHref(g){return t(i,g)},createURL:p,encodeLocation(g){let b=p(g);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:d,replace:h,go(g){return o.go(g)}};return m}function l1e(e,t,n="/"){return sUe(e,t,n,!1)}function sUe(e,t,n,r){let i=typeof t=="string"?ST(t):t,s=ub(i.pathname||"/",n);if(s==null)return null;let o=c1e(e);oUe(o);let a=null;for(let u=0;a==null&&u<o.length;++u){let l=yUe(s);a=mUe(o[u],l,r)}return a}function c1e(e,t=[],n=[],r=""){let i=(s,o,a)=>{let u={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(fo(u.relativePath.startsWith(r),`Absolute route path "${u.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(r.length));let l=Yy([r,u.relativePath]),c=n.concat(u);s.children&&s.children.length>0&&(fo(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${l}".`),c1e(s.children,t,c,l)),!(s.path==null&&!s.index)&&t.push({path:l,score:hUe(l,s.index),routesMeta:c})};return e.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let u of f1e(s.path))i(s,o,u)}),t}function f1e(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=f1e(r.join("/")),a=[];return a.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&a.push(...o),a.map(u=>e.startsWith("/")&&u===""?"/":u)}function oUe(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:pUe(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var aUe=/^:[\w-]+$/,uUe=3,lUe=2,cUe=1,fUe=10,dUe=-2,Wne=e=>e==="*";function hUe(e,t){let n=e.split("/"),r=n.length;return n.some(Wne)&&(r+=dUe),t&&(r+=lUe),n.filter(i=>!Wne(i)).reduce((i,s)=>i+(aUe.test(s)?uUe:s===""?cUe:fUe),r)}function pUe(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function mUe(e,t,n=!1){let{routesMeta:r}=e,i={},s="/",o=[];for(let a=0;a<r.length;++a){let u=r[a],l=a===r.length-1,c=s==="/"?t:t.slice(s.length)||"/",f=uN({path:u.relativePath,caseSensitive:u.caseSensitive,end:l},c),d=u.route;if(!f&&l&&n&&!r[r.length-1].route.index&&(f=uN({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},c)),!f)return null;Object.assign(i,f.params),o.push({params:i,pathname:Yy([s,f.pathname]),pathnameBase:_Ue(Yy([s,f.pathnameBase])),route:d}),f.pathnameBase!=="/"&&(s=Yy([s,f.pathnameBase]))}return o}function uN(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=gUe(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((l,{paramName:c,isOptional:f},d)=>{if(c==="*"){let p=a[d]||"";o=s.slice(0,s.length-p.length).replace(/(.)\/+$/,"$1")}const h=a[d];return f&&!h?l[c]=void 0:l[c]=(h||"").replace(/%2F/g,"/"),l},{}),pathname:s,pathnameBase:o,pattern:e}}function gUe(e,t=!1,n=!0){Qh(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,u)=>(r.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function yUe(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Qh(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function ub(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function vUe(e,t="/"){let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?ST(e):e;return{pathname:n?n.startsWith("/")?n:bUe(n,t):t,search:wUe(r),hash:EUe(i)}}function bUe(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function TF(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function xUe(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function XW(e){let t=xUe(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function QW(e,t,n,r=!1){let i;typeof e=="string"?i=ST(e):(i={...e},fo(!i.pathname||!i.pathname.includes("?"),TF("?","pathname","search",i)),fo(!i.pathname||!i.pathname.includes("#"),TF("#","pathname","hash",i)),fo(!i.search||!i.search.includes("#"),TF("#","search","hash",i)));let s=e===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let f=t.length-1;if(!r&&o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),f-=1;i.pathname=d.join("/")}a=f>=0?t[f]:"/"}let u=vUe(i,a),l=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(l||c)&&(u.pathname+="/"),u}var Yy=e=>e.join("/").replace(/\/\/+/g,"/"),_Ue=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),wUe=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,EUe=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function SUe(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var d1e=["POST","PUT","PATCH","DELETE"];new Set(d1e);var TUe=["GET",...d1e];new Set(TUe);var TT=z.createContext(null);TT.displayName="DataRouter";var l9=z.createContext(null);l9.displayName="DataRouterState";var h1e=z.createContext({isTransitioning:!1});h1e.displayName="ViewTransition";var CUe=z.createContext(new Map);CUe.displayName="Fetchers";var AUe=z.createContext(null);AUe.displayName="Await";var O0=z.createContext(null);O0.displayName="Navigation";var fR=z.createContext(null);fR.displayName="Location";var lp=z.createContext({outlet:null,matches:[],isDataRoute:!1});lp.displayName="Route";var JW=z.createContext(null);JW.displayName="RouteError";function ZW(e,{relative:t}={}){fo(CT(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=z.useContext(O0),{hash:i,pathname:s,search:o}=dR(e,{relative:t}),a=s;return n!=="/"&&(a=s==="/"?n:Yy([n,s])),r.createHref({pathname:a,search:o,hash:i})}function CT(){return z.useContext(fR)!=null}function cp(){return fo(CT(),"useLocation() may be used only in the context of a <Router> component."),z.useContext(fR).location}var p1e="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function m1e(e){z.useContext(O0).static||z.useLayoutEffect(e)}function M0(){let{isDataRoute:e}=z.useContext(lp);return e?UUe():kUe()}function kUe(){fo(CT(),"useNavigate() may be used only in the context of a <Router> component.");let e=z.useContext(TT),{basename:t,navigator:n}=z.useContext(O0),{matches:r}=z.useContext(lp),{pathname:i}=cp(),s=JSON.stringify(XW(r)),o=z.useRef(!1);return m1e(()=>{o.current=!0}),z.useCallback((u,l={})=>{if(Qh(o.current,p1e),!o.current)return;if(typeof u=="number"){n.go(u);return}let c=QW(u,JSON.parse(s),i,l.relative==="path");e==null&&t!=="/"&&(c.pathname=c.pathname==="/"?t:Yy([t,c.pathname])),(l.replace?n.replace:n.push)(c,l.state,l)},[t,n,s,i,e])}var RUe=z.createContext(null);function IUe(e){let t=z.useContext(lp).outlet;return t&&z.createElement(RUe.Provider,{value:e},t)}function rg(){let{matches:e}=z.useContext(lp),t=e[e.length-1];return t?t.params:{}}function dR(e,{relative:t}={}){let{matches:n}=z.useContext(lp),{pathname:r}=cp(),i=JSON.stringify(XW(n));return z.useMemo(()=>QW(e,JSON.parse(i),r,t==="path"),[e,i,r,t])}function g1e(e,t){return y1e(e,t)}function y1e(e,t,n,r){var b;fo(CT(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=z.useContext(O0),{matches:s}=z.useContext(lp),o=s[s.length-1],a=o?o.params:{},u=o?o.pathname:"/",l=o?o.pathnameBase:"/",c=o&&o.route;{let y=c&&c.path||"";v1e(u,!c||y.endsWith("*")||y.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${y}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${y}"> to <Route path="${y==="/"?"*":`${y}/*`}">.`)}let f=cp(),d;if(t){let y=typeof t=="string"?ST(t):t;fo(l==="/"||((b=y.pathname)==null?void 0:b.startsWith(l)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${l}" but pathname "${y.pathname}" was given in the \`location\` prop.`),d=y}else d=f;let h=d.pathname||"/",p=h;if(l!=="/"){let y=l.replace(/^\//,"").split("/");p="/"+h.replace(/^\//,"").split("/").slice(y.length).join("/")}let m=l1e(e,{pathname:p});Qh(c||m!=null,`No routes matched location "${d.pathname}${d.search}${d.hash}" `),Qh(m==null||m[m.length-1].route.element!==void 0||m[m.length-1].route.Component!==void 0||m[m.length-1].route.lazy!==void 0,`Matched leaf route at location "${d.pathname}${d.search}${d.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let g=MUe(m&&m.map(y=>Object.assign({},y,{params:Object.assign({},a,y.params),pathname:Yy([l,i.encodeLocation?i.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?l:Yy([l,i.encodeLocation?i.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),s,n,r);return t&&g?z.createElement(fR.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...d},navigationType:"POP"}},g):g}function PUe(){let e=jUe(),t=SUe(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=z.createElement(z.Fragment,null,z.createElement("p",null," Hey developer "),z.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",z.createElement("code",{style:s},"ErrorBoundary")," or"," ",z.createElement("code",{style:s},"errorElement")," prop on your route.")),z.createElement(z.Fragment,null,z.createElement("h2",null,"Unexpected Application Error!"),z.createElement("h3",{style:{fontStyle:"italic"}},t),n?z.createElement("pre",{style:i},n):null,o)}var NUe=z.createElement(PUe,null),DUe=class extends z.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?z.createElement(lp.Provider,{value:this.props.routeContext},z.createElement(JW.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function OUe({routeContext:e,match:t,children:n}){let r=z.useContext(TT);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),z.createElement(lp.Provider,{value:e},n)}function MUe(e,t=[],n=null,r=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let i=e,s=n==null?void 0:n.errors;if(s!=null){let u=i.findIndex(l=>l.route.id&&(s==null?void 0:s[l.route.id])!==void 0);fo(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),i=i.slice(0,Math.min(i.length,u+1))}let o=!1,a=-1;if(n)for(let u=0;u<i.length;u++){let l=i[u];if((l.route.HydrateFallback||l.route.hydrateFallbackElement)&&(a=u),l.route.id){let{loaderData:c,errors:f}=n,d=l.route.loader&&!c.hasOwnProperty(l.route.id)&&(!f||f[l.route.id]===void 0);if(l.route.lazy||d){o=!0,a>=0?i=i.slice(0,a+1):i=[i[0]];break}}}return i.reduceRight((u,l,c)=>{let f,d=!1,h=null,p=null;n&&(f=s&&l.route.id?s[l.route.id]:void 0,h=l.route.errorElement||NUe,o&&(a<0&&c===0?(v1e("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),d=!0,p=null):a===c&&(d=!0,p=l.route.hydrateFallbackElement||null)));let m=t.concat(i.slice(0,c+1)),g=()=>{let b;return f?b=h:d?b=p:l.route.Component?b=z.createElement(l.route.Component,null):l.route.element?b=l.route.element:b=u,z.createElement(OUe,{match:l,routeContext:{outlet:u,matches:m,isDataRoute:n!=null},children:b})};return n&&(l.route.ErrorBoundary||l.route.errorElement||c===0)?z.createElement(DUe,{location:n.location,revalidation:n.revalidation,component:h,error:f,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()},null)}function eG(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function LUe(e){let t=z.useContext(TT);return fo(t,eG(e)),t}function FUe(e){let t=z.useContext(l9);return fo(t,eG(e)),t}function $Ue(e){let t=z.useContext(lp);return fo(t,eG(e)),t}function tG(e){let t=$Ue(e),n=t.matches[t.matches.length-1];return fo(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function BUe(){return tG("useRouteId")}function jUe(){var r;let e=z.useContext(JW),t=FUe("useRouteError"),n=tG("useRouteError");return e!==void 0?e:(r=t.errors)==null?void 0:r[n]}function UUe(){let{router:e}=LUe("useNavigate"),t=tG("useNavigate"),n=z.useRef(!1);return m1e(()=>{n.current=!0}),z.useCallback(async(i,s={})=>{Qh(n.current,p1e),n.current&&(typeof i=="number"?e.navigate(i):await e.navigate(i,{fromRouteId:t,...s}))},[e,t])}var Gne={};function v1e(e,t,n){!t&&!Gne[e]&&(Gne[e]=!0,Qh(!1,n))}z.memo(zUe);function zUe({routes:e,future:t,state:n}){return y1e(e,void 0,n,t)}function nG({to:e,replace:t,state:n,relative:r}){fo(CT(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=z.useContext(O0);Qh(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=z.useContext(lp),{pathname:o}=cp(),a=M0(),u=QW(e,XW(s),o,r==="path"),l=JSON.stringify(u);return z.useEffect(()=>{a(JSON.parse(l),{replace:t,state:n,relative:r})},[a,l,r,t,n]),null}function VUe(e){return IUe(e.context)}function n_(e){fo(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function HUe({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:i,static:s=!1}){fo(!CT(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=e.replace(/^\/*/,"/"),a=z.useMemo(()=>({basename:o,navigator:i,static:s,future:{}}),[o,i,s]);typeof n=="string"&&(n=ST(n));let{pathname:u="/",search:l="",hash:c="",state:f=null,key:d="default"}=n,h=z.useMemo(()=>{let p=ub(u,o);return p==null?null:{location:{pathname:p,search:l,hash:c,state:f,key:d},navigationType:r}},[o,u,l,c,f,d,r]);return Qh(h!=null,`<Router basename="${o}"> is not able to match the URL "${u}${l}${c}" because it does not start with the basename, so the <Router> won't render anything.`),h==null?null:z.createElement(O0.Provider,{value:a},z.createElement(fR.Provider,{children:t,value:h}))}function qUe({children:e,location:t}){return g1e(pU(e),t)}function pU(e,t=[]){let n=[];return z.Children.forEach(e,(r,i)=>{if(!z.isValidElement(r))return;let s=[...t,i];if(r.type===z.Fragment){n.push.apply(n,pU(r.props.children,s));return}fo(r.type===n_,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),fo(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=pU(r.props.children,s)),n.push(o)}),n}var xP="get",_P="application/x-www-form-urlencoded";function c9(e){return e!=null&&typeof e.tagName=="string"}function WUe(e){return c9(e)&&e.tagName.toLowerCase()==="button"}function GUe(e){return c9(e)&&e.tagName.toLowerCase()==="form"}function YUe(e){return c9(e)&&e.tagName.toLowerCase()==="input"}function KUe(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function XUe(e,t){return e.button===0&&(!t||t==="_self")&&!KUe(e)}function mU(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function QUe(e,t){let n=mU(e);return t&&t.forEach((r,i)=>{n.has(i)||t.getAll(i).forEach(s=>{n.append(i,s)})}),n}var u6=null;function JUe(){if(u6===null)try{new FormData(document.createElement("form"),0),u6=!1}catch{u6=!0}return u6}var ZUe=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function CF(e){return e!=null&&!ZUe.has(e)?(Qh(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${_P}"`),null):e}function eze(e,t){let n,r,i,s,o;if(GUe(e)){let a=e.getAttribute("action");r=a?ub(a,t):null,n=e.getAttribute("method")||xP,i=CF(e.getAttribute("enctype"))||_P,s=new FormData(e)}else if(WUe(e)||YUe(e)&&(e.type==="submit"||e.type==="image")){let a=e.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=e.getAttribute("formaction")||a.getAttribute("action");if(r=u?ub(u,t):null,n=e.getAttribute("formmethod")||a.getAttribute("method")||xP,i=CF(e.getAttribute("formenctype"))||CF(a.getAttribute("enctype"))||_P,s=new FormData(a,e),!JUe()){let{name:l,type:c,value:f}=e;if(c==="image"){let d=l?`${l}.`:"";s.append(`${d}x`,"0"),s.append(`${d}y`,"0")}else l&&s.append(l,f)}}else{if(c9(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=xP,r=null,i=_P,o=e}return s&&i==="text/plain"&&(o=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:o}}function rG(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}async function tze(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function nze(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function rze(e,t,n){let r=await Promise.all(e.map(async i=>{let s=t.routes[i.route.id];if(s){let o=await tze(s,n);return o.links?o.links():[]}return[]}));return aze(r.flat(1).filter(nze).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function Yne(e,t,n,r,i,s){let o=(u,l)=>n[l]?u.route.id!==n[l].route.id:!0,a=(u,l)=>{var c;return n[l].pathname!==u.pathname||((c=n[l].route.path)==null?void 0:c.endsWith("*"))&&n[l].params["*"]!==u.params["*"]};return s==="assets"?t.filter((u,l)=>o(u,l)||a(u,l)):s==="data"?t.filter((u,l)=>{var f;let c=r.routes[u.route.id];if(!c||!c.hasLoader)return!1;if(o(u,l)||a(u,l))return!0;if(u.route.shouldRevalidate){let d=u.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((f=n[0])==null?void 0:f.params)||{},nextUrl:new URL(e,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof d=="boolean")return d}return!0}):[]}function ize(e,t){return sze(e.map(n=>{let r=t.routes[n.route.id];if(!r)return[];let i=[r.module];return r.imports&&(i=i.concat(r.imports)),i}).flat(1))}function sze(e){return[...new Set(e)]}function oze(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function aze(e,t){let n=new Set;return new Set(t),e.reduce((r,i)=>{let s=JSON.stringify(oze(i));return n.has(s)||(n.add(s),r.push({key:s,link:i})),r},[])}function uze(e){let t=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return t.pathname==="/"?t.pathname="_root.data":t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function lze(){let e=z.useContext(TT);return rG(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function cze(){let e=z.useContext(l9);return rG(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var iG=z.createContext(void 0);iG.displayName="FrameworkContext";function b1e(){let e=z.useContext(iG);return rG(e,"You must render this element inside a <HydratedRouter> element"),e}function fze(e,t){let n=z.useContext(iG),[r,i]=z.useState(!1),[s,o]=z.useState(!1),{onFocus:a,onBlur:u,onMouseEnter:l,onMouseLeave:c,onTouchStart:f}=t,d=z.useRef(null);z.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let m=b=>{b.forEach(y=>{o(y.isIntersecting)})},g=new IntersectionObserver(m,{threshold:.5});return d.current&&g.observe(d.current),()=>{g.disconnect()}}},[e]),z.useEffect(()=>{if(r){let m=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(m)}}},[r]);let h=()=>{i(!0)},p=()=>{i(!1),o(!1)};return n?e!=="intent"?[s,d,{}]:[s,d,{onFocus:qC(a,h),onBlur:qC(u,p),onMouseEnter:qC(l,h),onMouseLeave:qC(c,p),onTouchStart:qC(f,h)}]:[!1,d,{}]}function qC(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function dze({page:e,...t}){let{router:n}=lze(),r=z.useMemo(()=>l1e(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?z.createElement(pze,{page:e,matches:r,...t}):null}function hze(e){let{manifest:t,routeModules:n}=b1e(),[r,i]=z.useState([]);return z.useEffect(()=>{let s=!1;return rze(e,t,n).then(o=>{s||i(o)}),()=>{s=!0}},[e,t,n]),r}function pze({page:e,matches:t,...n}){let r=cp(),{manifest:i,routeModules:s}=b1e(),{loaderData:o,matches:a}=cze(),u=z.useMemo(()=>Yne(e,t,a,i,r,"data"),[e,t,a,i,r]),l=z.useMemo(()=>Yne(e,t,a,i,r,"assets"),[e,t,a,i,r]),c=z.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let h=new Set,p=!1;if(t.forEach(g=>{var y;let b=i.routes[g.route.id];!b||!b.hasLoader||(!u.some(x=>x.route.id===g.route.id)&&g.route.id in o&&((y=s[g.route.id])!=null&&y.shouldRevalidate)||b.hasClientLoader?p=!0:h.add(g.route.id))}),h.size===0)return[];let m=uze(e);return p&&h.size>0&&m.searchParams.set("_routes",t.filter(g=>h.has(g.route.id)).map(g=>g.route.id).join(",")),[m.pathname+m.search]},[o,r,i,u,t,e,s]),f=z.useMemo(()=>ize(l,i),[l,i]),d=hze(l);return z.createElement(z.Fragment,null,c.map(h=>z.createElement("link",{key:h,rel:"prefetch",as:"fetch",href:h,...n})),f.map(h=>z.createElement("link",{key:h,rel:"modulepreload",href:h,...n})),d.map(({key:h,link:p})=>z.createElement("link",{key:h,...p})))}function mze(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var x1e=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{x1e&&(window.__reactRouterVersion="7.1.3")}catch{}function gze({basename:e,children:t,window:n}){let r=z.useRef();r.current==null&&(r.current=nUe({window:n,v5Compat:!0}));let i=r.current,[s,o]=z.useState({action:i.action,location:i.location}),a=z.useCallback(u=>{z.startTransition(()=>o(u))},[o]);return z.useLayoutEffect(()=>i.listen(a),[i,a]),z.createElement(HUe,{basename:e,children:t,location:s.location,navigationType:s.action,navigator:i})}var _1e=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,w1e=z.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:i,reloadDocument:s,replace:o,state:a,target:u,to:l,preventScrollReset:c,viewTransition:f,...d},h){let{basename:p}=z.useContext(O0),m=typeof l=="string"&&_1e.test(l),g,b=!1;if(typeof l=="string"&&m&&(g=l,x1e))try{let O=new URL(window.location.href),M=l.startsWith("//")?new URL(O.protocol+l):new URL(l),L=ub(M.pathname,p);M.origin===O.origin&&L!=null?l=L+M.search+M.hash:b=!0}catch{Qh(!1,`<Link to="${l}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let y=ZW(l,{relative:i}),[x,w,T]=fze(r,d),A=xze(l,{replace:o,state:a,target:u,preventScrollReset:c,relative:i,viewTransition:f});function k(O){t&&t(O),O.defaultPrevented||A(O)}let I=z.createElement("a",{...d,...T,href:g||y,onClick:b||s?t:k,ref:mze(h,w),target:u,"data-discover":!m&&n==="render"?"true":void 0});return x&&!m?z.createElement(z.Fragment,null,I,z.createElement(dze,{page:y})):I});w1e.displayName="Link";var yze=z.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:i=!1,style:s,to:o,viewTransition:a,children:u,...l},c){let f=dR(o,{relative:l.relative}),d=cp(),h=z.useContext(l9),{navigator:p,basename:m}=z.useContext(O0),g=h!=null&&Tze(f)&&a===!0,b=p.encodeLocation?p.encodeLocation(f).pathname:f.pathname,y=d.pathname,x=h&&h.navigation&&h.navigation.location?h.navigation.location.pathname:null;n||(y=y.toLowerCase(),x=x?x.toLowerCase():null,b=b.toLowerCase()),x&&m&&(x=ub(x,m)||x);const w=b!=="/"&&b.endsWith("/")?b.length-1:b.length;let T=y===b||!i&&y.startsWith(b)&&y.charAt(w)==="/",A=x!=null&&(x===b||!i&&x.startsWith(b)&&x.charAt(b.length)==="/"),k={isActive:T,isPending:A,isTransitioning:g},I=T?t:void 0,O;typeof r=="function"?O=r(k):O=[r,T?"active":null,A?"pending":null,g?"transitioning":null].filter(Boolean).join(" ");let M=typeof s=="function"?s(k):s;return z.createElement(w1e,{...l,"aria-current":I,className:O,ref:c,style:M,to:o,viewTransition:a},typeof u=="function"?u(k):u)});yze.displayName="NavLink";var vze=z.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:i,state:s,method:o=xP,action:a,onSubmit:u,relative:l,preventScrollReset:c,viewTransition:f,...d},h)=>{let p=Eze(),m=Sze(a,{relative:l}),g=o.toLowerCase()==="get"?"get":"post",b=typeof a=="string"&&_1e.test(a),y=x=>{if(u&&u(x),x.defaultPrevented)return;x.preventDefault();let w=x.nativeEvent.submitter,T=(w==null?void 0:w.getAttribute("formmethod"))||o;p(w||x.currentTarget,{fetcherKey:t,method:T,navigate:n,replace:i,state:s,relative:l,preventScrollReset:c,viewTransition:f})};return z.createElement("form",{ref:h,method:g,action:m,onSubmit:r?u:y,...d,"data-discover":!b&&e==="render"?"true":void 0})});vze.displayName="Form";function bze(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function E1e(e){let t=z.useContext(TT);return fo(t,bze(e)),t}function xze(e,{target:t,replace:n,state:r,preventScrollReset:i,relative:s,viewTransition:o}={}){let a=M0(),u=cp(),l=dR(e,{relative:s});return z.useCallback(c=>{if(XUe(c,t)){c.preventDefault();let f=n!==void 0?n:Gk(u)===Gk(l);a(e,{replace:f,state:r,preventScrollReset:i,relative:s,viewTransition:o})}},[u,a,l,n,r,t,e,i,s,o])}function N1(e){Qh(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=z.useRef(mU(e)),n=z.useRef(!1),r=cp(),i=z.useMemo(()=>QUe(r.search,n.current?null:t.current),[r.search]),s=M0(),o=z.useCallback((a,u)=>{const l=mU(typeof a=="function"?a(i):a);n.current=!0,s("?"+l,u)},[s,i]);return[i,o]}var _ze=0,wze=()=>`__${String(++_ze)}__`;function Eze(){let{router:e}=E1e("useSubmit"),{basename:t}=z.useContext(O0),n=BUe();return z.useCallback(async(r,i={})=>{let{action:s,method:o,encType:a,formData:u,body:l}=eze(r,t);if(i.navigate===!1){let c=i.fetcherKey||wze();await e.fetch(c,n,i.action||s,{preventScrollReset:i.preventScrollReset,formData:u,body:l,formMethod:i.method||o,formEncType:i.encType||a,flushSync:i.flushSync})}else await e.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:u,body:l,formMethod:i.method||o,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[e,t,n])}function Sze(e,{relative:t}={}){let{basename:n}=z.useContext(O0),r=z.useContext(lp);fo(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...dR(e||".",{relative:t})},o=cp();if(e==null){s.search=o.search;let a=new URLSearchParams(s.search),u=a.getAll("index");if(u.some(c=>c==="")){a.delete("index"),u.filter(f=>f).forEach(f=>a.append("index",f));let c=a.toString();s.search=c?`?${c}`:""}}return(!e||e===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:Yy([n,s.pathname])),Gk(s)}function Tze(e,t={}){let n=z.useContext(h1e);fo(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=E1e("useViewTransitionState"),i=dR(e,{relative:t.relative});if(!n.isTransitioning)return!1;let s=ub(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=ub(n.nextLocation.pathname,r)||n.nextLocation.pathname;return uN(i.pathname,o)!=null||uN(i.pathname,s)!=null}new TextEncoder;const sG=z.createContext(null);sG.displayName="@mantine/modals/ModalsContext";function Cze(){const e=z.useContext(sG);if(!e)throw new Error("[@mantine/modals] useModals hook was called outside of context, wrap your app with ModalsProvider component");return e}function Aze({id:e,cancelProps:t,confirmProps:n,labels:r={cancel:"",confirm:""},closeOnConfirm:i=!0,closeOnCancel:s=!0,groupProps:o,onCancel:a,onConfirm:u,children:l}){const{cancel:c,confirm:f}=r,d=Cze(),h=m=>{typeof(t==null?void 0:t.onClick)=="function"&&(t==null||t.onClick(m)),typeof a=="function"&&a(),s&&d.closeModal(e)},p=m=>{typeof(n==null?void 0:n.onClick)=="function"&&(n==null||n.onClick(m)),typeof u=="function"&&u(),i&&d.closeModal(e)};return R.jsxs(R.Fragment,{children:[l&&R.jsx(He,{mb:"md",children:l}),R.jsxs(co,{mt:l?0:"md",justify:"flex-end",...o,children:[R.jsx(Bn,{variant:"default",...t,onClick:h,children:(t==null?void 0:t.children)||c}),R.jsx(Bn,{...n,onClick:p,children:(n==null?void 0:n.children)||f})]})]})}const[kze,oG]=QDe("mantine-modals"),Kne=e=>{const t=e.modalId||FE();return oG("openConfirmModal")({...e,modalId:t}),t};oG("closeModal");oG("closeAllModals");function Xne(e,t){var n,r,i,s;t&&e.type==="confirm"&&((r=(n=e.props).onCancel)==null||r.call(n)),(s=(i=e.props).onClose)==null||s.call(i)}function Rze(e,t){var n;switch(t.type){case"OPEN":return{current:t.modal,modals:[...e.modals,t.modal]};case"CLOSE":{const r=e.modals.find(s=>s.id===t.modalId);if(!r)return e;Xne(r,t.canceled);const i=e.modals.filter(s=>s.id!==t.modalId);return{current:i[i.length-1]||e.current,modals:i}}case"CLOSE_ALL":return e.modals.length?(e.modals.concat().reverse().forEach(r=>{Xne(r,t.canceled)}),{current:e.current,modals:[]}):e;case"UPDATE":{const{modalId:r,newProps:i}=t,s=e.modals.map(a=>a.id!==r?a:a.type==="content"||a.type==="confirm"?{...a,props:{...a.props,...i}}:a.type==="context"?{...a,props:{...a.props,...i,innerProps:{...a.props.innerProps,...i.innerProps}}}:a),o=((n=e.current)==null?void 0:n.id)===r&&s.find(a=>a.id===r)||e.current;return{...e,modals:s,current:o}}default:return e}}function Ize(e){if(!e)return{confirmProps:{},modalProps:{}};const{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:u,groupProps:l,labels:c,...f}=e;return{confirmProps:{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:u,groupProps:l,labels:c},modalProps:{id:t,...f}}}function Pze({children:e,modalProps:t,labels:n,modals:r}){const[i,s]=z.useReducer(Rze,{modals:[],current:null}),o=z.useRef(i);o.current=i;const a=z.useCallback(y=>{s({type:"CLOSE_ALL",canceled:y})},[o,s]),u=z.useCallback(({modalId:y,...x})=>{const w=y||FE();return s({type:"OPEN",modal:{id:w,type:"content",props:x}}),w},[s]),l=z.useCallback(({modalId:y,...x})=>{const w=y||FE();return s({type:"OPEN",modal:{id:w,type:"confirm",props:x}}),w},[s]),c=z.useCallback((y,{modalId:x,...w})=>{const T=x||FE();return s({type:"OPEN",modal:{id:T,type:"context",props:w,ctx:y}}),T},[s]),f=z.useCallback((y,x)=>{s({type:"CLOSE",modalId:y,canceled:x})},[o,s]),d=z.useCallback(({modalId:y,...x})=>{s({type:"UPDATE",modalId:y,newProps:x})},[s]),h=z.useCallback(({modalId:y,...x})=>{s({type:"UPDATE",modalId:y,newProps:x})},[s]);kze({openModal:u,openConfirmModal:l,openContextModal:({modal:y,...x})=>c(y,x),closeModal:f,closeContextModal:f,closeAllModals:a,updateModal:d,updateContextModal:h});const p={modalProps:t||{},modals:i.modals,openModal:u,openConfirmModal:l,openContextModal:c,closeModal:f,closeContextModal:f,closeAll:a,updateModal:d,updateContextModal:h},m=()=>{const y=o.current.current;switch(y==null?void 0:y.type){case"context":{const{innerProps:x,...w}=y.props,T=r[y.ctx];return{modalProps:w,content:R.jsx(T,{innerProps:x,context:p,id:y.id})}}case"confirm":{const{modalProps:x,confirmProps:w}=Ize(y.props);return{modalProps:x,content:R.jsx(Aze,{...w,id:y.id,labels:y.props.labels||n})}}case"content":{const{children:x,...w}=y.props;return{modalProps:w,content:x}}default:return{modalProps:{},content:null}}},{modalProps:g,content:b}=m();return R.jsxs(sG.Provider,{value:p,children:[R.jsx(Eo,{zIndex:ld("modal")+1,...t,...g,opened:i.modals.length>0,onClose:()=>{var y;return f((y=i.current)==null?void 0:y.id)},children:b}),e]})}/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Nze={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const pr=(e,t,n,r)=>{const i=z.forwardRef(({color:s="currentColor",size:o=24,stroke:a=2,title:u,className:l,children:c,...f},d)=>z.createElement("svg",{ref:d,...Nze[e],width:o,height:o,className:["tabler-icon",`tabler-icon-${t}`,l].join(" "),...e==="filled"?{fill:s}:{strokeWidth:a,stroke:s},...f},[u&&z.createElement("title",{key:"svg-title"},u),...r.map(([h,p])=>z.createElement(h,p)),...Array.isArray(c)?c:[c]]));return i.displayName=`${n}`,i};/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Dze=pr("outline","adjustments-horizontal","IconAdjustmentsHorizontal",[["path",{d:"M14 6m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-0"}],["path",{d:"M4 6l8 0",key:"svg-1"}],["path",{d:"M16 6l4 0",key:"svg-2"}],["path",{d:"M8 12m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-3"}],["path",{d:"M4 12l2 0",key:"svg-4"}],["path",{d:"M10 12l10 0",key:"svg-5"}],["path",{d:"M17 18m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-6"}],["path",{d:"M4 18l11 0",key:"svg-7"}],["path",{d:"M19 18l1 0",key:"svg-8"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Oze=pr("outline","alert-circle","IconAlertCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 8v4",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var uk=pr("outline","alert-triangle","IconAlertTriangle",[["path",{d:"M12 9v4",key:"svg-0"}],["path",{d:"M10.363 3.591l-8.106 13.534a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636 -2.87l-8.106 -13.536a1.914 1.914 0 0 0 -3.274 0z",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Qne=pr("outline","arrow-left","IconArrowLeft",[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M5 12l6 6",key:"svg-1"}],["path",{d:"M5 12l6 -6",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Jne=pr("outline","arrow-right","IconArrowRight",[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M13 18l6 -6",key:"svg-1"}],["path",{d:"M13 6l6 6",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Mze=pr("outline","arrows-shuffle","IconArrowsShuffle",[["path",{d:"M18 4l3 3l-3 3",key:"svg-0"}],["path",{d:"M18 20l3 -3l-3 -3",key:"svg-1"}],["path",{d:"M3 7h3a5 5 0 0 1 5 5a5 5 0 0 0 5 5h5",key:"svg-2"}],["path",{d:"M21 7h-5a4.978 4.978 0 0 0 -3 1m-4 8a4.984 4.984 0 0 1 -3 1h-3",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Lze=pr("outline","at","IconAt",[["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M16 12v1.5a2.5 2.5 0 0 0 5 0v-1.5a9 9 0 1 0 -5.5 8.28",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Fze=pr("outline","brain","IconBrain",[["path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8",key:"svg-0"}],["path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8",key:"svg-1"}],["path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5",key:"svg-2"}],["path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0",key:"svg-3"}],["path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5",key:"svg-4"}],["path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var $ze=pr("outline","brand-python","IconBrandPython",[["path",{d:"M12 9h-7a2 2 0 0 0 -2 2v4a2 2 0 0 0 2 2h3",key:"svg-0"}],["path",{d:"M12 15h7a2 2 0 0 0 2 -2v-4a2 2 0 0 0 -2 -2h-3",key:"svg-1"}],["path",{d:"M8 9v-4a2 2 0 0 1 2 -2h4a2 2 0 0 1 2 2v5a2 2 0 0 1 -2 2h-4a2 2 0 0 0 -2 2v5a2 2 0 0 0 2 2h4a2 2 0 0 0 2 -2v-4",key:"svg-2"}],["path",{d:"M11 6l0 .01",key:"svg-3"}],["path",{d:"M13 18l0 .01",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Bze=pr("outline","bubble-text","IconBubbleText",[["path",{d:"M7 10h10",key:"svg-0"}],["path",{d:"M9 14h5",key:"svg-1"}],["path",{d:"M12.4 3a5.34 5.34 0 0 1 4.906 3.239a5.333 5.333 0 0 1 -1.195 10.6a4.26 4.26 0 0 1 -5.28 1.863l-3.831 2.298v-3.134a2.668 2.668 0 0 1 -1.795 -3.773a4.8 4.8 0 0 1 2.908 -8.933a5.33 5.33 0 0 1 4.287 -2.16",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var jze=pr("outline","chart-donut-2","IconChartDonut2",[["path",{d:"M12 3v5m4 4h5",key:"svg-0"}],["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-1"}],["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var S1e=pr("outline","chart-histogram","IconChartHistogram",[["path",{d:"M3 3v18h18",key:"svg-0"}],["path",{d:"M20 18v3",key:"svg-1"}],["path",{d:"M16 16v5",key:"svg-2"}],["path",{d:"M12 13v8",key:"svg-3"}],["path",{d:"M8 16v5",key:"svg-4"}],["path",{d:"M3 11c6 0 5 -5 9 -5s3 5 9 5",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var f9=pr("outline","check","IconCheck",[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Uze=pr("outline","chevron-down","IconChevronDown",[["path",{d:"M6 9l6 6l6 -6",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var zze=pr("outline","code-plus","IconCodePlus",[["path",{d:"M9 12h6",key:"svg-0"}],["path",{d:"M12 9v6",key:"svg-1"}],["path",{d:"M6 19a2 2 0 0 1 -2 -2v-4l-1 -1l1 -1v-4a2 2 0 0 1 2 -2",key:"svg-2"}],["path",{d:"M18 19a2 2 0 0 0 2 -2v-4l1 -1l-1 -1v-4a2 2 0 0 0 -2 -2",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Vze=pr("outline","database-export","IconDatabaseExport",[["path",{d:"M4 6c0 1.657 3.582 3 8 3s8 -1.343 8 -3s-3.582 -3 -8 -3s-8 1.343 -8 3",key:"svg-0"}],["path",{d:"M4 6v6c0 1.657 3.582 3 8 3c1.118 0 2.183 -.086 3.15 -.241",key:"svg-1"}],["path",{d:"M20 12v-6",key:"svg-2"}],["path",{d:"M4 12v6c0 1.657 3.582 3 8 3c.157 0 .312 -.002 .466 -.005",key:"svg-3"}],["path",{d:"M16 19h6",key:"svg-4"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Hze=pr("outline","dots-vertical","IconDotsVertical",[["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var qze=pr("outline","dots","IconDots",[["path",{d:"M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var T1e=pr("outline","external-link","IconExternalLink",[["path",{d:"M12 6h-6a2 2 0 0 0 -2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-6",key:"svg-0"}],["path",{d:"M11 13l9 -9",key:"svg-1"}],["path",{d:"M15 4h5v5",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Wze=pr("outline","hourglass-empty","IconHourglassEmpty",[["path",{d:"M6 20v-2a6 6 0 1 1 12 0v2a1 1 0 0 1 -1 1h-10a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M6 4v2a6 6 0 1 0 12 0v-2a1 1 0 0 0 -1 -1h-10a1 1 0 0 0 -1 1z",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Gze=pr("outline","html","IconHtml",[["path",{d:"M13 16v-8l2 5l2 -5v8",key:"svg-0"}],["path",{d:"M1 16v-8",key:"svg-1"}],["path",{d:"M5 8v8",key:"svg-2"}],["path",{d:"M1 12h4",key:"svg-3"}],["path",{d:"M7 8h4",key:"svg-4"}],["path",{d:"M9 8v8",key:"svg-5"}],["path",{d:"M20 8v8h3",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var aG=pr("outline","info-circle","IconInfoCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 9h.01",key:"svg-1"}],["path",{d:"M11 12h1v4h1",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Yze=pr("outline","layout-columns","IconLayoutColumns",[["path",{d:"M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M12 4l0 16",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var C1e=pr("outline","list-check","IconListCheck",[["path",{d:"M3.5 5.5l1.5 1.5l2.5 -2.5",key:"svg-0"}],["path",{d:"M3.5 11.5l1.5 1.5l2.5 -2.5",key:"svg-1"}],["path",{d:"M3.5 17.5l1.5 1.5l2.5 -2.5",key:"svg-2"}],["path",{d:"M11 6l9 0",key:"svg-3"}],["path",{d:"M11 12l9 0",key:"svg-4"}],["path",{d:"M11 18l9 0",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Kze=pr("outline","mail","IconMail",[["path",{d:"M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z",key:"svg-0"}],["path",{d:"M3 7l9 6l9 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Xze=pr("outline","number-123","IconNumber123",[["path",{d:"M3 10l2 -2v8",key:"svg-0"}],["path",{d:"M9 8h3a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 0 -1 1v2a1 1 0 0 0 1 1h3",key:"svg-1"}],["path",{d:"M17 8h2.5a1.5 1.5 0 0 1 1.5 1.5v1a1.5 1.5 0 0 1 -1.5 1.5h-1.5h1.5a1.5 1.5 0 0 1 1.5 1.5v1a1.5 1.5 0 0 1 -1.5 1.5h-2.5",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Qze=pr("outline","package-import","IconPackageImport",[["path",{d:"M12 21l-8 -4.5v-9l8 -4.5l8 4.5v4.5",key:"svg-0"}],["path",{d:"M12 12l8 -4.5",key:"svg-1"}],["path",{d:"M12 12v9",key:"svg-2"}],["path",{d:"M12 12l-8 -4.5",key:"svg-3"}],["path",{d:"M22 18h-7",key:"svg-4"}],["path",{d:"M18 15l-3 3l3 3",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Jze=pr("outline","pencil","IconPencil",[["path",{d:"M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4",key:"svg-0"}],["path",{d:"M13.5 6.5l4 4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Zze=pr("outline","player-play","IconPlayerPlay",[["path",{d:"M7 4v16l13 -8z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var A1e=pr("outline","progress","IconProgress",[["path",{d:"M10 20.777a8.942 8.942 0 0 1 -2.48 -.969",key:"svg-0"}],["path",{d:"M14 3.223a9.003 9.003 0 0 1 0 17.554",key:"svg-1"}],["path",{d:"M4.579 17.093a8.961 8.961 0 0 1 -1.227 -2.592",key:"svg-2"}],["path",{d:"M3.124 10.5c.16 -.95 .468 -1.85 .9 -2.675l.169 -.305",key:"svg-3"}],["path",{d:"M6.907 4.579a8.954 8.954 0 0 1 3.093 -1.356",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var eVe=pr("outline","radio","IconRadio",[["path",{d:"M14 3l-9.371 3.749a1 1 0 0 0 -.629 .928v11.323a1 1 0 0 0 1 1h14a1 1 0 0 0 1 -1v-11a1 1 0 0 0 -1 -1h-14.5",key:"svg-0"}],["path",{d:"M4 12h16",key:"svg-1"}],["path",{d:"M7 12v-2",key:"svg-2"}],["path",{d:"M17 16v.01",key:"svg-3"}],["path",{d:"M13 16v.01",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var tVe=pr("outline","refresh","IconRefresh",[["path",{d:"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4",key:"svg-0"}],["path",{d:"M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var nVe=pr("outline","schema","IconSchema",[["path",{d:"M5 2h5v4h-5z",key:"svg-0"}],["path",{d:"M15 10h5v4h-5z",key:"svg-1"}],["path",{d:"M5 18h5v4h-5z",key:"svg-2"}],["path",{d:"M5 10h5v4h-5z",key:"svg-3"}],["path",{d:"M10 12h5",key:"svg-4"}],["path",{d:"M7.5 6v4",key:"svg-5"}],["path",{d:"M7.5 14v4",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var rVe=pr("outline","search","IconSearch",[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M21 21l-6 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var iVe=pr("outline","select","IconSelect",[["path",{d:"M3 3m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M9 11l3 3l3 -3",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var k1e=pr("outline","settings","IconSettings",[["path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var sVe=pr("outline","squares","IconSquares",[["path",{d:"M8 10a2 2 0 0 1 2 -2h9a2 2 0 0 1 2 2v9a2 2 0 0 1 -2 2h-9a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M16 8v-3a2 2 0 0 0 -2 -2h-9a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h3",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var R1e=pr("outline","table-export","IconTableExport",[["path",{d:"M12.5 21h-7.5a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v7.5",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}],["path",{d:"M16 19h6",key:"svg-3"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var oVe=pr("outline","table","IconTable",[["path",{d:"M3 5a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-14z",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var I1e=pr("outline","trash-x","IconTrashX",[["path",{d:"M4 7h16",key:"svg-0"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-1"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-2"}],["path",{d:"M10 12l4 4m0 -4l-4 4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var uG=pr("outline","user-plus","IconUserPlus",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M16 19h6",key:"svg-1"}],["path",{d:"M19 16v6",key:"svg-2"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Zne=pr("outline","user","IconUser",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var hR=pr("outline","x","IconX",[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var aVe=pr("filled","brand-google-filled","IconBrandGoogleFilled",[["path",{d:"M12 2a9.96 9.96 0 0 1 6.29 2.226a1 1 0 0 1 .04 1.52l-1.51 1.362a1 1 0 0 1 -1.265 .06a6 6 0 1 0 2.103 6.836l.001 -.004h-3.66a1 1 0 0 1 -.992 -.883l-.007 -.117v-2a1 1 0 0 1 1 -1h6.945a1 1 0 0 1 .994 .89c.04 .367 .061 .737 .061 1.11c0 5.523 -4.477 10 -10 10s-10 -4.477 -10 -10s4.477 -10 10 -10z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var uVe=pr("filled","player-pause-filled","IconPlayerPauseFilled",[["path",{d:"M9 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z",key:"svg-0"}],["path",{d:"M17 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var lVe=pr("filled","player-play-filled","IconPlayerPlayFilled",[["path",{d:"M6 4v16a1 1 0 0 0 1.524 .852l13 -8a1 1 0 0 0 0 -1.704l-13 -8a1 1 0 0 0 -1.524 .852z",key:"svg-0"}]]);function P1e(e){const t=e.split("/")||[];return t[t.length-1].replace(/\.[^\.]+$/,"").replace(".","_").replace(" ","_").replace("/","_")}const ju="/Grid-Labeling/";function ere(e){const t=[],n=String(e||"");let r=n.indexOf(","),i=0,s=!1;for(;!s;){r===-1&&(r=n.length,s=!0);const o=n.slice(i,r).trim();(o||!s)&&t.push(o),i=r+1,r=n.indexOf(",",i)}return t}function N1e(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const cVe=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,fVe=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,dVe={};function tre(e,t){return(dVe.jsx?fVe:cVe).test(e)}const hVe=/[ \t\n\f\r]/g;function pVe(e){return typeof e=="object"?e.type==="text"?nre(e.value):!1:nre(e)}function nre(e){return e.replace(hVe,"")===""}class pR{constructor(t,n,r){this.property=t,this.normal=n,r&&(this.space=r)}}pR.prototype.property={};pR.prototype.normal={};pR.prototype.space=null;function D1e(e,t){const n={},r={};let i=-1;for(;++i<e.length;)Object.assign(n,e[i].property),Object.assign(r,e[i].normal);return new pR(n,r,t)}function Yk(e){return e.toLowerCase()}let fp=class{constructor(t,n){this.property=t,this.attribute=n}};fp.prototype.space=null;fp.prototype.boolean=!1;fp.prototype.booleanish=!1;fp.prototype.overloadedBoolean=!1;fp.prototype.number=!1;fp.prototype.commaSeparated=!1;fp.prototype.spaceSeparated=!1;fp.prototype.commaOrSpaceSeparated=!1;fp.prototype.mustUseProperty=!1;fp.prototype.defined=!1;let mVe=0;const Ar=Nw(),za=Nw(),O1e=Nw(),Qt=Nw(),Ms=Nw(),jE=Nw(),$d=Nw();function Nw(){return 2**++mVe}const gU=Object.freeze(Object.defineProperty({__proto__:null,boolean:Ar,booleanish:za,commaOrSpaceSeparated:$d,commaSeparated:jE,number:Qt,overloadedBoolean:O1e,spaceSeparated:Ms},Symbol.toStringTag,{value:"Module"})),AF=Object.keys(gU);class lG extends fp{constructor(t,n,r,i){let s=-1;if(super(t,n),rre(this,"space",i),typeof r=="number")for(;++s<AF.length;){const o=AF[s];rre(this,AF[s],(r&gU[o])===gU[o])}}}lG.prototype.defined=!0;function rre(e,t,n){n&&(e[t]=n)}const gVe={}.hasOwnProperty;function AT(e){const t={},n={};let r;for(r in e.properties)if(gVe.call(e.properties,r)){const i=e.properties[r],s=new lG(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[Yk(r)]=r,n[Yk(s.attribute)]=r}return new pR(t,n,e.space)}const M1e=AT({space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),L1e=AT({space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function F1e(e,t){return t in e?e[t]:t}function $1e(e,t){return F1e(e,t.toLowerCase())}const B1e=AT({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:$1e,properties:{xmlns:null,xmlnsXLink:null}}),j1e=AT({transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:za,ariaAutoComplete:null,ariaBusy:za,ariaChecked:za,ariaColCount:Qt,ariaColIndex:Qt,ariaColSpan:Qt,ariaControls:Ms,ariaCurrent:null,ariaDescribedBy:Ms,ariaDetails:null,ariaDisabled:za,ariaDropEffect:Ms,ariaErrorMessage:null,ariaExpanded:za,ariaFlowTo:Ms,ariaGrabbed:za,ariaHasPopup:null,ariaHidden:za,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Ms,ariaLevel:Qt,ariaLive:null,ariaModal:za,ariaMultiLine:za,ariaMultiSelectable:za,ariaOrientation:null,ariaOwns:Ms,ariaPlaceholder:null,ariaPosInSet:Qt,ariaPressed:za,ariaReadOnly:za,ariaRelevant:null,ariaRequired:za,ariaRoleDescription:Ms,ariaRowCount:Qt,ariaRowIndex:Qt,ariaRowSpan:Qt,ariaSelected:za,ariaSetSize:Qt,ariaSort:null,ariaValueMax:Qt,ariaValueMin:Qt,ariaValueNow:Qt,ariaValueText:null,role:null}}),yVe=AT({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:$1e,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:jE,acceptCharset:Ms,accessKey:Ms,action:null,allow:null,allowFullScreen:Ar,allowPaymentRequest:Ar,allowUserMedia:Ar,alt:null,as:null,async:Ar,autoCapitalize:null,autoComplete:Ms,autoFocus:Ar,autoPlay:Ar,blocking:Ms,capture:null,charSet:null,checked:Ar,cite:null,className:Ms,cols:Qt,colSpan:null,content:null,contentEditable:za,controls:Ar,controlsList:Ms,coords:Qt|jE,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Ar,defer:Ar,dir:null,dirName:null,disabled:Ar,download:O1e,draggable:za,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Ar,formTarget:null,headers:Ms,height:Qt,hidden:Ar,high:Qt,href:null,hrefLang:null,htmlFor:Ms,httpEquiv:Ms,id:null,imageSizes:null,imageSrcSet:null,inert:Ar,inputMode:null,integrity:null,is:null,isMap:Ar,itemId:null,itemProp:Ms,itemRef:Ms,itemScope:Ar,itemType:Ms,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Ar,low:Qt,manifest:null,max:null,maxLength:Qt,media:null,method:null,min:null,minLength:Qt,multiple:Ar,muted:Ar,name:null,nonce:null,noModule:Ar,noValidate:Ar,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Ar,optimum:Qt,pattern:null,ping:Ms,placeholder:null,playsInline:Ar,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Ar,referrerPolicy:null,rel:Ms,required:Ar,reversed:Ar,rows:Qt,rowSpan:Qt,sandbox:Ms,scope:null,scoped:Ar,seamless:Ar,selected:Ar,shadowRootClonable:Ar,shadowRootDelegatesFocus:Ar,shadowRootMode:null,shape:null,size:Qt,sizes:null,slot:null,span:Qt,spellCheck:za,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Qt,step:null,style:null,tabIndex:Qt,target:null,title:null,translate:null,type:null,typeMustMatch:Ar,useMap:null,value:za,width:Qt,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Ms,axis:null,background:null,bgColor:null,border:Qt,borderColor:null,bottomMargin:Qt,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Ar,declare:Ar,event:null,face:null,frame:null,frameBorder:null,hSpace:Qt,leftMargin:Qt,link:null,longDesc:null,lowSrc:null,marginHeight:Qt,marginWidth:Qt,noResize:Ar,noHref:Ar,noShade:Ar,noWrap:Ar,object:null,profile:null,prompt:null,rev:null,rightMargin:Qt,rules:null,scheme:null,scrolling:za,standby:null,summary:null,text:null,topMargin:Qt,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Qt,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Ar,disableRemotePlayback:Ar,prefix:null,property:null,results:Qt,security:null,unselectable:null}}),vVe=AT({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:F1e,properties:{about:$d,accentHeight:Qt,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Qt,amplitude:Qt,arabicForm:null,ascent:Qt,attributeName:null,attributeType:null,azimuth:Qt,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Qt,by:null,calcMode:null,capHeight:Qt,className:Ms,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Qt,diffuseConstant:Qt,direction:null,display:null,dur:null,divisor:Qt,dominantBaseline:null,download:Ar,dx:null,dy:null,edgeMode:null,editable:null,elevation:Qt,enableBackground:null,end:null,event:null,exponent:Qt,externalResourcesRequired:null,fill:null,fillOpacity:Qt,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:jE,g2:jE,glyphName:jE,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Qt,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Qt,horizOriginX:Qt,horizOriginY:Qt,id:null,ideographic:Qt,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Qt,k:Qt,k1:Qt,k2:Qt,k3:Qt,k4:Qt,kernelMatrix:$d,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Qt,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Qt,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Qt,overlineThickness:Qt,paintOrder:null,panose1:null,path:null,pathLength:Qt,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Ms,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Qt,pointsAtY:Qt,pointsAtZ:Qt,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:$d,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:$d,rev:$d,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:$d,requiredFeatures:$d,requiredFonts:$d,requiredFormats:$d,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Qt,specularExponent:Qt,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Qt,strikethroughThickness:Qt,string:null,stroke:null,strokeDashArray:$d,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Qt,strokeOpacity:Qt,strokeWidth:null,style:null,surfaceScale:Qt,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:$d,tabIndex:Qt,tableValues:null,target:null,targetX:Qt,targetY:Qt,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:$d,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Qt,underlineThickness:Qt,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Qt,values:null,vAlphabetic:Qt,vMathematical:Qt,vectorEffect:null,vHanging:Qt,vIdeographic:Qt,version:null,vertAdvY:Qt,vertOriginX:Qt,vertOriginY:Qt,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Qt,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),bVe=/^data[-\w.:]+$/i,ire=/-[a-z]/g,xVe=/[A-Z]/g;function d9(e,t){const n=Yk(t);let r=t,i=fp;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&bVe.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(ire,wVe);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!ire.test(s)){let o=s.replace(xVe,_Ve);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}i=lG}return new i(r,t)}function _Ve(e){return"-"+e.toLowerCase()}function wVe(e){return e.charAt(1).toUpperCase()}const EVe={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},mR=D1e([L1e,M1e,B1e,j1e,yVe],"html"),qb=D1e([L1e,M1e,B1e,j1e,vVe],"svg");function sre(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function U1e(e){return e.join(" ").trim()}var WC={},kF,ore;function SVe(){if(ore)return kF;ore=1;var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,t=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,s=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,o=/^[;\s]*/,a=/^\s+|\s+$/g,u=`
`,l="/",c="*",f="",d="comment",h="declaration";kF=function(m,g){if(typeof m!="string")throw new TypeError("First argument must be a string");if(!m)return[];g=g||{};var b=1,y=1;function x(D){var B=D.match(t);B&&(b+=B.length);var U=D.lastIndexOf(u);y=~U?D.length-U:y+D.length}function w(){var D={line:b,column:y};return function(B){return B.position=new T(D),I(),B}}function T(D){this.start=D,this.end={line:b,column:y},this.source=g.source}T.prototype.content=m;function A(D){var B=new Error(g.source+":"+b+":"+y+": "+D);if(B.reason=D,B.filename=g.source,B.line=b,B.column=y,B.source=m,!g.silent)throw B}function k(D){var B=D.exec(m);if(B){var U=B[0];return x(U),m=m.slice(U.length),B}}function I(){k(n)}function O(D){var B;for(D=D||[];B=M();)B!==!1&&D.push(B);return D}function M(){var D=w();if(!(l!=m.charAt(0)||c!=m.charAt(1))){for(var B=2;f!=m.charAt(B)&&(c!=m.charAt(B)||l!=m.charAt(B+1));)++B;if(B+=2,f===m.charAt(B-1))return A("End of comment missing");var U=m.slice(2,B-2);return y+=2,x(U),m=m.slice(B),y+=2,D({type:d,comment:U})}}function L(){var D=w(),B=k(r);if(B){if(M(),!k(i))return A("property missing ':'");var U=k(s),G=D({type:h,property:p(B[0].replace(e,f)),value:U?p(U[0].replace(e,f)):f});return k(o),G}}function H(){var D=[];O(D);for(var B;B=L();)B!==!1&&(D.push(B),O(D));return D}return I(),H()};function p(m){return m?m.replace(a,f):f}return kF}var are;function TVe(){if(are)return WC;are=1;var e=WC.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(WC,"__esModule",{value:!0});var t=e(SVe());function n(r,i){var s=null;if(!r||typeof r!="string")return s;var o=(0,t.default)(r),a=typeof i=="function";return o.forEach(function(u){if(u.type==="declaration"){var l=u.property,c=u.value;a?i(l,c,u):c&&(s=s||{},s[l]=c)}}),s}return WC.default=n,WC}var CVe=TVe();const ure=hc(CVe),AVe=ure.default||ure,h9=z1e("end"),xg=z1e("start");function z1e(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function kVe(e){const t=xg(e),n=h9(e);if(t&&n)return{start:t,end:n}}function lk(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?lre(e.position):"start"in e||"end"in e?lre(e):"line"in e||"column"in e?yU(e):""}function yU(e){return cre(e&&e.line)+":"+cre(e&&e.column)}function lre(e){return yU(e&&e.start)+"-"+yU(e&&e.end)}function cre(e){return e&&typeof e=="number"?e:1}class pc extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof t=="string"?i=t:!s.cause&&t&&(o=!0,i=t.message,s.cause=t),!s.ruleId&&!s.source&&typeof r=="string"){const u=r.indexOf(":");u===-1?s.ruleId=r:(s.source=r.slice(0,u),s.ruleId=r.slice(u+1))}if(!s.place&&s.ancestors&&s.ancestors){const u=s.ancestors[s.ancestors.length-1];u&&(s.place=u.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=a?a.line:void 0,this.name=lk(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}pc.prototype.file="";pc.prototype.name="";pc.prototype.reason="";pc.prototype.message="";pc.prototype.stack="";pc.prototype.column=void 0;pc.prototype.line=void 0;pc.prototype.ancestors=void 0;pc.prototype.cause=void 0;pc.prototype.fatal=void 0;pc.prototype.place=void 0;pc.prototype.ruleId=void 0;pc.prototype.source=void 0;const cG={}.hasOwnProperty,RVe=new Map,IVe=/[A-Z]/g,PVe=/-([a-z])/g,NVe=new Set(["table","tbody","thead","tfoot","tr"]),DVe=new Set(["td","th"]),V1e="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function OVe(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=zVe(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=UVe(n,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?qb:mR,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},s=H1e(i,e,void 0);return s&&typeof s!="string"?s:i.create(e,i.Fragment,{children:s||void 0},void 0)}function H1e(e,t,n){if(t.type==="element")return MVe(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return LVe(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return $Ve(e,t,n);if(t.type==="mdxjsEsm")return FVe(e,t);if(t.type==="root")return BVe(e,t,n);if(t.type==="text")return jVe(e,t)}function MVe(e,t,n){const r=e.schema;let i=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=qb,e.schema=i),e.ancestors.push(t);const s=W1e(e,t.tagName,!1),o=VVe(e,t);let a=dG(e,t);return NVe.has(t.tagName)&&(a=a.filter(function(u){return typeof u=="string"?!pVe(u):!0})),q1e(e,o,s,t),fG(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function LVe(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}Kk(e,t.position)}function FVe(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);Kk(e,t.position)}function $Ve(e,t,n){const r=e.schema;let i=r;t.name==="svg"&&r.space==="html"&&(i=qb,e.schema=i),e.ancestors.push(t);const s=t.name===null?e.Fragment:W1e(e,t.name,!0),o=HVe(e,t),a=dG(e,t);return q1e(e,o,s,t),fG(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function BVe(e,t,n){const r={};return fG(r,dG(e,t)),e.create(t,e.Fragment,r,n)}function jVe(e,t){return t.value}function q1e(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function fG(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function UVe(e,t,n){return r;function r(i,s,o,a){const l=Array.isArray(o.children)?n:t;return a?l(s,o,a):l(s,o)}}function zVe(e,t){return n;function n(r,i,s,o){const a=Array.isArray(s.children),u=xg(r);return t(i,s,o,a,{columnNumber:u?u.column-1:void 0,fileName:e,lineNumber:u?u.line:void 0},void 0)}}function VVe(e,t){const n={};let r,i;for(i in t.properties)if(i!=="children"&&cG.call(t.properties,i)){const s=qVe(e,i,t.properties[i]);if(s){const[o,a]=s;e.tableCellAlignToStyle&&o==="align"&&typeof a=="string"&&DVe.has(t.tagName)?r=a:n[o]=a}}if(r){const s=n.style||(n.style={});s[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function HVe(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const a=o.properties[0];a.type,Object.assign(n,e.evaluater.evaluateExpression(a.argument))}else Kk(e,t.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const a=r.value.data.estree.body[0];a.type,s=e.evaluater.evaluateExpression(a.expression)}else Kk(e,t.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function dG(e,t){const n=[];let r=-1;const i=e.passKeys?new Map:RVe;for(;++r<t.children.length;){const s=t.children[r];let o;if(e.passKeys){const u=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(u){const l=i.get(u)||0;o=u+"-"+l,i.set(u,l+1)}}const a=H1e(e,s,o);a!==void 0&&n.push(a)}return n}function qVe(e,t,n){const r=d9(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?N1e(n):U1e(n)),r.property==="style"){let i=typeof n=="object"?n:WVe(e,String(n));return e.stylePropertyNameCase==="css"&&(i=GVe(i)),["style",i]}return[e.elementAttributeNameCase==="react"&&r.space?EVe[r.property]||r.property:r.attribute,n]}}function WVe(e,t){const n={};try{AVe(t,r)}catch(i){if(!e.ignoreInvalidStyle){const s=i,o=new pc("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:s,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw o.file=e.filePath||void 0,o.url=V1e+"#cannot-parse-style-attribute",o}}return n;function r(i,s){let o=i;o.slice(0,2)!=="--"&&(o.slice(0,4)==="-ms-"&&(o="ms-"+o.slice(4)),o=o.replace(PVe,KVe)),n[o]=s}}function W1e(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const i=t.split(".");let s=-1,o;for(;++s<i.length;){const a=tre(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}r=o}else r=tre(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const i=r.value;return cG.call(e.components,i)?e.components[i]:i}if(e.evaluater)return e.evaluater.evaluateExpression(r);Kk(e)}function Kk(e,t){const n=new pc("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=V1e+"#cannot-handle-mdx-estrees-without-createevaluater",n}function GVe(e){const t={};let n;for(n in e)cG.call(e,n)&&(t[YVe(n)]=e[n]);return t}function YVe(e){let t=e.replace(IVe,XVe);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function KVe(e,t){return t.toUpperCase()}function XVe(e){return"-"+e.toLowerCase()}const RF={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},QVe={};function JVe(e,t){const n=QVe,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return G1e(e,r,i)}function G1e(e,t,n){if(ZVe(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return fre(e.children,t,n)}return Array.isArray(e)?fre(e,t,n):""}function fre(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=G1e(e[i],t,n);return r.join("")}function ZVe(e){return!!(e&&typeof e=="object")}const dre=document.createElement("i");function hG(e){const t="&"+e+";";dre.innerHTML=t;const n=dre.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function c1(e,t,n,r){const i=e.length;let s=0,o;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(t,0),e.splice(...o),s+=1e4,t+=1e4}function Uh(e,t){return e.length>0?(c1(e,e.length,0,t),e):t}const hre={}.hasOwnProperty;function eHe(e){const t={};let n=-1;for(;++n<e.length;)tHe(t,e[n]);return t}function tHe(e,t){let n;for(n in t){const i=(hre.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let o;if(s)for(o in s){hre.call(i,o)||(i[o]=[]);const a=s[o];nHe(i[o],Array.isArray(a)?a:a?[a]:[])}}}function nHe(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);c1(e,0,0,r)}function Y1e(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function UE(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const km=Wb(/[A-Za-z]/),qd=Wb(/[\dA-Za-z]/),rHe=Wb(/[#-'*+\--9=?A-Z^-~]/);function vU(e){return e!==null&&(e<32||e===127)}const bU=Wb(/\d/),iHe=Wb(/[\dA-Fa-f]/),sHe=Wb(/[!-/:-@[-`{-~]/);function or(e){return e!==null&&e<-2}function Zf(e){return e!==null&&(e<0||e===32)}function zi(e){return e===-2||e===-1||e===32}const oHe=Wb(new RegExp("\\p{P}|\\p{S}","u")),aHe=Wb(/\s/);function Wb(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function kT(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const s=e.charCodeAt(n);let o="";if(s===37&&qd(e.charCodeAt(n+1))&&qd(e.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=e.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o=""}else o=String.fromCharCode(s);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function Ls(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(u){return zi(u)?(e.enter(n),a(u)):t(u)}function a(u){return zi(u)&&s++<i?(e.consume(u),a):(e.exit(n),t(u))}}const uHe={tokenize:lHe};function lHe(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),Ls(e,t,"linePrefix")}function i(a){return e.enter("paragraph"),s(a)}function s(a){const u=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=u),n=u,o(a)}function o(a){if(a===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(a);return}return or(a)?(e.consume(a),e.exit("chunkText"),s):(e.consume(a),o)}}const cHe={tokenize:fHe},pre={tokenize:dHe};function fHe(e){const t=this,n=[];let r=0,i,s,o;return a;function a(x){if(r<n.length){const w=n[r];return t.containerState=w[1],e.attempt(w[0].continuation,u,l)(x)}return l(x)}function u(x){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&y();const w=t.events.length;let T=w,A;for(;T--;)if(t.events[T][0]==="exit"&&t.events[T][1].type==="chunkFlow"){A=t.events[T][1].end;break}b(r);let k=w;for(;k<t.events.length;)t.events[k][1].end=Object.assign({},A),k++;return c1(t.events,T+1,0,t.events.slice(w)),t.events.length=k,l(x)}return a(x)}function l(x){if(r===n.length){if(!i)return d(x);if(i.currentConstruct&&i.currentConstruct.concrete)return p(x);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(pre,c,f)(x)}function c(x){return i&&y(),b(r),d(x)}function f(x){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,p(x)}function d(x){return t.containerState={},e.attempt(pre,h,p)(x)}function h(x){return r++,n.push([t.currentConstruct,t.containerState]),d(x)}function p(x){if(x===null){i&&y(),b(0),e.consume(x);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:s,_tokenizer:i}),m(x)}function m(x){if(x===null){g(e.exit("chunkFlow"),!0),b(0),e.consume(x);return}return or(x)?(e.consume(x),g(e.exit("chunkFlow")),r=0,t.interrupt=void 0,a):(e.consume(x),m)}function g(x,w){const T=t.sliceStream(x);if(w&&T.push(null),x.previous=s,s&&(s.next=x),s=x,i.defineSkip(x.start),i.write(T),t.parser.lazy[x.start.line]){let A=i.events.length;for(;A--;)if(i.events[A][1].start.offset<o&&(!i.events[A][1].end||i.events[A][1].end.offset>o))return;const k=t.events.length;let I=k,O,M;for(;I--;)if(t.events[I][0]==="exit"&&t.events[I][1].type==="chunkFlow"){if(O){M=t.events[I][1].end;break}O=!0}for(b(r),A=k;A<t.events.length;)t.events[A][1].end=Object.assign({},M),A++;c1(t.events,I+1,0,t.events.slice(k)),t.events.length=A}}function b(x){let w=n.length;for(;w-- >x;){const T=n[w];t.containerState=T[1],T[0].exit.call(t,e)}n.length=x}function y(){i.write([null]),s=void 0,i=void 0,t.containerState._closeFlow=void 0}}function dHe(e,t,n){return Ls(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function mre(e){if(e===null||Zf(e)||aHe(e))return 1;if(oHe(e))return 2}function pG(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const s=e[i].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}const xU={name:"attention",tokenize:pHe,resolveAll:hHe};function hHe(e,t){let n=-1,r,i,s,o,a,u,l,c;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;u=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const f=Object.assign({},e[r][1].end),d=Object.assign({},e[n][1].start);gre(f,-u),gre(d,u),o={type:u>1?"strongSequence":"emphasisSequence",start:f,end:Object.assign({},e[r][1].end)},a={type:u>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[n][1].start),end:d},s={type:u>1?"strongText":"emphasisText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},i={type:u>1?"strong":"emphasis",start:Object.assign({},o.start),end:Object.assign({},a.end)},e[r][1].end=Object.assign({},o.start),e[n][1].start=Object.assign({},a.end),l=[],e[r][1].end.offset-e[r][1].start.offset&&(l=Uh(l,[["enter",e[r][1],t],["exit",e[r][1],t]])),l=Uh(l,[["enter",i,t],["enter",o,t],["exit",o,t],["enter",s,t]]),l=Uh(l,pG(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),l=Uh(l,[["exit",s,t],["enter",a,t],["exit",a,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(c=2,l=Uh(l,[["enter",e[n][1],t],["exit",e[n][1],t]])):c=0,c1(e,r-1,n-r+3,l),n=r+l.length-c-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function pHe(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=mre(r);let s;return o;function o(u){return s=u,e.enter("attentionSequence"),a(u)}function a(u){if(u===s)return e.consume(u),a;const l=e.exit("attentionSequence"),c=mre(u),f=!c||c===2&&i||n.includes(u),d=!i||i===2&&c||n.includes(r);return l._open=!!(s===42?f:f&&(i||!d)),l._close=!!(s===42?d:d&&(c||!f)),t(u)}}function gre(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const mHe={name:"autolink",tokenize:gHe};function gHe(e,t,n){let r=0;return i;function i(h){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(h){return km(h)?(e.consume(h),o):h===64?n(h):l(h)}function o(h){return h===43||h===45||h===46||qd(h)?(r=1,a(h)):l(h)}function a(h){return h===58?(e.consume(h),r=0,u):(h===43||h===45||h===46||qd(h))&&r++<32?(e.consume(h),a):(r=0,l(h))}function u(h){return h===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):h===null||h===32||h===60||vU(h)?n(h):(e.consume(h),u)}function l(h){return h===64?(e.consume(h),c):rHe(h)?(e.consume(h),l):n(h)}function c(h){return qd(h)?f(h):n(h)}function f(h){return h===46?(e.consume(h),r=0,c):h===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):d(h)}function d(h){if((h===45||qd(h))&&r++<63){const p=h===45?d:f;return e.consume(h),p}return n(h)}}const p9={tokenize:yHe,partial:!0};function yHe(e,t,n){return r;function r(s){return zi(s)?Ls(e,i,"linePrefix")(s):i(s)}function i(s){return s===null||or(s)?t(s):n(s)}}const K1e={name:"blockQuote",tokenize:vHe,continuation:{tokenize:bHe},exit:xHe};function vHe(e,t,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(e.enter("blockQuote",{_container:!0}),a.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),s}return n(o)}function s(o){return zi(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function bHe(e,t,n){const r=this;return i;function i(o){return zi(o)?Ls(e,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return e.attempt(K1e,t,n)(o)}}function xHe(e){e.exit("blockQuote")}const X1e={name:"characterEscape",tokenize:_He};function _He(e,t,n){return r;function r(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),i}function i(s){return sHe(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const Q1e={name:"characterReference",tokenize:wHe};function wHe(e,t,n){const r=this;let i=0,s,o;return a;function a(f){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),u}function u(f){return f===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(f),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),s=31,o=qd,c(f))}function l(f){return f===88||f===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(f),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,o=iHe,c):(e.enter("characterReferenceValue"),s=7,o=bU,c(f))}function c(f){if(f===59&&i){const d=e.exit("characterReferenceValue");return o===qd&&!hG(r.sliceSerialize(d))?n(f):(e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(f)&&i++<s?(e.consume(f),c):n(f)}}const yre={tokenize:SHe,partial:!0},vre={name:"codeFenced",tokenize:EHe,concrete:!0};function EHe(e,t,n){const r=this,i={tokenize:T,partial:!0};let s=0,o=0,a;return u;function u(A){return l(A)}function l(A){const k=r.events[r.events.length-1];return s=k&&k[1].type==="linePrefix"?k[2].sliceSerialize(k[1],!0).length:0,a=A,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),c(A)}function c(A){return A===a?(o++,e.consume(A),c):o<3?n(A):(e.exit("codeFencedFenceSequence"),zi(A)?Ls(e,f,"whitespace")(A):f(A))}function f(A){return A===null||or(A)?(e.exit("codeFencedFence"),r.interrupt?t(A):e.check(yre,m,w)(A)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),d(A))}function d(A){return A===null||or(A)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),f(A)):zi(A)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Ls(e,h,"whitespace")(A)):A===96&&A===a?n(A):(e.consume(A),d)}function h(A){return A===null||or(A)?f(A):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),p(A))}function p(A){return A===null||or(A)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),f(A)):A===96&&A===a?n(A):(e.consume(A),p)}function m(A){return e.attempt(i,w,g)(A)}function g(A){return e.enter("lineEnding"),e.consume(A),e.exit("lineEnding"),b}function b(A){return s>0&&zi(A)?Ls(e,y,"linePrefix",s+1)(A):y(A)}function y(A){return A===null||or(A)?e.check(yre,m,w)(A):(e.enter("codeFlowValue"),x(A))}function x(A){return A===null||or(A)?(e.exit("codeFlowValue"),y(A)):(e.consume(A),x)}function w(A){return e.exit("codeFenced"),t(A)}function T(A,k,I){let O=0;return M;function M(U){return A.enter("lineEnding"),A.consume(U),A.exit("lineEnding"),L}function L(U){return A.enter("codeFencedFence"),zi(U)?Ls(A,H,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(U):H(U)}function H(U){return U===a?(A.enter("codeFencedFenceSequence"),D(U)):I(U)}function D(U){return U===a?(O++,A.consume(U),D):O>=o?(A.exit("codeFencedFenceSequence"),zi(U)?Ls(A,B,"whitespace")(U):B(U)):I(U)}function B(U){return U===null||or(U)?(A.exit("codeFencedFence"),k(U)):I(U)}}}function SHe(e,t,n){const r=this;return i;function i(o){return o===null?n(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}const IF={name:"codeIndented",tokenize:CHe},THe={tokenize:AHe,partial:!0};function CHe(e,t,n){const r=this;return i;function i(l){return e.enter("codeIndented"),Ls(e,s,"linePrefix",5)(l)}function s(l){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?o(l):n(l)}function o(l){return l===null?u(l):or(l)?e.attempt(THe,o,u)(l):(e.enter("codeFlowValue"),a(l))}function a(l){return l===null||or(l)?(e.exit("codeFlowValue"),o(l)):(e.consume(l),a)}function u(l){return e.exit("codeIndented"),t(l)}}function AHe(e,t,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):or(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i):Ls(e,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):or(o)?i(o):n(o)}}const kHe={name:"codeText",tokenize:PHe,resolve:RHe,previous:IHe};function RHe(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function IHe(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function PHe(e,t,n){let r=0,i,s;return o;function o(f){return e.enter("codeText"),e.enter("codeTextSequence"),a(f)}function a(f){return f===96?(e.consume(f),r++,a):(e.exit("codeTextSequence"),u(f))}function u(f){return f===null?n(f):f===32?(e.enter("space"),e.consume(f),e.exit("space"),u):f===96?(s=e.enter("codeTextSequence"),i=0,c(f)):or(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),u):(e.enter("codeTextData"),l(f))}function l(f){return f===null||f===32||f===96||or(f)?(e.exit("codeTextData"),u(f)):(e.consume(f),l)}function c(f){return f===96?(e.consume(f),i++,c):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(f)):(s.type="codeTextData",l(f))}}class NHe{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&GC(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),GC(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),GC(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);GC(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);GC(this.left,n.reverse())}}}function GC(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function J1e(e){const t={};let n=-1,r,i,s,o,a,u,l;const c=new NHe(e);for(;++n<c.length;){for(;n in t;)n=t[n];if(r=c.get(n),n&&r[1].type==="chunkFlow"&&c.get(n-1)[1].type==="listItemPrefix"&&(u=r[1]._tokenizer.events,s=0,s<u.length&&u[s][1].type==="lineEndingBlank"&&(s+=2),s<u.length&&u[s][1].type==="content"))for(;++s<u.length&&u[s][1].type!=="content";)u[s][1].type==="chunkText"&&(u[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,DHe(c,n)),n=t[n],l=!0);else if(r[1]._container){for(s=n,i=void 0;s--&&(o=c.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank");)o[0]==="enter"&&(i&&(c.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);i&&(r[1].end=Object.assign({},c.get(i)[1].start),a=c.slice(i,n),a.unshift(r),c.splice(i,n-i+1,a))}}return c1(e,0,Number.POSITIVE_INFINITY,c.slice(0)),!l}function DHe(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const s=[],o=n._tokenizer||r.parser[n.contentType](n.start),a=o.events,u=[],l={};let c,f,d=-1,h=n,p=0,m=0;const g=[m];for(;h;){for(;e.get(++i)[1]!==h;);s.push(i),h._tokenizer||(c=r.sliceStream(h),h.next||c.push(null),f&&o.defineSkip(h.start),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(c),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),f=h,h=h.next}for(h=n;++d<a.length;)a[d][0]==="exit"&&a[d-1][0]==="enter"&&a[d][1].type===a[d-1][1].type&&a[d][1].start.line!==a[d][1].end.line&&(m=d+1,g.push(m),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(o.events=[],h?(h._tokenizer=void 0,h.previous=void 0):g.pop(),d=g.length;d--;){const b=a.slice(g[d],g[d+1]),y=s.pop();u.push([y,y+b.length-1]),e.splice(y,2,b)}for(u.reverse(),d=-1;++d<u.length;)l[p+u[d][0]]=p+u[d][1],p+=u[d][1]-u[d][0]-1;return l}const OHe={tokenize:FHe,resolve:LHe},MHe={tokenize:$He,partial:!0};function LHe(e){return J1e(e),e}function FHe(e,t){let n;return r;function r(a){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):or(a)?e.check(MHe,o,s)(a):(e.consume(a),i)}function s(a){return e.exit("chunkContent"),e.exit("content"),t(a)}function o(a){return e.consume(a),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function $He(e,t,n){const r=this;return i;function i(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),Ls(e,s,"linePrefix")}function s(o){if(o===null||or(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function Z1e(e,t,n,r,i,s,o,a,u){const l=u||Number.POSITIVE_INFINITY;let c=0;return f;function f(b){return b===60?(e.enter(r),e.enter(i),e.enter(s),e.consume(b),e.exit(s),d):b===null||b===32||b===41||vU(b)?n(b):(e.enter(r),e.enter(o),e.enter(a),e.enter("chunkString",{contentType:"string"}),m(b))}function d(b){return b===62?(e.enter(s),e.consume(b),e.exit(s),e.exit(i),e.exit(r),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),h(b))}function h(b){return b===62?(e.exit("chunkString"),e.exit(a),d(b)):b===null||b===60||or(b)?n(b):(e.consume(b),b===92?p:h)}function p(b){return b===60||b===62||b===92?(e.consume(b),h):h(b)}function m(b){return!c&&(b===null||b===41||Zf(b))?(e.exit("chunkString"),e.exit(a),e.exit(o),e.exit(r),t(b)):c<l&&b===40?(e.consume(b),c++,m):b===41?(e.consume(b),c--,m):b===null||b===32||b===40||vU(b)?n(b):(e.consume(b),b===92?g:m)}function g(b){return b===40||b===41||b===92?(e.consume(b),m):m(b)}}function eve(e,t,n,r,i,s){const o=this;let a=0,u;return l;function l(h){return e.enter(r),e.enter(i),e.consume(h),e.exit(i),e.enter(s),c}function c(h){return a>999||h===null||h===91||h===93&&!u||h===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(h):h===93?(e.exit(s),e.enter(i),e.consume(h),e.exit(i),e.exit(r),t):or(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),f(h))}function f(h){return h===null||h===91||h===93||or(h)||a++>999?(e.exit("chunkString"),c(h)):(e.consume(h),u||(u=!zi(h)),h===92?d:f)}function d(h){return h===91||h===92||h===93?(e.consume(h),a++,f):f(h)}}function tve(e,t,n,r,i,s){let o;return a;function a(d){return d===34||d===39||d===40?(e.enter(r),e.enter(i),e.consume(d),e.exit(i),o=d===40?41:d,u):n(d)}function u(d){return d===o?(e.enter(i),e.consume(d),e.exit(i),e.exit(r),t):(e.enter(s),l(d))}function l(d){return d===o?(e.exit(s),u(o)):d===null?n(d):or(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),Ls(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(d))}function c(d){return d===o||d===null||or(d)?(e.exit("chunkString"),l(d)):(e.consume(d),d===92?f:c)}function f(d){return d===o||d===92?(e.consume(d),c):c(d)}}function ck(e,t){let n;return r;function r(i){return or(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):zi(i)?Ls(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}const BHe={name:"definition",tokenize:UHe},jHe={tokenize:zHe,partial:!0};function UHe(e,t,n){const r=this;let i;return s;function s(h){return e.enter("definition"),o(h)}function o(h){return eve.call(r,e,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(h)}function a(h){return i=UE(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),h===58?(e.enter("definitionMarker"),e.consume(h),e.exit("definitionMarker"),u):n(h)}function u(h){return Zf(h)?ck(e,l)(h):l(h)}function l(h){return Z1e(e,c,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(h)}function c(h){return e.attempt(jHe,f,f)(h)}function f(h){return zi(h)?Ls(e,d,"whitespace")(h):d(h)}function d(h){return h===null||or(h)?(e.exit("definition"),r.parser.defined.push(i),t(h)):n(h)}}function zHe(e,t,n){return r;function r(a){return Zf(a)?ck(e,i)(a):n(a)}function i(a){return tve(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return zi(a)?Ls(e,o,"whitespace")(a):o(a)}function o(a){return a===null||or(a)?t(a):n(a)}}const VHe={name:"hardBreakEscape",tokenize:HHe};function HHe(e,t,n){return r;function r(s){return e.enter("hardBreakEscape"),e.consume(s),i}function i(s){return or(s)?(e.exit("hardBreakEscape"),t(s)):n(s)}}const qHe={name:"headingAtx",tokenize:GHe,resolve:WHe};function WHe(e,t){let n=e.length-2,r=3,i,s;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},s={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},c1(e,r,n-r+1,[["enter",i,t],["enter",s,t],["exit",s,t],["exit",i,t]])),e}function GHe(e,t,n){let r=0;return i;function i(c){return e.enter("atxHeading"),s(c)}function s(c){return e.enter("atxHeadingSequence"),o(c)}function o(c){return c===35&&r++<6?(e.consume(c),o):c===null||Zf(c)?(e.exit("atxHeadingSequence"),a(c)):n(c)}function a(c){return c===35?(e.enter("atxHeadingSequence"),u(c)):c===null||or(c)?(e.exit("atxHeading"),t(c)):zi(c)?Ls(e,a,"whitespace")(c):(e.enter("atxHeadingText"),l(c))}function u(c){return c===35?(e.consume(c),u):(e.exit("atxHeadingSequence"),a(c))}function l(c){return c===null||c===35||Zf(c)?(e.exit("atxHeadingText"),a(c)):(e.consume(c),l)}}const YHe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],bre=["pre","script","style","textarea"],KHe={name:"htmlFlow",tokenize:ZHe,resolveTo:JHe,concrete:!0},XHe={tokenize:tqe,partial:!0},QHe={tokenize:eqe,partial:!0};function JHe(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function ZHe(e,t,n){const r=this;let i,s,o,a,u;return l;function l(W){return c(W)}function c(W){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(W),f}function f(W){return W===33?(e.consume(W),d):W===47?(e.consume(W),s=!0,m):W===63?(e.consume(W),i=3,r.interrupt?t:X):km(W)?(e.consume(W),o=String.fromCharCode(W),g):n(W)}function d(W){return W===45?(e.consume(W),i=2,h):W===91?(e.consume(W),i=5,a=0,p):km(W)?(e.consume(W),i=4,r.interrupt?t:X):n(W)}function h(W){return W===45?(e.consume(W),r.interrupt?t:X):n(W)}function p(W){const Z="CDATA[";return W===Z.charCodeAt(a++)?(e.consume(W),a===Z.length?r.interrupt?t:H:p):n(W)}function m(W){return km(W)?(e.consume(W),o=String.fromCharCode(W),g):n(W)}function g(W){if(W===null||W===47||W===62||Zf(W)){const Z=W===47,oe=o.toLowerCase();return!Z&&!s&&bre.includes(oe)?(i=1,r.interrupt?t(W):H(W)):YHe.includes(o.toLowerCase())?(i=6,Z?(e.consume(W),b):r.interrupt?t(W):H(W)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(W):s?y(W):x(W))}return W===45||qd(W)?(e.consume(W),o+=String.fromCharCode(W),g):n(W)}function b(W){return W===62?(e.consume(W),r.interrupt?t:H):n(W)}function y(W){return zi(W)?(e.consume(W),y):M(W)}function x(W){return W===47?(e.consume(W),M):W===58||W===95||km(W)?(e.consume(W),w):zi(W)?(e.consume(W),x):M(W)}function w(W){return W===45||W===46||W===58||W===95||qd(W)?(e.consume(W),w):T(W)}function T(W){return W===61?(e.consume(W),A):zi(W)?(e.consume(W),T):x(W)}function A(W){return W===null||W===60||W===61||W===62||W===96?n(W):W===34||W===39?(e.consume(W),u=W,k):zi(W)?(e.consume(W),A):I(W)}function k(W){return W===u?(e.consume(W),u=null,O):W===null||or(W)?n(W):(e.consume(W),k)}function I(W){return W===null||W===34||W===39||W===47||W===60||W===61||W===62||W===96||Zf(W)?T(W):(e.consume(W),I)}function O(W){return W===47||W===62||zi(W)?x(W):n(W)}function M(W){return W===62?(e.consume(W),L):n(W)}function L(W){return W===null||or(W)?H(W):zi(W)?(e.consume(W),L):n(W)}function H(W){return W===45&&i===2?(e.consume(W),G):W===60&&i===1?(e.consume(W),ee):W===62&&i===4?(e.consume(W),q):W===63&&i===3?(e.consume(W),X):W===93&&i===5?(e.consume(W),ue):or(W)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(XHe,te,D)(W)):W===null||or(W)?(e.exit("htmlFlowData"),D(W)):(e.consume(W),H)}function D(W){return e.check(QHe,B,te)(W)}function B(W){return e.enter("lineEnding"),e.consume(W),e.exit("lineEnding"),U}function U(W){return W===null||or(W)?D(W):(e.enter("htmlFlowData"),H(W))}function G(W){return W===45?(e.consume(W),X):H(W)}function ee(W){return W===47?(e.consume(W),o="",ne):H(W)}function ne(W){if(W===62){const Z=o.toLowerCase();return bre.includes(Z)?(e.consume(W),q):H(W)}return km(W)&&o.length<8?(e.consume(W),o+=String.fromCharCode(W),ne):H(W)}function ue(W){return W===93?(e.consume(W),X):H(W)}function X(W){return W===62?(e.consume(W),q):W===45&&i===2?(e.consume(W),X):H(W)}function q(W){return W===null||or(W)?(e.exit("htmlFlowData"),te(W)):(e.consume(W),q)}function te(W){return e.exit("htmlFlow"),t(W)}}function eqe(e,t,n){const r=this;return i;function i(o){return or(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}function tqe(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(p9,t,n)}}const nqe={name:"htmlText",tokenize:rqe};function rqe(e,t,n){const r=this;let i,s,o;return a;function a(X){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(X),u}function u(X){return X===33?(e.consume(X),l):X===47?(e.consume(X),T):X===63?(e.consume(X),x):km(X)?(e.consume(X),I):n(X)}function l(X){return X===45?(e.consume(X),c):X===91?(e.consume(X),s=0,p):km(X)?(e.consume(X),y):n(X)}function c(X){return X===45?(e.consume(X),h):n(X)}function f(X){return X===null?n(X):X===45?(e.consume(X),d):or(X)?(o=f,ee(X)):(e.consume(X),f)}function d(X){return X===45?(e.consume(X),h):f(X)}function h(X){return X===62?G(X):X===45?d(X):f(X)}function p(X){const q="CDATA[";return X===q.charCodeAt(s++)?(e.consume(X),s===q.length?m:p):n(X)}function m(X){return X===null?n(X):X===93?(e.consume(X),g):or(X)?(o=m,ee(X)):(e.consume(X),m)}function g(X){return X===93?(e.consume(X),b):m(X)}function b(X){return X===62?G(X):X===93?(e.consume(X),b):m(X)}function y(X){return X===null||X===62?G(X):or(X)?(o=y,ee(X)):(e.consume(X),y)}function x(X){return X===null?n(X):X===63?(e.consume(X),w):or(X)?(o=x,ee(X)):(e.consume(X),x)}function w(X){return X===62?G(X):x(X)}function T(X){return km(X)?(e.consume(X),A):n(X)}function A(X){return X===45||qd(X)?(e.consume(X),A):k(X)}function k(X){return or(X)?(o=k,ee(X)):zi(X)?(e.consume(X),k):G(X)}function I(X){return X===45||qd(X)?(e.consume(X),I):X===47||X===62||Zf(X)?O(X):n(X)}function O(X){return X===47?(e.consume(X),G):X===58||X===95||km(X)?(e.consume(X),M):or(X)?(o=O,ee(X)):zi(X)?(e.consume(X),O):G(X)}function M(X){return X===45||X===46||X===58||X===95||qd(X)?(e.consume(X),M):L(X)}function L(X){return X===61?(e.consume(X),H):or(X)?(o=L,ee(X)):zi(X)?(e.consume(X),L):O(X)}function H(X){return X===null||X===60||X===61||X===62||X===96?n(X):X===34||X===39?(e.consume(X),i=X,D):or(X)?(o=H,ee(X)):zi(X)?(e.consume(X),H):(e.consume(X),B)}function D(X){return X===i?(e.consume(X),i=void 0,U):X===null?n(X):or(X)?(o=D,ee(X)):(e.consume(X),D)}function B(X){return X===null||X===34||X===39||X===60||X===61||X===96?n(X):X===47||X===62||Zf(X)?O(X):(e.consume(X),B)}function U(X){return X===47||X===62||Zf(X)?O(X):n(X)}function G(X){return X===62?(e.consume(X),e.exit("htmlTextData"),e.exit("htmlText"),t):n(X)}function ee(X){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(X),e.exit("lineEnding"),ne}function ne(X){return zi(X)?Ls(e,ue,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(X):ue(X)}function ue(X){return e.enter("htmlTextData"),o(X)}}const mG={name:"labelEnd",tokenize:lqe,resolveTo:uqe,resolveAll:aqe},iqe={tokenize:cqe},sqe={tokenize:fqe},oqe={tokenize:dqe};function aqe(e){let t=-1;for(;++t<e.length;){const n=e[t][1];(n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd")&&(e.splice(t+1,n.type==="labelImage"?4:2),n.type="data",t++)}return e}function uqe(e,t){let n=e.length,r=0,i,s,o,a;for(;n--;)if(i=e[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const u={type:e[s][1].type==="labelLink"?"link":"image",start:Object.assign({},e[s][1].start),end:Object.assign({},e[e.length-1][1].end)},l={type:"label",start:Object.assign({},e[s][1].start),end:Object.assign({},e[o][1].end)},c={type:"labelText",start:Object.assign({},e[s+r+2][1].end),end:Object.assign({},e[o-2][1].start)};return a=[["enter",u,t],["enter",l,t]],a=Uh(a,e.slice(s+1,s+r+3)),a=Uh(a,[["enter",c,t]]),a=Uh(a,pG(t.parser.constructs.insideSpan.null,e.slice(s+r+4,o-3),t)),a=Uh(a,[["exit",c,t],e[o-2],e[o-1],["exit",l,t]]),a=Uh(a,e.slice(o+1)),a=Uh(a,[["exit",u,t]]),c1(e,s,e.length,a),e}function lqe(e,t,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(d){return s?s._inactive?f(d):(o=r.parser.defined.includes(UE(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(d),e.exit("labelMarker"),e.exit("labelEnd"),u):n(d)}function u(d){return d===40?e.attempt(iqe,c,o?c:f)(d):d===91?e.attempt(sqe,c,o?l:f)(d):o?c(d):f(d)}function l(d){return e.attempt(oqe,c,f)(d)}function c(d){return t(d)}function f(d){return s._balanced=!0,n(d)}}function cqe(e,t,n){return r;function r(f){return e.enter("resource"),e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),i}function i(f){return Zf(f)?ck(e,s)(f):s(f)}function s(f){return f===41?c(f):Z1e(e,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function o(f){return Zf(f)?ck(e,u)(f):c(f)}function a(f){return n(f)}function u(f){return f===34||f===39||f===40?tve(e,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):c(f)}function l(f){return Zf(f)?ck(e,c)(f):c(f)}function c(f){return f===41?(e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),e.exit("resource"),t):n(f)}}function fqe(e,t,n){const r=this;return i;function i(a){return eve.call(r,e,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(UE(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(a):n(a)}function o(a){return n(a)}}function dqe(e,t,n){return r;function r(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),i}function i(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const hqe={name:"labelStartImage",tokenize:pqe,resolveAll:mG.resolveAll};function pqe(e,t,n){const r=this;return i;function i(a){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(a),e.exit("labelImageMarker"),s}function s(a){return a===91?(e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const mqe={name:"labelStartLink",tokenize:gqe,resolveAll:mG.resolveAll};function gqe(e,t,n){const r=this;return i;function i(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const PF={name:"lineEnding",tokenize:yqe};function yqe(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),Ls(e,t,"linePrefix")}}const wP={name:"thematicBreak",tokenize:vqe};function vqe(e,t,n){let r=0,i;return s;function s(l){return e.enter("thematicBreak"),o(l)}function o(l){return i=l,a(l)}function a(l){return l===i?(e.enter("thematicBreakSequence"),u(l)):r>=3&&(l===null||or(l))?(e.exit("thematicBreak"),t(l)):n(l)}function u(l){return l===i?(e.consume(l),r++,u):(e.exit("thematicBreakSequence"),zi(l)?Ls(e,a,"whitespace")(l):a(l))}}const Bf={name:"list",tokenize:_qe,continuation:{tokenize:wqe},exit:Sqe},bqe={tokenize:Tqe,partial:!0},xqe={tokenize:Eqe,partial:!0};function _qe(e,t,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(h){const p=r.containerState.type||(h===42||h===43||h===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!r.containerState.marker||h===r.containerState.marker:bU(h)){if(r.containerState.type||(r.containerState.type=p,e.enter(p,{_container:!0})),p==="listUnordered")return e.enter("listItemPrefix"),h===42||h===45?e.check(wP,n,l)(h):l(h);if(!r.interrupt||h===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),u(h)}return n(h)}function u(h){return bU(h)&&++o<10?(e.consume(h),u):(!r.interrupt||o<2)&&(r.containerState.marker?h===r.containerState.marker:h===41||h===46)?(e.exit("listItemValue"),l(h)):n(h)}function l(h){return e.enter("listItemMarker"),e.consume(h),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||h,e.check(p9,r.interrupt?n:c,e.attempt(bqe,d,f))}function c(h){return r.containerState.initialBlankLine=!0,s++,d(h)}function f(h){return zi(h)?(e.enter("listItemPrefixWhitespace"),e.consume(h),e.exit("listItemPrefixWhitespace"),d):n(h)}function d(h){return r.containerState.size=s+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(h)}}function wqe(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(p9,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Ls(e,t,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!zi(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(xqe,t,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,Ls(e,e.attempt(Bf,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function Eqe(e,t,n){const r=this;return Ls(e,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(s):n(s)}}function Sqe(e){e.exit(this.containerState.type)}function Tqe(e,t,n){const r=this;return Ls(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!zi(s)&&o&&o[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const xre={name:"setextUnderline",tokenize:Aqe,resolveTo:Cqe};function Cqe(e,t){let n=e.length,r,i,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:Object.assign({},e[i][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[i][1].type="setextHeadingText",s?(e.splice(i,0,["enter",o,t]),e.splice(s+1,0,["exit",e[r][1],t]),e[r][1].end=Object.assign({},e[s][1].end)):e[r][1]=o,e.push(["exit",o,t]),e}function Aqe(e,t,n){const r=this;let i;return s;function s(l){let c=r.events.length,f;for(;c--;)if(r.events[c][1].type!=="lineEnding"&&r.events[c][1].type!=="linePrefix"&&r.events[c][1].type!=="content"){f=r.events[c][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||f)?(e.enter("setextHeadingLine"),i=l,o(l)):n(l)}function o(l){return e.enter("setextHeadingLineSequence"),a(l)}function a(l){return l===i?(e.consume(l),a):(e.exit("setextHeadingLineSequence"),zi(l)?Ls(e,u,"lineSuffix")(l):u(l))}function u(l){return l===null||or(l)?(e.exit("setextHeadingLine"),t(l)):n(l)}}const kqe={tokenize:Rqe};function Rqe(e){const t=this,n=e.attempt(p9,r,e.attempt(this.parser.constructs.flowInitial,i,Ls(e,e.attempt(this.parser.constructs.flow,i,e.attempt(OHe,i)),"linePrefix")));return n;function r(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const Iqe={resolveAll:rve()},Pqe=nve("string"),Nqe=nve("text");function nve(e){return{tokenize:t,resolveAll:rve(e==="text"?Dqe:void 0)};function t(n){const r=this,i=this.parser.constructs[e],s=n.attempt(i,o,a);return o;function o(c){return l(c)?s(c):a(c)}function a(c){if(c===null){n.consume(c);return}return n.enter("data"),n.consume(c),u}function u(c){return l(c)?(n.exit("data"),s(c)):(n.consume(c),u)}function l(c){if(c===null)return!0;const f=i[c];let d=-1;if(f)for(;++d<f.length;){const h=f[d];if(!h.previous||h.previous.call(r,r.previous))return!0}return!1}}}function rve(e){return t;function t(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return e?e(n,r):n}}function Dqe(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let s=i.length,o=-1,a=0,u;for(;s--;){const l=i[s];if(typeof l=="string"){for(o=l.length;l.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(l===-2)u=!0,a++;else if(l!==-1){s++;break}}if(a){const l={type:n===e.length||u||a<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-a,offset:r.end.offset-a,_index:r.start._index+s,_bufferIndex:s?o:r.start._bufferIndex+o},end:Object.assign({},r.end)};r.end=Object.assign({},l.start),r.start.offset===r.end.offset?Object.assign(r,l):(e.splice(n,0,["enter",l,t],["exit",l,t]),n+=2)}n++}return e}function Oqe(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const i={},s=[];let o=[],a=[];const u={consume:y,enter:x,exit:w,attempt:k(T),check:k(A),interrupt:k(A,{interrupt:!0})},l={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:h,sliceSerialize:d,now:p,defineSkip:m,write:f};let c=t.tokenize.call(l,u);return t.resolveAll&&s.push(t),l;function f(L){return o=Uh(o,L),g(),o[o.length-1]!==null?[]:(I(t,0),l.events=pG(s,l.events,l),l.events)}function d(L,H){return Lqe(h(L),H)}function h(L){return Mqe(o,L)}function p(){const{line:L,column:H,offset:D,_index:B,_bufferIndex:U}=r;return{line:L,column:H,offset:D,_index:B,_bufferIndex:U}}function m(L){i[L.line]=L.column,M()}function g(){let L;for(;r._index<o.length;){const H=o[r._index];if(typeof H=="string")for(L=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===L&&r._bufferIndex<H.length;)b(H.charCodeAt(r._bufferIndex));else b(H)}}function b(L){c=c(L)}function y(L){or(L)?(r.line++,r.column=1,r.offset+=L===-3?2:1,M()):L!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),l.previous=L}function x(L,H){const D=H||{};return D.type=L,D.start=p(),l.events.push(["enter",D,l]),a.push(D),D}function w(L){const H=a.pop();return H.end=p(),l.events.push(["exit",H,l]),H}function T(L,H){I(L,H.from)}function A(L,H){H.restore()}function k(L,H){return D;function D(B,U,G){let ee,ne,ue,X;return Array.isArray(B)?te(B):"tokenize"in B?te([B]):q(B);function q(pe){return ce;function ce(he){const Ee=he!==null&&pe[he],Ae=he!==null&&pe.null,ge=[...Array.isArray(Ee)?Ee:Ee?[Ee]:[],...Array.isArray(Ae)?Ae:Ae?[Ae]:[]];return te(ge)(he)}}function te(pe){return ee=pe,ne=0,pe.length===0?G:W(pe[ne])}function W(pe){return ce;function ce(he){return X=O(),ue=pe,pe.partial||(l.currentConstruct=pe),pe.name&&l.parser.constructs.disable.null.includes(pe.name)?oe():pe.tokenize.call(H?Object.assign(Object.create(l),H):l,u,Z,oe)(he)}}function Z(pe){return L(ue,X),U}function oe(pe){return X.restore(),++ne<ee.length?W(ee[ne]):G}}}function I(L,H){L.resolveAll&&!s.includes(L)&&s.push(L),L.resolve&&c1(l.events,H,l.events.length-H,L.resolve(l.events.slice(H),l)),L.resolveTo&&(l.events=L.resolveTo(l.events,l))}function O(){const L=p(),H=l.previous,D=l.currentConstruct,B=l.events.length,U=Array.from(a);return{restore:G,from:B};function G(){r=L,l.previous=H,l.currentConstruct=D,l.events.length=B,a=U,M()}}function M(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function Mqe(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,s=t.end._bufferIndex;let o;if(n===i)o=[e[n].slice(r,s)];else{if(o=e.slice(n,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(e[i].slice(0,s))}return o}function Lqe(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const s=e[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}const Fqe={42:Bf,43:Bf,45:Bf,48:Bf,49:Bf,50:Bf,51:Bf,52:Bf,53:Bf,54:Bf,55:Bf,56:Bf,57:Bf,62:K1e},$qe={91:BHe},Bqe={[-2]:IF,[-1]:IF,32:IF},jqe={35:qHe,42:wP,45:[xre,wP],60:KHe,61:xre,95:wP,96:vre,126:vre},Uqe={38:Q1e,92:X1e},zqe={[-5]:PF,[-4]:PF,[-3]:PF,33:hqe,38:Q1e,42:xU,60:[mHe,nqe],91:mqe,92:[VHe,X1e],93:mG,95:xU,96:kHe},Vqe={null:[xU,Iqe]},Hqe={null:[42,95]},qqe={null:[]},Wqe=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:Hqe,contentInitial:$qe,disable:qqe,document:Fqe,flow:jqe,flowInitial:Bqe,insideSpan:Vqe,string:Uqe,text:zqe},Symbol.toStringTag,{value:"Module"}));function Gqe(e){const n=eHe([Wqe,...(e||{}).extensions||[]]),r={defined:[],lazy:{},constructs:n,content:i(uHe),document:i(cHe),flow:i(kqe),string:i(Pqe),text:i(Nqe)};return r;function i(s){return o;function o(a){return Oqe(r,s,a)}}}function Yqe(e){for(;!J1e(e););return e}const _re=/[\0\t\n\r]/g;function Kqe(){let e=1,t="",n=!0,r;return i;function i(s,o,a){const u=[];let l,c,f,d,h;for(s=t+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),f=0,t="",n&&(s.charCodeAt(0)===65279&&f++,n=void 0);f<s.length;){if(_re.lastIndex=f,l=_re.exec(s),d=l&&l.index!==void 0?l.index:s.length,h=s.charCodeAt(d),!l){t=s.slice(f);break}if(h===10&&f===d&&r)u.push(-3),r=void 0;else switch(r&&(u.push(-5),r=void 0),f<d&&(u.push(s.slice(f,d)),e+=d-f),h){case 0:{u.push(65533),e++;break}case 9:{for(c=Math.ceil(e/4)*4,u.push(-2);e++<c;)u.push(-1);break}case 10:{u.push(-4),e=1;break}default:r=!0,e=1}f=d+1}return a&&(r&&u.push(-5),t&&u.push(t),u.push(null)),u}}const Xqe=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Qqe(e){return e.replace(Xqe,Jqe)}function Jqe(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return Y1e(n.slice(s?2:1),s?16:10)}return hG(n)||e}const ive={}.hasOwnProperty;function Zqe(e,t,n){return typeof t!="string"&&(n=t,t=void 0),eWe(n)(Yqe(Gqe(n).document().write(Kqe()(e,t,!0))))}function eWe(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(yt),autolinkProtocol:O,autolinkEmail:O,atxHeading:s(Ye),blockQuote:s(Ae),characterEscape:O,characterReference:O,codeFenced:s(ge),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(ge,o),codeText:s(me,o),codeTextData:O,data:O,codeFlowValue:O,definition:s(Oe),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(Me),hardBreakEscape:s(lt),hardBreakTrailing:s(lt),htmlFlow:s(We,o),htmlFlowData:O,htmlText:s(We,o),htmlTextData:O,image:s(nt),label:o,link:s(yt),listItem:s(Rt),listItemValue:d,listOrdered:s(_t,f),listUnordered:s(_t),paragraph:s(Et),reference:W,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(Ye),strong:s(Ke),thematicBreak:s(sn)},exit:{atxHeading:u(),atxHeadingSequence:T,autolink:u(),autolinkEmail:Ee,autolinkProtocol:he,blockQuote:u(),characterEscapeValue:M,characterReferenceMarkerHexadecimal:oe,characterReferenceMarkerNumeric:oe,characterReferenceValue:pe,characterReference:ce,codeFenced:u(g),codeFencedFence:m,codeFencedFenceInfo:h,codeFencedFenceMeta:p,codeFlowValue:M,codeIndented:u(b),codeText:u(U),codeTextData:M,data:M,definition:u(),definitionDestinationString:w,definitionLabelString:y,definitionTitleString:x,emphasis:u(),hardBreakEscape:u(H),hardBreakTrailing:u(H),htmlFlow:u(D),htmlFlowData:M,htmlText:u(B),htmlTextData:M,image:u(ee),label:ue,labelText:ne,lineEnding:L,link:u(G),listItem:u(),listOrdered:u(),listUnordered:u(),paragraph:u(),referenceString:Z,resourceDestinationString:X,resourceTitleString:q,resource:te,setextHeading:u(I),setextHeadingLineSequence:k,setextHeadingText:A,strong:u(),thematicBreak:u()}};sve(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(Fe){let Qe={type:"root",children:[]};const wt={stack:[Qe],tokenStack:[],config:t,enter:a,exit:l,buffer:o,resume:c,data:n},Vt=[];let Wt=-1;for(;++Wt<Fe.length;)if(Fe[Wt][1].type==="listOrdered"||Fe[Wt][1].type==="listUnordered")if(Fe[Wt][0]==="enter")Vt.push(Wt);else{const bn=Vt.pop();Wt=i(Fe,bn,Wt)}for(Wt=-1;++Wt<Fe.length;){const bn=t[Fe[Wt][0]];ive.call(bn,Fe[Wt][1].type)&&bn[Fe[Wt][1].type].call(Object.assign({sliceSerialize:Fe[Wt][2].sliceSerialize},wt),Fe[Wt][1])}if(wt.tokenStack.length>0){const bn=wt.tokenStack[wt.tokenStack.length-1];(bn[1]||wre).call(wt,void 0,bn[0])}for(Qe.position={start:dv(Fe.length>0?Fe[0][1].start:{line:1,column:1,offset:0}),end:dv(Fe.length>0?Fe[Fe.length-2][1].end:{line:1,column:1,offset:0})},Wt=-1;++Wt<t.transforms.length;)Qe=t.transforms[Wt](Qe)||Qe;return Qe}function i(Fe,Qe,wt){let Vt=Qe-1,Wt=-1,bn=!1,Nn,Zn,wr,Hn;for(;++Vt<=wt;){const nr=Fe[Vt];switch(nr[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{nr[0]==="enter"?Wt++:Wt--,Hn=void 0;break}case"lineEndingBlank":{nr[0]==="enter"&&(Nn&&!Hn&&!Wt&&!wr&&(wr=Vt),Hn=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Hn=void 0}if(!Wt&&nr[0]==="enter"&&nr[1].type==="listItemPrefix"||Wt===-1&&nr[0]==="exit"&&(nr[1].type==="listUnordered"||nr[1].type==="listOrdered")){if(Nn){let Ei=Vt;for(Zn=void 0;Ei--;){const Dr=Fe[Ei];if(Dr[1].type==="lineEnding"||Dr[1].type==="lineEndingBlank"){if(Dr[0]==="exit")continue;Zn&&(Fe[Zn][1].type="lineEndingBlank",bn=!0),Dr[1].type="lineEnding",Zn=Ei}else if(!(Dr[1].type==="linePrefix"||Dr[1].type==="blockQuotePrefix"||Dr[1].type==="blockQuotePrefixWhitespace"||Dr[1].type==="blockQuoteMarker"||Dr[1].type==="listItemIndent"))break}wr&&(!Zn||wr<Zn)&&(Nn._spread=!0),Nn.end=Object.assign({},Zn?Fe[Zn][1].start:nr[1].end),Fe.splice(Zn||Vt,0,["exit",Nn,nr[2]]),Vt++,wt++}if(nr[1].type==="listItemPrefix"){const Ei={type:"listItem",_spread:!1,start:Object.assign({},nr[1].start),end:void 0};Nn=Ei,Fe.splice(Vt,0,["enter",Ei,nr[2]]),Vt++,wt++,wr=void 0,Hn=!0}}}return Fe[Qe][1]._spread=bn,wt}function s(Fe,Qe){return wt;function wt(Vt){a.call(this,Fe(Vt),Vt),Qe&&Qe.call(this,Vt)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(Fe,Qe,wt){this.stack[this.stack.length-1].children.push(Fe),this.stack.push(Fe),this.tokenStack.push([Qe,wt]),Fe.position={start:dv(Qe.start),end:void 0}}function u(Fe){return Qe;function Qe(wt){Fe&&Fe.call(this,wt),l.call(this,wt)}}function l(Fe,Qe){const wt=this.stack.pop(),Vt=this.tokenStack.pop();if(Vt)Vt[0].type!==Fe.type&&(Qe?Qe.call(this,Fe,Vt[0]):(Vt[1]||wre).call(this,Fe,Vt[0]));else throw new Error("Cannot close `"+Fe.type+"` ("+lk({start:Fe.start,end:Fe.end})+"): its not open");wt.position.end=dv(Fe.end)}function c(){return JVe(this.stack.pop())}function f(){this.data.expectingFirstListItemValue=!0}function d(Fe){if(this.data.expectingFirstListItemValue){const Qe=this.stack[this.stack.length-2];Qe.start=Number.parseInt(this.sliceSerialize(Fe),10),this.data.expectingFirstListItemValue=void 0}}function h(){const Fe=this.resume(),Qe=this.stack[this.stack.length-1];Qe.lang=Fe}function p(){const Fe=this.resume(),Qe=this.stack[this.stack.length-1];Qe.meta=Fe}function m(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function g(){const Fe=this.resume(),Qe=this.stack[this.stack.length-1];Qe.value=Fe.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function b(){const Fe=this.resume(),Qe=this.stack[this.stack.length-1];Qe.value=Fe.replace(/(\r?\n|\r)$/g,"")}function y(Fe){const Qe=this.resume(),wt=this.stack[this.stack.length-1];wt.label=Qe,wt.identifier=UE(this.sliceSerialize(Fe)).toLowerCase()}function x(){const Fe=this.resume(),Qe=this.stack[this.stack.length-1];Qe.title=Fe}function w(){const Fe=this.resume(),Qe=this.stack[this.stack.length-1];Qe.url=Fe}function T(Fe){const Qe=this.stack[this.stack.length-1];if(!Qe.depth){const wt=this.sliceSerialize(Fe).length;Qe.depth=wt}}function A(){this.data.setextHeadingSlurpLineEnding=!0}function k(Fe){const Qe=this.stack[this.stack.length-1];Qe.depth=this.sliceSerialize(Fe).codePointAt(0)===61?1:2}function I(){this.data.setextHeadingSlurpLineEnding=void 0}function O(Fe){const wt=this.stack[this.stack.length-1].children;let Vt=wt[wt.length-1];(!Vt||Vt.type!=="text")&&(Vt=Lt(),Vt.position={start:dv(Fe.start),end:void 0},wt.push(Vt)),this.stack.push(Vt)}function M(Fe){const Qe=this.stack.pop();Qe.value+=this.sliceSerialize(Fe),Qe.position.end=dv(Fe.end)}function L(Fe){const Qe=this.stack[this.stack.length-1];if(this.data.atHardBreak){const wt=Qe.children[Qe.children.length-1];wt.position.end=dv(Fe.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(Qe.type)&&(O.call(this,Fe),M.call(this,Fe))}function H(){this.data.atHardBreak=!0}function D(){const Fe=this.resume(),Qe=this.stack[this.stack.length-1];Qe.value=Fe}function B(){const Fe=this.resume(),Qe=this.stack[this.stack.length-1];Qe.value=Fe}function U(){const Fe=this.resume(),Qe=this.stack[this.stack.length-1];Qe.value=Fe}function G(){const Fe=this.stack[this.stack.length-1];if(this.data.inReference){const Qe=this.data.referenceType||"shortcut";Fe.type+="Reference",Fe.referenceType=Qe,delete Fe.url,delete Fe.title}else delete Fe.identifier,delete Fe.label;this.data.referenceType=void 0}function ee(){const Fe=this.stack[this.stack.length-1];if(this.data.inReference){const Qe=this.data.referenceType||"shortcut";Fe.type+="Reference",Fe.referenceType=Qe,delete Fe.url,delete Fe.title}else delete Fe.identifier,delete Fe.label;this.data.referenceType=void 0}function ne(Fe){const Qe=this.sliceSerialize(Fe),wt=this.stack[this.stack.length-2];wt.label=Qqe(Qe),wt.identifier=UE(Qe).toLowerCase()}function ue(){const Fe=this.stack[this.stack.length-1],Qe=this.resume(),wt=this.stack[this.stack.length-1];if(this.data.inReference=!0,wt.type==="link"){const Vt=Fe.children;wt.children=Vt}else wt.alt=Qe}function X(){const Fe=this.resume(),Qe=this.stack[this.stack.length-1];Qe.url=Fe}function q(){const Fe=this.resume(),Qe=this.stack[this.stack.length-1];Qe.title=Fe}function te(){this.data.inReference=void 0}function W(){this.data.referenceType="collapsed"}function Z(Fe){const Qe=this.resume(),wt=this.stack[this.stack.length-1];wt.label=Qe,wt.identifier=UE(this.sliceSerialize(Fe)).toLowerCase(),this.data.referenceType="full"}function oe(Fe){this.data.characterReferenceType=Fe.type}function pe(Fe){const Qe=this.sliceSerialize(Fe),wt=this.data.characterReferenceType;let Vt;wt?(Vt=Y1e(Qe,wt==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Vt=hG(Qe);const Wt=this.stack[this.stack.length-1];Wt.value+=Vt}function ce(Fe){const Qe=this.stack.pop();Qe.position.end=dv(Fe.end)}function he(Fe){M.call(this,Fe);const Qe=this.stack[this.stack.length-1];Qe.url=this.sliceSerialize(Fe)}function Ee(Fe){M.call(this,Fe);const Qe=this.stack[this.stack.length-1];Qe.url="mailto:"+this.sliceSerialize(Fe)}function Ae(){return{type:"blockquote",children:[]}}function ge(){return{type:"code",lang:null,meta:null,value:""}}function me(){return{type:"inlineCode",value:""}}function Oe(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Me(){return{type:"emphasis",children:[]}}function Ye(){return{type:"heading",depth:0,children:[]}}function lt(){return{type:"break"}}function We(){return{type:"html",value:""}}function nt(){return{type:"image",title:null,url:"",alt:null}}function yt(){return{type:"link",title:null,url:"",children:[]}}function _t(Fe){return{type:"list",ordered:Fe.type==="listOrdered",start:null,spread:Fe._spread,children:[]}}function Rt(Fe){return{type:"listItem",spread:Fe._spread,checked:null,children:[]}}function Et(){return{type:"paragraph",children:[]}}function Ke(){return{type:"strong",children:[]}}function Lt(){return{type:"text",value:""}}function sn(){return{type:"thematicBreak"}}}function dv(e){return{line:e.line,column:e.column,offset:e.offset}}function sve(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?sve(e,r):tWe(e,r)}}function tWe(e,t){let n;for(n in t)if(ive.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function wre(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+lk({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+lk({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+lk({start:t.start,end:t.end})+") is still open")}function nWe(e){const t=this;t.parser=n;function n(r){return Zqe(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function rWe(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function iWe(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function sWe(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i}function oWe(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function aWe(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function uWe(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=kT(r.toLowerCase()),s=e.footnoteOrder.indexOf(r);let o,a=e.footnoteCounts.get(r);a===void 0?(a=0,e.footnoteOrder.push(r),o=e.footnoteOrder.length):o=s+1,a+=1,e.footnoteCounts.set(r,a);const u={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};e.patch(t,u);const l={type:"element",tagName:"sup",properties:{},children:[u]};return e.patch(t,l),e.applyData(t,l)}function lWe(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function cWe(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function ove(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function fWe(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return ove(e,t);const i={src:kT(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,s),e.applyData(t,s)}function dWe(e,t){const n={src:kT(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function hWe(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function pWe(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return ove(e,t);const i={href:kT(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function mWe(e,t){const n={href:kT(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function gWe(e,t,n){const r=e.all(t),i=n?yWe(n):ave(t),s={},o=[];if(typeof t.checked=="boolean"){const c=r[0];let f;c&&c.type==="element"&&c.tagName==="p"?f=c:(f={type:"element",tagName:"p",properties:{},children:[]},r.unshift(f)),f.children.length>0&&f.children.unshift({type:"text",value:" "}),f.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const c=r[a];(i||a!==0||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`}),c.type==="element"&&c.tagName==="p"&&!i?o.push(...c.children):o.push(c)}const u=r[r.length-1];u&&(i||u.type!=="element"||u.tagName!=="p")&&o.push({type:"text",value:`
`});const l={type:"element",tagName:"li",properties:s,children:o};return e.patch(t,l),e.applyData(t,l)}function yWe(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=ave(n[r])}return t}function ave(e){const t=e.spread;return t??e.children.length>1}function vWe(e,t){const n={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,s),e.applyData(t,s)}function bWe(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function xWe(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function _We(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function wWe(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},a=xg(t.children[1]),u=h9(t.children[t.children.length-1]);a&&u&&(o.position={start:a,end:u}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,s),e.applyData(t,s)}function EWe(e,t,n){const r=n?n.children:void 0,s=(r?r.indexOf(t):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:t.children.length;let u=-1;const l=[];for(;++u<a;){const f=t.children[u],d={},h=o?o[u]:void 0;h&&(d.align=h);let p={type:"element",tagName:s,properties:d,children:[]};f&&(p.children=e.all(f),e.patch(f,p),p=e.applyData(f,p)),l.push(p)}const c={type:"element",tagName:"tr",properties:{},children:e.wrap(l,!0)};return e.patch(t,c),e.applyData(t,c)}function SWe(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const Ere=9,Sre=32;function TWe(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const s=[];for(;r;)s.push(Tre(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return s.push(Tre(t.slice(i),i>0,!1)),s.join("")}function Tre(e,t,n){let r=0,i=e.length;if(t){let s=e.codePointAt(r);for(;s===Ere||s===Sre;)r++,s=e.codePointAt(r)}if(n){let s=e.codePointAt(i-1);for(;s===Ere||s===Sre;)i--,s=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function CWe(e,t){const n={type:"text",value:TWe(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function AWe(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const kWe={blockquote:rWe,break:iWe,code:sWe,delete:oWe,emphasis:aWe,footnoteReference:uWe,heading:lWe,html:cWe,imageReference:fWe,image:dWe,inlineCode:hWe,linkReference:pWe,link:mWe,listItem:gWe,list:vWe,paragraph:bWe,root:xWe,strong:_We,table:wWe,tableCell:SWe,tableRow:EWe,text:CWe,thematicBreak:AWe,toml:l6,yaml:l6,definition:l6,footnoteDefinition:l6};function l6(){}const uve=-1,m9=0,lN=1,cN=2,gG=3,yG=4,vG=5,bG=6,lve=7,cve=8,Cre=typeof self=="object"?self:globalThis,RWe=(e,t)=>{const n=(i,s)=>(e.set(s,i),i),r=i=>{if(e.has(i))return e.get(i);const[s,o]=t[i];switch(s){case m9:case uve:return n(o,i);case lN:{const a=n([],i);for(const u of o)a.push(r(u));return a}case cN:{const a=n({},i);for(const[u,l]of o)a[r(u)]=r(l);return a}case gG:return n(new Date(o),i);case yG:{const{source:a,flags:u}=o;return n(new RegExp(a,u),i)}case vG:{const a=n(new Map,i);for(const[u,l]of o)a.set(r(u),r(l));return a}case bG:{const a=n(new Set,i);for(const u of o)a.add(r(u));return a}case lve:{const{name:a,message:u}=o;return n(new Cre[a](u),i)}case cve:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i)}return n(new Cre[s](o),i)};return r},Are=e=>RWe(new Map,e)(0),q2="",{toString:IWe}={},{keys:PWe}=Object,YC=e=>{const t=typeof e;if(t!=="object"||!e)return[m9,t];const n=IWe.call(e).slice(8,-1);switch(n){case"Array":return[lN,q2];case"Object":return[cN,q2];case"Date":return[gG,q2];case"RegExp":return[yG,q2];case"Map":return[vG,q2];case"Set":return[bG,q2]}return n.includes("Array")?[lN,n]:n.includes("Error")?[lve,n]:[cN,n]},c6=([e,t])=>e===m9&&(t==="function"||t==="symbol"),NWe=(e,t,n,r)=>{const i=(o,a)=>{const u=r.push(o)-1;return n.set(a,u),u},s=o=>{if(n.has(o))return n.get(o);let[a,u]=YC(o);switch(a){case m9:{let c=o;switch(u){case"bigint":a=cve,c=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+u);c=null;break;case"undefined":return i([uve],o)}return i([a,c],o)}case lN:{if(u)return i([u,[...o]],o);const c=[],f=i([a,c],o);for(const d of o)c.push(s(d));return f}case cN:{if(u)switch(u){case"BigInt":return i([u,o.toString()],o);case"Boolean":case"Number":case"String":return i([u,o.valueOf()],o)}if(t&&"toJSON"in o)return s(o.toJSON());const c=[],f=i([a,c],o);for(const d of PWe(o))(e||!c6(YC(o[d])))&&c.push([s(d),s(o[d])]);return f}case gG:return i([a,o.toISOString()],o);case yG:{const{source:c,flags:f}=o;return i([a,{source:c,flags:f}],o)}case vG:{const c=[],f=i([a,c],o);for(const[d,h]of o)(e||!(c6(YC(d))||c6(YC(h))))&&c.push([s(d),s(h)]);return f}case bG:{const c=[],f=i([a,c],o);for(const d of o)(e||!c6(YC(d)))&&c.push(s(d));return f}}const{message:l}=o;return i([a,{name:u,message:l}],o)};return s},kre=(e,{json:t,lossy:n}={})=>{const r=[];return NWe(!(t||n),!!t,new Map,r)(e),r},pS=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?Are(kre(e,t)):structuredClone(e):(e,t)=>Are(kre(e,t));function DWe(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function OWe(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function MWe(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||DWe,r=e.options.footnoteBackLabel||OWe,i=e.options.footnoteLabel||"Footnotes",s=e.options.footnoteLabelTagName||"h2",o=e.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let u=-1;for(;++u<e.footnoteOrder.length;){const l=e.footnoteById.get(e.footnoteOrder[u]);if(!l)continue;const c=e.all(l),f=String(l.identifier).toUpperCase(),d=kT(f.toLowerCase());let h=0;const p=[],m=e.footnoteCounts.get(f);for(;m!==void 0&&++h<=m;){p.length>0&&p.push({type:"text",value:" "});let y=typeof n=="string"?n:n(u,h);typeof y=="string"&&(y={type:"text",value:y}),p.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+d+(h>1?"-"+h:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(u,h),className:["data-footnote-backref"]},children:Array.isArray(y)?y:[y]})}const g=c[c.length-1];if(g&&g.type==="element"&&g.tagName==="p"){const y=g.children[g.children.length-1];y&&y.type==="text"?y.value+=" ":g.children.push({type:"text",value:" "}),g.children.push(...p)}else c.push(...p);const b={type:"element",tagName:"li",properties:{id:t+"fn-"+d},children:e.wrap(c,!0)};e.patch(l,b),a.push(b)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...pS(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(a,!0)},{type:"text",value:`
`}]}}const fve=function(e){if(e==null)return BWe;if(typeof e=="function")return g9(e);if(typeof e=="object")return Array.isArray(e)?LWe(e):FWe(e);if(typeof e=="string")return $We(e);throw new Error("Expected function, string, or object as test")};function LWe(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=fve(e[n]);return g9(r);function r(...i){let s=-1;for(;++s<t.length;)if(t[s].apply(this,i))return!0;return!1}}function FWe(e){const t=e;return g9(n);function n(r){const i=r;let s;for(s in e)if(i[s]!==t[s])return!1;return!0}}function $We(e){return g9(t);function t(n){return n&&n.type===e}}function g9(e){return t;function t(n,r,i){return!!(jWe(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function BWe(){return!0}function jWe(e){return e!==null&&typeof e=="object"&&"type"in e}const dve=[],UWe=!0,Rre=!1,zWe="skip";function VWe(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const s=fve(i),o=r?-1:1;a(e,void 0,[])();function a(u,l,c){const f=u&&typeof u=="object"?u:{};if(typeof f.type=="string"){const h=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(d,"name",{value:"node ("+(u.type+(h?"<"+h+">":""))+")"})}return d;function d(){let h=dve,p,m,g;if((!t||s(u,l,c[c.length-1]||void 0))&&(h=HWe(n(u,c)),h[0]===Rre))return h;if("children"in u&&u.children){const b=u;if(b.children&&h[0]!==zWe)for(m=(r?b.children.length:-1)+o,g=c.concat(b);m>-1&&m<b.children.length;){const y=b.children[m];if(p=a(y,m,g)(),p[0]===Rre)return p;m=typeof p[1]=="number"?p[1]:m+o}}return h}}}function HWe(e){return Array.isArray(e)?e:typeof e=="number"?[UWe,e]:e==null?dve:[e]}function xG(e,t,n,r){let i,s,o;typeof t=="function"&&typeof n!="function"?(s=void 0,o=t,i=n):(s=t,o=n,i=r),VWe(e,s,a,i);function a(u,l){const c=l[l.length-1],f=c?c.children.indexOf(u):void 0;return o(u,f,c)}}const _U={}.hasOwnProperty,qWe={};function WWe(e,t){const n=t||qWe,r=new Map,i=new Map,s=new Map,o={...kWe,...n.handlers},a={all:l,applyData:YWe,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:u,options:n,patch:GWe,wrap:XWe};return xG(e,function(c){if(c.type==="definition"||c.type==="footnoteDefinition"){const f=c.type==="definition"?r:i,d=String(c.identifier).toUpperCase();f.has(d)||f.set(d,c)}}),a;function u(c,f){const d=c.type,h=a.handlers[d];if(_U.call(a.handlers,d)&&h)return h(a,c,f);if(a.options.passThrough&&a.options.passThrough.includes(d)){if("children"in c){const{children:m,...g}=c,b=pS(g);return b.children=a.all(c),b}return pS(c)}return(a.options.unknownHandler||KWe)(a,c,f)}function l(c){const f=[];if("children"in c){const d=c.children;let h=-1;for(;++h<d.length;){const p=a.one(d[h],c);if(p){if(h&&d[h-1].type==="break"&&(!Array.isArray(p)&&p.type==="text"&&(p.value=Ire(p.value)),!Array.isArray(p)&&p.type==="element")){const m=p.children[0];m&&m.type==="text"&&(m.value=Ire(m.value))}Array.isArray(p)?f.push(...p):f.push(p)}}}return f}}function GWe(e,t){e.position&&(t.position=kVe(e))}function YWe(e,t){let n=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,s=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,pS(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function KWe(e,t){const n=t.data||{},r="value"in t&&!(_U.call(n,"hProperties")||_U.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function XWe(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function Ire(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function Pre(e,t){const n=WWe(e,t),r=n.one(e,void 0),i=MWe(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function QWe(e,t){return e&&"run"in e?async function(n,r){const i=Pre(n,{file:r,...t});await e.run(i,r)}:function(n,r){return Pre(n,{file:r,...t||e})}}function Nre(e){if(e)throw e}var NF,Dre;function JWe(){if(Dre)return NF;Dre=1;var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(l){return typeof Array.isArray=="function"?Array.isArray(l):t.call(l)==="[object Array]"},s=function(l){if(!l||t.call(l)!=="[object Object]")return!1;var c=e.call(l,"constructor"),f=l.constructor&&l.constructor.prototype&&e.call(l.constructor.prototype,"isPrototypeOf");if(l.constructor&&!c&&!f)return!1;var d;for(d in l);return typeof d>"u"||e.call(l,d)},o=function(l,c){n&&c.name==="__proto__"?n(l,c.name,{enumerable:!0,configurable:!0,value:c.newValue,writable:!0}):l[c.name]=c.newValue},a=function(l,c){if(c==="__proto__")if(e.call(l,c)){if(r)return r(l,c).value}else return;return l[c]};return NF=function u(){var l,c,f,d,h,p,m=arguments[0],g=1,b=arguments.length,y=!1;for(typeof m=="boolean"&&(y=m,m=arguments[1]||{},g=2),(m==null||typeof m!="object"&&typeof m!="function")&&(m={});g<b;++g)if(l=arguments[g],l!=null)for(c in l)f=a(m,c),d=a(l,c),m!==d&&(y&&d&&(s(d)||(h=i(d)))?(h?(h=!1,p=f&&i(f)?f:[]):p=f&&s(f)?f:{},o(m,{name:c,newValue:u(y,p,d)})):typeof d<"u"&&o(m,{name:c,newValue:d}));return m},NF}var ZWe=JWe();const DF=hc(ZWe);function wU(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function eGe(){const e=[],t={run:n,use:r};return t;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(u,...l){const c=e[++s];let f=-1;if(u){o(u);return}for(;++f<i.length;)(l[f]===null||l[f]===void 0)&&(l[f]=i[f]);i=l,c?tGe(c,a)(...l):o(null,...l)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function tGe(e,t){let n;return r;function r(...o){const a=e.length>o.length;let u;a&&o.push(i);try{u=e.apply(this,o)}catch(l){const c=l;if(a&&n)throw c;return i(c)}a||(u&&u.then&&typeof u.then=="function"?u.then(s,i):u instanceof Error?i(u):s(u))}function i(o,...a){n||(n=!0,t(o,...a))}function s(o){i(null,o)}}const _m={basename:nGe,dirname:rGe,extname:iGe,join:sGe,sep:"/"};function nGe(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');gR(e);let n=0,r=-1,i=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,a=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(e.codePointAt(i)===t.codePointAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function rGe(e){if(gR(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function iGe(e){gR(e);let t=e.length,n=-1,r=0,i=-1,s=0,o;for(;t--;){const a=e.codePointAt(t);if(a===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),a===46?i<0?i=t:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function sGe(...e){let t=-1,n;for(;++t<e.length;)gR(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":oGe(n)}function oGe(e){gR(e);const t=e.codePointAt(0)===47;let n=aGe(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function aGe(e,t){let n="",r=0,i=-1,s=0,o=-1,a,u;for(;++o<=e.length;){if(o<e.length)a=e.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,o):n=e.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function gR(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const uGe={cwd:lGe};function lGe(){return"/"}function EU(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function cGe(e){if(typeof e=="string")e=new URL(e);else if(!EU(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return fGe(e)}function fGe(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const OF=["history","path","basename","stem","extname","dirname"];class hve{constructor(t){let n;t?EU(t)?n={path:t}:typeof t=="string"||dGe(t)?n={value:t}:n=t:n={},this.cwd=uGe.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<OF.length;){const s=OF[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)OF.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?_m.basename(this.path):void 0}set basename(t){LF(t,"basename"),MF(t,"basename"),this.path=_m.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?_m.dirname(this.path):void 0}set dirname(t){Ore(this.basename,"dirname"),this.path=_m.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?_m.extname(this.path):void 0}set extname(t){if(MF(t,"extname"),Ore(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=_m.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){EU(t)&&(t=cGe(t)),LF(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?_m.basename(this.path,this.extname):void 0}set stem(t){LF(t,"stem"),MF(t,"stem"),this.path=_m.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=void 0,i}message(t,n,r){const i=new pc(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function MF(e,t){if(e&&e.includes(_m.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+_m.sep+"`")}function LF(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function Ore(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function dGe(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const hGe=function(e){const r=this.constructor.prototype,i=r[e],s=function(){return i.apply(s,arguments)};Object.setPrototypeOf(s,r);const o=Object.getOwnPropertyNames(i);for(const a of o){const u=Object.getOwnPropertyDescriptor(i,a);u&&Object.defineProperty(s,a,u)}return s},pGe={}.hasOwnProperty;class _G extends hGe{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=eGe()}copy(){const t=new _G;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(DF(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(BF("data",this.frozen),this.namespace[t]=n,this):pGe.call(this.namespace,t)&&this.namespace[t]||void 0:t?(BF("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(t,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=f6(t),r=this.parser||this.Parser;return FF("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),FF("process",this.parser||this.Parser),$F("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const a=f6(t),u=r.parse(a);r.run(u,a,function(c,f,d){if(c||!f||!d)return l(c);const h=f,p=r.stringify(h,d);yGe(p)?d.value=p:d.result=p,l(c,d)});function l(c,f){c||!f?o(c):s?s(f):n(void 0,f)}}}processSync(t){let n=!1,r;return this.freeze(),FF("processSync",this.parser||this.Parser),$F("processSync",this.compiler||this.Compiler),this.process(t,i),Lre("processSync","process",n),r;function i(s,o){n=!0,Nre(s),r=o}}run(t,n,r){Mre(t),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,a){const u=f6(n);i.run(t,u,l);function l(c,f,d){const h=f||t;c?a(c):o?o(h):r(void 0,h,d)}}}runSync(t,n){let r=!1,i;return this.run(t,n,s),Lre("runSync","run",r),i;function s(o,a){Nre(o),i=a,r=!0}}stringify(t,n){this.freeze();const r=f6(n),i=this.compiler||this.Compiler;return $F("stringify",i),Mre(t),i(t,r)}use(t,...n){const r=this.attachers,i=this.namespace;if(BF("use",this.frozen),t!=null)if(typeof t=="function")u(t,n);else if(typeof t=="object")Array.isArray(t)?a(t):o(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function s(l){if(typeof l=="function")u(l,[]);else if(typeof l=="object")if(Array.isArray(l)){const[c,...f]=l;u(c,f)}else o(l);else throw new TypeError("Expected usable value, not `"+l+"`")}function o(l){if(!("plugins"in l)&&!("settings"in l))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(l.plugins),l.settings&&(i.settings=DF(!0,i.settings,l.settings))}function a(l){let c=-1;if(l!=null)if(Array.isArray(l))for(;++c<l.length;){const f=l[c];s(f)}else throw new TypeError("Expected a list of plugins, not `"+l+"`")}function u(l,c){let f=-1,d=-1;for(;++f<r.length;)if(r[f][0]===l){d=f;break}if(d===-1)r.push([l,...c]);else if(c.length>0){let[h,...p]=c;const m=r[d][1];wU(m)&&wU(h)&&(h=DF(!0,m,h)),r[d]=[l,h,...p]}}}}const mGe=new _G().freeze();function FF(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function $F(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function BF(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Mre(e){if(!wU(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function Lre(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function f6(e){return gGe(e)?e:new hve(e)}function gGe(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function yGe(e){return typeof e=="string"||vGe(e)}function vGe(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const bGe="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",Fre=[],$re={allowDangerousHtml:!0},xGe=/^(https?|ircs?|mailto|xmpp)$/i,_Ge=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function wGe(e){const t=e.allowedElements,n=e.allowElement,r=e.children||"",i=e.className,s=e.components,o=e.disallowedElements,a=e.rehypePlugins||Fre,u=e.remarkPlugins||Fre,l=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...$re}:$re,c=e.skipHtml,f=e.unwrapDisallowed,d=e.urlTransform||EGe,h=mGe().use(nWe).use(u).use(QWe,l).use(a),p=new hve;typeof r=="string"&&(p.value=r);for(const y of _Ge)Object.hasOwn(e,y.from)&&(""+y.from+(y.to?"use `"+y.to+"` instead":"remove it")+bGe+y.id,void 0);const m=h.parse(p);let g=h.runSync(m,p);return i&&(g={type:"element",tagName:"div",properties:{className:i},children:g.type==="root"?g.children:[g]}),xG(g,b),OVe(g,{Fragment:R.Fragment,components:s,ignoreInvalidStyle:!0,jsx:R.jsx,jsxs:R.jsxs,passKeys:!0,passNode:!0});function b(y,x,w){if(y.type==="raw"&&w&&typeof x=="number")return c?w.children.splice(x,1):w.children[x]={type:"text",value:y.value},x;if(y.type==="element"){let T;for(T in RF)if(Object.hasOwn(RF,T)&&Object.hasOwn(y.properties,T)){const A=y.properties[T],k=RF[T];(k===null||k.includes(y.tagName))&&(y.properties[T]=d(String(A||""),T,y))}}if(y.type==="element"){let T=t?!t.includes(y.tagName):o?o.includes(y.tagName):!1;if(!T&&n&&typeof x=="number"&&(T=!n(y,x,w)),T&&w&&typeof x=="number")return f&&y.children?w.children.splice(x,1,...y.children):w.children.splice(x,1),x}}}function EGe(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return t===-1||i!==-1&&t>i||n!==-1&&t>n||r!==-1&&t>r||xGe.test(e.slice(0,t))?e:""}const Bre=/[#.]/g;function SGe(e,t){const n=e||"",r={};let i=0,s,o;for(;i<n.length;){Bre.lastIndex=i;const a=Bre.exec(n),u=n.slice(i,a?a.index:n.length);u&&(s?s==="#"?r.id=u:Array.isArray(r.className)?r.className.push(u):r.className=[u]:o=u,i+=u.length),a&&(s=a[0],i++)}return{type:"element",tagName:o||t||"div",properties:r,children:[]}}const TGe=new Set(["button","menu","reset","submit"]),SU={}.hasOwnProperty;function pve(e,t,n){const r=n&&RGe(n);function i(s,o,...a){let u=-1,l;if(s==null){l={type:"root",children:[]};const c=o;a.unshift(c)}else if(l=SGe(s,t),l.tagName=l.tagName.toLowerCase(),r&&SU.call(r,l.tagName)&&(l.tagName=r[l.tagName]),CGe(o,l.tagName)){let c;for(c in o)SU.call(o,c)&&AGe(e,l.properties,c,o[c])}else a.unshift(o);for(;++u<a.length;)TU(l.children,a[u]);return l.type==="element"&&l.tagName==="template"&&(l.content={type:"root",children:l.children},l.children=[]),l}return i}function CGe(e,t){return e==null||typeof e!="object"||Array.isArray(e)?!1:t==="input"||!e.type||typeof e.type!="string"?!0:"children"in e&&Array.isArray(e.children)?!1:t==="button"?TGe.has(e.type.toLowerCase()):!("value"in e)}function AGe(e,t,n,r){const i=d9(e,n);let s=-1,o;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;o=r}else typeof r=="boolean"?o=r:typeof r=="string"?i.spaceSeparated?o=sre(r):i.commaSeparated?o=ere(r):i.commaOrSpaceSeparated?o=sre(ere(r).join(" ")):o=jre(i,i.property,r):Array.isArray(r)?o=r.concat():o=i.property==="style"?kGe(r):String(r);if(Array.isArray(o)){const a=[];for(;++s<o.length;){const u=jre(i,i.property,o[s]);a[s]=u}o=a}if(i.property==="className"&&Array.isArray(t.className)){const a=o;o=t.className.concat(a)}t[i.property]=o}}function TU(e,t){let n=-1;if(t!=null)if(typeof t=="string"||typeof t=="number")e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(;++n<t.length;)TU(e,t[n]);else if(typeof t=="object"&&"type"in t)t.type==="root"?TU(e,t.children):e.push(t);else throw new Error("Expected node, nodes, or string, got `"+t+"`")}function jre(e,t,n){if(typeof n=="string"){if(e.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((e.boolean||e.overloadedBoolean)&&(n===""||Yk(n)===Yk(t)))return!0}return n}function kGe(e){const t=[];let n;for(n in e)SU.call(e,n)&&t.push([n,e[n]].join(": "));return t.join("; ")}function RGe(e){const t={};let n=-1;for(;++n<e.length;)t[e[n].toLowerCase()]=e[n];return t}const IGe=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],PGe=pve(mR,"div"),NGe=pve(qb,"g",IGe),jF=/\r?\n|\r/g;function DGe(e){const t=String(e),n=[];for(jF.lastIndex=0;jF.test(t);)n.push(jF.lastIndex);return n.push(t.length+1),{toPoint:r,toOffset:i};function r(s){let o=-1;if(typeof s=="number"&&s>-1&&s<n[n.length-1]){for(;++o<n.length;)if(n[o]>s)return{line:o+1,column:s-(o>0?n[o-1]:0)+1,offset:s}}}function i(s){const o=s&&s.line,a=s&&s.column;if(typeof o=="number"&&typeof a=="number"&&!Number.isNaN(o)&&!Number.isNaN(a)&&o-1 in n){const u=(n[o-2]||0)+a-1||0;if(u>-1&&u<n[n.length-1])return u}}}const __={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},mve={}.hasOwnProperty,OGe=Object.prototype;function MGe(e,t){const n=t;return wG({file:n.file||void 0,location:!1,schema:n.space==="svg"?qb:mR,verbose:n.verbose||!1},e)}function wG(e,t){let n;switch(t.nodeName){case"#comment":{const r=t;return n={type:"comment",value:r.data},EP(e,r,n),n}case"#document":case"#document-fragment":{const r=t,i="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:gve(e,t.childNodes),data:{quirksMode:i}},e.file&&e.location){const s=String(e.file),o=DGe(s),a=o.toPoint(0),u=o.toPoint(s.length);n.position={start:a,end:u}}return n}case"#documentType":{const r=t;return n={type:"doctype"},EP(e,r,n),n}case"#text":{const r=t;return n={type:"text",value:r.value},EP(e,r,n),n}default:return n=LGe(e,t),n}}function gve(e,t){let n=-1;const r=[];for(;++n<t.length;){const i=wG(e,t[n]);r.push(i)}return r}function LGe(e,t){const n=e.schema;e.schema=t.namespaceURI===__.svg?qb:mR;let r=-1;const i={};for(;++r<t.attrs.length;){const a=t.attrs[r],u=(a.prefix?a.prefix+":":"")+a.name;mve.call(OGe,u)||(i[u]=a.value)}const o=(e.schema.space==="svg"?NGe:PGe)(t.tagName,i,gve(e,t.childNodes));if(EP(e,t,o),o.tagName==="template"){const a=t,u=a.sourceCodeLocation,l=u&&u.startTag&&TE(u.startTag),c=u&&u.endTag&&TE(u.endTag),f=wG(e,a.content);l&&c&&e.file&&(f.position={start:l.end,end:c.start}),o.content=f}return e.schema=n,o}function EP(e,t,n){if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){const r=FGe(e,n,t.sourceCodeLocation);r&&(e.location=!0,n.position=r)}}function FGe(e,t,n){const r=TE(n);if(t.type==="element"){const i=t.children[t.children.length-1];if(r&&!n.endTag&&i&&i.position&&i.position.end&&(r.end=Object.assign({},i.position.end)),e.verbose){const s={};let o;if(n.attrs)for(o in n.attrs)mve.call(n.attrs,o)&&(s[d9(e.schema,o).property]=TE(n.attrs[o]));n.startTag;const a=TE(n.startTag),u=n.endTag?TE(n.endTag):void 0,l={opening:a};u&&(l.closing=u),l.properties=s,t.data={position:l}}}return r}function TE(e){const t=Ure({line:e.startLine,column:e.startCol,offset:e.startOffset}),n=Ure({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||n?{start:t,end:n}:void 0}function Ure(e){return e.line&&e.column?e:void 0}const zre={}.hasOwnProperty;function yve(e,t){const n=t||{};function r(i,...s){let o=r.invalid;const a=r.handlers;if(i&&zre.call(i,e)){const u=String(i[e]);o=zre.call(a,u)?a[u]:r.unknown}if(o)return o.call(this,i,...s)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const $Ge={}.hasOwnProperty,vve=yve("type",{handlers:{root:jGe,element:qGe,text:VGe,comment:HGe,doctype:zGe}});function BGe(e,t){const r=t.space;return vve(e,r==="svg"?qb:mR)}function jGe(e,t){const n={nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=EG(e.children,n,t),RT(e,n),n}function UGe(e,t){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=EG(e.children,n,t),RT(e,n),n}function zGe(e){const t={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return RT(e,t),t}function VGe(e){const t={nodeName:"#text",value:e.value,parentNode:null};return RT(e,t),t}function HGe(e){const t={nodeName:"#comment",data:e.value,parentNode:null};return RT(e,t),t}function qGe(e,t){const n=t;let r=n;e.type==="element"&&e.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=qb);const i=[];let s;if(e.properties){for(s in e.properties)if(s!=="children"&&$Ge.call(e.properties,s)){const u=WGe(r,s,e.properties[s]);u&&i.push(u)}}const o=r.space,a={nodeName:e.tagName,tagName:e.tagName,attrs:i,namespaceURI:__[o],childNodes:[],parentNode:null};return a.childNodes=EG(e.children,a,r),RT(e,a),e.tagName==="template"&&e.content&&(a.content=UGe(e.content,r)),a}function WGe(e,t,n){const r=d9(e,t);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?N1e(n):U1e(n));const i={name:r.attribute,value:n===!0?"":String(n)};if(r.space&&r.space!=="html"&&r.space!=="svg"){const s=i.name.indexOf(":");s<0?i.prefix="":(i.name=i.name.slice(s+1),i.prefix=r.attribute.slice(0,s)),i.namespace=__[r.space]}return i}function EG(e,t,n){let r=-1;const i=[];if(e)for(;++r<e.length;){const s=vve(e[r],n);s.parentNode=t,i.push(s)}return i}function RT(e,t){const n=e.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,t.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const GGe=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],YGe=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),oo="";var we;(function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.NUMBER_SIGN=35]="NUMBER_SIGN",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_F=70]="LATIN_CAPITAL_F",e[e.LATIN_CAPITAL_X=88]="LATIN_CAPITAL_X",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_F=102]="LATIN_SMALL_F",e[e.LATIN_SMALL_X=120]="LATIN_SMALL_X",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z",e[e.REPLACEMENT_CHARACTER=65533]="REPLACEMENT_CHARACTER"})(we=we||(we={}));const Lf={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function bve(e){return e>=55296&&e<=57343}function KGe(e){return e>=56320&&e<=57343}function XGe(e,t){return(e-55296)*1024+9216+t}function xve(e){return e!==32&&e!==10&&e!==13&&e!==9&&e!==12&&e>=1&&e<=31||e>=127&&e<=159}function _ve(e){return e>=64976&&e<=65007||YGe.has(e)}var ft;(function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(ft=ft||(ft={}));const QGe=65536;class JGe{constructor(t){this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=QGe,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(t){const{line:n,col:r,offset:i}=this;return{code:t,startLine:n,endLine:n,startCol:r,endCol:r,startOffset:i,endOffset:i}}_err(t){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(t)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(t){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(KGe(n))return this.pos++,this._addGap(),XGe(t,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,we.EOF;return this._err(ft.surrogateInInputStream),t}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(t,n){this.html.length>0?this.html+=t:this.html=t,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(t){this.html=this.html.substring(0,this.pos+1)+t+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(t,n){if(this.pos+t.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(t,this.pos);for(let r=0;r<t.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==t.charCodeAt(r))return!1;return!0}peek(t){const n=this.pos+t;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,we.EOF;const r=this.html.charCodeAt(n);return r===we.CARRIAGE_RETURN?we.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,we.EOF;let t=this.html.charCodeAt(this.pos);return t===we.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,we.LINE_FEED):t===we.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,bve(t)&&(t=this._processSurrogate(t)),this.handler.onParseError===null||t>31&&t<127||t===we.LINE_FEED||t===we.CARRIAGE_RETURN||t>159&&t<64976||this._checkForProblematicCharacters(t),t)}_checkForProblematicCharacters(t){xve(t)?this._err(ft.controlCharacterInInputStream):_ve(t)&&this._err(ft.noncharacterInInputStream)}retreat(t){for(this.pos-=t;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var Ur;(function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"})(Ur=Ur||(Ur={}));function wve(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null}const vv=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),ZGe=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var UF;const eYe=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),tYe=(UF=String.fromCodePoint)!==null&&UF!==void 0?UF:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function nYe(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=eYe.get(e))!==null&&t!==void 0?t:e}var Nu;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(Nu||(Nu={}));const rYe=32;var Om;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(Om||(Om={}));function CU(e){return e>=Nu.ZERO&&e<=Nu.NINE}function iYe(e){return e>=Nu.UPPER_A&&e<=Nu.UPPER_F||e>=Nu.LOWER_A&&e<=Nu.LOWER_F}function sYe(e){return e>=Nu.UPPER_A&&e<=Nu.UPPER_Z||e>=Nu.LOWER_A&&e<=Nu.LOWER_Z||CU(e)}function oYe(e){return e===Nu.EQUALS||sYe(e)}var ku;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(ku||(ku={}));var d_;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(d_||(d_={}));class aYe{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=ku.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=d_.Strict}startEntity(t){this.decodeMode=t,this.state=ku.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case ku.EntityStart:return t.charCodeAt(n)===Nu.NUM?(this.state=ku.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=ku.NamedEntity,this.stateNamedEntity(t,n));case ku.NumericStart:return this.stateNumericStart(t,n);case ku.NumericDecimal:return this.stateNumericDecimal(t,n);case ku.NumericHex:return this.stateNumericHex(t,n);case ku.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|rYe)===Nu.LOWER_X?(this.state=ku.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=ku.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,i){if(n!==r){const s=r-n;this.result=this.result*Math.pow(i,s)+parseInt(t.substr(n,s),i),this.consumed+=s}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(CU(i)||iYe(i))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(CU(i))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===Nu.SEMI)this.consumed+=1;else if(this.decodeMode===d_.Strict)return 0;return this.emitCodePoint(nYe(this.result),this.consumed),this.errors&&(t!==Nu.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let i=r[this.treeIndex],s=(i&Om.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const o=t.charCodeAt(n);if(this.treeIndex=Sve(r,i,this.treeIndex+Math.max(1,s),o),this.treeIndex<0)return this.result===0||this.decodeMode===d_.Attribute&&(s===0||oYe(o))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],s=(i&Om.VALUE_LENGTH)>>14,s!==0){if(o===Nu.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==d_.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,i=(r[n]&Om.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[t]&~Om.VALUE_LENGTH:i[t+1],r),n===3&&this.emitCodePoint(i[t+2],r),r}end(){var t;switch(this.state){case ku.NamedEntity:return this.result!==0&&(this.decodeMode!==d_.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case ku.NumericDecimal:return this.emitNumericEntity(0,2);case ku.NumericHex:return this.emitNumericEntity(0,3);case ku.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case ku.EntityStart:return 0}}}function Eve(e){let t="";const n=new aYe(e,r=>t+=tYe(r));return function(i,s){let o=0,a=0;for(;(a=i.indexOf("&",a))>=0;){t+=i.slice(o,a),n.startEntity(s);const l=n.write(i,a+1);if(l<0){o=a+n.end();break}o=a+l,a=l===0?o+1:o}const u=t+i.slice(o);return t="",u}}function Sve(e,t,n,r){const i=(t&Om.BRANCH_LENGTH)>>7,s=t&Om.JUMP_TABLE;if(i===0)return s!==0&&r===s?n:-1;if(s){const u=r-s;return u<0||u>=i?-1:e[n+u]-1}let o=n,a=o+i-1;for(;o<=a;){const u=o+a>>>1,l=e[u];if(l<r)o=u+1;else if(l>r)a=u-1;else return e[u+i]}return-1}Eve(vv);Eve(ZGe);var bt;(function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"})(bt=bt||(bt={}));var Gv;(function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"})(Gv=Gv||(Gv={}));var Ud;(function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"})(Ud=Ud||(Ud={}));var Ze;(function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"})(Ze=Ze||(Ze={}));var K;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SECTION=94]="SECTION",e[e.SELECT=95]="SELECT",e[e.SOURCE=96]="SOURCE",e[e.SMALL=97]="SMALL",e[e.SPAN=98]="SPAN",e[e.STRIKE=99]="STRIKE",e[e.STRONG=100]="STRONG",e[e.STYLE=101]="STYLE",e[e.SUB=102]="SUB",e[e.SUMMARY=103]="SUMMARY",e[e.SUP=104]="SUP",e[e.TABLE=105]="TABLE",e[e.TBODY=106]="TBODY",e[e.TEMPLATE=107]="TEMPLATE",e[e.TEXTAREA=108]="TEXTAREA",e[e.TFOOT=109]="TFOOT",e[e.TD=110]="TD",e[e.TH=111]="TH",e[e.THEAD=112]="THEAD",e[e.TITLE=113]="TITLE",e[e.TR=114]="TR",e[e.TRACK=115]="TRACK",e[e.TT=116]="TT",e[e.U=117]="U",e[e.UL=118]="UL",e[e.SVG=119]="SVG",e[e.VAR=120]="VAR",e[e.WBR=121]="WBR",e[e.XMP=122]="XMP"})(K=K||(K={}));const uYe=new Map([[Ze.A,K.A],[Ze.ADDRESS,K.ADDRESS],[Ze.ANNOTATION_XML,K.ANNOTATION_XML],[Ze.APPLET,K.APPLET],[Ze.AREA,K.AREA],[Ze.ARTICLE,K.ARTICLE],[Ze.ASIDE,K.ASIDE],[Ze.B,K.B],[Ze.BASE,K.BASE],[Ze.BASEFONT,K.BASEFONT],[Ze.BGSOUND,K.BGSOUND],[Ze.BIG,K.BIG],[Ze.BLOCKQUOTE,K.BLOCKQUOTE],[Ze.BODY,K.BODY],[Ze.BR,K.BR],[Ze.BUTTON,K.BUTTON],[Ze.CAPTION,K.CAPTION],[Ze.CENTER,K.CENTER],[Ze.CODE,K.CODE],[Ze.COL,K.COL],[Ze.COLGROUP,K.COLGROUP],[Ze.DD,K.DD],[Ze.DESC,K.DESC],[Ze.DETAILS,K.DETAILS],[Ze.DIALOG,K.DIALOG],[Ze.DIR,K.DIR],[Ze.DIV,K.DIV],[Ze.DL,K.DL],[Ze.DT,K.DT],[Ze.EM,K.EM],[Ze.EMBED,K.EMBED],[Ze.FIELDSET,K.FIELDSET],[Ze.FIGCAPTION,K.FIGCAPTION],[Ze.FIGURE,K.FIGURE],[Ze.FONT,K.FONT],[Ze.FOOTER,K.FOOTER],[Ze.FOREIGN_OBJECT,K.FOREIGN_OBJECT],[Ze.FORM,K.FORM],[Ze.FRAME,K.FRAME],[Ze.FRAMESET,K.FRAMESET],[Ze.H1,K.H1],[Ze.H2,K.H2],[Ze.H3,K.H3],[Ze.H4,K.H4],[Ze.H5,K.H5],[Ze.H6,K.H6],[Ze.HEAD,K.HEAD],[Ze.HEADER,K.HEADER],[Ze.HGROUP,K.HGROUP],[Ze.HR,K.HR],[Ze.HTML,K.HTML],[Ze.I,K.I],[Ze.IMG,K.IMG],[Ze.IMAGE,K.IMAGE],[Ze.INPUT,K.INPUT],[Ze.IFRAME,K.IFRAME],[Ze.KEYGEN,K.KEYGEN],[Ze.LABEL,K.LABEL],[Ze.LI,K.LI],[Ze.LINK,K.LINK],[Ze.LISTING,K.LISTING],[Ze.MAIN,K.MAIN],[Ze.MALIGNMARK,K.MALIGNMARK],[Ze.MARQUEE,K.MARQUEE],[Ze.MATH,K.MATH],[Ze.MENU,K.MENU],[Ze.META,K.META],[Ze.MGLYPH,K.MGLYPH],[Ze.MI,K.MI],[Ze.MO,K.MO],[Ze.MN,K.MN],[Ze.MS,K.MS],[Ze.MTEXT,K.MTEXT],[Ze.NAV,K.NAV],[Ze.NOBR,K.NOBR],[Ze.NOFRAMES,K.NOFRAMES],[Ze.NOEMBED,K.NOEMBED],[Ze.NOSCRIPT,K.NOSCRIPT],[Ze.OBJECT,K.OBJECT],[Ze.OL,K.OL],[Ze.OPTGROUP,K.OPTGROUP],[Ze.OPTION,K.OPTION],[Ze.P,K.P],[Ze.PARAM,K.PARAM],[Ze.PLAINTEXT,K.PLAINTEXT],[Ze.PRE,K.PRE],[Ze.RB,K.RB],[Ze.RP,K.RP],[Ze.RT,K.RT],[Ze.RTC,K.RTC],[Ze.RUBY,K.RUBY],[Ze.S,K.S],[Ze.SCRIPT,K.SCRIPT],[Ze.SECTION,K.SECTION],[Ze.SELECT,K.SELECT],[Ze.SOURCE,K.SOURCE],[Ze.SMALL,K.SMALL],[Ze.SPAN,K.SPAN],[Ze.STRIKE,K.STRIKE],[Ze.STRONG,K.STRONG],[Ze.STYLE,K.STYLE],[Ze.SUB,K.SUB],[Ze.SUMMARY,K.SUMMARY],[Ze.SUP,K.SUP],[Ze.TABLE,K.TABLE],[Ze.TBODY,K.TBODY],[Ze.TEMPLATE,K.TEMPLATE],[Ze.TEXTAREA,K.TEXTAREA],[Ze.TFOOT,K.TFOOT],[Ze.TD,K.TD],[Ze.TH,K.TH],[Ze.THEAD,K.THEAD],[Ze.TITLE,K.TITLE],[Ze.TR,K.TR],[Ze.TRACK,K.TRACK],[Ze.TT,K.TT],[Ze.U,K.U],[Ze.UL,K.UL],[Ze.SVG,K.SVG],[Ze.VAR,K.VAR],[Ze.WBR,K.WBR],[Ze.XMP,K.XMP]]);function IT(e){var t;return(t=uYe.get(e))!==null&&t!==void 0?t:K.UNKNOWN}const Ht=K,lYe={[bt.HTML]:new Set([Ht.ADDRESS,Ht.APPLET,Ht.AREA,Ht.ARTICLE,Ht.ASIDE,Ht.BASE,Ht.BASEFONT,Ht.BGSOUND,Ht.BLOCKQUOTE,Ht.BODY,Ht.BR,Ht.BUTTON,Ht.CAPTION,Ht.CENTER,Ht.COL,Ht.COLGROUP,Ht.DD,Ht.DETAILS,Ht.DIR,Ht.DIV,Ht.DL,Ht.DT,Ht.EMBED,Ht.FIELDSET,Ht.FIGCAPTION,Ht.FIGURE,Ht.FOOTER,Ht.FORM,Ht.FRAME,Ht.FRAMESET,Ht.H1,Ht.H2,Ht.H3,Ht.H4,Ht.H5,Ht.H6,Ht.HEAD,Ht.HEADER,Ht.HGROUP,Ht.HR,Ht.HTML,Ht.IFRAME,Ht.IMG,Ht.INPUT,Ht.LI,Ht.LINK,Ht.LISTING,Ht.MAIN,Ht.MARQUEE,Ht.MENU,Ht.META,Ht.NAV,Ht.NOEMBED,Ht.NOFRAMES,Ht.NOSCRIPT,Ht.OBJECT,Ht.OL,Ht.P,Ht.PARAM,Ht.PLAINTEXT,Ht.PRE,Ht.SCRIPT,Ht.SECTION,Ht.SELECT,Ht.SOURCE,Ht.STYLE,Ht.SUMMARY,Ht.TABLE,Ht.TBODY,Ht.TD,Ht.TEMPLATE,Ht.TEXTAREA,Ht.TFOOT,Ht.TH,Ht.THEAD,Ht.TITLE,Ht.TR,Ht.TRACK,Ht.UL,Ht.WBR,Ht.XMP]),[bt.MATHML]:new Set([Ht.MI,Ht.MO,Ht.MN,Ht.MS,Ht.MTEXT,Ht.ANNOTATION_XML]),[bt.SVG]:new Set([Ht.TITLE,Ht.FOREIGN_OBJECT,Ht.DESC]),[bt.XLINK]:new Set,[bt.XML]:new Set,[bt.XMLNS]:new Set};function Tve(e){return e===Ht.H1||e===Ht.H2||e===Ht.H3||e===Ht.H4||e===Ht.H5||e===Ht.H6}Ze.STYLE,Ze.SCRIPT,Ze.XMP,Ze.IFRAME,Ze.NOEMBED,Ze.NOFRAMES,Ze.PLAINTEXT;const cYe=new Map([[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);var Te;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.NAMED_CHARACTER_REFERENCE=72]="NAMED_CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=73]="AMBIGUOUS_AMPERSAND",e[e.NUMERIC_CHARACTER_REFERENCE=74]="NUMERIC_CHARACTER_REFERENCE",e[e.HEXADEMICAL_CHARACTER_REFERENCE_START=75]="HEXADEMICAL_CHARACTER_REFERENCE_START",e[e.HEXADEMICAL_CHARACTER_REFERENCE=76]="HEXADEMICAL_CHARACTER_REFERENCE",e[e.DECIMAL_CHARACTER_REFERENCE=77]="DECIMAL_CHARACTER_REFERENCE",e[e.NUMERIC_CHARACTER_REFERENCE_END=78]="NUMERIC_CHARACTER_REFERENCE_END"})(Te||(Te={}));const ga={DATA:Te.DATA,RCDATA:Te.RCDATA,RAWTEXT:Te.RAWTEXT,SCRIPT_DATA:Te.SCRIPT_DATA,PLAINTEXT:Te.PLAINTEXT,CDATA_SECTION:Te.CDATA_SECTION};function fk(e){return e>=we.DIGIT_0&&e<=we.DIGIT_9}function _3(e){return e>=we.LATIN_CAPITAL_A&&e<=we.LATIN_CAPITAL_Z}function fYe(e){return e>=we.LATIN_SMALL_A&&e<=we.LATIN_SMALL_Z}function bv(e){return fYe(e)||_3(e)}function AU(e){return bv(e)||fk(e)}function Cve(e){return e>=we.LATIN_CAPITAL_A&&e<=we.LATIN_CAPITAL_F}function Ave(e){return e>=we.LATIN_SMALL_A&&e<=we.LATIN_SMALL_F}function dYe(e){return fk(e)||Cve(e)||Ave(e)}function d6(e){return e+32}function kve(e){return e===we.SPACE||e===we.LINE_FEED||e===we.TABULATION||e===we.FORM_FEED}function hYe(e){return e===we.EQUALS_SIGN||AU(e)}function Vre(e){return kve(e)||e===we.SOLIDUS||e===we.GREATER_THAN_SIGN}class pYe{constructor(t,n){this.options=t,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=Te.DATA,this.returnState=Te.DATA,this.charRefCode=-1,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new JGe(n),this.currentLocation=this.getCurrentLocation(-1)}_err(t){var n,r;(r=(n=this.handler).onParseError)===null||r===void 0||r.call(n,this.preprocessor.getError(t))}getCurrentLocation(t){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-t,startOffset:this.preprocessor.offset-t,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const t=this._consume();this._ensureHibernation()||this._callState(t)}this.inLoop=!1}}pause(){this.paused=!0}resume(t){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||t==null||t())}write(t,n,r){this.active=!0,this.preprocessor.write(t,n),this._runParsingLoop(),this.paused||r==null||r()}insertHtmlAtCurrentPos(t){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(t),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this._unconsume(this.consumedAfterSnapshot),this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_unconsume(t){this.consumedAfterSnapshot-=t,this.preprocessor.retreat(t)}_reconsumeInState(t,n){this.state=t,this._callState(n)}_advanceBy(t){this.consumedAfterSnapshot+=t;for(let n=0;n<t;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(t,n){return this.preprocessor.startsWith(t,n)?(this._advanceBy(t.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:Ur.START_TAG,tagName:"",tagID:K.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:Ur.END_TAG,tagName:"",tagID:K.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(t){this.currentToken={type:Ur.COMMENT,data:"",location:this.getCurrentLocation(t)}}_createDoctypeToken(t){this.currentToken={type:Ur.DOCTYPE,name:t,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(t,n){this.currentCharacterToken={type:t,chars:n,location:this.currentLocation}}_createAttr(t){this.currentAttr={name:t,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var t,n;const r=this.currentToken;if(wve(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const i=(t=(n=r.location).attrs)!==null&&t!==void 0?t:n.attrs=Object.create(null);i[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(ft.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(t){this._emitCurrentCharacterToken(t.location),this.currentToken=null,t.location&&(t.location.endLine=this.preprocessor.line,t.location.endCol=this.preprocessor.col+1,t.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const t=this.currentToken;this.prepareToken(t),t.tagID=IT(t.tagName),t.type===Ur.START_TAG?(this.lastStartTagName=t.tagName,this.handler.onStartTag(t)):(t.attrs.length>0&&this._err(ft.endTagWithAttributes),t.selfClosing&&this._err(ft.endTagWithTrailingSolidus),this.handler.onEndTag(t)),this.preprocessor.dropParsedChunk()}emitCurrentComment(t){this.prepareToken(t),this.handler.onComment(t),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(t){this.prepareToken(t),this.handler.onDoctype(t),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(t){if(this.currentCharacterToken){switch(t&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=t.startLine,this.currentCharacterToken.location.endCol=t.startCol,this.currentCharacterToken.location.endOffset=t.startOffset),this.currentCharacterToken.type){case Ur.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case Ur.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case Ur.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const t=this.getCurrentLocation(0);t&&(t.endLine=t.startLine,t.endCol=t.startCol,t.endOffset=t.startOffset),this._emitCurrentCharacterToken(t),this.handler.onEof({type:Ur.EOF,location:t}),this.active=!1}_appendCharToCurrentCharacterToken(t,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type!==t)this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();else{this.currentCharacterToken.chars+=n;return}this._createCharacterToken(t,n)}_emitCodePoint(t){const n=kve(t)?Ur.WHITESPACE_CHARACTER:t===we.NULL?Ur.NULL_CHARACTER:Ur.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(t))}_emitChars(t){this._appendCharToCurrentCharacterToken(Ur.CHARACTER,t)}_matchNamedCharacterReference(t){let n=null,r=0,i=!1;for(let s=0,o=vv[0];s>=0&&(s=Sve(vv,o,s+1,t),!(s<0));t=this._consume()){r+=1,o=vv[s];const a=o&Om.VALUE_LENGTH;if(a){const u=(a>>14)-1;if(t!==we.SEMICOLON&&this._isCharacterReferenceInAttribute()&&hYe(this.preprocessor.peek(1))?(n=[we.AMPERSAND],s+=u):(n=u===0?[vv[s]&~Om.VALUE_LENGTH]:u===1?[vv[++s]]:[vv[++s],vv[++s]],r=0,i=t!==we.SEMICOLON),u===0){this._consume();break}}}return this._unconsume(r),i&&!this.preprocessor.endOfChunkHit&&this._err(ft.missingSemicolonAfterCharacterReference),this._unconsume(1),n}_isCharacterReferenceInAttribute(){return this.returnState===Te.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===Te.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===Te.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(t){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(t):this._emitCodePoint(t)}_callState(t){switch(this.state){case Te.DATA:{this._stateData(t);break}case Te.RCDATA:{this._stateRcdata(t);break}case Te.RAWTEXT:{this._stateRawtext(t);break}case Te.SCRIPT_DATA:{this._stateScriptData(t);break}case Te.PLAINTEXT:{this._statePlaintext(t);break}case Te.TAG_OPEN:{this._stateTagOpen(t);break}case Te.END_TAG_OPEN:{this._stateEndTagOpen(t);break}case Te.TAG_NAME:{this._stateTagName(t);break}case Te.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(t);break}case Te.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(t);break}case Te.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(t);break}case Te.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(t);break}case Te.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(t);break}case Te.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(t);break}case Te.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(t);break}case Te.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(t);break}case Te.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(t);break}case Te.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(t);break}case Te.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(t);break}case Te.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(t);break}case Te.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(t);break}case Te.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(t);break}case Te.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(t);break}case Te.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(t);break}case Te.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(t);break}case Te.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(t);break}case Te.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(t);break}case Te.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(t);break}case Te.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(t);break}case Te.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(t);break}case Te.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(t);break}case Te.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(t);break}case Te.ATTRIBUTE_NAME:{this._stateAttributeName(t);break}case Te.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(t);break}case Te.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(t);break}case Te.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(t);break}case Te.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(t);break}case Te.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(t);break}case Te.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(t);break}case Te.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(t);break}case Te.BOGUS_COMMENT:{this._stateBogusComment(t);break}case Te.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(t);break}case Te.COMMENT_START:{this._stateCommentStart(t);break}case Te.COMMENT_START_DASH:{this._stateCommentStartDash(t);break}case Te.COMMENT:{this._stateComment(t);break}case Te.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(t);break}case Te.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(t);break}case Te.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(t);break}case Te.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(t);break}case Te.COMMENT_END_DASH:{this._stateCommentEndDash(t);break}case Te.COMMENT_END:{this._stateCommentEnd(t);break}case Te.COMMENT_END_BANG:{this._stateCommentEndBang(t);break}case Te.DOCTYPE:{this._stateDoctype(t);break}case Te.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(t);break}case Te.DOCTYPE_NAME:{this._stateDoctypeName(t);break}case Te.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(t);break}case Te.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(t);break}case Te.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(t);break}case Te.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(t);break}case Te.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(t);break}case Te.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(t);break}case Te.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(t);break}case Te.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(t);break}case Te.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(t);break}case Te.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(t);break}case Te.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(t);break}case Te.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(t);break}case Te.BOGUS_DOCTYPE:{this._stateBogusDoctype(t);break}case Te.CDATA_SECTION:{this._stateCdataSection(t);break}case Te.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(t);break}case Te.CDATA_SECTION_END:{this._stateCdataSectionEnd(t);break}case Te.CHARACTER_REFERENCE:{this._stateCharacterReference(t);break}case Te.NAMED_CHARACTER_REFERENCE:{this._stateNamedCharacterReference(t);break}case Te.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(t);break}case Te.NUMERIC_CHARACTER_REFERENCE:{this._stateNumericCharacterReference(t);break}case Te.HEXADEMICAL_CHARACTER_REFERENCE_START:{this._stateHexademicalCharacterReferenceStart(t);break}case Te.HEXADEMICAL_CHARACTER_REFERENCE:{this._stateHexademicalCharacterReference(t);break}case Te.DECIMAL_CHARACTER_REFERENCE:{this._stateDecimalCharacterReference(t);break}case Te.NUMERIC_CHARACTER_REFERENCE_END:{this._stateNumericCharacterReferenceEnd(t);break}default:throw new Error("Unknown state")}}_stateData(t){switch(t){case we.LESS_THAN_SIGN:{this.state=Te.TAG_OPEN;break}case we.AMPERSAND:{this.returnState=Te.DATA,this.state=Te.CHARACTER_REFERENCE;break}case we.NULL:{this._err(ft.unexpectedNullCharacter),this._emitCodePoint(t);break}case we.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRcdata(t){switch(t){case we.AMPERSAND:{this.returnState=Te.RCDATA,this.state=Te.CHARACTER_REFERENCE;break}case we.LESS_THAN_SIGN:{this.state=Te.RCDATA_LESS_THAN_SIGN;break}case we.NULL:{this._err(ft.unexpectedNullCharacter),this._emitChars(oo);break}case we.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRawtext(t){switch(t){case we.LESS_THAN_SIGN:{this.state=Te.RAWTEXT_LESS_THAN_SIGN;break}case we.NULL:{this._err(ft.unexpectedNullCharacter),this._emitChars(oo);break}case we.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptData(t){switch(t){case we.LESS_THAN_SIGN:{this.state=Te.SCRIPT_DATA_LESS_THAN_SIGN;break}case we.NULL:{this._err(ft.unexpectedNullCharacter),this._emitChars(oo);break}case we.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_statePlaintext(t){switch(t){case we.NULL:{this._err(ft.unexpectedNullCharacter),this._emitChars(oo);break}case we.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateTagOpen(t){if(bv(t))this._createStartTagToken(),this.state=Te.TAG_NAME,this._stateTagName(t);else switch(t){case we.EXCLAMATION_MARK:{this.state=Te.MARKUP_DECLARATION_OPEN;break}case we.SOLIDUS:{this.state=Te.END_TAG_OPEN;break}case we.QUESTION_MARK:{this._err(ft.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=Te.BOGUS_COMMENT,this._stateBogusComment(t);break}case we.EOF:{this._err(ft.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(ft.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=Te.DATA,this._stateData(t)}}_stateEndTagOpen(t){if(bv(t))this._createEndTagToken(),this.state=Te.TAG_NAME,this._stateTagName(t);else switch(t){case we.GREATER_THAN_SIGN:{this._err(ft.missingEndTagName),this.state=Te.DATA;break}case we.EOF:{this._err(ft.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(ft.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=Te.BOGUS_COMMENT,this._stateBogusComment(t)}}_stateTagName(t){const n=this.currentToken;switch(t){case we.SPACE:case we.LINE_FEED:case we.TABULATION:case we.FORM_FEED:{this.state=Te.BEFORE_ATTRIBUTE_NAME;break}case we.SOLIDUS:{this.state=Te.SELF_CLOSING_START_TAG;break}case we.GREATER_THAN_SIGN:{this.state=Te.DATA,this.emitCurrentTagToken();break}case we.NULL:{this._err(ft.unexpectedNullCharacter),n.tagName+=oo;break}case we.EOF:{this._err(ft.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(_3(t)?d6(t):t)}}_stateRcdataLessThanSign(t){t===we.SOLIDUS?this.state=Te.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=Te.RCDATA,this._stateRcdata(t))}_stateRcdataEndTagOpen(t){bv(t)?(this.state=Te.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(t)):(this._emitChars("</"),this.state=Te.RCDATA,this._stateRcdata(t))}handleSpecialEndTag(t){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case we.SPACE:case we.LINE_FEED:case we.TABULATION:case we.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=Te.BEFORE_ATTRIBUTE_NAME,!1;case we.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=Te.SELF_CLOSING_START_TAG,!1;case we.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=Te.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=Te.RCDATA,this._stateRcdata(t))}_stateRawtextLessThanSign(t){t===we.SOLIDUS?this.state=Te.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=Te.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagOpen(t){bv(t)?(this.state=Te.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(t)):(this._emitChars("</"),this.state=Te.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=Te.RAWTEXT,this._stateRawtext(t))}_stateScriptDataLessThanSign(t){switch(t){case we.SOLIDUS:{this.state=Te.SCRIPT_DATA_END_TAG_OPEN;break}case we.EXCLAMATION_MARK:{this.state=Te.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=Te.SCRIPT_DATA,this._stateScriptData(t)}}_stateScriptDataEndTagOpen(t){bv(t)?(this.state=Te.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(t)):(this._emitChars("</"),this.state=Te.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=Te.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStart(t){t===we.HYPHEN_MINUS?(this.state=Te.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=Te.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStartDash(t){t===we.HYPHEN_MINUS?(this.state=Te.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=Te.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscaped(t){switch(t){case we.HYPHEN_MINUS:{this.state=Te.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case we.LESS_THAN_SIGN:{this.state=Te.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case we.NULL:{this._err(ft.unexpectedNullCharacter),this._emitChars(oo);break}case we.EOF:{this._err(ft.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataEscapedDash(t){switch(t){case we.HYPHEN_MINUS:{this.state=Te.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case we.LESS_THAN_SIGN:{this.state=Te.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case we.NULL:{this._err(ft.unexpectedNullCharacter),this.state=Te.SCRIPT_DATA_ESCAPED,this._emitChars(oo);break}case we.EOF:{this._err(ft.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=Te.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedDashDash(t){switch(t){case we.HYPHEN_MINUS:{this._emitChars("-");break}case we.LESS_THAN_SIGN:{this.state=Te.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case we.GREATER_THAN_SIGN:{this.state=Te.SCRIPT_DATA,this._emitChars(">");break}case we.NULL:{this._err(ft.unexpectedNullCharacter),this.state=Te.SCRIPT_DATA_ESCAPED,this._emitChars(oo);break}case we.EOF:{this._err(ft.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=Te.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedLessThanSign(t){t===we.SOLIDUS?this.state=Te.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:bv(t)?(this._emitChars("<"),this.state=Te.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(t)):(this._emitChars("<"),this.state=Te.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagOpen(t){bv(t)?(this.state=Te.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(t)):(this._emitChars("</"),this.state=Te.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=Te.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscapeStart(t){if(this.preprocessor.startsWith(Lf.SCRIPT,!1)&&Vre(this.preprocessor.peek(Lf.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<Lf.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=Te.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=Te.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscaped(t){switch(t){case we.HYPHEN_MINUS:{this.state=Te.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case we.LESS_THAN_SIGN:{this.state=Te.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case we.NULL:{this._err(ft.unexpectedNullCharacter),this._emitChars(oo);break}case we.EOF:{this._err(ft.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDash(t){switch(t){case we.HYPHEN_MINUS:{this.state=Te.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case we.LESS_THAN_SIGN:{this.state=Te.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case we.NULL:{this._err(ft.unexpectedNullCharacter),this.state=Te.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(oo);break}case we.EOF:{this._err(ft.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=Te.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDashDash(t){switch(t){case we.HYPHEN_MINUS:{this._emitChars("-");break}case we.LESS_THAN_SIGN:{this.state=Te.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case we.GREATER_THAN_SIGN:{this.state=Te.SCRIPT_DATA,this._emitChars(">");break}case we.NULL:{this._err(ft.unexpectedNullCharacter),this.state=Te.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(oo);break}case we.EOF:{this._err(ft.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=Te.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedLessThanSign(t){t===we.SOLIDUS?(this.state=Te.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=Te.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateScriptDataDoubleEscapeEnd(t){if(this.preprocessor.startsWith(Lf.SCRIPT,!1)&&Vre(this.preprocessor.peek(Lf.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<Lf.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=Te.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=Te.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateBeforeAttributeName(t){switch(t){case we.SPACE:case we.LINE_FEED:case we.TABULATION:case we.FORM_FEED:break;case we.SOLIDUS:case we.GREATER_THAN_SIGN:case we.EOF:{this.state=Te.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case we.EQUALS_SIGN:{this._err(ft.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=Te.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=Te.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateAttributeName(t){switch(t){case we.SPACE:case we.LINE_FEED:case we.TABULATION:case we.FORM_FEED:case we.SOLIDUS:case we.GREATER_THAN_SIGN:case we.EOF:{this._leaveAttrName(),this.state=Te.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case we.EQUALS_SIGN:{this._leaveAttrName(),this.state=Te.BEFORE_ATTRIBUTE_VALUE;break}case we.QUOTATION_MARK:case we.APOSTROPHE:case we.LESS_THAN_SIGN:{this._err(ft.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(t);break}case we.NULL:{this._err(ft.unexpectedNullCharacter),this.currentAttr.name+=oo;break}default:this.currentAttr.name+=String.fromCodePoint(_3(t)?d6(t):t)}}_stateAfterAttributeName(t){switch(t){case we.SPACE:case we.LINE_FEED:case we.TABULATION:case we.FORM_FEED:break;case we.SOLIDUS:{this.state=Te.SELF_CLOSING_START_TAG;break}case we.EQUALS_SIGN:{this.state=Te.BEFORE_ATTRIBUTE_VALUE;break}case we.GREATER_THAN_SIGN:{this.state=Te.DATA,this.emitCurrentTagToken();break}case we.EOF:{this._err(ft.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=Te.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateBeforeAttributeValue(t){switch(t){case we.SPACE:case we.LINE_FEED:case we.TABULATION:case we.FORM_FEED:break;case we.QUOTATION_MARK:{this.state=Te.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case we.APOSTROPHE:{this.state=Te.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case we.GREATER_THAN_SIGN:{this._err(ft.missingAttributeValue),this.state=Te.DATA,this.emitCurrentTagToken();break}default:this.state=Te.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(t)}}_stateAttributeValueDoubleQuoted(t){switch(t){case we.QUOTATION_MARK:{this.state=Te.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case we.AMPERSAND:{this.returnState=Te.ATTRIBUTE_VALUE_DOUBLE_QUOTED,this.state=Te.CHARACTER_REFERENCE;break}case we.NULL:{this._err(ft.unexpectedNullCharacter),this.currentAttr.value+=oo;break}case we.EOF:{this._err(ft.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueSingleQuoted(t){switch(t){case we.APOSTROPHE:{this.state=Te.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case we.AMPERSAND:{this.returnState=Te.ATTRIBUTE_VALUE_SINGLE_QUOTED,this.state=Te.CHARACTER_REFERENCE;break}case we.NULL:{this._err(ft.unexpectedNullCharacter),this.currentAttr.value+=oo;break}case we.EOF:{this._err(ft.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueUnquoted(t){switch(t){case we.SPACE:case we.LINE_FEED:case we.TABULATION:case we.FORM_FEED:{this._leaveAttrValue(),this.state=Te.BEFORE_ATTRIBUTE_NAME;break}case we.AMPERSAND:{this.returnState=Te.ATTRIBUTE_VALUE_UNQUOTED,this.state=Te.CHARACTER_REFERENCE;break}case we.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=Te.DATA,this.emitCurrentTagToken();break}case we.NULL:{this._err(ft.unexpectedNullCharacter),this.currentAttr.value+=oo;break}case we.QUOTATION_MARK:case we.APOSTROPHE:case we.LESS_THAN_SIGN:case we.EQUALS_SIGN:case we.GRAVE_ACCENT:{this._err(ft.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(t);break}case we.EOF:{this._err(ft.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAfterAttributeValueQuoted(t){switch(t){case we.SPACE:case we.LINE_FEED:case we.TABULATION:case we.FORM_FEED:{this._leaveAttrValue(),this.state=Te.BEFORE_ATTRIBUTE_NAME;break}case we.SOLIDUS:{this._leaveAttrValue(),this.state=Te.SELF_CLOSING_START_TAG;break}case we.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=Te.DATA,this.emitCurrentTagToken();break}case we.EOF:{this._err(ft.eofInTag),this._emitEOFToken();break}default:this._err(ft.missingWhitespaceBetweenAttributes),this.state=Te.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateSelfClosingStartTag(t){switch(t){case we.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=Te.DATA,this.emitCurrentTagToken();break}case we.EOF:{this._err(ft.eofInTag),this._emitEOFToken();break}default:this._err(ft.unexpectedSolidusInTag),this.state=Te.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateBogusComment(t){const n=this.currentToken;switch(t){case we.GREATER_THAN_SIGN:{this.state=Te.DATA,this.emitCurrentComment(n);break}case we.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case we.NULL:{this._err(ft.unexpectedNullCharacter),n.data+=oo;break}default:n.data+=String.fromCodePoint(t)}}_stateMarkupDeclarationOpen(t){this._consumeSequenceIfMatch(Lf.DASH_DASH,!0)?(this._createCommentToken(Lf.DASH_DASH.length+1),this.state=Te.COMMENT_START):this._consumeSequenceIfMatch(Lf.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(Lf.DOCTYPE.length+1),this.state=Te.DOCTYPE):this._consumeSequenceIfMatch(Lf.CDATA_START,!0)?this.inForeignNode?this.state=Te.CDATA_SECTION:(this._err(ft.cdataInHtmlContent),this._createCommentToken(Lf.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=Te.BOGUS_COMMENT):this._ensureHibernation()||(this._err(ft.incorrectlyOpenedComment),this._createCommentToken(2),this.state=Te.BOGUS_COMMENT,this._stateBogusComment(t))}_stateCommentStart(t){switch(t){case we.HYPHEN_MINUS:{this.state=Te.COMMENT_START_DASH;break}case we.GREATER_THAN_SIGN:{this._err(ft.abruptClosingOfEmptyComment),this.state=Te.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=Te.COMMENT,this._stateComment(t)}}_stateCommentStartDash(t){const n=this.currentToken;switch(t){case we.HYPHEN_MINUS:{this.state=Te.COMMENT_END;break}case we.GREATER_THAN_SIGN:{this._err(ft.abruptClosingOfEmptyComment),this.state=Te.DATA,this.emitCurrentComment(n);break}case we.EOF:{this._err(ft.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=Te.COMMENT,this._stateComment(t)}}_stateComment(t){const n=this.currentToken;switch(t){case we.HYPHEN_MINUS:{this.state=Te.COMMENT_END_DASH;break}case we.LESS_THAN_SIGN:{n.data+="<",this.state=Te.COMMENT_LESS_THAN_SIGN;break}case we.NULL:{this._err(ft.unexpectedNullCharacter),n.data+=oo;break}case we.EOF:{this._err(ft.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(t)}}_stateCommentLessThanSign(t){const n=this.currentToken;switch(t){case we.EXCLAMATION_MARK:{n.data+="!",this.state=Te.COMMENT_LESS_THAN_SIGN_BANG;break}case we.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=Te.COMMENT,this._stateComment(t)}}_stateCommentLessThanSignBang(t){t===we.HYPHEN_MINUS?this.state=Te.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=Te.COMMENT,this._stateComment(t))}_stateCommentLessThanSignBangDash(t){t===we.HYPHEN_MINUS?this.state=Te.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=Te.COMMENT_END_DASH,this._stateCommentEndDash(t))}_stateCommentLessThanSignBangDashDash(t){t!==we.GREATER_THAN_SIGN&&t!==we.EOF&&this._err(ft.nestedComment),this.state=Te.COMMENT_END,this._stateCommentEnd(t)}_stateCommentEndDash(t){const n=this.currentToken;switch(t){case we.HYPHEN_MINUS:{this.state=Te.COMMENT_END;break}case we.EOF:{this._err(ft.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=Te.COMMENT,this._stateComment(t)}}_stateCommentEnd(t){const n=this.currentToken;switch(t){case we.GREATER_THAN_SIGN:{this.state=Te.DATA,this.emitCurrentComment(n);break}case we.EXCLAMATION_MARK:{this.state=Te.COMMENT_END_BANG;break}case we.HYPHEN_MINUS:{n.data+="-";break}case we.EOF:{this._err(ft.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=Te.COMMENT,this._stateComment(t)}}_stateCommentEndBang(t){const n=this.currentToken;switch(t){case we.HYPHEN_MINUS:{n.data+="--!",this.state=Te.COMMENT_END_DASH;break}case we.GREATER_THAN_SIGN:{this._err(ft.incorrectlyClosedComment),this.state=Te.DATA,this.emitCurrentComment(n);break}case we.EOF:{this._err(ft.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=Te.COMMENT,this._stateComment(t)}}_stateDoctype(t){switch(t){case we.SPACE:case we.LINE_FEED:case we.TABULATION:case we.FORM_FEED:{this.state=Te.BEFORE_DOCTYPE_NAME;break}case we.GREATER_THAN_SIGN:{this.state=Te.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t);break}case we.EOF:{this._err(ft.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ft.missingWhitespaceBeforeDoctypeName),this.state=Te.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t)}}_stateBeforeDoctypeName(t){if(_3(t))this._createDoctypeToken(String.fromCharCode(d6(t))),this.state=Te.DOCTYPE_NAME;else switch(t){case we.SPACE:case we.LINE_FEED:case we.TABULATION:case we.FORM_FEED:break;case we.NULL:{this._err(ft.unexpectedNullCharacter),this._createDoctypeToken(oo),this.state=Te.DOCTYPE_NAME;break}case we.GREATER_THAN_SIGN:{this._err(ft.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Te.DATA;break}case we.EOF:{this._err(ft.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(t)),this.state=Te.DOCTYPE_NAME}}_stateDoctypeName(t){const n=this.currentToken;switch(t){case we.SPACE:case we.LINE_FEED:case we.TABULATION:case we.FORM_FEED:{this.state=Te.AFTER_DOCTYPE_NAME;break}case we.GREATER_THAN_SIGN:{this.state=Te.DATA,this.emitCurrentDoctype(n);break}case we.NULL:{this._err(ft.unexpectedNullCharacter),n.name+=oo;break}case we.EOF:{this._err(ft.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(_3(t)?d6(t):t)}}_stateAfterDoctypeName(t){const n=this.currentToken;switch(t){case we.SPACE:case we.LINE_FEED:case we.TABULATION:case we.FORM_FEED:break;case we.GREATER_THAN_SIGN:{this.state=Te.DATA,this.emitCurrentDoctype(n);break}case we.EOF:{this._err(ft.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(Lf.PUBLIC,!1)?this.state=Te.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(Lf.SYSTEM,!1)?this.state=Te.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(ft.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=Te.BOGUS_DOCTYPE,this._stateBogusDoctype(t))}}_stateAfterDoctypePublicKeyword(t){const n=this.currentToken;switch(t){case we.SPACE:case we.LINE_FEED:case we.TABULATION:case we.FORM_FEED:{this.state=Te.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case we.QUOTATION_MARK:{this._err(ft.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=Te.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case we.APOSTROPHE:{this._err(ft.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=Te.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case we.GREATER_THAN_SIGN:{this._err(ft.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=Te.DATA,this.emitCurrentDoctype(n);break}case we.EOF:{this._err(ft.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ft.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=Te.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case we.SPACE:case we.LINE_FEED:case we.TABULATION:case we.FORM_FEED:break;case we.QUOTATION_MARK:{n.publicId="",this.state=Te.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case we.APOSTROPHE:{n.publicId="",this.state=Te.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case we.GREATER_THAN_SIGN:{this._err(ft.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=Te.DATA,this.emitCurrentDoctype(n);break}case we.EOF:{this._err(ft.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ft.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=Te.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypePublicIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case we.QUOTATION_MARK:{this.state=Te.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case we.NULL:{this._err(ft.unexpectedNullCharacter),n.publicId+=oo;break}case we.GREATER_THAN_SIGN:{this._err(ft.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Te.DATA;break}case we.EOF:{this._err(ft.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateDoctypePublicIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case we.APOSTROPHE:{this.state=Te.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case we.NULL:{this._err(ft.unexpectedNullCharacter),n.publicId+=oo;break}case we.GREATER_THAN_SIGN:{this._err(ft.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Te.DATA;break}case we.EOF:{this._err(ft.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateAfterDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case we.SPACE:case we.LINE_FEED:case we.TABULATION:case we.FORM_FEED:{this.state=Te.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case we.GREATER_THAN_SIGN:{this.state=Te.DATA,this.emitCurrentDoctype(n);break}case we.QUOTATION_MARK:{this._err(ft.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=Te.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case we.APOSTROPHE:{this._err(ft.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=Te.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case we.EOF:{this._err(ft.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ft.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Te.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBetweenDoctypePublicAndSystemIdentifiers(t){const n=this.currentToken;switch(t){case we.SPACE:case we.LINE_FEED:case we.TABULATION:case we.FORM_FEED:break;case we.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=Te.DATA;break}case we.QUOTATION_MARK:{n.systemId="",this.state=Te.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case we.APOSTROPHE:{n.systemId="",this.state=Te.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case we.EOF:{this._err(ft.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ft.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Te.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateAfterDoctypeSystemKeyword(t){const n=this.currentToken;switch(t){case we.SPACE:case we.LINE_FEED:case we.TABULATION:case we.FORM_FEED:{this.state=Te.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case we.QUOTATION_MARK:{this._err(ft.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=Te.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case we.APOSTROPHE:{this._err(ft.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=Te.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case we.GREATER_THAN_SIGN:{this._err(ft.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Te.DATA,this.emitCurrentDoctype(n);break}case we.EOF:{this._err(ft.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ft.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Te.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case we.SPACE:case we.LINE_FEED:case we.TABULATION:case we.FORM_FEED:break;case we.QUOTATION_MARK:{n.systemId="",this.state=Te.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case we.APOSTROPHE:{n.systemId="",this.state=Te.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case we.GREATER_THAN_SIGN:{this._err(ft.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Te.DATA,this.emitCurrentDoctype(n);break}case we.EOF:{this._err(ft.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ft.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Te.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypeSystemIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case we.QUOTATION_MARK:{this.state=Te.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case we.NULL:{this._err(ft.unexpectedNullCharacter),n.systemId+=oo;break}case we.GREATER_THAN_SIGN:{this._err(ft.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Te.DATA;break}case we.EOF:{this._err(ft.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateDoctypeSystemIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case we.APOSTROPHE:{this.state=Te.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case we.NULL:{this._err(ft.unexpectedNullCharacter),n.systemId+=oo;break}case we.GREATER_THAN_SIGN:{this._err(ft.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Te.DATA;break}case we.EOF:{this._err(ft.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateAfterDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case we.SPACE:case we.LINE_FEED:case we.TABULATION:case we.FORM_FEED:break;case we.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=Te.DATA;break}case we.EOF:{this._err(ft.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ft.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=Te.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBogusDoctype(t){const n=this.currentToken;switch(t){case we.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=Te.DATA;break}case we.NULL:{this._err(ft.unexpectedNullCharacter);break}case we.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(t){switch(t){case we.RIGHT_SQUARE_BRACKET:{this.state=Te.CDATA_SECTION_BRACKET;break}case we.EOF:{this._err(ft.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateCdataSectionBracket(t){t===we.RIGHT_SQUARE_BRACKET?this.state=Te.CDATA_SECTION_END:(this._emitChars("]"),this.state=Te.CDATA_SECTION,this._stateCdataSection(t))}_stateCdataSectionEnd(t){switch(t){case we.GREATER_THAN_SIGN:{this.state=Te.DATA;break}case we.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=Te.CDATA_SECTION,this._stateCdataSection(t)}}_stateCharacterReference(t){t===we.NUMBER_SIGN?this.state=Te.NUMERIC_CHARACTER_REFERENCE:AU(t)?(this.state=Te.NAMED_CHARACTER_REFERENCE,this._stateNamedCharacterReference(t)):(this._flushCodePointConsumedAsCharacterReference(we.AMPERSAND),this._reconsumeInState(this.returnState,t))}_stateNamedCharacterReference(t){const n=this._matchNamedCharacterReference(t);if(!this._ensureHibernation())if(n){for(let r=0;r<n.length;r++)this._flushCodePointConsumedAsCharacterReference(n[r]);this.state=this.returnState}else this._flushCodePointConsumedAsCharacterReference(we.AMPERSAND),this.state=Te.AMBIGUOUS_AMPERSAND}_stateAmbiguousAmpersand(t){AU(t)?this._flushCodePointConsumedAsCharacterReference(t):(t===we.SEMICOLON&&this._err(ft.unknownNamedCharacterReference),this._reconsumeInState(this.returnState,t))}_stateNumericCharacterReference(t){this.charRefCode=0,t===we.LATIN_SMALL_X||t===we.LATIN_CAPITAL_X?this.state=Te.HEXADEMICAL_CHARACTER_REFERENCE_START:fk(t)?(this.state=Te.DECIMAL_CHARACTER_REFERENCE,this._stateDecimalCharacterReference(t)):(this._err(ft.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(we.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(we.NUMBER_SIGN),this._reconsumeInState(this.returnState,t))}_stateHexademicalCharacterReferenceStart(t){dYe(t)?(this.state=Te.HEXADEMICAL_CHARACTER_REFERENCE,this._stateHexademicalCharacterReference(t)):(this._err(ft.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(we.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(we.NUMBER_SIGN),this._unconsume(2),this.state=this.returnState)}_stateHexademicalCharacterReference(t){Cve(t)?this.charRefCode=this.charRefCode*16+t-55:Ave(t)?this.charRefCode=this.charRefCode*16+t-87:fk(t)?this.charRefCode=this.charRefCode*16+t-48:t===we.SEMICOLON?this.state=Te.NUMERIC_CHARACTER_REFERENCE_END:(this._err(ft.missingSemicolonAfterCharacterReference),this.state=Te.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateDecimalCharacterReference(t){fk(t)?this.charRefCode=this.charRefCode*10+t-48:t===we.SEMICOLON?this.state=Te.NUMERIC_CHARACTER_REFERENCE_END:(this._err(ft.missingSemicolonAfterCharacterReference),this.state=Te.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateNumericCharacterReferenceEnd(t){if(this.charRefCode===we.NULL)this._err(ft.nullCharacterReference),this.charRefCode=we.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(ft.characterReferenceOutsideUnicodeRange),this.charRefCode=we.REPLACEMENT_CHARACTER;else if(bve(this.charRefCode))this._err(ft.surrogateCharacterReference),this.charRefCode=we.REPLACEMENT_CHARACTER;else if(_ve(this.charRefCode))this._err(ft.noncharacterCharacterReference);else if(xve(this.charRefCode)||this.charRefCode===we.CARRIAGE_RETURN){this._err(ft.controlCharacterReference);const n=cYe.get(this.charRefCode);n!==void 0&&(this.charRefCode=n)}this._flushCodePointConsumedAsCharacterReference(this.charRefCode),this._reconsumeInState(this.returnState,t)}}const Rve=new Set([K.DD,K.DT,K.LI,K.OPTGROUP,K.OPTION,K.P,K.RB,K.RP,K.RT,K.RTC]),Hre=new Set([...Rve,K.CAPTION,K.COLGROUP,K.TBODY,K.TD,K.TFOOT,K.TH,K.THEAD,K.TR]),h6=new Map([[K.APPLET,bt.HTML],[K.CAPTION,bt.HTML],[K.HTML,bt.HTML],[K.MARQUEE,bt.HTML],[K.OBJECT,bt.HTML],[K.TABLE,bt.HTML],[K.TD,bt.HTML],[K.TEMPLATE,bt.HTML],[K.TH,bt.HTML],[K.ANNOTATION_XML,bt.MATHML],[K.MI,bt.MATHML],[K.MN,bt.MATHML],[K.MO,bt.MATHML],[K.MS,bt.MATHML],[K.MTEXT,bt.MATHML],[K.DESC,bt.SVG],[K.FOREIGN_OBJECT,bt.SVG],[K.TITLE,bt.SVG]]),mYe=[K.H1,K.H2,K.H3,K.H4,K.H5,K.H6],gYe=[K.TR,K.TEMPLATE,K.HTML],yYe=[K.TBODY,K.TFOOT,K.THEAD,K.TEMPLATE,K.HTML],vYe=[K.TABLE,K.TEMPLATE,K.HTML],bYe=[K.TD,K.TH];class xYe{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(t,n,r){this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=K.UNKNOWN,this.current=t}_indexOf(t){return this.items.lastIndexOf(t,this.stackTop)}_isInTemplate(){return this.currentTagId===K.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===bt.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(t,n){this.stackTop++,this.items[this.stackTop]=t,this.current=t,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(t,n,!0)}pop(){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!0)}replace(t,n){const r=this._indexOf(t);this.items[r]=n,r===this.stackTop&&(this.current=n)}insertAfter(t,n,r){const i=this._indexOf(t)+1;this.items.splice(i,0,n),this.tagIDs.splice(i,0,r),this.stackTop++,i===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,i===this.stackTop)}popUntilTagNamePopped(t){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(t,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==bt.HTML);this.shortenToLength(n<0?0:n)}shortenToLength(t){for(;this.stackTop>=t;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<t)}}popUntilElementPopped(t){const n=this._indexOf(t);this.shortenToLength(n<0?0:n)}popUntilPopped(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r<0?0:r)}popUntilNumberedHeaderPopped(){this.popUntilPopped(mYe,bt.HTML)}popUntilTableCellPopped(){this.popUntilPopped(bYe,bt.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(t,n){for(let r=this.stackTop;r>=0;r--)if(t.includes(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}clearBackTo(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo(vYe,bt.HTML)}clearBackToTableBodyContext(){this.clearBackTo(yYe,bt.HTML)}clearBackToTableRowContext(){this.clearBackTo(gYe,bt.HTML)}remove(t){const n=this._indexOf(t);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===K.BODY?this.items[1]:null}contains(t){return this._indexOf(t)>-1}getCommonAncestor(t){const n=this._indexOf(t)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===K.HTML}hasInScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===bt.HTML)return!0;if(h6.get(r)===i)return!1}return!0}hasNumberedHeaderInScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t],r=this.treeAdapter.getNamespaceURI(this.items[t]);if(Tve(n)&&r===bt.HTML)return!0;if(h6.get(n)===r)return!1}return!0}hasInListItemScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===bt.HTML)return!0;if((r===K.UL||r===K.OL)&&i===bt.HTML||h6.get(r)===i)return!1}return!0}hasInButtonScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===bt.HTML)return!0;if(r===K.BUTTON&&i===bt.HTML||h6.get(r)===i)return!1}return!0}hasInTableScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===bt.HTML){if(r===t)return!0;if(r===K.TABLE||r===K.TEMPLATE||r===K.HTML)return!1}}return!0}hasTableBodyContextInTableScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t];if(this.treeAdapter.getNamespaceURI(this.items[t])===bt.HTML){if(n===K.TBODY||n===K.THEAD||n===K.TFOOT)return!0;if(n===K.TABLE||n===K.HTML)return!1}}return!0}hasInSelectScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===bt.HTML){if(r===t)return!0;if(r!==K.OPTION&&r!==K.OPTGROUP)return!1}}return!0}generateImpliedEndTags(){for(;Rve.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;Hre.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(t){for(;this.currentTagId!==t&&Hre.has(this.currentTagId);)this.pop()}}const zF=3;var n0;(function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"})(n0=n0||(n0={}));const qre={type:n0.Marker};class _Ye{constructor(t){this.treeAdapter=t,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(t,n){const r=[],i=n.length,s=this.treeAdapter.getTagName(t),o=this.treeAdapter.getNamespaceURI(t);for(let a=0;a<this.entries.length;a++){const u=this.entries[a];if(u.type===n0.Marker)break;const{element:l}=u;if(this.treeAdapter.getTagName(l)===s&&this.treeAdapter.getNamespaceURI(l)===o){const c=this.treeAdapter.getAttrList(l);c.length===i&&r.push({idx:a,attrs:c})}}return r}_ensureNoahArkCondition(t){if(this.entries.length<zF)return;const n=this.treeAdapter.getAttrList(t),r=this._getNoahArkConditionCandidates(t,n);if(r.length<zF)return;const i=new Map(n.map(o=>[o.name,o.value]));let s=0;for(let o=0;o<r.length;o++){const a=r[o];a.attrs.every(u=>i.get(u.name)===u.value)&&(s+=1,s>=zF&&this.entries.splice(a.idx,1))}}insertMarker(){this.entries.unshift(qre)}pushElement(t,n){this._ensureNoahArkCondition(t),this.entries.unshift({type:n0.Element,element:t,token:n})}insertElementAfterBookmark(t,n){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:n0.Element,element:t,token:n})}removeEntry(t){const n=this.entries.indexOf(t);n>=0&&this.entries.splice(n,1)}clearToLastMarker(){const t=this.entries.indexOf(qre);t>=0?this.entries.splice(0,t+1):this.entries.length=0}getElementEntryInScopeWithTagName(t){const n=this.entries.find(r=>r.type===n0.Marker||this.treeAdapter.getTagName(r.element)===t);return n&&n.type===n0.Element?n:null}getElementEntry(t){return this.entries.find(n=>n.type===n0.Element&&n.element===t)}}function Wre(e){return{nodeName:"#text",value:e,parentNode:null}}const mE={createDocument(){return{nodeName:"#document",mode:Ud.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(e,t,n){return{nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}},createCommentNode(e){return{nodeName:"#comment",data:e,parentNode:null}},appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,n){const r=e.childNodes.indexOf(n);e.childNodes.splice(r,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent(e){return e.content},setDocumentType(e,t,n,r){const i=e.childNodes.find(s=>s.nodeName==="#documentType");if(i)i.name=t,i.publicId=n,i.systemId=r;else{const s={nodeName:"#documentType",name:t,publicId:n,systemId:r,parentNode:null};mE.appendChild(e,s)}},setDocumentMode(e,t){e.mode=t},getDocumentMode(e){return e.mode},detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const n=e.childNodes[e.childNodes.length-1];if(mE.isTextNode(n)){n.value+=t;return}}mE.appendChild(e,Wre(t))},insertTextBefore(e,t,n){const r=e.childNodes[e.childNodes.indexOf(n)-1];r&&mE.isTextNode(r)?r.value+=t:mE.insertBefore(e,Wre(t),n)},adoptAttributes(e,t){const n=new Set(e.attrs.map(r=>r.name));for(let r=0;r<t.length;r++)n.has(t[r].name)||e.attrs.push(t[r])},getFirstChild(e){return e.childNodes[0]},getChildNodes(e){return e.childNodes},getParentNode(e){return e.parentNode},getAttrList(e){return e.attrs},getTagName(e){return e.tagName},getNamespaceURI(e){return e.namespaceURI},getTextNodeContent(e){return e.value},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){return e.name},getDocumentTypeNodePublicId(e){return e.publicId},getDocumentTypeNodeSystemId(e){return e.systemId},isTextNode(e){return e.nodeName==="#text"},isCommentNode(e){return e.nodeName==="#comment"},isDocumentTypeNode(e){return e.nodeName==="#documentType"},isElementNode(e){return Object.prototype.hasOwnProperty.call(e,"tagName")},setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},Ive="html",wYe="about:legacy-compat",EYe="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",Pve=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],SYe=[...Pve,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],TYe=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),Nve=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],CYe=[...Nve,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function Gre(e,t){return t.some(n=>e.startsWith(n))}function AYe(e){return e.name===Ive&&e.publicId===null&&(e.systemId===null||e.systemId===wYe)}function kYe(e){if(e.name!==Ive)return Ud.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===EYe)return Ud.QUIRKS;let{publicId:n}=e;if(n!==null){if(n=n.toLowerCase(),TYe.has(n))return Ud.QUIRKS;let r=t===null?SYe:Pve;if(Gre(n,r))return Ud.QUIRKS;if(r=t===null?Nve:CYe,Gre(n,r))return Ud.LIMITED_QUIRKS}return Ud.NO_QUIRKS}const Yre={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},RYe="definitionurl",IYe="definitionURL",PYe=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),NYe=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:bt.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:bt.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:bt.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:bt.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:bt.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:bt.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:bt.XLINK}],["xml:base",{prefix:"xml",name:"base",namespace:bt.XML}],["xml:lang",{prefix:"xml",name:"lang",namespace:bt.XML}],["xml:space",{prefix:"xml",name:"space",namespace:bt.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:bt.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:bt.XMLNS}]]),DYe=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),OYe=new Set([K.B,K.BIG,K.BLOCKQUOTE,K.BODY,K.BR,K.CENTER,K.CODE,K.DD,K.DIV,K.DL,K.DT,K.EM,K.EMBED,K.H1,K.H2,K.H3,K.H4,K.H5,K.H6,K.HEAD,K.HR,K.I,K.IMG,K.LI,K.LISTING,K.MENU,K.META,K.NOBR,K.OL,K.P,K.PRE,K.RUBY,K.S,K.SMALL,K.SPAN,K.STRONG,K.STRIKE,K.SUB,K.SUP,K.TABLE,K.TT,K.U,K.UL,K.VAR]);function MYe(e){const t=e.tagID;return t===K.FONT&&e.attrs.some(({name:r})=>r===Gv.COLOR||r===Gv.SIZE||r===Gv.FACE)||OYe.has(t)}function Dve(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===RYe){e.attrs[t].name=IYe;break}}function Ove(e){for(let t=0;t<e.attrs.length;t++){const n=PYe.get(e.attrs[t].name);n!=null&&(e.attrs[t].name=n)}}function SG(e){for(let t=0;t<e.attrs.length;t++){const n=NYe.get(e.attrs[t].name);n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}}function LYe(e){const t=DYe.get(e.tagName);t!=null&&(e.tagName=t,e.tagID=IT(e.tagName))}function FYe(e,t){return t===bt.MATHML&&(e===K.MI||e===K.MO||e===K.MN||e===K.MS||e===K.MTEXT)}function $Ye(e,t,n){if(t===bt.MATHML&&e===K.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===Gv.ENCODING){const i=n[r].value.toLowerCase();return i===Yre.TEXT_HTML||i===Yre.APPLICATION_XML}}return t===bt.SVG&&(e===K.FOREIGN_OBJECT||e===K.DESC||e===K.TITLE)}function BYe(e,t,n,r){return(!r||r===bt.HTML)&&$Ye(e,t,n)||(!r||r===bt.MATHML)&&FYe(e,t)}const jYe="hidden",UYe=8,zYe=3;var Pe;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(Pe||(Pe={}));const VYe={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},Mve=new Set([K.TABLE,K.TBODY,K.TFOOT,K.THEAD,K.TR]),Kre={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:mE,onParseError:null};class Xre{constructor(t,n,r=null,i=null){this.fragmentContext=r,this.scriptHandler=i,this.currentToken=null,this.stopped=!1,this.insertionMode=Pe.INITIAL,this.originalInsertionMode=Pe.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...Kre,...t},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new pYe(this.options,this),this.activeFormattingElements=new _Ye(this.treeAdapter),this.fragmentContextID=r?IT(this.treeAdapter.getTagName(r)):K.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new xYe(this.document,this.treeAdapter,this)}static parse(t,n){const r=new this(n);return r.tokenizer.write(t,!0),r.document}static getFragmentParser(t,n){const r={...Kre,...n};t??(t=r.treeAdapter.createElement(Ze.TEMPLATE,bt.HTML,[]));const i=r.treeAdapter.createElement("documentmock",bt.HTML,[]),s=new this(r,i,t);return s.fragmentContextID===K.TEMPLATE&&s.tmplInsertionModeStack.unshift(Pe.IN_TEMPLATE),s._initTokenizerForFragmentParsing(),s._insertFakeRootElement(),s._resetInsertionMode(),s._findFormInFragmentContext(),s}getFragment(){const t=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(t,n),n}_err(t,n,r){var i;if(!this.onParseError)return;const s=(i=t.location)!==null&&i!==void 0?i:VYe,o={code:n,startLine:s.startLine,startCol:s.startCol,startOffset:s.startOffset,endLine:r?s.startLine:s.endLine,endCol:r?s.startCol:s.endCol,endOffset:r?s.startOffset:s.endOffset};this.onParseError(o)}onItemPush(t,n,r){var i,s;(s=(i=this.treeAdapter).onItemPush)===null||s===void 0||s.call(i,t),r&&this.openElements.stackTop>0&&this._setContextModes(t,n)}onItemPop(t,n){var r,i;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(t,this.currentToken),(i=(r=this.treeAdapter).onItemPop)===null||i===void 0||i.call(r,t,this.openElements.current),n){let s,o;this.openElements.stackTop===0&&this.fragmentContext?(s=this.fragmentContext,o=this.fragmentContextID):{current:s,currentTagId:o}=this.openElements,this._setContextModes(s,o)}}_setContextModes(t,n){const r=t===this.document||this.treeAdapter.getNamespaceURI(t)===bt.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&!this._isIntegrationPoint(n,t)}_switchToTextParsing(t,n){this._insertElement(t,bt.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=Pe.TEXT}switchToPlaintextParsing(){this.insertionMode=Pe.TEXT,this.originalInsertionMode=Pe.IN_BODY,this.tokenizer.state=ga.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let t=this.fragmentContext;for(;t;){if(this.treeAdapter.getTagName(t)===Ze.FORM){this.formElement=t;break}t=this.treeAdapter.getParentNode(t)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==bt.HTML))switch(this.fragmentContextID){case K.TITLE:case K.TEXTAREA:{this.tokenizer.state=ga.RCDATA;break}case K.STYLE:case K.XMP:case K.IFRAME:case K.NOEMBED:case K.NOFRAMES:case K.NOSCRIPT:{this.tokenizer.state=ga.RAWTEXT;break}case K.SCRIPT:{this.tokenizer.state=ga.SCRIPT_DATA;break}case K.PLAINTEXT:{this.tokenizer.state=ga.PLAINTEXT;break}}}_setDocumentType(t){const n=t.name||"",r=t.publicId||"",i=t.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,i),t.location){const o=this.treeAdapter.getChildNodes(this.document).find(a=>this.treeAdapter.isDocumentTypeNode(a));o&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}}_attachElementToTree(t,n){if(this.options.sourceCodeLocationInfo){const r=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(t,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(t);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r,t)}}_appendElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location)}_insertElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location),this.openElements.push(r,t.tagID)}_insertFakeElement(t,n){const r=this.treeAdapter.createElement(t,bt.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}_insertTemplate(t){const n=this.treeAdapter.createElement(t.tagName,bt.HTML,t.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,t.location),this.openElements.push(n,t.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const t=this.treeAdapter.createElement(Ze.HTML,bt.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(t,null),this.treeAdapter.appendChild(this.openElements.current,t),this.openElements.push(t,K.HTML)}_appendCommentNode(t,n){const r=this.treeAdapter.createCommentNode(t.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,t.location)}_insertCharacters(t){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,t.chars,r):this.treeAdapter.insertText(n,t.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,t.chars)),!t.location)return;const i=this.treeAdapter.getChildNodes(n),s=r?i.lastIndexOf(r):i.length,o=i[s-1];if(this.treeAdapter.getNodeSourceCodeLocation(o)){const{endLine:u,endCol:l,endOffset:c}=t.location;this.treeAdapter.updateNodeSourceCodeLocation(o,{endLine:u,endCol:l,endOffset:c})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}_adoptNodes(t,n){for(let r=this.treeAdapter.getFirstChild(t);r;r=this.treeAdapter.getFirstChild(t))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_setEndLocation(t,n){if(this.treeAdapter.getNodeSourceCodeLocation(t)&&n.location){const r=n.location,i=this.treeAdapter.getTagName(t),s=n.type===Ur.END_TAG&&i===n.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(t,s)}}shouldProcessStartTagTokenInForeignContent(t){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,t.tagID===K.SVG&&this.treeAdapter.getTagName(n)===Ze.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===bt.MATHML?!1:this.tokenizer.inForeignNode||(t.tagID===K.MGLYPH||t.tagID===K.MALIGNMARK)&&!this._isIntegrationPoint(r,n,bt.HTML)}_processToken(t){switch(t.type){case Ur.CHARACTER:{this.onCharacter(t);break}case Ur.NULL_CHARACTER:{this.onNullCharacter(t);break}case Ur.COMMENT:{this.onComment(t);break}case Ur.DOCTYPE:{this.onDoctype(t);break}case Ur.START_TAG:{this._processStartTag(t);break}case Ur.END_TAG:{this.onEndTag(t);break}case Ur.EOF:{this.onEof(t);break}case Ur.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(t);break}}}_isIntegrationPoint(t,n,r){const i=this.treeAdapter.getNamespaceURI(n),s=this.treeAdapter.getAttrList(n);return BYe(t,i,s,r)}_reconstructActiveFormattingElements(){const t=this.activeFormattingElements.entries.length;if(t){const n=this.activeFormattingElements.entries.findIndex(i=>i.type===n0.Marker||this.openElements.contains(i.element)),r=n<0?t-1:n-1;for(let i=r;i>=0;i--){const s=this.activeFormattingElements.entries[i];this._insertElement(s.token,this.treeAdapter.getNamespaceURI(s.element)),s.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=Pe.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(K.P),this.openElements.popUntilTagNamePopped(K.P)}_resetInsertionMode(){for(let t=this.openElements.stackTop;t>=0;t--)switch(t===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[t]){case K.TR:{this.insertionMode=Pe.IN_ROW;return}case K.TBODY:case K.THEAD:case K.TFOOT:{this.insertionMode=Pe.IN_TABLE_BODY;return}case K.CAPTION:{this.insertionMode=Pe.IN_CAPTION;return}case K.COLGROUP:{this.insertionMode=Pe.IN_COLUMN_GROUP;return}case K.TABLE:{this.insertionMode=Pe.IN_TABLE;return}case K.BODY:{this.insertionMode=Pe.IN_BODY;return}case K.FRAMESET:{this.insertionMode=Pe.IN_FRAMESET;return}case K.SELECT:{this._resetInsertionModeForSelect(t);return}case K.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case K.HTML:{this.insertionMode=this.headElement?Pe.AFTER_HEAD:Pe.BEFORE_HEAD;return}case K.TD:case K.TH:{if(t>0){this.insertionMode=Pe.IN_CELL;return}break}case K.HEAD:{if(t>0){this.insertionMode=Pe.IN_HEAD;return}break}}this.insertionMode=Pe.IN_BODY}_resetInsertionModeForSelect(t){if(t>0)for(let n=t-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===K.TEMPLATE)break;if(r===K.TABLE){this.insertionMode=Pe.IN_SELECT_IN_TABLE;return}}this.insertionMode=Pe.IN_SELECT}_isElementCausesFosterParenting(t){return Mve.has(t)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let t=this.openElements.stackTop;t>=0;t--){const n=this.openElements.items[t];switch(this.openElements.tagIDs[t]){case K.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===bt.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case K.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[t-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(t){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,t,n.beforeElement):this.treeAdapter.appendChild(n.parent,t)}_isSpecialElement(t,n){const r=this.treeAdapter.getNamespaceURI(t);return lYe[r].has(n)}onCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){bXe(this,t);return}switch(this.insertionMode){case Pe.INITIAL:{KC(this,t);break}case Pe.BEFORE_HTML:{dk(this,t);break}case Pe.BEFORE_HEAD:{hk(this,t);break}case Pe.IN_HEAD:{pk(this,t);break}case Pe.IN_HEAD_NO_SCRIPT:{mk(this,t);break}case Pe.AFTER_HEAD:{gk(this,t);break}case Pe.IN_BODY:case Pe.IN_CAPTION:case Pe.IN_CELL:case Pe.IN_TEMPLATE:{Fve(this,t);break}case Pe.TEXT:case Pe.IN_SELECT:case Pe.IN_SELECT_IN_TABLE:{this._insertCharacters(t);break}case Pe.IN_TABLE:case Pe.IN_TABLE_BODY:case Pe.IN_ROW:{VF(this,t);break}case Pe.IN_TABLE_TEXT:{Vve(this,t);break}case Pe.IN_COLUMN_GROUP:{fN(this,t);break}case Pe.AFTER_BODY:{dN(this,t);break}case Pe.AFTER_AFTER_BODY:{SP(this,t);break}}}onNullCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){vXe(this,t);return}switch(this.insertionMode){case Pe.INITIAL:{KC(this,t);break}case Pe.BEFORE_HTML:{dk(this,t);break}case Pe.BEFORE_HEAD:{hk(this,t);break}case Pe.IN_HEAD:{pk(this,t);break}case Pe.IN_HEAD_NO_SCRIPT:{mk(this,t);break}case Pe.AFTER_HEAD:{gk(this,t);break}case Pe.TEXT:{this._insertCharacters(t);break}case Pe.IN_TABLE:case Pe.IN_TABLE_BODY:case Pe.IN_ROW:{VF(this,t);break}case Pe.IN_COLUMN_GROUP:{fN(this,t);break}case Pe.AFTER_BODY:{dN(this,t);break}case Pe.AFTER_AFTER_BODY:{SP(this,t);break}}}onComment(t){if(this.skipNextNewLine=!1,this.currentNotInHTML){kU(this,t);return}switch(this.insertionMode){case Pe.INITIAL:case Pe.BEFORE_HTML:case Pe.BEFORE_HEAD:case Pe.IN_HEAD:case Pe.IN_HEAD_NO_SCRIPT:case Pe.AFTER_HEAD:case Pe.IN_BODY:case Pe.IN_TABLE:case Pe.IN_CAPTION:case Pe.IN_COLUMN_GROUP:case Pe.IN_TABLE_BODY:case Pe.IN_ROW:case Pe.IN_CELL:case Pe.IN_SELECT:case Pe.IN_SELECT_IN_TABLE:case Pe.IN_TEMPLATE:case Pe.IN_FRAMESET:case Pe.AFTER_FRAMESET:{kU(this,t);break}case Pe.IN_TABLE_TEXT:{XC(this,t);break}case Pe.AFTER_BODY:{XYe(this,t);break}case Pe.AFTER_AFTER_BODY:case Pe.AFTER_AFTER_FRAMESET:{QYe(this,t);break}}}onDoctype(t){switch(this.skipNextNewLine=!1,this.insertionMode){case Pe.INITIAL:{JYe(this,t);break}case Pe.BEFORE_HEAD:case Pe.IN_HEAD:case Pe.IN_HEAD_NO_SCRIPT:case Pe.AFTER_HEAD:{this._err(t,ft.misplacedDoctype);break}case Pe.IN_TABLE_TEXT:{XC(this,t);break}}}onStartTag(t){this.skipNextNewLine=!1,this.currentToken=t,this._processStartTag(t),t.selfClosing&&!t.ackSelfClosing&&this._err(t,ft.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(t){this.shouldProcessStartTagTokenInForeignContent(t)?xXe(this,t):this._startTagOutsideForeignContent(t)}_startTagOutsideForeignContent(t){switch(this.insertionMode){case Pe.INITIAL:{KC(this,t);break}case Pe.BEFORE_HTML:{ZYe(this,t);break}case Pe.BEFORE_HEAD:{tKe(this,t);break}case Pe.IN_HEAD:{L0(this,t);break}case Pe.IN_HEAD_NO_SCRIPT:{iKe(this,t);break}case Pe.AFTER_HEAD:{oKe(this,t);break}case Pe.IN_BODY:{mc(this,t);break}case Pe.IN_TABLE:{mS(this,t);break}case Pe.IN_TABLE_TEXT:{XC(this,t);break}case Pe.IN_CAPTION:{nXe(this,t);break}case Pe.IN_COLUMN_GROUP:{AG(this,t);break}case Pe.IN_TABLE_BODY:{b9(this,t);break}case Pe.IN_ROW:{x9(this,t);break}case Pe.IN_CELL:{sXe(this,t);break}case Pe.IN_SELECT:{Wve(this,t);break}case Pe.IN_SELECT_IN_TABLE:{aXe(this,t);break}case Pe.IN_TEMPLATE:{lXe(this,t);break}case Pe.AFTER_BODY:{fXe(this,t);break}case Pe.IN_FRAMESET:{dXe(this,t);break}case Pe.AFTER_FRAMESET:{pXe(this,t);break}case Pe.AFTER_AFTER_BODY:{gXe(this,t);break}case Pe.AFTER_AFTER_FRAMESET:{yXe(this,t);break}}}onEndTag(t){this.skipNextNewLine=!1,this.currentToken=t,this.currentNotInHTML?_Xe(this,t):this._endTagOutsideForeignContent(t)}_endTagOutsideForeignContent(t){switch(this.insertionMode){case Pe.INITIAL:{KC(this,t);break}case Pe.BEFORE_HTML:{eKe(this,t);break}case Pe.BEFORE_HEAD:{nKe(this,t);break}case Pe.IN_HEAD:{rKe(this,t);break}case Pe.IN_HEAD_NO_SCRIPT:{sKe(this,t);break}case Pe.AFTER_HEAD:{aKe(this,t);break}case Pe.IN_BODY:{v9(this,t);break}case Pe.TEXT:{WKe(this,t);break}case Pe.IN_TABLE:{Xk(this,t);break}case Pe.IN_TABLE_TEXT:{XC(this,t);break}case Pe.IN_CAPTION:{rXe(this,t);break}case Pe.IN_COLUMN_GROUP:{iXe(this,t);break}case Pe.IN_TABLE_BODY:{RU(this,t);break}case Pe.IN_ROW:{qve(this,t);break}case Pe.IN_CELL:{oXe(this,t);break}case Pe.IN_SELECT:{Gve(this,t);break}case Pe.IN_SELECT_IN_TABLE:{uXe(this,t);break}case Pe.IN_TEMPLATE:{cXe(this,t);break}case Pe.AFTER_BODY:{Kve(this,t);break}case Pe.IN_FRAMESET:{hXe(this,t);break}case Pe.AFTER_FRAMESET:{mXe(this,t);break}case Pe.AFTER_AFTER_BODY:{SP(this,t);break}}}onEof(t){switch(this.insertionMode){case Pe.INITIAL:{KC(this,t);break}case Pe.BEFORE_HTML:{dk(this,t);break}case Pe.BEFORE_HEAD:{hk(this,t);break}case Pe.IN_HEAD:{pk(this,t);break}case Pe.IN_HEAD_NO_SCRIPT:{mk(this,t);break}case Pe.AFTER_HEAD:{gk(this,t);break}case Pe.IN_BODY:case Pe.IN_TABLE:case Pe.IN_CAPTION:case Pe.IN_COLUMN_GROUP:case Pe.IN_TABLE_BODY:case Pe.IN_ROW:case Pe.IN_CELL:case Pe.IN_SELECT:case Pe.IN_SELECT_IN_TABLE:{Uve(this,t);break}case Pe.TEXT:{GKe(this,t);break}case Pe.IN_TABLE_TEXT:{XC(this,t);break}case Pe.IN_TEMPLATE:{Yve(this,t);break}case Pe.AFTER_BODY:case Pe.IN_FRAMESET:case Pe.AFTER_FRAMESET:case Pe.AFTER_AFTER_BODY:case Pe.AFTER_AFTER_FRAMESET:{CG(this,t);break}}}onWhitespaceCharacter(t){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.chars.charCodeAt(0)===we.LINE_FEED)){if(t.chars.length===1)return;t.chars=t.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(t);return}switch(this.insertionMode){case Pe.IN_HEAD:case Pe.IN_HEAD_NO_SCRIPT:case Pe.AFTER_HEAD:case Pe.TEXT:case Pe.IN_COLUMN_GROUP:case Pe.IN_SELECT:case Pe.IN_SELECT_IN_TABLE:case Pe.IN_FRAMESET:case Pe.AFTER_FRAMESET:{this._insertCharacters(t);break}case Pe.IN_BODY:case Pe.IN_CAPTION:case Pe.IN_CELL:case Pe.IN_TEMPLATE:case Pe.AFTER_BODY:case Pe.AFTER_AFTER_BODY:case Pe.AFTER_AFTER_FRAMESET:{Lve(this,t);break}case Pe.IN_TABLE:case Pe.IN_TABLE_BODY:case Pe.IN_ROW:{VF(this,t);break}case Pe.IN_TABLE_TEXT:{zve(this,t);break}}}}function HYe(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):jve(e,t),n}function qYe(e,t){let n=null,r=e.openElements.stackTop;for(;r>=0;r--){const i=e.openElements.items[r];if(i===t.element)break;e._isSpecialElement(i,e.openElements.tagIDs[r])&&(n=i)}return n||(e.openElements.shortenToLength(r<0?0:r),e.activeFormattingElements.removeEntry(t)),n}function WYe(e,t,n){let r=t,i=e.openElements.getCommonAncestor(t);for(let s=0,o=i;o!==n;s++,o=i){i=e.openElements.getCommonAncestor(o);const a=e.activeFormattingElements.getElementEntry(o),u=a&&s>=zYe;!a||u?(u&&e.activeFormattingElements.removeEntry(a),e.openElements.remove(o)):(o=GYe(e,a),r===t&&(e.activeFormattingElements.bookmark=a),e.treeAdapter.detachNode(r),e.treeAdapter.appendChild(o,r),r=o)}return r}function GYe(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),r=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,r),t.element=r,r}function YYe(e,t,n){const r=e.treeAdapter.getTagName(t),i=IT(r);if(e._isElementCausesFosterParenting(i))e._fosterParentElement(n);else{const s=e.treeAdapter.getNamespaceURI(t);i===K.TEMPLATE&&s===bt.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function KYe(e,t,n){const r=e.treeAdapter.getNamespaceURI(n.element),{token:i}=n,s=e.treeAdapter.createElement(i.tagName,r,i.attrs);e._adoptNodes(t,s),e.treeAdapter.appendChild(t,s),e.activeFormattingElements.insertElementAfterBookmark(s,i),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,s,i.tagID)}function TG(e,t){for(let n=0;n<UYe;n++){const r=HYe(e,t);if(!r)break;const i=qYe(e,r);if(!i)break;e.activeFormattingElements.bookmark=r;const s=WYe(e,i,r.element),o=e.openElements.getCommonAncestor(r.element);e.treeAdapter.detachNode(s),o&&YYe(e,o,s),KYe(e,i,r)}}function kU(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function XYe(e,t){e._appendCommentNode(t,e.openElements.items[0])}function QYe(e,t){e._appendCommentNode(t,e.document)}function CG(e,t){if(e.stopped=!0,t.location){const n=e.fragmentContext?0:2;for(let r=e.openElements.stackTop;r>=n;r--)e._setEndLocation(e.openElements.items[r],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const r=e.openElements.items[0],i=e.treeAdapter.getNodeSourceCodeLocation(r);if(i&&!i.endTag&&(e._setEndLocation(r,t),e.openElements.stackTop>=1)){const s=e.openElements.items[1],o=e.treeAdapter.getNodeSourceCodeLocation(s);o&&!o.endTag&&e._setEndLocation(s,t)}}}}function JYe(e,t){e._setDocumentType(t);const n=t.forceQuirks?Ud.QUIRKS:kYe(t);AYe(t)||e._err(t,ft.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=Pe.BEFORE_HTML}function KC(e,t){e._err(t,ft.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,Ud.QUIRKS),e.insertionMode=Pe.BEFORE_HTML,e._processToken(t)}function ZYe(e,t){t.tagID===K.HTML?(e._insertElement(t,bt.HTML),e.insertionMode=Pe.BEFORE_HEAD):dk(e,t)}function eKe(e,t){const n=t.tagID;(n===K.HTML||n===K.HEAD||n===K.BODY||n===K.BR)&&dk(e,t)}function dk(e,t){e._insertFakeRootElement(),e.insertionMode=Pe.BEFORE_HEAD,e._processToken(t)}function tKe(e,t){switch(t.tagID){case K.HTML:{mc(e,t);break}case K.HEAD:{e._insertElement(t,bt.HTML),e.headElement=e.openElements.current,e.insertionMode=Pe.IN_HEAD;break}default:hk(e,t)}}function nKe(e,t){const n=t.tagID;n===K.HEAD||n===K.BODY||n===K.HTML||n===K.BR?hk(e,t):e._err(t,ft.endTagWithoutMatchingOpenElement)}function hk(e,t){e._insertFakeElement(Ze.HEAD,K.HEAD),e.headElement=e.openElements.current,e.insertionMode=Pe.IN_HEAD,e._processToken(t)}function L0(e,t){switch(t.tagID){case K.HTML:{mc(e,t);break}case K.BASE:case K.BASEFONT:case K.BGSOUND:case K.LINK:case K.META:{e._appendElement(t,bt.HTML),t.ackSelfClosing=!0;break}case K.TITLE:{e._switchToTextParsing(t,ga.RCDATA);break}case K.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(t,ga.RAWTEXT):(e._insertElement(t,bt.HTML),e.insertionMode=Pe.IN_HEAD_NO_SCRIPT);break}case K.NOFRAMES:case K.STYLE:{e._switchToTextParsing(t,ga.RAWTEXT);break}case K.SCRIPT:{e._switchToTextParsing(t,ga.SCRIPT_DATA);break}case K.TEMPLATE:{e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=Pe.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(Pe.IN_TEMPLATE);break}case K.HEAD:{e._err(t,ft.misplacedStartTagForHeadElement);break}default:pk(e,t)}}function rKe(e,t){switch(t.tagID){case K.HEAD:{e.openElements.pop(),e.insertionMode=Pe.AFTER_HEAD;break}case K.BODY:case K.BR:case K.HTML:{pk(e,t);break}case K.TEMPLATE:{Dw(e,t);break}default:e._err(t,ft.endTagWithoutMatchingOpenElement)}}function Dw(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==K.TEMPLATE&&e._err(t,ft.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(K.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,ft.endTagWithoutMatchingOpenElement)}function pk(e,t){e.openElements.pop(),e.insertionMode=Pe.AFTER_HEAD,e._processToken(t)}function iKe(e,t){switch(t.tagID){case K.HTML:{mc(e,t);break}case K.BASEFONT:case K.BGSOUND:case K.HEAD:case K.LINK:case K.META:case K.NOFRAMES:case K.STYLE:{L0(e,t);break}case K.NOSCRIPT:{e._err(t,ft.nestedNoscriptInHead);break}default:mk(e,t)}}function sKe(e,t){switch(t.tagID){case K.NOSCRIPT:{e.openElements.pop(),e.insertionMode=Pe.IN_HEAD;break}case K.BR:{mk(e,t);break}default:e._err(t,ft.endTagWithoutMatchingOpenElement)}}function mk(e,t){const n=t.type===Ur.EOF?ft.openElementsLeftAfterEof:ft.disallowedContentInNoscriptInHead;e._err(t,n),e.openElements.pop(),e.insertionMode=Pe.IN_HEAD,e._processToken(t)}function oKe(e,t){switch(t.tagID){case K.HTML:{mc(e,t);break}case K.BODY:{e._insertElement(t,bt.HTML),e.framesetOk=!1,e.insertionMode=Pe.IN_BODY;break}case K.FRAMESET:{e._insertElement(t,bt.HTML),e.insertionMode=Pe.IN_FRAMESET;break}case K.BASE:case K.BASEFONT:case K.BGSOUND:case K.LINK:case K.META:case K.NOFRAMES:case K.SCRIPT:case K.STYLE:case K.TEMPLATE:case K.TITLE:{e._err(t,ft.abandonedHeadElementChild),e.openElements.push(e.headElement,K.HEAD),L0(e,t),e.openElements.remove(e.headElement);break}case K.HEAD:{e._err(t,ft.misplacedStartTagForHeadElement);break}default:gk(e,t)}}function aKe(e,t){switch(t.tagID){case K.BODY:case K.HTML:case K.BR:{gk(e,t);break}case K.TEMPLATE:{Dw(e,t);break}default:e._err(t,ft.endTagWithoutMatchingOpenElement)}}function gk(e,t){e._insertFakeElement(Ze.BODY,K.BODY),e.insertionMode=Pe.IN_BODY,y9(e,t)}function y9(e,t){switch(t.type){case Ur.CHARACTER:{Fve(e,t);break}case Ur.WHITESPACE_CHARACTER:{Lve(e,t);break}case Ur.COMMENT:{kU(e,t);break}case Ur.START_TAG:{mc(e,t);break}case Ur.END_TAG:{v9(e,t);break}case Ur.EOF:{Uve(e,t);break}}}function Lve(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function Fve(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function uKe(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function lKe(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}function cKe(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,bt.HTML),e.insertionMode=Pe.IN_FRAMESET)}function fKe(e,t){e.openElements.hasInButtonScope(K.P)&&e._closePElement(),e._insertElement(t,bt.HTML)}function dKe(e,t){e.openElements.hasInButtonScope(K.P)&&e._closePElement(),Tve(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,bt.HTML)}function hKe(e,t){e.openElements.hasInButtonScope(K.P)&&e._closePElement(),e._insertElement(t,bt.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function pKe(e,t){const n=e.openElements.tmplCount>0;(!e.formElement||n)&&(e.openElements.hasInButtonScope(K.P)&&e._closePElement(),e._insertElement(t,bt.HTML),n||(e.formElement=e.openElements.current))}function mKe(e,t){e.framesetOk=!1;const n=t.tagID;for(let r=e.openElements.stackTop;r>=0;r--){const i=e.openElements.tagIDs[r];if(n===K.LI&&i===K.LI||(n===K.DD||n===K.DT)&&(i===K.DD||i===K.DT)){e.openElements.generateImpliedEndTagsWithExclusion(i),e.openElements.popUntilTagNamePopped(i);break}if(i!==K.ADDRESS&&i!==K.DIV&&i!==K.P&&e._isSpecialElement(e.openElements.items[r],i))break}e.openElements.hasInButtonScope(K.P)&&e._closePElement(),e._insertElement(t,bt.HTML)}function gKe(e,t){e.openElements.hasInButtonScope(K.P)&&e._closePElement(),e._insertElement(t,bt.HTML),e.tokenizer.state=ga.PLAINTEXT}function yKe(e,t){e.openElements.hasInScope(K.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(K.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,bt.HTML),e.framesetOk=!1}function vKe(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(Ze.A);n&&(TG(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,bt.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function bKe(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,bt.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function xKe(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(K.NOBR)&&(TG(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,bt.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function _Ke(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,bt.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function wKe(e,t){e.treeAdapter.getDocumentMode(e.document)!==Ud.QUIRKS&&e.openElements.hasInButtonScope(K.P)&&e._closePElement(),e._insertElement(t,bt.HTML),e.framesetOk=!1,e.insertionMode=Pe.IN_TABLE}function $ve(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,bt.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function Bve(e){const t=wve(e,Gv.TYPE);return t!=null&&t.toLowerCase()===jYe}function EKe(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,bt.HTML),Bve(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function SKe(e,t){e._appendElement(t,bt.HTML),t.ackSelfClosing=!0}function TKe(e,t){e.openElements.hasInButtonScope(K.P)&&e._closePElement(),e._appendElement(t,bt.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function CKe(e,t){t.tagName=Ze.IMG,t.tagID=K.IMG,$ve(e,t)}function AKe(e,t){e._insertElement(t,bt.HTML),e.skipNextNewLine=!0,e.tokenizer.state=ga.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=Pe.TEXT}function kKe(e,t){e.openElements.hasInButtonScope(K.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,ga.RAWTEXT)}function RKe(e,t){e.framesetOk=!1,e._switchToTextParsing(t,ga.RAWTEXT)}function Qre(e,t){e._switchToTextParsing(t,ga.RAWTEXT)}function IKe(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,bt.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===Pe.IN_TABLE||e.insertionMode===Pe.IN_CAPTION||e.insertionMode===Pe.IN_TABLE_BODY||e.insertionMode===Pe.IN_ROW||e.insertionMode===Pe.IN_CELL?Pe.IN_SELECT_IN_TABLE:Pe.IN_SELECT}function PKe(e,t){e.openElements.currentTagId===K.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,bt.HTML)}function NKe(e,t){e.openElements.hasInScope(K.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,bt.HTML)}function DKe(e,t){e.openElements.hasInScope(K.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(K.RTC),e._insertElement(t,bt.HTML)}function OKe(e,t){e._reconstructActiveFormattingElements(),Dve(t),SG(t),t.selfClosing?e._appendElement(t,bt.MATHML):e._insertElement(t,bt.MATHML),t.ackSelfClosing=!0}function MKe(e,t){e._reconstructActiveFormattingElements(),Ove(t),SG(t),t.selfClosing?e._appendElement(t,bt.SVG):e._insertElement(t,bt.SVG),t.ackSelfClosing=!0}function Jre(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,bt.HTML)}function mc(e,t){switch(t.tagID){case K.I:case K.S:case K.B:case K.U:case K.EM:case K.TT:case K.BIG:case K.CODE:case K.FONT:case K.SMALL:case K.STRIKE:case K.STRONG:{bKe(e,t);break}case K.A:{vKe(e,t);break}case K.H1:case K.H2:case K.H3:case K.H4:case K.H5:case K.H6:{dKe(e,t);break}case K.P:case K.DL:case K.OL:case K.UL:case K.DIV:case K.DIR:case K.NAV:case K.MAIN:case K.MENU:case K.ASIDE:case K.CENTER:case K.FIGURE:case K.FOOTER:case K.HEADER:case K.HGROUP:case K.DIALOG:case K.DETAILS:case K.ADDRESS:case K.ARTICLE:case K.SECTION:case K.SUMMARY:case K.FIELDSET:case K.BLOCKQUOTE:case K.FIGCAPTION:{fKe(e,t);break}case K.LI:case K.DD:case K.DT:{mKe(e,t);break}case K.BR:case K.IMG:case K.WBR:case K.AREA:case K.EMBED:case K.KEYGEN:{$ve(e,t);break}case K.HR:{TKe(e,t);break}case K.RB:case K.RTC:{NKe(e,t);break}case K.RT:case K.RP:{DKe(e,t);break}case K.PRE:case K.LISTING:{hKe(e,t);break}case K.XMP:{kKe(e,t);break}case K.SVG:{MKe(e,t);break}case K.HTML:{uKe(e,t);break}case K.BASE:case K.LINK:case K.META:case K.STYLE:case K.TITLE:case K.SCRIPT:case K.BGSOUND:case K.BASEFONT:case K.TEMPLATE:{L0(e,t);break}case K.BODY:{lKe(e,t);break}case K.FORM:{pKe(e,t);break}case K.NOBR:{xKe(e,t);break}case K.MATH:{OKe(e,t);break}case K.TABLE:{wKe(e,t);break}case K.INPUT:{EKe(e,t);break}case K.PARAM:case K.TRACK:case K.SOURCE:{SKe(e,t);break}case K.IMAGE:{CKe(e,t);break}case K.BUTTON:{yKe(e,t);break}case K.APPLET:case K.OBJECT:case K.MARQUEE:{_Ke(e,t);break}case K.IFRAME:{RKe(e,t);break}case K.SELECT:{IKe(e,t);break}case K.OPTION:case K.OPTGROUP:{PKe(e,t);break}case K.NOEMBED:{Qre(e,t);break}case K.FRAMESET:{cKe(e,t);break}case K.TEXTAREA:{AKe(e,t);break}case K.NOSCRIPT:{e.options.scriptingEnabled?Qre(e,t):Jre(e,t);break}case K.PLAINTEXT:{gKe(e,t);break}case K.COL:case K.TH:case K.TD:case K.TR:case K.HEAD:case K.FRAME:case K.TBODY:case K.TFOOT:case K.THEAD:case K.CAPTION:case K.COLGROUP:break;default:Jre(e,t)}}function LKe(e,t){if(e.openElements.hasInScope(K.BODY)&&(e.insertionMode=Pe.AFTER_BODY,e.options.sourceCodeLocationInfo)){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}function FKe(e,t){e.openElements.hasInScope(K.BODY)&&(e.insertionMode=Pe.AFTER_BODY,Kve(e,t))}function $Ke(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function BKe(e){const t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(K.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(K.FORM):n&&e.openElements.remove(n))}function jKe(e){e.openElements.hasInButtonScope(K.P)||e._insertFakeElement(Ze.P,K.P),e._closePElement()}function UKe(e){e.openElements.hasInListItemScope(K.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(K.LI),e.openElements.popUntilTagNamePopped(K.LI))}function zKe(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}function VKe(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function HKe(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function qKe(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(Ze.BR,K.BR),e.openElements.pop(),e.framesetOk=!1}function jve(e,t){const n=t.tagName,r=t.tagID;for(let i=e.openElements.stackTop;i>0;i--){const s=e.openElements.items[i],o=e.openElements.tagIDs[i];if(r===o&&(r!==K.UNKNOWN||e.treeAdapter.getTagName(s)===n)){e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.stackTop>=i&&e.openElements.shortenToLength(i);break}if(e._isSpecialElement(s,o))break}}function v9(e,t){switch(t.tagID){case K.A:case K.B:case K.I:case K.S:case K.U:case K.EM:case K.TT:case K.BIG:case K.CODE:case K.FONT:case K.NOBR:case K.SMALL:case K.STRIKE:case K.STRONG:{TG(e,t);break}case K.P:{jKe(e);break}case K.DL:case K.UL:case K.OL:case K.DIR:case K.DIV:case K.NAV:case K.PRE:case K.MAIN:case K.MENU:case K.ASIDE:case K.BUTTON:case K.CENTER:case K.FIGURE:case K.FOOTER:case K.HEADER:case K.HGROUP:case K.DIALOG:case K.ADDRESS:case K.ARTICLE:case K.DETAILS:case K.SECTION:case K.SUMMARY:case K.LISTING:case K.FIELDSET:case K.BLOCKQUOTE:case K.FIGCAPTION:{$Ke(e,t);break}case K.LI:{UKe(e);break}case K.DD:case K.DT:{zKe(e,t);break}case K.H1:case K.H2:case K.H3:case K.H4:case K.H5:case K.H6:{VKe(e);break}case K.BR:{qKe(e);break}case K.BODY:{LKe(e,t);break}case K.HTML:{FKe(e,t);break}case K.FORM:{BKe(e);break}case K.APPLET:case K.OBJECT:case K.MARQUEE:{HKe(e,t);break}case K.TEMPLATE:{Dw(e,t);break}default:jve(e,t)}}function Uve(e,t){e.tmplInsertionModeStack.length>0?Yve(e,t):CG(e,t)}function WKe(e,t){var n;t.tagID===K.SCRIPT&&((n=e.scriptHandler)===null||n===void 0||n.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function GKe(e,t){e._err(t,ft.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function VF(e,t){if(Mve.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=Pe.IN_TABLE_TEXT,t.type){case Ur.CHARACTER:{Vve(e,t);break}case Ur.WHITESPACE_CHARACTER:{zve(e,t);break}}else yR(e,t)}function YKe(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,bt.HTML),e.insertionMode=Pe.IN_CAPTION}function KKe(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,bt.HTML),e.insertionMode=Pe.IN_COLUMN_GROUP}function XKe(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(Ze.COLGROUP,K.COLGROUP),e.insertionMode=Pe.IN_COLUMN_GROUP,AG(e,t)}function QKe(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,bt.HTML),e.insertionMode=Pe.IN_TABLE_BODY}function JKe(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(Ze.TBODY,K.TBODY),e.insertionMode=Pe.IN_TABLE_BODY,b9(e,t)}function ZKe(e,t){e.openElements.hasInTableScope(K.TABLE)&&(e.openElements.popUntilTagNamePopped(K.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function eXe(e,t){Bve(t)?e._appendElement(t,bt.HTML):yR(e,t),t.ackSelfClosing=!0}function tXe(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,bt.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function mS(e,t){switch(t.tagID){case K.TD:case K.TH:case K.TR:{JKe(e,t);break}case K.STYLE:case K.SCRIPT:case K.TEMPLATE:{L0(e,t);break}case K.COL:{XKe(e,t);break}case K.FORM:{tXe(e,t);break}case K.TABLE:{ZKe(e,t);break}case K.TBODY:case K.TFOOT:case K.THEAD:{QKe(e,t);break}case K.INPUT:{eXe(e,t);break}case K.CAPTION:{YKe(e,t);break}case K.COLGROUP:{KKe(e,t);break}default:yR(e,t)}}function Xk(e,t){switch(t.tagID){case K.TABLE:{e.openElements.hasInTableScope(K.TABLE)&&(e.openElements.popUntilTagNamePopped(K.TABLE),e._resetInsertionMode());break}case K.TEMPLATE:{Dw(e,t);break}case K.BODY:case K.CAPTION:case K.COL:case K.COLGROUP:case K.HTML:case K.TBODY:case K.TD:case K.TFOOT:case K.TH:case K.THEAD:case K.TR:break;default:yR(e,t)}}function yR(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,y9(e,t),e.fosterParentingEnabled=n}function zve(e,t){e.pendingCharacterTokens.push(t)}function Vve(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function XC(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)yR(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const Hve=new Set([K.CAPTION,K.COL,K.COLGROUP,K.TBODY,K.TD,K.TFOOT,K.TH,K.THEAD,K.TR]);function nXe(e,t){const n=t.tagID;Hve.has(n)?e.openElements.hasInTableScope(K.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(K.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=Pe.IN_TABLE,mS(e,t)):mc(e,t)}function rXe(e,t){const n=t.tagID;switch(n){case K.CAPTION:case K.TABLE:{e.openElements.hasInTableScope(K.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(K.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=Pe.IN_TABLE,n===K.TABLE&&Xk(e,t));break}case K.BODY:case K.COL:case K.COLGROUP:case K.HTML:case K.TBODY:case K.TD:case K.TFOOT:case K.TH:case K.THEAD:case K.TR:break;default:v9(e,t)}}function AG(e,t){switch(t.tagID){case K.HTML:{mc(e,t);break}case K.COL:{e._appendElement(t,bt.HTML),t.ackSelfClosing=!0;break}case K.TEMPLATE:{L0(e,t);break}default:fN(e,t)}}function iXe(e,t){switch(t.tagID){case K.COLGROUP:{e.openElements.currentTagId===K.COLGROUP&&(e.openElements.pop(),e.insertionMode=Pe.IN_TABLE);break}case K.TEMPLATE:{Dw(e,t);break}case K.COL:break;default:fN(e,t)}}function fN(e,t){e.openElements.currentTagId===K.COLGROUP&&(e.openElements.pop(),e.insertionMode=Pe.IN_TABLE,e._processToken(t))}function b9(e,t){switch(t.tagID){case K.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(t,bt.HTML),e.insertionMode=Pe.IN_ROW;break}case K.TH:case K.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(Ze.TR,K.TR),e.insertionMode=Pe.IN_ROW,x9(e,t);break}case K.CAPTION:case K.COL:case K.COLGROUP:case K.TBODY:case K.TFOOT:case K.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=Pe.IN_TABLE,mS(e,t));break}default:mS(e,t)}}function RU(e,t){const n=t.tagID;switch(t.tagID){case K.TBODY:case K.TFOOT:case K.THEAD:{e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=Pe.IN_TABLE);break}case K.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=Pe.IN_TABLE,Xk(e,t));break}case K.BODY:case K.CAPTION:case K.COL:case K.COLGROUP:case K.HTML:case K.TD:case K.TH:case K.TR:break;default:Xk(e,t)}}function x9(e,t){switch(t.tagID){case K.TH:case K.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(t,bt.HTML),e.insertionMode=Pe.IN_CELL,e.activeFormattingElements.insertMarker();break}case K.CAPTION:case K.COL:case K.COLGROUP:case K.TBODY:case K.TFOOT:case K.THEAD:case K.TR:{e.openElements.hasInTableScope(K.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=Pe.IN_TABLE_BODY,b9(e,t));break}default:mS(e,t)}}function qve(e,t){switch(t.tagID){case K.TR:{e.openElements.hasInTableScope(K.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=Pe.IN_TABLE_BODY);break}case K.TABLE:{e.openElements.hasInTableScope(K.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=Pe.IN_TABLE_BODY,RU(e,t));break}case K.TBODY:case K.TFOOT:case K.THEAD:{(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(K.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=Pe.IN_TABLE_BODY,RU(e,t));break}case K.BODY:case K.CAPTION:case K.COL:case K.COLGROUP:case K.HTML:case K.TD:case K.TH:break;default:Xk(e,t)}}function sXe(e,t){const n=t.tagID;Hve.has(n)?(e.openElements.hasInTableScope(K.TD)||e.openElements.hasInTableScope(K.TH))&&(e._closeTableCell(),x9(e,t)):mc(e,t)}function oXe(e,t){const n=t.tagID;switch(n){case K.TD:case K.TH:{e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=Pe.IN_ROW);break}case K.TABLE:case K.TBODY:case K.TFOOT:case K.THEAD:case K.TR:{e.openElements.hasInTableScope(n)&&(e._closeTableCell(),qve(e,t));break}case K.BODY:case K.CAPTION:case K.COL:case K.COLGROUP:case K.HTML:break;default:v9(e,t)}}function Wve(e,t){switch(t.tagID){case K.HTML:{mc(e,t);break}case K.OPTION:{e.openElements.currentTagId===K.OPTION&&e.openElements.pop(),e._insertElement(t,bt.HTML);break}case K.OPTGROUP:{e.openElements.currentTagId===K.OPTION&&e.openElements.pop(),e.openElements.currentTagId===K.OPTGROUP&&e.openElements.pop(),e._insertElement(t,bt.HTML);break}case K.INPUT:case K.KEYGEN:case K.TEXTAREA:case K.SELECT:{e.openElements.hasInSelectScope(K.SELECT)&&(e.openElements.popUntilTagNamePopped(K.SELECT),e._resetInsertionMode(),t.tagID!==K.SELECT&&e._processStartTag(t));break}case K.SCRIPT:case K.TEMPLATE:{L0(e,t);break}}}function Gve(e,t){switch(t.tagID){case K.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===K.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===K.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===K.OPTGROUP&&e.openElements.pop();break}case K.OPTION:{e.openElements.currentTagId===K.OPTION&&e.openElements.pop();break}case K.SELECT:{e.openElements.hasInSelectScope(K.SELECT)&&(e.openElements.popUntilTagNamePopped(K.SELECT),e._resetInsertionMode());break}case K.TEMPLATE:{Dw(e,t);break}}}function aXe(e,t){const n=t.tagID;n===K.CAPTION||n===K.TABLE||n===K.TBODY||n===K.TFOOT||n===K.THEAD||n===K.TR||n===K.TD||n===K.TH?(e.openElements.popUntilTagNamePopped(K.SELECT),e._resetInsertionMode(),e._processStartTag(t)):Wve(e,t)}function uXe(e,t){const n=t.tagID;n===K.CAPTION||n===K.TABLE||n===K.TBODY||n===K.TFOOT||n===K.THEAD||n===K.TR||n===K.TD||n===K.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(K.SELECT),e._resetInsertionMode(),e.onEndTag(t)):Gve(e,t)}function lXe(e,t){switch(t.tagID){case K.BASE:case K.BASEFONT:case K.BGSOUND:case K.LINK:case K.META:case K.NOFRAMES:case K.SCRIPT:case K.STYLE:case K.TEMPLATE:case K.TITLE:{L0(e,t);break}case K.CAPTION:case K.COLGROUP:case K.TBODY:case K.TFOOT:case K.THEAD:{e.tmplInsertionModeStack[0]=Pe.IN_TABLE,e.insertionMode=Pe.IN_TABLE,mS(e,t);break}case K.COL:{e.tmplInsertionModeStack[0]=Pe.IN_COLUMN_GROUP,e.insertionMode=Pe.IN_COLUMN_GROUP,AG(e,t);break}case K.TR:{e.tmplInsertionModeStack[0]=Pe.IN_TABLE_BODY,e.insertionMode=Pe.IN_TABLE_BODY,b9(e,t);break}case K.TD:case K.TH:{e.tmplInsertionModeStack[0]=Pe.IN_ROW,e.insertionMode=Pe.IN_ROW,x9(e,t);break}default:e.tmplInsertionModeStack[0]=Pe.IN_BODY,e.insertionMode=Pe.IN_BODY,mc(e,t)}}function cXe(e,t){t.tagID===K.TEMPLATE&&Dw(e,t)}function Yve(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(K.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):CG(e,t)}function fXe(e,t){t.tagID===K.HTML?mc(e,t):dN(e,t)}function Kve(e,t){var n;if(t.tagID===K.HTML){if(e.fragmentContext||(e.insertionMode=Pe.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===K.HTML){e._setEndLocation(e.openElements.items[0],t);const r=e.openElements.items[1];r&&!(!((n=e.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&e._setEndLocation(r,t)}}else dN(e,t)}function dN(e,t){e.insertionMode=Pe.IN_BODY,y9(e,t)}function dXe(e,t){switch(t.tagID){case K.HTML:{mc(e,t);break}case K.FRAMESET:{e._insertElement(t,bt.HTML);break}case K.FRAME:{e._appendElement(t,bt.HTML),t.ackSelfClosing=!0;break}case K.NOFRAMES:{L0(e,t);break}}}function hXe(e,t){t.tagID===K.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==K.FRAMESET&&(e.insertionMode=Pe.AFTER_FRAMESET))}function pXe(e,t){switch(t.tagID){case K.HTML:{mc(e,t);break}case K.NOFRAMES:{L0(e,t);break}}}function mXe(e,t){t.tagID===K.HTML&&(e.insertionMode=Pe.AFTER_AFTER_FRAMESET)}function gXe(e,t){t.tagID===K.HTML?mc(e,t):SP(e,t)}function SP(e,t){e.insertionMode=Pe.IN_BODY,y9(e,t)}function yXe(e,t){switch(t.tagID){case K.HTML:{mc(e,t);break}case K.NOFRAMES:{L0(e,t);break}}}function vXe(e,t){t.chars=oo,e._insertCharacters(t)}function bXe(e,t){e._insertCharacters(t),e.framesetOk=!1}function Xve(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==bt.HTML&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function xXe(e,t){if(MYe(t))Xve(e),e._startTagOutsideForeignContent(t);else{const n=e._getAdjustedCurrentElement(),r=e.treeAdapter.getNamespaceURI(n);r===bt.MATHML?Dve(t):r===bt.SVG&&(LYe(t),Ove(t)),SG(t),t.selfClosing?e._appendElement(t,r):e._insertElement(t,r),t.ackSelfClosing=!0}}function _Xe(e,t){if(t.tagID===K.P||t.tagID===K.BR){Xve(e),e._endTagOutsideForeignContent(t);return}for(let n=e.openElements.stackTop;n>0;n--){const r=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(r)===bt.HTML){e._endTagOutsideForeignContent(t);break}const i=e.treeAdapter.getTagName(r);if(i.toLowerCase()===t.tagName){t.tagName=i,e.openElements.shortenToLength(n);break}}}Ze.AREA,Ze.BASE,Ze.BASEFONT,Ze.BGSOUND,Ze.BR,Ze.COL,Ze.EMBED,Ze.FRAME,Ze.HR,Ze.IMG,Ze.INPUT,Ze.KEYGEN,Ze.LINK,Ze.META,Ze.PARAM,Ze.SOURCE,Ze.TRACK,Ze.WBR;const wXe=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),Zre={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function Qve(e,t){const n=NXe(e),r=yve("type",{handlers:{root:EXe,element:SXe,text:TXe,comment:Zve,doctype:CXe,raw:kXe},unknown:RXe}),i={parser:n?new Xre(Zre):Xre.getFragmentParser(void 0,Zre),handle(a){r(a,i)},stitches:!1,options:t||{}};r(e,i),PT(i,xg());const s=n?i.parser.document:i.parser.getFragment(),o=MGe(s,{file:i.options.file});return i.stitches&&xG(o,"comment",function(a,u,l){const c=a;if(c.value.stitch&&l&&u!==void 0){const f=l.children;return f[u]=c.value.stitch,u}}),o.type==="root"&&o.children.length===1&&o.children[0].type===e.type?o.children[0]:o}function Jve(e,t){let n=-1;if(e)for(;++n<e.length;)t.handle(e[n])}function EXe(e,t){Jve(e.children,t)}function SXe(e,t){IXe(e,t),Jve(e.children,t),PXe(e,t)}function TXe(e,t){const n={type:Ur.CHARACTER,chars:e.value,location:vR(e)};PT(t,xg(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function CXe(e,t){const n={type:Ur.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:vR(e)};PT(t,xg(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function AXe(e,t){t.stitches=!0;const n=DXe(e);if("children"in e&&"children"in n){const r=Qve({type:"root",children:e.children},t.options);n.children=r.children}Zve({type:"comment",value:{stitch:n}},t)}function Zve(e,t){const n=e.value,r={type:Ur.COMMENT,data:n,location:vR(e)};PT(t,xg(e)),t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken)}function kXe(e,t){if(t.parser.tokenizer.preprocessor.html="",t.parser.tokenizer.preprocessor.pos=-1,t.parser.tokenizer.preprocessor.lastGapPos=-2,t.parser.tokenizer.preprocessor.gapStack=[],t.parser.tokenizer.preprocessor.skipNextNewLine=!1,t.parser.tokenizer.preprocessor.lastChunkWritten=!1,t.parser.tokenizer.preprocessor.endOfChunkHit=!1,t.parser.tokenizer.preprocessor.isEol=!1,ebe(t,xg(e)),t.parser.tokenizer.write(e.value,!1),t.parser.tokenizer._runParsingLoop(),t.parser.tokenizer.state===72||t.parser.tokenizer.state===78){t.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=t.parser.tokenizer._consume();t.parser.tokenizer._callState(n)}}function RXe(e,t){const n=e;if(t.options.passThrough&&t.options.passThrough.includes(n.type))AXe(n,t);else{let r="";throw wXe.has(n.type)&&(r=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+r)}}function PT(e,t){ebe(e,t);const n=e.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=e.parser.tokenizer.preprocessor.line,n.location.endCol=e.parser.tokenizer.preprocessor.col+1,n.location.endOffset=e.parser.tokenizer.preprocessor.offset+1,e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)),e.parser.tokenizer.paused=!1,e.parser.tokenizer.inLoop=!1,e.parser.tokenizer.active=!1,e.parser.tokenizer.returnState=ga.DATA,e.parser.tokenizer.charRefCode=-1,e.parser.tokenizer.consumedAfterSnapshot=-1,e.parser.tokenizer.currentLocation=null,e.parser.tokenizer.currentCharacterToken=null,e.parser.tokenizer.currentToken=null,e.parser.tokenizer.currentAttr={name:"",value:""}}function ebe(e,t){if(t&&t.offset!==void 0){const n={startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:-1,endCol:-1,endOffset:-1};e.parser.tokenizer.preprocessor.lineStartPos=-t.column+1,e.parser.tokenizer.preprocessor.droppedBufferSize=t.offset,e.parser.tokenizer.preprocessor.line=t.line,e.parser.tokenizer.currentLocation=n}}function IXe(e,t){const n=e.tagName.toLowerCase();if(t.parser.tokenizer.state===ga.PLAINTEXT)return;PT(t,xg(e));const r=t.parser.openElements.current;let i="namespaceURI"in r?r.namespaceURI:__.html;i===__.html&&n==="svg"&&(i=__.svg);const s=BGe({...e,children:[]},{space:i===__.svg?"svg":"html"}),o={type:Ur.START_TAG,tagName:n,tagID:IT(n),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in s?s.attrs:[],location:vR(e)};t.parser.currentToken=o,t.parser._processToken(t.parser.currentToken),t.parser.tokenizer.lastStartTagName=n}function PXe(e,t){const n=e.tagName.toLowerCase();if(!t.parser.tokenizer.inForeignNode&&GGe.includes(n)||t.parser.tokenizer.state===ga.PLAINTEXT)return;PT(t,h9(e));const r={type:Ur.END_TAG,tagName:n,tagID:IT(n),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:vR(e)};t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken),n===t.parser.tokenizer.lastStartTagName&&(t.parser.tokenizer.state===ga.RCDATA||t.parser.tokenizer.state===ga.RAWTEXT||t.parser.tokenizer.state===ga.SCRIPT_DATA)&&(t.parser.tokenizer.state=ga.DATA)}function NXe(e){const t=e.type==="root"?e.children[0]:e;return!!(t&&(t.type==="doctype"||t.type==="element"&&t.tagName.toLowerCase()==="html"))}function vR(e){const t=xg(e)||{line:void 0,column:void 0,offset:void 0},n=h9(e)||{line:void 0,column:void 0,offset:void 0};return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function DXe(e){return"children"in e?pS({...e,children:[]}):pS(e)}function OXe(e){return function(t,n){return Qve(t,{...e,file:n})}}function lc({text:e,required:t}){const n={img({node:i,width:s,height:o,...a}){return R.jsx(Hb,{...a,h:o,w:s,ref:void 0})},p({node:i,...s}){return R.jsx(Nt,{...s,pb:8,fw:"inherit",ref:void 0})},h1({node:i,...s}){return R.jsx(wo,{...s,order:1,...s,pb:12})},h2({node:i,...s}){return R.jsx(wo,{...s,order:2,...s,pb:12})},h3({node:i,...s}){return R.jsx(wo,{...s,order:3,...s,pb:12})},h4({node:i,...s}){return R.jsx(wo,{...s,order:4,...s,pb:12})},h5({node:i,...s}){return R.jsx(wo,{...s,order:5,...s,pb:12})},h6({node:i,...s}){return R.jsx(wo,{...s,order:6,...s,pb:12})},a({node:i,...s}){return R.jsx(kw,{...s,ref:void 0})},ul({node:i,...s}){return R.jsx(y0,{withPadding:!0,...s,pb:8})},ol({node:i,type:s,...o}){return R.jsx(y0,{type:"ordered",withPadding:!0,...o,pb:8})}};return R.jsx(wGe,{components:n,rehypePlugins:[OXe],children:e+(t?'<span style="color: #fa5252; margin-left: 4px">*</span>':"")})}function TP({issues:e,type:t}){const n=`
    ${t==="error"?"There was an issue loading the study config. Please check the following issues:":"There were some warnings while loading the study config. Please check the following warnings:"}

    ${e.map(r=>`- You have an error at ${r.instancePath||"root"}: ${r.message} - ${JSON.stringify(r.params)}  `).join(`
`)}
  `.replace(/\n\s+/g,`
`);return R.jsx(lc,{text:n})}const W2=14;function MXe({completed:e,inProgress:t,rejected:n}){return R.jsxs(An,{ml:4,gap:4,children:[R.jsx(Ys,{label:"Completed",children:R.jsx(g0,{variant:"light",color:"green",leftSection:R.jsx(f9,{width:W2,height:W2,style:{paddingTop:1}}),pb:1,children:e})}),R.jsx(Ys,{label:"In Progress",children:R.jsx(g0,{variant:"light",color:"orange",leftSection:R.jsx(A1e,{width:W2,height:W2,style:{paddingTop:1}}),pb:1,children:t})}),R.jsx(Ys,{label:"Rejected",children:R.jsx(g0,{variant:"light",color:"red",leftSection:R.jsx(hR,{width:W2,height:W2,style:{paddingTop:1}}),pb:1,children:n})})]})}const LXe={},FXe=Object.freeze(Object.defineProperty({__proto__:null,default:LXe},Symbol.toStringTag,{value:"Module"})),tbe=wNe(FXe);var HF,eie;function _9(){if(eie)return HF;eie=1;var e=tbe;function t(o,a){var u,l="",c=0,f=!0,d=0,h;function p(){return h=o.charAt(d),d++,h}for(p(),h==="-"&&(l="-",p());h>="0"&&h<="9";)f&&(h=="0"?c++:f=!1),l+=h,p();if(f&&c--,h===".")for(l+=".";p()&&h>="0"&&h<="9";)l+=h;if(h==="e"||h==="E")for(l+=h,p(),(h==="-"||h==="+")&&(l+=h,p());h>="0"&&h<="9";)l+=h,p();for(;h&&h<=" ";)p();if(a&&(h===","||h==="}"||h==="]"||h==="#"||h==="/"&&(o[d]==="/"||o[d]==="*"))&&(h=0),u=+l,!(h||c||!isFinite(u)))return u}function n(o,a){return Object.defineProperty&&Object.defineProperty(o,"__COMMENTS__",{enumerable:!1,writable:!0}),o.__COMMENTS__=a||{}}function r(o){Object.defineProperty(o,"__COMMENTS__",{value:void 0})}function i(o){return o.__COMMENTS__}function s(o){if(!o)return"";var a=o.split(`
`),u,l,c,f;for(c=0;c<a.length;c++)for(u=a[c],f=u.length,l=0;l<f;l++){var d=u[l];if(d==="#")break;if(d==="/"&&(u[l+1]==="/"||u[l+1]==="*")){u[l+1]==="*"&&(c=a.length);break}else if(d>" "){a[c]="# "+u;break}}return a.join(`
`)}return HF={EOL:e.EOL||`
`,tryParseNumber:t,createComment:n,removeComment:r,getComment:i,forceComment:s},HF}var qF,tie;function $Xe(){return tie||(tie=1,qF="3.2.1"),qF}var WF,nie;function kG(){if(nie)return WF;nie=1;function e(a,u){if(Object.prototype.toString.apply(a)!=="[object Array]"){if(a)throw new Error("dsf option must contain an array!");return n}else if(a.length===0)return n;var l=[];function c(f){return{}.toString.call(f)==="[object Function]"}return a.forEach(function(f){if(!f.name||!c(f.parse)||!c(f.stringify))throw new Error("extension does not match the DSF interface");l.push(function(){try{if(u=="parse")return f.parse.apply(null,arguments);if(u=="stringify"){var d=f.stringify.apply(null,arguments);if(d!==void 0&&(typeof d!="string"||d.length===0||d[0]==='"'||[].some.call(d,function(h){return r(h)})))throw new Error("value may not be empty, start with a quote or contain a punctuator character except colon: "+d);return d}else throw new Error("Invalid type")}catch(h){throw new Error("DSF-"+f.name+" failed; "+h.message)}})}),t.bind(null,l)}function t(a,u){if(a)for(var l=0;l<a.length;l++){var c=a[l](u);if(c!==void 0)return c}}function n(){}function r(a){return a==="{"||a==="}"||a==="["||a==="]"||a===","}function i(){return{name:"math",parse:function(a){switch(a){case"+inf":case"inf":case"+Inf":case"Inf":return 1/0;case"-inf":case"-Inf":return-1/0;case"nan":case"NaN":return NaN}},stringify:function(a){if(typeof a=="number"){if(1/a===-1/0)return"-0";if(a===1/0)return"Inf";if(a===-1/0)return"-Inf";if(isNaN(a))return"NaN"}}}}i.description="support for Inf/inf, -Inf/-inf, Nan/naN and -0";function s(a){var u=a&&a.out;return{name:"hex",parse:function(l){if(/^0x[0-9A-Fa-f]+$/.test(l))return parseInt(l,16)},stringify:function(l){if(u&&Number.isInteger(l))return"0x"+l.toString(16)}}}s.description="parse hexadecimal numbers prefixed with 0x";function o(){return{name:"date",parse:function(a){if(/^\d{4}-\d{2}-\d{2}$/.test(a)||/^\d{4}-\d{2}-\d{2}T\d{2}\:\d{2}\:\d{2}(?:.\d+)(?:Z|[+-]\d{2}:\d{2})$/.test(a)){var u=Date.parse(a);if(!isNaN(u))return new Date(u)}},stringify:function(a){if(Object.prototype.toString.call(a)==="[object Date]"){var u=a.toISOString();return u.indexOf("T00:00:00.000Z",u.length-14)!==-1?u.substr(0,10):u}}}}return o.description="support ISO dates",WF={loadDsf:e,std:{math:i,hex:s,date:o}},WF}var GF,rie;function BXe(){return rie||(rie=1,GF=function(e,t){var n=_9(),r=kG(),i,s,o,a={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},u,l;function c(){s=0,o=" "}function f(B){return B==="{"||B==="}"||B==="["||B==="]"||B===","||B===":"}function d(B){var U,G=0,ee=1;for(U=s-1;U>0&&i[U]!==`
`;U--,G++);for(;U>0;U--)i[U]===`
`&&ee++;throw new Error(B+" at line "+ee+","+G+" >>>"+i.substr(s-G,20)+" ...")}function h(){return o=i.charAt(s),s++,o}function p(B){return i.charAt(s+B)}function m(B){for(var U="",G=o;h();){if(o===G)return h(),B&&G==="'"&&o==="'"&&U.length===0?(h(),g()):U;if(o==="\\")if(h(),o==="u"){for(var ee=0,ne=0;ne<4;ne++){h();var ue=o.charCodeAt(0),X;o>="0"&&o<="9"?X=ue-48:o>="a"&&o<="f"?X=ue-97+10:o>="A"&&o<="F"?X=ue-65+10:d("Bad \\u char "+o),ee=ee*16+X}U+=String.fromCharCode(ee)}else if(typeof a[o]=="string")U+=a[o];else break;else o===`
`||o==="\r"?d("Bad string containing newline"):U+=o}d("Bad string")}function g(){for(var B="",U=0,G=0;;){var ee=p(-G-5);if(!ee||ee===`
`)break;G++}function ne(){for(var ue=G;o&&o<=" "&&o!==`
`&&ue-- >0;)h()}for(;o&&o<=" "&&o!==`
`;)h();for(o===`
`&&(h(),ne());;){if(!o)d("Bad multiline string");else if(o==="'"){if(U++,h(),U===3)return B.slice(-1)===`
`&&(B=B.slice(0,-1)),B;continue}else for(;U>0;)B+="'",U--;o===`
`?(B+=`
`,h(),ne()):(o!=="\r"&&(B+=o),h())}}function b(){if(o==='"'||o==="'")return m(!1);for(var B="",U=s,G=-1;;){if(o===":")return B?G>=0&&G!==B.length&&(s=U+G,d("Found whitespace in your key name (use quotes to include)")):d("Found ':' but no key name (for an empty key name use quotes)"),B;o<=" "?o?G<0&&(G=B.length):d("Found EOF while looking for a key name (check your syntax)"):f(o)?d("Found '"+o+"' where a key name was expected (check your syntax or use quotes if the key name includes {}[],: or whitespace)"):B+=o,h()}}function y(){for(;o;){for(;o&&o<=" ";)h();if(o==="#"||o==="/"&&p(0)==="/")for(;o&&o!==`
`;)h();else if(o==="/"&&p(0)==="*"){for(h(),h();o&&!(o==="*"&&p(0)==="/");)h();o&&(h(),h())}else break}}function x(){var B=o;for(f(o)&&d("Found a punctuator character '"+o+"' when expecting a quoteless string (check your syntax)");;){h();var U=o==="\r"||o===`
`||o==="";if(U||o===","||o==="}"||o==="]"||o==="#"||o==="/"&&(p(0)==="/"||p(0)==="*")){var G=B[0];switch(G){case"f":if(B.trim()==="false")return!1;break;case"n":if(B.trim()==="null")return null;break;case"t":if(B.trim()==="true")return!0;break;default:if(G==="-"||G>="0"&&G<="9"){var ee=n.tryParseNumber(B);if(ee!==void 0)return ee}}if(U){B=B.trim();var ne=l(B);return ne!==void 0?ne:B}}B+=o}}function w(B,U){var G;for(B--,G=s-2;G>B&&i[G]<=" "&&i[G]!==`
`;G--);i[G]===`
`&&G--,i[G]==="\r"&&G--;var ee=i.substr(B,G-B+1);for(G=0;G<ee.length;G++)if(ee[G]>" "){var ne=ee.indexOf(`
`);if(ne>=0){var ue=[ee.substr(0,ne),ee.substr(ne+1)];return U&&ue[0].trim().length===0&&ue.shift(),ue}else return[ee]}return[]}function T(B){function U(ee,ne){var ue,X,q,te;switch(typeof ee){case"string":ee.indexOf(ne)>=0&&(te=ee);break;case"object":if(Object.prototype.toString.apply(ee)==="[object Array]")for(ue=0,q=ee.length;ue<q;ue++)te=U(ee[ue],ne)||te;else for(X in ee)Object.prototype.hasOwnProperty.call(ee,X)&&(te=U(ee[X],ne)||te)}return te}function G(ee){var ne=U(B,ee);return ne?"found '"+ee+`' in a string value, your mistake could be with:
  > `+ne+`
  (unquoted strings contain everything up to the next line!)`:""}return G("}")||G("]")}function A(){var B=[],U,G,ee;try{if(u&&(U=n.createComment(B,{a:[]})),h(),G=s,y(),U&&(ee=w(G,!0).join(`
`)),o==="]")return h(),U&&(U.e=[ee]),B;for(;o;){if(B.push(I()),G=s,y(),o===","&&(h(),G=s,y()),U){var ne=w(G);U.a.push([ee||"",ne[0]||""]),ee=ne[1]}if(o==="]")return h(),U&&(U.a[U.a.length-1][1]+=ee||""),B;y()}d("End of input while parsing an array (missing ']')")}catch(ue){throw ue.hint=ue.hint||T(B),ue}}function k(B){var U="",G={},ee,ne,ue;try{if(u&&(ee=n.createComment(G,{c:{},o:[]})),B?ne=1:(h(),ne=s),y(),ee&&(ue=w(ne,!0).join(`
`)),o==="}"&&!B)return ee&&(ee.e=[ue]),h(),G;for(;o;){if(U=b(),y(),o!==":"&&d("Expected ':' instead of '"+o+"'"),h(),G[U]=I(),ne=s,y(),o===","&&(h(),ne=s,y()),ee){var X=w(ne);ee.c[U]=[ue||"",X[0]||""],ue=X[1],ee.o.push(U)}if(o==="}"&&!B)return h(),ee&&(ee.c[U][1]+=ue||""),G;y()}if(B)return G;d("End of input while parsing an object (missing '}')")}catch(q){throw q.hint=q.hint||T(G),q}}function I(){switch(y(),o){case"{":return k();case"[":return A();case"'":case'"':return m(!0);default:return x()}}function O(B,U){var G=s;if(y(),o&&d("Syntax error, found trailing characters"),u){var ee=U.join(`
`),ne=w(G).join(`
`);if(ne||ee){var ue=n.createComment(B,n.getComment(B));ue.r=[ee,ne]}}return B}function M(){y();var B=u?w(1):null;switch(o){case"{":return O(k(),B);case"[":return O(A(),B);default:return O(I(),B)}}function L(){y();var B=u?w(1):null;switch(o){case"{":return O(k(),B);case"[":return O(A(),B)}try{return O(k(!0),B)}catch(U){c();try{return O(I(),B)}catch{throw U}}}if(typeof e!="string")throw new Error("source is not a string");var H=null,D=!0;return t&&typeof t=="object"&&(u=t.keepWsc,H=t.dsf,D=t.legacyRoot!==!1),l=r.loadDsf(H,"parse"),i=e,c(),D?L():M()}),GF}var YF,iie;function jXe(){return iie||(iie=1,YF=function(e,t){var n=_9(),r=kG(),i={obj:["{","}"],arr:["[","]"],key:["",""],qkey:['"','"'],col:[":",""],com:[",",""],str:["",""],qstr:['"','"'],mstr:["'''","'''"],num:["",""],lit:["",""],dsf:["",""],esc:["\\",""],uni:["\\u",""],rem:["",""]},s=n.EOL,o="  ",a=!1,u=!1,l=!1,c=!1,f=0,d=1,h="",p=null,m=!1,g=i;if(t&&typeof t=="object"){t.quotes=t.quotes==="always"?"strings":t.quotes,(t.eol===`
`||t.eol===`\r
`)&&(s=t.eol),a=t.keepWsc,f=t.condense||0,u=t.bracesSameLine,l=t.quotes==="all"||t.quotes==="keys",c=t.quotes==="all"||t.quotes==="strings"||t.separator===!0,c||t.multiline=="off"?d=0:d=t.multiline=="no-tabs"?2:1,h=t.separator===!0?g.com[0]:"",p=t.dsf,m=t.sortProps,typeof t.space=="number"?o=new Array(t.space+1).join(" "):typeof t.space=="string"&&(o=t.space),t.colors===!0&&(g={obj:["\x1B[37m{\x1B[0m","\x1B[37m}\x1B[0m"],arr:["\x1B[37m[\x1B[0m","\x1B[37m]\x1B[0m"],key:["\x1B[33m","\x1B[0m"],qkey:['\x1B[33m"','"\x1B[0m'],col:["\x1B[37m:\x1B[0m",""],com:["\x1B[37m,\x1B[0m",""],str:["\x1B[37;1m","\x1B[0m"],qstr:['\x1B[37;1m"','"\x1B[0m'],mstr:["\x1B[37;1m'''","'''\x1B[0m"],num:["\x1B[36;1m","\x1B[0m"],lit:["\x1B[36m","\x1B[0m"],dsf:["\x1B[37m","\x1B[0m"],esc:["\x1B[31m\\","\x1B[0m"],uni:["\x1B[31m\\u","\x1B[0m"],rem:["\x1B[35m","\x1B[0m"]});var b,y=Object.keys(i);for(b=y.length-1;b>=0;b--){var x=y[b];g[x].push(i[x][0].length,i[x][1].length)}}var w,T="---\u2028--\uFEFF-",A=new RegExp('[\\\\\\"\0-'+T+"]","g"),k=new RegExp(`^\\s|^"|^'|^#|^\\/\\*|^\\/\\/|^\\{|^\\}|^\\[|^\\]|^:|^,|\\s$|[\0-`+T+"]","g"),I=new RegExp("'''|^[\\s]+$|[\0-"+(d===2?"	":"\b")+"\v\f-"+T+"]","g"),O=new RegExp("^(true|false|null)\\s*((,|\\]|\\}|#|//|/\\*).*)?$"),M={"\b":"b","	":"t","\n":"n","\f":"f","\r":"r",'"':'"',"\\":"\\"},L=/[,\{\[\}\]\s:#"']|\/\/|\/\*/,H="",D=0;function B(te,W){return D+=te[0].length+te[1].length-te[2]-te[3],te[0]+W+te[1]}function U(te){return te.replace(A,function(W){var Z=M[W];return typeof Z=="string"?B(g.esc,Z):B(g.uni,("0000"+W.charCodeAt(0).toString(16)).slice(-4))})}function G(te,W,Z,oe){return te?(k.lastIndex=0,O.lastIndex=0,c||Z||k.test(te)||n.tryParseNumber(te,!0)!==void 0||O.test(te)?(A.lastIndex=0,I.lastIndex=0,A.test(te)?!I.test(te)&&!oe&&d?ee(te,W):B(g.qstr,U(te)):B(g.qstr,te)):B(g.str,te)):B(g.qstr,"")}function ee(te,W){var Z,oe=te.replace(/\r/g,"").split(`
`);if(W+=o,oe.length===1)return B(g.mstr,oe[0]);var pe=s+W+g.mstr[0];for(Z=0;Z<oe.length;Z++)pe+=s,oe[Z]&&(pe+=W+oe[Z]);return pe+s+W+g.mstr[1]}function ne(te){return te?l||L.test(te)?(A.lastIndex=0,B(g.qkey,A.test(te)?U(te):te)):B(g.key,te):'""'}function ue(te,W,Z,oe){function pe(Hn){return Hn&&Hn[Hn[0]==="\r"?1:0]===`
`}function ce(Hn){return Hn&&!pe(Hn)}function he(Hn,nr,Ei){if(!Hn)return"";Hn=n.forceComment(Hn);var Dr,Co=Hn.length;for(Dr=0;Dr<Co&&Hn[Dr]<=" ";Dr++);return Ei&&Dr>0&&(Hn=Hn.substr(Dr)),Dr<Co?nr+B(g.rem,Hn):Hn}var Ee=w(te);if(Ee!==void 0)return B(g.dsf,Ee);switch(typeof te){case"string":return G(te,H,W,oe);case"number":return isFinite(te)?B(g.num,String(te)):B(g.lit,"null");case"boolean":return B(g.lit,String(te));case"object":if(!te)return B(g.lit,"null");var Ae;a&&(Ae=n.getComment(te));var ge=Object.prototype.toString.apply(te)==="[object Array]",me=H;H+=o;var Oe=s+me,Me=s+H,Ye=Z||u?"":Oe,lt=[],We,nt=f?[]:null,yt=c,_t=d,Rt=h?"":g.com[0],Et=0,Ke,Lt,sn,Fe,Qe,wt,Vt,Wt,bn;if(ge){for(Ke=0,Lt=te.length;Ke<Lt;Ke++){if(We=Ke<Lt-1,Ae?(wt=Ae.a[Ke]||[],Vt=ce(wt[1]),lt.push(he(wt[0],`
`)+Me),nt&&(wt[0]||wt[1]||Vt)&&(nt=null)):lt.push(Me),D=0,Fe=te[Ke],lt.push(ue(Fe,Ae?Vt:!1,!0)+(We?h:"")),nt){switch(typeof Fe){case"string":D=0,c=!0,d=0,nt.push(ue(Fe,!1,!0)+(We?g.com[0]:"")),c=yt,d=_t;break;case"object":if(Fe){nt=null;break}default:nt.push(lt[lt.length-1]+(We?Rt:""));break}We&&(D+=g.com[0].length-g.com[2]),Et+=D}Ae&&wt[1]&&lt.push(he(wt[1],Vt?" ":`
`,Vt))}Lt===0?Ae&&Ae.e&&lt.push(he(Ae.e[0],`
`)+Oe):lt.push(Oe),lt.length===0?Wt=B(g.arr,""):(Wt=Ye+B(g.arr,lt.join("")),nt&&(bn=nt.join(" "),bn.length-Et<=f&&(Wt=B(g.arr,bn))))}else{var Nn=Ae?Ae.o.slice():[],Zn=[];for(sn in te)Object.prototype.hasOwnProperty.call(te,sn)&&Nn.indexOf(sn)<0&&Zn.push(sn);m&&Zn.sort();var wr=Nn.concat(Zn);for(Ke=0,Lt=wr.length;Ke<Lt;Ke++)if(We=Ke<Lt-1,sn=wr[Ke],Ae?(wt=Ae.c[sn]||[],Vt=ce(wt[1]),lt.push(he(wt[0],`
`)+Me),nt&&(wt[0]||wt[1]||Vt)&&(nt=null)):lt.push(Me),D=0,Fe=te[sn],Qe=ue(Fe,Ae&&Vt),lt.push(ne(sn)+g.col[0]+(pe(Qe)?"":" ")+Qe+(We?h:"")),Ae&&wt[1]&&lt.push(he(wt[1],Vt?" ":`
`,Vt)),nt){switch(typeof Fe){case"string":D=0,c=!0,d=0,Qe=ue(Fe,!1),c=yt,d=_t,nt.push(ne(sn)+g.col[0]+" "+Qe+(We?g.com[0]:""));break;case"object":if(Fe){nt=null;break}default:nt.push(lt[lt.length-1]+(We?Rt:""));break}D+=g.col[0].length-g.col[2],We&&(D+=g.com[0].length-g.com[2]),Et+=D}Lt===0?Ae&&Ae.e&&lt.push(he(Ae.e[0],`
`)+Oe):lt.push(Oe),lt.length===0?Wt=B(g.obj,""):(Wt=Ye+B(g.obj,lt.join("")),nt&&(bn=nt.join(" "),bn.length-Et<=f&&(Wt=B(g.obj,bn))))}return H=me,Wt}}w=r.loadDsf(p,"stringify");var X="",q=a?q=(n.getComment(e)||{}).r:null;return q&&q[0]&&(X=q[0]+`
`),X+=ue(e,null,!0,!0),q&&(X+=q[1]||""),X}),YF}var KF,sie;function UXe(){if(sie)return KF;sie=1;var e=_9();function t(c,f,d){var h;return c&&(h={b:c}),f&&((h=h||{}).a=f),d&&((h=h||{}).x=d),h}function n(c,f){if(!(c===null||typeof c!="object")){var d=e.getComment(c);d&&e.removeComment(c);var h,p,m,g;if(Object.prototype.toString.apply(c)==="[object Array]"){for(g={a:{}},h=0,p=c.length;h<p;h++)s(g.a,h,d.a[h],n(c[h]))&&(m=!0);!m&&d.e&&(g.e=t(d.e[0],d.e[1]),m=!0)}else{g={s:{}};var b,y=Object.keys(c);for(d&&d.o?(b=[],d.o.concat(y).forEach(function(w){Object.prototype.hasOwnProperty.call(c,w)&&b.indexOf(w)<0&&b.push(w)})):b=y,g.o=b,h=0,p=b.length;h<p;h++){var x=b[h];s(g.s,x,d.c[x],n(c[x]))&&(m=!0)}!m&&d.e&&(g.e=t(d.e[0],d.e[1]),m=!0)}return f&&d&&d.r&&(g.r=t(d.r[0],d.r[1])),m?g:void 0}}function r(){var c="";return[].forEach.call(arguments,function(f){f&&f.trim()!==""&&(c&&(c+="; "),c+=f.trim())}),c}function i(c,f){var d=[];if(u(c,f,d,[]),d.length>0){var h=l(f,null,1);h+=`
# Orphaned comments:
`,d.forEach(function(p){h+=("# "+p.path.join("/")+": "+r(p.b,p.a,p.e)).replace(`
`,"\\n ")+`
`}),l(f,h,1)}}function s(c,f,d,h){var p=t(d?d[0]:void 0,d?d[1]:void 0,h);return p&&(c[f]=p),p}function o(c,f){var d=t(f.b,f.a);return d.path=c,d}function a(c,f,d){if(c){var h,p;if(c.a)for(h=0,p=c.a.length;h<p;h++){var m=d.slice().concat([h]),g=c.a[h];g&&(f.push(o(m,g)),a(g.x,f,m))}else c.o&&c.o.forEach(function(b){var y=d.slice().concat([b]),x=c.s[b];x&&(f.push(o(y,x)),a(x.x,f,y))});c.e&&f.push(o(d,c.e))}}function u(c,f,d,h){if(c){if(f===null||typeof f!="object"){a(c,d,h);return}var p,m=e.createComment(f);if(h.length===0&&c.r&&(m.r=[c.r.b,c.r.a]),Object.prototype.toString.apply(f)==="[object Array]"){m.a=[];var g=c.a||{};for(var b in g)if(g.hasOwnProperty(b)){p=parseInt(b);var y=c.a[b];if(y){var x=h.slice().concat([p]);p<f.length?(m.a[p]=[y.b,y.a],u(y.x,f[p],d,x)):(d.push(o(x,y)),a(y.x,d,x))}}p===0&&c.e&&(m.e=[c.e.b,c.e.a])}else m.c={},m.o=[],(c.o||[]).forEach(function(w){var T=h.slice().concat([w]),A=c.s[w];Object.prototype.hasOwnProperty.call(f,w)?(m.o.push(w),A&&(m.c[w]=[A.b,A.a],u(A.x,f[w],d,T))):A&&(d.push(o(T,A)),a(A.x,d,T))}),c.e&&(m.e=[c.e.b,c.e.a])}}function l(c,f,d){var h=e.createComment(c,e.getComment(c));return h.r||(h.r=["",""]),(f||f==="")&&(h.r[d]=e.forceComment(f)),h.r[d]||""}return KF={extract:function(c){return n(c,!0)},merge:i,header:function(c,f){return l(c,f,0)},footer:function(c,f){return l(c,f,1)}},KF}/*!
 * Hjson v3.2.1
 * https://hjson.github.io
 *
 * Copyright 2014-2017 Christian Zangl, MIT license
 * Details and documentation:
 * https://github.com/hjson/hjson-js
 *
 * This code is based on the the JSON version by Douglas Crockford:
 * https://github.com/douglascrockford/JSON-js (json_parse.js, json2.js)
 */var XF,oie;function zXe(){if(oie)return XF;oie=1;var e=_9(),t=$Xe(),n=BXe(),r=jXe(),i=UXe(),s=kG();return XF={parse:n,stringify:r,endOfLine:function(){return e.EOL},setEndOfLine:function(o){(o===`
`||o===`\r
`)&&(e.EOL=o)},version:t,rt:{parse:function(o,a){return(a=a||{}).keepWsc=!0,n(o,a)},stringify:function(o,a){return(a=a||{}).keepWsc=!0,r(o,a)}},comments:i,dsf:s.std},XF}var VXe=zXe(),aie={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nbe=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},HXe=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=e[n++],o=e[n++],a=e[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(u&1023))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return t.join("")},RG={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const s=e[i],o=i+1<e.length,a=o?e[i+1]:0,u=i+2<e.length,l=u?e[i+2]:0,c=s>>2,f=(s&3)<<4|a>>4;let d=(a&15)<<2|l>>6,h=l&63;u||(h=64,o||(d=64)),r.push(n[c],n[f],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(nbe(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):HXe(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const s=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const l=i<e.length?n[e.charAt(i)]:64;++i;const f=i<e.length?n[e.charAt(i)]:64;if(++i,s==null||a==null||l==null||f==null)throw new qXe;const d=s<<2|a>>4;if(r.push(d),l!==64){const h=a<<4&240|l>>2;if(r.push(h),f!==64){const p=l<<6&192|f;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class qXe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const WXe=function(e){const t=nbe(e);return RG.encodeByteArray(t,!0)},hN=function(e){return WXe(e).replace(/\./g,"")},rbe=function(e){try{return RG.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ibe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GXe=()=>ibe().__FIREBASE_DEFAULTS__,YXe=()=>{if(typeof process>"u"||typeof aie>"u")return;const e=aie.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},KXe=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&rbe(e[1]);return t&&JSON.parse(t)},w9=()=>{try{return GXe()||YXe()||KXe()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},sbe=e=>{var t,n;return(n=(t=w9())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},XXe=e=>{const t=sbe(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},obe=()=>{var e;return(e=w9())===null||e===void 0?void 0:e.config},abe=e=>{var t;return(t=w9())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qk{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QXe(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[hN(JSON.stringify(n)),hN(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cc(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function JXe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(cc())}function ZXe(){var e;const t=(e=w9())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function eQe(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function tQe(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function nQe(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function rQe(){const e=cc();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function iQe(){return!ZXe()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function IG(){try{return typeof indexedDB=="object"}catch{return!1}}function sQe(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;t(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oQe="FirebaseError";class _g extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=oQe,Object.setPrototypeOf(this,_g.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,NT.prototype.create)}}class NT{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},i=`${this.service}/${t}`,s=this.errors[t],o=s?aQe(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new _g(i,a,r)}}function aQe(e,t){return e.replace(uQe,(n,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const uQe=/\{\$([^}]+)}/g;function lQe(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Jk(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const s=e[i],o=t[i];if(uie(s)&&uie(o)){if(!Jk(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function uie(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bR(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function cQe(e,t){const n=new fQe(e,t);return n.subscribe.bind(n)}class fQe{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let i;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");dQe(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:r},i.next===void 0&&(i.next=QF),i.error===void 0&&(i.error=QF),i.complete===void 0&&(i.complete=QF);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function dQe(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function QF(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hQe=1e3,pQe=2,mQe=4*60*60*1e3,gQe=.5;function yQe(e,t=hQe,n=pQe){const r=t*Math.pow(n,e),i=Math.round(gQe*r*(Math.random()-.5)*2);return Math.min(mQe,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $s(e){return e&&e._delegate?e._delegate:e}class ig{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r_="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vQe=class{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new Qk;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(xQe(t))try{this.getOrInitializeService({instanceIdentifier:r_})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(t=r_){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=r_){return this.instances.has(t)}getOptions(t=r_){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(t,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(t),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&t(o,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:bQe(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=r_){return this.component?this.component.multipleInstances?t:r_:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function bQe(e){return e===r_?void 0:e}function xQe(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _Qe{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new vQe(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ni;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(ni||(ni={}));const wQe={debug:ni.DEBUG,verbose:ni.VERBOSE,info:ni.INFO,warn:ni.WARN,error:ni.ERROR,silent:ni.SILENT},EQe=ni.INFO,SQe={[ni.DEBUG]:"log",[ni.VERBOSE]:"log",[ni.INFO]:"info",[ni.WARN]:"warn",[ni.ERROR]:"error"},TQe=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),i=SQe[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class E9{constructor(t){this.name=t,this._logLevel=EQe,this._logHandler=TQe,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in ni))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?wQe[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,ni.DEBUG,...t),this._logHandler(this,ni.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,ni.VERBOSE,...t),this._logHandler(this,ni.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,ni.INFO,...t),this._logHandler(this,ni.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,ni.WARN,...t),this._logHandler(this,ni.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,ni.ERROR,...t),this._logHandler(this,ni.ERROR,...t)}}const CQe=(e,t)=>t.some(n=>e instanceof n);let lie,cie;function AQe(){return lie||(lie=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function kQe(){return cie||(cie=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ube=new WeakMap,IU=new WeakMap,lbe=new WeakMap,JF=new WeakMap,PG=new WeakMap;function RQe(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{n(Yv(e.result)),i()},o=()=>{r(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&ube.set(n,e)}).catch(()=>{}),PG.set(t,e),t}function IQe(e){if(IU.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});IU.set(e,t)}let PU={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return IU.get(e);if(t==="objectStoreNames")return e.objectStoreNames||lbe.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Yv(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function PQe(e){PU=e(PU)}function NQe(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(ZF(this),t,...n);return lbe.set(r,t.sort?t.sort():[t]),Yv(r)}:kQe().includes(e)?function(...t){return e.apply(ZF(this),t),Yv(ube.get(this))}:function(...t){return Yv(e.apply(ZF(this),t))}}function DQe(e){return typeof e=="function"?NQe(e):(e instanceof IDBTransaction&&IQe(e),CQe(e,AQe())?new Proxy(e,PU):e)}function Yv(e){if(e instanceof IDBRequest)return RQe(e);if(JF.has(e))return JF.get(e);const t=DQe(e);return t!==e&&(JF.set(e,t),PG.set(t,e)),t}const ZF=e=>PG.get(e);function OQe(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=Yv(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Yv(o.result),u.oldVersion,u.newVersion,Yv(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const MQe=["get","getKey","getAll","getAllKeys","count"],LQe=["put","add","delete","clear"],e$=new Map;function fie(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(e$.get(t))return e$.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=LQe.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||MQe.includes(n)))return;const s=async function(o,...a){const u=this.transaction(o,i?"readwrite":"readonly");let l=u.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&u.done]))[0]};return e$.set(t,s),s}PQe(e=>({...e,get:(t,n,r)=>fie(t,n)||e.get(t,n,r),has:(t,n)=>!!fie(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FQe{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if($Qe(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function $Qe(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const NU="@firebase/app",die="0.10.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f1=new E9("@firebase/app"),BQe="@firebase/app-compat",jQe="@firebase/analytics-compat",UQe="@firebase/analytics",zQe="@firebase/app-check-compat",VQe="@firebase/app-check",HQe="@firebase/auth",qQe="@firebase/auth-compat",WQe="@firebase/database",GQe="@firebase/data-connect",YQe="@firebase/database-compat",KQe="@firebase/functions",XQe="@firebase/functions-compat",QQe="@firebase/installations",JQe="@firebase/installations-compat",ZQe="@firebase/messaging",eJe="@firebase/messaging-compat",tJe="@firebase/performance",nJe="@firebase/performance-compat",rJe="@firebase/remote-config",iJe="@firebase/remote-config-compat",sJe="@firebase/storage",oJe="@firebase/storage-compat",aJe="@firebase/firestore",uJe="@firebase/vertexai",lJe="@firebase/firestore-compat",cJe="firebase",fJe="11.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DU="[DEFAULT]",dJe={[NU]:"fire-core",[BQe]:"fire-core-compat",[UQe]:"fire-analytics",[jQe]:"fire-analytics-compat",[VQe]:"fire-app-check",[zQe]:"fire-app-check-compat",[HQe]:"fire-auth",[qQe]:"fire-auth-compat",[WQe]:"fire-rtdb",[GQe]:"fire-data-connect",[YQe]:"fire-rtdb-compat",[KQe]:"fire-fn",[XQe]:"fire-fn-compat",[QQe]:"fire-iid",[JQe]:"fire-iid-compat",[ZQe]:"fire-fcm",[eJe]:"fire-fcm-compat",[tJe]:"fire-perf",[nJe]:"fire-perf-compat",[rJe]:"fire-rc",[iJe]:"fire-rc-compat",[sJe]:"fire-gcs",[oJe]:"fire-gcs-compat",[aJe]:"fire-fst",[lJe]:"fire-fst-compat",[uJe]:"fire-vertex","fire-js":"fire-js",[cJe]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pN=new Map,hJe=new Map,OU=new Map;function hie(e,t){try{e.container.addComponent(t)}catch(n){f1.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function d1(e){const t=e.name;if(OU.has(t))return f1.debug(`There were multiple attempts to register component ${t}.`),!1;OU.set(t,e);for(const n of pN.values())hie(n,e);for(const n of hJe.values())hie(n,e);return!0}function DT(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Mm(e){return e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pJe={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Kv=new NT("app","Firebase",pJe);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mJe{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ig("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Kv.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ow=fJe;function cbe(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:DU,automaticDataCollectionEnabled:!1},t),i=r.name;if(typeof i!="string"||!i)throw Kv.create("bad-app-name",{appName:String(i)});if(n||(n=obe()),!n)throw Kv.create("no-options");const s=pN.get(i);if(s){if(Jk(n,s.options)&&Jk(r,s.config))return s;throw Kv.create("duplicate-app",{appName:i})}const o=new _Qe(i);for(const u of OU.values())o.addComponent(u);const a=new mJe(n,r,o);return pN.set(i,a),a}function NG(e=DU){const t=pN.get(e);if(!t&&e===DU&&obe())return cbe();if(!t)throw Kv.create("no-app",{appName:e});return t}function v0(e,t,n){var r;let i=(r=dJe[e])!==null&&r!==void 0?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${t}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),f1.warn(a.join(" "));return}d1(new ig(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gJe="firebase-heartbeat-database",yJe=1,Zk="firebase-heartbeat-store";let t$=null;function fbe(){return t$||(t$=OQe(gJe,yJe,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Zk)}catch(n){console.warn(n)}}}}).catch(e=>{throw Kv.create("idb-open",{originalErrorMessage:e.message})})),t$}async function vJe(e){try{const n=(await fbe()).transaction(Zk),r=await n.objectStore(Zk).get(dbe(e));return await n.done,r}catch(t){if(t instanceof _g)f1.warn(t.message);else{const n=Kv.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});f1.warn(n.message)}}}async function pie(e,t){try{const r=(await fbe()).transaction(Zk,"readwrite");await r.objectStore(Zk).put(t,dbe(e)),await r.done}catch(n){if(n instanceof _g)f1.warn(n.message);else{const r=Kv.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});f1.warn(r.message)}}}function dbe(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bJe=1024,xJe=30*24*60*60*1e3;class _Je{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new EJe(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=mie();return((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=xJe}),this._storage.overwrite(this._heartbeatsCache))}catch(r){f1.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=mie(),{heartbeatsToSend:r,unsentEntries:i}=wJe(this._heartbeatsCache.heartbeats),s=hN(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return f1.warn(n),""}}}function mie(){return new Date().toISOString().substring(0,10)}function wJe(e,t=bJe){const n=[];let r=e.slice();for(const i of e){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),gie(n)>t){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),gie(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class EJe{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return IG()?sQe().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await vJe(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return pie(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return pie(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function gie(e){return hN(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SJe(e){d1(new ig("platform-logger",t=>new FQe(t),"PRIVATE")),d1(new ig("heartbeat",t=>new _Je(t),"PRIVATE")),v0(NU,die,e),v0(NU,die,"esm2017"),v0("fire-js","")}SJe("");var TJe="firebase",CJe="11.2.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */v0(TJe,CJe,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hbe="firebasestorage.googleapis.com",pbe="storageBucket",AJe=2*60*1e3,kJe=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko extends _g{constructor(t,n,r=0){super(n$(t),`Firebase Storage: ${n} (${n$(t)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ko.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return n$(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Go;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Go||(Go={}));function n$(e){return"storage/"+e}function DG(){const e="An unknown error occurred, please check the error payload for server response.";return new Ko(Go.UNKNOWN,e)}function RJe(e){return new Ko(Go.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function IJe(e){return new Ko(Go.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function PJe(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ko(Go.UNAUTHENTICATED,e)}function NJe(){return new Ko(Go.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function DJe(e){return new Ko(Go.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function OJe(){return new Ko(Go.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function MJe(){return new Ko(Go.CANCELED,"User canceled the upload/download.")}function LJe(e){return new Ko(Go.INVALID_URL,"Invalid URL '"+e+"'.")}function FJe(e){return new Ko(Go.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function $Je(){return new Ko(Go.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+pbe+"' property when initializing the app?")}function BJe(){return new Ko(Go.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function jJe(){return new Ko(Go.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function UJe(e){return new Ko(Go.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function MU(e){return new Ko(Go.INVALID_ARGUMENT,e)}function mbe(){return new Ko(Go.APP_DELETED,"The Firebase app was deleted.")}function zJe(e){return new Ko(Go.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function yk(e,t){return new Ko(Go.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function QC(e){throw new Ko(Go.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let r;try{r=Zc.makeFromUrl(t,n)}catch{return new Zc(t,"")}if(r.path==="")return r;throw FJe(t)}static makeFromUrl(t,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(w){w.path.charAt(w.path.length-1)==="/"&&(w.path_=w.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function l(w){w.path_=decodeURIComponent(w.path)}const c="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",h=new RegExp(`^https?://${f}/${c}/b/${i}/o${d}`,"i"),p={bucket:1,path:3},m=n===hbe?"(?:storage.googleapis.com|storage.cloud.google.com)":n,g="([^?#]*)",b=new RegExp(`^https?://${m}/${i}/${g}`,"i"),x=[{regex:a,indices:u,postModify:s},{regex:h,indices:p,postModify:l},{regex:b,indices:{bucket:1,path:2},postModify:l}];for(let w=0;w<x.length;w++){const T=x[w],A=T.regex.exec(t);if(A){const k=A[T.indices.bucket];let I=A[T.indices.path];I||(I=""),r=new Zc(k,I),T.postModify(r);break}}if(r==null)throw LJe(t);return r}}class VJe{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HJe(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function u(){return a===2}let l=!1;function c(...g){l||(l=!0,t.apply(null,g))}function f(g){i=setTimeout(()=>{i=null,e(h,u())},g)}function d(){s&&clearTimeout(s)}function h(g,...b){if(l){d();return}if(g){d(),c.call(null,g,...b);return}if(u()||o){d(),c.call(null,g,...b);return}r<64&&(r*=2);let x;a===1?(a=2,x=0):x=(r+Math.random())*1e3,f(x)}let p=!1;function m(g){p||(p=!0,d(),!l&&(i!==null?(g||(a=2),clearTimeout(i),f(0)):g||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,m(!0)},n),m}function qJe(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WJe(e){return e!==void 0}function GJe(e){return typeof e=="object"&&!Array.isArray(e)}function OG(e){return typeof e=="string"||e instanceof String}function yie(e){return MG()&&e instanceof Blob}function MG(){return typeof Blob<"u"}function LU(e,t,n,r){if(r<t)throw MU(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw MU(`Invalid value for '${e}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xR(e,t,n){let r=t;return n==null&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function gbe(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){const i=t(r)+"="+t(e[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var P_;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(P_||(P_={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YJe(e,t){const n=e>=500&&e<600,i=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KJe{constructor(t,n,r,i,s,o,a,u,l,c,f,d=!0){this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=f,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((h,p)=>{this.resolve_=h,this.reject_=p,this.start_()})}start_(){const t=(r,i)=>{if(i){r(!1,new p6(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const u=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===P_.NO_ERROR,u=s.getStatus();if(!a||YJe(u,this.additionalRetryCodes_)&&this.retry){const c=s.getErrorCode()===P_.ABORT;r(!1,new p6(!1,null,c));return}const l=this.successCodes_.indexOf(u)!==-1;r(!0,new p6(l,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());WJe(u)?s(u):s()}catch(u){o(u)}else if(a!==null){const u=DG();u.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,u)):o(u)}else if(i.canceled){const u=this.appDelete_?mbe():MJe();o(u)}else{const u=OJe();o(u)}};this.canceled_?n(!1,new p6(!1,null,!0)):this.backoffId_=HJe(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&qJe(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class p6{constructor(t,n,r){this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}}function XJe(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function QJe(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function JJe(e,t){t&&(e["X-Firebase-GMPID"]=t)}function ZJe(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function eZe(e,t,n,r,i,s,o=!0){const a=gbe(e.urlParams),u=e.url+a,l=Object.assign({},e.headers);return JJe(l,t),XJe(l,n),QJe(l,s),ZJe(l,r),new KJe(u,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tZe(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function nZe(...e){const t=tZe();if(t!==void 0){const n=new t;for(let r=0;r<e.length;r++)n.append(e[r]);return n.getBlob()}else{if(MG())return new Blob(e);throw new Ko(Go.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function rZe(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iZe(e){if(typeof atob>"u")throw UJe("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lm={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class r${constructor(t,n){this.data=t,this.contentType=n||null}}function sZe(e,t){switch(e){case Lm.RAW:return new r$(ybe(t));case Lm.BASE64:case Lm.BASE64URL:return new r$(vbe(e,t));case Lm.DATA_URL:return new r$(aZe(t),uZe(t))}throw DG()}function ybe(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320))t.push(239,191,189);else{const s=r,o=e.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(t)}function oZe(e){let t;try{t=decodeURIComponent(e)}catch{throw yk(Lm.DATA_URL,"Malformed data URL.")}return ybe(t)}function vbe(e,t){switch(e){case Lm.BASE64:{const i=t.indexOf("-")!==-1,s=t.indexOf("_")!==-1;if(i||s)throw yk(e,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Lm.BASE64URL:{const i=t.indexOf("+")!==-1,s=t.indexOf("/")!==-1;if(i||s)throw yk(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=iZe(t)}catch(i){throw i.message.includes("polyfill")?i:yk(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class bbe{constructor(t){this.base64=!1,this.contentType=null;const n=t.match(/^data:([^,]+)?,/);if(n===null)throw yk(Lm.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=lZe(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}}function aZe(e){const t=new bbe(e);return t.base64?vbe(Lm.BASE64,t.rest):oZe(t.rest)}function uZe(e){return new bbe(e).contentType}function lZe(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pv{constructor(t,n){let r=0,i="";yie(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(t,n){if(yie(this.data_)){const r=this.data_,i=rZe(r,t,n);return i===null?null:new Pv(i)}else{const r=new Uint8Array(this.data_.buffer,t,n-t);return new Pv(r,!0)}}static getBlob(...t){if(MG()){const n=t.map(r=>r instanceof Pv?r.data_:r);return new Pv(nZe.apply(null,n))}else{const n=t.map(o=>OG(o)?sZe(Lm.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new Pv(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LG(e){let t;try{t=JSON.parse(e)}catch{return null}return GJe(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cZe(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function fZe(e,t){const n=t.split("/").filter(r=>r.length>0).join("/");return e.length===0?n:e+"/"+n}function xbe(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dZe(e,t){return t}class zc{constructor(t,n,r,i){this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||dZe}}let m6=null;function hZe(e){return!OG(e)||e.length<2?e:xbe(e)}function _be(){if(m6)return m6;const e=[];e.push(new zc("bucket")),e.push(new zc("generation")),e.push(new zc("metageneration")),e.push(new zc("name","fullPath",!0));function t(s,o){return hZe(o)}const n=new zc("name");n.xform=t,e.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new zc("size");return i.xform=r,e.push(i),e.push(new zc("timeCreated")),e.push(new zc("updated")),e.push(new zc("md5Hash",null,!0)),e.push(new zc("cacheControl",null,!0)),e.push(new zc("contentDisposition",null,!0)),e.push(new zc("contentEncoding",null,!0)),e.push(new zc("contentLanguage",null,!0)),e.push(new zc("contentType",null,!0)),e.push(new zc("metadata","customMetadata",!0)),m6=e,m6}function pZe(e,t){function n(){const r=e.bucket,i=e.fullPath,s=new Zc(r,i);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:n})}function mZe(e,t,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,t[o.server])}return pZe(r,e),r}function wbe(e,t,n){const r=LG(t);return r===null?null:mZe(e,r,n)}function gZe(e,t,n,r){const i=LG(t);if(i===null||!OG(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(l=>{const c=e.bucket,f=e.fullPath,d="/b/"+o(c)+"/o/"+o(f),h=xR(d,n,r),p=gbe({alt:"media",token:l});return h+p})[0]}function yZe(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const s=t[i];s.writable&&(n[s.server]=e[s.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vie="prefixes",bie="items";function vZe(e,t,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[vie])for(const i of n[vie]){const s=i.replace(/\/$/,""),o=e._makeStorageReference(new Zc(t,s));r.prefixes.push(o)}if(n[bie])for(const i of n[bie]){const s=e._makeStorageReference(new Zc(t,i.name));r.items.push(s)}return r}function bZe(e,t,n){const r=LG(n);return r===null?null:vZe(e,t,r)}class S9{constructor(t,n,r,i){this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FG(e){if(!e)throw DG()}function xZe(e,t){function n(r,i){const s=wbe(e,i,t);return FG(s!==null),s}return n}function _Ze(e,t){function n(r,i){const s=bZe(e,t,i);return FG(s!==null),s}return n}function wZe(e,t){function n(r,i){const s=wbe(e,i,t);return FG(s!==null),gZe(s,i,e.host,e._protocol)}return n}function $G(e){function t(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=NJe():i=PJe():n.getStatus()===402?i=IJe(e.bucket):n.getStatus()===403?i=DJe(e.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return t}function Ebe(e){const t=$G(e);function n(r,i){let s=t(r,i);return r.getStatus()===404&&(s=RJe(e.path)),s.serverResponse=i.serverResponse,s}return n}function EZe(e,t,n,r,i){const s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const o=t.bucketOnlyServerUrl(),a=xR(o,e.host,e._protocol),u="GET",l=e.maxOperationRetryTime,c=new S9(a,u,_Ze(e,t.bucket),l);return c.urlParams=s,c.errorHandler=$G(t),c}function SZe(e,t,n){const r=t.fullServerUrl(),i=xR(r,e.host,e._protocol),s="GET",o=e.maxOperationRetryTime,a=new S9(i,s,wZe(e,n),o);return a.errorHandler=Ebe(t),a}function TZe(e,t){const n=t.fullServerUrl(),r=xR(n,e.host,e._protocol),i="DELETE",s=e.maxOperationRetryTime;function o(u,l){}const a=new S9(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=Ebe(t),a}function CZe(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function AZe(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=CZe(null,t)),r}function kZe(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let x="";for(let w=0;w<2;w++)x=x+Math.random().toString().slice(2);return x}const u=a();o["Content-Type"]="multipart/related; boundary="+u;const l=AZe(t,r,i),c=yZe(l,n),f="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+c+`\r
--`+u+`\r
Content-Type: `+l.contentType+`\r
\r
`,d=`\r
--`+u+"--",h=Pv.getBlob(f,r,d);if(h===null)throw BJe();const p={name:l.fullPath},m=xR(s,e.host,e._protocol),g="POST",b=e.maxUploadRetryTime,y=new S9(m,g,xZe(e,n),b);return y.urlParams=p,y.headers=o,y.body=h.uploadData(),y.errorHandler=$G(t),y}class RZe{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=P_.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=P_.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=P_.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,r,i){if(this.sent_)throw QC("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw QC("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw QC("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw QC("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw QC("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class IZe extends RZe{initXhr(){this.xhr_.responseType="text"}}function T9(){return new IZe}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_{constructor(t,n){this._service=t,n instanceof Zc?this._location=n:this._location=Zc.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new q_(t,n)}get root(){const t=new Zc(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return xbe(this._location.path)}get storage(){return this._service}get parent(){const t=cZe(this._location.path);if(t===null)return null;const n=new Zc(this._location.bucket,t);return new q_(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw zJe(t)}}function PZe(e,t,n){e._throwIfRoot("uploadBytes");const r=kZe(e.storage,e._location,_be(),new Pv(t,!0),n);return e.storage.makeRequestWithTokens(r,T9).then(i=>({metadata:i,ref:e}))}function NZe(e){const t={prefixes:[],items:[]};return Sbe(e,t).then(()=>t)}async function Sbe(e,t,n){const i=await DZe(e,{pageToken:n});t.prefixes.push(...i.prefixes),t.items.push(...i.items),i.nextPageToken!=null&&await Sbe(e,t,i.nextPageToken)}function DZe(e,t){t!=null&&typeof t.maxResults=="number"&&LU("options.maxResults",1,1e3,t.maxResults);const n=t,r=EZe(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,T9)}function OZe(e){e._throwIfRoot("getDownloadURL");const t=SZe(e.storage,e._location,_be());return e.storage.makeRequestWithTokens(t,T9).then(n=>{if(n===null)throw jJe();return n})}function MZe(e){e._throwIfRoot("deleteObject");const t=TZe(e.storage,e._location);return e.storage.makeRequestWithTokens(t,T9)}function LZe(e,t){const n=fZe(e._location.path,t),r=new Zc(e._location.bucket,n);return new q_(e.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FZe(e){return/^[A-Za-z]+:\/\//.test(e)}function $Ze(e,t){return new q_(e,t)}function Tbe(e,t){if(e instanceof BG){const n=e;if(n._bucket==null)throw $Je();const r=new q_(n,n._bucket);return t!=null?Tbe(r,t):r}else return t!==void 0?LZe(e,t):e}function BZe(e,t){if(t&&FZe(t)){if(e instanceof BG)return $Ze(e,t);throw MU("To use ref(service, url), the first argument must be a Storage instance.")}else return Tbe(e,t)}function xie(e,t){const n=t==null?void 0:t[pbe];return n==null?null:Zc.makeFromBucketSpec(n,e)}function jZe(e,t,n,r={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken=typeof i=="string"?i:QXe(i,e.app.options.projectId))}class BG{constructor(t,n,r,i,s){this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=hbe,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=AJe,this._maxUploadRetryTime=kJe,this._requests=new Set,i!=null?this._bucket=Zc.makeFromBucketSpec(i,this._host):this._bucket=xie(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=Zc.makeFromBucketSpec(this._url,t):this._bucket=xie(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){LU("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){LU("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new q_(this,t)}_makeRequest(t,n,r,i,s=!0){if(this._deleted)return new VJe(mbe());{const o=eZe(t,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,r,i).getPromise()}}const _ie="@firebase/storage",wie="0.13.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cbe="storage";function g6(e,t,n){return e=$s(e),PZe(e,t,n)}function JC(e){return e=$s(e),NZe(e)}function y6(e){return e=$s(e),OZe(e)}function Eie(e){return e=$s(e),MZe(e)}function Ld(e,t){return e=$s(e),BZe(e,t)}function Sie(e=NG(),t){e=$s(e);const r=DT(e,Cbe).getImmediate({identifier:t}),i=XXe("storage");return i&&UZe(r,...i),r}function UZe(e,t,n,r={}){jZe(e,t,n,r)}function zZe(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new BG(n,r,i,t,Ow)}function VZe(){d1(new ig(Cbe,zZe,"PUBLIC").setMultipleInstances(!0)),v0(_ie,wie,""),v0(_ie,wie,"esm2017")}VZe();var Tie=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Xv,Abe;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(k,I){function O(){}O.prototype=I.prototype,k.D=I.prototype,k.prototype=new O,k.prototype.constructor=k,k.C=function(M,L,H){for(var D=Array(arguments.length-2),B=2;B<arguments.length;B++)D[B-2]=arguments[B];return I.prototype[L].apply(M,D)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(k,I,O){O||(O=0);var M=Array(16);if(typeof I=="string")for(var L=0;16>L;++L)M[L]=I.charCodeAt(O++)|I.charCodeAt(O++)<<8|I.charCodeAt(O++)<<16|I.charCodeAt(O++)<<24;else for(L=0;16>L;++L)M[L]=I[O++]|I[O++]<<8|I[O++]<<16|I[O++]<<24;I=k.g[0],O=k.g[1],L=k.g[2];var H=k.g[3],D=I+(H^O&(L^H))+M[0]+3614090360&4294967295;I=O+(D<<7&4294967295|D>>>25),D=H+(L^I&(O^L))+M[1]+3905402710&4294967295,H=I+(D<<12&4294967295|D>>>20),D=L+(O^H&(I^O))+M[2]+606105819&4294967295,L=H+(D<<17&4294967295|D>>>15),D=O+(I^L&(H^I))+M[3]+3250441966&4294967295,O=L+(D<<22&4294967295|D>>>10),D=I+(H^O&(L^H))+M[4]+4118548399&4294967295,I=O+(D<<7&4294967295|D>>>25),D=H+(L^I&(O^L))+M[5]+1200080426&4294967295,H=I+(D<<12&4294967295|D>>>20),D=L+(O^H&(I^O))+M[6]+2821735955&4294967295,L=H+(D<<17&4294967295|D>>>15),D=O+(I^L&(H^I))+M[7]+4249261313&4294967295,O=L+(D<<22&4294967295|D>>>10),D=I+(H^O&(L^H))+M[8]+1770035416&4294967295,I=O+(D<<7&4294967295|D>>>25),D=H+(L^I&(O^L))+M[9]+2336552879&4294967295,H=I+(D<<12&4294967295|D>>>20),D=L+(O^H&(I^O))+M[10]+4294925233&4294967295,L=H+(D<<17&4294967295|D>>>15),D=O+(I^L&(H^I))+M[11]+2304563134&4294967295,O=L+(D<<22&4294967295|D>>>10),D=I+(H^O&(L^H))+M[12]+1804603682&4294967295,I=O+(D<<7&4294967295|D>>>25),D=H+(L^I&(O^L))+M[13]+4254626195&4294967295,H=I+(D<<12&4294967295|D>>>20),D=L+(O^H&(I^O))+M[14]+2792965006&4294967295,L=H+(D<<17&4294967295|D>>>15),D=O+(I^L&(H^I))+M[15]+1236535329&4294967295,O=L+(D<<22&4294967295|D>>>10),D=I+(L^H&(O^L))+M[1]+4129170786&4294967295,I=O+(D<<5&4294967295|D>>>27),D=H+(O^L&(I^O))+M[6]+3225465664&4294967295,H=I+(D<<9&4294967295|D>>>23),D=L+(I^O&(H^I))+M[11]+643717713&4294967295,L=H+(D<<14&4294967295|D>>>18),D=O+(H^I&(L^H))+M[0]+3921069994&4294967295,O=L+(D<<20&4294967295|D>>>12),D=I+(L^H&(O^L))+M[5]+3593408605&4294967295,I=O+(D<<5&4294967295|D>>>27),D=H+(O^L&(I^O))+M[10]+38016083&4294967295,H=I+(D<<9&4294967295|D>>>23),D=L+(I^O&(H^I))+M[15]+3634488961&4294967295,L=H+(D<<14&4294967295|D>>>18),D=O+(H^I&(L^H))+M[4]+3889429448&4294967295,O=L+(D<<20&4294967295|D>>>12),D=I+(L^H&(O^L))+M[9]+568446438&4294967295,I=O+(D<<5&4294967295|D>>>27),D=H+(O^L&(I^O))+M[14]+3275163606&4294967295,H=I+(D<<9&4294967295|D>>>23),D=L+(I^O&(H^I))+M[3]+4107603335&4294967295,L=H+(D<<14&4294967295|D>>>18),D=O+(H^I&(L^H))+M[8]+1163531501&4294967295,O=L+(D<<20&4294967295|D>>>12),D=I+(L^H&(O^L))+M[13]+2850285829&4294967295,I=O+(D<<5&4294967295|D>>>27),D=H+(O^L&(I^O))+M[2]+4243563512&4294967295,H=I+(D<<9&4294967295|D>>>23),D=L+(I^O&(H^I))+M[7]+1735328473&4294967295,L=H+(D<<14&4294967295|D>>>18),D=O+(H^I&(L^H))+M[12]+2368359562&4294967295,O=L+(D<<20&4294967295|D>>>12),D=I+(O^L^H)+M[5]+4294588738&4294967295,I=O+(D<<4&4294967295|D>>>28),D=H+(I^O^L)+M[8]+2272392833&4294967295,H=I+(D<<11&4294967295|D>>>21),D=L+(H^I^O)+M[11]+1839030562&4294967295,L=H+(D<<16&4294967295|D>>>16),D=O+(L^H^I)+M[14]+4259657740&4294967295,O=L+(D<<23&4294967295|D>>>9),D=I+(O^L^H)+M[1]+2763975236&4294967295,I=O+(D<<4&4294967295|D>>>28),D=H+(I^O^L)+M[4]+1272893353&4294967295,H=I+(D<<11&4294967295|D>>>21),D=L+(H^I^O)+M[7]+4139469664&4294967295,L=H+(D<<16&4294967295|D>>>16),D=O+(L^H^I)+M[10]+3200236656&4294967295,O=L+(D<<23&4294967295|D>>>9),D=I+(O^L^H)+M[13]+681279174&4294967295,I=O+(D<<4&4294967295|D>>>28),D=H+(I^O^L)+M[0]+3936430074&4294967295,H=I+(D<<11&4294967295|D>>>21),D=L+(H^I^O)+M[3]+3572445317&4294967295,L=H+(D<<16&4294967295|D>>>16),D=O+(L^H^I)+M[6]+76029189&4294967295,O=L+(D<<23&4294967295|D>>>9),D=I+(O^L^H)+M[9]+3654602809&4294967295,I=O+(D<<4&4294967295|D>>>28),D=H+(I^O^L)+M[12]+3873151461&4294967295,H=I+(D<<11&4294967295|D>>>21),D=L+(H^I^O)+M[15]+530742520&4294967295,L=H+(D<<16&4294967295|D>>>16),D=O+(L^H^I)+M[2]+3299628645&4294967295,O=L+(D<<23&4294967295|D>>>9),D=I+(L^(O|~H))+M[0]+4096336452&4294967295,I=O+(D<<6&4294967295|D>>>26),D=H+(O^(I|~L))+M[7]+1126891415&4294967295,H=I+(D<<10&4294967295|D>>>22),D=L+(I^(H|~O))+M[14]+2878612391&4294967295,L=H+(D<<15&4294967295|D>>>17),D=O+(H^(L|~I))+M[5]+4237533241&4294967295,O=L+(D<<21&4294967295|D>>>11),D=I+(L^(O|~H))+M[12]+1700485571&4294967295,I=O+(D<<6&4294967295|D>>>26),D=H+(O^(I|~L))+M[3]+2399980690&4294967295,H=I+(D<<10&4294967295|D>>>22),D=L+(I^(H|~O))+M[10]+4293915773&4294967295,L=H+(D<<15&4294967295|D>>>17),D=O+(H^(L|~I))+M[1]+2240044497&4294967295,O=L+(D<<21&4294967295|D>>>11),D=I+(L^(O|~H))+M[8]+1873313359&4294967295,I=O+(D<<6&4294967295|D>>>26),D=H+(O^(I|~L))+M[15]+4264355552&4294967295,H=I+(D<<10&4294967295|D>>>22),D=L+(I^(H|~O))+M[6]+2734768916&4294967295,L=H+(D<<15&4294967295|D>>>17),D=O+(H^(L|~I))+M[13]+1309151649&4294967295,O=L+(D<<21&4294967295|D>>>11),D=I+(L^(O|~H))+M[4]+4149444226&4294967295,I=O+(D<<6&4294967295|D>>>26),D=H+(O^(I|~L))+M[11]+3174756917&4294967295,H=I+(D<<10&4294967295|D>>>22),D=L+(I^(H|~O))+M[2]+718787259&4294967295,L=H+(D<<15&4294967295|D>>>17),D=O+(H^(L|~I))+M[9]+3951481745&4294967295,k.g[0]=k.g[0]+I&4294967295,k.g[1]=k.g[1]+(L+(D<<21&4294967295|D>>>11))&4294967295,k.g[2]=k.g[2]+L&4294967295,k.g[3]=k.g[3]+H&4294967295}r.prototype.u=function(k,I){I===void 0&&(I=k.length);for(var O=I-this.blockSize,M=this.B,L=this.h,H=0;H<I;){if(L==0)for(;H<=O;)i(this,k,H),H+=this.blockSize;if(typeof k=="string"){for(;H<I;)if(M[L++]=k.charCodeAt(H++),L==this.blockSize){i(this,M),L=0;break}}else for(;H<I;)if(M[L++]=k[H++],L==this.blockSize){i(this,M),L=0;break}}this.h=L,this.o+=I},r.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var I=1;I<k.length-8;++I)k[I]=0;var O=8*this.o;for(I=k.length-8;I<k.length;++I)k[I]=O&255,O/=256;for(this.u(k),k=Array(16),I=O=0;4>I;++I)for(var M=0;32>M;M+=8)k[O++]=this.g[I]>>>M&255;return k};function s(k,I){var O=a;return Object.prototype.hasOwnProperty.call(O,k)?O[k]:O[k]=I(k)}function o(k,I){this.h=I;for(var O=[],M=!0,L=k.length-1;0<=L;L--){var H=k[L]|0;M&&H==I||(O[L]=H,M=!1)}this.g=O}var a={};function u(k){return-128<=k&&128>k?s(k,function(I){return new o([I|0],0>I?-1:0)}):new o([k|0],0>k?-1:0)}function l(k){if(isNaN(k)||!isFinite(k))return f;if(0>k)return g(l(-k));for(var I=[],O=1,M=0;k>=O;M++)I[M]=k/O|0,O*=4294967296;return new o(I,0)}function c(k,I){if(k.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(k.charAt(0)=="-")return g(c(k.substring(1),I));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var O=l(Math.pow(I,8)),M=f,L=0;L<k.length;L+=8){var H=Math.min(8,k.length-L),D=parseInt(k.substring(L,L+H),I);8>H?(H=l(Math.pow(I,H)),M=M.j(H).add(l(D))):(M=M.j(O),M=M.add(l(D)))}return M}var f=u(0),d=u(1),h=u(16777216);e=o.prototype,e.m=function(){if(m(this))return-g(this).m();for(var k=0,I=1,O=0;O<this.g.length;O++){var M=this.i(O);k+=(0<=M?M:4294967296+M)*I,I*=4294967296}return k},e.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(p(this))return"0";if(m(this))return"-"+g(this).toString(k);for(var I=l(Math.pow(k,6)),O=this,M="";;){var L=w(O,I).g;O=b(O,L.j(I));var H=((0<O.g.length?O.g[0]:O.h)>>>0).toString(k);if(O=L,p(O))return H+M;for(;6>H.length;)H="0"+H;M=H+M}},e.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function p(k){if(k.h!=0)return!1;for(var I=0;I<k.g.length;I++)if(k.g[I]!=0)return!1;return!0}function m(k){return k.h==-1}e.l=function(k){return k=b(this,k),m(k)?-1:p(k)?0:1};function g(k){for(var I=k.g.length,O=[],M=0;M<I;M++)O[M]=~k.g[M];return new o(O,~k.h).add(d)}e.abs=function(){return m(this)?g(this):this},e.add=function(k){for(var I=Math.max(this.g.length,k.g.length),O=[],M=0,L=0;L<=I;L++){var H=M+(this.i(L)&65535)+(k.i(L)&65535),D=(H>>>16)+(this.i(L)>>>16)+(k.i(L)>>>16);M=D>>>16,H&=65535,D&=65535,O[L]=D<<16|H}return new o(O,O[O.length-1]&-2147483648?-1:0)};function b(k,I){return k.add(g(I))}e.j=function(k){if(p(this)||p(k))return f;if(m(this))return m(k)?g(this).j(g(k)):g(g(this).j(k));if(m(k))return g(this.j(g(k)));if(0>this.l(h)&&0>k.l(h))return l(this.m()*k.m());for(var I=this.g.length+k.g.length,O=[],M=0;M<2*I;M++)O[M]=0;for(M=0;M<this.g.length;M++)for(var L=0;L<k.g.length;L++){var H=this.i(M)>>>16,D=this.i(M)&65535,B=k.i(L)>>>16,U=k.i(L)&65535;O[2*M+2*L]+=D*U,y(O,2*M+2*L),O[2*M+2*L+1]+=H*U,y(O,2*M+2*L+1),O[2*M+2*L+1]+=D*B,y(O,2*M+2*L+1),O[2*M+2*L+2]+=H*B,y(O,2*M+2*L+2)}for(M=0;M<I;M++)O[M]=O[2*M+1]<<16|O[2*M];for(M=I;M<2*I;M++)O[M]=0;return new o(O,0)};function y(k,I){for(;(k[I]&65535)!=k[I];)k[I+1]+=k[I]>>>16,k[I]&=65535,I++}function x(k,I){this.g=k,this.h=I}function w(k,I){if(p(I))throw Error("division by zero");if(p(k))return new x(f,f);if(m(k))return I=w(g(k),I),new x(g(I.g),g(I.h));if(m(I))return I=w(k,g(I)),new x(g(I.g),I.h);if(30<k.g.length){if(m(k)||m(I))throw Error("slowDivide_ only works with positive integers.");for(var O=d,M=I;0>=M.l(k);)O=T(O),M=T(M);var L=A(O,1),H=A(M,1);for(M=A(M,2),O=A(O,2);!p(M);){var D=H.add(M);0>=D.l(k)&&(L=L.add(O),H=D),M=A(M,1),O=A(O,1)}return I=b(k,L.j(I)),new x(L,I)}for(L=f;0<=k.l(I);){for(O=Math.max(1,Math.floor(k.m()/I.m())),M=Math.ceil(Math.log(O)/Math.LN2),M=48>=M?1:Math.pow(2,M-48),H=l(O),D=H.j(I);m(D)||0<D.l(k);)O-=M,H=l(O),D=H.j(I);p(H)&&(H=d),L=L.add(H),k=b(k,D)}return new x(L,k)}e.A=function(k){return w(this,k).h},e.and=function(k){for(var I=Math.max(this.g.length,k.g.length),O=[],M=0;M<I;M++)O[M]=this.i(M)&k.i(M);return new o(O,this.h&k.h)},e.or=function(k){for(var I=Math.max(this.g.length,k.g.length),O=[],M=0;M<I;M++)O[M]=this.i(M)|k.i(M);return new o(O,this.h|k.h)},e.xor=function(k){for(var I=Math.max(this.g.length,k.g.length),O=[],M=0;M<I;M++)O[M]=this.i(M)^k.i(M);return new o(O,this.h^k.h)};function T(k){for(var I=k.g.length+1,O=[],M=0;M<I;M++)O[M]=k.i(M)<<1|k.i(M-1)>>>31;return new o(O,k.h)}function A(k,I){var O=I>>5;I%=32;for(var M=k.g.length-O,L=[],H=0;H<M;H++)L[H]=0<I?k.i(H+O)>>>I|k.i(H+O+1)<<32-I:k.i(H+O);return new o(L,k.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Abe=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=c,Xv=o}).apply(typeof Tie<"u"?Tie:typeof self<"u"?self:typeof window<"u"?window:{});var v6=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var kbe,w3,Rbe,CP,FU,Ibe,Pbe,Nbe;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(F,re,le){return F==Array.prototype||F==Object.prototype||(F[re]=le.value),F};function n(F){F=[typeof globalThis=="object"&&globalThis,F,typeof window=="object"&&window,typeof self=="object"&&self,typeof v6=="object"&&v6];for(var re=0;re<F.length;++re){var le=F[re];if(le&&le.Math==Math)return le}throw Error("Cannot find global object")}var r=n(this);function i(F,re){if(re)e:{var le=r;F=F.split(".");for(var be=0;be<F.length-1;be++){var Xe=F[be];if(!(Xe in le))break e;le=le[Xe]}F=F[F.length-1],be=le[F],re=re(be),re!=be&&re!=null&&t(le,F,{configurable:!0,writable:!0,value:re})}}function s(F,re){F instanceof String&&(F+="");var le=0,be=!1,Xe={next:function(){if(!be&&le<F.length){var ut=le++;return{value:re(ut,F[ut]),done:!1}}return be=!0,{done:!0,value:void 0}}};return Xe[Symbol.iterator]=function(){return Xe},Xe}i("Array.prototype.values",function(F){return F||function(){return s(this,function(re,le){return le})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(F){var re=typeof F;return re=re!="object"?re:F?Array.isArray(F)?"array":re:"null",re=="array"||re=="object"&&typeof F.length=="number"}function l(F){var re=typeof F;return re=="object"&&F!=null||re=="function"}function c(F,re,le){return F.call.apply(F.bind,arguments)}function f(F,re,le){if(!F)throw Error();if(2<arguments.length){var be=Array.prototype.slice.call(arguments,2);return function(){var Xe=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Xe,be),F.apply(re,Xe)}}return function(){return F.apply(re,arguments)}}function d(F,re,le){return d=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?c:f,d.apply(null,arguments)}function h(F,re){var le=Array.prototype.slice.call(arguments,1);return function(){var be=le.slice();return be.push.apply(be,arguments),F.apply(this,be)}}function p(F,re){function le(){}le.prototype=re.prototype,F.aa=re.prototype,F.prototype=new le,F.prototype.constructor=F,F.Qb=function(be,Xe,ut){for(var Xt=Array(arguments.length-2),Lr=2;Lr<arguments.length;Lr++)Xt[Lr-2]=arguments[Lr];return re.prototype[Xe].apply(be,Xt)}}function m(F){const re=F.length;if(0<re){const le=Array(re);for(let be=0;be<re;be++)le[be]=F[be];return le}return[]}function g(F,re){for(let le=1;le<arguments.length;le++){const be=arguments[le];if(u(be)){const Xe=F.length||0,ut=be.length||0;F.length=Xe+ut;for(let Xt=0;Xt<ut;Xt++)F[Xe+Xt]=be[Xt]}else F.push(be)}}class b{constructor(re,le){this.i=re,this.j=le,this.h=0,this.g=null}get(){let re;return 0<this.h?(this.h--,re=this.g,this.g=re.next,re.next=null):re=this.i(),re}}function y(F){return/^[\s\xa0]*$/.test(F)}function x(){var F=a.navigator;return F&&(F=F.userAgent)?F:""}function w(F){return w[" "](F),F}w[" "]=function(){};var T=x().indexOf("Gecko")!=-1&&!(x().toLowerCase().indexOf("webkit")!=-1&&x().indexOf("Edge")==-1)&&!(x().indexOf("Trident")!=-1||x().indexOf("MSIE")!=-1)&&x().indexOf("Edge")==-1;function A(F,re,le){for(const be in F)re.call(le,F[be],be,F)}function k(F,re){for(const le in F)re.call(void 0,F[le],le,F)}function I(F){const re={};for(const le in F)re[le]=F[le];return re}const O="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(F,re){let le,be;for(let Xe=1;Xe<arguments.length;Xe++){be=arguments[Xe];for(le in be)F[le]=be[le];for(let ut=0;ut<O.length;ut++)le=O[ut],Object.prototype.hasOwnProperty.call(be,le)&&(F[le]=be[le])}}function L(F){var re=1;F=F.split(":");const le=[];for(;0<re&&F.length;)le.push(F.shift()),re--;return F.length&&le.push(F.join(":")),le}function H(F){a.setTimeout(()=>{throw F},0)}function D(){var F=ue;let re=null;return F.g&&(re=F.g,F.g=F.g.next,F.g||(F.h=null),re.next=null),re}class B{constructor(){this.h=this.g=null}add(re,le){const be=U.get();be.set(re,le),this.h?this.h.next=be:this.g=be,this.h=be}}var U=new b(()=>new G,F=>F.reset());class G{constructor(){this.next=this.g=this.h=null}set(re,le){this.h=re,this.g=le,this.next=null}reset(){this.next=this.g=this.h=null}}let ee,ne=!1,ue=new B,X=()=>{const F=a.Promise.resolve(void 0);ee=()=>{F.then(q)}};var q=()=>{for(var F;F=D();){try{F.h.call(F.g)}catch(le){H(le)}var re=U;re.j(F),100>re.h&&(re.h++,F.next=re.g,re.g=F)}ne=!1};function te(){this.s=this.s,this.C=this.C}te.prototype.s=!1,te.prototype.ma=function(){this.s||(this.s=!0,this.N())},te.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function W(F,re){this.type=F,this.g=this.target=re,this.defaultPrevented=!1}W.prototype.h=function(){this.defaultPrevented=!0};var Z=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var F=!1,re=Object.defineProperty({},"passive",{get:function(){F=!0}});try{const le=()=>{};a.addEventListener("test",le,re),a.removeEventListener("test",le,re)}catch{}return F}();function oe(F,re){if(W.call(this,F?F.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,F){var le=this.type=F.type,be=F.changedTouches&&F.changedTouches.length?F.changedTouches[0]:null;if(this.target=F.target||F.srcElement,this.g=re,re=F.relatedTarget){if(T){e:{try{w(re.nodeName);var Xe=!0;break e}catch{}Xe=!1}Xe||(re=null)}}else le=="mouseover"?re=F.fromElement:le=="mouseout"&&(re=F.toElement);this.relatedTarget=re,be?(this.clientX=be.clientX!==void 0?be.clientX:be.pageX,this.clientY=be.clientY!==void 0?be.clientY:be.pageY,this.screenX=be.screenX||0,this.screenY=be.screenY||0):(this.clientX=F.clientX!==void 0?F.clientX:F.pageX,this.clientY=F.clientY!==void 0?F.clientY:F.pageY,this.screenX=F.screenX||0,this.screenY=F.screenY||0),this.button=F.button,this.key=F.key||"",this.ctrlKey=F.ctrlKey,this.altKey=F.altKey,this.shiftKey=F.shiftKey,this.metaKey=F.metaKey,this.pointerId=F.pointerId||0,this.pointerType=typeof F.pointerType=="string"?F.pointerType:pe[F.pointerType]||"",this.state=F.state,this.i=F,F.defaultPrevented&&oe.aa.h.call(this)}}p(oe,W);var pe={2:"touch",3:"pen",4:"mouse"};oe.prototype.h=function(){oe.aa.h.call(this);var F=this.i;F.preventDefault?F.preventDefault():F.returnValue=!1};var ce="closure_listenable_"+(1e6*Math.random()|0),he=0;function Ee(F,re,le,be,Xe){this.listener=F,this.proxy=null,this.src=re,this.type=le,this.capture=!!be,this.ha=Xe,this.key=++he,this.da=this.fa=!1}function Ae(F){F.da=!0,F.listener=null,F.proxy=null,F.src=null,F.ha=null}function ge(F){this.src=F,this.g={},this.h=0}ge.prototype.add=function(F,re,le,be,Xe){var ut=F.toString();F=this.g[ut],F||(F=this.g[ut]=[],this.h++);var Xt=Oe(F,re,be,Xe);return-1<Xt?(re=F[Xt],le||(re.fa=!1)):(re=new Ee(re,this.src,ut,!!be,Xe),re.fa=le,F.push(re)),re};function me(F,re){var le=re.type;if(le in F.g){var be=F.g[le],Xe=Array.prototype.indexOf.call(be,re,void 0),ut;(ut=0<=Xe)&&Array.prototype.splice.call(be,Xe,1),ut&&(Ae(re),F.g[le].length==0&&(delete F.g[le],F.h--))}}function Oe(F,re,le,be){for(var Xe=0;Xe<F.length;++Xe){var ut=F[Xe];if(!ut.da&&ut.listener==re&&ut.capture==!!le&&ut.ha==be)return Xe}return-1}var Me="closure_lm_"+(1e6*Math.random()|0),Ye={};function lt(F,re,le,be,Xe){if(Array.isArray(re)){for(var ut=0;ut<re.length;ut++)lt(F,re[ut],le,be,Xe);return null}return le=sn(le),F&&F[ce]?F.K(re,le,l(be)?!!be.capture:!1,Xe):We(F,re,le,!1,be,Xe)}function We(F,re,le,be,Xe,ut){if(!re)throw Error("Invalid event type");var Xt=l(Xe)?!!Xe.capture:!!Xe,Lr=Ke(F);if(Lr||(F[Me]=Lr=new ge(F)),le=Lr.add(re,le,be,Xt,ut),le.proxy)return le;if(be=nt(),le.proxy=be,be.src=F,be.listener=le,F.addEventListener)Z||(Xe=Xt),Xe===void 0&&(Xe=!1),F.addEventListener(re.toString(),be,Xe);else if(F.attachEvent)F.attachEvent(Rt(re.toString()),be);else if(F.addListener&&F.removeListener)F.addListener(be);else throw Error("addEventListener and attachEvent are unavailable.");return le}function nt(){function F(le){return re.call(F.src,F.listener,le)}const re=Et;return F}function yt(F,re,le,be,Xe){if(Array.isArray(re))for(var ut=0;ut<re.length;ut++)yt(F,re[ut],le,be,Xe);else be=l(be)?!!be.capture:!!be,le=sn(le),F&&F[ce]?(F=F.i,re=String(re).toString(),re in F.g&&(ut=F.g[re],le=Oe(ut,le,be,Xe),-1<le&&(Ae(ut[le]),Array.prototype.splice.call(ut,le,1),ut.length==0&&(delete F.g[re],F.h--)))):F&&(F=Ke(F))&&(re=F.g[re.toString()],F=-1,re&&(F=Oe(re,le,be,Xe)),(le=-1<F?re[F]:null)&&_t(le))}function _t(F){if(typeof F!="number"&&F&&!F.da){var re=F.src;if(re&&re[ce])me(re.i,F);else{var le=F.type,be=F.proxy;re.removeEventListener?re.removeEventListener(le,be,F.capture):re.detachEvent?re.detachEvent(Rt(le),be):re.addListener&&re.removeListener&&re.removeListener(be),(le=Ke(re))?(me(le,F),le.h==0&&(le.src=null,re[Me]=null)):Ae(F)}}}function Rt(F){return F in Ye?Ye[F]:Ye[F]="on"+F}function Et(F,re){if(F.da)F=!0;else{re=new oe(re,this);var le=F.listener,be=F.ha||F.src;F.fa&&_t(F),F=le.call(be,re)}return F}function Ke(F){return F=F[Me],F instanceof ge?F:null}var Lt="__closure_events_fn_"+(1e9*Math.random()>>>0);function sn(F){return typeof F=="function"?F:(F[Lt]||(F[Lt]=function(re){return F.handleEvent(re)}),F[Lt])}function Fe(){te.call(this),this.i=new ge(this),this.M=this,this.F=null}p(Fe,te),Fe.prototype[ce]=!0,Fe.prototype.removeEventListener=function(F,re,le,be){yt(this,F,re,le,be)};function Qe(F,re){var le,be=F.F;if(be)for(le=[];be;be=be.F)le.push(be);if(F=F.M,be=re.type||re,typeof re=="string")re=new W(re,F);else if(re instanceof W)re.target=re.target||F;else{var Xe=re;re=new W(be,F),M(re,Xe)}if(Xe=!0,le)for(var ut=le.length-1;0<=ut;ut--){var Xt=re.g=le[ut];Xe=wt(Xt,be,!0,re)&&Xe}if(Xt=re.g=F,Xe=wt(Xt,be,!0,re)&&Xe,Xe=wt(Xt,be,!1,re)&&Xe,le)for(ut=0;ut<le.length;ut++)Xt=re.g=le[ut],Xe=wt(Xt,be,!1,re)&&Xe}Fe.prototype.N=function(){if(Fe.aa.N.call(this),this.i){var F=this.i,re;for(re in F.g){for(var le=F.g[re],be=0;be<le.length;be++)Ae(le[be]);delete F.g[re],F.h--}}this.F=null},Fe.prototype.K=function(F,re,le,be){return this.i.add(String(F),re,!1,le,be)},Fe.prototype.L=function(F,re,le,be){return this.i.add(String(F),re,!0,le,be)};function wt(F,re,le,be){if(re=F.i.g[String(re)],!re)return!0;re=re.concat();for(var Xe=!0,ut=0;ut<re.length;++ut){var Xt=re[ut];if(Xt&&!Xt.da&&Xt.capture==le){var Lr=Xt.listener,Us=Xt.ha||Xt.src;Xt.fa&&me(F.i,Xt),Xe=Lr.call(Us,be)!==!1&&Xe}}return Xe&&!be.defaultPrevented}function Vt(F,re,le){if(typeof F=="function")le&&(F=d(F,le));else if(F&&typeof F.handleEvent=="function")F=d(F.handleEvent,F);else throw Error("Invalid listener argument");return 2147483647<Number(re)?-1:a.setTimeout(F,re||0)}function Wt(F){F.g=Vt(()=>{F.g=null,F.i&&(F.i=!1,Wt(F))},F.l);const re=F.h;F.h=null,F.m.apply(null,re)}class bn extends te{constructor(re,le){super(),this.m=re,this.l=le,this.h=null,this.i=!1,this.g=null}j(re){this.h=arguments,this.g?this.i=!0:Wt(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Nn(F){te.call(this),this.h=F,this.g={}}p(Nn,te);var Zn=[];function wr(F){A(F.g,function(re,le){this.g.hasOwnProperty(le)&&_t(re)},F),F.g={}}Nn.prototype.N=function(){Nn.aa.N.call(this),wr(this)},Nn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Hn=a.JSON.stringify,nr=a.JSON.parse,Ei=class{stringify(F){return a.JSON.stringify(F,void 0)}parse(F){return a.JSON.parse(F,void 0)}};function Dr(){}Dr.prototype.h=null;function Co(F){return F.h||(F.h=F.i())}function Ji(){}var Di={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Zi(){W.call(this,"d")}p(Zi,W);function ei(){W.call(this,"c")}p(ei,W);var po={},Wu=null;function Ea(){return Wu=Wu||new Fe}po.La="serverreachability";function Sa(F){W.call(this,po.La,F)}p(Sa,W);function Kr(F){const re=Ea();Qe(re,new Sa(re))}po.STAT_EVENT="statevent";function Oi(F,re){W.call(this,po.STAT_EVENT,F),this.stat=re}p(Oi,W);function si(F){const re=Ea();Qe(re,new Oi(re,F))}po.Ma="timingevent";function Js(F,re){W.call(this,po.Ma,F),this.size=re}p(Js,W);function Xr(F,re){if(typeof F!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){F()},re)}function Hi(){this.g=!0}Hi.prototype.xa=function(){this.g=!1};function Zs(F,re,le,be,Xe,ut){F.info(function(){if(F.g)if(ut)for(var Xt="",Lr=ut.split("&"),Us=0;Us<Lr.length;Us++){var Pr=Lr[Us].split("=");if(1<Pr.length){var ai=Pr[0];Pr=Pr[1];var cs=ai.split("_");Xt=2<=cs.length&&cs[1]=="type"?Xt+(ai+"="+Pr+"&"):Xt+(ai+"=redacted&")}}else Xt=null;else Xt=ut;return"XMLHTTP REQ ("+be+") [attempt "+Xe+"]: "+re+`
`+le+`
`+Xt})}function mo(F,re,le,be,Xe,ut,Xt){F.info(function(){return"XMLHTTP RESP ("+be+") [ attempt "+Xe+"]: "+re+`
`+le+`
`+ut+" "+Xt})}function Qo(F,re,le,be){F.info(function(){return"XMLHTTP TEXT ("+re+"): "+dd(F,le)+(be?" "+be:"")})}function Ta(F,re){F.info(function(){return"TIMEOUT: "+re})}Hi.prototype.info=function(){};function dd(F,re){if(!F.g)return re;if(!re)return null;try{var le=JSON.parse(re);if(le){for(F=0;F<le.length;F++)if(Array.isArray(le[F])){var be=le[F];if(!(2>be.length)){var Xe=be[1];if(Array.isArray(Xe)&&!(1>Xe.length)){var ut=Xe[0];if(ut!="noop"&&ut!="stop"&&ut!="close")for(var Xt=1;Xt<Xe.length;Xt++)Xe[Xt]=""}}}}return Hn(le)}catch{return re}}var Hr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Rl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},bs;function Ya(){}p(Ya,Dr),Ya.prototype.g=function(){return new XMLHttpRequest},Ya.prototype.i=function(){return{}},bs=new Ya;function Jo(F,re,le,be){this.j=F,this.i=re,this.l=le,this.R=be||1,this.U=new Nn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new mh}function mh(){this.i=null,this.g="",this.h=!1}var hd={},df={};function hf(F,re,le){F.L=1,F.v=lr(kt(re)),F.m=le,F.P=!0,yc(F,null)}function yc(F,re){F.F=Date.now(),Er(F),F.A=kt(F.v);var le=F.A,be=F.R;Array.isArray(be)||(be=[String(be)]),cr(le.i,"t",be),F.C=0,le=F.j.J,F.h=new mh,F.g=Bg(F.j,le?re:null,!F.m),0<F.O&&(F.M=new bn(d(F.Y,F,F.g),F.O)),re=F.U,le=F.g,be=F.ca;var Xe="readystatechange";Array.isArray(Xe)||(Xe&&(Zn[0]=Xe.toString()),Xe=Zn);for(var ut=0;ut<Xe.length;ut++){var Xt=lt(le,Xe[ut],be||re.handleEvent,!1,re.h||re);if(!Xt)break;re.g[Xt.key]=Xt}re=F.H?I(F.H):{},F.m?(F.u||(F.u="POST"),re["Content-Type"]="application/x-www-form-urlencoded",F.g.ea(F.A,F.u,F.m,re)):(F.u="GET",F.g.ea(F.A,F.u,null,re)),Kr(),Zs(F.i,F.u,F.A,F.l,F.R,F.m)}Jo.prototype.ca=function(F){F=F.target;const re=this.M;re&&Ir(F)==3?re.j():this.Y(F)},Jo.prototype.Y=function(F){try{if(F==this.g)e:{const cs=Ir(this.g);var re=this.g.Ba();const Io=this.g.Z();if(!(3>cs)&&(cs!=3||this.g&&(this.h.h||this.g.oa()||_s(this.g)))){this.J||cs!=4||re==7||(re==8||0>=Io?Kr(3):Kr(2)),xs(this);var le=this.g.Z();this.X=le;t:if(vc(this)){var be=_s(this.g);F="";var Xe=be.length,ut=Ir(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){As(this),Ka(this);var Xt="";break t}this.h.i=new a.TextDecoder}for(re=0;re<Xe;re++)this.h.h=!0,F+=this.h.i.decode(be[re],{stream:!(ut&&re==Xe-1)});be.length=0,this.h.g+=F,this.C=0,Xt=this.h.g}else Xt=this.g.oa();if(this.o=le==200,mo(this.i,this.u,this.A,this.l,this.R,cs,le),this.o){if(this.T&&!this.K){t:{if(this.g){var Lr,Us=this.g;if((Lr=Us.g?Us.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(Lr)){var Pr=Lr;break t}}Pr=null}if(le=Pr)Qo(this.i,this.l,le,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Il(this,le);else{this.o=!1,this.s=3,si(12),As(this),Ka(this);break e}}if(this.P){le=!0;let go;for(;!this.J&&this.C<Xt.length;)if(go=bc(this,Xt),go==df){cs==4&&(this.s=4,si(14),le=!1),Qo(this.i,this.l,null,"[Incomplete Response]");break}else if(go==hd){this.s=4,si(15),Qo(this.i,this.l,Xt,"[Invalid Chunk]"),le=!1;break}else Qo(this.i,this.l,go,null),Il(this,go);if(vc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),cs!=4||Xt.length!=0||this.h.h||(this.s=1,si(16),le=!1),this.o=this.o&&le,!le)Qo(this.i,this.l,Xt,"[Invalid Chunked Response]"),As(this),Ka(this);else if(0<Xt.length&&!this.W){this.W=!0;var ai=this.j;ai.g==this&&ai.ba&&!ai.M&&(ai.j.info("Great, no buffering proxy detected. Bytes received: "+Xt.length),ka(ai),ai.M=!0,si(11))}}else Qo(this.i,this.l,Xt,null),Il(this,Xt);cs==4&&As(this),this.o&&!this.J&&(cs==4?vi(this.j,this):(this.o=!1,Er(this)))}else ta(this.g),le==400&&0<Xt.indexOf("Unknown SID")?(this.s=3,si(12)):(this.s=0,si(13)),As(this),Ka(this)}}}catch{}finally{}};function vc(F){return F.g?F.u=="GET"&&F.L!=2&&F.j.Ca:!1}function bc(F,re){var le=F.C,be=re.indexOf(`
`,le);return be==-1?df:(le=Number(re.substring(le,be)),isNaN(le)?hd:(be+=1,be+le>re.length?df:(re=re.slice(be,be+le),F.C=be+le,re)))}Jo.prototype.cancel=function(){this.J=!0,As(this)};function Er(F){F.S=Date.now()+F.I,xc(F,F.I)}function xc(F,re){if(F.B!=null)throw Error("WatchDog timer not null");F.B=Xr(d(F.ba,F),re)}function xs(F){F.B&&(a.clearTimeout(F.B),F.B=null)}Jo.prototype.ba=function(){this.B=null;const F=Date.now();0<=F-this.S?(Ta(this.i,this.A),this.L!=2&&(Kr(),si(17)),As(this),this.s=2,Ka(this)):xc(this,this.S-F)};function Ka(F){F.j.G==0||F.J||vi(F.j,F)}function As(F){xs(F);var re=F.M;re&&typeof re.ma=="function"&&re.ma(),F.M=null,wr(F.U),F.g&&(re=F.g,F.g=null,re.abort(),re.ma())}function Il(F,re){try{var le=F.j;if(le.G!=0&&(le.g==F||rr(le.h,F))){if(!F.K&&rr(le.h,F)&&le.G==3){try{var be=le.Da.g.parse(re)}catch{be=null}if(Array.isArray(be)&&be.length==3){var Xe=be;if(Xe[0]==0){e:if(!le.u){if(le.g)if(le.g.F+3e3<F.F)gd(le),to(le);else break e;yi(le),si(18)}}else le.za=Xe[1],0<le.za-le.T&&37500>Xe[2]&&le.F&&le.v==0&&!le.C&&(le.C=Xr(d(le.Za,le),6e3));if(1>=ti(le.h)&&le.ca){try{le.ca()}catch{}le.ca=void 0}}else Ku(le,11)}else if((F.K||le.g==F)&&gd(le),!y(re))for(Xe=le.Da.g.parse(re),re=0;re<Xe.length;re++){let Pr=Xe[re];if(le.T=Pr[0],Pr=Pr[1],le.G==2)if(Pr[0]=="c"){le.K=Pr[1],le.ia=Pr[2];const ai=Pr[3];ai!=null&&(le.la=ai,le.j.info("VER="+le.la));const cs=Pr[4];cs!=null&&(le.Aa=cs,le.j.info("SVER="+le.Aa));const Io=Pr[5];Io!=null&&typeof Io=="number"&&0<Io&&(be=1.5*Io,le.L=be,le.j.info("backChannelRequestTimeoutMs_="+be)),be=le;const go=F.g;if(go){const yo=go.g?go.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(yo){var ut=be.h;ut.g||yo.indexOf("spdy")==-1&&yo.indexOf("quic")==-1&&yo.indexOf("h2")==-1||(ut.j=ut.l,ut.g=new Set,ut.h&&(ve(ut,ut.h),ut.h=null))}if(be.D){const Ol=go.g?go.g.getResponseHeader("X-HTTP-Session-Id"):null;Ol&&(be.ya=Ol,Sn(be.I,be.D,Ol))}}le.G=3,le.l&&le.l.ua(),le.ba&&(le.R=Date.now()-F.F,le.j.info("Handshake RTT: "+le.R+"ms")),be=le;var Xt=F;if(be.qa=yd(be,be.J?be.ia:null,be.W),Xt.K){Ie(be.h,Xt);var Lr=Xt,Us=be.L;Us&&(Lr.I=Us),Lr.B&&(xs(Lr),Er(Lr)),be.g=Xt}else Ro(be);0<le.i.length&&na(le)}else Pr[0]!="stop"&&Pr[0]!="close"||Ku(le,7);else le.G==3&&(Pr[0]=="stop"||Pr[0]=="close"?Pr[0]=="stop"?Ku(le,7):Li(le):Pr[0]!="noop"&&le.l&&le.l.ta(Pr),le.v=0)}}Kr(4)}catch{}}var _c=class{constructor(F,re){this.g=F,this.map=re}};function Zo(F){this.l=F||10,a.PerformanceNavigationTiming?(F=a.performance.getEntriesByType("navigation"),F=0<F.length&&(F[0].nextHopProtocol=="hq"||F[0].nextHopProtocol=="h2")):F=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=F?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function qi(F){return F.h?!0:F.g?F.g.size>=F.j:!1}function ti(F){return F.h?1:F.g?F.g.size:0}function rr(F,re){return F.h?F.h==re:F.g?F.g.has(re):!1}function ve(F,re){F.g?F.g.add(re):F.h=re}function Ie(F,re){F.h&&F.h==re?F.h=null:F.g&&F.g.has(re)&&F.g.delete(re)}Zo.prototype.cancel=function(){if(this.i=Se(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const F of this.g.values())F.cancel();this.g.clear()}};function Se(F){if(F.h!=null)return F.i.concat(F.h.D);if(F.g!=null&&F.g.size!==0){let re=F.i;for(const le of F.g.values())re=re.concat(le.D);return re}return m(F.i)}function Be(F){if(F.V&&typeof F.V=="function")return F.V();if(typeof Map<"u"&&F instanceof Map||typeof Set<"u"&&F instanceof Set)return Array.from(F.values());if(typeof F=="string")return F.split("");if(u(F)){for(var re=[],le=F.length,be=0;be<le;be++)re.push(F[be]);return re}re=[],le=0;for(be in F)re[le++]=F[be];return re}function Ue(F){if(F.na&&typeof F.na=="function")return F.na();if(!F.V||typeof F.V!="function"){if(typeof Map<"u"&&F instanceof Map)return Array.from(F.keys());if(!(typeof Set<"u"&&F instanceof Set)){if(u(F)||typeof F=="string"){var re=[];F=F.length;for(var le=0;le<F;le++)re.push(le);return re}re=[],le=0;for(const be in F)re[le++]=be;return re}}}function De(F,re){if(F.forEach&&typeof F.forEach=="function")F.forEach(re,void 0);else if(u(F)||typeof F=="string")Array.prototype.forEach.call(F,re,void 0);else for(var le=Ue(F),be=Be(F),Xe=be.length,ut=0;ut<Xe;ut++)re.call(void 0,be[ut],le&&le[ut],F)}var ht=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function At(F,re){if(F){F=F.split("&");for(var le=0;le<F.length;le++){var be=F[le].indexOf("="),Xe=null;if(0<=be){var ut=F[le].substring(0,be);Xe=F[le].substring(be+1)}else ut=F[le];re(ut,Xe?decodeURIComponent(Xe.replace(/\+/g," ")):"")}}}function Pt(F){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,F instanceof Pt){this.h=F.h,jt(this,F.j),this.o=F.o,this.g=F.g,Zt(this,F.s),this.l=F.l;var re=F.i,le=new eo;le.i=re.i,re.g&&(le.g=new Map(re.g),le.h=re.h),qn(this,le),this.m=F.m}else F&&(re=String(F).match(ht))?(this.h=!1,jt(this,re[1]||"",!0),this.o=_n(re[2]||""),this.g=_n(re[3]||"",!0),Zt(this,re[4]),this.l=_n(re[5]||"",!0),qn(this,re[6]||"",!0),this.m=_n(re[7]||"")):(this.h=!1,this.i=new eo(null,this.h))}Pt.prototype.toString=function(){var F=[],re=this.j;re&&F.push(br(re,Ao,!0),":");var le=this.g;return(le||re=="file")&&(F.push("//"),(re=this.o)&&F.push(br(re,Ao,!0),"@"),F.push(encodeURIComponent(String(le)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),le=this.s,le!=null&&F.push(":",String(le))),(le=this.l)&&(this.g&&le.charAt(0)!="/"&&F.push("/"),F.push(br(le,le.charAt(0)=="/"?pd:Pl,!0))),(le=this.i.toString())&&F.push("?",le),(le=this.m)&&F.push("#",br(le,pf)),F.join("")};function kt(F){return new Pt(F)}function jt(F,re,le){F.j=le?_n(re,!0):re,F.j&&(F.j=F.j.replace(/:$/,""))}function Zt(F,re){if(re){if(re=Number(re),isNaN(re)||0>re)throw Error("Bad port number "+re);F.s=re}else F.s=null}function qn(F,re,le){re instanceof eo?(F.i=re,Aa(F.i,F.h)):(le||(re=br(re,Gu)),F.i=new eo(re,F.h))}function Sn(F,re,le){F.i.set(re,le)}function lr(F){return Sn(F,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),F}function _n(F,re){return F?re?decodeURI(F.replace(/%25/g,"%2525")):decodeURIComponent(F):""}function br(F,re,le){return typeof F=="string"?(F=encodeURI(F).replace(re,ls),le&&(F=F.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),F):null}function ls(F){return F=F.charCodeAt(0),"%"+(F>>4&15).toString(16)+(F&15).toString(16)}var Ao=/[#\/\?@]/g,Pl=/[#\?:]/g,pd=/[#\?]/g,Gu=/[#\?@]/g,pf=/#/g;function eo(F,re){this.h=this.g=null,this.i=F||null,this.j=!!re}function Mi(F){F.g||(F.g=new Map,F.h=0,F.i&&At(F.i,function(re,le){F.add(decodeURIComponent(re.replace(/\+/g," ")),le)}))}e=eo.prototype,e.add=function(F,re){Mi(this),this.i=null,F=Ca(this,F);var le=this.g.get(F);return le||this.g.set(F,le=[]),le.push(re),this.h+=1,this};function ko(F,re){Mi(F),re=Ca(F,re),F.g.has(re)&&(F.i=null,F.h-=F.g.get(re).length,F.g.delete(re))}function ea(F,re){return Mi(F),re=Ca(F,re),F.g.has(re)}e.forEach=function(F,re){Mi(this),this.g.forEach(function(le,be){le.forEach(function(Xe){F.call(re,Xe,be,this)},this)},this)},e.na=function(){Mi(this);const F=Array.from(this.g.values()),re=Array.from(this.g.keys()),le=[];for(let be=0;be<re.length;be++){const Xe=F[be];for(let ut=0;ut<Xe.length;ut++)le.push(re[be])}return le},e.V=function(F){Mi(this);let re=[];if(typeof F=="string")ea(this,F)&&(re=re.concat(this.g.get(Ca(this,F))));else{F=Array.from(this.g.values());for(let le=0;le<F.length;le++)re=re.concat(F[le])}return re},e.set=function(F,re){return Mi(this),this.i=null,F=Ca(this,F),ea(this,F)&&(this.h-=this.g.get(F).length),this.g.set(F,[re]),this.h+=1,this},e.get=function(F,re){return F?(F=this.V(F),0<F.length?String(F[0]):re):re};function cr(F,re,le){ko(F,re),0<le.length&&(F.i=null,F.g.set(Ca(F,re),m(le)),F.h+=le.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const F=[],re=Array.from(this.g.keys());for(var le=0;le<re.length;le++){var be=re[le];const ut=encodeURIComponent(String(be)),Xt=this.V(be);for(be=0;be<Xt.length;be++){var Xe=ut;Xt[be]!==""&&(Xe+="="+encodeURIComponent(String(Xt[be]))),F.push(Xe)}}return this.i=F.join("&")};function Ca(F,re){return re=String(re),F.j&&(re=re.toLowerCase()),re}function Aa(F,re){re&&!F.j&&(Mi(F),F.i=null,F.g.forEach(function(le,be){var Xe=be.toLowerCase();be!=Xe&&(ko(this,be),cr(this,Xe,le))},F)),F.j=re}function gp(F,re){const le=new Hi;if(a.Image){const be=new Image;be.onload=h(ks,le,"TestLoadImage: loaded",!0,re,be),be.onerror=h(ks,le,"TestLoadImage: error",!1,re,be),be.onabort=h(ks,le,"TestLoadImage: abort",!1,re,be),be.ontimeout=h(ks,le,"TestLoadImage: timeout",!1,re,be),a.setTimeout(function(){be.ontimeout&&be.ontimeout()},1e4),be.src=F}else re(!1)}function Nl(F,re){const le=new Hi,be=new AbortController,Xe=setTimeout(()=>{be.abort(),ks(le,"TestPingServer: timeout",!1,re)},1e4);fetch(F,{signal:be.signal}).then(ut=>{clearTimeout(Xe),ut.ok?ks(le,"TestPingServer: ok",!0,re):ks(le,"TestPingServer: server error",!1,re)}).catch(()=>{clearTimeout(Xe),ks(le,"TestPingServer: error",!1,re)})}function ks(F,re,le,be,Xe){try{Xe&&(Xe.onload=null,Xe.onerror=null,Xe.onabort=null,Xe.ontimeout=null),be(le)}catch{}}function Rs(){this.g=new Ei}function md(F,re,le){const be=le||"";try{De(F,function(Xe,ut){let Xt=Xe;l(Xe)&&(Xt=Hn(Xe)),re.push(be+ut+"="+encodeURIComponent(Xt))})}catch(Xe){throw re.push(be+"type="+encodeURIComponent("_badmap")),Xe}}function wc(F){this.l=F.Ub||null,this.j=F.eb||!1}p(wc,Dr),wc.prototype.g=function(){return new Dl(this.l,this.j)},wc.prototype.i=function(F){return function(){return F}}({});function Dl(F,re){Fe.call(this),this.D=F,this.o=re,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}p(Dl,Fe),e=Dl.prototype,e.open=function(F,re){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=F,this.A=re,this.readyState=1,Gn(this)},e.send=function(F){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const re={headers:this.u,method:this.B,credentials:this.m,cache:void 0};F&&(re.body=F),(this.D||a).fetch(new Request(this.A,re)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,xr(this)),this.readyState=0},e.Sa=function(F){if(this.g&&(this.l=F,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=F.headers,this.readyState=2,Gn(this)),this.g&&(this.readyState=3,Gn(this),this.g)))if(this.responseType==="arraybuffer")F.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in F){if(this.j=F.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Y0(this)}else F.text().then(this.Ra.bind(this),this.ga.bind(this))};function Y0(F){F.j.read().then(F.Pa.bind(F)).catch(F.ga.bind(F))}e.Pa=function(F){if(this.g){if(this.o&&F.value)this.response.push(F.value);else if(!this.o){var re=F.value?F.value:new Uint8Array(0);(re=this.v.decode(re,{stream:!F.done}))&&(this.response=this.responseText+=re)}F.done?xr(this):Gn(this),this.readyState==3&&Y0(this)}},e.Ra=function(F){this.g&&(this.response=this.responseText=F,xr(this))},e.Qa=function(F){this.g&&(this.response=F,xr(this))},e.ga=function(){this.g&&xr(this)};function xr(F){F.readyState=4,F.l=null,F.j=null,F.v=null,Gn(F)}e.setRequestHeader=function(F,re){this.u.append(F,re)},e.getResponseHeader=function(F){return this.h&&this.h.get(F.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const F=[],re=this.h.entries();for(var le=re.next();!le.done;)le=le.value,F.push(le[0]+": "+le[1]),le=re.next();return F.join(`\r
`)};function Gn(F){F.onreadystatechange&&F.onreadystatechange.call(F)}Object.defineProperty(Dl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(F){this.m=F?"include":"same-origin"}});function Ec(F){let re="";return A(F,function(le,be){re+=be,re+=":",re+=le,re+=`\r
`}),re}function Ce(F,re,le){e:{for(be in le){var be=!1;break e}be=!0}be||(le=Ec(le),typeof F=="string"?le!=null&&encodeURIComponent(String(le)):Sn(F,re,le))}function Ne(F){Fe.call(this),this.headers=new Map,this.o=F||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}p(Ne,Fe);var rt=/^https?$/i,hn=["POST","PUT"];e=Ne.prototype,e.Ha=function(F){this.J=F},e.ea=function(F,re,le,be){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+F);re=re?re.toUpperCase():"GET",this.D=F,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():bs.g(),this.v=this.o?Co(this.o):Co(bs),this.g.onreadystatechange=d(this.Ea,this);try{this.B=!0,this.g.open(re,String(F),!0),this.B=!1}catch(ut){ir(this,ut);return}if(F=le||"",le=new Map(this.headers),be)if(Object.getPrototypeOf(be)===Object.prototype)for(var Xe in be)le.set(Xe,be[Xe]);else if(typeof be.keys=="function"&&typeof be.get=="function")for(const ut of be.keys())le.set(ut,be.get(ut));else throw Error("Unknown input type for opt_headers: "+String(be));be=Array.from(le.keys()).find(ut=>ut.toLowerCase()=="content-type"),Xe=a.FormData&&F instanceof a.FormData,!(0<=Array.prototype.indexOf.call(hn,re,void 0))||be||Xe||le.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ut,Xt]of le)this.g.setRequestHeader(ut,Xt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Tr(this),this.u=!0,this.g.send(F),this.u=!1}catch(ut){ir(this,ut)}};function ir(F,re){F.h=!1,F.g&&(F.j=!0,F.g.abort(),F.j=!1),F.l=re,F.m=5,Or(F),dn(F)}function Or(F){F.A||(F.A=!0,Qe(F,"complete"),Qe(F,"error"))}e.abort=function(F){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=F||7,Qe(this,"complete"),Qe(this,"abort"),dn(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),dn(this,!0)),Ne.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?gi(this):this.bb())},e.bb=function(){gi(this)};function gi(F){if(F.h&&typeof o<"u"&&(!F.v[1]||Ir(F)!=4||F.Z()!=2)){if(F.u&&Ir(F)==4)Vt(F.Ea,0,F);else if(Qe(F,"readystatechange"),Ir(F)==4){F.h=!1;try{const Xt=F.Z();e:switch(Xt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var re=!0;break e;default:re=!1}var le;if(!(le=re)){var be;if(be=Xt===0){var Xe=String(F.D).match(ht)[1]||null;!Xe&&a.self&&a.self.location&&(Xe=a.self.location.protocol.slice(0,-1)),be=!rt.test(Xe?Xe.toLowerCase():"")}le=be}if(le)Qe(F,"complete"),Qe(F,"success");else{F.m=6;try{var ut=2<Ir(F)?F.g.statusText:""}catch{ut=""}F.l=ut+" ["+F.Z()+"]",Or(F)}}finally{dn(F)}}}}function dn(F,re){if(F.g){Tr(F);const le=F.g,be=F.v[0]?()=>{}:null;F.g=null,F.v=null,re||Qe(F,"ready");try{le.onreadystatechange=be}catch{}}}function Tr(F){F.I&&(a.clearTimeout(F.I),F.I=null)}e.isActive=function(){return!!this.g};function Ir(F){return F.g?F.g.readyState:0}e.Z=function(){try{return 2<Ir(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(F){if(this.g){var re=this.g.responseText;return F&&re.indexOf(F)==0&&(re=re.substring(F.length)),nr(re)}};function _s(F){try{if(!F.g)return null;if("response"in F.g)return F.g.response;switch(F.H){case"":case"text":return F.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in F.g)return F.g.mozResponseArrayBuffer}return null}catch{return null}}function ta(F){const re={};F=(F.g&&2<=Ir(F)&&F.g.getAllResponseHeaders()||"").split(`\r
`);for(let be=0;be<F.length;be++){if(y(F[be]))continue;var le=L(F[be]);const Xe=le[0];if(le=le[1],typeof le!="string")continue;le=le.trim();const ut=re[Xe]||[];re[Xe]=ut,ut.push(le)}k(re,function(be){return be.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Mr(F,re,le){return le&&le.internalChannelParams&&le.internalChannelParams[F]||re}function js(F){this.Aa=0,this.i=[],this.j=new Hi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Mr("failFast",!1,F),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Mr("baseRetryDelayMs",5e3,F),this.cb=Mr("retryDelaySeedMs",1e4,F),this.Wa=Mr("forwardChannelMaxRetries",2,F),this.wa=Mr("forwardChannelRequestTimeoutMs",2e4,F),this.pa=F&&F.xmlHttpFactory||void 0,this.Xa=F&&F.Tb||void 0,this.Ca=F&&F.useFetchStreams||!1,this.L=void 0,this.J=F&&F.supportsCrossDomainXhr||!1,this.K="",this.h=new Zo(F&&F.concurrentRequestLimit),this.Da=new Rs,this.P=F&&F.fastHandshake||!1,this.O=F&&F.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=F&&F.Rb||!1,F&&F.xa&&this.j.xa(),F&&F.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&F&&F.detectBufferingProxy||!1,this.ja=void 0,F&&F.longPollingTimeout&&0<F.longPollingTimeout&&(this.ja=F.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=js.prototype,e.la=8,e.G=1,e.connect=function(F,re,le,be){si(0),this.W=F,this.H=re||{},le&&be!==void 0&&(this.H.OSID=le,this.H.OAID=be),this.F=this.X,this.I=yd(this,null,this.W),na(this)};function Li(F){if(Xa(F),F.G==3){var re=F.U++,le=kt(F.I);if(Sn(le,"SID",F.K),Sn(le,"RID",re),Sn(le,"TYPE","terminate"),Sc(F,le),re=new Jo(F,F.j,re),re.L=2,re.v=lr(kt(le)),le=!1,a.navigator&&a.navigator.sendBeacon)try{le=a.navigator.sendBeacon(re.v.toString(),"")}catch{}!le&&a.Image&&(new Image().src=re.v,le=!0),le||(re.g=Bg(re.j,null),re.g.ea(re.v)),re.F=Date.now(),Er(re)}$g(F)}function to(F){F.g&&(ka(F),F.g.cancel(),F.g=null)}function Xa(F){to(F),F.u&&(a.clearTimeout(F.u),F.u=null),gd(F),F.h.cancel(),F.s&&(typeof F.s=="number"&&a.clearTimeout(F.s),F.s=null)}function na(F){if(!qi(F.h)&&!F.s){F.s=!0;var re=F.Ga;ee||X(),ne||(ee(),ne=!0),ue.add(re,F),F.B=0}}function Fg(F,re){return ti(F.h)>=F.h.j-(F.s?1:0)?!1:F.s?(F.i=re.D.concat(F.i),!0):F.G==1||F.G==2||F.B>=(F.Va?0:F.Wa)?!1:(F.s=Xr(d(F.Ga,F,re),Yu(F,F.B)),F.B++,!0)}e.Ga=function(F){if(this.s)if(this.s=null,this.G==1){if(!F){this.U=Math.floor(1e5*Math.random()),F=this.U++;const Xe=new Jo(this,this.j,F);let ut=this.o;if(this.S&&(ut?(ut=I(ut),M(ut,this.S)):ut=this.S),this.m!==null||this.O||(Xe.H=ut,ut=null),this.P)e:{for(var re=0,le=0;le<this.i.length;le++){t:{var be=this.i[le];if("__data__"in be.map&&(be=be.map.__data__,typeof be=="string")){be=be.length;break t}be=void 0}if(be===void 0)break;if(re+=be,4096<re){re=le;break e}if(re===4096||le===this.i.length-1){re=le+1;break e}}re=1e3}else re=1e3;re=oi(this,Xe,re),le=kt(this.I),Sn(le,"RID",F),Sn(le,"CVER",22),this.D&&Sn(le,"X-HTTP-Session-Id",this.D),Sc(this,le),ut&&(this.O?re="headers="+encodeURIComponent(String(Ec(ut)))+"&"+re:this.m&&Ce(le,this.m,ut)),ve(this.h,Xe),this.Ua&&Sn(le,"TYPE","init"),this.P?(Sn(le,"$req",re),Sn(le,"SID","null"),Xe.T=!0,hf(Xe,le,null)):hf(Xe,le,re),this.G=2}}else this.G==3&&(F?no(this,F):this.i.length==0||qi(this.h)||no(this))};function no(F,re){var le;re?le=re.l:le=F.U++;const be=kt(F.I);Sn(be,"SID",F.K),Sn(be,"RID",le),Sn(be,"AID",F.T),Sc(F,be),F.m&&F.o&&Ce(be,F.m,F.o),le=new Jo(F,F.j,le,F.B+1),F.m===null&&(le.H=F.o),re&&(F.i=re.D.concat(F.i)),re=oi(F,le,1e3),le.I=Math.round(.5*F.wa)+Math.round(.5*F.wa*Math.random()),ve(F.h,le),hf(le,be,re)}function Sc(F,re){F.H&&A(F.H,function(le,be){Sn(re,be,le)}),F.l&&De({},function(le,be){Sn(re,be,le)})}function oi(F,re,le){le=Math.min(F.i.length,le);var be=F.l?d(F.l.Na,F.l,F):null;e:{var Xe=F.i;let ut=-1;for(;;){const Xt=["count="+le];ut==-1?0<le?(ut=Xe[0].g,Xt.push("ofs="+ut)):ut=0:Xt.push("ofs="+ut);let Lr=!0;for(let Us=0;Us<le;Us++){let Pr=Xe[Us].g;const ai=Xe[Us].map;if(Pr-=ut,0>Pr)ut=Math.max(0,Xe[Us].g-100),Lr=!1;else try{md(ai,Xt,"req"+Pr+"_")}catch{be&&be(ai)}}if(Lr){be=Xt.join("&");break e}}}return F=F.i.splice(0,le),re.D=F,be}function Ro(F){if(!F.g&&!F.u){F.Y=1;var re=F.Fa;ee||X(),ne||(ee(),ne=!0),ue.add(re,F),F.v=0}}function yi(F){return F.g||F.u||3<=F.v?!1:(F.Y++,F.u=Xr(d(F.Fa,F),Yu(F,F.v)),F.v++,!0)}e.Fa=function(){if(this.u=null,ra(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var F=2*this.R;this.j.info("BP detection timer enabled: "+F),this.A=Xr(d(this.ab,this),F)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,si(10),to(this),ra(this))};function ka(F){F.A!=null&&(a.clearTimeout(F.A),F.A=null)}function ra(F){F.g=new Jo(F,F.j,"rpc",F.Y),F.m===null&&(F.g.H=F.o),F.g.O=0;var re=kt(F.qa);Sn(re,"RID","rpc"),Sn(re,"SID",F.K),Sn(re,"AID",F.T),Sn(re,"CI",F.F?"0":"1"),!F.F&&F.ja&&Sn(re,"TO",F.ja),Sn(re,"TYPE","xmlhttp"),Sc(F,re),F.m&&F.o&&Ce(re,F.m,F.o),F.L&&(F.g.I=F.L);var le=F.g;F=F.ia,le.L=1,le.v=lr(kt(re)),le.m=null,le.P=!0,yc(le,F)}e.Za=function(){this.C!=null&&(this.C=null,to(this),yi(this),si(19))};function gd(F){F.C!=null&&(a.clearTimeout(F.C),F.C=null)}function vi(F,re){var le=null;if(F.g==re){gd(F),ka(F),F.g=null;var be=2}else if(rr(F.h,re))le=re.D,Ie(F.h,re),be=1;else return;if(F.G!=0){if(re.o)if(be==1){le=re.m?re.m.length:0,re=Date.now()-re.F;var Xe=F.B;be=Ea(),Qe(be,new Js(be,le)),na(F)}else Ro(F);else if(Xe=re.s,Xe==3||Xe==0&&0<re.X||!(be==1&&Fg(F,re)||be==2&&yi(F)))switch(le&&0<le.length&&(re=F.h,re.i=re.i.concat(le)),Xe){case 1:Ku(F,5);break;case 4:Ku(F,10);break;case 3:Ku(F,6);break;default:Ku(F,2)}}}function Yu(F,re){let le=F.Ta+Math.floor(Math.random()*F.cb);return F.isActive()||(le*=2),le*re}function Ku(F,re){if(F.j.info("Error code "+re),re==2){var le=d(F.fb,F),be=F.Xa;const Xe=!be;be=new Pt(be||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||jt(be,"https"),lr(be),Xe?gp(be.toString(),le):Nl(be.toString(),le)}else si(2);F.G=0,F.l&&F.l.sa(re),$g(F),Xa(F)}e.fb=function(F){F?(this.j.info("Successfully pinged google.com"),si(2)):(this.j.info("Failed to ping google.com"),si(1))};function $g(F){if(F.G=0,F.ka=[],F.l){const re=Se(F.h);(re.length!=0||F.i.length!=0)&&(g(F.ka,re),g(F.ka,F.i),F.h.i.length=0,m(F.i),F.i.length=0),F.l.ra()}}function yd(F,re,le){var be=le instanceof Pt?kt(le):new Pt(le);if(be.g!="")re&&(be.g=re+"."+be.g),Zt(be,be.s);else{var Xe=a.location;be=Xe.protocol,re=re?re+"."+Xe.hostname:Xe.hostname,Xe=+Xe.port;var ut=new Pt(null);be&&jt(ut,be),re&&(ut.g=re),Xe&&Zt(ut,Xe),le&&(ut.l=le),be=ut}return le=F.D,re=F.ya,le&&re&&Sn(be,le,re),Sn(be,"VER",F.la),Sc(F,be),be}function Bg(F,re,le){if(re&&!F.J)throw Error("Can't create secondary domain capable XhrIo object.");return re=F.Ca&&!F.pa?new Ne(new wc({eb:le})):new Ne(F.pa),re.Ha(F.J),re}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function mf(){}e=mf.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function gh(){}gh.prototype.g=function(F,re){return new Ra(F,re)};function Ra(F,re){Fe.call(this),this.g=new js(re),this.l=F,this.h=re&&re.messageUrlParams||null,F=re&&re.messageHeaders||null,re&&re.clientProtocolHeaderRequired&&(F?F["X-Client-Protocol"]="webchannel":F={"X-Client-Protocol":"webchannel"}),this.g.o=F,F=re&&re.initMessageHeaders||null,re&&re.messageContentType&&(F?F["X-WebChannel-Content-Type"]=re.messageContentType:F={"X-WebChannel-Content-Type":re.messageContentType}),re&&re.va&&(F?F["X-WebChannel-Client-Profile"]=re.va:F={"X-WebChannel-Client-Profile":re.va}),this.g.S=F,(F=re&&re.Sb)&&!y(F)&&(this.g.m=F),this.v=re&&re.supportsCrossDomainXhr||!1,this.u=re&&re.sendRawJson||!1,(re=re&&re.httpSessionIdParam)&&!y(re)&&(this.g.D=re,F=this.h,F!==null&&re in F&&(F=this.h,re in F&&delete F[re])),this.j=new xu(this)}p(Ra,Fe),Ra.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ra.prototype.close=function(){Li(this.g)},Ra.prototype.o=function(F){var re=this.g;if(typeof F=="string"){var le={};le.__data__=F,F=le}else this.u&&(le={},le.__data__=Hn(F),F=le);re.i.push(new _c(re.Ya++,F)),re.G==3&&na(re)},Ra.prototype.N=function(){this.g.l=null,delete this.j,Li(this.g),delete this.g,Ra.aa.N.call(this)};function gf(F){Zi.call(this),F.__headers__&&(this.headers=F.__headers__,this.statusCode=F.__status__,delete F.__headers__,delete F.__status__);var re=F.__sm__;if(re){e:{for(const le in re){F=le;break e}F=void 0}(this.i=F)&&(F=this.i,re=re!==null&&F in re?re[F]:void 0),this.data=re}else this.data=F}p(gf,Zi);function vd(){ei.call(this),this.status=1}p(vd,ei);function xu(F){this.g=F}p(xu,mf),xu.prototype.ua=function(){Qe(this.g,"a")},xu.prototype.ta=function(F){Qe(this.g,new gf(F))},xu.prototype.sa=function(F){Qe(this.g,new vd)},xu.prototype.ra=function(){Qe(this.g,"b")},gh.prototype.createWebChannel=gh.prototype.g,Ra.prototype.send=Ra.prototype.o,Ra.prototype.open=Ra.prototype.m,Ra.prototype.close=Ra.prototype.close,Nbe=function(){return new gh},Pbe=function(){return Ea()},Ibe=po,FU={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Hr.NO_ERROR=0,Hr.TIMEOUT=8,Hr.HTTP_ERROR=6,CP=Hr,Rl.COMPLETE="complete",Rbe=Rl,Ji.EventType=Di,Di.OPEN="a",Di.CLOSE="b",Di.ERROR="c",Di.MESSAGE="d",Fe.prototype.listen=Fe.prototype.K,w3=Ji,Ne.prototype.listenOnce=Ne.prototype.L,Ne.prototype.getLastError=Ne.prototype.Ka,Ne.prototype.getLastErrorCode=Ne.prototype.Ba,Ne.prototype.getStatus=Ne.prototype.Z,Ne.prototype.getResponseJson=Ne.prototype.Oa,Ne.prototype.getResponseText=Ne.prototype.oa,Ne.prototype.send=Ne.prototype.ea,Ne.prototype.setWithCredentials=Ne.prototype.Ha,kbe=Ne}).apply(typeof v6<"u"?v6:typeof self<"u"?self:typeof window<"u"?window:{});const Cie="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}zf.UNAUTHENTICATED=new zf(null),zf.GOOGLE_CREDENTIALS=new zf("google-credentials-uid"),zf.FIRST_PARTY=new zf("first-party-uid"),zf.MOCK_USER=new zf("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let OT="11.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W_=new E9("@firebase/firestore");function gE(){return W_.logLevel}function wn(e,...t){if(W_.logLevel<=ni.DEBUG){const n=t.map(jG);W_.debug(`Firestore (${OT}): ${e}`,...n)}}function h1(e,...t){if(W_.logLevel<=ni.ERROR){const n=t.map(jG);W_.error(`Firestore (${OT}): ${e}`,...n)}}function e4(e,...t){if(W_.logLevel<=ni.WARN){const n=t.map(jG);W_.warn(`Firestore (${OT}): ${e}`,...n)}}function jG(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ar(e="Unexpected state"){const t=`FIRESTORE (${OT}) INTERNAL ASSERTION FAILED: `+e;throw h1(t),new Error(t)}function Qi(e,t){e||ar()}function vr(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class mn extends _g{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ky{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HZe{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class qZe{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(zf.UNAUTHENTICATED))}shutdown(){}}class WZe{constructor(t){this.t=t,this.currentUser=zf.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){Qi(this.o===void 0);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new Ky;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ky,t.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;t.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{wn("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(wn("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ky)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(wn("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Qi(typeof r.accessToken=="string"),new HZe(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Qi(t===null||typeof t=="string"),new zf(t)}}class GZe{constructor(t,n,r){this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=zf.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const t=this.I();return t&&this.T.set("Authorization",t),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class YZe{constructor(t,n,r){this.l=t,this.h=n,this.P=r}getToken(){return Promise.resolve(new GZe(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(zf.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class KZe{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class XZe{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){Qi(this.o===void 0);const r=s=>{s.error!=null&&wn("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,wn("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>r(s))};const i=s=>{wn("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):wn("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(Qi(typeof n.token=="string"),this.R=n.token,new KZe(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QZe(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dbe{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const i=QZe(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=t.charAt(i[s]%t.length))}return r}}function fi(e,t){return e<t?-1:e>t?1:0}function gS(e,t,n){return e.length===t.length&&e.every((r,i)=>n(r,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{static now(){return hu.fromMillis(Date.now())}static fromDate(t){return hu.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*n));return new hu(n,r)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new mn(Tt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new mn(Tt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new mn(Tt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new mn(Tt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?fi(this.nanoseconds,t.nanoseconds):fi(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{static fromTimestamp(t){return new yr(t)}static min(){return new yr(new hu(0,0))}static max(){return new yr(new hu(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(t,n,r){n===void 0?n=0:n>t.length&&ar(),r===void 0?r=t.length-n:r>t.length-n&&ar(),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return wm.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof wm?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let i=0;i<r;i++){const s=wm.compareSegments(t.get(i),n.get(i));if(s!==0)return s}return Math.sign(t.length-n.length)}static compareSegments(t,n){const r=wm.isNumericId(t),i=wm.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?wm.extractNumericId(t).compare(wm.extractNumericId(n)):t<n?-1:t>n?1:0}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Xv.fromString(t.substring(4,t.length-2))}}class Ks extends wm{construct(t,n,r){return new Ks(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new mn(Tt.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Ks(n)}static emptyPath(){return new Ks([])}}const JZe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ml extends wm{construct(t,n,r){return new ml(t,n,r)}static isValidIdentifier(t){return JZe.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ml.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ml(["__name__"])}static fromServerFormat(t){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new mn(Tt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<t.length;){const a=t[i];if(a==="\\"){if(i+1===t.length)throw new mn(Tt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new mn(Tt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new mn(Tt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new ml(n)}static emptyPath(){return new ml([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(t){this.path=t}static fromPath(t){return new Vn(Ks.fromString(t))}static fromName(t){return new Vn(Ks.fromString(t).popFirst(5))}static empty(){return new Vn(Ks.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Ks.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Ks.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Vn(new Ks(t.slice()))}}function ZZe(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=yr.fromTimestamp(r===1e9?new hu(n+1,0):new hu(n,r));return new lb(i,Vn.empty(),t)}function eet(e){return new lb(e.readTime,e.key,-1)}class lb{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new lb(yr.min(),Vn.empty(),-1)}static max(){return new lb(yr.max(),Vn.empty(),-1)}}function tet(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=Vn.comparator(e.documentKey,t.documentKey),n!==0?n:fi(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const net="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ret{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MT(e){if(e.code!==Tt.FAILED_PRECONDITION||e.message!==net)throw e;wn("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&ar(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new It((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof It?n:It.resolve(n)}catch(n){return It.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):It.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):It.reject(n)}static resolve(t){return new It((n,r)=>{n(t)})}static reject(t){return new It((n,r)=>{r(t)})}static waitFor(t){return new It((n,r)=>{let i=0,s=0,o=!1;t.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(t){let n=It.resolve(!1);for(const r of t)n=n.next(i=>i?It.resolve(i):r());return n}static forEach(t,n){const r=[];return t.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(t,n){return new It((r,i)=>{const s=t.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const l=u;n(t[l]).next(c=>{o[l]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(t,n){return new It((r,i)=>{const s=()=>{t()===!0?n().next(()=>{s()},i):r()};s()})}}function iet(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function LT(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C9{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}C9.oe=-1;function A9(e){return e==null}function mN(e){return e===0&&1/e==-1/0}function set(e){return typeof e=="number"&&Number.isInteger(e)&&!mN(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oet(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Aie(t)),t=aet(e.get(n),t);return Aie(t)}function aet(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const s=e.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function Aie(e){return e+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kie(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Gb(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Obe(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(t,n){this.comparator=t,this.root=n||fl.EMPTY}insert(t,n){return new To(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,fl.BLACK,null,null))}remove(t){return new To(this.comparator,this.root.remove(t,this.comparator).copy(null,null,fl.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new b6(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new b6(this.root,t,this.comparator,!1)}getReverseIterator(){return new b6(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new b6(this.root,t,this.comparator,!0)}}class b6{constructor(t,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?r(t.key,n):1,n&&i&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class fl{constructor(t,n,r,i,s){this.key=t,this.value=n,this.color=r??fl.RED,this.left=i??fl.EMPTY,this.right=s??fl.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,s){return new fl(t??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let i=this;const s=r(t,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(t,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return fl.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return fl.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,fl.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,fl.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ar();const t=this.left.check();if(t!==this.right.check())throw ar();return t+(this.isRed()?0:1)}}fl.EMPTY=null,fl.RED=!0,fl.BLACK=!1;fl.EMPTY=new class{constructor(){this.size=0}get key(){throw ar()}get value(){throw ar()}get color(){throw ar()}get left(){throw ar()}get right(){throw ar()}copy(t,n,r,i,s){return this}insert(t,n,r){return new fl(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(t){this.comparator=t,this.data=new To(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new Rie(this.data.getIterator())}getIteratorFrom(t){return new Rie(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof pu)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new pu(this.comparator);return n.data=t,n}}class Rie{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd{constructor(t){this.fields=t,t.sort(ml.comparator)}static empty(){return new Wd([])}unionWith(t){let n=new pu(ml.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new Wd(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return gS(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mbe extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Mbe("Invalid base64 string: "+s):s}}(t);return new Sl(n)}static fromUint8Array(t){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(t);return new Sl(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return fi(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Sl.EMPTY_BYTE_STRING=new Sl("");const uet=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function cb(e){if(Qi(!!e),typeof e=="string"){let t=0;const n=uet.exec(e);if(Qi(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:ma(e.seconds),nanos:ma(e.nanos)}}function ma(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function fb(e){return typeof e=="string"?Sl.fromBase64String(e):Sl.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UG(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function k9(e){const t=e.mapValue.fields.__previous_value__;return UG(t)?k9(t):t}function t4(e){const t=cb(e.mapValue.fields.__local_write_time__.timestampValue);return new hu(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cet{constructor(t,n,r,i,s,o,a,u,l){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}}class n4{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new n4("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof n4&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x6={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function db(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?UG(e)?4:det(e)?9007199254740991:fet(e)?10:11:ar()}function sg(e,t){if(e===t)return!0;const n=db(e);if(n!==db(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return t4(e).isEqual(t4(t));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=cb(i.timestampValue),a=cb(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(i,s){return fb(i.bytesValue).isEqual(fb(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(i,s){return ma(i.geoPointValue.latitude)===ma(s.geoPointValue.latitude)&&ma(i.geoPointValue.longitude)===ma(s.geoPointValue.longitude)}(e,t);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return ma(i.integerValue)===ma(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=ma(i.doubleValue),a=ma(s.doubleValue);return o===a?mN(o)===mN(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return gS(e.arrayValue.values||[],t.arrayValue.values||[],sg);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(kie(o)!==kie(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!sg(o[u],a[u])))return!1;return!0}(e,t);default:return ar()}}function r4(e,t){return(e.values||[]).find(n=>sg(n,t))!==void 0}function yS(e,t){if(e===t)return 0;const n=db(e),r=db(t);if(n!==r)return fi(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return fi(e.booleanValue,t.booleanValue);case 2:return function(s,o){const a=ma(s.integerValue||s.doubleValue),u=ma(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(e,t);case 3:return Iie(e.timestampValue,t.timestampValue);case 4:return Iie(t4(e),t4(t));case 5:return fi(e.stringValue,t.stringValue);case 6:return function(s,o){const a=fb(s),u=fb(o);return a.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){const c=fi(a[l],u[l]);if(c!==0)return c}return fi(a.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,o){const a=fi(ma(s.latitude),ma(o.latitude));return a!==0?a:fi(ma(s.longitude),ma(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Pie(e.arrayValue,t.arrayValue);case 10:return function(s,o){var a,u,l,c;const f=s.fields||{},d=o.fields||{},h=(a=f.value)===null||a===void 0?void 0:a.arrayValue,p=(u=d.value)===null||u===void 0?void 0:u.arrayValue,m=fi(((l=h==null?void 0:h.values)===null||l===void 0?void 0:l.length)||0,((c=p==null?void 0:p.values)===null||c===void 0?void 0:c.length)||0);return m!==0?m:Pie(h,p)}(e.mapValue,t.mapValue);case 11:return function(s,o){if(s===x6.mapValue&&o===x6.mapValue)return 0;if(s===x6.mapValue)return 1;if(o===x6.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),l=o.fields||{},c=Object.keys(l);u.sort(),c.sort();for(let f=0;f<u.length&&f<c.length;++f){const d=fi(u[f],c[f]);if(d!==0)return d;const h=yS(a[u[f]],l[c[f]]);if(h!==0)return h}return fi(u.length,c.length)}(e.mapValue,t.mapValue);default:throw ar()}}function Iie(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return fi(e,t);const n=cb(e),r=cb(t),i=fi(n.seconds,r.seconds);return i!==0?i:fi(n.nanos,r.nanos)}function Pie(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=yS(n[i],r[i]);if(s)return s}return fi(n.length,r.length)}function vS(e){return $U(e)}function $U(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=cb(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return fb(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return Vn.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=$U(s);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${$U(n.fields[o])}`;return i+"}"}(e.mapValue):ar()}function AP(e){switch(db(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=k9(e);return t?16+AP(t):16;case 5:return 2*e.stringValue.length;case 6:return fb(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+AP(s),0)}(e.arrayValue);case 10:case 11:return function(r){let i=0;return Gb(r.fields,(s,o)=>{i+=s.length+AP(o)}),i}(e.mapValue);default:throw ar()}}function Nie(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function BU(e){return!!e&&"integerValue"in e}function zG(e){return!!e&&"arrayValue"in e}function Die(e){return!!e&&"nullValue"in e}function Oie(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function kP(e){return!!e&&"mapValue"in e}function fet(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function vk(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Gb(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=vk(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=vk(e.arrayValue.values[n]);return t}return Object.assign({},e)}function det(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(t){this.value=t}static empty(){return new Gf({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!kP(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=vk(n)}setAll(t){let n=ml.emptyPath(),r={},i=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=vk(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(t){const n=this.field(t.popLast());kP(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return sg(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=n.mapValue.fields[t.get(r)];kP(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(t,n,r){Gb(n,(i,s)=>t[i]=s);for(const i of r)delete t[i]}clone(){return new Gf(vk(this.value))}}function Lbe(e){const t=[];return Gb(e.fields,(n,r)=>{const i=new ml([n]);if(kP(r)){const s=Lbe(r.mapValue).fields;if(s.length===0)t.push(i);else for(const o of s)t.push(i.child(o))}else t.push(i)}),new Wd(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(t,n,r,i,s,o,a){this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(t){return new Zl(t,0,yr.min(),yr.min(),yr.min(),Gf.empty(),0)}static newFoundDocument(t,n,r,i){return new Zl(t,1,n,yr.min(),r,i,0)}static newNoDocument(t,n){return new Zl(t,2,n,yr.min(),yr.min(),Gf.empty(),0)}static newUnknownDocument(t,n){return new Zl(t,3,n,yr.min(),yr.min(),Gf.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(yr.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Gf.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Gf.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=yr.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Zl&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Zl(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gN=class{constructor(t,n){this.position=t,this.inclusive=n}};function Mie(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(s.field.isKeyField()?r=Vn.comparator(Vn.fromName(o.referenceValue),n.key):r=yS(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Lie(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!sg(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i4{constructor(t,n="asc"){this.field=t,this.dir=n}}function het(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fbe=class{};class Va extends Fbe{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new met(t,n,r):n==="array-contains"?new vet(t,r):n==="in"?new bet(t,r):n==="not-in"?new xet(t,r):n==="array-contains-any"?new _et(t,r):new Va(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new get(t,r):new yet(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(yS(n,this.value)):n!==null&&db(this.value)===db(n)&&this.matchesComparison(yS(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return ar()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class T0 extends Fbe{constructor(t,n){super(),this.filters=t,this.op=n,this.ae=null}static create(t,n){return new T0(t,n)}matches(t){return $be(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function $be(e){return e.op==="and"}function Bbe(e){return pet(e)&&$be(e)}function pet(e){for(const t of e.filters)if(t instanceof T0)return!1;return!0}function jU(e){if(e instanceof Va)return e.field.canonicalString()+e.op.toString()+vS(e.value);if(Bbe(e))return e.filters.map(t=>jU(t)).join(",");{const t=e.filters.map(n=>jU(n)).join(",");return`${e.op}(${t})`}}function jbe(e,t){return e instanceof Va?function(r,i){return i instanceof Va&&r.op===i.op&&r.field.isEqual(i.field)&&sg(r.value,i.value)}(e,t):e instanceof T0?function(r,i){return i instanceof T0&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&jbe(o,i.filters[a]),!0):!1}(e,t):void ar()}function Ube(e){return e instanceof Va?function(n){return`${n.field.canonicalString()} ${n.op} ${vS(n.value)}`}(e):e instanceof T0?function(n){return n.op.toString()+" {"+n.getFilters().map(Ube).join(" ,")+"}"}(e):"Filter"}class met extends Va{constructor(t,n,r){super(t,n,r),this.key=Vn.fromName(r.referenceValue)}matches(t){const n=Vn.comparator(t.key,this.key);return this.matchesComparison(n)}}class get extends Va{constructor(t,n){super(t,"in",n),this.keys=zbe("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class yet extends Va{constructor(t,n){super(t,"not-in",n),this.keys=zbe("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function zbe(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Vn.fromName(r.referenceValue))}class vet extends Va{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return zG(n)&&r4(n.arrayValue,this.value)}}class bet extends Va{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&r4(this.value.arrayValue,n)}}class xet extends Va{constructor(t,n){super(t,"not-in",n)}matches(t){if(r4(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!r4(this.value.arrayValue,n)}}class _et extends Va{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!zG(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>r4(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wet{constructor(t,n=null,r=[],i=[],s=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function Fie(e,t=null,n=[],r=[],i=null,s=null,o=null){return new wet(e,t,n,r,i,s,o)}function VG(e){const t=vr(e);if(t.ue===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>jU(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),A9(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>vS(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>vS(r)).join(",")),t.ue=n}return t.ue}function HG(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!het(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!jbe(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Lie(e.startAt,t.startAt)&&Lie(e.endAt,t.endAt)}function UU(e){return Vn.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(t,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Eet(e,t,n,r,i,s,o,a){return new FT(e,t,n,r,i,s,o,a)}function qG(e){return new FT(e)}function $ie(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function Vbe(e){return e.collectionGroup!==null}function bk(e){const t=vr(e);if(t.ce===null){t.ce=[];const n=new Set;for(const s of t.explicitOrderBy)t.ce.push(s),n.add(s.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new pu(ml.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.ce.push(new i4(s,r))}),n.has(ml.keyField().canonicalString())||t.ce.push(new i4(ml.keyField(),r))}return t.ce}function Um(e){const t=vr(e);return t.le||(t.le=Tet(t,bk(e))),t.le}function Tet(e,t){if(e.limitType==="F")return Fie(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new i4(i.field,s)});const n=e.endAt?new gN(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new gN(e.startAt.position,e.startAt.inclusive):null;return Fie(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function zU(e,t){const n=e.filters.concat([t]);return new FT(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function VU(e,t,n){return new FT(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function R9(e,t){return HG(Um(e),Um(t))&&e.limitType===t.limitType}function Hbe(e){return`${VG(Um(e))}|lt:${e.limitType}`}function yE(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>Ube(i)).join(", ")}]`),A9(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>vS(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>vS(i)).join(",")),`Target(${r})`}(Um(e))}; limitType=${e.limitType})`}function I9(e,t){return t.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Vn.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(e,t)&&function(r,i){for(const s of bk(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(e,t)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(e,t)&&function(r,i){return!(r.startAt&&!function(o,a,u){const l=Mie(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,bk(r),i)||r.endAt&&!function(o,a,u){const l=Mie(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,bk(r),i))}(e,t)}function Cet(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function qbe(e){return(t,n)=>{let r=!1;for(const i of bk(e)){const s=Aet(i,t,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function Aet(e,t,n){const r=e.field.isKeyField()?Vn.comparator(t.key,n.key):function(s,o,a){const u=o.data.field(s),l=a.data.field(s);return u!==null&&l!==null?yS(u,l):ar()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return ar()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),i=this.inner[r];if(i===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return void(i[s]=[t,n]);i.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){Gb(this.inner,(n,r)=>{for(const[i,s]of r)t(i,s)})}isEmpty(){return Obe(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ket=new To(Vn.comparator);function p1(){return ket}const Wbe=new To(Vn.comparator);function E3(...e){let t=Wbe;for(const n of e)t=t.insert(n.key,n);return t}function Gbe(e){let t=Wbe;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function w_(){return xk()}function Ybe(){return xk()}function xk(){return new Mw(e=>e.toString(),(e,t)=>e.isEqual(t))}const Ret=new To(Vn.comparator),Iet=new pu(Vn.comparator);function ri(...e){let t=Iet;for(const n of e)t=t.add(n);return t}const Pet=new pu(fi);function Net(){return Pet}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WG(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mN(t)?"-0":t}}function Kbe(e){return{integerValue:""+e}}function Det(e,t){return set(t)?Kbe(t):WG(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P9{constructor(){this._=void 0}}function Oet(e,t,n){return e instanceof s4?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&UG(s)&&(s=k9(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,t):e instanceof o4?Qbe(e,t):e instanceof a4?Jbe(e,t):function(i,s){const o=Xbe(i,s),a=Bie(o)+Bie(i.Pe);return BU(o)&&BU(i.Pe)?Kbe(a):WG(i.serializer,a)}(e,t)}function Met(e,t,n){return e instanceof o4?Qbe(e,t):e instanceof a4?Jbe(e,t):n}function Xbe(e,t){return e instanceof yN?function(r){return BU(r)||function(s){return!!s&&"doubleValue"in s}(r)}(t)?t:{integerValue:0}:null}class s4 extends P9{}class o4 extends P9{constructor(t){super(),this.elements=t}}function Qbe(e,t){const n=Zbe(t);for(const r of e.elements)n.some(i=>sg(i,r))||n.push(r);return{arrayValue:{values:n}}}class a4 extends P9{constructor(t){super(),this.elements=t}}function Jbe(e,t){let n=Zbe(t);for(const r of e.elements)n=n.filter(i=>!sg(i,r));return{arrayValue:{values:n}}}class yN extends P9{constructor(t,n){super(),this.serializer=t,this.Pe=n}}function Bie(e){return ma(e.integerValue||e.doubleValue)}function Zbe(e){return zG(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Let{constructor(t,n){this.field=t,this.transform=n}}function Fet(e,t){return e.field.isEqual(t.field)&&function(r,i){return r instanceof o4&&i instanceof o4||r instanceof a4&&i instanceof a4?gS(r.elements,i.elements,sg):r instanceof yN&&i instanceof yN?sg(r.Pe,i.Pe):r instanceof s4&&i instanceof s4}(e.transform,t.transform)}class $et{constructor(t,n){this.version=t,this.transformResults=n}}class Zd{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Zd}static exists(t){return new Zd(void 0,t)}static updateTime(t){return new Zd(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function RP(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class N9{}function exe(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new GG(e.key,Zd.none()):new _R(e.key,e.data,Zd.none());{const n=e.data,r=Gf.empty();let i=new pu(ml.comparator);for(let s of t.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Yb(e.key,r,new Wd(i.toArray()),Zd.none())}}function Bet(e,t,n){e instanceof _R?function(i,s,o){const a=i.value.clone(),u=Uie(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof Yb?function(i,s,o){if(!RP(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=Uie(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(txe(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(e,t,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function _k(e,t,n,r){return e instanceof _R?function(s,o,a,u){if(!RP(s.precondition,o))return a;const l=s.value.clone(),c=zie(s.fieldTransforms,u,o);return l.setAll(c),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(e,t,n,r):e instanceof Yb?function(s,o,a,u){if(!RP(s.precondition,o))return a;const l=zie(s.fieldTransforms,u,o),c=o.data;return c.setAll(txe(s)),c.setAll(l),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(e,t,n,r):function(s,o,a){return RP(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function jet(e,t){let n=null;for(const r of e.fieldTransforms){const i=t.data.field(r.field),s=Xbe(r.transform,i||null);s!=null&&(n===null&&(n=Gf.empty()),n.set(r.field,s))}return n||null}function jie(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&gS(r,i,(s,o)=>Fet(s,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class _R extends N9{constructor(t,n,r,i=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Yb extends N9{constructor(t,n,r,i,s=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function txe(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Uie(e,t,n){const r=new Map;Qi(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,Met(o,a,n[i]))}return r}function zie(e,t,n){const r=new Map;for(const i of e){const s=i.transform,o=n.data.field(i.field);r.set(i.field,Oet(s,o,t))}return r}class GG extends N9{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Uet extends N9{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zet{constructor(t,n,r,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(t.key)&&Bet(s,t,r[i])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=_k(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=_k(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=Ybe();return this.mutations.forEach(i=>{const s=t.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=exe(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(yr.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),ri())}isEqual(t){return this.batchId===t.batchId&&gS(this.mutations,t.mutations,(n,r)=>jie(n,r))&&gS(this.baseMutations,t.baseMutations,(n,r)=>jie(n,r))}}class YG{constructor(t,n,r,i){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(t,n,r){Qi(t.mutations.length===r.length);let i=function(){return Ret}();const s=t.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new YG(t,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vet{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Het{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ua,_i;function qet(e){switch(e){default:return ar();case Tt.CANCELLED:case Tt.UNKNOWN:case Tt.DEADLINE_EXCEEDED:case Tt.RESOURCE_EXHAUSTED:case Tt.INTERNAL:case Tt.UNAVAILABLE:case Tt.UNAUTHENTICATED:return!1;case Tt.INVALID_ARGUMENT:case Tt.NOT_FOUND:case Tt.ALREADY_EXISTS:case Tt.PERMISSION_DENIED:case Tt.FAILED_PRECONDITION:case Tt.ABORTED:case Tt.OUT_OF_RANGE:case Tt.UNIMPLEMENTED:case Tt.DATA_LOSS:return!0}}function nxe(e){if(e===void 0)return h1("GRPC error has no .code"),Tt.UNKNOWN;switch(e){case Ua.OK:return Tt.OK;case Ua.CANCELLED:return Tt.CANCELLED;case Ua.UNKNOWN:return Tt.UNKNOWN;case Ua.DEADLINE_EXCEEDED:return Tt.DEADLINE_EXCEEDED;case Ua.RESOURCE_EXHAUSTED:return Tt.RESOURCE_EXHAUSTED;case Ua.INTERNAL:return Tt.INTERNAL;case Ua.UNAVAILABLE:return Tt.UNAVAILABLE;case Ua.UNAUTHENTICATED:return Tt.UNAUTHENTICATED;case Ua.INVALID_ARGUMENT:return Tt.INVALID_ARGUMENT;case Ua.NOT_FOUND:return Tt.NOT_FOUND;case Ua.ALREADY_EXISTS:return Tt.ALREADY_EXISTS;case Ua.PERMISSION_DENIED:return Tt.PERMISSION_DENIED;case Ua.FAILED_PRECONDITION:return Tt.FAILED_PRECONDITION;case Ua.ABORTED:return Tt.ABORTED;case Ua.OUT_OF_RANGE:return Tt.OUT_OF_RANGE;case Ua.UNIMPLEMENTED:return Tt.UNIMPLEMENTED;case Ua.DATA_LOSS:return Tt.DATA_LOSS;default:return ar()}}(_i=Ua||(Ua={}))[_i.OK=0]="OK",_i[_i.CANCELLED=1]="CANCELLED",_i[_i.UNKNOWN=2]="UNKNOWN",_i[_i.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_i[_i.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_i[_i.NOT_FOUND=5]="NOT_FOUND",_i[_i.ALREADY_EXISTS=6]="ALREADY_EXISTS",_i[_i.PERMISSION_DENIED=7]="PERMISSION_DENIED",_i[_i.UNAUTHENTICATED=16]="UNAUTHENTICATED",_i[_i.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_i[_i.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_i[_i.ABORTED=10]="ABORTED",_i[_i.OUT_OF_RANGE=11]="OUT_OF_RANGE",_i[_i.UNIMPLEMENTED=12]="UNIMPLEMENTED",_i[_i.INTERNAL=13]="INTERNAL",_i[_i.UNAVAILABLE=14]="UNAVAILABLE",_i[_i.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wet(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Get=new Xv([4294967295,4294967295],0);function Vie(e){const t=Wet().encode(e),n=new Abe;return n.update(t),new Uint8Array(n.digest())}function Hie(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Xv([n,r],0),new Xv([i,s],0)]}class KG{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new S3(`Invalid padding: ${n}`);if(r<0)throw new S3(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new S3(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new S3(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*t.length-n,this.Ie=Xv.fromNumber(this.Te)}de(t,n,r){let i=t.add(n.multiply(Xv.fromNumber(r)));return i.compare(Get)===1&&(i=new Xv([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ie).toNumber()}Ee(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Te===0)return!1;const n=Vie(t),[r,i]=Hie(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);if(!this.Ee(o))return!1}return!0}static create(t,n,r){const i=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new KG(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(t){if(this.Te===0)return;const n=Vie(t),[r,i]=Hie(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);this.Ae(o)}}Ae(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class S3 extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D9{constructor(t,n,r,i,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const i=new Map;return i.set(t,wR.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new D9(yr.min(),i,new To(fi),p1(),ri())}}class wR{constructor(t,n,r,i,s){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new wR(r,n,ri(),ri(),ri())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IP{constructor(t,n,r,i){this.Re=t,this.removedTargetIds=n,this.key=r,this.Ve=i}}class rxe{constructor(t,n){this.targetId=t,this.me=n}}class ixe{constructor(t,n,r=Sl.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i}}class qie{constructor(){this.fe=0,this.ge=Wie(),this.pe=Sl.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}ve(){let t=ri(),n=ri(),r=ri();return this.ge.forEach((i,s)=>{switch(s){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ar()}}),new wR(this.pe,this.ye,t,n,r)}Ce(){this.we=!1,this.ge=Wie()}Fe(t,n){this.we=!0,this.ge=this.ge.insert(t,n)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,Qi(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Yet{constructor(t){this.Be=t,this.Le=new Map,this.ke=p1(),this.qe=_6(),this.Qe=_6(),this.Ke=new To(fi)}$e(t){for(const n of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.Ue(n,t.Ve):this.We(n,t.key,t.Ve);for(const n of t.removedTargetIds)this.We(n,t.key,t.Ve)}Ge(t){this.forEachTarget(t,n=>{const r=this.ze(n);switch(t.state){case 0:this.je(n)&&r.De(t.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(t.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.je(n)&&(r.Ne(),r.De(t.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.De(t.resumeToken));break;default:ar()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.Le.forEach((r,i)=>{this.je(i)&&n(i)})}Je(t){const n=t.targetId,r=t.me.count,i=this.Ye(n);if(i){const s=i.target;if(UU(s))if(r===0){const o=new Vn(s.path);this.We(n,o,Zl.newNoDocument(o,yr.min()))}else Qi(r===1);else{const o=this.Ze(n);if(o!==r){const a=this.Xe(t),u=a?this.et(a,t,o):1;if(u!==0){this.He(n);const l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,l)}}}}}Xe(t){const n=t.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=fb(r).toUint8Array()}catch(u){if(u instanceof Mbe)return e4("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new KG(o,i,s)}catch(u){return e4(u instanceof S3?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Te===0?null:a}et(t,n,r){return n.me.count===r-this.rt(t,n.targetId)?0:2}rt(t,n){const r=this.Be.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Be.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(a)||(this.We(n,s,null),i++)}),i}it(t){const n=new Map;this.Le.forEach((s,o)=>{const a=this.Ye(o);if(a){if(s.current&&UU(a.target)){const u=new Vn(a.target.path);this.st(u).has(o)||this.ot(o,u)||this.We(o,u,Zl.newNoDocument(u,t))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=ri();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const l=this.Ye(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(t));const i=new D9(t,n,this.Ke,this.ke,r);return this.ke=p1(),this.qe=_6(),this.Qe=_6(),this.Ke=new To(fi),i}Ue(t,n){if(!this.je(t))return;const r=this.ot(t,n.key)?2:0;this.ze(t).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(t)),this.Qe=this.Qe.insert(n.key,this._t(n.key).add(t))}We(t,n,r){if(!this.je(t))return;const i=this.ze(t);this.ot(t,n)?i.Fe(n,1):i.Me(n),this.Qe=this.Qe.insert(n,this._t(n).delete(t)),this.Qe=this.Qe.insert(n,this._t(n).add(t)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(t){this.Le.delete(t)}Ze(t){const n=this.ze(t).ve();return this.Be.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}xe(t){this.ze(t).xe()}ze(t){let n=this.Le.get(t);return n||(n=new qie,this.Le.set(t,n)),n}_t(t){let n=this.Qe.get(t);return n||(n=new pu(fi),this.Qe=this.Qe.insert(t,n)),n}st(t){let n=this.qe.get(t);return n||(n=new pu(fi),this.qe=this.qe.insert(t,n)),n}je(t){const n=this.Ye(t)!==null;return n||wn("WatchChangeAggregator","Detected inactive target",t),n}Ye(t){const n=this.Le.get(t);return n&&n.Se?null:this.Be.ut(t)}He(t){this.Le.set(t,new qie),this.Be.getRemoteKeysForTarget(t).forEach(n=>{this.We(t,n,null)})}ot(t,n){return this.Be.getRemoteKeysForTarget(t).has(n)}}function _6(){return new To(Vn.comparator)}function Wie(){return new To(Vn.comparator)}const Ket={asc:"ASCENDING",desc:"DESCENDING"},Xet={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Qet={and:"AND",or:"OR"};class Jet{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function HU(e,t){return e.useProto3Json||A9(t)?t:{value:t}}function vN(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function sxe(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Zet(e,t){return vN(e,t.toTimestamp())}function zm(e){return Qi(!!e),yr.fromTimestamp(function(n){const r=cb(n);return new hu(r.seconds,r.nanos)}(e))}function XG(e,t){return qU(e,t).canonicalString()}function qU(e,t){const n=function(i){return new Ks(["projects",i.projectId,"databases",i.database])}(e).child("documents");return t===void 0?n:n.child(t)}function oxe(e){const t=Ks.fromString(e);return Qi(fxe(t)),t}function WU(e,t){return XG(e.databaseId,t.path)}function i$(e,t){const n=oxe(t);if(n.get(1)!==e.databaseId.projectId)throw new mn(Tt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new mn(Tt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Vn(uxe(n))}function axe(e,t){return XG(e.databaseId,t)}function ett(e){const t=oxe(e);return t.length===4?Ks.emptyPath():uxe(t)}function GU(e){return new Ks(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function uxe(e){return Qi(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function Gie(e,t,n){return{name:WU(e,t),fields:n.value.mapValue.fields}}function ttt(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:ar()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(l,c){return l.useProto3Json?(Qi(c===void 0||typeof c=="string"),Sl.fromBase64String(c||"")):(Qi(c===void 0||c instanceof Buffer||c instanceof Uint8Array),Sl.fromUint8Array(c||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(l){const c=l.code===void 0?Tt.UNKNOWN:nxe(l.code);return new mn(c,l.message||"")}(o);n=new ixe(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=i$(e,r.document.name),s=zm(r.document.updateTime),o=r.document.createTime?zm(r.document.createTime):yr.min(),a=new Gf({mapValue:{fields:r.document.fields}}),u=Zl.newFoundDocument(i,s,o,a),l=r.targetIds||[],c=r.removedTargetIds||[];n=new IP(l,c,u.key,u)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=i$(e,r.document),s=r.readTime?zm(r.readTime):yr.min(),o=Zl.newNoDocument(i,s),a=r.removedTargetIds||[];n=new IP([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=i$(e,r.document),s=r.removedTargetIds||[];n=new IP([],s,i,null)}else{if(!("filter"in t))return ar();{t.filter;const r=t.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new Het(i,s),a=r.targetId;n=new rxe(a,o)}}return n}function ntt(e,t){let n;if(t instanceof _R)n={update:Gie(e,t.key,t.value)};else if(t instanceof GG)n={delete:WU(e,t.key)};else if(t instanceof Yb)n={update:Gie(e,t.key,t.data),updateMask:ftt(t.fieldMask)};else{if(!(t instanceof Uet))return ar();n={verify:WU(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof s4)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof o4)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof a4)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof yN)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw ar()}(0,r))),t.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:Zet(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ar()}(e,t.precondition)),n}function rtt(e,t){return e&&e.length>0?(Qi(t!==void 0),e.map(n=>function(i,s){let o=i.updateTime?zm(i.updateTime):zm(s);return o.isEqual(yr.min())&&(o=zm(s)),new $et(o,i.transformResults||[])}(n,t))):[]}function itt(e,t){return{documents:[axe(e,t.path)]}}function stt(e,t){const n={structuredQuery:{}},r=t.path;let i;t.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=axe(e,i);const s=function(l){if(l.length!==0)return cxe(T0.create(l,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(l){if(l.length!==0)return l.map(c=>function(d){return{field:vE(d.field),direction:utt(d.dir)}}(c))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=HU(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(t.endAt)),{ct:n,parent:i}}function ott(e){let t=ett(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Qi(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:t=t.child(c.collectionId)}let s=[];n.where&&(s=function(f){const d=lxe(f);return d instanceof T0&&Bbe(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(d=>function(p){return new i4(bE(p.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(f){let d;return d=typeof f=="object"?f.value:f,A9(d)?null:d}(n.limit));let u=null;n.startAt&&(u=function(f){const d=!!f.before,h=f.values||[];return new gN(h,d)}(n.startAt));let l=null;return n.endAt&&(l=function(f){const d=!f.before,h=f.values||[];return new gN(h,d)}(n.endAt)),Eet(t,i,o,s,a,"F",u,l)}function att(e,t){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ar()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function lxe(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=bE(n.unaryFilter.field);return Va.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=bE(n.unaryFilter.field);return Va.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=bE(n.unaryFilter.field);return Va.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=bE(n.unaryFilter.field);return Va.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ar()}}(e):e.fieldFilter!==void 0?function(n){return Va.create(bE(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ar()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return T0.create(n.compositeFilter.filters.map(r=>lxe(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ar()}}(n.compositeFilter.op))}(e):ar()}function utt(e){return Ket[e]}function ltt(e){return Xet[e]}function ctt(e){return Qet[e]}function vE(e){return{fieldPath:e.canonicalString()}}function bE(e){return ml.fromServerFormat(e.fieldPath)}function cxe(e){return e instanceof Va?function(n){if(n.op==="=="){if(Oie(n.value))return{unaryFilter:{field:vE(n.field),op:"IS_NAN"}};if(Die(n.value))return{unaryFilter:{field:vE(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Oie(n.value))return{unaryFilter:{field:vE(n.field),op:"IS_NOT_NAN"}};if(Die(n.value))return{unaryFilter:{field:vE(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:vE(n.field),op:ltt(n.op),value:n.value}}}(e):e instanceof T0?function(n){const r=n.getFilters().map(i=>cxe(i));return r.length===1?r[0]:{compositeFilter:{op:ctt(n.op),filters:r}}}(e):ar()}function ftt(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function fxe(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fv{constructor(t,n,r,i,s=yr.min(),o=yr.min(),a=Sl.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(t){return new Fv(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Fv(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Fv(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Fv(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dtt{constructor(t){this.ht=t}}function htt(e){const t=ott({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?VU(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ptt{constructor(){this.ln=new mtt}addToCollectionParentIndex(t,n){return this.ln.add(n),It.resolve()}getCollectionParents(t,n){return It.resolve(this.ln.getEntries(n))}addFieldIndex(t,n){return It.resolve()}deleteFieldIndex(t,n){return It.resolve()}deleteAllFieldIndexes(t){return It.resolve()}createTargetIndexes(t,n){return It.resolve()}getDocumentsMatchingTarget(t,n){return It.resolve(null)}getIndexType(t,n){return It.resolve(0)}getFieldIndexes(t,n){return It.resolve([])}getNextCollectionGroupToUpdate(t){return It.resolve(null)}getMinOffset(t,n){return It.resolve(lb.min())}getMinOffsetFromCollectionGroup(t,n){return It.resolve(lb.min())}updateCollectionGroup(t,n,r){return It.resolve()}updateIndexEntries(t,n){return It.resolve()}}class mtt{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n]||new pu(Ks.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(t){return(this.index[t]||new pu(Ks.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yie={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Vf{static withCacheSize(t){return new Vf(t,Vf.DEFAULT_COLLECTION_PERCENTILE,Vf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vf.DEFAULT_COLLECTION_PERCENTILE=10,Vf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vf.DEFAULT=new Vf(41943040,Vf.DEFAULT_COLLECTION_PERCENTILE,Vf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vf.DISABLED=new Vf(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(t){this.kn=t}next(){return this.kn+=2,this.kn}static qn(){return new bS(0)}static Qn(){return new bS(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kie([e,t],[n,r]){const i=fi(e,n);return i===0?fi(t,r):i}class gtt{constructor(t){this.Gn=t,this.buffer=new pu(Kie),this.zn=0}jn(){return++this.zn}Hn(t){const n=[t,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Kie(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class ytt{constructor(t,n,r){this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(t){wn("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){LT(n)?wn("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await MT(n)}await this.Yn(3e5)})}}class vtt{constructor(t,n){this.Zn=t,this.params=n}calculateTargetCount(t,n){return this.Zn.Xn(t).next(r=>Math.floor(n/100*r))}nthSequenceNumber(t,n){if(n===0)return It.resolve(C9.oe);const r=new gtt(n);return this.Zn.forEachTarget(t,i=>r.Hn(i.sequenceNumber)).next(()=>this.Zn.er(t,i=>r.Hn(i))).next(()=>r.maxValue)}removeTargets(t,n,r){return this.Zn.removeTargets(t,n,r)}removeOrphanedDocuments(t,n){return this.Zn.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(wn("LruGarbageCollector","Garbage collection skipped; disabled"),It.resolve(Yie)):this.getCacheSize(t).next(r=>r<this.params.cacheSizeCollectionThreshold?(wn("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Yie):this.tr(t,n))}getCacheSize(t){return this.Zn.getCacheSize(t)}tr(t,n){let r,i,s,o,a,u,l;const c=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(wn("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,o=Date.now(),this.nthSequenceNumber(t,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(t,r,n))).next(f=>(s=f,u=Date.now(),this.removeOrphanedDocuments(t,r))).next(f=>(l=Date.now(),gE()<=ni.DEBUG&&wn("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-c}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(u-a)+`ms
	Removed ${f} documents in `+(l-u)+`ms
Total Duration: ${l-c}ms`),It.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:f})))}}function btt(e,t){return new vtt(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xtt{constructor(){this.changes=new Mw(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,Zl.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?It.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _tt{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wtt{constructor(t,n,r,i){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(t,n))).next(i=>(r!==null&&_k(r.mutation,i,Wd.empty(),hu.now()),i))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,ri()).next(()=>r))}getLocalViewOfDocuments(t,n,r=ri()){const i=w_();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,r).next(s=>{let o=E3();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const r=w_();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,ri()))}populateOverlays(t,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(t,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,r,i){let s=p1();const o=xk(),a=function(){return xk()}();return n.forEach((u,l)=>{const c=r.get(l.key);i.has(l.key)&&(c===void 0||c.mutation instanceof Yb)?s=s.insert(l.key,l):c!==void 0?(o.set(l.key,c.mutation.getFieldMask()),_k(c.mutation,l,c.mutation.getFieldMask(),hu.now())):o.set(l.key,Wd.empty())}),this.recalculateAndSaveOverlays(t,s).next(u=>(u.forEach((l,c)=>o.set(l,c)),n.forEach((l,c)=>{var f;return a.set(l,new _tt(c,(f=o.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(t,n){const r=xk();let i=new To((o,a)=>o-a),s=ri();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const l=n.get(u);if(l===null)return;let c=r.get(u)||Wd.empty();c=a.applyToLocalView(l,c),r.set(u,c);const f=(i.get(a.batchId)||ri()).add(u);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),l=u.key,c=u.value,f=Ybe();c.forEach(d=>{if(!s.has(d)){const h=exe(n.get(d),r.get(d));h!==null&&f.set(d,h),s=s.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(t,l,f))}return It.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,i){return function(o){return Vn.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):Vbe(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,i):this.getDocumentsMatchingCollectionQuery(t,n,r,i)}getNextDocuments(t,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,i-s.size):It.resolve(w_());let a=-1,u=s;return o.next(l=>It.forEach(l,(c,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(c)?It.resolve():this.remoteDocumentCache.getEntry(t,c).next(d=>{u=u.insert(c,d)}))).next(()=>this.populateOverlays(t,l,s)).next(()=>this.computeViews(t,u,l,ri())).next(c=>({batchId:a,changes:Gbe(c)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Vn(n)).next(r=>{let i=E3();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(t,n,r,i){const s=n.collectionGroup;let o=E3();return this.indexManager.getCollectionParents(t,s).next(a=>It.forEach(a,u=>{const l=function(f,d){return new FT(d,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(t,l,r,i).next(c=>{c.forEach((f,d)=>{o=o.insert(f,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,s,i))).next(o=>{s.forEach((u,l)=>{const c=l.getKey();o.get(c)===null&&(o=o.insert(c,Zl.newInvalidDocument(c)))});let a=E3();return o.forEach((u,l)=>{const c=s.get(u);c!==void 0&&_k(c.mutation,l,Wd.empty(),hu.now()),I9(n,l)&&(a=a.insert(u,l))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ett{constructor(t){this.serializer=t,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(t,n){return It.resolve(this.Tr.get(n))}saveBundleMetadata(t,n){return this.Tr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:zm(i.createTime)}}(n)),It.resolve()}getNamedQuery(t,n){return It.resolve(this.Ir.get(n))}saveNamedQuery(t,n){return this.Ir.set(n.name,function(i){return{name:i.name,query:htt(i.bundledQuery),readTime:zm(i.readTime)}}(n)),It.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Stt{constructor(){this.overlays=new To(Vn.comparator),this.dr=new Map}getOverlay(t,n){return It.resolve(this.overlays.get(n))}getOverlays(t,n){const r=w_();return It.forEach(n,i=>this.getOverlay(t,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((i,s)=>{this.Tt(t,n,s)}),It.resolve()}removeOverlaysForBatchId(t,n,r){const i=this.dr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.dr.delete(r)),It.resolve()}getOverlaysForCollection(t,n,r){const i=w_(),s=n.length+1,o=new Vn(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return It.resolve(i)}getOverlaysForCollectionGroup(t,n,r,i){let s=new To((l,c)=>l-c);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let c=s.get(l.largestBatchId);c===null&&(c=w_(),s=s.insert(l.largestBatchId,c)),c.set(l.getKey(),l)}}const a=w_(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,c)=>a.set(l,c)),!(a.size()>=i)););return It.resolve(a)}Tt(t,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.dr.get(i.largestBatchId).delete(r.key);this.dr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Vet(n,r));let s=this.dr.get(n);s===void 0&&(s=ri(),this.dr.set(n,s)),this.dr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ttt{constructor(){this.sessionToken=Sl.EMPTY_BYTE_STRING}getSessionToken(t){return It.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,It.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QG{constructor(){this.Er=new pu(Iu.Ar),this.Rr=new pu(Iu.Vr)}isEmpty(){return this.Er.isEmpty()}addReference(t,n){const r=new Iu(t,n);this.Er=this.Er.add(r),this.Rr=this.Rr.add(r)}mr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.gr(new Iu(t,n))}pr(t,n){t.forEach(r=>this.removeReference(r,n))}yr(t){const n=new Vn(new Ks([])),r=new Iu(n,t),i=new Iu(n,t+1),s=[];return this.Rr.forEachInRange([r,i],o=>{this.gr(o),s.push(o.key)}),s}wr(){this.Er.forEach(t=>this.gr(t))}gr(t){this.Er=this.Er.delete(t),this.Rr=this.Rr.delete(t)}Sr(t){const n=new Vn(new Ks([])),r=new Iu(n,t),i=new Iu(n,t+1);let s=ri();return this.Rr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(t){const n=new Iu(t,0),r=this.Er.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class Iu{constructor(t,n){this.key=t,this.br=n}static Ar(t,n){return Vn.comparator(t.key,n.key)||fi(t.br,n.br)}static Vr(t,n){return fi(t.br,n.br)||Vn.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ctt{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.Dr=1,this.vr=new pu(Iu.Ar)}checkEmpty(t){return It.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,i){const s=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new zet(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.vr=this.vr.add(new Iu(a.key,s)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return It.resolve(o)}lookupMutationBatch(t,n){return It.resolve(this.Cr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,i=this.Fr(r),s=i<0?0:i;return It.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return It.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(t){return It.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new Iu(n,0),i=new Iu(n,Number.POSITIVE_INFINITY),s=[];return this.vr.forEachInRange([r,i],o=>{const a=this.Cr(o.br);s.push(a)}),It.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new pu(fi);return n.forEach(i=>{const s=new Iu(i,0),o=new Iu(i,Number.POSITIVE_INFINITY);this.vr.forEachInRange([s,o],a=>{r=r.add(a.br)})}),It.resolve(this.Mr(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,i=r.length+1;let s=r;Vn.isDocumentKey(s)||(s=s.child(""));const o=new Iu(new Vn(s),0);let a=new pu(fi);return this.vr.forEachWhile(u=>{const l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.br)),!0)},o),It.resolve(this.Mr(a))}Mr(t){const n=[];return t.forEach(r=>{const i=this.Cr(r);i!==null&&n.push(i)}),n}removeMutationBatch(t,n){Qi(this.Or(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.vr;return It.forEach(n.mutations,i=>{const s=new Iu(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.vr=r})}Bn(t){}containsKey(t,n){const r=new Iu(n,0),i=this.vr.firstAfterOrEqual(r);return It.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,It.resolve()}Or(t,n){return this.Fr(t)}Fr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Cr(t){const n=this.Fr(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Att{constructor(t){this.Nr=t,this.docs=function(){return new To(Vn.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Nr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return It.resolve(r?r.document.mutableCopy():Zl.newInvalidDocument(n))}getEntries(t,n){let r=p1();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Zl.newInvalidDocument(i))}),It.resolve(r)}getDocumentsMatchingQuery(t,n,r,i){let s=p1();const o=n.path,a=new Vn(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:l,value:{document:c}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||tet(eet(c),r)<=0||(i.has(c.key)||I9(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return It.resolve(s)}getAllFromCollectionGroup(t,n,r,i){ar()}Br(t,n){return It.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new ktt(this)}getSize(t){return It.resolve(this.size)}}class ktt extends xtt{constructor(t){super(),this.hr=t}applyChanges(t){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.hr.addEntry(t,i)):this.hr.removeEntry(r)}),It.waitFor(n)}getFromCache(t,n){return this.hr.getEntry(t,n)}getAllFromCache(t,n){return this.hr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rtt{constructor(t){this.persistence=t,this.Lr=new Mw(n=>VG(n),HG),this.lastRemoteSnapshotVersion=yr.min(),this.highestTargetId=0,this.kr=0,this.qr=new QG,this.targetCount=0,this.Qr=bS.qn()}forEachTarget(t,n){return this.Lr.forEach((r,i)=>n(i)),It.resolve()}getLastRemoteSnapshotVersion(t){return It.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return It.resolve(this.kr)}allocateTargetId(t){return this.highestTargetId=this.Qr.next(),It.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.kr&&(this.kr=n),It.resolve()}Un(t){this.Lr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Qr=new bS(n),this.highestTargetId=n),t.sequenceNumber>this.kr&&(this.kr=t.sequenceNumber)}addTargetData(t,n){return this.Un(n),this.targetCount+=1,It.resolve()}updateTargetData(t,n){return this.Un(n),It.resolve()}removeTargetData(t,n){return this.Lr.delete(n.target),this.qr.yr(n.targetId),this.targetCount-=1,It.resolve()}removeTargets(t,n,r){let i=0;const s=[];return this.Lr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Lr.delete(o),s.push(this.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),It.waitFor(s).next(()=>i)}getTargetCount(t){return It.resolve(this.targetCount)}getTargetData(t,n){const r=this.Lr.get(n)||null;return It.resolve(r)}addMatchingKeys(t,n,r){return this.qr.mr(n,r),It.resolve()}removeMatchingKeys(t,n,r){this.qr.pr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(t,o))}),It.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this.qr.yr(n),It.resolve()}getMatchingKeysForTargetId(t,n){const r=this.qr.Sr(n);return It.resolve(r)}containsKey(t,n){return It.resolve(this.qr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dxe{constructor(t,n){this.Kr={},this.overlays={},this.$r=new C9(0),this.Ur=!1,this.Ur=!0,this.Wr=new Ttt,this.referenceDelegate=t(this),this.Gr=new Rtt(this),this.indexManager=new ptt,this.remoteDocumentCache=function(i){return new Att(i)}(r=>this.referenceDelegate.zr(r)),this.serializer=new dtt(n),this.jr=new Ett(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new Stt,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.Kr[t.toKey()];return r||(r=new Ctt(n,this.referenceDelegate),this.Kr[t.toKey()]=r),r}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(t,n,r){wn("MemoryPersistence","Starting transaction:",t);const i=new Itt(this.$r.next());return this.referenceDelegate.Hr(),r(i).next(s=>this.referenceDelegate.Jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Yr(t,n){return It.or(Object.values(this.Kr).map(r=>()=>r.containsKey(t,n)))}}class Itt extends ret{constructor(t){super(),this.currentSequenceNumber=t}}class JG{constructor(t){this.persistence=t,this.Zr=new QG,this.Xr=null}static ei(t){return new JG(t)}get ti(){if(this.Xr)return this.Xr;throw ar()}addReference(t,n,r){return this.Zr.addReference(r,n),this.ti.delete(r.toString()),It.resolve()}removeReference(t,n,r){return this.Zr.removeReference(r,n),this.ti.add(r.toString()),It.resolve()}markPotentiallyOrphaned(t,n){return this.ti.add(n.toString()),It.resolve()}removeTarget(t,n){this.Zr.yr(n.targetId).forEach(i=>this.ti.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(i=>{i.forEach(s=>this.ti.add(s.toString()))}).next(()=>r.removeTargetData(t,n))}Hr(){this.Xr=new Set}Jr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return It.forEach(this.ti,r=>{const i=Vn.fromPath(r);return this.ni(t,i).next(s=>{s||n.removeEntry(i,yr.min())})}).next(()=>(this.Xr=null,n.apply(t)))}updateLimboDocument(t,n){return this.ni(t,n).next(r=>{r?this.ti.delete(n.toString()):this.ti.add(n.toString())})}zr(t){return 0}ni(t,n){return It.or([()=>It.resolve(this.Zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Yr(t,n)])}}class bN{constructor(t,n){this.persistence=t,this.ri=new Mw(r=>oet(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=btt(this,n)}static ei(t,n){return new bN(t,n)}Hr(){}Jr(t){return It.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}Xn(t){const n=this.nr(t);return this.persistence.getTargetCache().getTargetCount(t).next(r=>n.next(i=>r+i))}nr(t){let n=0;return this.er(t,r=>{n++}).next(()=>n)}er(t,n){return It.forEach(this.ri,(r,i)=>this.ir(t,r,i).next(s=>s?It.resolve():n(i)))}removeTargets(t,n,r){return this.persistence.getTargetCache().removeTargets(t,n,r)}removeOrphanedDocuments(t,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.Br(t,o=>this.ir(t,o,n).next(a=>{a||(r++,s.removeEntry(o,yr.min()))})).next(()=>s.apply(t)).next(()=>r)}markPotentiallyOrphaned(t,n){return this.ri.set(n,t.currentSequenceNumber),It.resolve()}removeTarget(t,n){const r=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,n,r){return this.ri.set(r,t.currentSequenceNumber),It.resolve()}removeReference(t,n,r){return this.ri.set(r,t.currentSequenceNumber),It.resolve()}updateLimboDocument(t,n){return this.ri.set(n,t.currentSequenceNumber),It.resolve()}zr(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=AP(t.data.value)),n}ir(t,n,r){return It.or([()=>this.persistence.Yr(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const i=this.ri.get(n);return It.resolve(i!==void 0&&i>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZG{constructor(t,n,r,i){this.targetId=t,this.fromCache=n,this.Wi=r,this.Gi=i}static zi(t,n){let r=ri(),i=ri();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new ZG(t,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ptt{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ntt{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return iQe()?8:iet(cc())>0?6:4}()}initialize(t,n){this.Zi=t,this.indexManager=n,this.ji=!0}getDocumentsMatchingQuery(t,n,r,i){const s={result:null};return this.Xi(t,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.es(t,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new Ptt;return this.ts(t,n,o).next(a=>{if(s.result=a,this.Hi)return this.ns(t,n,o,a.size)})}).next(()=>s.result)}ns(t,n,r,i){return r.documentReadCount<this.Ji?(gE()<=ni.DEBUG&&wn("QueryEngine","SDK will not create cache indexes for query:",yE(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),It.resolve()):(gE()<=ni.DEBUG&&wn("QueryEngine","Query:",yE(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Yi*i?(gE()<=ni.DEBUG&&wn("QueryEngine","The SDK decides to create cache indexes for query:",yE(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Um(n))):It.resolve())}Xi(t,n){if($ie(n))return It.resolve(null);let r=Um(n);return this.indexManager.getIndexType(t,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=VU(n,null,"F"),r=Um(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(s=>{const o=ri(...s);return this.Zi.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,r).next(u=>{const l=this.rs(n,a);return this.ss(n,l,o,u.readTime)?this.Xi(t,VU(n,null,"F")):this.os(t,l,n,u)}))})))}es(t,n,r,i){return $ie(n)||i.isEqual(yr.min())?It.resolve(null):this.Zi.getDocuments(t,r).next(s=>{const o=this.rs(n,s);return this.ss(n,o,r,i)?It.resolve(null):(gE()<=ni.DEBUG&&wn("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),yE(n)),this.os(t,o,n,ZZe(i,-1)).next(a=>a))})}rs(t,n){let r=new pu(qbe(t));return n.forEach((i,s)=>{I9(t,s)&&(r=r.add(s))}),r}ss(t,n,r,i){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ts(t,n,r){return gE()<=ni.DEBUG&&wn("QueryEngine","Using full collection scan to execute query:",yE(n)),this.Zi.getDocumentsMatchingQuery(t,n,lb.min(),r)}os(t,n,r,i){return this.Zi.getDocumentsMatchingQuery(t,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dtt{constructor(t,n,r,i){this.persistence=t,this._s=n,this.serializer=i,this.us=new To(fi),this.cs=new Mw(s=>VG(s),HG),this.ls=new Map,this.hs=t.getRemoteDocumentCache(),this.Gr=t.getTargetCache(),this.jr=t.getBundleCache(),this.Ps(r)}Ps(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new wtt(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.us))}}function Ott(e,t,n,r){return new Dtt(e,t,n,r)}async function hxe(e,t){const n=vr(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Ps(t),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=ri();for(const l of i){o.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}for(const l of s){a.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}return n.localDocuments.getDocuments(r,u).next(l=>({Ts:l,removedBatchIds:o,addedBatchIds:a}))})})}function Mtt(e,t){const n=vr(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),s=n.hs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,c){const f=l.batch,d=f.keys();let h=It.resolve();return d.forEach(p=>{h=h.next(()=>c.getEntry(u,p)).next(m=>{const g=l.docVersions.get(p);Qi(g!==null),m.version.compareTo(g)<0&&(f.applyToRemoteDocument(m,l),m.isValidDocument()&&(m.setReadTime(l.commitVersion),c.addEntry(m)))})}),h.next(()=>a.mutationQueue.removeMutationBatch(u,f))}(n,r,t,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=ri();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(t))).next(()=>n.localDocuments.getDocuments(r,i))})}function pxe(e){const t=vr(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Gr.getLastRemoteSnapshotVersion(n))}function Ltt(e,t){const n=vr(e),r=t.snapshotVersion;let i=n.us;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.hs.newChangeBuffer({trackRemovals:!0});i=n.us;const a=[];t.targetChanges.forEach((c,f)=>{const d=i.get(f);if(!d)return;a.push(n.Gr.removeMatchingKeys(s,c.removedDocuments,f).next(()=>n.Gr.addMatchingKeys(s,c.addedDocuments,f)));let h=d.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(f)!==null?h=h.withResumeToken(Sl.EMPTY_BYTE_STRING,yr.min()).withLastLimboFreeSnapshotVersion(yr.min()):c.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(c.resumeToken,r)),i=i.insert(f,h),function(m,g,b){return m.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(d,h,c)&&a.push(n.Gr.updateTargetData(s,h))});let u=p1(),l=ri();if(t.documentUpdates.forEach(c=>{t.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(Ftt(s,o,t.documentUpdates).next(c=>{u=c.Is,l=c.ds})),!r.isEqual(yr.min())){const c=n.Gr.getLastRemoteSnapshotVersion(s).next(f=>n.Gr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return It.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.us=i,s))}function Ftt(e,t,n){let r=ri(),i=ri();return n.forEach(s=>r=r.add(s)),t.getEntries(e,r).next(s=>{let o=p1();return n.forEach((a,u)=>{const l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(yr.min())?(t.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(t.addEntry(u),o=o.insert(a,u)):wn("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Is:o,ds:i}})}function $tt(e,t){const n=vr(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function Btt(e,t){const n=vr(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Gr.getTargetData(r,t).next(s=>s?(i=s,It.resolve(i)):n.Gr.allocateTargetId(r).next(o=>(i=new Fv(t,o,"TargetPurposeListen",r.currentSequenceNumber),n.Gr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.us.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.us=n.us.insert(r.targetId,r),n.cs.set(t,r.targetId)),r})}async function YU(e,t,n){const r=vr(e),i=r.us.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!LT(o))throw o;wn("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}r.us=r.us.remove(t),r.cs.delete(i.target)}function Xie(e,t,n){const r=vr(e);let i=yr.min(),s=ri();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,c){const f=vr(u),d=f.cs.get(c);return d!==void 0?It.resolve(f.us.get(d)):f.Gr.getTargetData(l,c)}(r,o,Um(t)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Gr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r._s.getDocumentsMatchingQuery(o,t,n?i:yr.min(),n?s:ri())).next(a=>(jtt(r,Cet(t),a),{documents:a,Es:s})))}function jtt(e,t,n){let r=e.ls.get(t)||yr.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),e.ls.set(t,r)}class Qie{constructor(){this.activeTargetIds=Net()}ps(t){this.activeTargetIds=this.activeTargetIds.add(t)}ys(t){this.activeTargetIds=this.activeTargetIds.delete(t)}gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Utt{constructor(){this._o=new Qie,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t,n=!0){return n&&this._o.ps(t),this.ao[t]||"not-current"}updateQueryState(t,n,r){this.ao[t]=n}removeLocalQueryTarget(t){this._o.ys(t)}isLocalQueryTarget(t){return this._o.activeTargetIds.has(t)}clearQueryState(t){delete this.ao[t]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(t){return this._o.activeTargetIds.has(t)}start(){return this._o=new Qie,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ztt{uo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jie{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(t){this.To.push(t)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){wn("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.To)t(0)}Po(){wn("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.To)t(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let w6=null;function s$(){return w6===null?w6=function(){return 268435456+Math.round(2147483648*Math.random())}():w6++,"0x"+w6.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vtt={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Htt{constructor(t){this.Eo=t.Eo,this.Ao=t.Ao}Ro(t){this.Vo=t}mo(t){this.fo=t}po(t){this.yo=t}onMessage(t){this.wo=t}close(){this.Ao()}send(t){this.Eo(t)}So(){this.Vo()}bo(){this.fo()}Do(t){this.yo(t)}vo(t){this.wo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vl="WebChannelConnection";class qtt extends class{get Co(){return!1}constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Fo=r+"://"+n.host,this.Mo=`projects/${i}/databases/${s}`,this.xo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Oo(n,r,i,s,o){const a=s$(),u=this.No(n,r.toUriEncodedString());wn("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const l={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Bo(l,s,o),this.Lo(n,u,l,i).then(c=>(wn("RestConnection",`Received RPC '${n}' ${a}: `,c),c),c=>{throw e4("RestConnection",`RPC '${n}' ${a} failed with error: `,c,"url: ",u,"request:",i),c})}ko(n,r,i,s,o,a){return this.Oo(n,r,i,s,o)}Bo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+OT}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}No(n,r){const i=Vtt[n];return`${this.Fo}/v1/${r}:${i}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Lo(t,n,r,i){const s=s$();return new Promise((o,a)=>{const u=new kbe;u.setWithCredentials(!0),u.listenOnce(Rbe.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case CP.NO_ERROR:const c=u.getResponseJson();wn(Vl,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(c)),o(c);break;case CP.TIMEOUT:wn(Vl,`RPC '${t}' ${s} timed out`),a(new mn(Tt.DEADLINE_EXCEEDED,"Request time out"));break;case CP.HTTP_ERROR:const f=u.getStatus();if(wn(Vl,`RPC '${t}' ${s} failed with status:`,f,"response text:",u.getResponseText()),f>0){let d=u.getResponseJson();Array.isArray(d)&&(d=d[0]);const h=d==null?void 0:d.error;if(h&&h.status&&h.message){const p=function(g){const b=g.toLowerCase().replace(/_/g,"-");return Object.values(Tt).indexOf(b)>=0?b:Tt.UNKNOWN}(h.status);a(new mn(p,h.message))}else a(new mn(Tt.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new mn(Tt.UNAVAILABLE,"Connection failed."));break;default:ar()}}finally{wn(Vl,`RPC '${t}' ${s} completed.`)}});const l=JSON.stringify(i);wn(Vl,`RPC '${t}' ${s} sending request:`,i),u.send(n,"POST",l,r,15)})}qo(t,n,r){const i=s$(),s=[this.Fo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=Nbe(),a=Pbe(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Bo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const c=s.join("");wn(Vl,`Creating RPC '${t}' stream ${i}: ${c}`,u);const f=o.createWebChannel(c,u);let d=!1,h=!1;const p=new Htt({Eo:g=>{h?wn(Vl,`Not sending because RPC '${t}' stream ${i} is closed:`,g):(d||(wn(Vl,`Opening RPC '${t}' stream ${i} transport.`),f.open(),d=!0),wn(Vl,`RPC '${t}' stream ${i} sending:`,g),f.send(g))},Ao:()=>f.close()}),m=(g,b,y)=>{g.listen(b,x=>{try{y(x)}catch(w){setTimeout(()=>{throw w},0)}})};return m(f,w3.EventType.OPEN,()=>{h||(wn(Vl,`RPC '${t}' stream ${i} transport opened.`),p.So())}),m(f,w3.EventType.CLOSE,()=>{h||(h=!0,wn(Vl,`RPC '${t}' stream ${i} transport closed`),p.Do())}),m(f,w3.EventType.ERROR,g=>{h||(h=!0,e4(Vl,`RPC '${t}' stream ${i} transport errored:`,g),p.Do(new mn(Tt.UNAVAILABLE,"The operation could not be completed")))}),m(f,w3.EventType.MESSAGE,g=>{var b;if(!h){const y=g.data[0];Qi(!!y);const x=y,w=(x==null?void 0:x.error)||((b=x[0])===null||b===void 0?void 0:b.error);if(w){wn(Vl,`RPC '${t}' stream ${i} received error:`,w);const T=w.status;let A=function(O){const M=Ua[O];if(M!==void 0)return nxe(M)}(T),k=w.message;A===void 0&&(A=Tt.INTERNAL,k="Unknown error status: "+T+" with message "+w.message),h=!0,p.Do(new mn(A,k)),f.close()}else wn(Vl,`RPC '${t}' stream ${i} received:`,y),p.vo(y)}}),m(a,Ibe.STAT_EVENT,g=>{g.stat===FU.PROXY?wn(Vl,`RPC '${t}' stream ${i} detected buffering proxy`):g.stat===FU.NOPROXY&&wn(Vl,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.bo()},0),p}}function o$(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O9(e){return new Jet(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mxe{constructor(t,n,r=1e3,i=1.5,s=6e4){this.li=t,this.timerId=n,this.Qo=r,this.Ko=i,this.$o=s,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(t){this.cancel();const n=Math.floor(this.Uo+this.Ho()),r=Math.max(0,Date.now()-this.Go),i=Math.max(0,n-r);i>0&&wn("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Uo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,i,()=>(this.Go=Date.now(),t())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gxe{constructor(t,n,r,i,s,o,a,u){this.li=t,this.Yo=r,this.Zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new mxe(t,n)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(t){this.l_(),this.stream.send(t)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(t,n){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,t!==4?this.r_.reset():n&&n.code===Tt.RESOURCE_EXHAUSTED?(h1(n.toString()),h1("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):n&&n.code===Tt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.po(n)}P_(){}auth(){this.state=1;const t=this.T_(this.Xo),n=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Xo===n&&this.I_(r,i)},r=>{t(()=>{const i=new mn(Tt.UNKNOWN,"Fetching auth token failed: "+r.message);return this.d_(i)})})}I_(t,n){const r=this.T_(this.Xo);this.stream=this.E_(t,n),this.stream.Ro(()=>{r(()=>this.listener.Ro())}),this.stream.mo(()=>{r(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(i=>{r(()=>this.d_(i))}),this.stream.onMessage(i=>{r(()=>++this.n_==1?this.A_(i):this.onNext(i))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}d_(t){return wn("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}T_(t){return n=>{this.li.enqueueAndForget(()=>this.Xo===t?n():(wn("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Wtt extends gxe{constructor(t,n,r,i,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}E_(t,n){return this.connection.qo("Listen",t,n)}A_(t){return this.onNext(t)}onNext(t){this.r_.reset();const n=ttt(this.serializer,t),r=function(s){if(!("targetChange"in s))return yr.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?yr.min():o.readTime?zm(o.readTime):yr.min()}(t);return this.listener.R_(n,r)}V_(t){const n={};n.database=GU(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=UU(u)?{documents:itt(s,u)}:{query:stt(s,u).ct},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=sxe(s,o.resumeToken);const l=HU(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(yr.min())>0){a.readTime=vN(s,o.snapshotVersion.toTimestamp());const l=HU(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,t);const r=att(this.serializer,t);r&&(n.labels=r),this.c_(n)}m_(t){const n={};n.database=GU(this.serializer),n.removeTarget=t,this.c_(n)}}class Gtt extends gxe{constructor(t,n,r,i,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}E_(t,n){return this.connection.qo("Write",t,n)}A_(t){return Qi(!!t.streamToken),this.lastStreamToken=t.streamToken,Qi(!t.writeResults||t.writeResults.length===0),this.listener.p_()}onNext(t){Qi(!!t.streamToken),this.lastStreamToken=t.streamToken,this.r_.reset();const n=rtt(t.writeResults,t.commitTime),r=zm(t.commitTime);return this.listener.y_(r,n)}w_(){const t={};t.database=GU(this.serializer),this.c_(t)}g_(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>ntt(this.serializer,r))};this.c_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ytt extends class{}{constructor(t,n,r,i){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.S_=!1}b_(){if(this.S_)throw new mn(Tt.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(t,n,r,i){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Oo(t,qU(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Tt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new mn(Tt.UNKNOWN,s.toString())})}ko(t,n,r,i,s){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.ko(t,qU(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Tt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new mn(Tt.UNKNOWN,o.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class Ktt{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(t){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.M_("Offline")))}set(t){this.N_(),this.D_=0,t==="Online"&&(this.C_=!1),this.M_(t)}M_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}x_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(h1(n),this.C_=!1):wn("OnlineStateTracker",n)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xtt{constructor(t,n,r,i,s){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.B_=[],this.L_=new Map,this.k_=new Set,this.q_=[],this.Q_=s,this.Q_.uo(o=>{r.enqueueAndForget(async()=>{Lw(this)&&(wn("RemoteStore","Restarting streams for network reachability change."),await async function(u){const l=vr(u);l.k_.add(4),await SR(l),l.K_.set("Unknown"),l.k_.delete(4),await ER(l)}(this))})}),this.K_=new Ktt(r,i)}}async function ER(e){if(Lw(e))for(const t of e.q_)await t(!0)}async function SR(e){for(const t of e.q_)await t(!1)}function yxe(e,t){const n=vr(e);n.L_.has(t.targetId)||(n.L_.set(t.targetId,t),rY(n)?nY(n):$T(n).s_()&&tY(n,t))}function eY(e,t){const n=vr(e),r=$T(n);n.L_.delete(t),r.s_()&&vxe(n,t),n.L_.size===0&&(r.s_()?r.a_():Lw(n)&&n.K_.set("Unknown"))}function tY(e,t){if(e.U_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(yr.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}$T(e).V_(t)}function vxe(e,t){e.U_.xe(t),$T(e).m_(t)}function nY(e){e.U_=new Yet({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ut:t=>e.L_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),$T(e).start(),e.K_.F_()}function rY(e){return Lw(e)&&!$T(e).i_()&&e.L_.size>0}function Lw(e){return vr(e).k_.size===0}function bxe(e){e.U_=void 0}async function Qtt(e){e.K_.set("Online")}async function Jtt(e){e.L_.forEach((t,n)=>{tY(e,t)})}async function Ztt(e,t){bxe(e),rY(e)?(e.K_.O_(t),nY(e)):e.K_.set("Unknown")}async function ent(e,t,n){if(e.K_.set("Online"),t instanceof ixe&&t.state===2&&t.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.L_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.L_.delete(a),i.U_.removeTarget(a))}(e,t)}catch(r){wn("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await xN(e,r)}else if(t instanceof IP?e.U_.$e(t):t instanceof rxe?e.U_.Je(t):e.U_.Ge(t),!n.isEqual(yr.min()))try{const r=await pxe(e.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.U_.it(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){const c=s.L_.get(l);c&&s.L_.set(l,c.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{const c=s.L_.get(u);if(!c)return;s.L_.set(u,c.withResumeToken(Sl.EMPTY_BYTE_STRING,c.snapshotVersion)),vxe(s,u);const f=new Fv(c.target,u,l,c.sequenceNumber);tY(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(r){wn("RemoteStore","Failed to raise snapshot:",r),await xN(e,r)}}async function xN(e,t,n){if(!LT(t))throw t;e.k_.add(1),await SR(e),e.K_.set("Offline"),n||(n=()=>pxe(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{wn("RemoteStore","Retrying IndexedDB access"),await n(),e.k_.delete(1),await ER(e)})}function xxe(e,t){return t().catch(n=>xN(e,n,t))}async function M9(e){const t=vr(e),n=hb(t);let r=t.B_.length>0?t.B_[t.B_.length-1].batchId:-1;for(;tnt(t);)try{const i=await $tt(t.localStore,r);if(i===null){t.B_.length===0&&n.a_();break}r=i.batchId,nnt(t,i)}catch(i){await xN(t,i)}_xe(t)&&wxe(t)}function tnt(e){return Lw(e)&&e.B_.length<10}function nnt(e,t){e.B_.push(t);const n=hb(e);n.s_()&&n.f_&&n.g_(t.mutations)}function _xe(e){return Lw(e)&&!hb(e).i_()&&e.B_.length>0}function wxe(e){hb(e).start()}async function rnt(e){hb(e).w_()}async function int(e){const t=hb(e);for(const n of e.B_)t.g_(n.mutations)}async function snt(e,t,n){const r=e.B_.shift(),i=YG.from(r,t,n);await xxe(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await M9(e)}async function ont(e,t){t&&hb(e).f_&&await async function(r,i){if(function(o){return qet(o)&&o!==Tt.ABORTED}(i.code)){const s=r.B_.shift();hb(r).__(),await xxe(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await M9(r)}}(e,t),_xe(e)&&wxe(e)}async function Zie(e,t){const n=vr(e);n.asyncQueue.verifyOperationInProgress(),wn("RemoteStore","RemoteStore received new credentials");const r=Lw(n);n.k_.add(3),await SR(n),r&&n.K_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.k_.delete(3),await ER(n)}async function ant(e,t){const n=vr(e);t?(n.k_.delete(2),await ER(n)):t||(n.k_.add(2),await SR(n),n.K_.set("Unknown"))}function $T(e){return e.W_||(e.W_=function(n,r,i){const s=vr(n);return s.b_(),new Wtt(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Ro:Qtt.bind(null,e),mo:Jtt.bind(null,e),po:Ztt.bind(null,e),R_:ent.bind(null,e)}),e.q_.push(async t=>{t?(e.W_.__(),rY(e)?nY(e):e.K_.set("Unknown")):(await e.W_.stop(),bxe(e))})),e.W_}function hb(e){return e.G_||(e.G_=function(n,r,i){const s=vr(n);return s.b_(),new Gtt(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Ro:()=>Promise.resolve(),mo:rnt.bind(null,e),po:ont.bind(null,e),p_:int.bind(null,e),y_:snt.bind(null,e)}),e.q_.push(async t=>{t?(e.G_.__(),await M9(e)):(await e.G_.stop(),e.B_.length>0&&(wn("RemoteStore",`Stopping write stream with ${e.B_.length} pending writes`),e.B_=[]))})),e.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iY{constructor(t,n,r,i,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Ky,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,s){const o=Date.now()+r,a=new iY(t,n,o,i,s);return a.start(r),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new mn(Tt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function sY(e,t){if(h1("AsyncQueue",`${t}: ${e}`),LT(e))return new mn(Tt.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE{static emptySet(t){return new zE(t.comparator)}constructor(t){this.comparator=t?(n,r)=>t(n,r)||Vn.comparator(n.key,r.key):(n,r)=>Vn.comparator(n.key,r.key),this.keyedMap=E3(),this.sortedSet=new To(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof zE)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new zE;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ese{constructor(){this.z_=new To(Vn.comparator)}track(t){const n=t.doc.key,r=this.z_.get(n);r?t.type!==0&&r.type===3?this.z_=this.z_.insert(n,t):t.type===3&&r.type!==1?this.z_=this.z_.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.z_=this.z_.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.z_=this.z_.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.z_=this.z_.remove(n):t.type===1&&r.type===2?this.z_=this.z_.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.z_=this.z_.insert(n,{type:2,doc:t.doc}):ar():this.z_=this.z_.insert(n,t)}j_(){const t=[];return this.z_.inorderTraversal((n,r)=>{t.push(r)}),t}}class xS{constructor(t,n,r,i,s,o,a,u,l){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(t,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new xS(t,n,zE.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&R9(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class unt{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(t=>t.Z_())}}class lnt{constructor(){this.queries=tse(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(n,r){const i=vr(n),s=i.queries;i.queries=tse(),s.forEach((o,a)=>{for(const u of a.J_)u.onError(r)})})(this,new mn(Tt.ABORTED,"Firestore shutting down"))}}function tse(){return new Mw(e=>Hbe(e),R9)}async function Exe(e,t){const n=vr(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.Y_()&&t.Z_()&&(r=2):(s=new unt,r=t.Z_()?0:1);try{switch(r){case 0:s.H_=await n.onListen(i,!0);break;case 1:s.H_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=sY(o,`Initialization of query '${yE(t.query)}' failed`);return void t.onError(a)}n.queries.set(i,s),s.J_.push(t),t.ea(n.onlineState),s.H_&&t.ta(s.H_)&&oY(n)}async function Sxe(e,t){const n=vr(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const o=s.J_.indexOf(t);o>=0&&(s.J_.splice(o,1),s.J_.length===0?i=t.Z_()?0:1:!s.Y_()&&t.Z_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function cnt(e,t){const n=vr(e);let r=!1;for(const i of t){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.J_)a.ta(i)&&(r=!0);o.H_=i}}r&&oY(n)}function fnt(e,t,n){const r=vr(e),i=r.queries.get(t);if(i)for(const s of i.J_)s.onError(n);r.queries.delete(t)}function oY(e){e.X_.forEach(t=>{t.next()})}var KU,nse;(nse=KU||(KU={})).na="default",nse.Cache="cache";class Txe{constructor(t,n,r){this.query=t,this.ra=n,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=r||{}}ta(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)i.type!==3&&r.push(i);t=new xS(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.ia?this.oa(t)&&(this.ra.next(t),n=!0):this._a(t,this.onlineState)&&(this.aa(t),n=!0),this.sa=t,n}onError(t){this.ra.error(t)}ea(t){this.onlineState=t;let n=!1;return this.sa&&!this.ia&&this._a(this.sa,t)&&(this.aa(this.sa),n=!0),n}_a(t,n){if(!t.fromCache||!this.Z_())return!0;const r=n!=="Offline";return(!this.options.ua||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}oa(t){if(t.docChanges.length>0)return!0;const n=this.sa&&this.sa.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}aa(t){t=xS.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.ia=!0,this.ra.next(t)}Z_(){return this.options.source!==KU.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cxe{constructor(t){this.key=t}}class Axe{constructor(t){this.key=t}}class dnt{constructor(t,n){this.query=t,this.Ea=n,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=ri(),this.mutatedKeys=ri(),this.Va=qbe(t),this.ma=new zE(this.Va)}get fa(){return this.Ea}ga(t,n){const r=n?n.pa:new ese,i=n?n.ma:this.ma;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((c,f)=>{const d=i.get(c),h=I9(this.query,f)?f:null,p=!!d&&this.mutatedKeys.has(d.key),m=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let g=!1;d&&h?d.data.isEqual(h.data)?p!==m&&(r.track({type:3,doc:h}),g=!0):this.ya(d,h)||(r.track({type:2,doc:h}),g=!0,(u&&this.Va(h,u)>0||l&&this.Va(h,l)<0)&&(a=!0)):!d&&h?(r.track({type:0,doc:h}),g=!0):d&&!h&&(r.track({type:1,doc:d}),g=!0,(u||l)&&(a=!0)),g&&(h?(o=o.add(h),s=m?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{ma:o,pa:r,ss:a,mutatedKeys:s}}ya(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,i){const s=this.ma;this.ma=t.ma,this.mutatedKeys=t.mutatedKeys;const o=t.pa.j_();o.sort((c,f)=>function(h,p){const m=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ar()}};return m(h)-m(p)}(c.type,f.type)||this.Va(c.doc,f.doc)),this.wa(r),i=i!=null&&i;const a=n&&!i?this.Sa():[],u=this.Ra.size===0&&this.current&&!i?1:0,l=u!==this.Aa;return this.Aa=u,o.length!==0||l?{snapshot:new xS(this.query,t.ma,s,o,t.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),ba:a}:{ba:a}}ea(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new ese,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(t){return!this.Ea.has(t)&&!!this.ma.has(t)&&!this.ma.get(t).hasLocalMutations}wa(t){t&&(t.addedDocuments.forEach(n=>this.Ea=this.Ea.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ea=this.Ea.delete(n)),this.current=t.current)}Sa(){if(!this.current)return[];const t=this.Ra;this.Ra=ri(),this.ma.forEach(r=>{this.Da(r.key)&&(this.Ra=this.Ra.add(r.key))});const n=[];return t.forEach(r=>{this.Ra.has(r)||n.push(new Axe(r))}),this.Ra.forEach(r=>{t.has(r)||n.push(new Cxe(r))}),n}va(t){this.Ea=t.Es,this.Ra=ri();const n=this.ga(t.documents);return this.applyChanges(n,!0)}Ca(){return xS.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class hnt{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class pnt{constructor(t){this.key=t,this.Fa=!1}}class mnt{constructor(t,n,r,i,s,o){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ma={},this.xa=new Mw(a=>Hbe(a),R9),this.Oa=new Map,this.Na=new Set,this.Ba=new To(Vn.comparator),this.La=new Map,this.ka=new QG,this.qa={},this.Qa=new Map,this.Ka=bS.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function gnt(e,t,n=!0){const r=Dxe(e);let i;const s=r.xa.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Ca()):i=await kxe(r,t,n,!0),i}async function ynt(e,t){const n=Dxe(e);await kxe(n,t,!0,!1)}async function kxe(e,t,n,r){const i=await Btt(e.localStore,Um(t)),s=i.targetId,o=e.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await vnt(e,t,s,o==="current",i.resumeToken)),e.isPrimaryClient&&n&&yxe(e.remoteStore,i),a}async function vnt(e,t,n,r,i){e.Ua=(f,d,h)=>async function(m,g,b,y){let x=g.view.ga(b);x.ss&&(x=await Xie(m.localStore,g.query,!1).then(({documents:k})=>g.view.ga(k,x)));const w=y&&y.targetChanges.get(g.targetId),T=y&&y.targetMismatches.get(g.targetId)!=null,A=g.view.applyChanges(x,m.isPrimaryClient,w,T);return ise(m,g.targetId,A.ba),A.snapshot}(e,f,d,h);const s=await Xie(e.localStore,t,!0),o=new dnt(t,s.Es),a=o.ga(s.documents),u=wR.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",i),l=o.applyChanges(a,e.isPrimaryClient,u);ise(e,n,l.ba);const c=new hnt(t,n,o);return e.xa.set(t,c),e.Oa.has(n)?e.Oa.get(n).push(t):e.Oa.set(n,[t]),l.snapshot}async function bnt(e,t,n){const r=vr(e),i=r.xa.get(t),s=r.Oa.get(i.targetId);if(s.length>1)return r.Oa.set(i.targetId,s.filter(o=>!R9(o,t))),void r.xa.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await YU(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&eY(r.remoteStore,i.targetId),XU(r,i.targetId)}).catch(MT)):(XU(r,i.targetId),await YU(r.localStore,i.targetId,!0))}async function xnt(e,t){const n=vr(e),r=n.xa.get(t),i=n.Oa.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),eY(n.remoteStore,r.targetId))}async function _nt(e,t,n){const r=knt(e);try{const i=await function(o,a){const u=vr(o),l=hu.now(),c=a.reduce((h,p)=>h.add(p.key),ri());let f,d;return u.persistence.runTransaction("Locally write mutations","readwrite",h=>{let p=p1(),m=ri();return u.hs.getEntries(h,c).next(g=>{p=g,p.forEach((b,y)=>{y.isValidDocument()||(m=m.add(b))})}).next(()=>u.localDocuments.getOverlayedDocuments(h,p)).next(g=>{f=g;const b=[];for(const y of a){const x=jet(y,f.get(y.key).overlayedDocument);x!=null&&b.push(new Yb(y.key,x,Lbe(x.value.mapValue),Zd.exists(!0)))}return u.mutationQueue.addMutationBatch(h,l,b,a)}).next(g=>{d=g;const b=g.applyToLocalDocumentSet(f,m);return u.documentOverlayCache.saveOverlays(h,g.batchId,b)})}).then(()=>({batchId:d.batchId,changes:Gbe(f)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.qa[o.currentUser.toKey()];l||(l=new To(fi)),l=l.insert(a,u),o.qa[o.currentUser.toKey()]=l}(r,i.batchId,n),await TR(r,i.changes),await M9(r.remoteStore)}catch(i){const s=sY(i,"Failed to persist write");n.reject(s)}}async function Rxe(e,t){const n=vr(e);try{const r=await Ltt(n.localStore,t);t.targetChanges.forEach((i,s)=>{const o=n.La.get(s);o&&(Qi(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Fa=!0:i.modifiedDocuments.size>0?Qi(o.Fa):i.removedDocuments.size>0&&(Qi(o.Fa),o.Fa=!1))}),await TR(n,r,t)}catch(r){await MT(r)}}function rse(e,t,n){const r=vr(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.xa.forEach((s,o)=>{const a=o.view.ea(t);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=vr(o);u.onlineState=a;let l=!1;u.queries.forEach((c,f)=>{for(const d of f.J_)d.ea(a)&&(l=!0)}),l&&oY(u)}(r.eventManager,t),i.length&&r.Ma.R_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function wnt(e,t,n){const r=vr(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.La.get(t),s=i&&i.key;if(s){let o=new To(Vn.comparator);o=o.insert(s,Zl.newNoDocument(s,yr.min()));const a=ri().add(s),u=new D9(yr.min(),new Map,new To(fi),o,a);await Rxe(r,u),r.Ba=r.Ba.remove(s),r.La.delete(t),aY(r)}else await YU(r.localStore,t,!1).then(()=>XU(r,t,n)).catch(MT)}async function Ent(e,t){const n=vr(e),r=t.batch.batchId;try{const i=await Mtt(n.localStore,t);Pxe(n,r,null),Ixe(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await TR(n,i)}catch(i){await MT(i)}}async function Snt(e,t,n){const r=vr(e);try{const i=await function(o,a){const u=vr(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return u.mutationQueue.lookupMutationBatch(l,a).next(f=>(Qi(f!==null),c=f.keys(),u.mutationQueue.removeMutationBatch(l,f))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,c,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>u.localDocuments.getDocuments(l,c))})}(r.localStore,t);Pxe(r,t,n),Ixe(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await TR(r,i)}catch(i){await MT(i)}}function Ixe(e,t){(e.Qa.get(t)||[]).forEach(n=>{n.resolve()}),e.Qa.delete(t)}function Pxe(e,t,n){const r=vr(e);let i=r.qa[r.currentUser.toKey()];if(i){const s=i.get(t);s&&(n?s.reject(n):s.resolve(),i=i.remove(t)),r.qa[r.currentUser.toKey()]=i}}function XU(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Oa.get(t))e.xa.delete(r),n&&e.Ma.Wa(r,n);e.Oa.delete(t),e.isPrimaryClient&&e.ka.yr(t).forEach(r=>{e.ka.containsKey(r)||Nxe(e,r)})}function Nxe(e,t){e.Na.delete(t.path.canonicalString());const n=e.Ba.get(t);n!==null&&(eY(e.remoteStore,n),e.Ba=e.Ba.remove(t),e.La.delete(n),aY(e))}function ise(e,t,n){for(const r of n)r instanceof Cxe?(e.ka.addReference(r.key,t),Tnt(e,r)):r instanceof Axe?(wn("SyncEngine","Document no longer in limbo: "+r.key),e.ka.removeReference(r.key,t),e.ka.containsKey(r.key)||Nxe(e,r.key)):ar()}function Tnt(e,t){const n=t.key,r=n.path.canonicalString();e.Ba.get(n)||e.Na.has(r)||(wn("SyncEngine","New document in limbo: "+n),e.Na.add(r),aY(e))}function aY(e){for(;e.Na.size>0&&e.Ba.size<e.maxConcurrentLimboResolutions;){const t=e.Na.values().next().value;e.Na.delete(t);const n=new Vn(Ks.fromString(t)),r=e.Ka.next();e.La.set(r,new pnt(n)),e.Ba=e.Ba.insert(n,r),yxe(e.remoteStore,new Fv(Um(qG(n.path)),r,"TargetPurposeLimboResolution",C9.oe))}}async function TR(e,t,n){const r=vr(e),i=[],s=[],o=[];r.xa.isEmpty()||(r.xa.forEach((a,u)=>{o.push(r.Ua(u,t,n).then(l=>{var c;if((l||n)&&r.isPrimaryClient){const f=l?!l.fromCache:(c=n==null?void 0:n.targetChanges.get(u.targetId))===null||c===void 0?void 0:c.current;r.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(l){i.push(l);const f=ZG.zi(u.targetId,l);s.push(f)}}))}),await Promise.all(o),r.Ma.R_(i),await async function(u,l){const c=vr(u);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>It.forEach(l,d=>It.forEach(d.Wi,h=>c.persistence.referenceDelegate.addReference(f,d.targetId,h)).next(()=>It.forEach(d.Gi,h=>c.persistence.referenceDelegate.removeReference(f,d.targetId,h)))))}catch(f){if(!LT(f))throw f;wn("LocalStore","Failed to update sequence numbers: "+f)}for(const f of l){const d=f.targetId;if(!f.fromCache){const h=c.us.get(d),p=h.snapshotVersion,m=h.withLastLimboFreeSnapshotVersion(p);c.us=c.us.insert(d,m)}}}(r.localStore,s))}async function Cnt(e,t){const n=vr(e);if(!n.currentUser.isEqual(t)){wn("SyncEngine","User change. New user:",t.toKey());const r=await hxe(n.localStore,t);n.currentUser=t,function(s,o){s.Qa.forEach(a=>{a.forEach(u=>{u.reject(new mn(Tt.CANCELLED,o))})}),s.Qa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await TR(n,r.Ts)}}function Ant(e,t){const n=vr(e),r=n.La.get(t);if(r&&r.Fa)return ri().add(r.key);{let i=ri();const s=n.Oa.get(t);if(!s)return i;for(const o of s){const a=n.xa.get(o);i=i.unionWith(a.view.fa)}return i}}function Dxe(e){const t=vr(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Rxe.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ant.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=wnt.bind(null,t),t.Ma.R_=cnt.bind(null,t.eventManager),t.Ma.Wa=fnt.bind(null,t.eventManager),t}function knt(e){const t=vr(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Ent.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Snt.bind(null,t),t}class _N{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=O9(t.databaseInfo.databaseId),this.sharedClientState=this.za(t),this.persistence=this.ja(t),await this.persistence.start(),this.localStore=this.Ha(t),this.gcScheduler=this.Ja(t,this.localStore),this.indexBackfillerScheduler=this.Ya(t,this.localStore)}Ja(t,n){return null}Ya(t,n){return null}Ha(t){return Ott(this.persistence,new Ntt,t.initialUser,this.serializer)}ja(t){return new dxe(JG.ei,this.serializer)}za(t){return new Utt}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}_N.provider={build:()=>new _N};class Rnt extends _N{constructor(t){super(),this.cacheSizeBytes=t}Ja(t,n){Qi(this.persistence.referenceDelegate instanceof bN);const r=this.persistence.referenceDelegate.garbageCollector;return new ytt(r,t.asyncQueue,n)}ja(t){const n=this.cacheSizeBytes!==void 0?Vf.withCacheSize(this.cacheSizeBytes):Vf.DEFAULT;return new dxe(r=>bN.ei(r,n),this.serializer)}}class QU{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>rse(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Cnt.bind(null,this.syncEngine),await ant(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new lnt}()}createDatastore(t){const n=O9(t.databaseInfo.databaseId),r=function(s){return new qtt(s)}(t.databaseInfo);return function(s,o,a,u){return new Ytt(s,o,a,u)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,i,s,o,a){return new Xtt(r,i,s,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>rse(this.syncEngine,n,0),function(){return Jie.p()?new Jie:new ztt}())}createSyncEngine(t,n){return function(i,s,o,a,u,l,c){const f=new mnt(i,s,o,a,u,l);return c&&(f.$a=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(i){const s=vr(i);wn("RemoteStore","RemoteStore shutting down."),s.k_.add(5),await SR(s),s.Q_.shutdown(),s.K_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}QU.provider={build:()=>new QU};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oxe{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Xa(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Xa(this.observer.error,t):h1("Uncaught Error in snapshot listener:",t.toString()))}eu(){this.muted=!0}Xa(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Int{constructor(t,n,r,i,s){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=zf.UNAUTHENTICATED,this.clientId=Dbe.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{wn("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(wn("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Ky;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=sY(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function a$(e,t){e.asyncQueue.verifyOperationInProgress(),wn("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async i=>{r.isEqual(i)||(await hxe(t.localStore,i),r=i)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function sse(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Mxe(e);wn("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>Zie(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,i)=>Zie(t.remoteStore,i)),e._onlineComponents=t}async function Mxe(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){wn("FirestoreClient","Using user provided OfflineComponentProvider");try{await a$(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(i){return i.name==="FirebaseError"?i.code===Tt.FAILED_PRECONDITION||i.code===Tt.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;e4("Error using user provided cache. Falling back to memory cache: "+n),await a$(e,new _N)}}else wn("FirestoreClient","Using default OfflineComponentProvider"),await a$(e,new Rnt(void 0));return e._offlineComponents}async function uY(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(wn("FirestoreClient","Using user provided OnlineComponentProvider"),await sse(e,e._uninitializedComponentsProvider._online)):(wn("FirestoreClient","Using default OnlineComponentProvider"),await sse(e,new QU))),e._onlineComponents}function Pnt(e){return Mxe(e).then(t=>t.persistence)}function Nnt(e){return uY(e).then(t=>t.remoteStore)}function Dnt(e){return uY(e).then(t=>t.syncEngine)}async function Lxe(e){const t=await uY(e),n=t.eventManager;return n.onListen=gnt.bind(null,t.syncEngine),n.onUnlisten=bnt.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=ynt.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=xnt.bind(null,t.syncEngine),n}function Ont(e){return e.asyncQueue.enqueue(async()=>{const t=await Pnt(e),n=await Nnt(e);return t.setNetworkEnabled(!0),function(i){const s=vr(i);return s.k_.delete(0),ER(s)}(n)})}function Mnt(e,t,n={}){const r=new Ky;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new Oxe({next:d=>{c.eu(),o.enqueueAndForget(()=>Sxe(s,f));const h=d.docs.has(a);!h&&d.fromCache?l.reject(new mn(Tt.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&d.fromCache&&u&&u.source==="server"?l.reject(new mn(Tt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new Txe(qG(a.path),c,{includeMetadataChanges:!0,ua:!0});return Exe(s,f)}(await Lxe(e),e.asyncQueue,t,n,r)),r.promise}function Lnt(e,t,n={}){const r=new Ky;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new Oxe({next:d=>{c.eu(),o.enqueueAndForget(()=>Sxe(s,f)),d.fromCache&&u.source==="server"?l.reject(new mn(Tt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new Txe(a,c,{includeMetadataChanges:!0,ua:!0});return Exe(s,f)}(await Lxe(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fxe(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ose=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $xe(e,t,n){if(!n)throw new mn(Tt.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Fnt(e,t,n,r){if(t===!0&&r===!0)throw new mn(Tt.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function ase(e){if(!Vn.isDocumentKey(e))throw new mn(Tt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function use(e){if(Vn.isDocumentKey(e))throw new mn(Tt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function L9(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":ar()}function og(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new mn(Tt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=L9(e);throw new mn(Tt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lse{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new mn(Tt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new mn(Tt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}Fnt("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Fxe((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new mn(Tt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new mn(Tt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new mn(Tt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class lY{constructor(t,n,r,i){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new lse({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new mn(Tt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new mn(Tt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new lse(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new qZe;switch(r.type){case"firstParty":return new YZe(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new mn(Tt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=ose.get(n);r&&(wn("ComponentProvider","Removing Datastore"),ose.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Fw(this.firestore,t,this._query)}}class nf{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qv(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new nf(this.firestore,t,this._key)}}class Qv extends Fw{constructor(t,n,r){super(t,n,qG(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new nf(this.firestore,null,new Vn(t))}withConverter(t){return new Qv(this.firestore,t,this._path)}}function Ff(e,t,...n){if(e=$s(e),$xe("collection","path",t),e instanceof lY){const r=Ks.fromString(t,...n);return use(r),new Qv(e,null,r)}{if(!(e instanceof nf||e instanceof Qv))throw new mn(Tt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Ks.fromString(t,...n));return use(r),new Qv(e.firestore,null,r)}}function Gs(e,t,...n){if(e=$s(e),arguments.length===1&&(t=Dbe.newId()),$xe("doc","path",t),e instanceof lY){const r=Ks.fromString(t,...n);return ase(r),new nf(e,null,new Vn(r))}{if(!(e instanceof nf||e instanceof Qv))throw new mn(Tt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Ks.fromString(t,...n));return ase(r),new nf(e.firestore,e instanceof Qv?e.converter:null,new Vn(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cse{constructor(t=Promise.resolve()){this.Iu=[],this.du=!1,this.Eu=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new mxe(this,"async_queue_retry"),this.fu=()=>{const r=o$();r&&wn("AsyncQueue","Visibility state changed to "+r.visibilityState),this.r_.Jo()},this.gu=t;const n=o$();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.du}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.pu(),this.yu(t)}enterRestrictedMode(t){if(!this.du){this.du=!0,this.Vu=t||!1;const n=o$();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.fu)}}enqueue(t){if(this.pu(),this.du)return new Promise(()=>{});const n=new Ky;return this.yu(()=>this.du&&this.Vu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Iu.push(t),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(t){if(!LT(t))throw t;wn("AsyncQueue","Operation failed with retryable error: "+t)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(t){const n=this.gu.then(()=>(this.Ru=!0,t().catch(r=>{this.Au=r,this.Ru=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw h1("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Ru=!1,r))));return this.gu=n,n}enqueueAfterDelay(t,n,r){this.pu(),this.mu.indexOf(t)>-1&&(n=0);const i=iY.createAndSchedule(this,t,n,r,s=>this.Su(s));return this.Eu.push(i),i}pu(){this.Au&&ar()}verifyOperationInProgress(){}async bu(){let t;do t=this.gu,await t;while(t!==this.gu)}Du(t){for(const n of this.Eu)if(n.timerId===t)return!0;return!1}vu(t){return this.bu().then(()=>{this.Eu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Eu)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.bu()})}Cu(t){this.mu.push(t)}Su(t){const n=this.Eu.indexOf(t);this.Eu.splice(n,1)}}class $w extends lY{constructor(t,n,r,i){super(t,n,r,i),this.type="firestore",this._queue=new cse,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new cse(t),this._firestoreClient=void 0,await t}}}function $nt(e,t,n){n||(n="(default)");const r=DT(e,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(Jk(s,t))return i;throw new mn(Tt.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(t.cacheSizeBytes!==void 0&&t.localCache!==void 0)throw new mn(Tt.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(t.cacheSizeBytes!==void 0&&t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new mn(Tt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:t,instanceIdentifier:n})}function CR(e){if(e._terminated)throw new mn(Tt.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||Bnt(e),e._firestoreClient}function Bnt(e){var t,n,r;const i=e._freezeSettings(),s=function(a,u,l,c){return new cet(a,u,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,Fxe(c.experimentalLongPollingOptions),c.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new Int(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(a){const u=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(u),_online:u}}(e._componentsProvider))}function jnt(e){return Ont(CR(e=og(e,$w)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(t){this._byteString=t}static fromBase64String(t){try{return new _S(Sl.fromBase64String(t))}catch(n){throw new mn(Tt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new _S(Sl.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new mn(Tt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ml(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F9{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cY=class{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new mn(Tt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new mn(Tt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return fi(this._lat,t._lat)||fi(this._long,t._long)}};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fY{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Unt=/^__.*__$/;class znt{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new Yb(t,this.data,this.fieldMask,n,this.fieldTransforms):new _R(t,this.data,n,this.fieldTransforms)}}class Bxe{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new Yb(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function jxe(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ar()}}class dY{constructor(t,n,r,i,s,o){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Fu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(t){return new dY(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.xu({path:r,Nu:!1});return i.Bu(t),i}Lu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.xu({path:r,Nu:!1});return i.Fu(),i}ku(t){return this.xu({path:void 0,Nu:!0})}qu(t){return wN(t,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Fu(){if(this.path)for(let t=0;t<this.path.length;t++)this.Bu(this.path.get(t))}Bu(t){if(t.length===0)throw this.qu("Document fields must not be empty");if(jxe(this.Mu)&&Unt.test(t))throw this.qu('Document fields cannot begin and end with "__"')}}class Vnt{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||O9(t)}$u(t,n,r,i=!1){return new dY({Mu:t,methodName:n,Ku:r,path:ml.emptyPath(),Nu:!1,Qu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function $9(e){const t=e._freezeSettings(),n=O9(e._databaseId);return new Vnt(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Uxe(e,t,n,r,i,s={}){const o=e.$u(s.merge||s.mergeFields?2:0,t,n,i);pY("Data must be an object, but it was:",o,r);const a=Hxe(r,o);let u,l;if(s.merge)u=new Wd(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const f of s.mergeFields){const d=JU(t,f,n);if(!o.contains(d))throw new mn(Tt.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);Wxe(c,d)||c.push(d)}u=new Wd(c),l=o.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,l=o.fieldTransforms;return new znt(new Gf(a),u,l)}class B9 extends F9{_toFieldTransform(t){if(t.Mu!==2)throw t.Mu===1?t.qu(`${this._methodName}() can only appear at the top level of your update data`):t.qu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof B9}}class hY extends F9{_toFieldTransform(t){return new Let(t.path,new s4)}isEqual(t){return t instanceof hY}}function zxe(e,t,n,r){const i=e.$u(1,t,n);pY("Data must be an object, but it was:",i,r);const s=[],o=Gf.empty();Gb(r,(u,l)=>{const c=mY(t,u,n);l=$s(l);const f=i.Lu(c);if(l instanceof B9)s.push(c);else{const d=kR(l,f);d!=null&&(s.push(c),o.set(c,d))}});const a=new Wd(s);return new Bxe(o,a,i.fieldTransforms)}function Vxe(e,t,n,r,i,s){const o=e.$u(1,t,n),a=[JU(t,r,n)],u=[i];if(s.length%2!=0)throw new mn(Tt.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(JU(t,s[d])),u.push(s[d+1]);const l=[],c=Gf.empty();for(let d=a.length-1;d>=0;--d)if(!Wxe(l,a[d])){const h=a[d];let p=u[d];p=$s(p);const m=o.Lu(h);if(p instanceof B9)l.push(h);else{const g=kR(p,m);g!=null&&(l.push(h),c.set(h,g))}}const f=new Wd(l);return new Bxe(c,f,o.fieldTransforms)}function Hnt(e,t,n,r=!1){return kR(n,e.$u(r?4:3,t))}function kR(e,t){if(qxe(e=$s(e)))return pY("Unsupported field value:",t,e),Hxe(e,t);if(e instanceof F9)return function(r,i){if(!jxe(i.Mu))throw i.qu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.qu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Nu&&t.Mu!==4)throw t.qu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=kR(a,i.ku(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(e,t)}return function(r,i){if((r=$s(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Det(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=hu.fromDate(r);return{timestampValue:vN(i.serializer,s)}}if(r instanceof hu){const s=new hu(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:vN(i.serializer,s)}}if(r instanceof cY)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof _S)return{bytesValue:sxe(i.serializer,r._byteString)};if(r instanceof nf){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.qu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:XG(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof fY)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.qu("VectorValues must only contain numeric values.");return WG(a.serializer,u)})}}}}}}(r,i);throw i.qu(`Unsupported field value: ${L9(r)}`)}(e,t)}function Hxe(e,t){const n={};return Obe(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Gb(e,(r,i)=>{const s=kR(i,t.Ou(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function qxe(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof hu||e instanceof cY||e instanceof _S||e instanceof nf||e instanceof F9||e instanceof fY)}function pY(e,t,n){if(!qxe(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=L9(n);throw r==="an object"?t.qu(e+" a custom object"):t.qu(e+" "+r)}}function JU(e,t,n){if((t=$s(t))instanceof AR)return t._internalPath;if(typeof t=="string")return mY(e,t);throw wN("Field path arguments must be of type string or ",e,!1,void 0,n)}const qnt=new RegExp("[~\\*/\\[\\]]");function mY(e,t,n){if(t.search(qnt)>=0)throw wN(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new AR(...t.split("."))._internalPath}catch{throw wN(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function wN(e,t,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new mn(Tt.INVALID_ARGUMENT,a+e+u)}function Wxe(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gxe{constructor(t,n,r,i,s){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new nf(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new Wnt(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(j9("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Wnt extends Gxe{data(){return super.data()}}function j9(e,t){return typeof t=="string"?mY(e,t):t instanceof AR?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gnt(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new mn(Tt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class gY{}class Yxe extends gY{}function u$(e,t,...n){let r=[];t instanceof gY&&r.push(t),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof yY).length,a=s.filter(u=>u instanceof U9).length;if(o>1||o>0&&a>0)throw new mn(Tt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)e=i._apply(e);return e}class U9 extends Yxe{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new U9(t,n,r)}_apply(t){const n=this._parse(t);return Kxe(t._query,n),new Fw(t.firestore,t.converter,zU(t._query,n))}_parse(t){const n=$9(t.firestore);return function(s,o,a,u,l,c,f){let d;if(l.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new mn(Tt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){pse(f,c);const h=[];for(const p of f)h.push(hse(u,s,p));d={arrayValue:{values:h}}}else d=hse(u,s,f)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||pse(f,c),d=Hnt(a,o,f,c==="in"||c==="not-in");return Va.create(l,c,d)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function fse(e,t,n){const r=t,i=j9("where",e);return U9._create(i,r,n)}class yY extends gY{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new yY(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:T0.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)Kxe(o,u),o=zU(o,u)}(t._query,n),new Fw(t.firestore,t.converter,zU(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class vY extends Yxe{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new vY(t,n)}_apply(t){const n=function(i,s,o){if(i.startAt!==null)throw new mn(Tt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new mn(Tt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new i4(s,o)}(t._query,this._field,this._direction);return new Fw(t.firestore,t.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new FT(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,n))}}function dse(e,t="asc"){const n=t,r=j9("orderBy",e);return vY._create(r,n)}function hse(e,t,n){if(typeof(n=$s(n))=="string"){if(n==="")throw new mn(Tt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Vbe(t)&&n.indexOf("/")!==-1)throw new mn(Tt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(Ks.fromString(n));if(!Vn.isDocumentKey(r))throw new mn(Tt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Nie(e,new Vn(r))}if(n instanceof nf)return Nie(e,n._key);throw new mn(Tt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${L9(n)}.`)}function pse(e,t){if(!Array.isArray(e)||e.length===0)throw new mn(Tt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Kxe(e,t){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(e.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new mn(Tt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new mn(Tt.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class Ynt{convertValue(t,n="none"){switch(db(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ma(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(fb(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw ar()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return Gb(t,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(t){var n,r,i;const s=(i=(r=(n=t.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>ma(o.doubleValue));return new fY(s)}convertGeoPoint(t){return new cY(ma(t.latitude),ma(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=k9(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(t4(t));default:return null}}convertTimestamp(t){const n=cb(t);return new hu(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=Ks.fromString(t);Qi(fxe(r));const i=new n4(r.get(1),r.get(3)),s=new Vn(r.popFirst(5));return i.isEqual(n)||h1(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xxe(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T3{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Qxe extends Gxe{constructor(t,n,r,i,s,o){super(t,n,r,i,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new PP(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(j9("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class PP extends Qxe{data(t={}){return super.data(t)}}class Knt{constructor(t,n,r,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new T3(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new PP(this._firestore,this._userDataWriter,r.key,r,new T3(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new mn(Tt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const u=new PP(i._firestore,i._userDataWriter,a.doc.key,a.doc,new T3(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const u=new PP(i._firestore,i._userDataWriter,a.doc.key,a.doc,new T3(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,c=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:Xnt(a.type),doc:u,oldIndex:l,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Xnt(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ar()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E6(e){e=og(e,nf);const t=og(e.firestore,$w);return Mnt(CR(t),e._key).then(n=>Qnt(t,e,n))}class Jxe extends Ynt{constructor(t){super(),this.firestore=t}convertBytes(t){return new _S(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new nf(this.firestore,null,n)}}function G2(e){e=og(e,Fw);const t=og(e.firestore,$w),n=CR(t),r=new Jxe(t);return Gnt(e._query),Lnt(n,e._query).then(i=>new Knt(t,r,e,i))}function Hl(e,t,n){e=og(e,nf);const r=og(e.firestore,$w),i=Xxe(e.converter,t,n);return bY(r,[Uxe($9(r),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,Zd.none())])}function mse(e,t,n,...r){e=og(e,nf);const i=og(e.firestore,$w),s=$9(i);let o;return o=typeof(t=$s(t))=="string"||t instanceof AR?Vxe(s,"updateDoc",e._key,t,n,r):zxe(s,"updateDoc",e._key,t),bY(i,[o.toMutation(e._key,Zd.exists(!0))])}function bY(e,t){return function(r,i){const s=new Ky;return r.asyncQueue.enqueueAndForget(async()=>_nt(await Dnt(r),i,s)),s.promise}(CR(e),t)}function Qnt(e,t,n){const r=n.docs.get(t._key),i=new Jxe(e);return new Qxe(e,i,t._key,r,new T3(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jnt{constructor(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=$9(t)}set(t,n,r){this._verifyNotCommitted();const i=l$(t,this._firestore),s=Xxe(i.converter,n,r),o=Uxe(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Zd.none())),this}update(t,n,r,...i){this._verifyNotCommitted();const s=l$(t,this._firestore);let o;return o=typeof(n=$s(n))=="string"||n instanceof AR?Vxe(this._dataReader,"WriteBatch.update",s._key,n,r,i):zxe(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,Zd.exists(!0))),this}delete(t){this._verifyNotCommitted();const n=l$(t,this._firestore);return this._mutations=this._mutations.concat(new GG(n._key,Zd.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new mn(Tt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function l$(e,t){if((e=$s(e)).firestore!==t)throw new mn(Tt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function S6(){return new hY("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gse(e){return CR(e=og(e,$w)),new Jnt(e,t=>bY(e,t))}(function(t,n=!0){(function(i){OT=i})(Ow),d1(new ig("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new $w(new WZe(r.getProvider("auth-internal")),new XZe(r.getProvider("app-check-internal")),function(l,c){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new mn(Tt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new n4(l.options.projectId,c)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),v0(Cie,"4.7.6",t),v0(Cie,"4.7.6","esm2017")})();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZU=new Map,Zxe={activated:!1,tokenObservers:[]},Znt={initialized:!1,enabled:!1};function mu(e){return ZU.get(e)||Object.assign({},Zxe)}function ert(e,t){return ZU.set(e,t),ZU.get(e)}function z9(){return Znt}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e_e="https://content-firebaseappcheck.googleapis.com/v1",trt="exchangeRecaptchaV3Token",nrt="exchangeDebugToken",yse={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},rrt=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class irt{constructor(t,n,r,i,s){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(t){this.stop();try{this.pending=new Qk,this.pending.promise.catch(n=>{}),await srt(this.getNextRun(t)),this.pending.resolve(),await this.pending.promise,this.pending=new Qk,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function srt(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ort={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Kf=new NT("appCheck","AppCheck",ort);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vse(e=!1){var t;return e?(t=self.grecaptcha)===null||t===void 0?void 0:t.enterprise:self.grecaptcha}function xY(e){if(!mu(e).activated)throw Kf.create("use-before-activation",{appName:e.name})}function t_e(e){const t=Math.round(e/1e3),n=Math.floor(t/(3600*24)),r=Math.floor((t-n*3600*24)/3600),i=Math.floor((t-n*3600*24-r*3600)/60),s=t-n*3600*24-r*3600-i*60;let o="";return n&&(o+=T6(n)+"d:"),r&&(o+=T6(r)+"h:"),o+=T6(i)+"m:"+T6(s)+"s",o}function T6(e){return e===0?"00":e>=10?e.toString():"0"+e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _Y({url:e,body:t},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const f=await i.getHeartbeatsHeader();f&&(r["X-Firebase-Client"]=f)}const s={method:"POST",body:JSON.stringify(t),headers:r};let o;try{o=await fetch(e,s)}catch(f){throw Kf.create("fetch-network-error",{originalErrorMessage:f==null?void 0:f.message})}if(o.status!==200)throw Kf.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(f){throw Kf.create("fetch-parse-error",{originalErrorMessage:f==null?void 0:f.message})}const u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw Kf.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const l=Number(u[1])*1e3,c=Date.now();return{token:a.token,expireTimeMillis:c+l,issuedAtTimeMillis:c}}function art(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${e_e}/projects/${n}/apps/${r}:${trt}?key=${i}`,body:{recaptcha_v3_token:t}}}function n_e(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${e_e}/projects/${n}/apps/${r}:${nrt}?key=${i}`,body:{debug_token:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const urt="firebase-app-check-database",lrt=1,u4="firebase-app-check-store",r_e="debug-token";let C6=null;function i_e(){return C6||(C6=new Promise((e,t)=>{try{const n=indexedDB.open(urt,lrt);n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{var i;t(Kf.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(u4,{keyPath:"compositeKey"})}}}catch(n){t(Kf.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),C6)}function crt(e){return o_e(a_e(e))}function frt(e,t){return s_e(a_e(e),t)}function drt(e){return s_e(r_e,e)}function hrt(){return o_e(r_e)}async function s_e(e,t){const r=(await i_e()).transaction(u4,"readwrite"),s=r.objectStore(u4).put({compositeKey:e,value:t});return new Promise((o,a)=>{s.onsuccess=u=>{o()},r.onerror=u=>{var l;a(Kf.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})}async function o_e(e){const n=(await i_e()).transaction(u4,"readonly"),i=n.objectStore(u4).get(e);return new Promise((s,o)=>{i.onsuccess=a=>{const u=a.target.result;s(u?u.value:void 0)},n.onerror=a=>{var u;o(Kf.create("storage-get",{originalErrorMessage:(u=a.target.error)===null||u===void 0?void 0:u.message}))}})}function a_e(e){return`${e.options.appId}-${e.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l4=new E9("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function prt(e){if(IG()){let t;try{t=await crt(e)}catch(n){l4.warn(`Failed to read token from IndexedDB. Error: ${n}`)}return t}}function c$(e,t){return IG()?frt(e,t).catch(n=>{l4.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}async function mrt(){let e;try{e=await hrt()}catch{}if(e)return e;{const t=crypto.randomUUID();return drt(t).catch(n=>l4.warn(`Failed to persist debug token to IndexedDB. Error: ${n}`)),t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wY(){return z9().enabled}async function EY(){const e=z9();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function grt(){const e=ibe(),t=z9();if(t.initialized=!0,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&e.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;t.enabled=!0;const n=new Qk;t.token=n,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?n.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(mrt())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yrt={error:"UNKNOWN_ERROR"};function vrt(e){return RG.encodeString(JSON.stringify(e),!1)}async function ez(e,t=!1){const n=e.app;xY(n);const r=mu(n);let i=r.token,s;if(i&&!CE(i)&&(r.token=void 0,i=void 0),!i){const u=await r.cachedTokenPromise;u&&(CE(u)?i=u:await c$(n,void 0))}if(!t&&i&&CE(i))return{token:i.token};let o=!1;if(wY()){r.exchangeTokenPromise||(r.exchangeTokenPromise=_Y(n_e(n,await EY()),e.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);const u=await r.exchangeTokenPromise;return await c$(n,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=await mu(n).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?l4.warn(u.message):l4.error(u),s=u}let a;return i?s?CE(i)?a={token:i.token,internalError:s}:a=xse(s):(a={token:i.token},r.token=i,await c$(n,i)):a=xse(s),o&&c_e(n,a),a}async function brt(e){const t=e.app;xY(t);const{provider:n}=mu(t);if(wY()){const r=await EY(),{token:i}=await _Y(n_e(t,r),e.heartbeatServiceProvider);return{token:i}}else{const{token:r}=await n.getToken();return{token:r}}}function u_e(e,t,n,r){const{app:i}=e,s=mu(i),o={next:n,error:r,type:t};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&CE(s.token)){const a=s.token;Promise.resolve().then(()=>{n({token:a.token}),bse(e)}).catch(()=>{})}s.cachedTokenPromise.then(()=>bse(e))}function l_e(e,t){const n=mu(e),r=n.tokenObservers.filter(i=>i.next!==t);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function bse(e){const{app:t}=e,n=mu(t);let r=n.tokenRefresher;r||(r=xrt(e),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function xrt(e){const{app:t}=e;return new irt(async()=>{const n=mu(t);let r;if(n.token?r=await ez(e,!0):r=await ez(e),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=mu(t);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},yse.RETRIAL_MIN_WAIT,yse.RETRIAL_MAX_WAIT)}function c_e(e,t){const n=mu(e).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&t.error!=null?r.error(t.error):r.next(t)}catch{}}function CE(e){return e.expireTimeMillis-Date.now()>0}function xse(e){return{token:vrt(yrt),error:e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _rt{constructor(t,n){this.app=t,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:t}=mu(this.app);for(const n of t)l_e(this.app,n.next);return Promise.resolve()}}function wrt(e,t){return new _rt(e,t)}function Ert(e){return{getToken:t=>ez(e,t),getLimitedUseToken:()=>brt(e),addTokenListener:t=>u_e(e,"INTERNAL",t),removeTokenListener:t=>l_e(e.app,t)}}const Srt="@firebase/app-check",Trt="0.8.11";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Crt="https://www.google.com/recaptcha/api.js";function Art(e,t){const n=new Qk,r=mu(e);r.reCAPTCHAState={initialized:n};const i=krt(e),s=vse(!1);return s?_se(e,t,s,i,n):Prt(()=>{const o=vse(!1);if(!o)throw new Error("no recaptcha");_se(e,t,o,i,n)}),n.promise}function _se(e,t,n,r,i){n.ready(()=>{Irt(e,t,n,r),i.resolve(n)})}function krt(e){const t=`fire_app_check_${e.name}`,n=document.createElement("div");return n.id=t,n.style.display="none",document.body.appendChild(n),t}async function Rrt(e){xY(e);const n=await mu(e).reCAPTCHAState.initialized.promise;return new Promise((r,i)=>{const s=mu(e).reCAPTCHAState;n.ready(()=>{r(n.execute(s.widgetId,{action:"fire_app_check"}))})})}function Irt(e,t,n,r){const i=n.render(r,{sitekey:t,size:"invisible",callback:()=>{mu(e).reCAPTCHAState.succeeded=!0},"error-callback":()=>{mu(e).reCAPTCHAState.succeeded=!1}}),s=mu(e);s.reCAPTCHAState=Object.assign(Object.assign({},s.reCAPTCHAState),{widgetId:i})}function Prt(e){const t=document.createElement("script");t.src=Crt,t.onload=e,document.head.appendChild(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SY{constructor(t){this._siteKey=t,this._throttleData=null}async getToken(){var t,n,r;Drt(this._throttleData);const i=await Rrt(this._app).catch(o=>{throw Kf.create("recaptcha-error")});if(!(!((t=mu(this._app).reCAPTCHAState)===null||t===void 0)&&t.succeeded))throw Kf.create("recaptcha-error");let s;try{s=await _Y(art(this._app,i),this._heartbeatServiceProvider)}catch(o){throw!((n=o.code)===null||n===void 0)&&n.includes("fetch-status-error")?(this._throttleData=Nrt(Number((r=o.customData)===null||r===void 0?void 0:r.httpStatus),this._throttleData),Kf.create("throttled",{time:t_e(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):o}return this._throttleData=null,s}initialize(t){this._app=t,this._heartbeatServiceProvider=DT(t,"heartbeat"),Art(t,this._siteKey).catch(()=>{})}isEqual(t){return t instanceof SY?this._siteKey===t._siteKey:!1}}function Nrt(e,t){if(e===404||e===403)return{backoffCount:1,allowRequestsAfter:Date.now()+rrt,httpStatus:e};{const n=t?t.backoffCount:0,r=yQe(n,1e3,2);return{backoffCount:n+1,allowRequestsAfter:Date.now()+r,httpStatus:e}}}function Drt(e){if(e&&Date.now()-e.allowRequestsAfter<=0)throw Kf.create("throttled",{time:t_e(e.allowRequestsAfter-Date.now()),httpStatus:e.httpStatus})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ort(e=NG(),t){e=$s(e);const n=DT(e,"app-check");if(z9().initialized||grt(),wY()&&EY().then(i=>console.log(`App Check debug token: ${i}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(s.isTokenAutoRefreshEnabled===t.isTokenAutoRefreshEnabled&&s.provider.isEqual(t.provider))return i;throw Kf.create("already-initialized",{appName:e.name})}const r=n.initialize({options:t});return Mrt(e,t.provider,t.isTokenAutoRefreshEnabled),mu(e).isTokenAutoRefreshEnabled&&u_e(r,"INTERNAL",()=>{}),r}function Mrt(e,t,n){const r=ert(e,Object.assign({},Zxe));r.activated=!0,r.provider=t,r.cachedTokenPromise=prt(e).then(i=>(i&&CE(i)&&(r.token=i,c_e(e,{token:i.token})),i)),r.isTokenAutoRefreshEnabled=n===void 0?e.automaticDataCollectionEnabled:n,r.provider.initialize(e)}const Lrt="app-check",wse="app-check-internal";function Frt(){d1(new ig(Lrt,e=>{const t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat");return wrt(t,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(wse).initialize()})),d1(new ig(wse,e=>{const t=e.getProvider("app-check").getImmediate();return Ert(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),v0(Srt,Trt)}Frt();function f_e(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const $rt=f_e,d_e=new NT("auth","Firebase",f_e());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EN=new E9("@firebase/auth");function Brt(e,...t){EN.logLevel<=ni.WARN&&EN.warn(`Auth (${Ow}): ${e}`,...t)}function NP(e,...t){EN.logLevel<=ni.ERROR&&EN.error(`Auth (${Ow}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ag(e,...t){throw CY(e,...t)}function b0(e,...t){return CY(e,...t)}function TY(e,t,n){const r=Object.assign(Object.assign({},$rt()),{[t]:n});return new NT("auth","Firebase",r).create(t,{appName:e.name})}function Jv(e){return TY(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function jrt(e,t,n){const r=n;if(!(t instanceof r))throw r.name!==t.constructor.name&&ag(e,"argument-error"),TY(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function CY(e,...t){if(typeof e!="string"){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return d_e.create(e,...t)}function hr(e,t,...n){if(!e)throw CY(t,...n)}function Fy(e){const t="INTERNAL ASSERTION FAILED: "+e;throw NP(t),new Error(t)}function m1(e,t){e||Fy(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tz(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function Urt(){return Ese()==="http:"||Ese()==="https:"}function Ese(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zrt(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Urt()||tQe()||"connection"in navigator)?navigator.onLine:!0}function Vrt(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(t,n){this.shortDelay=t,this.longDelay=n,m1(n>t,"Short delay should be less than long delay!"),this.isMobile=JXe()||nQe()}get(){return zrt()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AY(e,t){m1(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_e{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Fy("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Fy("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Fy("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hrt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qrt=new RR(3e4,6e4);function V9(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function BT(e,t,n,r,i={}){return p_e(e,i,async()=>{let s={},o={};r&&(t==="GET"?o=r:s={body:JSON.stringify(r)});const a=bR(Object.assign({key:e.config.apiKey},o)).slice(1),u=await e._getAdditionalHeaders();u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:u},s);return eQe()||(l.referrerPolicy="no-referrer"),h_e.fetch()(g_e(e,e.config.apiHost,n,a),l)})}async function p_e(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Hrt),t);try{const i=new Wrt(e),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw A6(e,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw A6(e,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw A6(e,"email-already-in-use",o);if(u==="USER_DISABLED")throw A6(e,"user-disabled",o);const c=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw TY(e,c,l);ag(e,c)}}catch(i){if(i instanceof _g)throw i;ag(e,"network-request-failed",{message:String(i)})}}async function m_e(e,t,n,r,i={}){const s=await BT(e,t,n,r,i);return"mfaPendingCredential"in s&&ag(e,"multi-factor-auth-required",{_serverResponse:s}),s}function g_e(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?AY(e.config,i):`${e.config.apiScheme}://${i}`}class Wrt{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(b0(this.auth,"network-request-failed")),qrt.get())})}}function A6(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=b0(e,t,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Grt(e,t){return BT(e,"POST","/v1/accounts:delete",t)}async function y_e(e,t){return BT(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wk(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function Yrt(e,t=!1){const n=$s(e),r=await n.getIdToken(t),i=kY(r);hr(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:wk(f$(i.auth_time)),issuedAtTime:wk(f$(i.iat)),expirationTime:wk(f$(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function f$(e){return Number(e)*1e3}function kY(e){const[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return NP("JWT malformed, contained fewer than 3 sections"),null;try{const i=rbe(n);return i?JSON.parse(i):(NP("Failed to decode base64 JWT payload"),null)}catch(i){return NP("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Sse(e){const t=kY(e);return hr(t,"internal-error"),hr(typeof t.exp<"u","internal-error"),hr(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c4(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof _g&&Krt(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}function Krt({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xrt{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nz{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=wk(this.lastLoginAt),this.creationTime=wk(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SN(e){var t;const n=e.auth,r=await e.getIdToken(),i=await c4(e,y_e(n,{idToken:r}));hr(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=!((t=s.providerUserInfo)===null||t===void 0)&&t.length?v_e(s.providerUserInfo):[],a=Jrt(e.providerData,o),u=e.isAnonymous,l=!(e.email&&s.passwordHash)&&!(a!=null&&a.length),c=u?l:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new nz(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(e,f)}async function Qrt(e){const t=$s(e);await SN(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function Jrt(e,t){return[...e.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function v_e(e){return e.map(t=>{var{providerId:n}=t,r=Z4(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zrt(e,t){const n=await p_e(e,{},async()=>{const r=bR({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:s}=e.config,o=g_e(e,i,"/v1/token",`key=${s}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",h_e.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function eit(e,t){return BT(e,"POST","/v2/accounts:revokeToken",V9(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){hr(t.idToken,"internal-error"),hr(typeof t.idToken<"u","internal-error"),hr(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):Sse(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){hr(t.length!==0,"internal-error");const n=Sse(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(hr(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await Zrt(t,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new VE;return r&&(hr(typeof r=="string","internal-error",{appName:t}),o.refreshToken=r),i&&(hr(typeof i=="string","internal-error",{appName:t}),o.accessToken=i),s&&(hr(typeof s=="number","internal-error",{appName:t}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new VE,this.toJSON())}_performRefresh(){return Fy("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hv(e,t){hr(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class $y{constructor(t){var{uid:n,auth:r,stsTokenManager:i}=t,s=Z4(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Xrt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new nz(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const n=await c4(this,this.stsTokenManager.getToken(this.auth,t));return hr(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return Yrt(this,t)}reload(){return Qrt(this)}_assign(t){this!==t&&(hr(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new $y(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){hr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&await SN(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Mm(this.auth.app))return Promise.reject(Jv(this.auth));const t=await this.getIdToken();return await c4(this,Grt(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,i,s,o,a,u,l,c;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(i=n.email)!==null&&i!==void 0?i:void 0,h=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,g=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,b=(l=n.createdAt)!==null&&l!==void 0?l:void 0,y=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:x,emailVerified:w,isAnonymous:T,providerData:A,stsTokenManager:k}=n;hr(x&&k,t,"internal-error");const I=VE.fromJSON(this.name,k);hr(typeof x=="string",t,"internal-error"),hv(f,t.name),hv(d,t.name),hr(typeof w=="boolean",t,"internal-error"),hr(typeof T=="boolean",t,"internal-error"),hv(h,t.name),hv(p,t.name),hv(m,t.name),hv(g,t.name),hv(b,t.name),hv(y,t.name);const O=new $y({uid:x,auth:t,email:d,emailVerified:w,displayName:f,isAnonymous:T,photoURL:p,phoneNumber:h,tenantId:m,stsTokenManager:I,createdAt:b,lastLoginAt:y});return A&&Array.isArray(A)&&(O.providerData=A.map(M=>Object.assign({},M))),g&&(O._redirectEventId=g),O}static async _fromIdTokenResponse(t,n,r=!1){const i=new VE;i.updateFromServerResponse(n);const s=new $y({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await SN(s),s}static async _fromGetAccountInfoResponse(t,n,r){const i=n.users[0];hr(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?v_e(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new VE;a.updateFromIdToken(r);const u=new $y({uid:i.localId,auth:t,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new nz(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,l),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tse=new Map;function By(e){m1(e instanceof Function,"Expected a class definition");let t=Tse.get(e);return t?(m1(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Tse.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b_e{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}b_e.type="NONE";const Cse=b_e;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DP(e,t,n){return`firebase:${e}:${t}:${n}`}class HE{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=DP(this.userKey,i.apiKey,s),this.fullPersistenceKey=DP("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?$y._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r="authUser"){if(!n.length)return new HE(By(Cse),t,r);const i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let s=i[0]||By(Cse);const o=DP(r,t.config.apiKey,t.name);let a=null;for(const l of n)try{const c=await l._get(o);if(c){const f=$y._fromJSON(t,c);l!==s&&(a=f),s=l;break}}catch{}const u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new HE(s,t,r):(s=u[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==s)try{await l._remove(o)}catch{}})),new HE(s,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ase(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(E_e(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(x_e(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(T_e(t))return"Blackberry";if(C_e(t))return"Webos";if(__e(t))return"Safari";if((t.includes("chrome/")||w_e(t))&&!t.includes("edge/"))return"Chrome";if(S_e(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function x_e(e=cc()){return/firefox\//i.test(e)}function __e(e=cc()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function w_e(e=cc()){return/crios\//i.test(e)}function E_e(e=cc()){return/iemobile/i.test(e)}function S_e(e=cc()){return/android/i.test(e)}function T_e(e=cc()){return/blackberry/i.test(e)}function C_e(e=cc()){return/webos/i.test(e)}function RY(e=cc()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function tit(e=cc()){var t;return RY(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function nit(){return rQe()&&document.documentMode===10}function A_e(e=cc()){return RY(e)||S_e(e)||C_e(e)||T_e(e)||/windows phone/i.test(e)||E_e(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k_e(e,t=[]){let n;switch(e){case"Browser":n=Ase(cc());break;case"Worker":n=`${Ase(cc())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ow}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rit{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=s=>new Promise((o,a)=>{try{const u=t(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const r of this.queue)await r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iit(e,t={}){return BT(e,"GET","/v2/passwordPolicy",V9(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sit=6;class oit{constructor(t){var n,r,i,s;const o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:sit,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=t.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,r,i,s,o,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,u),this.validatePasswordCharacterOptions(t,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(t,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ait{constructor(t,n,r,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new kse(this),this.idTokenSubscription=new kse(this),this.beforeStateQueue=new rit(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=d_e,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=By(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await HE.create(this,t),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await y_e(this,{idToken:t}),r=await $y._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(Mm(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(t);(!o||o===a)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return hr(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await SN(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=Vrt()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Mm(this.app))return Promise.reject(Jv(this));const n=t?$s(t):null;return n&&hr(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&hr(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Mm(this.app)?Promise.reject(Jv(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Mm(this.app)?Promise.reject(Jv(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(By(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await iit(this),n=new oit(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new NT("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await eit(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const r=await this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&By(t)||this._popupRedirectResolver;hr(n,this,"argument-error"),this.redirectPersistenceManager=await HE.create(this,[By(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(hr(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=t.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return hr(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=k_e(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var t;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&Brt(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function IR(e){return $s(e)}class kse{constructor(t){this.auth=t,this.observer=null,this.addObserver=cQe(n=>this.observer=n)}get next(){return hr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let IY={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function uit(e){IY=e}function lit(e){return IY.loadJS(e)}function cit(){return IY.gapiScript}function fit(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dit(e,t){const n=DT(e,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Jk(s,t??{}))return i;ag(i,"already-initialized")}return n.initialize({options:t})}function hit(e,t){const n=(t==null?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(By);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function pit(e,t,n){const r=IR(e);hr(r._canInitEmulator,r,"emulator-config-failed"),hr(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!1,s=R_e(t),{host:o,port:a}=mit(t),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),git()}function R_e(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function mit(e){const t=R_e(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Rse(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:Rse(o)}}}function Rse(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function git(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I_e{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return Fy("not implemented")}_getIdTokenResponse(t){return Fy("not implemented")}_linkToIdToken(t,n){return Fy("not implemented")}_getReauthenticationResolver(t){return Fy("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qE(e,t){return m_e(e,"POST","/v1/accounts:signInWithIdp",V9(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yit="http://localhost";class G_ extends I_e{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new G_(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):ag("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:i}=n,s=Z4(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new G_(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(t){const n=this.buildRequest();return qE(t,n)}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,qE(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,qE(t,n)}buildRequest(){const t={requestUri:yit,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=bR(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PY{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR extends PY{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nv extends PR{constructor(){super("facebook.com")}static credential(t){return G_._fromParams({providerId:Nv.PROVIDER_ID,signInMethod:Nv.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Nv.credentialFromTaggedObject(t)}static credentialFromError(t){return Nv.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Nv.credential(t.oauthAccessToken)}catch{return null}}}Nv.FACEBOOK_SIGN_IN_METHOD="facebook.com";Nv.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dy extends PR{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return G_._fromParams({providerId:Dy.PROVIDER_ID,signInMethod:Dy.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Dy.credentialFromTaggedObject(t)}static credentialFromError(t){return Dy.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Dy.credential(n,r)}catch{return null}}}Dy.GOOGLE_SIGN_IN_METHOD="google.com";Dy.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dv extends PR{constructor(){super("github.com")}static credential(t){return G_._fromParams({providerId:Dv.PROVIDER_ID,signInMethod:Dv.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Dv.credentialFromTaggedObject(t)}static credentialFromError(t){return Dv.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Dv.credential(t.oauthAccessToken)}catch{return null}}}Dv.GITHUB_SIGN_IN_METHOD="github.com";Dv.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ov extends PR{constructor(){super("twitter.com")}static credential(t,n){return G_._fromParams({providerId:Ov.PROVIDER_ID,signInMethod:Ov.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Ov.credentialFromTaggedObject(t)}static credentialFromError(t){return Ov.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Ov.credential(n,r)}catch{return null}}}Ov.TWITTER_SIGN_IN_METHOD="twitter.com";Ov.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vit(e,t){return m_e(e,"POST","/v1/accounts:signUp",V9(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pb{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,r,i=!1){const s=await $y._fromIdTokenResponse(t,r,i),o=Ise(r);return new pb({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);const i=Ise(r);return new pb({user:t,providerId:i,_tokenResponse:r,operationType:n})}}function Ise(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bit(e){var t;if(Mm(e.app))return Promise.reject(Jv(e));const n=IR(e);if(await n._initializationPromise,!((t=n.currentUser)===null||t===void 0)&&t.isAnonymous)return new pb({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await vit(n,{returnSecureToken:!0}),i=await pb._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN extends _g{constructor(t,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,TN.prototype),this.customData={appName:t.name,tenantId:(s=t.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new TN(t,n,r,i)}}function P_e(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?TN._fromErrorAndOperation(e,s,t,r):s})}async function xit(e,t,n=!1){const r=await c4(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return pb._forOperation(e,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _it(e,t,n=!1){const{auth:r}=e;if(Mm(r.app))return Promise.reject(Jv(r));const i="reauthenticate";try{const s=await c4(e,P_e(r,i,t,e),n);hr(s.idToken,r,"internal-error");const o=kY(s.idToken);hr(o,r,"internal-error");const{sub:a}=o;return hr(e.uid===a,r,"user-mismatch"),pb._forOperation(e,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&ag(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wit(e,t,n=!1){if(Mm(e.app))return Promise.reject(Jv(e));const r="signIn",i=await P_e(e,r,t),s=await pb._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}function Eit(e,t,n,r){return $s(e).onIdTokenChanged(t,n,r)}function Sit(e,t,n){return $s(e).beforeAuthStateChanged(t,n)}function Tit(e,t,n,r){return $s(e).onAuthStateChanged(t,n,r)}function Cit(e){return $s(e).signOut()}const CN="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N_e{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(CN,"1"),this.storage.removeItem(CN),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ait=1e3,kit=10;class D_e extends N_e{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=A_e(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&t(n,i,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=t.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);nit()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,kit):i()}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},Ait)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}D_e.type="LOCAL";const Rit=D_e;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O_e extends N_e{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}O_e.type="SESSION";const M_e=O_e;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iit(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H9{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(i=>i.isListeningto(t));if(n)return n;const r=new H9(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async l=>l(n.origin,s)),u=await Iit(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}H9.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NY(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pit{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{const l=NY("",20);i.port1.start();const c=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const d=f;if(d.data.eventId===l)switch(d.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(d.data.response);break;default:clearTimeout(c),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vm(){return window}function Nit(e){Vm().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L_e(){return typeof Vm().WorkerGlobalScope<"u"&&typeof Vm().importScripts=="function"}async function Dit(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Oit(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function Mit(){return L_e()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F_e="firebaseLocalStorageDb",Lit=1,AN="firebaseLocalStorage",$_e="fbase_key";class NR{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function q9(e,t){return e.transaction([AN],t?"readwrite":"readonly").objectStore(AN)}function Fit(){const e=indexedDB.deleteDatabase(F_e);return new NR(e).toPromise()}function rz(){const e=indexedDB.open(F_e,Lit);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const r=e.result;try{r.createObjectStore(AN,{keyPath:$_e})}catch(i){n(i)}}),e.addEventListener("success",async()=>{const r=e.result;r.objectStoreNames.contains(AN)?t(r):(r.close(),await Fit(),t(await rz()))})})}async function Pse(e,t,n){const r=q9(e,!0).put({[$_e]:t,value:n});return new NR(r).toPromise()}async function $it(e,t){const n=q9(e,!1).get(t),r=await new NR(n).toPromise();return r===void 0?null:r.value}function Nse(e,t){const n=q9(e,!0).delete(t);return new NR(n).toPromise()}const Bit=800,jit=3;class B_e{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await rz(),this.db)}async _withRetries(t){let n=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(n++>jit)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return L_e()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=H9._getInstance(Mit()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await Dit(),!this.activeServiceWorker)return;this.sender=new Pit(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||Oit()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await rz();return await Pse(t,CN,"1"),await Nse(t,CN),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Pse(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(r=>$it(r,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Nse(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const s=q9(i,!1).getAll();return new NR(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(t.length!==0)for(const{fbase_key:i,value:s}of t)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Bit)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}B_e.type="LOCAL";const Uit=B_e;new RR(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j_e(e,t){return t?By(t):(hr(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DY extends I_e{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return qE(t,this._buildIdpRequest())}_linkToIdToken(t,n){return qE(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return qE(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function zit(e){return wit(e.auth,new DY(e),e.bypassAuthState)}function Vit(e){const{auth:t,user:n}=e;return hr(n,t,"internal-error"),_it(n,new DY(e),e.bypassAuthState)}async function Hit(e){const{auth:t,user:n}=e;return hr(n,t,"internal-error"),xit(n,new DY(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U_e{constructor(t,n,r,i,s=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=t;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(l){this.reject(l)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return zit;case"linkViaPopup":case"linkViaRedirect":return Hit;case"reauthViaPopup":case"reauthViaRedirect":return Vit;default:ag(this.auth,"internal-error")}}resolve(t){m1(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){m1(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qit=new RR(2e3,1e4);async function Wit(e,t,n){if(Mm(e.app))return Promise.reject(b0(e,"operation-not-supported-in-this-environment"));const r=IR(e);jrt(e,t,PY);const i=j_e(r,n);return new E_(r,"signInViaPopup",t,i).executeNotNull()}class E_ extends U_e{constructor(t,n,r,i,s){super(t,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,E_.currentPopupAction&&E_.currentPopupAction.cancel(),E_.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return hr(t,this.auth,"internal-error"),t}async onExecution(){m1(this.filter.length===1,"Popup operations only handle one event");const t=NY();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(b0(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(b0(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,E_.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(b0(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,qit.get())};t()}}E_.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Git="pendingRedirect",OP=new Map;class Yit extends U_e{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let t=OP.get(this.auth._key());if(!t){try{const r=await Kit(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}OP.set(this.auth._key(),t)}return this.bypassAuthState||OP.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Kit(e,t){const n=Jit(t),r=Qit(e);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function Xit(e,t){OP.set(e._key(),t)}function Qit(e){return By(e._redirectPersistence)}function Jit(e){return DP(Git,e.config.apiKey,e.name)}async function Zit(e,t,n=!1){if(Mm(e.app))return Promise.reject(Jv(e));const r=IR(e),i=j_e(r,t),o=await new Yit(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const est=10*60*1e3;class tst{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!nst(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!z_e(t)){const i=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(b0(this.auth,i))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=est&&this.cachedEventUids.clear(),this.cachedEventUids.has(Dse(t))}saveEventToCache(t){this.cachedEventUids.add(Dse(t)),this.lastProcessedEventTime=Date.now()}}function Dse(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function z_e({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function nst(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return z_e(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rst(e,t={}){return BT(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ist=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,sst=/^https?/;async function ost(e){if(e.config.emulator)return;const{authorizedDomains:t}=await rst(e);for(const n of t)try{if(ast(n))return}catch{}ag(e,"unauthorized-domain")}function ast(e){const t=tz(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!sst.test(n))return!1;if(ist.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ust=new RR(3e4,6e4);function Ose(){const e=Vm().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function lst(e){return new Promise((t,n)=>{var r,i,s;function o(){Ose(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Ose(),n(b0(e,"network-request-failed"))},timeout:ust.get()})}if(!((i=(r=Vm().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((s=Vm().gapi)===null||s===void 0)&&s.load)o();else{const a=fit("iframefcb");return Vm()[a]=()=>{gapi.load?o():n(b0(e,"network-request-failed"))},lit(`${cit()}?onload=${a}`).catch(u=>n(u))}}).catch(t=>{throw MP=null,t})}let MP=null;function cst(e){return MP=MP||lst(e),MP}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fst=new RR(5e3,15e3),dst="__/auth/iframe",hst="emulator/auth/iframe",pst={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},mst=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function gst(e){const t=e.config;hr(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?AY(t,hst):`https://${e.config.authDomain}/${dst}`,r={apiKey:t.apiKey,appName:e.name,v:Ow},i=mst.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${bR(r).slice(1)}`}async function yst(e){const t=await cst(e),n=Vm().gapi;return hr(n,e,"internal-error"),t.open({where:document.body,url:gst(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:pst,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=b0(e,"network-request-failed"),a=Vm().setTimeout(()=>{s(o)},fst.get());function u(){Vm().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vst={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},bst=500,xst=600,_st="_blank",wst="http://localhost";class Mse{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Est(e,t,n,r=bst,i=xst){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},vst),{width:r.toString(),height:i.toString(),top:s,left:o}),l=cc().toLowerCase();n&&(a=w_e(l)?_st:n),x_e(l)&&(t=t||wst,u.scrollbars="yes");const c=Object.entries(u).reduce((d,[h,p])=>`${d}${h}=${p},`,"");if(tit(l)&&a!=="_self")return Sst(t||"",a),new Mse(null);const f=window.open(t||"",a,c);hr(f,e,"popup-blocked");try{f.focus()}catch{}return new Mse(f)}function Sst(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tst="__/auth/handler",Cst="emulator/auth/handler",Ast=encodeURIComponent("fac");async function Lse(e,t,n,r,i,s){hr(e.config.authDomain,e,"auth-domain-config-required"),hr(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Ow,eventId:i};if(t instanceof PY){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",lQe(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[c,f]of Object.entries({}))o[c]=f}if(t instanceof PR){const c=t.getScopes().filter(f=>f!=="");c.length>0&&(o.scopes=c.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const u=await e._getAppCheckToken(),l=u?`#${Ast}=${encodeURIComponent(u)}`:"";return`${kst(e)}?${bR(a).slice(1)}${l}`}function kst({config:e}){return e.emulator?AY(e,Cst):`https://${e.authDomain}/${Tst}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d$="webStorageSupport";class Rst{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=M_e,this._completeRedirectFn=Zit,this._overrideRedirectResult=Xit}async _openPopup(t,n,r,i){var s;m1((s=this.eventManagers[t._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await Lse(t,n,r,tz(),i);return Est(t,o,NY())}async _openRedirect(t,n,r,i){await this._originValidation(t);const s=await Lse(t,n,r,tz(),i);return Nit(s),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(m1(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(t){const n=await yst(t),r=new tst(t);return n.register("authEvent",i=>(hr(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(d$,{type:d$},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[d$];o!==void 0&&n(!!o),ag(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=ost(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return A_e()||__e()||RY()}}const V_e=Rst;var Fse="@firebase/auth",$se="1.8.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ist{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){hr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pst(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Nst(e){d1(new ig("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;hr(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:k_e(e)},l=new ait(r,i,s,u);return hit(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),d1(new ig("auth-internal",t=>{const n=IR(t.getProvider("auth").getImmediate());return(r=>new Ist(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),v0(Fse,$se,Pst(e)),v0(Fse,$se,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dst=5*60,Ost=abe("authIdTokenMaxAge")||Dst;let Bse=null;const Mst=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Ost)return;const i=n==null?void 0:n.token;Bse!==i&&(Bse=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function kN(e=NG()){const t=DT(e,"auth");if(t.isInitialized())return t.getImmediate();const n=dit(e,{popupRedirectResolver:V_e,persistence:[Uit,Rit,M_e]}),r=abe("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=Mst(s.toString());Sit(n,o,()=>o(n.currentUser)),Eit(n,a=>o(a))}}const i=sbe("auth");return i&&pit(n,`http://${i}`),n}function Lst(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}uit({loadJS(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=i=>{const s=b0("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",Lst().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Nst("Browser");function C3(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var h$={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/var jse;function Fst(){return jse||(jse=1,function(e,t){(function(n){e.exports=n()})(function(){return function n(r,i,s){function o(l,c){if(!i[l]){if(!r[l]){var f=typeof C3=="function"&&C3;if(!c&&f)return f(l,!0);if(a)return a(l,!0);var d=new Error("Cannot find module '"+l+"'");throw d.code="MODULE_NOT_FOUND",d}var h=i[l]={exports:{}};r[l][0].call(h.exports,function(p){var m=r[l][1][p];return o(m||p)},h,h.exports,n,r,i,s)}return i[l].exports}for(var a=typeof C3=="function"&&C3,u=0;u<s.length;u++)o(s[u]);return o}({1:[function(n,r,i){(function(s){var o=s.MutationObserver||s.WebKitMutationObserver,a;if(o){var u=0,l=new o(p),c=s.document.createTextNode("");l.observe(c,{characterData:!0}),a=function(){c.data=u=++u%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var f=new s.MessageChannel;f.port1.onmessage=p,a=function(){f.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?a=function(){var g=s.document.createElement("script");g.onreadystatechange=function(){p(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},s.document.documentElement.appendChild(g)}:a=function(){setTimeout(p,0)};var d,h=[];function p(){d=!0;for(var g,b,y=h.length;y;){for(b=h,h=[],g=-1;++g<y;)b[g]();y=h.length}d=!1}r.exports=m;function m(g){h.push(g)===1&&!d&&a()}}).call(this,typeof ya<"u"?ya:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,r,i){var s=n(1);function o(){}var a={},u=["REJECTED"],l=["FULFILLED"],c=["PENDING"];r.exports=f;function f(T){if(typeof T!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,T!==o&&m(this,T)}f.prototype.catch=function(T){return this.then(null,T)},f.prototype.then=function(T,A){if(typeof T!="function"&&this.state===l||typeof A!="function"&&this.state===u)return this;var k=new this.constructor(o);if(this.state!==c){var I=this.state===l?T:A;h(k,I,this.outcome)}else this.queue.push(new d(k,T,A));return k};function d(T,A,k){this.promise=T,typeof A=="function"&&(this.onFulfilled=A,this.callFulfilled=this.otherCallFulfilled),typeof k=="function"&&(this.onRejected=k,this.callRejected=this.otherCallRejected)}d.prototype.callFulfilled=function(T){a.resolve(this.promise,T)},d.prototype.otherCallFulfilled=function(T){h(this.promise,this.onFulfilled,T)},d.prototype.callRejected=function(T){a.reject(this.promise,T)},d.prototype.otherCallRejected=function(T){h(this.promise,this.onRejected,T)};function h(T,A,k){s(function(){var I;try{I=A(k)}catch(O){return a.reject(T,O)}I===T?a.reject(T,new TypeError("Cannot resolve promise with itself")):a.resolve(T,I)})}a.resolve=function(T,A){var k=g(p,A);if(k.status==="error")return a.reject(T,k.value);var I=k.value;if(I)m(T,I);else{T.state=l,T.outcome=A;for(var O=-1,M=T.queue.length;++O<M;)T.queue[O].callFulfilled(A)}return T},a.reject=function(T,A){T.state=u,T.outcome=A;for(var k=-1,I=T.queue.length;++k<I;)T.queue[k].callRejected(A);return T};function p(T){var A=T&&T.then;if(T&&(typeof T=="object"||typeof T=="function")&&typeof A=="function")return function(){A.apply(T,arguments)}}function m(T,A){var k=!1;function I(H){k||(k=!0,a.reject(T,H))}function O(H){k||(k=!0,a.resolve(T,H))}function M(){A(O,I)}var L=g(M);L.status==="error"&&I(L.value)}function g(T,A){var k={};try{k.value=T(A),k.status="success"}catch(I){k.status="error",k.value=I}return k}f.resolve=b;function b(T){return T instanceof this?T:a.resolve(new this(o),T)}f.reject=y;function y(T){var A=new this(o);return a.reject(A,T)}f.all=x;function x(T){var A=this;if(Object.prototype.toString.call(T)!=="[object Array]")return this.reject(new TypeError("must be an array"));var k=T.length,I=!1;if(!k)return this.resolve([]);for(var O=new Array(k),M=0,L=-1,H=new this(o);++L<k;)D(T[L],L);return H;function D(B,U){A.resolve(B).then(G,function(ee){I||(I=!0,a.reject(H,ee))});function G(ee){O[U]=ee,++M===k&&!I&&(I=!0,a.resolve(H,O))}}}f.race=w;function w(T){var A=this;if(Object.prototype.toString.call(T)!=="[object Array]")return this.reject(new TypeError("must be an array"));var k=T.length,I=!1;if(!k)return this.resolve([]);for(var O=-1,M=new this(o);++O<k;)L(T[O]);return M;function L(H){A.resolve(H).then(function(D){I||(I=!0,a.resolve(M,D))},function(D){I||(I=!0,a.reject(M,D))})}}},{1:1}],3:[function(n,r,i){(function(s){typeof s.Promise!="function"&&(s.Promise=n(2))}).call(this,typeof ya<"u"?ya:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,r,i){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ve){return typeof ve}:function(ve){return ve&&typeof Symbol=="function"&&ve.constructor===Symbol&&ve!==Symbol.prototype?"symbol":typeof ve};function o(ve,Ie){if(!(ve instanceof Ie))throw new TypeError("Cannot call a class as a function")}function a(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var u=a();function l(){try{if(!u||!u.open)return!1;var ve=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),Ie=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!ve||Ie)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function c(ve,Ie){ve=ve||[],Ie=Ie||{};try{return new Blob(ve,Ie)}catch(De){if(De.name!=="TypeError")throw De;for(var Se=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,Be=new Se,Ue=0;Ue<ve.length;Ue+=1)Be.append(ve[Ue]);return Be.getBlob(Ie.type)}}typeof Promise>"u"&&n(3);var f=Promise;function d(ve,Ie){Ie&&ve.then(function(Se){Ie(null,Se)},function(Se){Ie(Se)})}function h(ve,Ie,Se){typeof Ie=="function"&&ve.then(Ie),typeof Se=="function"&&ve.catch(Se)}function p(ve){return typeof ve!="string"&&(console.warn(ve+" used as a key, but it is not a string."),ve=String(ve)),ve}function m(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var g="local-forage-detect-blob-support",b=void 0,y={},x=Object.prototype.toString,w="readonly",T="readwrite";function A(ve){for(var Ie=ve.length,Se=new ArrayBuffer(Ie),Be=new Uint8Array(Se),Ue=0;Ue<Ie;Ue++)Be[Ue]=ve.charCodeAt(Ue);return Se}function k(ve){return new f(function(Ie){var Se=ve.transaction(g,T),Be=c([""]);Se.objectStore(g).put(Be,"key"),Se.onabort=function(Ue){Ue.preventDefault(),Ue.stopPropagation(),Ie(!1)},Se.oncomplete=function(){var Ue=navigator.userAgent.match(/Chrome\/(\d+)/),De=navigator.userAgent.match(/Edge\//);Ie(De||!Ue||parseInt(Ue[1],10)>=43)}}).catch(function(){return!1})}function I(ve){return typeof b=="boolean"?f.resolve(b):k(ve).then(function(Ie){return b=Ie,b})}function O(ve){var Ie=y[ve.name],Se={};Se.promise=new f(function(Be,Ue){Se.resolve=Be,Se.reject=Ue}),Ie.deferredOperations.push(Se),Ie.dbReady?Ie.dbReady=Ie.dbReady.then(function(){return Se.promise}):Ie.dbReady=Se.promise}function M(ve){var Ie=y[ve.name],Se=Ie.deferredOperations.pop();if(Se)return Se.resolve(),Se.promise}function L(ve,Ie){var Se=y[ve.name],Be=Se.deferredOperations.pop();if(Be)return Be.reject(Ie),Be.promise}function H(ve,Ie){return new f(function(Se,Be){if(y[ve.name]=y[ve.name]||te(),ve.db)if(Ie)O(ve),ve.db.close();else return Se(ve.db);var Ue=[ve.name];Ie&&Ue.push(ve.version);var De=u.open.apply(u,Ue);Ie&&(De.onupgradeneeded=function(ht){var At=De.result;try{At.createObjectStore(ve.storeName),ht.oldVersion<=1&&At.createObjectStore(g)}catch(Pt){if(Pt.name==="ConstraintError")console.warn('The database "'+ve.name+'" has been upgraded from version '+ht.oldVersion+" to version "+ht.newVersion+', but the storage "'+ve.storeName+'" already exists.');else throw Pt}}),De.onerror=function(ht){ht.preventDefault(),Be(De.error)},De.onsuccess=function(){var ht=De.result;ht.onversionchange=function(At){At.target.close()},Se(ht),M(ve)}})}function D(ve){return H(ve,!1)}function B(ve){return H(ve,!0)}function U(ve,Ie){if(!ve.db)return!0;var Se=!ve.db.objectStoreNames.contains(ve.storeName),Be=ve.version<ve.db.version,Ue=ve.version>ve.db.version;if(Be&&(ve.version!==Ie&&console.warn('The database "'+ve.name+`" can't be downgraded from version `+ve.db.version+" to version "+ve.version+"."),ve.version=ve.db.version),Ue||Se){if(Se){var De=ve.db.version+1;De>ve.version&&(ve.version=De)}return!0}return!1}function G(ve){return new f(function(Ie,Se){var Be=new FileReader;Be.onerror=Se,Be.onloadend=function(Ue){var De=btoa(Ue.target.result||"");Ie({__local_forage_encoded_blob:!0,data:De,type:ve.type})},Be.readAsBinaryString(ve)})}function ee(ve){var Ie=A(atob(ve.data));return c([Ie],{type:ve.type})}function ne(ve){return ve&&ve.__local_forage_encoded_blob}function ue(ve){var Ie=this,Se=Ie._initReady().then(function(){var Be=y[Ie._dbInfo.name];if(Be&&Be.dbReady)return Be.dbReady});return h(Se,ve,ve),Se}function X(ve){O(ve);for(var Ie=y[ve.name],Se=Ie.forages,Be=0;Be<Se.length;Be++){var Ue=Se[Be];Ue._dbInfo.db&&(Ue._dbInfo.db.close(),Ue._dbInfo.db=null)}return ve.db=null,D(ve).then(function(De){return ve.db=De,U(ve)?B(ve):De}).then(function(De){ve.db=Ie.db=De;for(var ht=0;ht<Se.length;ht++)Se[ht]._dbInfo.db=De}).catch(function(De){throw L(ve,De),De})}function q(ve,Ie,Se,Be){Be===void 0&&(Be=1);try{var Ue=ve.db.transaction(ve.storeName,Ie);Se(null,Ue)}catch(De){if(Be>0&&(!ve.db||De.name==="InvalidStateError"||De.name==="NotFoundError"))return f.resolve().then(function(){if(!ve.db||De.name==="NotFoundError"&&!ve.db.objectStoreNames.contains(ve.storeName)&&ve.version<=ve.db.version)return ve.db&&(ve.version=ve.db.version+1),B(ve)}).then(function(){return X(ve).then(function(){q(ve,Ie,Se,Be-1)})}).catch(Se);Se(De)}}function te(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function W(ve){var Ie=this,Se={db:null};if(ve)for(var Be in ve)Se[Be]=ve[Be];var Ue=y[Se.name];Ue||(Ue=te(),y[Se.name]=Ue),Ue.forages.push(Ie),Ie._initReady||(Ie._initReady=Ie.ready,Ie.ready=ue);var De=[];function ht(){return f.resolve()}for(var At=0;At<Ue.forages.length;At++){var Pt=Ue.forages[At];Pt!==Ie&&De.push(Pt._initReady().catch(ht))}var kt=Ue.forages.slice(0);return f.all(De).then(function(){return Se.db=Ue.db,D(Se)}).then(function(jt){return Se.db=jt,U(Se,Ie._defaultConfig.version)?B(Se):jt}).then(function(jt){Se.db=Ue.db=jt,Ie._dbInfo=Se;for(var Zt=0;Zt<kt.length;Zt++){var qn=kt[Zt];qn!==Ie&&(qn._dbInfo.db=Se.db,qn._dbInfo.version=Se.version)}})}function Z(ve,Ie){var Se=this;ve=p(ve);var Be=new f(function(Ue,De){Se.ready().then(function(){q(Se._dbInfo,w,function(ht,At){if(ht)return De(ht);try{var Pt=At.objectStore(Se._dbInfo.storeName),kt=Pt.get(ve);kt.onsuccess=function(){var jt=kt.result;jt===void 0&&(jt=null),ne(jt)&&(jt=ee(jt)),Ue(jt)},kt.onerror=function(){De(kt.error)}}catch(jt){De(jt)}})}).catch(De)});return d(Be,Ie),Be}function oe(ve,Ie){var Se=this,Be=new f(function(Ue,De){Se.ready().then(function(){q(Se._dbInfo,w,function(ht,At){if(ht)return De(ht);try{var Pt=At.objectStore(Se._dbInfo.storeName),kt=Pt.openCursor(),jt=1;kt.onsuccess=function(){var Zt=kt.result;if(Zt){var qn=Zt.value;ne(qn)&&(qn=ee(qn));var Sn=ve(qn,Zt.key,jt++);Sn!==void 0?Ue(Sn):Zt.continue()}else Ue()},kt.onerror=function(){De(kt.error)}}catch(Zt){De(Zt)}})}).catch(De)});return d(Be,Ie),Be}function pe(ve,Ie,Se){var Be=this;ve=p(ve);var Ue=new f(function(De,ht){var At;Be.ready().then(function(){return At=Be._dbInfo,x.call(Ie)==="[object Blob]"?I(At.db).then(function(Pt){return Pt?Ie:G(Ie)}):Ie}).then(function(Pt){q(Be._dbInfo,T,function(kt,jt){if(kt)return ht(kt);try{var Zt=jt.objectStore(Be._dbInfo.storeName);Pt===null&&(Pt=void 0);var qn=Zt.put(Pt,ve);jt.oncomplete=function(){Pt===void 0&&(Pt=null),De(Pt)},jt.onabort=jt.onerror=function(){var Sn=qn.error?qn.error:qn.transaction.error;ht(Sn)}}catch(Sn){ht(Sn)}})}).catch(ht)});return d(Ue,Se),Ue}function ce(ve,Ie){var Se=this;ve=p(ve);var Be=new f(function(Ue,De){Se.ready().then(function(){q(Se._dbInfo,T,function(ht,At){if(ht)return De(ht);try{var Pt=At.objectStore(Se._dbInfo.storeName),kt=Pt.delete(ve);At.oncomplete=function(){Ue()},At.onerror=function(){De(kt.error)},At.onabort=function(){var jt=kt.error?kt.error:kt.transaction.error;De(jt)}}catch(jt){De(jt)}})}).catch(De)});return d(Be,Ie),Be}function he(ve){var Ie=this,Se=new f(function(Be,Ue){Ie.ready().then(function(){q(Ie._dbInfo,T,function(De,ht){if(De)return Ue(De);try{var At=ht.objectStore(Ie._dbInfo.storeName),Pt=At.clear();ht.oncomplete=function(){Be()},ht.onabort=ht.onerror=function(){var kt=Pt.error?Pt.error:Pt.transaction.error;Ue(kt)}}catch(kt){Ue(kt)}})}).catch(Ue)});return d(Se,ve),Se}function Ee(ve){var Ie=this,Se=new f(function(Be,Ue){Ie.ready().then(function(){q(Ie._dbInfo,w,function(De,ht){if(De)return Ue(De);try{var At=ht.objectStore(Ie._dbInfo.storeName),Pt=At.count();Pt.onsuccess=function(){Be(Pt.result)},Pt.onerror=function(){Ue(Pt.error)}}catch(kt){Ue(kt)}})}).catch(Ue)});return d(Se,ve),Se}function Ae(ve,Ie){var Se=this,Be=new f(function(Ue,De){if(ve<0){Ue(null);return}Se.ready().then(function(){q(Se._dbInfo,w,function(ht,At){if(ht)return De(ht);try{var Pt=At.objectStore(Se._dbInfo.storeName),kt=!1,jt=Pt.openKeyCursor();jt.onsuccess=function(){var Zt=jt.result;if(!Zt){Ue(null);return}ve===0||kt?Ue(Zt.key):(kt=!0,Zt.advance(ve))},jt.onerror=function(){De(jt.error)}}catch(Zt){De(Zt)}})}).catch(De)});return d(Be,Ie),Be}function ge(ve){var Ie=this,Se=new f(function(Be,Ue){Ie.ready().then(function(){q(Ie._dbInfo,w,function(De,ht){if(De)return Ue(De);try{var At=ht.objectStore(Ie._dbInfo.storeName),Pt=At.openKeyCursor(),kt=[];Pt.onsuccess=function(){var jt=Pt.result;if(!jt){Be(kt);return}kt.push(jt.key),jt.continue()},Pt.onerror=function(){Ue(Pt.error)}}catch(jt){Ue(jt)}})}).catch(Ue)});return d(Se,ve),Se}function me(ve,Ie){Ie=m.apply(this,arguments);var Se=this.config();ve=typeof ve!="function"&&ve||{},ve.name||(ve.name=ve.name||Se.name,ve.storeName=ve.storeName||Se.storeName);var Be=this,Ue;if(!ve.name)Ue=f.reject("Invalid arguments");else{var De=ve.name===Se.name&&Be._dbInfo.db,ht=De?f.resolve(Be._dbInfo.db):D(ve).then(function(At){var Pt=y[ve.name],kt=Pt.forages;Pt.db=At;for(var jt=0;jt<kt.length;jt++)kt[jt]._dbInfo.db=At;return At});ve.storeName?Ue=ht.then(function(At){if(At.objectStoreNames.contains(ve.storeName)){var Pt=At.version+1;O(ve);var kt=y[ve.name],jt=kt.forages;At.close();for(var Zt=0;Zt<jt.length;Zt++){var qn=jt[Zt];qn._dbInfo.db=null,qn._dbInfo.version=Pt}var Sn=new f(function(lr,_n){var br=u.open(ve.name,Pt);br.onerror=function(ls){var Ao=br.result;Ao.close(),_n(ls)},br.onupgradeneeded=function(){var ls=br.result;ls.deleteObjectStore(ve.storeName)},br.onsuccess=function(){var ls=br.result;ls.close(),lr(ls)}});return Sn.then(function(lr){kt.db=lr;for(var _n=0;_n<jt.length;_n++){var br=jt[_n];br._dbInfo.db=lr,M(br._dbInfo)}}).catch(function(lr){throw(L(ve,lr)||f.resolve()).catch(function(){}),lr})}}):Ue=ht.then(function(At){O(ve);var Pt=y[ve.name],kt=Pt.forages;At.close();for(var jt=0;jt<kt.length;jt++){var Zt=kt[jt];Zt._dbInfo.db=null}var qn=new f(function(Sn,lr){var _n=u.deleteDatabase(ve.name);_n.onerror=function(){var br=_n.result;br&&br.close(),lr(_n.error)},_n.onblocked=function(){console.warn('dropInstance blocked for database "'+ve.name+'" until all open connections are closed')},_n.onsuccess=function(){var br=_n.result;br&&br.close(),Sn(br)}});return qn.then(function(Sn){Pt.db=Sn;for(var lr=0;lr<kt.length;lr++){var _n=kt[lr];M(_n._dbInfo)}}).catch(function(Sn){throw(L(ve,Sn)||f.resolve()).catch(function(){}),Sn})})}return d(Ue,Ie),Ue}var Oe={_driver:"asyncStorage",_initStorage:W,_support:l(),iterate:oe,getItem:Z,setItem:pe,removeItem:ce,clear:he,length:Ee,key:Ae,keys:ge,dropInstance:me};function Me(){return typeof openDatabase=="function"}var Ye="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lt="~~local_forage_type~",We=/^~~local_forage_type~([^~]+)~/,nt="__lfsc__:",yt=nt.length,_t="arbf",Rt="blob",Et="si08",Ke="ui08",Lt="uic8",sn="si16",Fe="si32",Qe="ur16",wt="ui32",Vt="fl32",Wt="fl64",bn=yt+_t.length,Nn=Object.prototype.toString;function Zn(ve){var Ie=ve.length*.75,Se=ve.length,Be,Ue=0,De,ht,At,Pt;ve[ve.length-1]==="="&&(Ie--,ve[ve.length-2]==="="&&Ie--);var kt=new ArrayBuffer(Ie),jt=new Uint8Array(kt);for(Be=0;Be<Se;Be+=4)De=Ye.indexOf(ve[Be]),ht=Ye.indexOf(ve[Be+1]),At=Ye.indexOf(ve[Be+2]),Pt=Ye.indexOf(ve[Be+3]),jt[Ue++]=De<<2|ht>>4,jt[Ue++]=(ht&15)<<4|At>>2,jt[Ue++]=(At&3)<<6|Pt&63;return kt}function wr(ve){var Ie=new Uint8Array(ve),Se="",Be;for(Be=0;Be<Ie.length;Be+=3)Se+=Ye[Ie[Be]>>2],Se+=Ye[(Ie[Be]&3)<<4|Ie[Be+1]>>4],Se+=Ye[(Ie[Be+1]&15)<<2|Ie[Be+2]>>6],Se+=Ye[Ie[Be+2]&63];return Ie.length%3===2?Se=Se.substring(0,Se.length-1)+"=":Ie.length%3===1&&(Se=Se.substring(0,Se.length-2)+"=="),Se}function Hn(ve,Ie){var Se="";if(ve&&(Se=Nn.call(ve)),ve&&(Se==="[object ArrayBuffer]"||ve.buffer&&Nn.call(ve.buffer)==="[object ArrayBuffer]")){var Be,Ue=nt;ve instanceof ArrayBuffer?(Be=ve,Ue+=_t):(Be=ve.buffer,Se==="[object Int8Array]"?Ue+=Et:Se==="[object Uint8Array]"?Ue+=Ke:Se==="[object Uint8ClampedArray]"?Ue+=Lt:Se==="[object Int16Array]"?Ue+=sn:Se==="[object Uint16Array]"?Ue+=Qe:Se==="[object Int32Array]"?Ue+=Fe:Se==="[object Uint32Array]"?Ue+=wt:Se==="[object Float32Array]"?Ue+=Vt:Se==="[object Float64Array]"?Ue+=Wt:Ie(new Error("Failed to get type for BinaryArray"))),Ie(Ue+wr(Be))}else if(Se==="[object Blob]"){var De=new FileReader;De.onload=function(){var ht=lt+ve.type+"~"+wr(this.result);Ie(nt+Rt+ht)},De.readAsArrayBuffer(ve)}else try{Ie(JSON.stringify(ve))}catch(ht){console.error("Couldn't convert value into a JSON string: ",ve),Ie(null,ht)}}function nr(ve){if(ve.substring(0,yt)!==nt)return JSON.parse(ve);var Ie=ve.substring(bn),Se=ve.substring(yt,bn),Be;if(Se===Rt&&We.test(Ie)){var Ue=Ie.match(We);Be=Ue[1],Ie=Ie.substring(Ue[0].length)}var De=Zn(Ie);switch(Se){case _t:return De;case Rt:return c([De],{type:Be});case Et:return new Int8Array(De);case Ke:return new Uint8Array(De);case Lt:return new Uint8ClampedArray(De);case sn:return new Int16Array(De);case Qe:return new Uint16Array(De);case Fe:return new Int32Array(De);case wt:return new Uint32Array(De);case Vt:return new Float32Array(De);case Wt:return new Float64Array(De);default:throw new Error("Unkown type: "+Se)}}var Ei={serialize:Hn,deserialize:nr,stringToBuffer:Zn,bufferToString:wr};function Dr(ve,Ie,Se,Be){ve.executeSql("CREATE TABLE IF NOT EXISTS "+Ie.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],Se,Be)}function Co(ve){var Ie=this,Se={db:null};if(ve)for(var Be in ve)Se[Be]=typeof ve[Be]!="string"?ve[Be].toString():ve[Be];var Ue=new f(function(De,ht){try{Se.db=openDatabase(Se.name,String(Se.version),Se.description,Se.size)}catch(At){return ht(At)}Se.db.transaction(function(At){Dr(At,Se,function(){Ie._dbInfo=Se,De()},function(Pt,kt){ht(kt)})},ht)});return Se.serializer=Ei,Ue}function Ji(ve,Ie,Se,Be,Ue,De){ve.executeSql(Se,Be,Ue,function(ht,At){At.code===At.SYNTAX_ERR?ht.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[Ie.storeName],function(Pt,kt){kt.rows.length?De(Pt,At):Dr(Pt,Ie,function(){Pt.executeSql(Se,Be,Ue,De)},De)},De):De(ht,At)},De)}function Di(ve,Ie){var Se=this;ve=p(ve);var Be=new f(function(Ue,De){Se.ready().then(function(){var ht=Se._dbInfo;ht.db.transaction(function(At){Ji(At,ht,"SELECT * FROM "+ht.storeName+" WHERE key = ? LIMIT 1",[ve],function(Pt,kt){var jt=kt.rows.length?kt.rows.item(0).value:null;jt&&(jt=ht.serializer.deserialize(jt)),Ue(jt)},function(Pt,kt){De(kt)})})}).catch(De)});return d(Be,Ie),Be}function Zi(ve,Ie){var Se=this,Be=new f(function(Ue,De){Se.ready().then(function(){var ht=Se._dbInfo;ht.db.transaction(function(At){Ji(At,ht,"SELECT * FROM "+ht.storeName,[],function(Pt,kt){for(var jt=kt.rows,Zt=jt.length,qn=0;qn<Zt;qn++){var Sn=jt.item(qn),lr=Sn.value;if(lr&&(lr=ht.serializer.deserialize(lr)),lr=ve(lr,Sn.key,qn+1),lr!==void 0){Ue(lr);return}}Ue()},function(Pt,kt){De(kt)})})}).catch(De)});return d(Be,Ie),Be}function ei(ve,Ie,Se,Be){var Ue=this;ve=p(ve);var De=new f(function(ht,At){Ue.ready().then(function(){Ie===void 0&&(Ie=null);var Pt=Ie,kt=Ue._dbInfo;kt.serializer.serialize(Ie,function(jt,Zt){Zt?At(Zt):kt.db.transaction(function(qn){Ji(qn,kt,"INSERT OR REPLACE INTO "+kt.storeName+" (key, value) VALUES (?, ?)",[ve,jt],function(){ht(Pt)},function(Sn,lr){At(lr)})},function(qn){if(qn.code===qn.QUOTA_ERR){if(Be>0){ht(ei.apply(Ue,[ve,Pt,Se,Be-1]));return}At(qn)}})})}).catch(At)});return d(De,Se),De}function po(ve,Ie,Se){return ei.apply(this,[ve,Ie,Se,1])}function Wu(ve,Ie){var Se=this;ve=p(ve);var Be=new f(function(Ue,De){Se.ready().then(function(){var ht=Se._dbInfo;ht.db.transaction(function(At){Ji(At,ht,"DELETE FROM "+ht.storeName+" WHERE key = ?",[ve],function(){Ue()},function(Pt,kt){De(kt)})})}).catch(De)});return d(Be,Ie),Be}function Ea(ve){var Ie=this,Se=new f(function(Be,Ue){Ie.ready().then(function(){var De=Ie._dbInfo;De.db.transaction(function(ht){Ji(ht,De,"DELETE FROM "+De.storeName,[],function(){Be()},function(At,Pt){Ue(Pt)})})}).catch(Ue)});return d(Se,ve),Se}function Sa(ve){var Ie=this,Se=new f(function(Be,Ue){Ie.ready().then(function(){var De=Ie._dbInfo;De.db.transaction(function(ht){Ji(ht,De,"SELECT COUNT(key) as c FROM "+De.storeName,[],function(At,Pt){var kt=Pt.rows.item(0).c;Be(kt)},function(At,Pt){Ue(Pt)})})}).catch(Ue)});return d(Se,ve),Se}function Kr(ve,Ie){var Se=this,Be=new f(function(Ue,De){Se.ready().then(function(){var ht=Se._dbInfo;ht.db.transaction(function(At){Ji(At,ht,"SELECT key FROM "+ht.storeName+" WHERE id = ? LIMIT 1",[ve+1],function(Pt,kt){var jt=kt.rows.length?kt.rows.item(0).key:null;Ue(jt)},function(Pt,kt){De(kt)})})}).catch(De)});return d(Be,Ie),Be}function Oi(ve){var Ie=this,Se=new f(function(Be,Ue){Ie.ready().then(function(){var De=Ie._dbInfo;De.db.transaction(function(ht){Ji(ht,De,"SELECT key FROM "+De.storeName,[],function(At,Pt){for(var kt=[],jt=0;jt<Pt.rows.length;jt++)kt.push(Pt.rows.item(jt).key);Be(kt)},function(At,Pt){Ue(Pt)})})}).catch(Ue)});return d(Se,ve),Se}function si(ve){return new f(function(Ie,Se){ve.transaction(function(Be){Be.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(Ue,De){for(var ht=[],At=0;At<De.rows.length;At++)ht.push(De.rows.item(At).name);Ie({db:ve,storeNames:ht})},function(Ue,De){Se(De)})},function(Be){Se(Be)})})}function Js(ve,Ie){Ie=m.apply(this,arguments);var Se=this.config();ve=typeof ve!="function"&&ve||{},ve.name||(ve.name=ve.name||Se.name,ve.storeName=ve.storeName||Se.storeName);var Be=this,Ue;return ve.name?Ue=new f(function(De){var ht;ve.name===Se.name?ht=Be._dbInfo.db:ht=openDatabase(ve.name,"","",0),ve.storeName?De({db:ht,storeNames:[ve.storeName]}):De(si(ht))}).then(function(De){return new f(function(ht,At){De.db.transaction(function(Pt){function kt(Sn){return new f(function(lr,_n){Pt.executeSql("DROP TABLE IF EXISTS "+Sn,[],function(){lr()},function(br,ls){_n(ls)})})}for(var jt=[],Zt=0,qn=De.storeNames.length;Zt<qn;Zt++)jt.push(kt(De.storeNames[Zt]));f.all(jt).then(function(){ht()}).catch(function(Sn){At(Sn)})},function(Pt){At(Pt)})})}):Ue=f.reject("Invalid arguments"),d(Ue,Ie),Ue}var Xr={_driver:"webSQLStorage",_initStorage:Co,_support:Me(),iterate:Zi,getItem:Di,setItem:po,removeItem:Wu,clear:Ea,length:Sa,key:Kr,keys:Oi,dropInstance:Js};function Hi(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function Zs(ve,Ie){var Se=ve.name+"/";return ve.storeName!==Ie.storeName&&(Se+=ve.storeName+"/"),Se}function mo(){var ve="_localforage_support_test";try{return localStorage.setItem(ve,!0),localStorage.removeItem(ve),!1}catch{return!0}}function Qo(){return!mo()||localStorage.length>0}function Ta(ve){var Ie=this,Se={};if(ve)for(var Be in ve)Se[Be]=ve[Be];return Se.keyPrefix=Zs(ve,Ie._defaultConfig),Qo()?(Ie._dbInfo=Se,Se.serializer=Ei,f.resolve()):f.reject()}function dd(ve){var Ie=this,Se=Ie.ready().then(function(){for(var Be=Ie._dbInfo.keyPrefix,Ue=localStorage.length-1;Ue>=0;Ue--){var De=localStorage.key(Ue);De.indexOf(Be)===0&&localStorage.removeItem(De)}});return d(Se,ve),Se}function Hr(ve,Ie){var Se=this;ve=p(ve);var Be=Se.ready().then(function(){var Ue=Se._dbInfo,De=localStorage.getItem(Ue.keyPrefix+ve);return De&&(De=Ue.serializer.deserialize(De)),De});return d(Be,Ie),Be}function Rl(ve,Ie){var Se=this,Be=Se.ready().then(function(){for(var Ue=Se._dbInfo,De=Ue.keyPrefix,ht=De.length,At=localStorage.length,Pt=1,kt=0;kt<At;kt++){var jt=localStorage.key(kt);if(jt.indexOf(De)===0){var Zt=localStorage.getItem(jt);if(Zt&&(Zt=Ue.serializer.deserialize(Zt)),Zt=ve(Zt,jt.substring(ht),Pt++),Zt!==void 0)return Zt}}});return d(Be,Ie),Be}function bs(ve,Ie){var Se=this,Be=Se.ready().then(function(){var Ue=Se._dbInfo,De;try{De=localStorage.key(ve)}catch{De=null}return De&&(De=De.substring(Ue.keyPrefix.length)),De});return d(Be,Ie),Be}function Ya(ve){var Ie=this,Se=Ie.ready().then(function(){for(var Be=Ie._dbInfo,Ue=localStorage.length,De=[],ht=0;ht<Ue;ht++){var At=localStorage.key(ht);At.indexOf(Be.keyPrefix)===0&&De.push(At.substring(Be.keyPrefix.length))}return De});return d(Se,ve),Se}function Jo(ve){var Ie=this,Se=Ie.keys().then(function(Be){return Be.length});return d(Se,ve),Se}function mh(ve,Ie){var Se=this;ve=p(ve);var Be=Se.ready().then(function(){var Ue=Se._dbInfo;localStorage.removeItem(Ue.keyPrefix+ve)});return d(Be,Ie),Be}function hd(ve,Ie,Se){var Be=this;ve=p(ve);var Ue=Be.ready().then(function(){Ie===void 0&&(Ie=null);var De=Ie;return new f(function(ht,At){var Pt=Be._dbInfo;Pt.serializer.serialize(Ie,function(kt,jt){if(jt)At(jt);else try{localStorage.setItem(Pt.keyPrefix+ve,kt),ht(De)}catch(Zt){(Zt.name==="QuotaExceededError"||Zt.name==="NS_ERROR_DOM_QUOTA_REACHED")&&At(Zt),At(Zt)}})})});return d(Ue,Se),Ue}function df(ve,Ie){if(Ie=m.apply(this,arguments),ve=typeof ve!="function"&&ve||{},!ve.name){var Se=this.config();ve.name=ve.name||Se.name,ve.storeName=ve.storeName||Se.storeName}var Be=this,Ue;return ve.name?Ue=new f(function(De){ve.storeName?De(Zs(ve,Be._defaultConfig)):De(ve.name+"/")}).then(function(De){for(var ht=localStorage.length-1;ht>=0;ht--){var At=localStorage.key(ht);At.indexOf(De)===0&&localStorage.removeItem(At)}}):Ue=f.reject("Invalid arguments"),d(Ue,Ie),Ue}var hf={_driver:"localStorageWrapper",_initStorage:Ta,_support:Hi(),iterate:Rl,getItem:Hr,setItem:hd,removeItem:mh,clear:dd,length:Jo,key:bs,keys:Ya,dropInstance:df},yc=function(Ie,Se){return Ie===Se||typeof Ie=="number"&&typeof Se=="number"&&isNaN(Ie)&&isNaN(Se)},vc=function(Ie,Se){for(var Be=Ie.length,Ue=0;Ue<Be;){if(yc(Ie[Ue],Se))return!0;Ue++}return!1},bc=Array.isArray||function(ve){return Object.prototype.toString.call(ve)==="[object Array]"},Er={},xc={},xs={INDEXEDDB:Oe,WEBSQL:Xr,LOCALSTORAGE:hf},Ka=[xs.INDEXEDDB._driver,xs.WEBSQL._driver,xs.LOCALSTORAGE._driver],As=["dropInstance"],Il=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(As),_c={description:"",driver:Ka.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Zo(ve,Ie){ve[Ie]=function(){var Se=arguments;return ve.ready().then(function(){return ve[Ie].apply(ve,Se)})}}function qi(){for(var ve=1;ve<arguments.length;ve++){var Ie=arguments[ve];if(Ie)for(var Se in Ie)Ie.hasOwnProperty(Se)&&(bc(Ie[Se])?arguments[0][Se]=Ie[Se].slice():arguments[0][Se]=Ie[Se])}return arguments[0]}var ti=function(){function ve(Ie){o(this,ve);for(var Se in xs)if(xs.hasOwnProperty(Se)){var Be=xs[Se],Ue=Be._driver;this[Se]=Ue,Er[Ue]||this.defineDriver(Be)}this._defaultConfig=qi({},_c),this._config=qi({},this._defaultConfig,Ie),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return ve.prototype.config=function(Se){if((typeof Se>"u"?"undefined":s(Se))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var Be in Se){if(Be==="storeName"&&(Se[Be]=Se[Be].replace(/\W/g,"_")),Be==="version"&&typeof Se[Be]!="number")return new Error("Database version must be a number.");this._config[Be]=Se[Be]}return"driver"in Se&&Se.driver?this.setDriver(this._config.driver):!0}else return typeof Se=="string"?this._config[Se]:this._config},ve.prototype.defineDriver=function(Se,Be,Ue){var De=new f(function(ht,At){try{var Pt=Se._driver,kt=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!Se._driver){At(kt);return}for(var jt=Il.concat("_initStorage"),Zt=0,qn=jt.length;Zt<qn;Zt++){var Sn=jt[Zt],lr=!vc(As,Sn);if((lr||Se[Sn])&&typeof Se[Sn]!="function"){At(kt);return}}var _n=function(){for(var Ao=function(eo){return function(){var Mi=new Error("Method "+eo+" is not implemented by the current driver"),ko=f.reject(Mi);return d(ko,arguments[arguments.length-1]),ko}},Pl=0,pd=As.length;Pl<pd;Pl++){var Gu=As[Pl];Se[Gu]||(Se[Gu]=Ao(Gu))}};_n();var br=function(Ao){Er[Pt]&&console.info("Redefining LocalForage driver: "+Pt),Er[Pt]=Se,xc[Pt]=Ao,ht()};"_support"in Se?Se._support&&typeof Se._support=="function"?Se._support().then(br,At):br(!!Se._support):br(!0)}catch(ls){At(ls)}});return h(De,Be,Ue),De},ve.prototype.driver=function(){return this._driver||null},ve.prototype.getDriver=function(Se,Be,Ue){var De=Er[Se]?f.resolve(Er[Se]):f.reject(new Error("Driver not found."));return h(De,Be,Ue),De},ve.prototype.getSerializer=function(Se){var Be=f.resolve(Ei);return h(Be,Se),Be},ve.prototype.ready=function(Se){var Be=this,Ue=Be._driverSet.then(function(){return Be._ready===null&&(Be._ready=Be._initDriver()),Be._ready});return h(Ue,Se,Se),Ue},ve.prototype.setDriver=function(Se,Be,Ue){var De=this;bc(Se)||(Se=[Se]);var ht=this._getSupportedDrivers(Se);function At(){De._config.driver=De.driver()}function Pt(Zt){return De._extend(Zt),At(),De._ready=De._initStorage(De._config),De._ready}function kt(Zt){return function(){var qn=0;function Sn(){for(;qn<Zt.length;){var lr=Zt[qn];return qn++,De._dbInfo=null,De._ready=null,De.getDriver(lr).then(Pt).catch(Sn)}At();var _n=new Error("No available storage method found.");return De._driverSet=f.reject(_n),De._driverSet}return Sn()}}var jt=this._driverSet!==null?this._driverSet.catch(function(){return f.resolve()}):f.resolve();return this._driverSet=jt.then(function(){var Zt=ht[0];return De._dbInfo=null,De._ready=null,De.getDriver(Zt).then(function(qn){De._driver=qn._driver,At(),De._wrapLibraryMethodsWithReady(),De._initDriver=kt(ht)})}).catch(function(){At();var Zt=new Error("No available storage method found.");return De._driverSet=f.reject(Zt),De._driverSet}),h(this._driverSet,Be,Ue),this._driverSet},ve.prototype.supports=function(Se){return!!xc[Se]},ve.prototype._extend=function(Se){qi(this,Se)},ve.prototype._getSupportedDrivers=function(Se){for(var Be=[],Ue=0,De=Se.length;Ue<De;Ue++){var ht=Se[Ue];this.supports(ht)&&Be.push(ht)}return Be},ve.prototype._wrapLibraryMethodsWithReady=function(){for(var Se=0,Be=Il.length;Se<Be;Se++)Zo(this,Il[Se])},ve.prototype.createInstance=function(Se){return new ve(Se)},ve}(),rr=new ti;r.exports=rr},{3:3}]},{},[4])(4)})}(h$)),h$.exports}var $st=Fst();const xE=hc($st),ul=[];for(let e=0;e<256;++e)ul.push((e+256).toString(16).slice(1));function Bst(e,t=0){return(ul[e[t+0]]+ul[e[t+1]]+ul[e[t+2]]+ul[e[t+3]]+"-"+ul[e[t+4]]+ul[e[t+5]]+"-"+ul[e[t+6]]+ul[e[t+7]]+"-"+ul[e[t+8]]+ul[e[t+9]]+"-"+ul[e[t+10]]+ul[e[t+11]]+ul[e[t+12]]+ul[e[t+13]]+ul[e[t+14]]+ul[e[t+15]]).toLowerCase()}let p$;const jst=new Uint8Array(16);function Ust(){if(!p$){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");p$=crypto.getRandomValues.bind(crypto)}return p$(jst)}const zst=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Use={randomUUID:zst};function RN(e,t,n){var i;if(Use.randomUUID&&!e)return Use.randomUUID();e=e||{};const r=e.random??((i=e.rng)==null?void 0:i.call(e))??Ust();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,Bst(r)}class H_e{constructor(t){jc(this,"engine");jc(this,"connected",!1);jc(this,"currentParticipantId",null);this.engine=t}isConnected(){return this.connected}getEngine(){return this.engine}}async function IN(e){const t=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(s=>s.toString(16).padStart(2,"0")).join("")}function ZC(e){return e.participantId!==void 0}class r0 extends H_e{constructor(){super("firebase");jc(this,"RECAPTCHAV3TOKEN","");jc(this,"firestore");jc(this,"collectionPrefix","prod-");jc(this,"studyCollection");jc(this,"storage");jc(this,"studyId","");jc(this,"localForage",xE.createInstance({name:"currentParticipantId"}));jc(this,"participantData",null);jc(this,"userManagementData",{});const n=VXe.parse(` 
{ 
  apiKey: "",
  authDomain: "",
  projectId: "",
  storageBucket: "",
  messagingSenderId: "",
  appId: ""
}
`),r=cbe(n);this.firestore=$nt(r,{}),this.storage=Sie();try{Ort(r,{provider:new SY(this.RECAPTCHAV3TOKEN),isTokenAutoRefreshEnabled:!1})}catch{console.warn("Failed to initialize Firebase App Check")}}async connect(){try{await jnt(this.firestore),this.connected=!0}catch{console.warn("Failed to connect to Firebase")}}async initializeStudyDb(n,r){try{const i=kN();if(!i.currentUser&&(await bit(i),!i.currentUser))throw new Error("Login failed with firebase");this.studyCollection=Ff(this.firestore,`${this.collectionPrefix}${n}`),this.studyId=n;const s=await this.getCurrentConfigHash(),o=await IN(JSON.stringify(r));if(await this._pushToFirebaseStorage(`configs/${o}`,"config",r),s&&s!==o){try{await this._deleteFromFirebaseStorage("","sequenceArray")}catch{}await this.clearCurrentParticipantId()}return await this._setCurrentConfigHash(o),Promise.resolve()}catch(i){return console.warn("Failed to connect to Firebase."),Promise.reject(i)}}async initializeParticipantSession(n,r,i,s,o){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(o),!this.currentParticipantId)throw new Error("Participant not initialized");const a=await this._getFromFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData"),u=await this.getModes(n);if(ZC(a))return this.participantData=a,a;const l=await IN(JSON.stringify(i)),{currentRow:c,creationIndex:f}=await this.getSequence();return this.participantData={participantId:this.currentParticipantId,participantConfigHash:l,sequence:c,participantIndex:f,answers:{},searchParams:r,metadata:s,completed:!1,rejected:!1,participantTags:[]},u.dataCollectionEnabled&&await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData),this.participantData}async getCurrentConfigHash(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=Gs(this.studyCollection,"configHash"),r=await E6(n);return r.exists()?r.data().configHash:null}async _setCurrentConfigHash(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const r=Gs(this.studyCollection,"configHash");await Hl(r,{configHash:n})}async getAllConfigsFromHash(n,r){const i=n.map(a=>{const u=Ld(this.storage,`${this.collectionPrefix}${r}/configs/${a}_config`);return this._getFromFirebaseStorageByRef(u,"config")}),s=await Promise.all(i),o={};return n.forEach((a,u)=>o[a]=s[u]),o}async getCurrentParticipantId(n){const r=await this.localForage.getItem("currentParticipantId");if(n)return this.currentParticipantId=n,await this.localForage.setItem("currentParticipantId",n),n;if(r)return this.currentParticipantId=r,r;if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");return this.currentParticipantId=RN(),await this.localForage.setItem("currentParticipantId",this.currentParticipantId),this.currentParticipantId}async clearCurrentParticipantId(){return await this.localForage.removeItem("currentParticipantId")}async saveAudio(n,r){let i=null;const s=async o=>{i||(i=setTimeout(async()=>{this._pushToFirebaseStorage(`/audio/${this.currentParticipantId}`,r,o.data)},500))};n.addEventListener("dataavailable",s),n.requestData()}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId||this.participantData===null)throw new Error("Participant not initialized");this.participantData={...this.participantData,answers:n},await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");await this._pushToFirebaseStorage("","sequenceArray",n)}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=await this._getFromFirebaseStorage("","sequenceArray");return Array.isArray(n)?n:null}async getSequence(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const n=await this.getSequenceArray();if(!n)throw new Error("Latin square not initialized");const r=await this.getModes(this.studyId),i=Gs(this.studyCollection,"sequenceAssignment");await Hl(i,{});const s=Ff(i,"sequenceAssignment"),o=Gs(s,this.currentParticipantId),a=u$(s,fse("rejected","==",!0),fse("claimed","==",!1)),u=await G2(a);if(u.docs.length>0){const b=u.docs[0],y=b.data().timestamp;r.dataCollectionEnabled&&(await Hl(b.ref,{claimed:!0}),await Hl(o,{participantId:this.currentParticipantId,timestamp:y,rejected:!1,claimed:!1,completed:null,createdTime:S6()}))}else r.dataCollectionEnabled&&await Hl(o,{participantId:this.currentParticipantId,timestamp:S6(),rejected:!1,claimed:!1,completed:null,createdTime:S6()});const l=u$(s,dse("timestamp","asc")),f=(await G2(l)).docs.map(b=>b.data()),d=f.filter(b=>!b.rejected).findIndex(b=>b.participantId===this.currentParticipantId)%n.length,h=d===-1?Math.floor(Math.random()*n.length-1):d,p=n[h];if(!p)throw new Error("Latin square is empty");const g=f.sort((b,y)=>b.createdTime-y.createdTime).findIndex(b=>b.participantId===this.currentParticipantId)+1;return{currentRow:p,creationIndex:g}}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=Ld(this.storage,`${this.collectionPrefix}${this.studyId}/participants`),r=await JC(n),i=[],s=r.items.map(async o=>{const a=await this._getFromFirebaseStorageByRef(o,"participantData");ZC(a)&&i.push(a)});return await Promise.all(s),i}async getAudio(n,r){const i=Sie(),s=await y6(Ld(i,`${this.collectionPrefix}${this.studyId}/audio/${r}_${n}`));return new Promise(a=>{const u=new XMLHttpRequest;u.responseType="blob",u.onload=()=>{const l=u.response,c=URL.createObjectURL(l);a(c)},u.open("GET",s),u.send()})}async getParticipantData(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(this.currentParticipantId===null&&!n)throw new Error("Participant not initialized");const r=await this._getFromFirebaseStorage(`participants/${n||this.currentParticipantId}`,"participantData");return ZC(r)?r:null}async getParticipantTags(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.participantTags}async addParticipantTags(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const r=await this.getParticipantData();if(!r)throw new Error("Participant not initialized");r.participantTags=[...new Set([...r.participantTags,...n])],await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",r)}async removeParticipantTags(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const r=await this.getParticipantData();if(!r)throw new Error("Participant not initialized");r.participantTags=r.participantTags.filter(i=>!n.includes(i)),await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",r)}async nextParticipant(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=RN();await this.localForage.setItem("currentParticipantId",n)}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");if(await this.getParticipantData(),!this.participantData)throw new Error("Participant not initialized");const n=await this.getModes(this.studyId);if(this.participantData.completed)return!0;this.participantData.completed=!0,n.dataCollectionEnabled&&await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData);const r=Gs(this.studyCollection,"sequenceAssignment"),i=Ff(r,"sequenceAssignment"),s=Gs(i,this.currentParticipantId);return await mse(s,{completed:S6()}),!0}async getUserManagementData(n){if(Object.keys(this.userManagementData).length===0){const r=Ff(this.firestore,"user-management"),i=await G2(r),s=Object.fromEntries(i.docs.map(o=>[o.id,o.data()]));this.userManagementData=s}return n in this.userManagementData?this.userManagementData[n]:null}async validateUser(n,r=!1){if(r&&(this.userManagementData={}),n!=null&&n.user){const i=await this.getUserManagementData("authentication");if(i!=null&&i.isEnabled){const s=await this.getUserManagementData("adminUsers");if(s&&s.adminUsersList){const o=Object.fromEntries(s.adminUsersList.map(u=>[u.email,u.uid]));if(n.user.email&&(o[n.user.email]===n.user.uid||o[n.user.email]===null)){if(n.user.email&&o[n.user.email]===null){const u=s.adminUsersList.find(l=>l.email===n.user.email);u&&(u.uid=n.user.uid),await Hl(Gs(this.firestore,"user-management","adminUsers"),{adminUsersList:s.adminUsersList})}return!0}return!1}}return!0}return!1}async changeAuth(n){await Hl(Gs(this.firestore,"user-management","authentication"),{isEnabled:n})}async addAdminUser(n){const r=await this.getUserManagementData("adminUsers");if(r!=null&&r.adminUsersList){const i=r.adminUsersList;i.find(o=>o.email===n.email)||(i.push({email:n.email,uid:n.uid}),await Hl(Gs(this.firestore,"user-management","adminUsers"),{adminUsersList:i}))}else await Hl(Gs(this.firestore,"user-management","adminUsers"),{adminUsersList:[{email:n.email,uid:n.uid}]})}async removeAdminUser(n){const r=await this.getUserManagementData("adminUsers");r!=null&&r.adminUsersList&&r.adminUsersList.length>1&&r.adminUsersList.find(i=>i.email===n)&&(r.adminUsersList=r==null?void 0:r.adminUsersList.filter(i=>i.email!==n),await Hl(Gs(this.firestore,"user-management","adminUsers"),{adminUsersList:r==null?void 0:r.adminUsersList}))}async getAllParticipantsDataByStudy(n){const r=Ld(this.storage,`${this.collectionPrefix}${n}/participants`),i=await JC(r),s=[],o=i.items.map(async a=>{const u=await this._getFromFirebaseStorageByRef(a,"participantData");ZC(u)&&s.push(u)});return await Promise.all(o),s}async rejectParticipant(n,r,i){const s=Ff(this.firestore,`${this.collectionPrefix}${n}`),o=Ld(this.storage,`${this.collectionPrefix}${n}/participants/${r}_participantData`),a=await this._getFromFirebaseStorageByRef(o,"participantData");try{if(!a||!ZC(a)||a.rejected)return;a.rejected={reason:i,timestamp:new Date().getTime()},await this._pushToFirebaseStorageByRef(o,"participantData",a);const u=Gs(s,"sequenceAssignment"),l=Ff(u,"sequenceAssignment"),c=Gs(l,r);await mse(c,{rejected:!0})}catch{console.warn("Failed to reject the participant.")}}async rejectCurrentParticipant(n,r){if(!this.currentParticipantId)throw new Error("Participant not initialized");return await this.rejectParticipant(n,this.currentParticipantId,r)}async setMode(n,r,i){const s=Gs(this.firestore,"metadata",`${this.collectionPrefix}${n}`);return await Hl(s,{[r]:i},{merge:!0})}async getModes(n){const r=Gs(this.firestore,"metadata",`${this.collectionPrefix}${n}`),i=await E6(r);if(i.exists())return i.data();const s={dataCollectionEnabled:!0,studyNavigatorEnabled:!0,analyticsInterfacePubliclyAccessible:!0};return await Hl(r,s),s}async getParticipantsStatusCounts(n){const r=Ff(this.firestore,`${this.collectionPrefix}${n}`),i=Gs(r,"sequenceAssignment"),s=Ff(i,"sequenceAssignment"),o=u$(s,dse("timestamp","asc")),u=(await G2(o)).docs.map(p=>p.data()),l=u.filter(p=>p.completed&&!p.rejected).length,c=u.filter(p=>p.rejected).length,f=u.length-l-c,d=u.length>0?u[0].timestamp:null,h=u.length>0?u.at(-1).timestamp:null;return{completed:l,rejected:c,inProgress:f,minTime:d,maxTime:h}}async createSnapshot(n,r){const i=`${this.collectionPrefix}${n}`;if(!await this._directoryExists(i))return console.warn(`Source directory ${i} does not exist.`),{status:"FAILED",error:{message:"There is currently no data in your study. A snapshot could not be created.",title:"Failed to Create Snapshot."}};const s=new Date,o=s.getUTCFullYear(),a=(s.getUTCMonth()+1).toString().padStart(2,"0"),u=s.getUTCDate().toString().padStart(2,"0"),l=s.getUTCHours().toString().padStart(2,"0"),c=s.getUTCMinutes().toString().padStart(2,"0"),f=s.getUTCSeconds().toString().padStart(2,"0"),d=`${o}-${a}-${u}T${l}:${c}:${f}`,h=`${this.collectionPrefix}${n}-snapshot-${d}`;await this._copyDirectory(`${i}/configs`,`${h}/configs`),await this._copyDirectory(`${i}/participants`,`${h}/participants`),await this._copyDirectory(i,h),await this._copyCollection(i,h),await this._addDirectoryNameToMetadata(h);const p=[];if(r){const m=await this.removeSnapshotOrLive(i,!1);m.status==="FAILED"?p.push({title:m.error.title,message:m.error.message,color:"red"}):p.push({title:"Success!",message:"Successfully deleted live data.",color:"green"})}return p.push({message:"Successfully created snapshot",title:"Success!",color:"green"}),{status:"SUCCESS",notifications:p}}async removeSnapshotOrLive(n,r){try{const i=n.startsWith(this.collectionPrefix)?n:`${this.collectionPrefix}${n}`;return await this._deleteDirectory(`${i}/configs`),await this._deleteDirectory(`${i}/participants`),await this._deleteDirectory(i),await this._deleteCollection(i),r&&await this._removeNameFromMetadata(i),{status:"SUCCESS",notifications:[{message:"Successfully deleted snapshot or live data.",title:"Success!",color:"green"}]}}catch{return{status:"FAILED",error:{title:"Failed to delete live data or snapshot",message:"There was an unspecified error when trying to remove a snapshot or live data."}}}}async getSnapshots(n){try{const r=Gs(this.firestore,"metadata","collections"),i=await E6(r);if(i.exists()){const s=i.data();return Object.keys(s).filter(u=>u.startsWith(`${this.collectionPrefix}${n}-snapshot`)).map(u=>{const l=s[u];let c;return typeof l=="boolean"?c=u:l&&typeof l=="object"&&l.enabled===!0?c=l.name:c=null,{originalName:u,alternateName:c}}).filter(u=>u.alternateName!==null).sort((u,l)=>u.originalName.localeCompare(l.originalName)).reverse()}return[]}catch(r){throw console.error("Error listing collections with prefix:",r),r}}async restoreSnapshot(n,r){const i=`${this.collectionPrefix}${n}`,s=[];try{const o=await this.createSnapshot(n,!0);return o.status==="FAILED"?(console.warn("No live data to capture."),s.push({title:o.error.title,message:o.error.message,color:"yellow"})):s.push({title:"Success!",message:"Successfully created snapshot of live data.",color:"green"}),await this._copyDirectory(`${r}/configs`,`${i}/configs`),await this._copyDirectory(`${r}/participants`,`${i}/participants`),await this._copyDirectory(r,i),await this._copyCollection(r,i),s.push({message:"Successfully restored snapshot to live data.",title:"Success!",color:"green"}),{status:"SUCCESS",notifications:s}}catch(o){return console.error("Error trying to delete a snapshot",o),{status:"FAILED",error:{title:"Failed to restore a snapshot fully.",message:"There was an unspecified error when trying to restore this snapshot."}}}}async _addDirectoryNameToMetadata(n){try{const r=Gs(this.firestore,"metadata","collections");await Hl(r,{[n]:{enabled:!0,name:n}},{merge:!0})}catch(r){throw console.error("Error adding collection to metadata:",r),r}}async renameSnapshot(n,r){try{const i=Gs(this.firestore,"metadata","collections");return await Hl(i,{[n]:{enabled:!0,name:r}},{merge:!0}),{status:"SUCCESS",notifications:[{message:"Successfully renamed snapshot.",title:"Success!",color:"green"}]}}catch(i){return console.error("Error renaming collection in metadata",i),{status:"FAILED",error:{title:"Failed to Rename Snapshot.",message:"There was an error when trying to rename the snapshot."}}}}async _removeNameFromMetadata(n){try{const r=Gs(this.firestore,"metadata","collections"),i=await E6(r);if(i.exists()){const s=i.data();s[n]?(delete s[n],await Hl(r,s)):console.warn(`${n} does not exist in metadata.`)}else console.warn("No metadata found.")}catch(r){throw console.error("Error removing collection from metadata:",r),r}}async _deleteDirectory(n){try{const r=Ld(this.storage,n),s=(await JC(r)).items.map(o=>Eie(o));await Promise.all(s)}catch(r){console.error("Error deleting files in directory:",r)}}async _copyDirectory(n,r){try{const i=Ld(this.storage,n),o=(await JC(i)).items.map(a=>{const u=a.fullPath,l=u.replace(n,r);return this._copyFile(u,l)});await Promise.all(o)}catch(i){console.error("Error copying file:",i)}}async _copyFile(n,r){try{const i=Ld(this.storage,n),s=Ld(this.storage,r),o=await y6(i),u=await(await fetch(o)).blob();await g6(s,u)}catch(i){console.error("Error copying file:",i)}}async _copyCollection(n,r){const i=Ff(this.firestore,n),s=Gs(i,"sequenceAssignment"),o=Ff(s,"sequenceAssignment"),a=Ff(this.firestore,r),u=Gs(a,"sequenceAssignment");await Hl(u,{});const l=Ff(u,"sequenceAssignment"),c=await G2(o),f=gse(this.firestore);c.docs.forEach(d=>{const h=Gs(l,d.id);f.set(h,d.data())}),await f.commit()}async _deleteCollection(n){const r=Ff(this.firestore,n),i=Gs(r,"sequenceAssignment"),s=Ff(i,"sequenceAssignment"),o=await G2(s),a=gse(this.firestore);o.forEach(u=>{const l=Gs(s,u.id);a.delete(l)}),a.delete(i),await a.commit()}async _directoryExists(n){try{const r=Ld(this.storage,n);return(await JC(r)).items.length>0}catch(r){if(r.code==="storage/object-not-found")return!1;throw console.error("Error checking if directory exists:",r),r}}_verifyStudyDatabase(n){return n!==void 0}async _getFromFirebaseStorage(n,r){const i=Ld(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);let s={};try{const o=await y6(i),u=await(await fetch(o)).text();s=JSON.parse(u)}catch{console.warn(`${n} does not have ${r} for ${this.collectionPrefix}${this.studyId}.`)}return s}async _getFromFirebaseStorageByRef(n,r){let i={};try{const s=await y6(n),a=await(await fetch(s)).text();i=JSON.parse(a)}catch{console.warn(`${n} with type ${r} not found.`)}return i}async _pushToFirebaseStorage(n,r,i){const s=Ld(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);if(i instanceof Blob)await g6(s,i);else if(Object.keys(i).length>0){const o=new Blob([JSON.stringify(i)],{type:"application/json"});await g6(s,o)}}async _pushToFirebaseStorageByRef(n,r,i){if(Object.keys(i).length>0){const s=new Blob([JSON.stringify(i)],{type:"application/json"});await g6(n,s)}}async _deleteFromFirebaseStorage(n,r){const i=Ld(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);await Eie(i)}}const q_e=z.createContext({user:{user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},logout:async()=>{},triggerAuth:()=>{},verifyAdminStatus:()=>Promise.resolve(!1)}),jT=()=>z.useContext(q_e);function Vst({children:e}){const t={user:null,determiningStatus:!0,isAdmin:!1,adminVerification:!1},n={user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},r={user:{name:"fakeName",email:"fakeEmail@fake.com",uid:"fakeUid"},determiningStatus:!1,isAdmin:!0,adminVerification:!0},[i,s]=z.useState(t),[o,a]=z.useState(!1),{storageEngine:u}=Yo(),l=async()=>{const h=kN();try{await Cit(h)}catch(p){console.error(`There was an issue signing-out the user: ${p.message}`)}finally{s(n)}},c=()=>{a(!0)},f=async h=>u?await u.validateUser(h,!0):!1;z.useEffect(()=>{s(t);let h;if(u instanceof r0)try{h=kN()}catch{console.warn("No firebase store.")}const p=async b=>{if(s(y=>({user:y.user,isAdmin:y.isAdmin,determiningStatus:!0,adminVerification:!1})),b){const y={user:b,determiningStatus:!1,isAdmin:!1,adminVerification:!0},x=await f(y);y.isAdmin=!!x,s(y)}else l()},g=(async()=>{if(u instanceof r0){const b=await(u==null?void 0:u.getUserManagementData("authentication"));if(b!=null&&b.isEnabled){const y=Tit(h,async x=>await p(x));return()=>y()}s(r)}else u&&s(r);return()=>{}})();return()=>{g.then(b=>b())}},[u,o]);const d=z.useMemo(()=>({user:i,triggerAuth:c,logout:l,verifyAdminStatus:f}),[i]);return R.jsx(q_e.Provider,{value:d,children:i.determiningStatus?R.jsx(ih,{visible:!0}):e})}const Hst="https://github.com/revisit-studies/study/tree/main/public/";function qst({configName:e,config:t,url:n}){const{storageEngine:r}=Yo(),[i,s]=z.useState(null);z.useEffect(()=>{r&&r.getParticipantsStatusCounts(e).then(f=>{s(f)})},[e,r]);const{minTime:o,maxTime:a}=z.useMemo(()=>{if(!i)return{minTime:null,maxTime:null};if(!i.minTime||!i.maxTime)return{minTime:null,maxTime:null};const f=typeof i.minTime=="number"?new Date(i.minTime):i.minTime.toDate(),d=typeof i.maxTime=="number"?new Date(i.maxTime):i.maxTime.toDate();return{minTime:f.toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"long",day:"numeric"}),maxTime:d.toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"long",day:"numeric"})}},[i]),[u,l]=z.useState(null);z.useEffect(()=>{r&&r.getModes(e).then(f=>{l(f)})},[e,r]);const c=z.useMemo(()=>u?u.dataCollectionEnabled?i&&(i.inProgress>0||i.completed>0)?"Collecting Data":"Ready to Collect Data":"Data Collection Disabled":"Unknown",[u,i]);return R.jsx(vT,{shadow:"sm",radius:"md",my:"sm",withBorder:!0,children:t.errors.length>0?R.jsxs(R.Fragment,{children:[R.jsx(Nt,{fw:"bold",children:e}),R.jsxs(An,{align:"center",direction:"row",children:[R.jsx(uk,{color:"red"}),R.jsx(Nt,{fw:"bold",ml:8,color:"red",children:"Errors"})]}),R.jsx(TP,{issues:t.errors,type:"error"}),t.warnings.length>0&&R.jsxs(R.Fragment,{children:[R.jsxs(An,{align:"center",direction:"row",children:[R.jsx(uk,{color:"orange"}),R.jsx(Nt,{fw:"bold",ml:8,color:"orange",children:"Warnings"})]}),R.jsx(TP,{issues:t.warnings,type:"warning"})]})]}):R.jsxs(R.Fragment,{children:[R.jsx(An,{direction:"row",justify:"space-between",children:R.jsx(Nt,{fw:"bold",children:t.studyMetadata.title})}),R.jsxs(Nt,{c:"dimmed",children:[R.jsx(Nt,{span:!0,fw:500,children:"Authors: "}),t.studyMetadata.authors.join(", ")]}),R.jsx(Nt,{c:"dimmed",children:t.studyMetadata.description}),R.jsx(Nt,{c:"dimmed",ta:"right",style:{paddingRight:5},children:R.jsxs(kw,{target:"_blank",onClick:f=>f.stopPropagation(),href:`${Hst}${n}`,children:["View source:"," ",n,R.jsx(T1e,{style:{width:ot(18),height:ot(18),marginLeft:ot(2),marginBottom:ot(-3)}})]})}),t.warnings.length>0&&R.jsxs(R.Fragment,{children:[R.jsxs(An,{align:"center",direction:"row",children:[R.jsx(uk,{color:"orange"}),R.jsx(Nt,{fw:"bold",ml:8,color:"orange",children:"Warnings"})]}),R.jsx(TP,{issues:t.warnings,type:"warning"})]}),R.jsx(jm,{my:"md"}),R.jsxs(An,{direction:"row",gap:"sm",children:[R.jsxs(Nt,{fw:"bold",size:"sm",opacity:.7,children:["Study Status:"," ",c]}),i&&R.jsx(MXe,{completed:i.completed,inProgress:i.inProgress,rejected:i.rejected})]}),o&&a&&R.jsxs(Nt,{c:"dimmed",mt:4,children:["Activity:"," ",o," ",""," ",a]}),R.jsxs(An,{direction:"row",align:"end",gap:"sm",mt:"md",children:[R.jsx(Bn,{leftSection:R.jsx(S1e,{}),style:{marginLeft:"auto"},variant:"default",component:"a",href:`${ju}analysis/stats/${n}`,children:"Analyze & Manage Study"}),R.jsx(Bn,{leftSection:R.jsx(C1e,{}),component:"a",href:`${ju}${n}`,children:"Go to Study"})]})]})},e)}function Y2({configNames:e,studyConfigs:t}){return e.map(n=>{const r=t[n];if(!r)return null;const i=P1e(n);return R.jsx(qst,{configName:n,config:r,url:i},n)})}function Wst({globalConfig:e,studyConfigs:t}){const{storageEngine:n}=Yo(),{configsList:r}=e,i=r.filter(b=>b.startsWith("demo-")),s=r.filter(b=>b.startsWith("tutorial-")),o=r.filter(b=>b.startsWith("example-")),a=r.filter(b=>b.startsWith("test-")),u=r.filter(b=>b.startsWith("library-")),l=z.useMemo(()=>r.filter(b=>!b.startsWith("demo-")&&!b.startsWith("tutorial-")&&!b.startsWith("example-")&&!b.startsWith("test-")&&!b.startsWith("library-")),[r]),[c,f]=z.useState({});z.useEffect(()=>{async function b(){const y={};await Promise.all(l.map(async x=>{if(n instanceof r0){const w=await n.getModes(x);y[x]=w.analyticsInterfacePubliclyAccessible}})),f(y)}b()},[l,n]);const{user:d}=jT(),h=z.useMemo(()=>l.filter(b=>c[b]||d.isAdmin),[l,c,d]),[p]=N1(),m=z.useMemo(()=>p.get("tab")||(h.length>0?"Others":"Demos"),[h.length,p]),g=M0();return R.jsx(hs.Main,{children:R.jsxs(l1,{size:"sm",px:0,children:[R.jsx(Hb,{maw:150,mx:"auto",mb:"xl",radius:"md",src:`${ju}revisitAssets/revisitLogoSquare.svg`,alt:"reVISit"}),R.jsxs(ci,{variant:"outline",defaultValue:l.length>0?"Others":"Demos",value:m,onChange:b=>g(`/?tab=${b}`),children:[R.jsxs(ci.List,{children:[h.length>0&&R.jsx(ci.Tab,{value:"Others",children:"Your Studies"}),R.jsx(ci.Tab,{value:"Demos",children:"Demo Studies"}),R.jsx(ci.Tab,{value:"Examples",children:"Example Studies"}),R.jsx(ci.Tab,{value:"Tutorials",children:"Tutorials"}),R.jsx(ci.Tab,{value:"Tests",children:"Tests"}),R.jsx(ci.Tab,{value:"Libraries",children:"Libraries"})]}),h.length>0&&R.jsx(ci.Panel,{value:"Others",children:R.jsx(Y2,{configNames:h,studyConfigs:t})}),R.jsxs(ci.Panel,{value:"Demos",children:[R.jsx(Nt,{c:"dimmed",mt:"sm",children:"These studies show off individual features of the reVISit platform."}),R.jsx(Y2,{configNames:i,studyConfigs:t})]}),R.jsxs(ci.Panel,{value:"Examples",children:[R.jsx(Nt,{c:"dimmed",mt:"sm",children:"These are full studies that demonstrate the capabilities of the reVISit platform."}),R.jsx(Y2,{configNames:o,studyConfigs:t})]}),R.jsxs(ci.Panel,{value:"Tutorials",children:[R.jsx(Nt,{c:"dimmed",mt:"sm",children:"These studies are designed to help you learn how to use the reVISit platform."}),R.jsx(Y2,{configNames:s,studyConfigs:t})]}),R.jsxs(ci.Panel,{value:"Tests",children:[R.jsx(Nt,{c:"dimmed",mt:"sm",children:"These studies exist for testing purposes."}),R.jsx(Y2,{configNames:a,studyConfigs:t})]}),R.jsxs(ci.Panel,{value:"Libraries",children:[R.jsx(Nt,{c:"dimmed",mt:"sm",children:"Here you can see an example of every library that we publish."}),R.jsx(Y2,{configNames:u,studyConfigs:t})]})]})]})})}var m$={exports:{}},g$={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zse;function Gst(){if(zse)return g$;zse=1;var e=C1();function t(u,l){return u===l&&(u!==0||1/u===1/l)||u!==u&&l!==l}var n=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,i=e.useRef,s=e.useEffect,o=e.useMemo,a=e.useDebugValue;return g$.useSyncExternalStoreWithSelector=function(u,l,c,f,d){var h=i(null);if(h.current===null){var p={hasValue:!1,value:null};h.current=p}else p=h.current;h=o(function(){function g(T){if(!b){if(b=!0,y=T,T=f(T),d!==void 0&&p.hasValue){var A=p.value;if(d(A,T))return x=A}return x=T}if(A=x,n(y,T))return A;var k=f(T);return d!==void 0&&d(A,k)?(y=T,A):(y=T,x=k)}var b=!1,y,x,w=c===void 0?null:c;return[function(){return g(l())},w===null?void 0:function(){return g(w())}]},[l,c,f,d]);var m=r(u,h[0],h[1]);return s(function(){p.hasValue=!0,p.value=m},[m]),a(m),m},g$}var Vse;function Yst(){return Vse||(Vse=1,m$.exports=Gst()),m$.exports}var Kst=Yst();function Xst(e){e()}function Qst(){let e=null,t=null;return{clear(){e=null,t=null},notify(){Xst(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var Hse={notify(){},get:()=>[]};function Jst(e,t){let n,r=Hse,i=0,s=!1;function o(m){c();const g=r.subscribe(m);let b=!1;return()=>{b||(b=!0,g(),f())}}function a(){r.notify()}function u(){p.onStateChange&&p.onStateChange()}function l(){return s}function c(){i++,n||(n=e.subscribe(u),r=Qst())}function f(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=Hse)}function d(){s||(s=!0,c())}function h(){s&&(s=!1,f())}const p={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:u,isSubscribed:l,trySubscribe:d,tryUnsubscribe:h,getListeners:()=>r};return p}var Zst=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",eot=Zst(),tot=()=>typeof navigator<"u"&&navigator.product==="ReactNative",not=tot(),rot=()=>eot||not?z.useLayoutEffect:z.useEffect,iot=rot(),y$=Symbol.for("react-redux-context"),v$=typeof globalThis<"u"?globalThis:{};function sot(){if(!z.createContext)return{};const e=v$[y$]??(v$[y$]=new Map);let t=e.get(z.createContext);return t||(t=z.createContext(null),e.set(z.createContext,t)),t}var mb=sot();function oot(e){const{children:t,context:n,serverState:r,store:i}=e,s=z.useMemo(()=>{const u=Jst(i);return{store:i,subscription:u,getServerState:r?()=>r:void 0}},[i,r]),o=z.useMemo(()=>i.getState(),[i]);iot(()=>{const{subscription:u}=s;return u.onStateChange=u.notifyNestedSubs,u.trySubscribe(),o!==i.getState()&&u.notifyNestedSubs(),()=>{u.tryUnsubscribe(),u.onStateChange=void 0}},[s,o]);const a=n||mb;return z.createElement(a.Provider,{value:s},t)}var aot=oot;function OY(e=mb){return function(){return z.useContext(e)}}var W_e=OY();function G_e(e=mb){const t=e===mb?W_e:OY(e),n=()=>{const{store:r}=t();return r};return Object.assign(n,{withTypes:()=>n}),n}var uot=G_e();function lot(e=mb){const t=e===mb?uot:G_e(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var Y_e=lot(),cot=(e,t)=>e===t;function fot(e=mb){const t=e===mb?W_e:OY(e),n=(r,i={})=>{const{equalityFn:s=cot}=typeof i=="function"?{equalityFn:i}:i,o=t(),{store:a,subscription:u,getServerState:l}=o;z.useRef(!0);const c=z.useCallback({[r.name](d){return r(d)}}[r.name],[r]),f=Kst.useSyncExternalStoreWithSelector(u.addNestedSub,a.getState,l||a.getState,c,s);return z.useDebugValue(f),f};return Object.assign(n,{withTypes:()=>n}),n}var dot=fot();function cl(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var hot=typeof Symbol=="function"&&Symbol.observable||"@@observable",qse=hot,b$=()=>Math.random().toString(36).substring(7).split("").join("."),pot={INIT:`@@redux/INIT${b$()}`,REPLACE:`@@redux/REPLACE${b$()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${b$()}`},PN=pot;function MY(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function K_e(e,t,n){if(typeof e!="function")throw new Error(cl(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(cl(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(cl(1));return n(K_e)(e,t)}let r=e,i=t,s=new Map,o=s,a=0,u=!1;function l(){o===s&&(o=new Map,s.forEach((g,b)=>{o.set(b,g)}))}function c(){if(u)throw new Error(cl(3));return i}function f(g){if(typeof g!="function")throw new Error(cl(4));if(u)throw new Error(cl(5));let b=!0;l();const y=a++;return o.set(y,g),function(){if(b){if(u)throw new Error(cl(6));b=!1,l(),o.delete(y),s=null}}}function d(g){if(!MY(g))throw new Error(cl(7));if(typeof g.type>"u")throw new Error(cl(8));if(typeof g.type!="string")throw new Error(cl(17));if(u)throw new Error(cl(9));try{u=!0,i=r(i,g)}finally{u=!1}return(s=o).forEach(y=>{y()}),g}function h(g){if(typeof g!="function")throw new Error(cl(10));r=g,d({type:PN.REPLACE})}function p(){const g=f;return{subscribe(b){if(typeof b!="object"||b===null)throw new Error(cl(11));function y(){const w=b;w.next&&w.next(c())}return y(),{unsubscribe:g(y)}},[qse](){return this}}}return d({type:PN.INIT}),{dispatch:d,subscribe:f,getState:c,replaceReducer:h,[qse]:p}}function mot(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:PN.INIT})>"u")throw new Error(cl(12));if(typeof n(void 0,{type:PN.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(cl(13))})}function got(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const o=t[s];typeof e[o]=="function"&&(n[o]=e[o])}const r=Object.keys(n);let i;try{mot(n)}catch(s){i=s}return function(o={},a){if(i)throw i;let u=!1;const l={};for(let c=0;c<r.length;c++){const f=r[c],d=n[f],h=o[f],p=d(h,a);if(typeof p>"u")throw a&&a.type,new Error(cl(14));l[f]=p,u=u||p!==h}return u=u||r.length!==Object.keys(o).length,u?l:o}}function NN(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function yot(...e){return t=>(n,r)=>{const i=t(n,r);let s=()=>{throw new Error(cl(15))};const o={getState:i.getState,dispatch:(u,...l)=>s(u,...l)},a=e.map(u=>u(o));return s=NN(...a)(i.dispatch),{...i,dispatch:s}}}function vot(e){return MY(e)&&"type"in e&&typeof e.type=="string"}var X_e=Symbol.for("immer-nothing"),Wse=Symbol.for("immer-draftable"),sh=Symbol.for("immer-state");function s0(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var wS=Object.getPrototypeOf;function Y_(e){return!!e&&!!e[sh]}function g1(e){var t;return e?Q_e(e)||Array.isArray(e)||!!e[Wse]||!!((t=e.constructor)!=null&&t[Wse])||G9(e)||Y9(e):!1}var bot=Object.prototype.constructor.toString();function Q_e(e){if(!e||typeof e!="object")return!1;const t=wS(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===bot}function DN(e,t){W9(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function W9(e){const t=e[sh];return t?t.type_:Array.isArray(e)?1:G9(e)?2:Y9(e)?3:0}function iz(e,t){return W9(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function J_e(e,t,n){const r=W9(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function xot(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function G9(e){return e instanceof Map}function Y9(e){return e instanceof Set}function i_(e){return e.copy_||e.base_}function sz(e,t){if(G9(e))return new Map(e);if(Y9(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=Q_e(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[sh];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const o=i[s],a=r[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[o]})}return Object.create(wS(e),r)}else{const r=wS(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function LY(e,t=!1){return K9(e)||Y_(e)||!g1(e)||(W9(e)>1&&(e.set=e.add=e.clear=e.delete=_ot),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>LY(r,!0))),e}function _ot(){s0(2)}function K9(e){return Object.isFrozen(e)}var wot={};function K_(e){const t=wot[e];return t||s0(0,e),t}var f4;function Z_e(){return f4}function Eot(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Gse(e,t){t&&(K_("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function oz(e){az(e),e.drafts_.forEach(Sot),e.drafts_=null}function az(e){e===f4&&(f4=e.parent_)}function Yse(e){return f4=Eot(f4,e)}function Sot(e){const t=e[sh];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Kse(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[sh].modified_&&(oz(t),s0(4)),g1(e)&&(e=ON(t,e),t.parent_||MN(t,e)),t.patches_&&K_("Patches").generateReplacementPatches_(n[sh].base_,e,t.patches_,t.inversePatches_)):e=ON(t,n,[]),oz(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==X_e?e:void 0}function ON(e,t,n){if(K9(t))return t;const r=t[sh];if(!r)return DN(t,(i,s)=>Xse(e,r,t,i,s,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return MN(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,o=!1;r.type_===3&&(s=new Set(i),i.clear(),o=!0),DN(s,(a,u)=>Xse(e,r,i,a,u,n,o)),MN(e,i,!1),n&&e.patches_&&K_("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function Xse(e,t,n,r,i,s,o){if(Y_(i)){const a=s&&t&&t.type_!==3&&!iz(t.assigned_,r)?s.concat(r):void 0,u=ON(e,i,a);if(J_e(n,r,u),Y_(u))e.canAutoFreeze_=!1;else return}else o&&n.add(i);if(g1(i)&&!K9(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;ON(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&MN(e,i)}}function MN(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&LY(t,n)}function Tot(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:Z_e(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=FY;n&&(i=[r],s=d4);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,a}var FY={get(e,t){if(t===sh)return e;const n=i_(e);if(!iz(n,t))return Cot(e,n,t);const r=n[t];return e.finalized_||!g1(r)?r:r===x$(e.base_,t)?(_$(e),e.copy_[t]=lz(r,e)):r},has(e,t){return t in i_(e)},ownKeys(e){return Reflect.ownKeys(i_(e))},set(e,t,n){const r=ewe(i_(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=x$(i_(e),t),s=i==null?void 0:i[sh];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(xot(n,i)&&(n!==void 0||iz(e.base_,t)))return!0;_$(e),uz(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return x$(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,_$(e),uz(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=i_(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){s0(11)},getPrototypeOf(e){return wS(e.base_)},setPrototypeOf(){s0(12)}},d4={};DN(FY,(e,t)=>{d4[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});d4.deleteProperty=function(e,t){return d4.set.call(this,e,t,void 0)};d4.set=function(e,t,n){return FY.set.call(this,e[0],t,n,e[0])};function x$(e,t){const n=e[sh];return(n?i_(n):e)[t]}function Cot(e,t,n){var i;const r=ewe(t,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function ewe(e,t){if(!(t in e))return;let n=wS(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=wS(n)}}function uz(e){e.modified_||(e.modified_=!0,e.parent_&&uz(e.parent_))}function _$(e){e.copy_||(e.copy_=sz(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Aot=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const s=n;n=t;const o=this;return function(u=s,...l){return o.produce(u,c=>n.call(this,c,...l))}}typeof n!="function"&&s0(6),r!==void 0&&typeof r!="function"&&s0(7);let i;if(g1(t)){const s=Yse(this),o=lz(t,void 0);let a=!0;try{i=n(o),a=!1}finally{a?oz(s):az(s)}return Gse(s,r),Kse(i,s)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===X_e&&(i=void 0),this.autoFreeze_&&LY(i,!0),r){const s=[],o=[];K_("Patches").generateReplacementPatches_(t,i,s,o),r(s,o)}return i}else s0(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(o,...a)=>this.produceWithPatches(o,u=>t(u,...a));let r,i;return[this.produce(t,n,(o,a)=>{r=o,i=a}),r,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){g1(e)||s0(8),Y_(e)&&(e=kot(e));const t=Yse(this),n=lz(e,void 0);return n[sh].isManual_=!0,az(t),n}finishDraft(e,t){const n=e&&e[sh];(!n||!n.isManual_)&&s0(9);const{scope_:r}=n;return Gse(r,t),Kse(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=K_("Patches").applyPatches_;return Y_(e)?r(e,t):this.produce(e,i=>r(i,t))}};function lz(e,t){const n=G9(e)?K_("MapSet").proxyMap_(e,t):Y9(e)?K_("MapSet").proxySet_(e,t):Tot(e,t);return(t?t.scope_:Z_e()).drafts_.push(n),n}function kot(e){return Y_(e)||s0(10,e),twe(e)}function twe(e){if(!g1(e)||K9(e))return e;const t=e[sh];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=sz(e,t.scope_.immer_.useStrictShallowCopy_)}else n=sz(e,!0);return DN(n,(r,i)=>{J_e(n,r,twe(i))}),t&&(t.finalized_=!1),n}var oh=new Aot,nwe=oh.produce;oh.produceWithPatches.bind(oh);oh.setAutoFreeze.bind(oh);oh.setUseStrictShallowCopy.bind(oh);oh.applyPatches.bind(oh);oh.createDraft.bind(oh);oh.finishDraft.bind(oh);function Rot(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function Iot(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function Pot(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var Qse=e=>Array.isArray(e)?e:[e];function Not(e){const t=Array.isArray(e[0])?e[0]:e;return Pot(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function Dot(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}var Oot=class{constructor(e){this.value=e}deref(){return this.value}},Mot=typeof WeakRef<"u"?WeakRef:Oot,Lot=0,Jse=1;function k6(){return{s:Lot,v:void 0,o:null,p:null}}function rwe(e,t={}){let n=k6();const{resultEqualityCheck:r}=t;let i,s=0;function o(){var f;let a=n;const{length:u}=arguments;for(let d=0,h=u;d<h;d++){const p=arguments[d];if(typeof p=="function"||typeof p=="object"&&p!==null){let m=a.o;m===null&&(a.o=m=new WeakMap);const g=m.get(p);g===void 0?(a=k6(),m.set(p,a)):a=g}else{let m=a.p;m===null&&(a.p=m=new Map);const g=m.get(p);g===void 0?(a=k6(),m.set(p,a)):a=g}}const l=a;let c;if(a.s===Jse)c=a.v;else if(c=e.apply(null,arguments),s++,r){const d=((f=i==null?void 0:i.deref)==null?void 0:f.call(i))??i;d!=null&&r(d,c)&&(c=d,s!==0&&s--),i=typeof c=="object"&&c!==null||typeof c=="function"?new Mot(c):c}return l.s=Jse,l.v=c,c}return o.clearCache=()=>{n=k6(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function Fot(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...i)=>{let s=0,o=0,a,u={},l=i.pop();typeof l=="object"&&(u=l,l=i.pop()),Rot(l,`createSelector expects an output function after the inputs, but received: [${typeof l}]`);const c={...n,...u},{memoize:f,memoizeOptions:d=[],argsMemoize:h=rwe,argsMemoizeOptions:p=[],devModeChecks:m={}}=c,g=Qse(d),b=Qse(p),y=Not(i),x=f(function(){return s++,l.apply(null,arguments)},...g),w=h(function(){o++;const A=Dot(y,arguments);return a=x.apply(null,A),a},...b);return Object.assign(w,{resultFunc:l,memoizedResultFunc:x,dependencies:y,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>a,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:f,argsMemoize:h})};return Object.assign(r,{withTypes:()=>r}),r}var iwe=Fot(rwe),$ot=Object.assign((e,t=iwe)=>{Iot(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(s=>e[s]);return t(r,(...s)=>s.reduce((o,a,u)=>(o[n[u]]=a,o),{}))},{withTypes:()=>$ot});function swe(e){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,e):i(s)}var Bot=swe(),jot=swe,Uot=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?NN:NN.apply(null,arguments)};function Zse(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(Xy(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>vot(r)&&r.type===e,n}var owe=class A3 extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,A3.prototype)}static get[Symbol.species](){return A3}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new A3(...t[0].concat(this)):new A3(...t.concat(this))}};function eoe(e){return g1(e)?nwe(e,()=>{}):e}function toe(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function zot(e){return typeof e=="boolean"}var Vot=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=t??{};let o=new owe;return n&&(zot(n)?o.push(Bot):o.push(jot(n.extraArgument))),o},Hot="RTK_autoBatch",noe=e=>t=>{setTimeout(t,e)},qot=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,s=!1,o=!1;const a=new Set,u=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:noe(10):e.type==="callback"?e.queueNotification:noe(e.timeout),l=()=>{o=!1,s&&(s=!1,a.forEach(c=>c()))};return Object.assign({},r,{subscribe(c){const f=()=>i&&c(),d=r.subscribe(f);return a.add(c),()=>{d(),a.delete(c)}},dispatch(c){var f;try{return i=!((f=c==null?void 0:c.meta)!=null&&f[Hot]),s=!i,s&&(o||(o=!0,u(l))),r.dispatch(c)}finally{i=!0}}})},Wot=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new owe(e);return r&&i.push(qot(typeof r=="object"?r:void 0)),i};function Got(e){const t=Vot(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:o=void 0}=e;let a;if(typeof n=="function")a=n;else if(MY(n))a=got(n);else throw new Error(Xy(1));let u;typeof r=="function"?u=r(t):u=t();let l=NN;i&&(l=Uot({trace:!1,...typeof i=="object"&&i}));const c=yot(...u),f=Wot(c);let d=typeof o=="function"?o(f):f();const h=l(...d);return K_e(a,s,h)}function awe(e){const t={},n=[];let r;const i={addCase(s,o){const a=typeof s=="string"?s:s.type;if(!a)throw new Error(Xy(28));if(a in t)throw new Error(Xy(29));return t[a]=o,i},addMatcher(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase(s){return r=s,i}};return e(i),[t,n,r]}function Yot(e){return typeof e=="function"}function Kot(e,t){let[n,r,i]=awe(t),s;if(Yot(e))s=()=>eoe(e());else{const a=eoe(e);s=()=>a}function o(a=s(),u){let l=[n[u.type],...r.filter(({matcher:c})=>c(u)).map(({reducer:c})=>c)];return l.filter(c=>!!c).length===0&&(l=[i]),l.reduce((c,f)=>{if(f)if(Y_(c)){const h=f(c,u);return h===void 0?c:h}else{if(g1(c))return nwe(c,d=>f(d,u));{const d=f(c,u);if(d===void 0){if(c===null)return c;throw Error("A case reducer on a non-draftable value must not return undefined")}return d}}return c},a)}return o.getInitialState=s,o}var Xot=Symbol.for("rtk-slice-createasyncthunk");function Qot(e,t){return`${e}/${t}`}function Jot({creators:e}={}){var n;const t=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[Xot];return function(i){const{name:s,reducerPath:o=s}=i;if(!s)throw new Error(Xy(11));const a=(typeof i.reducers=="function"?i.reducers(tat()):i.reducers)||{},u=Object.keys(a),l={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},c={addCase(x,w){const T=typeof x=="string"?x:x.type;if(!T)throw new Error(Xy(12));if(T in l.sliceCaseReducersByType)throw new Error(Xy(13));return l.sliceCaseReducersByType[T]=w,c},addMatcher(x,w){return l.sliceMatchers.push({matcher:x,reducer:w}),c},exposeAction(x,w){return l.actionCreators[x]=w,c},exposeCaseReducer(x,w){return l.sliceCaseReducersByName[x]=w,c}};u.forEach(x=>{const w=a[x],T={reducerName:x,type:Qot(s,x),createNotation:typeof i.reducers=="function"};rat(w)?sat(T,w,c,t):nat(T,w,c)});function f(){const[x={},w=[],T=void 0]=typeof i.extraReducers=="function"?awe(i.extraReducers):[i.extraReducers],A={...x,...l.sliceCaseReducersByType};return Kot(i.initialState,k=>{for(let I in A)k.addCase(I,A[I]);for(let I of l.sliceMatchers)k.addMatcher(I.matcher,I.reducer);for(let I of w)k.addMatcher(I.matcher,I.reducer);T&&k.addDefaultCase(T)})}const d=x=>x,h=new Map;let p;function m(x,w){return p||(p=f()),p(x,w)}function g(){return p||(p=f()),p.getInitialState()}function b(x,w=!1){function T(k){let I=k[x];return typeof I>"u"&&w&&(I=g()),I}function A(k=d){const I=toe(h,w,()=>new WeakMap);return toe(I,k,()=>{const O={};for(const[M,L]of Object.entries(i.selectors??{}))O[M]=Zot(L,k,g,w);return O})}return{reducerPath:x,getSelectors:A,get selectors(){return A(T)},selectSlice:T}}const y={name:s,reducer:m,actions:l.actionCreators,caseReducers:l.sliceCaseReducersByName,getInitialState:g,...b(o),injectInto(x,{reducerPath:w,...T}={}){const A=w??o;return x.inject({reducerPath:A,reducer:m},T),{...y,...b(A,!0)}}};return y}}function Zot(e,t,n,r){function i(s,...o){let a=t(s);return typeof a>"u"&&r&&(a=n()),e(a,...o)}return i.unwrapped=e,i}var eat=Jot();function tat(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function nat({type:e,reducerName:t,createNotation:n},r,i){let s,o;if("reducer"in r){if(n&&!iat(r))throw new Error(Xy(17));s=r.reducer,o=r.prepare}else s=r;i.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,o?Zse(e,o):Zse(e))}function rat(e){return e._reducerDefinitionType==="asyncThunk"}function iat(e){return e._reducerDefinitionType==="reducerWithPrepare"}function sat({type:e,reducerName:t},n,r,i){if(!i)throw new Error(Xy(18));const{payloadCreator:s,fulfilled:o,pending:a,rejected:u,settled:l,options:c}=n,f=i(e,s,c);r.exposeAction(t,f),o&&r.addCase(f.fulfilled,o),a&&r.addCase(f.pending,a),u&&r.addCase(f.rejected,u),l&&r.addMatcher(f.settled,l),r.exposeCaseReducer(t,{fulfilled:o||R6,pending:a||R6,rejected:u||R6,settled:l||R6})}function R6(){}function Xy(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}function C0(e){return e.components.flatMap(t=>typeof t=="string"?t:C0(t))}function uwe(e){var t;return[...e.components.flatMap(n=>typeof n=="string"?n:uwe(n)),...((t=e.interruptions)==null?void 0:t.flatMap(n=>n.components))||[]]}function lwe(e,t,n){let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string"){if(typeof t=="number"&&t===n+r)return[{currentBlock:e,firstIndex:n,lastIndex:n+C0(e).length-1}];if(typeof t=="string"&&e.orderPath===t)return[{currentBlock:e,firstIndex:n,lastIndex:n+C0(e).length-1}];r+=1}else{const o=lwe(s,t,n+r);if(typeof o=="number")r+=o;else{const a={currentBlock:e,firstIndex:n,lastIndex:o[0].lastIndex};return[...o,a]}}}return r}function $Y(e,t){const n=lwe(e,t,0);return typeof n=="number"?null:n}function cwe(e,t,n){if(e.id===t)return{found:!0,distance:n};let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string")r+=1;else{const o=cwe(s,t,n+r);if(o.found)return o;r+=o.distance}}return{found:!1,distance:r}}function oat(e,t){const n=cwe(e,t,0);return n.found?n.distance:-1}function fwe(e,t="root"){const n=[],r={};return e.components.forEach((i,s)=>{typeof i=="string"?(n.push({componentName:i,orderPath:t,timesSeenInBlock:r[i]||0}),r[i]=r[i]?r[i]+1:1):n.push(...fwe(i,`${t}-${s}`))}),n}function BY(e,t){return typeof e=="string"?e:{...e,orderPath:t,components:e.components.map((n,r)=>BY(n,`${t}-${r}`))}}async function aat(e,t,n,r,i,s,o){const a=C0(n),u=Object.fromEntries(a.filter(p=>p!=="end").map((p,m)=>[`${p}_${m}`,{answer:{},incorrectAnswers:{},startTime:0,endTime:-1,provenanceGraph:void 0,windowEvents:[],timedOut:!1,helpButtonClickedCount:0}])),l=Object.assign({},...a.map((p,m)=>({[`${p}_${m}`]:{aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}}}}))),c=Object.assign({},...a.map((p,m)=>({[`${p}_${m}`]:{aboveStimulus:!0,belowStimulus:!0,sidebar:!0,values:{}}}))),f={studyId:e,isRecording:!1,answers:Object.keys(i).length>0?i:u,sequence:n,config:t,showStudyBrowser:!0,showHelpText:!1,alertModal:{show:!1,message:""},trialValidation:i?c:l,reactiveAnswers:{},reactiveProvenance:null,otherTexts:{},metadata:r,analysisProvState:null,analysisIsPlaying:!1,analysisHasAudio:!1,analysisHasProvenance:!1,modes:s,matrixAnswers:{},participantId:o},d=eat({name:"storeSlice",initialState:f,reducers:{setConfig(p,m){p.config=m.payload},setIsRecording(p,m){p.isRecording=m.payload},toggleStudyBrowser:p=>{p.showStudyBrowser=!p.showStudyBrowser},toggleShowHelpText:p=>{p.showHelpText=!p.showHelpText},setAlertModal:(p,m)=>{p.alertModal=m.payload},setreactiveAnswers:(p,m)=>{p.reactiveAnswers=m.payload},setreactiveProvenance:(p,m)=>{p.reactiveProvenance=m.payload},setOtherText:(p,m)=>{p.otherTexts[m.payload.key]=m.payload.value},resetOtherText:p=>{p.otherTexts={}},saveAnalysisState(p,{payload:m}){p.analysisProvState=m},setAnalysisIsPlaying(p,{payload:m}){p.analysisIsPlaying=m},setAnalysisHasAudio(p,{payload:m}){p.analysisHasAudio=m},setAnalysisHasProvenance(p,{payload:m}){p.analysisHasProvenance=m},setMatrixAnswersRadio:(p,m)=>{if(m.payload){const{responseId:g,questionKey:b,val:y}=m.payload;p.matrixAnswers={...p.matrixAnswers,[g]:{...p.matrixAnswers[g],[b]:y}}}else p.matrixAnswers={}},setMatrixAnswersCheckbox:(p,m)=>{var g;if(m.payload){const{responseId:b,questionKey:y,value:x,isChecked:w,choiceOptions:T}=m.payload,A=((g=p.matrixAnswers[b])==null?void 0:g[y])??"";let k="";w?A.length>0?k=[...A.split("|"),x].sort((I,O)=>T.map(M=>M.value).indexOf(I)-T.map(M=>M.value).indexOf(O)).join("|"):k=`${x}`:k=A.split("|").filter(I=>I!==x).join("|"),p.matrixAnswers={...p.matrixAnswers,[b]:{...p.matrixAnswers[b],[y]:k}}}else p.matrixAnswers={}},updateResponseBlockValidation:(p,{payload:m})=>{if(p.trialValidation[m.identifier]||(p.trialValidation[m.identifier]={aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}},provenanceGraph:void 0}),Object.keys(m.values).length>0){const g=p.trialValidation[m.identifier][m.location].values;p.trialValidation[m.identifier][m.location]={valid:m.status,values:{...g,...m.values}}}m.provenanceGraph&&(p.trialValidation[m.identifier].provenanceGraph=m.provenanceGraph)},saveTrialAnswer(p,{payload:m}){const{identifier:g,answer:b,startTime:y,endTime:x,provenanceGraph:w,windowEvents:T,timedOut:A,incorrectAnswers:k,helpButtonClickedCount:I}=m;p.answers[g]={incorrectAnswers:k,answer:b,startTime:y,endTime:x,provenanceGraph:w,windowEvents:T,timedOut:A,helpButtonClickedCount:I}},incrementHelpCounter(p,{payload:m}){const{identifier:g}=m;p.answers[g].helpButtonClickedCount+=1},saveIncorrectAnswer(p,{payload:m}){const{identifier:g,answer:b,question:y}=m;p.answers[y].incorrectAnswers||(p.answers[y].incorrectAnswers={}),p.answers[y].incorrectAnswers[g]||(p.answers[y].incorrectAnswers[g]={id:g,value:[]}),p.answers[y].incorrectAnswers[g].value.push(b)}}});return{store:Got({reducer:d.reducer,preloadedState:f}),actions:d.actions}}const dwe=z.createContext(null);function Tl(){return z.useContext(dwe).actions}const gc=Y_e,Ai=dot;function uat(e){return Ai(t=>{if(e.includes("reviewer-"))return!0;const n=Object.values(t.trialValidation[e]).every(r=>typeof r=="object"&&"valid"in r?r.valid:!0);return n?Object.values(n).every(r=>r):!1})}const lat=iwe(e=>e.sequence,e=>C0(e));function jY(){return Ai(lat)}var LP={exports:{}},FP={exports:{}},cat=FP.exports,roe;function mi(){return roe||(roe=1,function(e,t){(function(n,r){e.exports=r()})(cat,function(){var n=n||function(r,i){var s;if(typeof window<"u"&&window.crypto&&(s=window.crypto),typeof self<"u"&&self.crypto&&(s=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(s=globalThis.crypto),!s&&typeof window<"u"&&window.msCrypto&&(s=window.msCrypto),!s&&typeof ya<"u"&&ya.crypto&&(s=ya.crypto),!s&&typeof C3=="function")try{s=tbe}catch{}var o=function(){if(s){if(typeof s.getRandomValues=="function")try{return s.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof s.randomBytes=="function")try{return s.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},a=Object.create||function(){function y(){}return function(x){var w;return y.prototype=x,w=new y,y.prototype=null,w}}(),u={},l=u.lib={},c=l.Base=function(){return{extend:function(y){var x=a(this);return y&&x.mixIn(y),(!x.hasOwnProperty("init")||this.init===x.init)&&(x.init=function(){x.$super.init.apply(this,arguments)}),x.init.prototype=x,x.$super=this,x},create:function(){var y=this.extend();return y.init.apply(y,arguments),y},init:function(){},mixIn:function(y){for(var x in y)y.hasOwnProperty(x)&&(this[x]=y[x]);y.hasOwnProperty("toString")&&(this.toString=y.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),f=l.WordArray=c.extend({init:function(y,x){y=this.words=y||[],x!=i?this.sigBytes=x:this.sigBytes=y.length*4},toString:function(y){return(y||h).stringify(this)},concat:function(y){var x=this.words,w=y.words,T=this.sigBytes,A=y.sigBytes;if(this.clamp(),T%4)for(var k=0;k<A;k++){var I=w[k>>>2]>>>24-k%4*8&255;x[T+k>>>2]|=I<<24-(T+k)%4*8}else for(var O=0;O<A;O+=4)x[T+O>>>2]=w[O>>>2];return this.sigBytes+=A,this},clamp:function(){var y=this.words,x=this.sigBytes;y[x>>>2]&=4294967295<<32-x%4*8,y.length=r.ceil(x/4)},clone:function(){var y=c.clone.call(this);return y.words=this.words.slice(0),y},random:function(y){for(var x=[],w=0;w<y;w+=4)x.push(o());return new f.init(x,y)}}),d=u.enc={},h=d.Hex={stringify:function(y){for(var x=y.words,w=y.sigBytes,T=[],A=0;A<w;A++){var k=x[A>>>2]>>>24-A%4*8&255;T.push((k>>>4).toString(16)),T.push((k&15).toString(16))}return T.join("")},parse:function(y){for(var x=y.length,w=[],T=0;T<x;T+=2)w[T>>>3]|=parseInt(y.substr(T,2),16)<<24-T%8*4;return new f.init(w,x/2)}},p=d.Latin1={stringify:function(y){for(var x=y.words,w=y.sigBytes,T=[],A=0;A<w;A++){var k=x[A>>>2]>>>24-A%4*8&255;T.push(String.fromCharCode(k))}return T.join("")},parse:function(y){for(var x=y.length,w=[],T=0;T<x;T++)w[T>>>2]|=(y.charCodeAt(T)&255)<<24-T%4*8;return new f.init(w,x)}},m=d.Utf8={stringify:function(y){try{return decodeURIComponent(escape(p.stringify(y)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(y){return p.parse(unescape(encodeURIComponent(y)))}},g=l.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new f.init,this._nDataBytes=0},_append:function(y){typeof y=="string"&&(y=m.parse(y)),this._data.concat(y),this._nDataBytes+=y.sigBytes},_process:function(y){var x,w=this._data,T=w.words,A=w.sigBytes,k=this.blockSize,I=k*4,O=A/I;y?O=r.ceil(O):O=r.max((O|0)-this._minBufferSize,0);var M=O*k,L=r.min(M*4,A);if(M){for(var H=0;H<M;H+=k)this._doProcessBlock(T,H);x=T.splice(0,M),w.sigBytes-=L}return new f.init(x,L)},clone:function(){var y=c.clone.call(this);return y._data=this._data.clone(),y},_minBufferSize:0});l.Hasher=g.extend({cfg:c.extend(),init:function(y){this.cfg=this.cfg.extend(y),this.reset()},reset:function(){g.reset.call(this),this._doReset()},update:function(y){return this._append(y),this._process(),this},finalize:function(y){y&&this._append(y);var x=this._doFinalize();return x},blockSize:16,_createHelper:function(y){return function(x,w){return new y.init(w).finalize(x)}},_createHmacHelper:function(y){return function(x,w){return new b.HMAC.init(y,w).finalize(x)}}});var b=u.algo={};return u}(Math);return n})}(FP)),FP.exports}var $P={exports:{}},fat=$P.exports,ioe;function X9(){return ioe||(ioe=1,function(e,t){(function(n,r){e.exports=r(mi())})(fat,function(n){return function(r){var i=n,s=i.lib,o=s.Base,a=s.WordArray,u=i.x64={};u.Word=o.extend({init:function(l,c){this.high=l,this.low=c}}),u.WordArray=o.extend({init:function(l,c){l=this.words=l||[],c!=r?this.sigBytes=c:this.sigBytes=l.length*8},toX32:function(){for(var l=this.words,c=l.length,f=[],d=0;d<c;d++){var h=l[d];f.push(h.high),f.push(h.low)}return a.create(f,this.sigBytes)},clone:function(){for(var l=o.clone.call(this),c=l.words=this.words.slice(0),f=c.length,d=0;d<f;d++)c[d]=c[d].clone();return l}})}(),n})}($P)),$P.exports}var BP={exports:{}},dat=BP.exports,soe;function hat(){return soe||(soe=1,function(e,t){(function(n,r){e.exports=r(mi())})(dat,function(n){return function(){if(typeof ArrayBuffer=="function"){var r=n,i=r.lib,s=i.WordArray,o=s.init,a=s.init=function(u){if(u instanceof ArrayBuffer&&(u=new Uint8Array(u)),(u instanceof Int8Array||typeof Uint8ClampedArray<"u"&&u instanceof Uint8ClampedArray||u instanceof Int16Array||u instanceof Uint16Array||u instanceof Int32Array||u instanceof Uint32Array||u instanceof Float32Array||u instanceof Float64Array)&&(u=new Uint8Array(u.buffer,u.byteOffset,u.byteLength)),u instanceof Uint8Array){for(var l=u.byteLength,c=[],f=0;f<l;f++)c[f>>>2]|=u[f]<<24-f%4*8;o.call(this,c,l)}else o.apply(this,arguments)};a.prototype=s}}(),n.lib.WordArray})}(BP)),BP.exports}var jP={exports:{}},pat=jP.exports,ooe;function mat(){return ooe||(ooe=1,function(e,t){(function(n,r){e.exports=r(mi())})(pat,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=r.enc;o.Utf16=o.Utf16BE={stringify:function(u){for(var l=u.words,c=u.sigBytes,f=[],d=0;d<c;d+=2){var h=l[d>>>2]>>>16-d%4*8&65535;f.push(String.fromCharCode(h))}return f.join("")},parse:function(u){for(var l=u.length,c=[],f=0;f<l;f++)c[f>>>1]|=u.charCodeAt(f)<<16-f%2*16;return s.create(c,l*2)}},o.Utf16LE={stringify:function(u){for(var l=u.words,c=u.sigBytes,f=[],d=0;d<c;d+=2){var h=a(l[d>>>2]>>>16-d%4*8&65535);f.push(String.fromCharCode(h))}return f.join("")},parse:function(u){for(var l=u.length,c=[],f=0;f<l;f++)c[f>>>1]|=a(u.charCodeAt(f)<<16-f%2*16);return s.create(c,l*2)}};function a(u){return u<<8&4278255360|u>>>8&16711935}}(),n.enc.Utf16})}(jP)),jP.exports}var UP={exports:{}},gat=UP.exports,aoe;function Bw(){return aoe||(aoe=1,function(e,t){(function(n,r){e.exports=r(mi())})(gat,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=r.enc;o.Base64={stringify:function(u){var l=u.words,c=u.sigBytes,f=this._map;u.clamp();for(var d=[],h=0;h<c;h+=3)for(var p=l[h>>>2]>>>24-h%4*8&255,m=l[h+1>>>2]>>>24-(h+1)%4*8&255,g=l[h+2>>>2]>>>24-(h+2)%4*8&255,b=p<<16|m<<8|g,y=0;y<4&&h+y*.75<c;y++)d.push(f.charAt(b>>>6*(3-y)&63));var x=f.charAt(64);if(x)for(;d.length%4;)d.push(x);return d.join("")},parse:function(u){var l=u.length,c=this._map,f=this._reverseMap;if(!f){f=this._reverseMap=[];for(var d=0;d<c.length;d++)f[c.charCodeAt(d)]=d}var h=c.charAt(64);if(h){var p=u.indexOf(h);p!==-1&&(l=p)}return a(u,l,f)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function a(u,l,c){for(var f=[],d=0,h=0;h<l;h++)if(h%4){var p=c[u.charCodeAt(h-1)]<<h%4*2,m=c[u.charCodeAt(h)]>>>6-h%4*2,g=p|m;f[d>>>2]|=g<<24-d%4*8,d++}return s.create(f,d)}}(),n.enc.Base64})}(UP)),UP.exports}var zP={exports:{}},yat=zP.exports,uoe;function vat(){return uoe||(uoe=1,function(e,t){(function(n,r){e.exports=r(mi())})(yat,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=r.enc;o.Base64url={stringify:function(u,l){l===void 0&&(l=!0);var c=u.words,f=u.sigBytes,d=l?this._safe_map:this._map;u.clamp();for(var h=[],p=0;p<f;p+=3)for(var m=c[p>>>2]>>>24-p%4*8&255,g=c[p+1>>>2]>>>24-(p+1)%4*8&255,b=c[p+2>>>2]>>>24-(p+2)%4*8&255,y=m<<16|g<<8|b,x=0;x<4&&p+x*.75<f;x++)h.push(d.charAt(y>>>6*(3-x)&63));var w=d.charAt(64);if(w)for(;h.length%4;)h.push(w);return h.join("")},parse:function(u,l){l===void 0&&(l=!0);var c=u.length,f=l?this._safe_map:this._map,d=this._reverseMap;if(!d){d=this._reverseMap=[];for(var h=0;h<f.length;h++)d[f.charCodeAt(h)]=h}var p=f.charAt(64);if(p){var m=u.indexOf(p);m!==-1&&(c=m)}return a(u,c,d)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function a(u,l,c){for(var f=[],d=0,h=0;h<l;h++)if(h%4){var p=c[u.charCodeAt(h-1)]<<h%4*2,m=c[u.charCodeAt(h)]>>>6-h%4*2,g=p|m;f[d>>>2]|=g<<24-d%4*8,d++}return s.create(f,d)}}(),n.enc.Base64url})}(zP)),zP.exports}var VP={exports:{}},bat=VP.exports,loe;function jw(){return loe||(loe=1,function(e,t){(function(n,r){e.exports=r(mi())})(bat,function(n){return function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,u=i.algo,l=[];(function(){for(var m=0;m<64;m++)l[m]=r.abs(r.sin(m+1))*4294967296|0})();var c=u.MD5=a.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(m,g){for(var b=0;b<16;b++){var y=g+b,x=m[y];m[y]=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360}var w=this._hash.words,T=m[g+0],A=m[g+1],k=m[g+2],I=m[g+3],O=m[g+4],M=m[g+5],L=m[g+6],H=m[g+7],D=m[g+8],B=m[g+9],U=m[g+10],G=m[g+11],ee=m[g+12],ne=m[g+13],ue=m[g+14],X=m[g+15],q=w[0],te=w[1],W=w[2],Z=w[3];q=f(q,te,W,Z,T,7,l[0]),Z=f(Z,q,te,W,A,12,l[1]),W=f(W,Z,q,te,k,17,l[2]),te=f(te,W,Z,q,I,22,l[3]),q=f(q,te,W,Z,O,7,l[4]),Z=f(Z,q,te,W,M,12,l[5]),W=f(W,Z,q,te,L,17,l[6]),te=f(te,W,Z,q,H,22,l[7]),q=f(q,te,W,Z,D,7,l[8]),Z=f(Z,q,te,W,B,12,l[9]),W=f(W,Z,q,te,U,17,l[10]),te=f(te,W,Z,q,G,22,l[11]),q=f(q,te,W,Z,ee,7,l[12]),Z=f(Z,q,te,W,ne,12,l[13]),W=f(W,Z,q,te,ue,17,l[14]),te=f(te,W,Z,q,X,22,l[15]),q=d(q,te,W,Z,A,5,l[16]),Z=d(Z,q,te,W,L,9,l[17]),W=d(W,Z,q,te,G,14,l[18]),te=d(te,W,Z,q,T,20,l[19]),q=d(q,te,W,Z,M,5,l[20]),Z=d(Z,q,te,W,U,9,l[21]),W=d(W,Z,q,te,X,14,l[22]),te=d(te,W,Z,q,O,20,l[23]),q=d(q,te,W,Z,B,5,l[24]),Z=d(Z,q,te,W,ue,9,l[25]),W=d(W,Z,q,te,I,14,l[26]),te=d(te,W,Z,q,D,20,l[27]),q=d(q,te,W,Z,ne,5,l[28]),Z=d(Z,q,te,W,k,9,l[29]),W=d(W,Z,q,te,H,14,l[30]),te=d(te,W,Z,q,ee,20,l[31]),q=h(q,te,W,Z,M,4,l[32]),Z=h(Z,q,te,W,D,11,l[33]),W=h(W,Z,q,te,G,16,l[34]),te=h(te,W,Z,q,ue,23,l[35]),q=h(q,te,W,Z,A,4,l[36]),Z=h(Z,q,te,W,O,11,l[37]),W=h(W,Z,q,te,H,16,l[38]),te=h(te,W,Z,q,U,23,l[39]),q=h(q,te,W,Z,ne,4,l[40]),Z=h(Z,q,te,W,T,11,l[41]),W=h(W,Z,q,te,I,16,l[42]),te=h(te,W,Z,q,L,23,l[43]),q=h(q,te,W,Z,B,4,l[44]),Z=h(Z,q,te,W,ee,11,l[45]),W=h(W,Z,q,te,X,16,l[46]),te=h(te,W,Z,q,k,23,l[47]),q=p(q,te,W,Z,T,6,l[48]),Z=p(Z,q,te,W,H,10,l[49]),W=p(W,Z,q,te,ue,15,l[50]),te=p(te,W,Z,q,M,21,l[51]),q=p(q,te,W,Z,ee,6,l[52]),Z=p(Z,q,te,W,I,10,l[53]),W=p(W,Z,q,te,U,15,l[54]),te=p(te,W,Z,q,A,21,l[55]),q=p(q,te,W,Z,D,6,l[56]),Z=p(Z,q,te,W,X,10,l[57]),W=p(W,Z,q,te,L,15,l[58]),te=p(te,W,Z,q,ne,21,l[59]),q=p(q,te,W,Z,O,6,l[60]),Z=p(Z,q,te,W,G,10,l[61]),W=p(W,Z,q,te,k,15,l[62]),te=p(te,W,Z,q,B,21,l[63]),w[0]=w[0]+q|0,w[1]=w[1]+te|0,w[2]=w[2]+W|0,w[3]=w[3]+Z|0},_doFinalize:function(){var m=this._data,g=m.words,b=this._nDataBytes*8,y=m.sigBytes*8;g[y>>>5]|=128<<24-y%32;var x=r.floor(b/4294967296),w=b;g[(y+64>>>9<<4)+15]=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,g[(y+64>>>9<<4)+14]=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360,m.sigBytes=(g.length+1)*4,this._process();for(var T=this._hash,A=T.words,k=0;k<4;k++){var I=A[k];A[k]=(I<<8|I>>>24)&16711935|(I<<24|I>>>8)&4278255360}return T},clone:function(){var m=a.clone.call(this);return m._hash=this._hash.clone(),m}});function f(m,g,b,y,x,w,T){var A=m+(g&b|~g&y)+x+T;return(A<<w|A>>>32-w)+g}function d(m,g,b,y,x,w,T){var A=m+(g&y|b&~y)+x+T;return(A<<w|A>>>32-w)+g}function h(m,g,b,y,x,w,T){var A=m+(g^b^y)+x+T;return(A<<w|A>>>32-w)+g}function p(m,g,b,y,x,w,T){var A=m+(b^(g|~y))+x+T;return(A<<w|A>>>32-w)+g}i.MD5=a._createHelper(c),i.HmacMD5=a._createHmacHelper(c)}(Math),n.MD5})}(VP)),VP.exports}var HP={exports:{}},xat=HP.exports,coe;function hwe(){return coe||(coe=1,function(e,t){(function(n,r){e.exports=r(mi())})(xat,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=i.Hasher,a=r.algo,u=[],l=a.SHA1=o.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(c,f){for(var d=this._hash.words,h=d[0],p=d[1],m=d[2],g=d[3],b=d[4],y=0;y<80;y++){if(y<16)u[y]=c[f+y]|0;else{var x=u[y-3]^u[y-8]^u[y-14]^u[y-16];u[y]=x<<1|x>>>31}var w=(h<<5|h>>>27)+b+u[y];y<20?w+=(p&m|~p&g)+1518500249:y<40?w+=(p^m^g)+1859775393:y<60?w+=(p&m|p&g|m&g)-1894007588:w+=(p^m^g)-899497514,b=g,g=m,m=p<<30|p>>>2,p=h,h=w}d[0]=d[0]+h|0,d[1]=d[1]+p|0,d[2]=d[2]+m|0,d[3]=d[3]+g|0,d[4]=d[4]+b|0},_doFinalize:function(){var c=this._data,f=c.words,d=this._nDataBytes*8,h=c.sigBytes*8;return f[h>>>5]|=128<<24-h%32,f[(h+64>>>9<<4)+14]=Math.floor(d/4294967296),f[(h+64>>>9<<4)+15]=d,c.sigBytes=f.length*4,this._process(),this._hash},clone:function(){var c=o.clone.call(this);return c._hash=this._hash.clone(),c}});r.SHA1=o._createHelper(l),r.HmacSHA1=o._createHmacHelper(l)}(),n.SHA1})}(HP)),HP.exports}var qP={exports:{}},_at=qP.exports,foe;function UY(){return foe||(foe=1,function(e,t){(function(n,r){e.exports=r(mi())})(_at,function(n){return function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,u=i.algo,l=[],c=[];(function(){function h(b){for(var y=r.sqrt(b),x=2;x<=y;x++)if(!(b%x))return!1;return!0}function p(b){return(b-(b|0))*4294967296|0}for(var m=2,g=0;g<64;)h(m)&&(g<8&&(l[g]=p(r.pow(m,1/2))),c[g]=p(r.pow(m,1/3)),g++),m++})();var f=[],d=u.SHA256=a.extend({_doReset:function(){this._hash=new o.init(l.slice(0))},_doProcessBlock:function(h,p){for(var m=this._hash.words,g=m[0],b=m[1],y=m[2],x=m[3],w=m[4],T=m[5],A=m[6],k=m[7],I=0;I<64;I++){if(I<16)f[I]=h[p+I]|0;else{var O=f[I-15],M=(O<<25|O>>>7)^(O<<14|O>>>18)^O>>>3,L=f[I-2],H=(L<<15|L>>>17)^(L<<13|L>>>19)^L>>>10;f[I]=M+f[I-7]+H+f[I-16]}var D=w&T^~w&A,B=g&b^g&y^b&y,U=(g<<30|g>>>2)^(g<<19|g>>>13)^(g<<10|g>>>22),G=(w<<26|w>>>6)^(w<<21|w>>>11)^(w<<7|w>>>25),ee=k+G+D+c[I]+f[I],ne=U+B;k=A,A=T,T=w,w=x+ee|0,x=y,y=b,b=g,g=ee+ne|0}m[0]=m[0]+g|0,m[1]=m[1]+b|0,m[2]=m[2]+y|0,m[3]=m[3]+x|0,m[4]=m[4]+w|0,m[5]=m[5]+T|0,m[6]=m[6]+A|0,m[7]=m[7]+k|0},_doFinalize:function(){var h=this._data,p=h.words,m=this._nDataBytes*8,g=h.sigBytes*8;return p[g>>>5]|=128<<24-g%32,p[(g+64>>>9<<4)+14]=r.floor(m/4294967296),p[(g+64>>>9<<4)+15]=m,h.sigBytes=p.length*4,this._process(),this._hash},clone:function(){var h=a.clone.call(this);return h._hash=this._hash.clone(),h}});i.SHA256=a._createHelper(d),i.HmacSHA256=a._createHmacHelper(d)}(Math),n.SHA256})}(qP)),qP.exports}var WP={exports:{}},wat=WP.exports,doe;function Eat(){return doe||(doe=1,function(e,t){(function(n,r,i){e.exports=r(mi(),UY())})(wat,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=r.algo,a=o.SHA256,u=o.SHA224=a.extend({_doReset:function(){this._hash=new s.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var l=a._doFinalize.call(this);return l.sigBytes-=4,l}});r.SHA224=a._createHelper(u),r.HmacSHA224=a._createHmacHelper(u)}(),n.SHA224})}(WP)),WP.exports}var GP={exports:{}},Sat=GP.exports,hoe;function pwe(){return hoe||(hoe=1,function(e,t){(function(n,r,i){e.exports=r(mi(),X9())})(Sat,function(n){return function(){var r=n,i=r.lib,s=i.Hasher,o=r.x64,a=o.Word,u=o.WordArray,l=r.algo;function c(){return a.create.apply(a,arguments)}var f=[c(1116352408,3609767458),c(1899447441,602891725),c(3049323471,3964484399),c(3921009573,2173295548),c(961987163,4081628472),c(1508970993,3053834265),c(2453635748,2937671579),c(2870763221,3664609560),c(3624381080,2734883394),c(310598401,1164996542),c(607225278,1323610764),c(1426881987,3590304994),c(1925078388,4068182383),c(2162078206,991336113),c(2614888103,633803317),c(3248222580,3479774868),c(3835390401,2666613458),c(4022224774,944711139),c(264347078,2341262773),c(604807628,2007800933),c(770255983,1495990901),c(1249150122,1856431235),c(1555081692,3175218132),c(1996064986,2198950837),c(2554220882,3999719339),c(2821834349,766784016),c(2952996808,2566594879),c(3210313671,3203337956),c(3336571891,1034457026),c(3584528711,2466948901),c(113926993,3758326383),c(338241895,168717936),c(666307205,1188179964),c(773529912,1546045734),c(1294757372,1522805485),c(1396182291,2643833823),c(1695183700,2343527390),c(1986661051,1014477480),c(2177026350,1206759142),c(2456956037,344077627),c(2730485921,1290863460),c(2820302411,3158454273),c(3259730800,3505952657),c(3345764771,106217008),c(3516065817,3606008344),c(3600352804,1432725776),c(4094571909,1467031594),c(275423344,851169720),c(430227734,3100823752),c(506948616,1363258195),c(659060556,3750685593),c(883997877,3785050280),c(958139571,3318307427),c(1322822218,3812723403),c(1537002063,2003034995),c(1747873779,3602036899),c(1955562222,1575990012),c(2024104815,1125592928),c(2227730452,2716904306),c(2361852424,442776044),c(2428436474,593698344),c(2756734187,3733110249),c(3204031479,2999351573),c(3329325298,3815920427),c(3391569614,3928383900),c(3515267271,566280711),c(3940187606,3454069534),c(4118630271,4000239992),c(116418474,1914138554),c(174292421,2731055270),c(289380356,3203993006),c(460393269,320620315),c(685471733,587496836),c(852142971,1086792851),c(1017036298,365543100),c(1126000580,2618297676),c(1288033470,3409855158),c(1501505948,4234509866),c(1607167915,987167468),c(1816402316,1246189591)],d=[];(function(){for(var p=0;p<80;p++)d[p]=c()})();var h=l.SHA512=s.extend({_doReset:function(){this._hash=new u.init([new a.init(1779033703,4089235720),new a.init(3144134277,2227873595),new a.init(1013904242,4271175723),new a.init(2773480762,1595750129),new a.init(1359893119,2917565137),new a.init(2600822924,725511199),new a.init(528734635,4215389547),new a.init(1541459225,327033209)])},_doProcessBlock:function(p,m){for(var g=this._hash.words,b=g[0],y=g[1],x=g[2],w=g[3],T=g[4],A=g[5],k=g[6],I=g[7],O=b.high,M=b.low,L=y.high,H=y.low,D=x.high,B=x.low,U=w.high,G=w.low,ee=T.high,ne=T.low,ue=A.high,X=A.low,q=k.high,te=k.low,W=I.high,Z=I.low,oe=O,pe=M,ce=L,he=H,Ee=D,Ae=B,ge=U,me=G,Oe=ee,Me=ne,Ye=ue,lt=X,We=q,nt=te,yt=W,_t=Z,Rt=0;Rt<80;Rt++){var Et,Ke,Lt=d[Rt];if(Rt<16)Ke=Lt.high=p[m+Rt*2]|0,Et=Lt.low=p[m+Rt*2+1]|0;else{var sn=d[Rt-15],Fe=sn.high,Qe=sn.low,wt=(Fe>>>1|Qe<<31)^(Fe>>>8|Qe<<24)^Fe>>>7,Vt=(Qe>>>1|Fe<<31)^(Qe>>>8|Fe<<24)^(Qe>>>7|Fe<<25),Wt=d[Rt-2],bn=Wt.high,Nn=Wt.low,Zn=(bn>>>19|Nn<<13)^(bn<<3|Nn>>>29)^bn>>>6,wr=(Nn>>>19|bn<<13)^(Nn<<3|bn>>>29)^(Nn>>>6|bn<<26),Hn=d[Rt-7],nr=Hn.high,Ei=Hn.low,Dr=d[Rt-16],Co=Dr.high,Ji=Dr.low;Et=Vt+Ei,Ke=wt+nr+(Et>>>0<Vt>>>0?1:0),Et=Et+wr,Ke=Ke+Zn+(Et>>>0<wr>>>0?1:0),Et=Et+Ji,Ke=Ke+Co+(Et>>>0<Ji>>>0?1:0),Lt.high=Ke,Lt.low=Et}var Di=Oe&Ye^~Oe&We,Zi=Me&lt^~Me&nt,ei=oe&ce^oe&Ee^ce&Ee,po=pe&he^pe&Ae^he&Ae,Wu=(oe>>>28|pe<<4)^(oe<<30|pe>>>2)^(oe<<25|pe>>>7),Ea=(pe>>>28|oe<<4)^(pe<<30|oe>>>2)^(pe<<25|oe>>>7),Sa=(Oe>>>14|Me<<18)^(Oe>>>18|Me<<14)^(Oe<<23|Me>>>9),Kr=(Me>>>14|Oe<<18)^(Me>>>18|Oe<<14)^(Me<<23|Oe>>>9),Oi=f[Rt],si=Oi.high,Js=Oi.low,Xr=_t+Kr,Hi=yt+Sa+(Xr>>>0<_t>>>0?1:0),Xr=Xr+Zi,Hi=Hi+Di+(Xr>>>0<Zi>>>0?1:0),Xr=Xr+Js,Hi=Hi+si+(Xr>>>0<Js>>>0?1:0),Xr=Xr+Et,Hi=Hi+Ke+(Xr>>>0<Et>>>0?1:0),Zs=Ea+po,mo=Wu+ei+(Zs>>>0<Ea>>>0?1:0);yt=We,_t=nt,We=Ye,nt=lt,Ye=Oe,lt=Me,Me=me+Xr|0,Oe=ge+Hi+(Me>>>0<me>>>0?1:0)|0,ge=Ee,me=Ae,Ee=ce,Ae=he,ce=oe,he=pe,pe=Xr+Zs|0,oe=Hi+mo+(pe>>>0<Xr>>>0?1:0)|0}M=b.low=M+pe,b.high=O+oe+(M>>>0<pe>>>0?1:0),H=y.low=H+he,y.high=L+ce+(H>>>0<he>>>0?1:0),B=x.low=B+Ae,x.high=D+Ee+(B>>>0<Ae>>>0?1:0),G=w.low=G+me,w.high=U+ge+(G>>>0<me>>>0?1:0),ne=T.low=ne+Me,T.high=ee+Oe+(ne>>>0<Me>>>0?1:0),X=A.low=X+lt,A.high=ue+Ye+(X>>>0<lt>>>0?1:0),te=k.low=te+nt,k.high=q+We+(te>>>0<nt>>>0?1:0),Z=I.low=Z+_t,I.high=W+yt+(Z>>>0<_t>>>0?1:0)},_doFinalize:function(){var p=this._data,m=p.words,g=this._nDataBytes*8,b=p.sigBytes*8;m[b>>>5]|=128<<24-b%32,m[(b+128>>>10<<5)+30]=Math.floor(g/4294967296),m[(b+128>>>10<<5)+31]=g,p.sigBytes=m.length*4,this._process();var y=this._hash.toX32();return y},clone:function(){var p=s.clone.call(this);return p._hash=this._hash.clone(),p},blockSize:1024/32});r.SHA512=s._createHelper(h),r.HmacSHA512=s._createHmacHelper(h)}(),n.SHA512})}(GP)),GP.exports}var YP={exports:{}},Tat=YP.exports,poe;function Cat(){return poe||(poe=1,function(e,t){(function(n,r,i){e.exports=r(mi(),X9(),pwe())})(Tat,function(n){return function(){var r=n,i=r.x64,s=i.Word,o=i.WordArray,a=r.algo,u=a.SHA512,l=a.SHA384=u.extend({_doReset:function(){this._hash=new o.init([new s.init(3418070365,3238371032),new s.init(1654270250,914150663),new s.init(2438529370,812702999),new s.init(355462360,4144912697),new s.init(1731405415,4290775857),new s.init(2394180231,1750603025),new s.init(3675008525,1694076839),new s.init(1203062813,3204075428)])},_doFinalize:function(){var c=u._doFinalize.call(this);return c.sigBytes-=16,c}});r.SHA384=u._createHelper(l),r.HmacSHA384=u._createHmacHelper(l)}(),n.SHA384})}(YP)),YP.exports}var KP={exports:{}},Aat=KP.exports,moe;function kat(){return moe||(moe=1,function(e,t){(function(n,r,i){e.exports=r(mi(),X9())})(Aat,function(n){return function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,u=i.x64,l=u.Word,c=i.algo,f=[],d=[],h=[];(function(){for(var g=1,b=0,y=0;y<24;y++){f[g+5*b]=(y+1)*(y+2)/2%64;var x=b%5,w=(2*g+3*b)%5;g=x,b=w}for(var g=0;g<5;g++)for(var b=0;b<5;b++)d[g+5*b]=b+(2*g+3*b)%5*5;for(var T=1,A=0;A<24;A++){for(var k=0,I=0,O=0;O<7;O++){if(T&1){var M=(1<<O)-1;M<32?I^=1<<M:k^=1<<M-32}T&128?T=T<<1^113:T<<=1}h[A]=l.create(k,I)}})();var p=[];(function(){for(var g=0;g<25;g++)p[g]=l.create()})();var m=c.SHA3=a.extend({cfg:a.cfg.extend({outputLength:512}),_doReset:function(){for(var g=this._state=[],b=0;b<25;b++)g[b]=new l.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(g,b){for(var y=this._state,x=this.blockSize/2,w=0;w<x;w++){var T=g[b+2*w],A=g[b+2*w+1];T=(T<<8|T>>>24)&16711935|(T<<24|T>>>8)&4278255360,A=(A<<8|A>>>24)&16711935|(A<<24|A>>>8)&4278255360;var k=y[w];k.high^=A,k.low^=T}for(var I=0;I<24;I++){for(var O=0;O<5;O++){for(var M=0,L=0,H=0;H<5;H++){var k=y[O+5*H];M^=k.high,L^=k.low}var D=p[O];D.high=M,D.low=L}for(var O=0;O<5;O++)for(var B=p[(O+4)%5],U=p[(O+1)%5],G=U.high,ee=U.low,M=B.high^(G<<1|ee>>>31),L=B.low^(ee<<1|G>>>31),H=0;H<5;H++){var k=y[O+5*H];k.high^=M,k.low^=L}for(var ne=1;ne<25;ne++){var M,L,k=y[ne],ue=k.high,X=k.low,q=f[ne];q<32?(M=ue<<q|X>>>32-q,L=X<<q|ue>>>32-q):(M=X<<q-32|ue>>>64-q,L=ue<<q-32|X>>>64-q);var te=p[d[ne]];te.high=M,te.low=L}var W=p[0],Z=y[0];W.high=Z.high,W.low=Z.low;for(var O=0;O<5;O++)for(var H=0;H<5;H++){var ne=O+5*H,k=y[ne],oe=p[ne],pe=p[(O+1)%5+5*H],ce=p[(O+2)%5+5*H];k.high=oe.high^~pe.high&ce.high,k.low=oe.low^~pe.low&ce.low}var k=y[0],he=h[I];k.high^=he.high,k.low^=he.low}},_doFinalize:function(){var g=this._data,b=g.words;this._nDataBytes*8;var y=g.sigBytes*8,x=this.blockSize*32;b[y>>>5]|=1<<24-y%32,b[(r.ceil((y+1)/x)*x>>>5)-1]|=128,g.sigBytes=b.length*4,this._process();for(var w=this._state,T=this.cfg.outputLength/8,A=T/8,k=[],I=0;I<A;I++){var O=w[I],M=O.high,L=O.low;M=(M<<8|M>>>24)&16711935|(M<<24|M>>>8)&4278255360,L=(L<<8|L>>>24)&16711935|(L<<24|L>>>8)&4278255360,k.push(L),k.push(M)}return new o.init(k,T)},clone:function(){for(var g=a.clone.call(this),b=g._state=this._state.slice(0),y=0;y<25;y++)b[y]=b[y].clone();return g}});i.SHA3=a._createHelper(m),i.HmacSHA3=a._createHmacHelper(m)}(Math),n.SHA3})}(KP)),KP.exports}var XP={exports:{}},Rat=XP.exports,goe;function Iat(){return goe||(goe=1,function(e,t){(function(n,r){e.exports=r(mi())})(Rat,function(n){/** @preserve
			(c) 2012 by Cdric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,u=i.algo,l=o.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),c=o.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),f=o.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),d=o.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),h=o.create([0,1518500249,1859775393,2400959708,2840853838]),p=o.create([1352829926,1548603684,1836072691,2053994217,0]),m=u.RIPEMD160=a.extend({_doReset:function(){this._hash=o.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(A,k){for(var I=0;I<16;I++){var O=k+I,M=A[O];A[O]=(M<<8|M>>>24)&16711935|(M<<24|M>>>8)&4278255360}var L=this._hash.words,H=h.words,D=p.words,B=l.words,U=c.words,G=f.words,ee=d.words,ne,ue,X,q,te,W,Z,oe,pe,ce;W=ne=L[0],Z=ue=L[1],oe=X=L[2],pe=q=L[3],ce=te=L[4];for(var he,I=0;I<80;I+=1)he=ne+A[k+B[I]]|0,I<16?he+=g(ue,X,q)+H[0]:I<32?he+=b(ue,X,q)+H[1]:I<48?he+=y(ue,X,q)+H[2]:I<64?he+=x(ue,X,q)+H[3]:he+=w(ue,X,q)+H[4],he=he|0,he=T(he,G[I]),he=he+te|0,ne=te,te=q,q=T(X,10),X=ue,ue=he,he=W+A[k+U[I]]|0,I<16?he+=w(Z,oe,pe)+D[0]:I<32?he+=x(Z,oe,pe)+D[1]:I<48?he+=y(Z,oe,pe)+D[2]:I<64?he+=b(Z,oe,pe)+D[3]:he+=g(Z,oe,pe)+D[4],he=he|0,he=T(he,ee[I]),he=he+ce|0,W=ce,ce=pe,pe=T(oe,10),oe=Z,Z=he;he=L[1]+X+pe|0,L[1]=L[2]+q+ce|0,L[2]=L[3]+te+W|0,L[3]=L[4]+ne+Z|0,L[4]=L[0]+ue+oe|0,L[0]=he},_doFinalize:function(){var A=this._data,k=A.words,I=this._nDataBytes*8,O=A.sigBytes*8;k[O>>>5]|=128<<24-O%32,k[(O+64>>>9<<4)+14]=(I<<8|I>>>24)&16711935|(I<<24|I>>>8)&4278255360,A.sigBytes=(k.length+1)*4,this._process();for(var M=this._hash,L=M.words,H=0;H<5;H++){var D=L[H];L[H]=(D<<8|D>>>24)&16711935|(D<<24|D>>>8)&4278255360}return M},clone:function(){var A=a.clone.call(this);return A._hash=this._hash.clone(),A}});function g(A,k,I){return A^k^I}function b(A,k,I){return A&k|~A&I}function y(A,k,I){return(A|~k)^I}function x(A,k,I){return A&I|k&~I}function w(A,k,I){return A^(k|~I)}function T(A,k){return A<<k|A>>>32-k}i.RIPEMD160=a._createHelper(m),i.HmacRIPEMD160=a._createHmacHelper(m)}(),n.RIPEMD160})}(XP)),XP.exports}var QP={exports:{}},Pat=QP.exports,yoe;function zY(){return yoe||(yoe=1,function(e,t){(function(n,r){e.exports=r(mi())})(Pat,function(n){(function(){var r=n,i=r.lib,s=i.Base,o=r.enc,a=o.Utf8,u=r.algo;u.HMAC=s.extend({init:function(l,c){l=this._hasher=new l.init,typeof c=="string"&&(c=a.parse(c));var f=l.blockSize,d=f*4;c.sigBytes>d&&(c=l.finalize(c)),c.clamp();for(var h=this._oKey=c.clone(),p=this._iKey=c.clone(),m=h.words,g=p.words,b=0;b<f;b++)m[b]^=1549556828,g[b]^=909522486;h.sigBytes=p.sigBytes=d,this.reset()},reset:function(){var l=this._hasher;l.reset(),l.update(this._iKey)},update:function(l){return this._hasher.update(l),this},finalize:function(l){var c=this._hasher,f=c.finalize(l);c.reset();var d=c.finalize(this._oKey.clone().concat(f));return d}})})()})}(QP)),QP.exports}var JP={exports:{}},Nat=JP.exports,voe;function Dat(){return voe||(voe=1,function(e,t){(function(n,r,i){e.exports=r(mi(),UY(),zY())})(Nat,function(n){return function(){var r=n,i=r.lib,s=i.Base,o=i.WordArray,a=r.algo,u=a.SHA256,l=a.HMAC,c=a.PBKDF2=s.extend({cfg:s.extend({keySize:128/32,hasher:u,iterations:25e4}),init:function(f){this.cfg=this.cfg.extend(f)},compute:function(f,d){for(var h=this.cfg,p=l.create(h.hasher,f),m=o.create(),g=o.create([1]),b=m.words,y=g.words,x=h.keySize,w=h.iterations;b.length<x;){var T=p.update(d).finalize(g);p.reset();for(var A=T.words,k=A.length,I=T,O=1;O<w;O++){I=p.finalize(I),p.reset();for(var M=I.words,L=0;L<k;L++)A[L]^=M[L]}m.concat(T),y[0]++}return m.sigBytes=x*4,m}});r.PBKDF2=function(f,d,h){return c.create(h).compute(f,d)}}(),n.PBKDF2})}(JP)),JP.exports}var ZP={exports:{}},Oat=ZP.exports,boe;function Kb(){return boe||(boe=1,function(e,t){(function(n,r,i){e.exports=r(mi(),hwe(),zY())})(Oat,function(n){return function(){var r=n,i=r.lib,s=i.Base,o=i.WordArray,a=r.algo,u=a.MD5,l=a.EvpKDF=s.extend({cfg:s.extend({keySize:128/32,hasher:u,iterations:1}),init:function(c){this.cfg=this.cfg.extend(c)},compute:function(c,f){for(var d,h=this.cfg,p=h.hasher.create(),m=o.create(),g=m.words,b=h.keySize,y=h.iterations;g.length<b;){d&&p.update(d),d=p.update(c).finalize(f),p.reset();for(var x=1;x<y;x++)d=p.finalize(d),p.reset();m.concat(d)}return m.sigBytes=b*4,m}});r.EvpKDF=function(c,f,d){return l.create(d).compute(c,f)}}(),n.EvpKDF})}(ZP)),ZP.exports}var e8={exports:{}},Mat=e8.exports,xoe;function zu(){return xoe||(xoe=1,function(e,t){(function(n,r,i){e.exports=r(mi(),Kb())})(Mat,function(n){n.lib.Cipher||function(r){var i=n,s=i.lib,o=s.Base,a=s.WordArray,u=s.BufferedBlockAlgorithm,l=i.enc;l.Utf8;var c=l.Base64,f=i.algo,d=f.EvpKDF,h=s.Cipher=u.extend({cfg:o.extend(),createEncryptor:function(M,L){return this.create(this._ENC_XFORM_MODE,M,L)},createDecryptor:function(M,L){return this.create(this._DEC_XFORM_MODE,M,L)},init:function(M,L,H){this.cfg=this.cfg.extend(H),this._xformMode=M,this._key=L,this.reset()},reset:function(){u.reset.call(this),this._doReset()},process:function(M){return this._append(M),this._process()},finalize:function(M){M&&this._append(M);var L=this._doFinalize();return L},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function M(L){return typeof L=="string"?O:A}return function(L){return{encrypt:function(H,D,B){return M(D).encrypt(L,H,D,B)},decrypt:function(H,D,B){return M(D).decrypt(L,H,D,B)}}}}()});s.StreamCipher=h.extend({_doFinalize:function(){var M=this._process(!0);return M},blockSize:1});var p=i.mode={},m=s.BlockCipherMode=o.extend({createEncryptor:function(M,L){return this.Encryptor.create(M,L)},createDecryptor:function(M,L){return this.Decryptor.create(M,L)},init:function(M,L){this._cipher=M,this._iv=L}}),g=p.CBC=function(){var M=m.extend();M.Encryptor=M.extend({processBlock:function(H,D){var B=this._cipher,U=B.blockSize;L.call(this,H,D,U),B.encryptBlock(H,D),this._prevBlock=H.slice(D,D+U)}}),M.Decryptor=M.extend({processBlock:function(H,D){var B=this._cipher,U=B.blockSize,G=H.slice(D,D+U);B.decryptBlock(H,D),L.call(this,H,D,U),this._prevBlock=G}});function L(H,D,B){var U,G=this._iv;G?(U=G,this._iv=r):U=this._prevBlock;for(var ee=0;ee<B;ee++)H[D+ee]^=U[ee]}return M}(),b=i.pad={},y=b.Pkcs7={pad:function(M,L){for(var H=L*4,D=H-M.sigBytes%H,B=D<<24|D<<16|D<<8|D,U=[],G=0;G<D;G+=4)U.push(B);var ee=a.create(U,D);M.concat(ee)},unpad:function(M){var L=M.words[M.sigBytes-1>>>2]&255;M.sigBytes-=L}};s.BlockCipher=h.extend({cfg:h.cfg.extend({mode:g,padding:y}),reset:function(){var M;h.reset.call(this);var L=this.cfg,H=L.iv,D=L.mode;this._xformMode==this._ENC_XFORM_MODE?M=D.createEncryptor:(M=D.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==M?this._mode.init(this,H&&H.words):(this._mode=M.call(D,this,H&&H.words),this._mode.__creator=M)},_doProcessBlock:function(M,L){this._mode.processBlock(M,L)},_doFinalize:function(){var M,L=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(L.pad(this._data,this.blockSize),M=this._process(!0)):(M=this._process(!0),L.unpad(M)),M},blockSize:128/32});var x=s.CipherParams=o.extend({init:function(M){this.mixIn(M)},toString:function(M){return(M||this.formatter).stringify(this)}}),w=i.format={},T=w.OpenSSL={stringify:function(M){var L,H=M.ciphertext,D=M.salt;return D?L=a.create([1398893684,1701076831]).concat(D).concat(H):L=H,L.toString(c)},parse:function(M){var L,H=c.parse(M),D=H.words;return D[0]==1398893684&&D[1]==1701076831&&(L=a.create(D.slice(2,4)),D.splice(0,4),H.sigBytes-=16),x.create({ciphertext:H,salt:L})}},A=s.SerializableCipher=o.extend({cfg:o.extend({format:T}),encrypt:function(M,L,H,D){D=this.cfg.extend(D);var B=M.createEncryptor(H,D),U=B.finalize(L),G=B.cfg;return x.create({ciphertext:U,key:H,iv:G.iv,algorithm:M,mode:G.mode,padding:G.padding,blockSize:M.blockSize,formatter:D.format})},decrypt:function(M,L,H,D){D=this.cfg.extend(D),L=this._parse(L,D.format);var B=M.createDecryptor(H,D).finalize(L.ciphertext);return B},_parse:function(M,L){return typeof M=="string"?L.parse(M,this):M}}),k=i.kdf={},I=k.OpenSSL={execute:function(M,L,H,D,B){if(D||(D=a.random(64/8)),B)var U=d.create({keySize:L+H,hasher:B}).compute(M,D);else var U=d.create({keySize:L+H}).compute(M,D);var G=a.create(U.words.slice(L),H*4);return U.sigBytes=L*4,x.create({key:U,iv:G,salt:D})}},O=s.PasswordBasedCipher=A.extend({cfg:A.cfg.extend({kdf:I}),encrypt:function(M,L,H,D){D=this.cfg.extend(D);var B=D.kdf.execute(H,M.keySize,M.ivSize,D.salt,D.hasher);D.iv=B.iv;var U=A.encrypt.call(this,M,L,B.key,D);return U.mixIn(B),U},decrypt:function(M,L,H,D){D=this.cfg.extend(D),L=this._parse(L,D.format);var B=D.kdf.execute(H,M.keySize,M.ivSize,L.salt,D.hasher);D.iv=B.iv;var U=A.decrypt.call(this,M,L,B.key,D);return U}})}()})}(e8)),e8.exports}var t8={exports:{}},Lat=t8.exports,_oe;function Fat(){return _oe||(_oe=1,function(e,t){(function(n,r,i){e.exports=r(mi(),zu())})(Lat,function(n){return n.mode.CFB=function(){var r=n.lib.BlockCipherMode.extend();r.Encryptor=r.extend({processBlock:function(s,o){var a=this._cipher,u=a.blockSize;i.call(this,s,o,u,a),this._prevBlock=s.slice(o,o+u)}}),r.Decryptor=r.extend({processBlock:function(s,o){var a=this._cipher,u=a.blockSize,l=s.slice(o,o+u);i.call(this,s,o,u,a),this._prevBlock=l}});function i(s,o,a,u){var l,c=this._iv;c?(l=c.slice(0),this._iv=void 0):l=this._prevBlock,u.encryptBlock(l,0);for(var f=0;f<a;f++)s[o+f]^=l[f]}return r}(),n.mode.CFB})}(t8)),t8.exports}var n8={exports:{}},$at=n8.exports,woe;function Bat(){return woe||(woe=1,function(e,t){(function(n,r,i){e.exports=r(mi(),zu())})($at,function(n){return n.mode.CTR=function(){var r=n.lib.BlockCipherMode.extend(),i=r.Encryptor=r.extend({processBlock:function(s,o){var a=this._cipher,u=a.blockSize,l=this._iv,c=this._counter;l&&(c=this._counter=l.slice(0),this._iv=void 0);var f=c.slice(0);a.encryptBlock(f,0),c[u-1]=c[u-1]+1|0;for(var d=0;d<u;d++)s[o+d]^=f[d]}});return r.Decryptor=i,r}(),n.mode.CTR})}(n8)),n8.exports}var r8={exports:{}},jat=r8.exports,Eoe;function Uat(){return Eoe||(Eoe=1,function(e,t){(function(n,r,i){e.exports=r(mi(),zu())})(jat,function(n){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return n.mode.CTRGladman=function(){var r=n.lib.BlockCipherMode.extend();function i(a){if((a>>24&255)===255){var u=a>>16&255,l=a>>8&255,c=a&255;u===255?(u=0,l===255?(l=0,c===255?c=0:++c):++l):++u,a=0,a+=u<<16,a+=l<<8,a+=c}else a+=1<<24;return a}function s(a){return(a[0]=i(a[0]))===0&&(a[1]=i(a[1])),a}var o=r.Encryptor=r.extend({processBlock:function(a,u){var l=this._cipher,c=l.blockSize,f=this._iv,d=this._counter;f&&(d=this._counter=f.slice(0),this._iv=void 0),s(d);var h=d.slice(0);l.encryptBlock(h,0);for(var p=0;p<c;p++)a[u+p]^=h[p]}});return r.Decryptor=o,r}(),n.mode.CTRGladman})}(r8)),r8.exports}var i8={exports:{}},zat=i8.exports,Soe;function Vat(){return Soe||(Soe=1,function(e,t){(function(n,r,i){e.exports=r(mi(),zu())})(zat,function(n){return n.mode.OFB=function(){var r=n.lib.BlockCipherMode.extend(),i=r.Encryptor=r.extend({processBlock:function(s,o){var a=this._cipher,u=a.blockSize,l=this._iv,c=this._keystream;l&&(c=this._keystream=l.slice(0),this._iv=void 0),a.encryptBlock(c,0);for(var f=0;f<u;f++)s[o+f]^=c[f]}});return r.Decryptor=i,r}(),n.mode.OFB})}(i8)),i8.exports}var s8={exports:{}},Hat=s8.exports,Toe;function qat(){return Toe||(Toe=1,function(e,t){(function(n,r,i){e.exports=r(mi(),zu())})(Hat,function(n){return n.mode.ECB=function(){var r=n.lib.BlockCipherMode.extend();return r.Encryptor=r.extend({processBlock:function(i,s){this._cipher.encryptBlock(i,s)}}),r.Decryptor=r.extend({processBlock:function(i,s){this._cipher.decryptBlock(i,s)}}),r}(),n.mode.ECB})}(s8)),s8.exports}var o8={exports:{}},Wat=o8.exports,Coe;function Gat(){return Coe||(Coe=1,function(e,t){(function(n,r,i){e.exports=r(mi(),zu())})(Wat,function(n){return n.pad.AnsiX923={pad:function(r,i){var s=r.sigBytes,o=i*4,a=o-s%o,u=s+a-1;r.clamp(),r.words[u>>>2]|=a<<24-u%4*8,r.sigBytes+=a},unpad:function(r){var i=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=i}},n.pad.Ansix923})}(o8)),o8.exports}var a8={exports:{}},Yat=a8.exports,Aoe;function Kat(){return Aoe||(Aoe=1,function(e,t){(function(n,r,i){e.exports=r(mi(),zu())})(Yat,function(n){return n.pad.Iso10126={pad:function(r,i){var s=i*4,o=s-r.sigBytes%s;r.concat(n.lib.WordArray.random(o-1)).concat(n.lib.WordArray.create([o<<24],1))},unpad:function(r){var i=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=i}},n.pad.Iso10126})}(a8)),a8.exports}var u8={exports:{}},Xat=u8.exports,koe;function Qat(){return koe||(koe=1,function(e,t){(function(n,r,i){e.exports=r(mi(),zu())})(Xat,function(n){return n.pad.Iso97971={pad:function(r,i){r.concat(n.lib.WordArray.create([2147483648],1)),n.pad.ZeroPadding.pad(r,i)},unpad:function(r){n.pad.ZeroPadding.unpad(r),r.sigBytes--}},n.pad.Iso97971})}(u8)),u8.exports}var l8={exports:{}},Jat=l8.exports,Roe;function Zat(){return Roe||(Roe=1,function(e,t){(function(n,r,i){e.exports=r(mi(),zu())})(Jat,function(n){return n.pad.ZeroPadding={pad:function(r,i){var s=i*4;r.clamp(),r.sigBytes+=s-(r.sigBytes%s||s)},unpad:function(r){for(var i=r.words,s=r.sigBytes-1,s=r.sigBytes-1;s>=0;s--)if(i[s>>>2]>>>24-s%4*8&255){r.sigBytes=s+1;break}}},n.pad.ZeroPadding})}(l8)),l8.exports}var c8={exports:{}},eut=c8.exports,Ioe;function tut(){return Ioe||(Ioe=1,function(e,t){(function(n,r,i){e.exports=r(mi(),zu())})(eut,function(n){return n.pad.NoPadding={pad:function(){},unpad:function(){}},n.pad.NoPadding})}(c8)),c8.exports}var f8={exports:{}},nut=f8.exports,Poe;function rut(){return Poe||(Poe=1,function(e,t){(function(n,r,i){e.exports=r(mi(),zu())})(nut,function(n){return function(r){var i=n,s=i.lib,o=s.CipherParams,a=i.enc,u=a.Hex,l=i.format;l.Hex={stringify:function(c){return c.ciphertext.toString(u)},parse:function(c){var f=u.parse(c);return o.create({ciphertext:f})}}}(),n.format.Hex})}(f8)),f8.exports}var d8={exports:{}},iut=d8.exports,Noe;function sut(){return Noe||(Noe=1,function(e,t){(function(n,r,i){e.exports=r(mi(),Bw(),jw(),Kb(),zu())})(iut,function(n){return function(){var r=n,i=r.lib,s=i.BlockCipher,o=r.algo,a=[],u=[],l=[],c=[],f=[],d=[],h=[],p=[],m=[],g=[];(function(){for(var x=[],w=0;w<256;w++)w<128?x[w]=w<<1:x[w]=w<<1^283;for(var T=0,A=0,w=0;w<256;w++){var k=A^A<<1^A<<2^A<<3^A<<4;k=k>>>8^k&255^99,a[T]=k,u[k]=T;var I=x[T],O=x[I],M=x[O],L=x[k]*257^k*16843008;l[T]=L<<24|L>>>8,c[T]=L<<16|L>>>16,f[T]=L<<8|L>>>24,d[T]=L;var L=M*16843009^O*65537^I*257^T*16843008;h[k]=L<<24|L>>>8,p[k]=L<<16|L>>>16,m[k]=L<<8|L>>>24,g[k]=L,T?(T=I^x[x[x[M^I]]],A^=x[x[A]]):T=A=1}})();var b=[0,1,2,4,8,16,32,64,128,27,54],y=o.AES=s.extend({_doReset:function(){var x;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var w=this._keyPriorReset=this._key,T=w.words,A=w.sigBytes/4,k=this._nRounds=A+6,I=(k+1)*4,O=this._keySchedule=[],M=0;M<I;M++)M<A?O[M]=T[M]:(x=O[M-1],M%A?A>6&&M%A==4&&(x=a[x>>>24]<<24|a[x>>>16&255]<<16|a[x>>>8&255]<<8|a[x&255]):(x=x<<8|x>>>24,x=a[x>>>24]<<24|a[x>>>16&255]<<16|a[x>>>8&255]<<8|a[x&255],x^=b[M/A|0]<<24),O[M]=O[M-A]^x);for(var L=this._invKeySchedule=[],H=0;H<I;H++){var M=I-H;if(H%4)var x=O[M];else var x=O[M-4];H<4||M<=4?L[H]=x:L[H]=h[a[x>>>24]]^p[a[x>>>16&255]]^m[a[x>>>8&255]]^g[a[x&255]]}}},encryptBlock:function(x,w){this._doCryptBlock(x,w,this._keySchedule,l,c,f,d,a)},decryptBlock:function(x,w){var T=x[w+1];x[w+1]=x[w+3],x[w+3]=T,this._doCryptBlock(x,w,this._invKeySchedule,h,p,m,g,u);var T=x[w+1];x[w+1]=x[w+3],x[w+3]=T},_doCryptBlock:function(x,w,T,A,k,I,O,M){for(var L=this._nRounds,H=x[w]^T[0],D=x[w+1]^T[1],B=x[w+2]^T[2],U=x[w+3]^T[3],G=4,ee=1;ee<L;ee++){var ne=A[H>>>24]^k[D>>>16&255]^I[B>>>8&255]^O[U&255]^T[G++],ue=A[D>>>24]^k[B>>>16&255]^I[U>>>8&255]^O[H&255]^T[G++],X=A[B>>>24]^k[U>>>16&255]^I[H>>>8&255]^O[D&255]^T[G++],q=A[U>>>24]^k[H>>>16&255]^I[D>>>8&255]^O[B&255]^T[G++];H=ne,D=ue,B=X,U=q}var ne=(M[H>>>24]<<24|M[D>>>16&255]<<16|M[B>>>8&255]<<8|M[U&255])^T[G++],ue=(M[D>>>24]<<24|M[B>>>16&255]<<16|M[U>>>8&255]<<8|M[H&255])^T[G++],X=(M[B>>>24]<<24|M[U>>>16&255]<<16|M[H>>>8&255]<<8|M[D&255])^T[G++],q=(M[U>>>24]<<24|M[H>>>16&255]<<16|M[D>>>8&255]<<8|M[B&255])^T[G++];x[w]=ne,x[w+1]=ue,x[w+2]=X,x[w+3]=q},keySize:256/32});r.AES=s._createHelper(y)}(),n.AES})}(d8)),d8.exports}var h8={exports:{}},out=h8.exports,Doe;function aut(){return Doe||(Doe=1,function(e,t){(function(n,r,i){e.exports=r(mi(),Bw(),jw(),Kb(),zu())})(out,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=i.BlockCipher,a=r.algo,u=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],l=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],c=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],f=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],d=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],h=a.DES=o.extend({_doReset:function(){for(var b=this._key,y=b.words,x=[],w=0;w<56;w++){var T=u[w]-1;x[w]=y[T>>>5]>>>31-T%32&1}for(var A=this._subKeys=[],k=0;k<16;k++){for(var I=A[k]=[],O=c[k],w=0;w<24;w++)I[w/6|0]|=x[(l[w]-1+O)%28]<<31-w%6,I[4+(w/6|0)]|=x[28+(l[w+24]-1+O)%28]<<31-w%6;I[0]=I[0]<<1|I[0]>>>31;for(var w=1;w<7;w++)I[w]=I[w]>>>(w-1)*4+3;I[7]=I[7]<<5|I[7]>>>27}for(var M=this._invSubKeys=[],w=0;w<16;w++)M[w]=A[15-w]},encryptBlock:function(b,y){this._doCryptBlock(b,y,this._subKeys)},decryptBlock:function(b,y){this._doCryptBlock(b,y,this._invSubKeys)},_doCryptBlock:function(b,y,x){this._lBlock=b[y],this._rBlock=b[y+1],p.call(this,4,252645135),p.call(this,16,65535),m.call(this,2,858993459),m.call(this,8,16711935),p.call(this,1,1431655765);for(var w=0;w<16;w++){for(var T=x[w],A=this._lBlock,k=this._rBlock,I=0,O=0;O<8;O++)I|=f[O][((k^T[O])&d[O])>>>0];this._lBlock=k,this._rBlock=A^I}var M=this._lBlock;this._lBlock=this._rBlock,this._rBlock=M,p.call(this,1,1431655765),m.call(this,8,16711935),m.call(this,2,858993459),p.call(this,16,65535),p.call(this,4,252645135),b[y]=this._lBlock,b[y+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function p(b,y){var x=(this._lBlock>>>b^this._rBlock)&y;this._rBlock^=x,this._lBlock^=x<<b}function m(b,y){var x=(this._rBlock>>>b^this._lBlock)&y;this._lBlock^=x,this._rBlock^=x<<b}r.DES=o._createHelper(h);var g=a.TripleDES=o.extend({_doReset:function(){var b=this._key,y=b.words;if(y.length!==2&&y.length!==4&&y.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var x=y.slice(0,2),w=y.length<4?y.slice(0,2):y.slice(2,4),T=y.length<6?y.slice(0,2):y.slice(4,6);this._des1=h.createEncryptor(s.create(x)),this._des2=h.createEncryptor(s.create(w)),this._des3=h.createEncryptor(s.create(T))},encryptBlock:function(b,y){this._des1.encryptBlock(b,y),this._des2.decryptBlock(b,y),this._des3.encryptBlock(b,y)},decryptBlock:function(b,y){this._des3.decryptBlock(b,y),this._des2.encryptBlock(b,y),this._des1.decryptBlock(b,y)},keySize:192/32,ivSize:64/32,blockSize:64/32});r.TripleDES=o._createHelper(g)}(),n.TripleDES})}(h8)),h8.exports}var p8={exports:{}},uut=p8.exports,Ooe;function lut(){return Ooe||(Ooe=1,function(e,t){(function(n,r,i){e.exports=r(mi(),Bw(),jw(),Kb(),zu())})(uut,function(n){return function(){var r=n,i=r.lib,s=i.StreamCipher,o=r.algo,a=o.RC4=s.extend({_doReset:function(){for(var c=this._key,f=c.words,d=c.sigBytes,h=this._S=[],p=0;p<256;p++)h[p]=p;for(var p=0,m=0;p<256;p++){var g=p%d,b=f[g>>>2]>>>24-g%4*8&255;m=(m+h[p]+b)%256;var y=h[p];h[p]=h[m],h[m]=y}this._i=this._j=0},_doProcessBlock:function(c,f){c[f]^=u.call(this)},keySize:256/32,ivSize:0});function u(){for(var c=this._S,f=this._i,d=this._j,h=0,p=0;p<4;p++){f=(f+1)%256,d=(d+c[f])%256;var m=c[f];c[f]=c[d],c[d]=m,h|=c[(c[f]+c[d])%256]<<24-p*8}return this._i=f,this._j=d,h}r.RC4=s._createHelper(a);var l=o.RC4Drop=a.extend({cfg:a.cfg.extend({drop:192}),_doReset:function(){a._doReset.call(this);for(var c=this.cfg.drop;c>0;c--)u.call(this)}});r.RC4Drop=s._createHelper(l)}(),n.RC4})}(p8)),p8.exports}var m8={exports:{}},cut=m8.exports,Moe;function fut(){return Moe||(Moe=1,function(e,t){(function(n,r,i){e.exports=r(mi(),Bw(),jw(),Kb(),zu())})(cut,function(n){return function(){var r=n,i=r.lib,s=i.StreamCipher,o=r.algo,a=[],u=[],l=[],c=o.Rabbit=s.extend({_doReset:function(){for(var d=this._key.words,h=this.cfg.iv,p=0;p<4;p++)d[p]=(d[p]<<8|d[p]>>>24)&16711935|(d[p]<<24|d[p]>>>8)&4278255360;var m=this._X=[d[0],d[3]<<16|d[2]>>>16,d[1],d[0]<<16|d[3]>>>16,d[2],d[1]<<16|d[0]>>>16,d[3],d[2]<<16|d[1]>>>16],g=this._C=[d[2]<<16|d[2]>>>16,d[0]&4294901760|d[1]&65535,d[3]<<16|d[3]>>>16,d[1]&4294901760|d[2]&65535,d[0]<<16|d[0]>>>16,d[2]&4294901760|d[3]&65535,d[1]<<16|d[1]>>>16,d[3]&4294901760|d[0]&65535];this._b=0;for(var p=0;p<4;p++)f.call(this);for(var p=0;p<8;p++)g[p]^=m[p+4&7];if(h){var b=h.words,y=b[0],x=b[1],w=(y<<8|y>>>24)&16711935|(y<<24|y>>>8)&4278255360,T=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,A=w>>>16|T&4294901760,k=T<<16|w&65535;g[0]^=w,g[1]^=A,g[2]^=T,g[3]^=k,g[4]^=w,g[5]^=A,g[6]^=T,g[7]^=k;for(var p=0;p<4;p++)f.call(this)}},_doProcessBlock:function(d,h){var p=this._X;f.call(this),a[0]=p[0]^p[5]>>>16^p[3]<<16,a[1]=p[2]^p[7]>>>16^p[5]<<16,a[2]=p[4]^p[1]>>>16^p[7]<<16,a[3]=p[6]^p[3]>>>16^p[1]<<16;for(var m=0;m<4;m++)a[m]=(a[m]<<8|a[m]>>>24)&16711935|(a[m]<<24|a[m]>>>8)&4278255360,d[h+m]^=a[m]},blockSize:128/32,ivSize:64/32});function f(){for(var d=this._X,h=this._C,p=0;p<8;p++)u[p]=h[p];h[0]=h[0]+1295307597+this._b|0,h[1]=h[1]+3545052371+(h[0]>>>0<u[0]>>>0?1:0)|0,h[2]=h[2]+886263092+(h[1]>>>0<u[1]>>>0?1:0)|0,h[3]=h[3]+1295307597+(h[2]>>>0<u[2]>>>0?1:0)|0,h[4]=h[4]+3545052371+(h[3]>>>0<u[3]>>>0?1:0)|0,h[5]=h[5]+886263092+(h[4]>>>0<u[4]>>>0?1:0)|0,h[6]=h[6]+1295307597+(h[5]>>>0<u[5]>>>0?1:0)|0,h[7]=h[7]+3545052371+(h[6]>>>0<u[6]>>>0?1:0)|0,this._b=h[7]>>>0<u[7]>>>0?1:0;for(var p=0;p<8;p++){var m=d[p]+h[p],g=m&65535,b=m>>>16,y=((g*g>>>17)+g*b>>>15)+b*b,x=((m&4294901760)*m|0)+((m&65535)*m|0);l[p]=y^x}d[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,d[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,d[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,d[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,d[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,d[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,d[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,d[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}r.Rabbit=s._createHelper(c)}(),n.Rabbit})}(m8)),m8.exports}var g8={exports:{}},dut=g8.exports,Loe;function hut(){return Loe||(Loe=1,function(e,t){(function(n,r,i){e.exports=r(mi(),Bw(),jw(),Kb(),zu())})(dut,function(n){return function(){var r=n,i=r.lib,s=i.StreamCipher,o=r.algo,a=[],u=[],l=[],c=o.RabbitLegacy=s.extend({_doReset:function(){var d=this._key.words,h=this.cfg.iv,p=this._X=[d[0],d[3]<<16|d[2]>>>16,d[1],d[0]<<16|d[3]>>>16,d[2],d[1]<<16|d[0]>>>16,d[3],d[2]<<16|d[1]>>>16],m=this._C=[d[2]<<16|d[2]>>>16,d[0]&4294901760|d[1]&65535,d[3]<<16|d[3]>>>16,d[1]&4294901760|d[2]&65535,d[0]<<16|d[0]>>>16,d[2]&4294901760|d[3]&65535,d[1]<<16|d[1]>>>16,d[3]&4294901760|d[0]&65535];this._b=0;for(var g=0;g<4;g++)f.call(this);for(var g=0;g<8;g++)m[g]^=p[g+4&7];if(h){var b=h.words,y=b[0],x=b[1],w=(y<<8|y>>>24)&16711935|(y<<24|y>>>8)&4278255360,T=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,A=w>>>16|T&4294901760,k=T<<16|w&65535;m[0]^=w,m[1]^=A,m[2]^=T,m[3]^=k,m[4]^=w,m[5]^=A,m[6]^=T,m[7]^=k;for(var g=0;g<4;g++)f.call(this)}},_doProcessBlock:function(d,h){var p=this._X;f.call(this),a[0]=p[0]^p[5]>>>16^p[3]<<16,a[1]=p[2]^p[7]>>>16^p[5]<<16,a[2]=p[4]^p[1]>>>16^p[7]<<16,a[3]=p[6]^p[3]>>>16^p[1]<<16;for(var m=0;m<4;m++)a[m]=(a[m]<<8|a[m]>>>24)&16711935|(a[m]<<24|a[m]>>>8)&4278255360,d[h+m]^=a[m]},blockSize:128/32,ivSize:64/32});function f(){for(var d=this._X,h=this._C,p=0;p<8;p++)u[p]=h[p];h[0]=h[0]+1295307597+this._b|0,h[1]=h[1]+3545052371+(h[0]>>>0<u[0]>>>0?1:0)|0,h[2]=h[2]+886263092+(h[1]>>>0<u[1]>>>0?1:0)|0,h[3]=h[3]+1295307597+(h[2]>>>0<u[2]>>>0?1:0)|0,h[4]=h[4]+3545052371+(h[3]>>>0<u[3]>>>0?1:0)|0,h[5]=h[5]+886263092+(h[4]>>>0<u[4]>>>0?1:0)|0,h[6]=h[6]+1295307597+(h[5]>>>0<u[5]>>>0?1:0)|0,h[7]=h[7]+3545052371+(h[6]>>>0<u[6]>>>0?1:0)|0,this._b=h[7]>>>0<u[7]>>>0?1:0;for(var p=0;p<8;p++){var m=d[p]+h[p],g=m&65535,b=m>>>16,y=((g*g>>>17)+g*b>>>15)+b*b,x=((m&4294901760)*m|0)+((m&65535)*m|0);l[p]=y^x}d[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,d[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,d[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,d[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,d[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,d[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,d[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,d[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}r.RabbitLegacy=s._createHelper(c)}(),n.RabbitLegacy})}(g8)),g8.exports}var y8={exports:{}},put=y8.exports,Foe;function mut(){return Foe||(Foe=1,function(e,t){(function(n,r,i){e.exports=r(mi(),Bw(),jw(),Kb(),zu())})(put,function(n){return function(){var r=n,i=r.lib,s=i.BlockCipher,o=r.algo;const a=16,u=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],l=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var c={pbox:[],sbox:[]};function f(g,b){let y=b>>24&255,x=b>>16&255,w=b>>8&255,T=b&255,A=g.sbox[0][y]+g.sbox[1][x];return A=A^g.sbox[2][w],A=A+g.sbox[3][T],A}function d(g,b,y){let x=b,w=y,T;for(let A=0;A<a;++A)x=x^g.pbox[A],w=f(g,x)^w,T=x,x=w,w=T;return T=x,x=w,w=T,w=w^g.pbox[a],x=x^g.pbox[a+1],{left:x,right:w}}function h(g,b,y){let x=b,w=y,T;for(let A=a+1;A>1;--A)x=x^g.pbox[A],w=f(g,x)^w,T=x,x=w,w=T;return T=x,x=w,w=T,w=w^g.pbox[1],x=x^g.pbox[0],{left:x,right:w}}function p(g,b,y){for(let k=0;k<4;k++){g.sbox[k]=[];for(let I=0;I<256;I++)g.sbox[k][I]=l[k][I]}let x=0;for(let k=0;k<a+2;k++)g.pbox[k]=u[k]^b[x],x++,x>=y&&(x=0);let w=0,T=0,A=0;for(let k=0;k<a+2;k+=2)A=d(g,w,T),w=A.left,T=A.right,g.pbox[k]=w,g.pbox[k+1]=T;for(let k=0;k<4;k++)for(let I=0;I<256;I+=2)A=d(g,w,T),w=A.left,T=A.right,g.sbox[k][I]=w,g.sbox[k][I+1]=T;return!0}var m=o.Blowfish=s.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var g=this._keyPriorReset=this._key,b=g.words,y=g.sigBytes/4;p(c,b,y)}},encryptBlock:function(g,b){var y=d(c,g[b],g[b+1]);g[b]=y.left,g[b+1]=y.right},decryptBlock:function(g,b){var y=h(c,g[b],g[b+1]);g[b]=y.left,g[b+1]=y.right},blockSize:64/32,keySize:128/32,ivSize:64/32});r.Blowfish=s._createHelper(m)}(),n.Blowfish})}(y8)),y8.exports}var gut=LP.exports,$oe;function yut(){return $oe||($oe=1,function(e,t){(function(n,r,i){e.exports=r(mi(),X9(),hat(),mat(),Bw(),vat(),jw(),hwe(),UY(),Eat(),pwe(),Cat(),kat(),Iat(),zY(),Dat(),Kb(),zu(),Fat(),Bat(),Uat(),Vat(),qat(),Gat(),Kat(),Qat(),Zat(),tut(),rut(),sut(),aut(),lut(),fut(),hut(),mut())})(gut,function(n){return n})}(LP)),LP.exports}var cz=yut();function o0(e){const t=cz.AES.encrypt(e.toString(),"notSecret").toString();return btoa(t)}function vut(e){const t=cz.AES.decrypt(atob(e),"notSecret").toString(cz.enc.Utf8);return parseInt(t,10)}function Uw(){const{studyId:e}=rg();return`${e}`}function dp(){const{index:e}=rg();return e===void 0?0:e.startsWith("reviewer-")||e.startsWith("__")?e:vut(e)}function F0(){const e=dp(),t=jY();return typeof e=="number"?t[e]:e.replace("reviewer-","")}var k3={exports:{}};k3.exports;var Boe;function but(){return Boe||(Boe=1,function(e,t){var n=200,r="__lodash_hash_undefined__",i=800,s=16,o=9007199254740991,a="[object Arguments]",u="[object Array]",l="[object AsyncFunction]",c="[object Boolean]",f="[object Date]",d="[object Error]",h="[object Function]",p="[object GeneratorFunction]",m="[object Map]",g="[object Number]",b="[object Null]",y="[object Object]",x="[object Proxy]",w="[object RegExp]",T="[object Set]",A="[object String]",k="[object Undefined]",I="[object WeakMap]",O="[object ArrayBuffer]",M="[object DataView]",L="[object Float32Array]",H="[object Float64Array]",D="[object Int8Array]",B="[object Int16Array]",U="[object Int32Array]",G="[object Uint8Array]",ee="[object Uint8ClampedArray]",ne="[object Uint16Array]",ue="[object Uint32Array]",X=/[\\^$.*+?()[\]{}|]/g,q=/^\[object .+?Constructor\]$/,te=/^(?:0|[1-9]\d*)$/,W={};W[L]=W[H]=W[D]=W[B]=W[U]=W[G]=W[ee]=W[ne]=W[ue]=!0,W[a]=W[u]=W[O]=W[c]=W[M]=W[f]=W[d]=W[h]=W[m]=W[g]=W[y]=W[w]=W[T]=W[A]=W[I]=!1;var Z=typeof ya=="object"&&ya&&ya.Object===Object&&ya,oe=typeof self=="object"&&self&&self.Object===Object&&self,pe=Z||oe||Function("return this")(),ce=t&&!t.nodeType&&t,he=ce&&!0&&e&&!e.nodeType&&e,Ee=he&&he.exports===ce,Ae=Ee&&Z.process,ge=function(){try{var Ce=he&&he.require&&he.require("util").types;return Ce||Ae&&Ae.binding&&Ae.binding("util")}catch{}}(),me=ge&&ge.isTypedArray;function Oe(Ce,Ne,rt){switch(rt.length){case 0:return Ce.call(Ne);case 1:return Ce.call(Ne,rt[0]);case 2:return Ce.call(Ne,rt[0],rt[1]);case 3:return Ce.call(Ne,rt[0],rt[1],rt[2])}return Ce.apply(Ne,rt)}function Me(Ce,Ne){for(var rt=-1,hn=Array(Ce);++rt<Ce;)hn[rt]=Ne(rt);return hn}function Ye(Ce){return function(Ne){return Ce(Ne)}}function lt(Ce,Ne){return Ce==null?void 0:Ce[Ne]}function We(Ce,Ne){return function(rt){return Ce(Ne(rt))}}var nt=Array.prototype,yt=Function.prototype,_t=Object.prototype,Rt=pe["__core-js_shared__"],Et=yt.toString,Ke=_t.hasOwnProperty,Lt=function(){var Ce=/[^.]+$/.exec(Rt&&Rt.keys&&Rt.keys.IE_PROTO||"");return Ce?"Symbol(src)_1."+Ce:""}(),sn=_t.toString,Fe=Et.call(Object),Qe=RegExp("^"+Et.call(Ke).replace(X,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),wt=Ee?pe.Buffer:void 0,Vt=pe.Symbol,Wt=pe.Uint8Array;wt&&wt.allocUnsafe;var bn=We(Object.getPrototypeOf,Object),Nn=Object.create,Zn=_t.propertyIsEnumerable,wr=nt.splice,Hn=Vt?Vt.toStringTag:void 0,nr=function(){try{var Ce=Pt(Object,"defineProperty");return Ce({},"",{}),Ce}catch{}}(),Ei=wt?wt.isBuffer:void 0,Dr=Math.max,Co=Date.now,Ji=Pt(pe,"Map"),Di=Pt(Object,"create"),Zi=function(){function Ce(){}return function(Ne){if(!Nl(Ne))return{};if(Nn)return Nn(Ne);Ce.prototype=Ne;var rt=new Ce;return Ce.prototype=void 0,rt}}();function ei(Ce){var Ne=-1,rt=Ce==null?0:Ce.length;for(this.clear();++Ne<rt;){var hn=Ce[Ne];this.set(hn[0],hn[1])}}function po(){this.__data__=Di?Di(null):{},this.size=0}function Wu(Ce){var Ne=this.has(Ce)&&delete this.__data__[Ce];return this.size-=Ne?1:0,Ne}function Ea(Ce){var Ne=this.__data__;if(Di){var rt=Ne[Ce];return rt===r?void 0:rt}return Ke.call(Ne,Ce)?Ne[Ce]:void 0}function Sa(Ce){var Ne=this.__data__;return Di?Ne[Ce]!==void 0:Ke.call(Ne,Ce)}function Kr(Ce,Ne){var rt=this.__data__;return this.size+=this.has(Ce)?0:1,rt[Ce]=Di&&Ne===void 0?r:Ne,this}ei.prototype.clear=po,ei.prototype.delete=Wu,ei.prototype.get=Ea,ei.prototype.has=Sa,ei.prototype.set=Kr;function Oi(Ce){var Ne=-1,rt=Ce==null?0:Ce.length;for(this.clear();++Ne<rt;){var hn=Ce[Ne];this.set(hn[0],hn[1])}}function si(){this.__data__=[],this.size=0}function Js(Ce){var Ne=this.__data__,rt=bc(Ne,Ce);if(rt<0)return!1;var hn=Ne.length-1;return rt==hn?Ne.pop():wr.call(Ne,rt,1),--this.size,!0}function Xr(Ce){var Ne=this.__data__,rt=bc(Ne,Ce);return rt<0?void 0:Ne[rt][1]}function Hi(Ce){return bc(this.__data__,Ce)>-1}function Zs(Ce,Ne){var rt=this.__data__,hn=bc(rt,Ce);return hn<0?(++this.size,rt.push([Ce,Ne])):rt[hn][1]=Ne,this}Oi.prototype.clear=si,Oi.prototype.delete=Js,Oi.prototype.get=Xr,Oi.prototype.has=Hi,Oi.prototype.set=Zs;function mo(Ce){var Ne=-1,rt=Ce==null?0:Ce.length;for(this.clear();++Ne<rt;){var hn=Ce[Ne];this.set(hn[0],hn[1])}}function Qo(){this.size=0,this.__data__={hash:new ei,map:new(Ji||Oi),string:new ei}}function Ta(Ce){var Ne=At(this,Ce).delete(Ce);return this.size-=Ne?1:0,Ne}function dd(Ce){return At(this,Ce).get(Ce)}function Hr(Ce){return At(this,Ce).has(Ce)}function Rl(Ce,Ne){var rt=At(this,Ce),hn=rt.size;return rt.set(Ce,Ne),this.size+=rt.size==hn?0:1,this}mo.prototype.clear=Qo,mo.prototype.delete=Ta,mo.prototype.get=dd,mo.prototype.has=Hr,mo.prototype.set=Rl;function bs(Ce){var Ne=this.__data__=new Oi(Ce);this.size=Ne.size}function Ya(){this.__data__=new Oi,this.size=0}function Jo(Ce){var Ne=this.__data__,rt=Ne.delete(Ce);return this.size=Ne.size,rt}function mh(Ce){return this.__data__.get(Ce)}function hd(Ce){return this.__data__.has(Ce)}function df(Ce,Ne){var rt=this.__data__;if(rt instanceof Oi){var hn=rt.__data__;if(!Ji||hn.length<n-1)return hn.push([Ce,Ne]),this.size=++rt.size,this;rt=this.__data__=new mo(hn)}return rt.set(Ce,Ne),this.size=rt.size,this}bs.prototype.clear=Ya,bs.prototype.delete=Jo,bs.prototype.get=mh,bs.prototype.has=hd,bs.prototype.set=df;function hf(Ce,Ne){var rt=ko(Ce),hn=!rt&&Mi(Ce),ir=!rt&&!hn&&Ca(Ce),Or=!rt&&!hn&&!ir&&md(Ce),gi=rt||hn||ir||Or,dn=gi?Me(Ce.length,String):[],Tr=dn.length;for(var Ir in Ce)gi&&(Ir=="length"||ir&&(Ir=="offset"||Ir=="parent")||Or&&(Ir=="buffer"||Ir=="byteLength"||Ir=="byteOffset")||Zt(Ir,Tr))||dn.push(Ir);return dn}function yc(Ce,Ne,rt){(rt!==void 0&&!eo(Ce[Ne],rt)||rt===void 0&&!(Ne in Ce))&&Er(Ce,Ne,rt)}function vc(Ce,Ne,rt){var hn=Ce[Ne];(!(Ke.call(Ce,Ne)&&eo(hn,rt))||rt===void 0&&!(Ne in Ce))&&Er(Ce,Ne,rt)}function bc(Ce,Ne){for(var rt=Ce.length;rt--;)if(eo(Ce[rt][0],Ne))return rt;return-1}function Er(Ce,Ne,rt){Ne=="__proto__"&&nr?nr(Ce,Ne,{configurable:!0,enumerable:!0,value:rt,writable:!0}):Ce[Ne]=rt}var xc=ht();function xs(Ce){return Ce==null?Ce===void 0?k:b:Hn&&Hn in Object(Ce)?kt(Ce):ls(Ce)}function Ka(Ce){return ks(Ce)&&xs(Ce)==a}function As(Ce){if(!Nl(Ce)||lr(Ce))return!1;var Ne=Aa(Ce)?Qe:q;return Ne.test(pf(Ce))}function Il(Ce){return ks(Ce)&&gp(Ce.length)&&!!W[xs(Ce)]}function _c(Ce){if(!Nl(Ce))return br(Ce);var Ne=_n(Ce),rt=[];for(var hn in Ce)hn=="constructor"&&(Ne||!Ke.call(Ce,hn))||rt.push(hn);return rt}function Zo(Ce,Ne,rt,hn,ir){Ce!==Ne&&xc(Ne,function(Or,gi){if(ir||(ir=new bs),Nl(Or))qi(Ce,Ne,gi,rt,Zo,hn,ir);else{var dn=hn?hn(Pl(Ce,gi),Or,gi+"",Ce,Ne,ir):void 0;dn===void 0&&(dn=Or),yc(Ce,gi,dn)}},Dl)}function qi(Ce,Ne,rt,hn,ir,Or,gi){var dn=Pl(Ce,rt),Tr=Pl(Ne,rt),Ir=gi.get(Tr);if(Ir){yc(Ce,rt,Ir);return}var _s=Or?Or(dn,Tr,rt+"",Ce,Ne,gi):void 0,ta=_s===void 0;if(ta){var Mr=ko(Tr),js=!Mr&&Ca(Tr),Li=!Mr&&!js&&md(Tr);_s=Tr,Mr||js||Li?ko(dn)?_s=dn:cr(dn)?_s=Be(dn):js?(ta=!1,_s=ve(Tr)):Li?(ta=!1,_s=Se(Tr)):_s=[]:Rs(Tr)||Mi(Tr)?(_s=dn,Mi(dn)?_s=wc(dn):(!Nl(dn)||Aa(dn))&&(_s=jt(Tr))):ta=!1}ta&&(gi.set(Tr,_s),ir(_s,Tr,hn,Or,gi),gi.delete(Tr)),yc(Ce,rt,_s)}function ti(Ce,Ne){return pd(Ao(Ce,Ne,Gn),Ce+"")}var rr=nr?function(Ce,Ne){return nr(Ce,"toString",{configurable:!0,enumerable:!1,value:xr(Ne),writable:!0})}:Gn;function ve(Ce,Ne){return Ce.slice()}function Ie(Ce){var Ne=new Ce.constructor(Ce.byteLength);return new Wt(Ne).set(new Wt(Ce)),Ne}function Se(Ce,Ne){var rt=Ie(Ce.buffer);return new Ce.constructor(rt,Ce.byteOffset,Ce.length)}function Be(Ce,Ne){var rt=-1,hn=Ce.length;for(Ne||(Ne=Array(hn));++rt<hn;)Ne[rt]=Ce[rt];return Ne}function Ue(Ce,Ne,rt,hn){var ir=!rt;rt||(rt={});for(var Or=-1,gi=Ne.length;++Or<gi;){var dn=Ne[Or],Tr=void 0;Tr===void 0&&(Tr=Ce[dn]),ir?Er(rt,dn,Tr):vc(rt,dn,Tr)}return rt}function De(Ce){return ti(function(Ne,rt){var hn=-1,ir=rt.length,Or=ir>1?rt[ir-1]:void 0,gi=ir>2?rt[2]:void 0;for(Or=Ce.length>3&&typeof Or=="function"?(ir--,Or):void 0,gi&&qn(rt[0],rt[1],gi)&&(Or=ir<3?void 0:Or,ir=1),Ne=Object(Ne);++hn<ir;){var dn=rt[hn];dn&&Ce(Ne,dn,hn,Or)}return Ne})}function ht(Ce){return function(Ne,rt,hn){for(var ir=-1,Or=Object(Ne),gi=hn(Ne),dn=gi.length;dn--;){var Tr=gi[++ir];if(rt(Or[Tr],Tr,Or)===!1)break}return Ne}}function At(Ce,Ne){var rt=Ce.__data__;return Sn(Ne)?rt[typeof Ne=="string"?"string":"hash"]:rt.map}function Pt(Ce,Ne){var rt=lt(Ce,Ne);return As(rt)?rt:void 0}function kt(Ce){var Ne=Ke.call(Ce,Hn),rt=Ce[Hn];try{Ce[Hn]=void 0;var hn=!0}catch{}var ir=sn.call(Ce);return hn&&(Ne?Ce[Hn]=rt:delete Ce[Hn]),ir}function jt(Ce){return typeof Ce.constructor=="function"&&!_n(Ce)?Zi(bn(Ce)):{}}function Zt(Ce,Ne){var rt=typeof Ce;return Ne=Ne??o,!!Ne&&(rt=="number"||rt!="symbol"&&te.test(Ce))&&Ce>-1&&Ce%1==0&&Ce<Ne}function qn(Ce,Ne,rt){if(!Nl(rt))return!1;var hn=typeof Ne;return(hn=="number"?ea(rt)&&Zt(Ne,rt.length):hn=="string"&&Ne in rt)?eo(rt[Ne],Ce):!1}function Sn(Ce){var Ne=typeof Ce;return Ne=="string"||Ne=="number"||Ne=="symbol"||Ne=="boolean"?Ce!=="__proto__":Ce===null}function lr(Ce){return!!Lt&&Lt in Ce}function _n(Ce){var Ne=Ce&&Ce.constructor,rt=typeof Ne=="function"&&Ne.prototype||_t;return Ce===rt}function br(Ce){var Ne=[];if(Ce!=null)for(var rt in Object(Ce))Ne.push(rt);return Ne}function ls(Ce){return sn.call(Ce)}function Ao(Ce,Ne,rt){return Ne=Dr(Ne===void 0?Ce.length-1:Ne,0),function(){for(var hn=arguments,ir=-1,Or=Dr(hn.length-Ne,0),gi=Array(Or);++ir<Or;)gi[ir]=hn[Ne+ir];ir=-1;for(var dn=Array(Ne+1);++ir<Ne;)dn[ir]=hn[ir];return dn[Ne]=rt(gi),Oe(Ce,this,dn)}}function Pl(Ce,Ne){if(!(Ne==="constructor"&&typeof Ce[Ne]=="function")&&Ne!="__proto__")return Ce[Ne]}var pd=Gu(rr);function Gu(Ce){var Ne=0,rt=0;return function(){var hn=Co(),ir=s-(hn-rt);if(rt=hn,ir>0){if(++Ne>=i)return arguments[0]}else Ne=0;return Ce.apply(void 0,arguments)}}function pf(Ce){if(Ce!=null){try{return Et.call(Ce)}catch{}try{return Ce+""}catch{}}return""}function eo(Ce,Ne){return Ce===Ne||Ce!==Ce&&Ne!==Ne}var Mi=Ka(function(){return arguments}())?Ka:function(Ce){return ks(Ce)&&Ke.call(Ce,"callee")&&!Zn.call(Ce,"callee")},ko=Array.isArray;function ea(Ce){return Ce!=null&&gp(Ce.length)&&!Aa(Ce)}function cr(Ce){return ks(Ce)&&ea(Ce)}var Ca=Ei||Ec;function Aa(Ce){if(!Nl(Ce))return!1;var Ne=xs(Ce);return Ne==h||Ne==p||Ne==l||Ne==x}function gp(Ce){return typeof Ce=="number"&&Ce>-1&&Ce%1==0&&Ce<=o}function Nl(Ce){var Ne=typeof Ce;return Ce!=null&&(Ne=="object"||Ne=="function")}function ks(Ce){return Ce!=null&&typeof Ce=="object"}function Rs(Ce){if(!ks(Ce)||xs(Ce)!=y)return!1;var Ne=bn(Ce);if(Ne===null)return!0;var rt=Ke.call(Ne,"constructor")&&Ne.constructor;return typeof rt=="function"&&rt instanceof rt&&Et.call(rt)==Fe}var md=me?Ye(me):Il;function wc(Ce){return Ue(Ce,Dl(Ce))}function Dl(Ce){return ea(Ce)?hf(Ce):_c(Ce)}var Y0=De(function(Ce,Ne,rt){Zo(Ce,Ne,rt)});function xr(Ce){return function(){return Ce}}function Gn(Ce){return Ce}function Ec(){return!1}e.exports=Y0}(k3,k3.exports)),k3.exports}var xut=but();const VY=hc(xut);function Qy(e){return structuredClone(e)}function HY(){const e=dp(),n=`${F0()}_${e}`;return Ai(i=>i.answers[n])}const mwe=z.createContext(null);function _ut(){const e=z.useContext(mwe);if(!e)throw new Error("useWindowEvents must be used within a WindowEventsProvider");return e}function y1(){return Ai(e=>e.config)}function UT(){const[e]=N1();return!!e.get("participantId")}function joe(e,t,n,r){const i=t.slice(0,t.lastIndexOf("_")),s=Object.entries(r.components).find(([a])=>a===i),o=s?s[1]:null;if(!o)throw new Error(`Component ${i} could not be found in the study components.`);return o.correctAnswer?o.correctAnswer.every(a=>e[a.id]===a.answer):!0}function wut(){const e=dp(),t=jY(),r=`${F0()}_${e}`,i=Ai(L=>L.trialValidation),s=Ai(L=>L.sequence),o=Ai(L=>L.answers),a=Ai(L=>L.modes),u=Ai(L=>L.otherTexts),l=gc(),{saveTrialAnswer:c,setreactiveAnswers:f,setMatrixAnswersRadio:d,setMatrixAnswersCheckbox:h,resetOtherText:p}=Tl(),{storageEngine:m}=Yo(),g=Uw(),b=z.useMemo(()=>a.dataCollectionEnabled,[a]),y=uat(r),x=UT(),w=typeof e!="number"||x||!y,T=HY(),A=M0(),k=y1(),I=z.useMemo(()=>Date.now(),[]),O=_ut(),M=z.useCallback((L=!0)=>{if(typeof e!="number")return;const H=Qy(i[r]),D=Object.values(H).reduce((W,Z)=>Object.hasOwn(Z,"values")?{...W,...Z.values}:W,{});Object.entries(u).forEach(([W,Z])=>{Array.isArray(D[W])&&D[W].includes("__other")&&(D[W]=D[W].filter(oe=>oe!=="__other"),D[W].push(`other:${Z}`)),typeof D[W]=="string"&&D[W]==="__other"&&(D[W]=`other:${Z}`)});const{provenanceGraph:B}=H,U=Date.now(),{incorrectAnswers:G,helpButtonClickedCount:ee}=T,ne=O&&"current"in O&&O.current?O.current.splice(0,O.current.length):[];if(b&&T.endTime===-1){const W={answer:L?D:{},startTime:I,endTime:U,incorrectAnswers:G,provenanceGraph:B,windowEvents:ne,timedOut:!L,helpButtonClickedCount:ee};l(c({identifier:r,...W})),m&&m.saveAnswers({...o,[r]:W}),l(f({})),l(p()),l(h(null)),l(d(null))}let ue=e+1;const X=$Y(s,e),q=X!==null&&X.some(W=>Object.hasOwn(W.currentBlock,"skip")&&W.currentBlock.skip!==void 0),te={...o,[r]:{answer:D,startTime:I,endTime:U,provenanceGraph:B,windowEvents:ne}};q&&[...X.flatMap(Z=>Z.currentBlock.skip?Z.currentBlock.skip.map(oe=>({...oe,firstIndex:Z.firstIndex,lastIndex:Z.lastIndex})):[])].some(Z=>{let oe=!1;const pe=Object.fromEntries(Object.entries(te).filter(([he])=>{const Ee=parseInt(he.slice(he.lastIndexOf("_")+1),10);return Ee>=Z.firstIndex&&Ee<=e})),ce=Z.check!=="block"?Object.entries(pe).filter(([he])=>he.slice(0,he.lastIndexOf("_"))===Z.name):Object.entries(pe);if(ce.length===0)return!1;if(ce.some(([he,Ee])=>!Ee))throw new Error(`There are components with missing response objects for the skip condition: ${JSON.stringify(Z,null,2)}`);if(Z.check==="response"||Z.check==="responses"){const[he,Ee]=ce[0];Z.check==="response"?oe=Z.comparison==="equal"?Z.value===Ee.answer[Z.responseId]:Z.value!==Ee.answer[Z.responseId]:oe=!joe(Ee.answer,he,k.components[he.slice(0,he.lastIndexOf("_"))],k)}else if(Z.check==="block"||Z.check==="repeatedComponent"){if(ce.length<Z.value)return!1;const he=ce.map(([ge,me])=>joe(me.answer,ge,k.components[ge.slice(0,ge.lastIndexOf("_"))],k)),Ee=he.filter(ge=>ge).length,Ae=he.length-Ee;oe=Z.condition==="numCorrect"&&Ee===Z.value||Z.condition==="numIncorrect"&&Ae===Z.value}if(oe){const he=t.indexOf(Z.to),Ee=he===-1?oat(s,Z.to):-1;return ue=he===-1?Ee:he,!0}return!1}),A(`/${g}/${o0(ue)}${window.location.search}`)},[e,i,r,u,T,O,b,s,o,I,A,g,l,c,m,f,p,h,d,k,t]);return{isNextDisabled:w,goToNextStep:M}}function Eut({label:e="Next",disabled:t=!1,onClick:n,configInUse:r}){const{isNextDisabled:i,goToNextStep:s}=wut(),o=y1(),a=M0(),u=z.useCallback(()=>{n&&n(),s()},[s,n]),l=r==null?void 0:r.nextButtonDisableTime,c=(r==null?void 0:r.nextButtonEnableTime)||0,[f,d]=z.useState(void 0);z.useEffect(()=>{let p=0;const m=setInterval(()=>{p+=100,d(p)},100);return()=>{clearInterval(m)}},[]),z.useEffect(()=>{f&&l&&f>=l&&o.uiConfig.timeoutReject&&a("./../__timedOut")},[l,f,a,o.uiConfig.timeoutReject]);const h=z.useMemo(()=>{const p=l&&f?f<=l:!0,m=f?f>=c:!0;return p&&m},[l,c,f]);return z.useEffect(()=>{const p=m=>{m.key==="Enter"&&!t&&!i&&h&&s()};return o.uiConfig.nextOnEnter?(window.addEventListener("keydown",p),()=>{window.removeEventListener("keydown",p)}):()=>{}},[t,i,h,s,o.uiConfig.nextOnEnter]),R.jsxs(R.Fragment,{children:[R.jsx(Bn,{type:"submit",disabled:t||i||!h,onClick:u,children:e}),c>0&&f&&f<c&&R.jsxs(Gy,{mt:"md",title:"Please wait",color:"blue",icon:R.jsx(aG,{}),children:["The next button will be enabled in"," ",Math.ceil((c-f)/1e3)," ","seconds."]}),l&&f&&l-f<1e4&&(l-f>0?R.jsxs(Gy,{mt:"md",title:"Next button disables soon",color:"yellow",icon:R.jsx(uk,{}),children:["The next button disables in"," ",Math.ceil((l-f)/1e3)," ","seconds."]}):!o.uiConfig.timeoutReject&&R.jsxs(Gy,{mt:"md",title:"Next button disabled",color:"red",icon:R.jsx(uk,{}),children:["The next button has timed out and is now disabled.",R.jsx(co,{justify:"right",mt:"sm",children:R.jsx(Bn,{onClick:()=>s(!1),variant:"link",color:"red",children:"Proceed"})})]}))]})}function Sut(e){if(!/^[0-9a-zA-Z-]+$/.test(e))throw new Error(`[@mantine/use-form] Form name "${e}" is invalid, it should contain only letters, numbers and dashes`)}const Tut=typeof window<"u"?z.useLayoutEffect:z.useEffect;function ol(e,t){Tut(()=>{if(e)return window.addEventListener(e,t),()=>window.removeEventListener(e,t)},[e])}function Cut(e,t){e&&Sut(e),ol(`mantine-form:${e}:set-field-value`,n=>t.setFieldValue(n.detail.path,n.detail.value)),ol(`mantine-form:${e}:set-values`,n=>t.setValues(n.detail)),ol(`mantine-form:${e}:set-initial-values`,n=>t.setInitialValues(n.detail)),ol(`mantine-form:${e}:set-errors`,n=>t.setErrors(n.detail)),ol(`mantine-form:${e}:set-field-error`,n=>t.setFieldError(n.detail.path,n.detail.error)),ol(`mantine-form:${e}:clear-field-error`,n=>t.clearFieldError(n.detail)),ol(`mantine-form:${e}:clear-errors`,t.clearErrors),ol(`mantine-form:${e}:reset`,t.reset),ol(`mantine-form:${e}:validate`,t.validate),ol(`mantine-form:${e}:validate-field`,n=>t.validateField(n.detail)),ol(`mantine-form:${e}:reorder-list-item`,n=>t.reorderListItem(n.detail.path,n.detail.payload)),ol(`mantine-form:${e}:remove-list-item`,n=>t.removeListItem(n.detail.path,n.detail.index)),ol(`mantine-form:${e}:insert-list-item`,n=>t.insertListItem(n.detail.path,n.detail.item,n.detail.index)),ol(`mantine-form:${e}:set-dirty`,n=>t.setDirty(n.detail)),ol(`mantine-form:${e}:set-touched`,n=>t.setTouched(n.detail)),ol(`mantine-form:${e}:reset-dirty`,n=>t.resetDirty(n.detail)),ol(`mantine-form:${e}:reset-touched`,t.resetTouched)}function Aut(e){return t=>{if(!t)e(t);else if(typeof t=="function")e(t);else if(typeof t=="object"&&"nativeEvent"in t){const{currentTarget:n}=t;n instanceof HTMLInputElement?n.type==="checkbox"?e(n.checked):e(n.value):(n instanceof HTMLTextAreaElement||n instanceof HTMLSelectElement)&&e(n.value)}else e(t)}}function fz(e){return e===null||typeof e!="object"?{}:Object.keys(e).reduce((t,n)=>{const r=e[n];return r!=null&&r!==!1&&(t[n]=r),t},{})}function kut(e){const[t,n]=z.useState(fz(e)),r=z.useRef(t),i=z.useCallback(u=>{n(l=>{const c=fz(typeof u=="function"?u(l):u);return r.current=c,c})},[]),s=z.useCallback(()=>i({}),[]),o=z.useCallback(u=>{r.current[u]!==void 0&&i(l=>{const c={...l};return delete c[u],c})},[t]),a=z.useCallback((u,l)=>{l==null||l===!1?o(u):r.current[u]!==l&&i(c=>({...c,[u]:l}))},[t]);return{errorsState:t,setErrors:i,clearErrors:s,setFieldError:a,clearFieldError:o}}function dz(e,t){if(t===null||typeof t!="object")return{};const n={...t};return Object.keys(t).forEach(r=>{r.includes(`${String(e)}.`)&&delete n[r]}),n}function Uoe(e,t){const n=e.substring(t.length+1).split(".")[0];return parseInt(n,10)}function zoe(e,t,n,r){if(t===void 0)return n;const i=`${String(e)}`;let s=n;r===-1&&(s=dz(`${i}.${t}`,s));const o={...s},a=new Set;return Object.entries(s).filter(([u])=>{if(!u.startsWith(`${i}.`))return!1;const l=Uoe(u,i);return Number.isNaN(l)?!1:l>=t}).forEach(([u,l])=>{const c=Uoe(u,i),f=u.replace(`${i}.${c}`,`${i}.${c+r}`);o[f]=l,a.add(f),a.has(u)||delete o[u]}),o}function Rut(e,{from:t,to:n},r){const i=`${e}.${t}`,s=`${e}.${n}`,o={...r};return Object.keys(r).every(a=>{let u,l;if(a.startsWith(i)&&(u=a,l=a.replace(i,s)),a.startsWith(s)&&(u=a.replace(s,i),l=a),u&&l){const c=o[u],f=o[l];return f===void 0?delete o[u]:o[u]=f,c===void 0?delete o[l]:o[l]=c,!1}return!0}),o}function Voe(e,t,n){typeof n.value=="object"&&(n.value=AE(n.value)),!n.enumerable||n.get||n.set||!n.configurable||!n.writable||t==="__proto__"?Object.defineProperty(e,t,n):e[t]=n.value}function AE(e){if(typeof e!="object")return e;var t=0,n,r,i,s=Object.prototype.toString.call(e);if(s==="[object Object]"?i=Object.create(e.__proto__||null):s==="[object Array]"?i=Array(e.length):s==="[object Set]"?(i=new Set,e.forEach(function(o){i.add(AE(o))})):s==="[object Map]"?(i=new Map,e.forEach(function(o,a){i.set(AE(a),AE(o))})):s==="[object Date]"?i=new Date(+e):s==="[object RegExp]"?i=new RegExp(e.source,e.flags):s==="[object DataView]"?i=new e.constructor(AE(e.buffer)):s==="[object ArrayBuffer]"?i=e.slice(0):s.slice(-6)==="Array]"&&(i=new e.constructor(e)),i){for(r=Object.getOwnPropertySymbols(e);t<r.length;t++)Voe(i,r[t],Object.getOwnPropertyDescriptor(e,r[t]));for(t=0,r=Object.getOwnPropertyNames(e);t<r.length;t++)Object.hasOwnProperty.call(i,n=r[t])&&i[n]===e[n]||Voe(i,n,Object.getOwnPropertyDescriptor(e,n))}return i||e}function gwe(e){return typeof e!="string"?[]:e.split(".")}function gl(e,t){const n=gwe(e);if(n.length===0||typeof t!="object"||t===null)return;let r=t[n[0]];for(let i=1;i<n.length&&r!=null;i+=1)r=r[n[i]];return r}function DR(e,t,n){const r=gwe(e);if(r.length===0)return n;const i=AE(n);if(r.length===1)return i[r[0]]=t,i;let s=i[r[0]];for(let o=1;o<r.length-1;o+=1){if(s===void 0)return i;s=s[r[o]]}return s[r[r.length-1]]=t,i}function Iut(e,{from:t,to:n},r){const i=gl(e,r);if(!Array.isArray(i))return r;const s=[...i],o=i[t];return s.splice(t,1),s.splice(n,0,o),DR(e,s,r)}function Put(e,t,n,r){const i=gl(e,r);if(!Array.isArray(i))return r;const s=[...i];return s.splice(typeof n=="number"?n:s.length,0,t),DR(e,s,r)}function Nut(e,t,n){const r=gl(e,n);return Array.isArray(r)?DR(e,r.filter((i,s)=>s!==t),n):n}function Dut(e,t,n,r){const i=gl(e,r);if(!Array.isArray(i)||i.length<=n)return r;const s=[...i];return s[n]=t,DR(e,s,r)}function Out({$values:e,$errors:t,$status:n}){const r=z.useCallback((a,u)=>{n.clearFieldDirty(a),t.setErrors(l=>Rut(a,u,l)),e.setValues({values:Iut(a,u,e.refValues.current),updateState:!0})},[]),i=z.useCallback((a,u)=>{n.clearFieldDirty(a),t.setErrors(l=>zoe(a,u,l,-1)),e.setValues({values:Nut(a,u,e.refValues.current),updateState:!0})},[]),s=z.useCallback((a,u,l)=>{n.clearFieldDirty(a),t.setErrors(c=>zoe(a,l,c,1)),e.setValues({values:Put(a,u,l,e.refValues.current),updateState:!0})},[]),o=z.useCallback((a,u,l)=>{n.clearFieldDirty(a),e.setValues({values:Dut(a,l,u,e.refValues.current),updateState:!0})},[]);return{reorderListItem:r,removeListItem:i,insertListItem:s,replaceListItem:o}}var w$,Hoe;function qY(){return Hoe||(Hoe=1,w$=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n}),w$}var Mut=qY();const R3=hc(Mut);function eA(e,t){const n=Object.keys(e);if(typeof t=="string"){const r=n.filter(i=>i.startsWith(`${t}.`));return e[t]||r.some(i=>e[i])||!1}return n.some(r=>e[r])}function Lut({initialDirty:e,initialTouched:t,mode:n,$values:r}){const[i,s]=z.useState(t),[o,a]=z.useState(e),u=z.useRef(t),l=z.useRef(e),c=z.useCallback(A=>{const k=typeof A=="function"?A(u.current):A;u.current=k,n==="controlled"&&s(k)},[]),f=z.useCallback((A,k=!1)=>{const I=typeof A=="function"?A(l.current):A;l.current=I,(n==="controlled"||k)&&a(I)},[]),d=z.useCallback(()=>c({}),[]),h=z.useCallback(A=>{const k=A?{...A,...r.refValues.current}:r.refValues.current;r.setValuesSnapshot(k),f({})},[]),p=z.useCallback((A,k)=>{c(I=>eA(I,A)===k?I:{...I,[A]:k})},[]),m=z.useCallback((A,k,I)=>{f(O=>eA(O,A)===k?O:{...O,[A]:k},I)},[]),g=z.useCallback((A,k)=>{const I=eA(l.current,A),O=!R3(gl(A,r.getValuesSnapshot()),k),M=dz(A,l.current);M[A]=O,f(M,I!==O)},[]),b=z.useCallback(A=>eA(u.current,A),[]),y=z.useCallback(A=>f(k=>{if(typeof A!="string")return k;const I=dz(A,k);return delete I[A],R3(I,k)?k:I}),[]),x=z.useCallback(A=>{if(A){const I=gl(A,l.current);if(typeof I=="boolean")return I;const O=gl(A,r.refValues.current),M=gl(A,r.valuesSnapshot.current);return!R3(O,M)}return Object.keys(l.current).length>0?eA(l.current):!R3(r.refValues.current,r.valuesSnapshot.current)},[]),w=z.useCallback(()=>l.current,[]),T=z.useCallback(()=>u.current,[]);return{touchedState:i,dirtyState:o,touchedRef:u,dirtyRef:l,setTouched:c,setDirty:f,resetDirty:h,resetTouched:d,isTouched:b,setFieldTouched:p,setFieldDirty:m,setTouchedState:s,setDirtyState:a,clearFieldDirty:y,isDirty:x,getDirty:w,getTouched:T,setCalculatedFieldDirty:g}}function Fut({initialValues:e,onValuesChange:t,mode:n}){const r=z.useRef(!1),[i,s]=z.useState(e||{}),o=z.useRef(i),a=z.useRef(i),u=z.useCallback(({values:m,subscribers:g,updateState:b=!0,mergeWithPreviousValues:y=!0})=>{const x=o.current,w=m instanceof Function?m(o.current):m,T=y?{...x,...w}:w;o.current=T,b&&s(T),t==null||t(T,x),g==null||g.filter(Boolean).forEach(A=>A({updatedValues:T,previousValues:x}))},[t]),l=z.useCallback(m=>{var y;const g=gl(m.path,o.current),b=m.value instanceof Function?m.value(g):m.value;if(g!==b){const x=o.current,w=DR(m.path,b,o.current);u({values:w,updateState:m.updateState}),(y=m.subscribers)==null||y.filter(Boolean).forEach(T=>T({path:m.path,updatedValues:w,previousValues:x}))}},[u]),c=z.useCallback(m=>{a.current=m},[]),f=z.useCallback((m,g)=>{r.current||(r.current=!0,u({values:m,updateState:n==="controlled"}),c(m),g())},[u]),d=z.useCallback(()=>{u({values:a.current,updateState:!0,mergeWithPreviousValues:!1})},[u]),h=z.useCallback(()=>o.current,[]),p=z.useCallback(()=>a.current,[]);return{initialized:r,stateValues:i,refValues:o,valuesSnapshot:a,setValues:u,setFieldValue:l,resetValues:d,setValuesSnapshot:c,initialize:f,getValues:h,getValuesSnapshot:p}}function $ut({$status:e}){const t=z.useRef({}),n=z.useCallback((i,s)=>{z.useEffect(()=>(t.current[i]=t.current[i]||[],t.current[i].push(s),()=>{t.current[i]=t.current[i].filter(o=>o!==s)}),[s])},[]),r=z.useCallback(i=>t.current[i]?t.current[i].map(s=>o=>s({previousValue:gl(i,o.previousValues),value:gl(i,o.updatedValues),touched:e.isTouched(i),dirty:e.isDirty(i)})):[],[]);return{subscribers:t,watch:n,getFieldSubscribers:r}}function qoe(e,t){return e?`${e}-${t.toString()}`:t.toString()}function Woe(e){const t=fz(e);return{hasErrors:Object.keys(t).length>0,errors:t}}function hz(e,t,n="",r={}){return typeof e!="object"||e===null?r:Object.keys(e).reduce((i,s)=>{const o=e[s],a=`${n===""?"":`${n}.`}${s}`,u=gl(a,t);let l=!1;return typeof o=="function"&&(i[a]=o(u,t,a)),typeof o=="object"&&Array.isArray(u)&&(l=!0,u.forEach((c,f)=>hz(o,t,`${a}.${f}`,i))),typeof o=="object"&&typeof u=="object"&&u!==null&&(l||hz(o,t,a,i)),i},r)}function pz(e,t){return Woe(typeof e=="function"?e(t):hz(e,t))}function I6(e,t,n){if(typeof e!="string")return{hasError:!1,error:null};const r=pz(t,n),i=Object.keys(r.errors).find(s=>e.split(".").every((o,a)=>o===s.split(".")[a]));return{hasError:!!i,error:i?r.errors[i]:null}}const But="__MANTINE_FORM_INDEX__";function Goe(e,t){return t?typeof t=="boolean"?t:Array.isArray(t)?t.includes(e.replace(/[.][0-9]+/g,`.${But}`)):!1:!1}function ywe({name:e,mode:t="controlled",initialValues:n,initialErrors:r={},initialDirty:i={},initialTouched:s={},clearInputErrorOnChange:o=!0,validateInputOnChange:a=!1,validateInputOnBlur:u=!1,onValuesChange:l,transformValues:c=m=>m,enhanceGetInputProps:f,validate:d,onSubmitPreventDefault:h="always",touchTrigger:p="change"}={}){const m=kut(r),g=Fut({initialValues:n,onValuesChange:l,mode:t}),b=Lut({initialDirty:i,initialTouched:s,$values:g,mode:t}),y=Out({$values:g,$errors:m,$status:b}),x=$ut({$status:b}),[w,T]=z.useState(0),[A,k]=z.useState({}),[I,O]=z.useState(!1),M=z.useCallback(()=>{g.resetValues(),m.clearErrors(),b.resetDirty(),b.resetTouched(),t==="uncontrolled"&&T(oe=>oe+1)},[]),L=z.useCallback(oe=>{o&&m.clearErrors(),t==="uncontrolled"&&T(pe=>pe+1),Object.keys(x.subscribers.current).forEach(pe=>{const ce=gl(pe,g.refValues.current),he=gl(pe,oe);ce!==he&&x.getFieldSubscribers(pe).forEach(Ee=>Ee({previousValues:oe,updatedValues:g.refValues.current}))})},[o]),H=z.useCallback(oe=>{const pe=g.refValues.current;g.initialize(oe,()=>t==="uncontrolled"&&T(ce=>ce+1)),L(pe)},[L]),D=z.useCallback((oe,pe,ce)=>{const he=Goe(oe,a),Ee=pe instanceof Function?pe(gl(oe,g.refValues.current)):pe;b.setCalculatedFieldDirty(oe,Ee),p==="change"&&b.setFieldTouched(oe,!0),!he&&o&&m.clearFieldError(oe),g.setFieldValue({path:oe,value:pe,updateState:t==="controlled",subscribers:[...x.getFieldSubscribers(oe),he?Ae=>{const ge=I6(oe,d,Ae.updatedValues);ge.hasError?m.setFieldError(oe,ge.error):m.clearFieldError(oe)}:null,(ce==null?void 0:ce.forceUpdate)!==!1&&t!=="controlled"?()=>k(Ae=>({...Ae,[oe]:(Ae[oe]||0)+1})):null]})},[l,d]),B=z.useCallback(oe=>{const pe=g.refValues.current;g.setValues({values:oe,updateState:t==="controlled"}),L(pe)},[l,L]),U=z.useCallback(()=>{const oe=pz(d,g.refValues.current);return m.setErrors(oe.errors),oe},[d]),G=z.useCallback(oe=>{const pe=I6(oe,d,g.refValues.current);return pe.hasError?m.setFieldError(oe,pe.error):m.clearFieldError(oe),pe},[d]),ee=(oe,{type:pe="input",withError:ce=!0,withFocus:he=!0,...Ee}={})=>{const ge={onChange:Aut(me=>D(oe,me,{forceUpdate:!1})),"data-path":qoe(e,oe)};return ce&&(ge.error=m.errorsState[oe]),pe==="checkbox"?ge[t==="controlled"?"checked":"defaultChecked"]=gl(oe,g.refValues.current):ge[t==="controlled"?"value":"defaultValue"]=gl(oe,g.refValues.current),he&&(ge.onFocus=()=>b.setFieldTouched(oe,!0),ge.onBlur=()=>{if(Goe(oe,u)){const me=I6(oe,d,g.refValues.current);me.hasError?m.setFieldError(oe,me.error):m.clearFieldError(oe)}}),Object.assign(ge,f==null?void 0:f({inputProps:ge,field:oe,options:{type:pe,withError:ce,withFocus:he,...Ee},form:Z}))},ne=(oe,pe)=>ce=>{h==="always"&&(ce==null||ce.preventDefault());const he=U();if(he.hasErrors)h==="validation-failed"&&(ce==null||ce.preventDefault()),pe==null||pe(he.errors,g.refValues.current,ce);else{const Ee=oe==null?void 0:oe(c(g.refValues.current),ce);Ee instanceof Promise&&(O(!0),Ee.finally(()=>O(!1)))}},ue=oe=>c(oe||g.refValues.current),X=z.useCallback(oe=>{oe.preventDefault(),M()},[]),q=z.useCallback(oe=>oe?!I6(oe,d,g.refValues.current).hasError:!pz(d,g.refValues.current).hasErrors,[d]),te=oe=>`${w}-${oe}-${A[oe]||0}`,W=z.useCallback(oe=>document.querySelector(`[data-path="${qoe(e,oe)}"]`),[]),Z={watch:x.watch,initialized:g.initialized.current,values:g.stateValues,getValues:g.getValues,setInitialValues:g.setValuesSnapshot,initialize:H,setValues:B,setFieldValue:D,submitting:I,setSubmitting:O,errors:m.errorsState,setErrors:m.setErrors,setFieldError:m.setFieldError,clearFieldError:m.clearFieldError,clearErrors:m.clearErrors,resetDirty:b.resetDirty,setTouched:b.setTouched,setDirty:b.setDirty,isTouched:b.isTouched,resetTouched:b.resetTouched,isDirty:b.isDirty,getTouched:b.getTouched,getDirty:b.getDirty,reorderListItem:y.reorderListItem,insertListItem:y.insertListItem,removeListItem:y.removeListItem,replaceListItem:y.replaceListItem,reset:M,validate:U,validateField:G,getInputProps:ee,onSubmit:ne,onReset:X,isValid:q,getTransformedValues:ue,key:te,getInputNode:W};return Cut(e,Z),Z}function jut(e,t){const n=t||!0;return r=>typeof r!="string"?n:e.test(r)?null:n}function Uut(e){return jut(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,e)}function vwe(e,t){if(e.type==="checkbox"){const n=e,r=n.minSelections&&t.length<n.minSelections,i=n.maxSelections&&t.length>n.maxSelections;if(r&&i)return`Please select between ${n.minSelections} and ${n.maxSelections} options`;if(r)return`Please select at least ${n.minSelections} options`;if(i)return`Please select at most ${n.maxSelections} options`}return null}const zut=new URLSearchParams(window.location.search),Vut=(e,t)=>{let n={};return e.forEach(r=>{const i=t[r.id];if(i)n={...n,[r.id]:i};else{let s="";r.paramCapture?s=zut.get(r.paramCapture):r.type==="reactive"?s=[]:(r.type==="matrix-radio"||r.type==="matrix-checkbox")&&(s=Object.fromEntries(r.questionOptions.map(a=>[a,""])));const o=r.withDontKnow?{[`${r.id}-dontKnow`]:""}:{};n={...n,[r.id]:s,...o}}}),{...n}},Hut=e=>{let t={};return e.forEach(n=>{n.required&&(t={...t,[n.id]:(r,i)=>{if(typeof r=="object"&&!Array.isArray(r)&&r!==null)return Object.values(r).every(s=>s!=="")?null:"Empty Input";if(Array.isArray(r)){if(n.requiredValue!=null&&!Array.isArray(n.requiredValue))return"Incorrect required value. Contact study administrator.";if(n.requiredValue!=null&&Array.isArray(n.requiredValue)){if(n.requiredValue.length!==r.length)return"Incorrect input";const s=[...n.requiredValue].sort(),o=[...r].sort();return s.every((a,u)=>a===o[u])?null:"Incorrect input"}return n.type==="checkbox"?vwe(n,r):r.length===0?"Empty input":null}return n.required&&n.requiredValue!=null&&r!=null?r.toString()!==n.requiredValue.toString()?"Incorrect input":null:n.required?(r==null||r==="")&&!i[`${n.id}-dontKnow`]?"Empty input":null:r===null?"Empty input":null}})}),t};function qut(e,t,n){const[r,i]=z.useState(null),s=ywe({initialValues:Vut(e,n),validate:Hut(e)});return z.useEffect(()=>{r!==t&&(i(t),s.reset())},[r,s,t]),s}function zw(e,t,n){var o;const{requiredValue:r,requiredLabel:i}=e;let s="";return t.checked&&Array.isArray(r)?s=r&&[...r].sort().toString()!==[...t.checked].sort().toString()?`Please ${n?"select":"enter"} ${i||r.toString()} to continue.`:null:t.checked&&e.required?s=vwe(e,t.checked):s=t.value&&r&&r.toString()!==t.value.toString()?`Please ${n?"select":"enter"} ${i||(n?(o=n.find(a=>a.value===r))==null?void 0:o.label:r.toString())} to continue.`:null,s}function bwe({horizontal:e,children:t,style:n}){return e?R.jsx(co,{mt:ot(4),gap:"lg",style:n,children:t}):R.jsx(Jf,{gap:"md",style:n,children:t})}function Wut({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:u,horizontal:l,withOther:c}=e,f=a.map(x=>typeof x=="string"?{value:x,label:x}:x),[d,h]=z.useState(!1),[p,m]=z.useState(""),{setOtherText:g}=Tl(),b=gc();z.useEffect(()=>{b(g({key:e.id,value:p}))},[p,e.id,g,b]);const y=z.useMemo(()=>zw(e,n,f),[e,n,f]);return R.jsxs(nc.Group,{label:R.jsxs(An,{direction:"row",wrap:"nowrap",gap:4,children:[i&&R.jsx(He,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),R.jsx(He,{style:{display:"block"},className:"no-last-child-bottom-padding",children:R.jsx(lc,{text:s,required:o})})]}),description:u,...n,error:y,style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:[R.jsx(He,{mt:"xs",children:R.jsxs(bwe,{horizontal:!!l,style:{flexGrow:1},children:[f.map(x=>R.jsx(nc,{disabled:t,value:x.value,label:x.label},x.value)),c&&R.jsx(nc,{disabled:t,value:"__other",checked:d,onClick:x=>h(x.currentTarget.checked),label:l?"Other":R.jsx(ys,{mt:-8,placeholder:"Other",disabled:!d,value:p,onChange:x=>m(x.currentTarget.value)})},"__other")]})}),l&&c&&R.jsx(ys,{mt:"sm",placeholder:"Other",disabled:!d,value:p,onChange:x=>m(x.currentTarget.value),w:216})]})}function Gut({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,options:u,secondaryText:l}=e,c=u.map(f=>typeof f=="string"?{value:f,label:f}:f);return R.jsx(wT,{disabled:t,label:R.jsxs(An,{direction:"row",wrap:"nowrap",gap:4,children:[i&&R.jsx(He,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),R.jsx(He,{style:{display:"block"},className:"no-last-child-bottom-padding",children:R.jsx(lc,{text:o,required:a})})]}),description:l,placeholder:s,data:c,radius:"md",size:"md",...n,error:zw(e,n,c)})}function Yut({response:e,answer:t,index:n,enumerateQuestions:r}){const{prompt:i,required:s,secondaryText:o}=e;return R.jsx(ys.Wrapper,{label:R.jsxs(An,{direction:"row",wrap:"nowrap",gap:4,children:[r&&R.jsx(He,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${n}. `}),R.jsx(He,{style:{display:"block"},className:"no-last-child-bottom-padding",children:R.jsx(lc,{text:i,required:s})})]}),description:o,size:"md",children:t.value&&R.jsx(y0,{children:Array.isArray(t.value)?t.value.map(a=>R.jsx(y0.Item,{children:a},a)):R.jsx(y0.Item,{children:""})})})}function xwe({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i,stretch:s}){const{prompt:o,required:a,options:u,leftLabel:l,rightLabel:c,secondaryText:f,horizontal:d,withOther:h}=e,p=u.map(T=>typeof T=="string"?{value:T,label:T}:T),[m,g]=z.useState(!1),[b,y]=z.useState(""),{setOtherText:x}=Tl(),w=gc();return z.useEffect(()=>{w(x({key:e.id,value:b}))},[b,e.id,x,w]),R.jsxs(Qd.Group,{name:`radioInput${e.id}`,label:R.jsxs(An,{direction:"row",wrap:"nowrap",gap:4,children:[i&&R.jsx(He,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),R.jsx(He,{style:{display:"block"},className:"no-last-child-bottom-padding",children:R.jsx(lc,{text:o,required:a})})]}),description:f,...n,error:zw(e,n,p),style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:[R.jsxs(co,{gap:"lg",align:"flex-end",mt:d?0:"sm",children:[l?R.jsx(Nt,{children:l}):null,R.jsxs(bwe,{horizontal:!!d,style:{flexGrow:1},children:[p.map(T=>R.jsxs("div",{style:{display:"flex",flexDirection:d?"column":"row",gap:d?"unset":ot(12),flex:s?1:"unset",alignItems:"center"},children:[d&&R.jsx(Nt,{size:"sm",children:T.label}),R.jsx(Qd,{disabled:t,value:T.value,label:T.label,styles:{label:{display:"none"}},onChange:()=>g(!1)}),!d&&R.jsx(Nt,{size:"sm",children:T.label})]},`${T.value}-${e.id}`)),h&&R.jsxs("div",{style:{display:"flex",flexDirection:d?"column":"row",gap:d?"unset":ot(12),flex:s?1:"unset",alignItems:"center"},children:[d&&R.jsx(Nt,{size:"sm",children:"Other"}),R.jsx(Qd,{disabled:t,value:"other",checked:m,onClick:T=>g(T.currentTarget.checked),label:!d&&R.jsx(ys,{mt:-8,placeholder:"Other",disabled:!m,value:b,onChange:T=>y(T.currentTarget.value)}),mt:0})]})]}),R.jsx(Nt,{children:c})]}),d&&h&&R.jsx(ys,{mt:"sm",placeholder:"Other",disabled:!m,value:b,onChange:T=>y(T.currentTarget.value),w:216})]},e.id)}function Kut({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{numItems:s}=e,o=[];for(let u=1;u<=+s;u+=1)o.push({label:`${u}`,value:`${u}`});const a={...e,type:"radio",options:o,horizontal:!0};return R.jsx(xwe,{disabled:t,response:a,answer:n,index:r,enumerateQuestions:i,stretch:!0})}function Xut({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,min:a,max:u,placeholder:l,secondaryText:c}=e;return R.jsx(NW,{disabled:t,placeholder:l,label:R.jsxs(An,{direction:"row",wrap:"nowrap",gap:4,children:[i&&R.jsx(He,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),R.jsx(He,{style:{display:"block"},className:"no-last-child-bottom-padding",children:R.jsx(lc,{text:s,required:o})})]}),description:c,radius:"md",size:"md",min:a,max:u,...n,error:zw(e,n)})}const Qut="_markLabel_17u7l_1",Jut={markLabel:Qut};function Zut({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:u}=e,[l,c]=z.useMemo(()=>[Math.min(...a.map(d=>d.value)),Math.max(...a.map(d=>d.value))],[a]),f=zw(e,n);return R.jsx(ys.Wrapper,{label:R.jsxs(An,{direction:"row",wrap:"nowrap",gap:4,children:[i&&R.jsx(He,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),R.jsx(He,{style:{display:"block"},className:"no-last-child-bottom-padding",children:R.jsx(lc,{text:s,required:o})})]}),description:u,error:f,style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:R.jsx(jW,{disabled:t,marks:a,min:l,max:c,...n,h:40,mt:4,classNames:{markLabel:Jut.markLabel}})})}function elt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:u}=e;return R.jsx(Ly,{disabled:t,placeholder:s,label:R.jsxs(An,{direction:"row",wrap:"nowrap",gap:4,children:[i&&R.jsx(He,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),R.jsx(He,{style:{display:"block"},className:"no-last-child-bottom-padding",children:R.jsx(lc,{text:o,required:a})})]}),description:u,radius:"md",size:"md",...n,value:n.value||"",error:zw(e,n)})}function tlt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:u}=e;return R.jsx(bW,{disabled:t,placeholder:s,label:R.jsxs(An,{direction:"row",wrap:"nowrap",gap:4,children:[i&&R.jsx(He,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),R.jsx(He,{style:{display:"block"},className:"no-last-child-bottom-padding",children:R.jsx(lc,{text:o,required:a})})]}),description:u,radius:"md",size:"md",...n,value:n.value||"",error:zw(e,n)})}function nlt({_choices:e,_n:t,idx:n,question:r,answer:i,onChange:s,disabled:o}){return R.jsx("div",{style:{flex:1,display:"grid",gridTemplateColumns:`repeat(${t}, 1fr)`,justifyItems:"center"},children:e.map(a=>R.jsx(nc,{disabled:o,checked:i.value[r.label].split("|").includes(a.value),onChange:u=>s(u,r.label,a),value:a.value},`${a.label}-${n}`))})}function rlt({_choices:e,_n:t,idx:n,question:r,response:i,answer:s,onChange:o,disabled:a}){return R.jsx(Qd.Group,{name:`radioInput${i.id}-${n}`,style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))",flex:1},onChange:u=>o(u,r.label),value:s.value[r.label],children:R.jsx("div",{style:{flex:1,display:"grid",gridTemplateColumns:`repeat(${t}, 1fr)`,justifyItems:"center"},children:e.map(u=>R.jsx(Qd,{disabled:a,value:u.value},`${u.label}-${n}`))})},`${i.id}-${n}`)}function ilt({response:e,answer:t,index:n,disabled:r,enumerateQuestions:i}){const{setMatrixAnswersRadio:s,setMatrixAnswersCheckbox:o}=Tl(),a=gc(),{answerOptions:u,questionOptions:l,prompt:c,secondaryText:f,required:d}=e,p=typeof u=="string"?{likely5:["Highly Unlikely","Unlikely","Neutral","Likely","Highly Likely"],likely7:["Highly Unlikely","Unlikely","Slightly Unlikely","Neutral","Slightly Likely","Likely","Highly Likely"],satisfaction5:["Highly Unsatisfied","Unsatisfied","Neutral","Satisfied","Highly Satisfied"],satisfaction7:["Highly Unsatisfied","Unsatisfied","Slightly Unsatisfied","Neutral","Slightly Satisfied","Satisfied","Highly Satisfied"]}[u].map(w=>({value:w,label:w})):u.map(w=>typeof w=="string"?{value:w,label:w}:w),m=l.map(w=>typeof w=="string"?{value:w,label:w}:w),g=(w,T)=>{const A={type:"radio",questionKey:T,val:w,responseId:e.id};a(s(A))},b=(w,T,A)=>{const k=w.target.checked,I={questionKey:T,responseId:e.id,value:A.value,label:A.label,isChecked:k,choiceOptions:p};a(o(I))},y=p.length,x=m.length;return R.jsxs(R.Fragment,{children:[R.jsxs(An,{direction:"row",wrap:"nowrap",gap:4,children:[i&&R.jsx(He,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${n}. `}),R.jsx(He,{style:{display:"block"},className:"no-last-child-bottom-padding",children:R.jsx(lc,{text:c,required:d})})]}),R.jsx(Nt,{c:"dimmed",size:"sm",mt:0,children:f}),R.jsxs(He,{style:{display:"grid",gridTemplateColumns:"auto 1fr",gridTemplateRows:"auto 1fr"},m:"md",mt:"xs",children:[R.jsx("div",{style:{borderBottom:"1px solid var(--mantine-color-dark-0)",borderRight:"1px solid var(--mantine-color-dark-0)"}}),R.jsx("div",{style:{height:"100%",display:"grid",gridTemplateColumns:`repeat(${y}, 1fr)`,alignItems:"center",justifyItems:"center",borderBottom:"1px solid var(--mantine-color-dark-0)"},children:p.map((w,T)=>R.jsx(Nt,{style:{fontWeight:"bold",textAlign:"center",fontSize:"0.8em"},mb:"sm",ml:"xs",mr:"xs",children:w.label},`choice-${T}-label`))}),R.jsx("div",{style:{height:"100%",display:"grid",gridTemplateRows:`repeat(${x}, 1fr)`},children:m.map((w,T)=>R.jsx(Nt,{style:{height:"80px",width:"100%",display:"flex",alignItems:"center",justifyContent:"end",borderRight:"1px solid var(--mantine-color-dark-0)",backgroundColor:`${(T+1)%2===0?"var(--mantine-color-gray-2)":"white"}`,overflowY:"hidden"},ta:"right",p:"sm",miw:140,children:w.label},`question-${T}-label`))}),R.jsx("div",{style:{height:"100%",display:"grid",gridTemplateRows:`repeat(${x},1fr)`},children:m.map((w,T)=>R.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",backgroundColor:`${(T+1)%2===0?"var(--mantine-color-gray-2)":"white"}`},children:e.type==="matrix-radio"?R.jsx(rlt,{disabled:r,idx:T,question:w,answer:t,_choices:p,_n:y,onChange:g,response:e}):R.jsx(nlt,{disabled:r,idx:T,question:w,answer:t,_choices:p,_n:y,onChange:b})},`question-${T}`))})]})]})}function slt({response:e,answer:t,storedAnswer:n,index:r,configInUse:i,form:s}){const o=(Object.keys(n||{}).length>0?{value:n[e.id]}:t)||{value:void 0},a=Object.keys(n||{}).length>0,[u]=N1(),c=y1().uiConfig.enumerateQuestions??!1,f=z.useMemo(()=>{if(e.paramCapture){const p=u.get(e.paramCapture);return a||!!p}return a},[a,e.paramCapture,u]),[d,h]=z.useState(!!(n!=null&&n[`${e.id}-dontKnow`])||!1);return z.useEffect(()=>{s.setFieldValue(`${e.id}-dontKnow`,d.toString()),d||s.setFieldValue(e.id,"false")},[d,e.id]),R.jsxs(He,{mb:e.withDivider||i.responseDividers?"xl":"lg",children:[e.type==="numerical"&&R.jsx(Xut,{response:e,disabled:f||d,answer:o,index:r,enumerateQuestions:c}),e.type==="shortText"&&R.jsx(elt,{response:e,disabled:f||d,answer:o,index:r,enumerateQuestions:c}),e.type==="longText"&&R.jsx(tlt,{response:e,disabled:f||d,answer:o,index:r,enumerateQuestions:c}),e.type==="likert"&&R.jsx(Kut,{response:e,disabled:f||d,answer:o,index:r,enumerateQuestions:c}),e.type==="dropdown"&&R.jsx(Gut,{response:e,disabled:f||d,answer:o,index:r,enumerateQuestions:c}),e.type==="slider"&&R.jsx(Zut,{response:e,disabled:f||d,answer:o,index:r,enumerateQuestions:c}),e.type==="radio"&&R.jsx(xwe,{response:e,disabled:f||d,answer:o,index:r,enumerateQuestions:c}),e.type==="checkbox"&&R.jsx(Wut,{response:e,disabled:f||d,answer:o,index:r,enumerateQuestions:c}),e.type==="reactive"&&R.jsx(Yut,{response:e,answer:o,index:r,enumerateQuestions:c}),(e.type==="matrix-radio"||e.type==="matrix-checkbox")&&R.jsx(ilt,{disabled:f||d,response:e,answer:o,index:r,enumerateQuestions:c}),e.withDontKnow&&R.jsx(nc,{mt:"xs",disabled:f,label:"I don't know",checked:d,onChange:p=>h(p.currentTarget.checked)}),(e.withDivider||i.responseDividers)&&R.jsx(jm,{mt:"xl",mb:"xs"})]})}function LN({config:e,location:t,status:n,style:r}){var X;const{storageEngine:i}=Yo(),s=gc(),{updateResponseBlockValidation:o,toggleShowHelpText:a,saveIncorrectAnswer:u,incrementHelpCounter:l}=Tl(),c=dp(),f=F0(),d=n==null?void 0:n.answer,h=Uw(),p=M0(),m=e,g=z.useMemo(()=>{var q;return((q=m==null?void 0:m.response)==null?void 0:q.filter(te=>te.location?te.location===t:t==="belowStimulus"))||[]},[m==null?void 0:m.response,t]),b=z.useMemo(()=>g.map(q=>({...q,required:q.required===void 0?!0:q.required})),[g]),y=qut(b,c,d||{}),[x,w]=z.useState(void 0),T=Ai(q=>q.reactiveAnswers),A=Ai(q=>q.reactiveProvenance),k=Ai(q=>q.matrixAnswers),I=(m==null?void 0:m.provideFeedback)&&(((X=m==null?void 0:m.correctAnswer)==null?void 0:X.length)||0)>0,O=(m==null?void 0:m.allowFailedTraining)===void 0?!0:m.allowFailedTraining,[M,L]=z.useState(0),H=(m==null?void 0:m.trainingAttempts)||2,[D,B]=z.useState(!1),U=t===((m==null?void 0:m.nextButtonLocation)||"belowStimulus");z.useEffect(()=>{const q=b.find(te=>te.type==="reactive");if(T&&q){const te=q.id;y.setValues({...y.values,[te]:T[te]})}},[T]),z.useEffect(()=>{A&&w(A)},[A]),z.useEffect(()=>{const q=b.filter(te=>te.type==="matrix-radio"||te.type==="matrix-checkbox");if(k&&q.length>0){const te={...y.values};q.forEach(W=>{const{id:Z}=W;te[Z]={...y.getInputProps(Z).value,...k[Z]}}),y.setValues(te)}},[k]),z.useEffect(()=>{s(o({location:t,identifier:`${f}_${c}`,status:y.isValid(),values:Qy(y.values),provenanceGraph:x}))},[y.values,f,c,t,s,o,x]);const[G,ee]=z.useState(Object.fromEntries(b.map(q=>[q.id,{visible:!1,title:"Correct Answer",message:"The correct answer is: ",color:"green"}]))),ne=(q,te,W,Z,oe)=>{ee(pe=>({...pe,[q]:{visible:te,title:W,message:Z,color:oe}}))},ue=()=>{const q=M+1;L(q);const te=Object.fromEntries(b.map(W=>{var pe,ce;const Z=(ce=(pe=m.correctAnswer)==null?void 0:pe.find(he=>he.id===W.id))==null?void 0:ce.answer,oe=y.values[W.id];return[W.id,Array.isArray(oe)?typeof Z=="string"?oe.length===1&&Z===oe[0]:oe.length===Z.length&&oe.every(he=>Z.includes(he)):Z===oe]}));I&&(b.forEach(W=>{var Z;if(te[W.id]&&!((Z=G[W.id])!=null&&Z.message.includes("You've failed to answer this question correctly")))ne(W.id,!0,"Correct Answer","You have answered the question correctly.","green");else{s(u({question:`${f}_${c}`,identifier:W.id,answer:y.values[W.id]}));let oe="";H===-1?oe="Please try again.":q>=H?(oe=`You didn't answer this question correctly after ${H} attempts. ${O?"You can continue to the next question.":"Unfortunately you have not met the criteria for continuing this study."}`,!O&&i&&i.rejectCurrentParticipant(h,"Failed training").then(()=>{setTimeout(()=>{p("./../__trainingFailed")},5e3)}).catch(()=>{console.error("Failed to reject participant who failed training"),setTimeout(()=>{p("./../__trainingFailed")},5e3)})):H-q===1?oe="Please try again. You have 1 attempt left.":oe=`Please try again. You have ${H-q} attempts left.`,ne(W.id,!0,"Incorrect Answer",oe,"red")}}),B(O&&q>=H||Object.values(te).every(W=>W)&&q<=H))};return R.jsxs("div",{style:r,children:[b.map((q,te)=>{var Z,oe;const W=(oe=(Z=m.correctAnswer)==null?void 0:Z.find(pe=>pe.id===q.id))==null?void 0:oe.answer;return R.jsx(sr.Fragment,{children:q.hidden?"":R.jsxs(R.Fragment,{children:[R.jsx(slt,{storedAnswer:d,answer:{...y.getInputProps(q.id,{type:q.type==="checkbox"?"checkbox":"input"})},response:q,index:te+1,configInUse:m,form:y}),G[q.id].visible&&R.jsxs(Gy,{mb:"md",title:G[q.id].title,color:G[q.id].color,children:[G[q.id].message," ",G[q.id].message.includes("Please try again")&&R.jsxs(R.Fragment,{children:[R.jsx("br",{}),R.jsx("br",{}),"If you're unsure"," ",R.jsx(kw,{style:{fontSize:14},onClick:()=>{s(a()),s(l({identifier:`${f}_${c}`}))},children:"review the help text."})," "]}),R.jsx("br",{}),R.jsx("br",{}),M>=H&&H>=0&&W&&` The correct answer was: ${W}.`]})]})},`${q.id}-${c}`)}),R.jsxs(co,{justify:"right",gap:"xs",children:[I&&U&&R.jsx(Bn,{onClick:()=>ue(),disabled:!y.isValid()||M>=H&&H>=0,children:"Check Answer"}),U&&R.jsx(Eut,{disabled:I&&!D||!y.isValid(),label:m.nextButtonText||"Next",configInUse:m})]})]})}const tA="@REVISIT_COMMS",olt={minHeight:"500px",width:"100%",border:0};function alt({currentConfig:e}){const{setreactiveAnswers:t,setreactiveProvenance:n}=Tl(),r=gc(),i=Y_e(),s=z.useRef(null),o=z.useMemo(()=>crypto.randomUUID?crypto.randomUUID():`testID-${Date.now()}`,[]),a=F0(),u=z.useCallback((l,c)=>{var f,d;(d=(f=s.current)==null?void 0:f.contentWindow)==null||d.postMessage({error:!1,type:`${tA}/${l}`,iframeId:o,message:c},"*")},[s,o]);return z.useEffect(()=>{const l=c=>{const{data:f}=c;if(typeof f=="object"&&o===f.iframeId)switch(f.type){case`${tA}/WINDOW_READY`:e.parameters&&u("STUDY_DATA",e.parameters);break;case`${tA}/READY`:s.current&&(s.current.style.height=`${f.message.documentHeight}px`);break;case`${tA}/ANSWERS`:r(t(f.message));break;case`${tA}/PROVENANCE`:r(n(f.message));break}};return window.addEventListener("message",l),()=>window.removeEventListener("message",l)},[r,i,o,e,u,t,n]),R.jsx("iframe",{ref:s,src:e.path.startsWith("http")?e.path:`${ju}${e.path}?trialid=${a}&id=${o}`,style:olt})}async function WY(e){const n=await(await fetch(`${ju}${e}`)).text();if(!n.includes("<title>reVISit</title>"))return n}async function ult(e){const t=await fetch(`${ju}${e}`);let n;try{n=await t.json()}catch(r){console.error("Invalid JSON:",r)}return n}function gb({email:e,path:t}){const n=cp();return R.jsxs(l1,{fluid:!0,my:50,maw:800,mx:"auto",children:[R.jsx(wo,{order:2,children:R.jsx(Nt,{span:!0,c:"orange",children:"404"})}),R.jsxs(Nt,{children:[R.jsx(Nt,{span:!0,fw:700,children:t||n.pathname})," ","not Found."]}),R.jsx(Jd,{h:"lg"}),R.jsxs(y0,{children:[R.jsx(y0.Item,{children:R.jsx(Nt,{children:"If you're trying to access your study please check the URL and verify that the global config file is correctly configured. Then try again."})}),R.jsx(y0.Item,{children:R.jsxs(Nt,{children:["If you're a participant, please contact the study administrator"," ",e&&R.jsxs(R.Fragment,{children:["at"," ",R.jsxs(kw,{c:"blue",href:`mailto:${e}`,children:[e," "]})]}),"."]})})]})]})}const llt={maxWidth:"100%"};function clt({currentConfig:e}){const t={...llt,...e.style},[n,r]=z.useState(!0),[i,s]=z.useState(!1);return z.useEffect(()=>{async function o(){const a=await WY(e.path);s(!!a),r(!1)}o()},[e]),n||i?R.jsx(Hb,{mx:"auto",src:`${ju}${e.path}`,style:t}):R.jsx(gb,{path:e.path})}function Jy(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function flt(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function zT(e){let t,n,r;e.length!==2?(t=Jy,n=(a,u)=>Jy(e(a),u),r=(a,u)=>e(a)-u):(t=e===Jy||e===flt?e:dlt,n=e,r=e);function i(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<0?l=f+1:c=f}while(l<c)}return l}function s(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function o(a,u,l=0,c=a.length){const f=i(a,u,l,c-1);return f>l&&r(a[f-1],u)>-r(a[f],u)?f-1:f}return{left:i,center:o,right:s}}function dlt(){return 0}function _we(e){return e===null?NaN:+e}function*hlt(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const wwe=zT(Jy),yb=wwe.right,plt=wwe.left;zT(_we).center;function mlt(e,t){let n=0,r,i=0,s=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,s+=r*(o-i));else{let o=-1;for(let a of e)(a=t(a,++o,e))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,s+=r*(a-i))}if(n>1)return s/(n-1)}function glt(e,t){const n=mlt(e,t);return n&&Math.sqrt(n)}function ylt(e,t){let n,r;for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));return[n,r]}class rf{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],o=t+s,a=Math.abs(t)<Math.abs(s)?t-(o-s):s-(o-t);a&&(n[r++]=a),t=o}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,s,o=0;if(n>0){for(o=t[--n];n>0&&(r=o,i=t[--n],o=r+i,s=i-(o-r),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(i=s*2,r=o+i,i==r-o&&(o=r))}return o}}class Yoe extends Map{constructor(t,n=Twe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(mz(this,t))}has(t){return super.has(mz(this,t))}set(t,n){return super.set(Ewe(this,t),n)}delete(t){return super.delete(Swe(this,t))}}class FN extends Set{constructor(t,n=Twe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(mz(this,t))}add(t){return super.add(Ewe(this,t))}delete(t){return super.delete(Swe(this,t))}}function mz({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function Ewe({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function Swe({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function Twe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function vlt(e,t){return Array.from(t,n=>e[n])}function blt(e=Jy){if(e===Jy)return Cwe;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function Cwe(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const xlt=Math.sqrt(50),_lt=Math.sqrt(10),wlt=Math.sqrt(2);function $N(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=xlt?10:s>=_lt?5:s>=wlt?2:1;let a,u,l;return i<0?(l=Math.pow(10,-i)/o,a=Math.round(e*l),u=Math.round(t*l),a/l<e&&++a,u/l>t&&--u,l=-l):(l=Math.pow(10,i)*o,a=Math.round(e/l),u=Math.round(t/l),a*l<e&&++a,u*l>t&&--u),u<a&&.5<=n&&n<2?$N(e,t,n*2):[a,u,l]}function gz(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,o]=r?$N(t,e,n):$N(e,t,n);if(!(s>=i))return[];const a=s-i+1,u=new Array(a);if(r)if(o<0)for(let l=0;l<a;++l)u[l]=(s-l)/-o;else for(let l=0;l<a;++l)u[l]=(s-l)*o;else if(o<0)for(let l=0;l<a;++l)u[l]=(i+l)/-o;else for(let l=0;l<a;++l)u[l]=(i+l)*o;return u}function yz(e,t,n){return t=+t,e=+e,n=+n,$N(e,t,n)[2]}function vb(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?yz(t,e,n):yz(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function N_(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function vz(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function Awe(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?Cwe:blt(i);r>n;){if(r-n>600){const u=r-n+1,l=t-n+1,c=Math.log(u),f=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*f*(u-f)/u)*(l-u/2<0?-1:1),h=Math.max(n,Math.floor(t-l*f/u+d)),p=Math.min(r,Math.floor(t+(u-l)*f/u+d));Awe(e,t,h,p,i)}const s=e[t];let o=n,a=r;for(nA(e,n,t),i(e[r],s)>0&&nA(e,n,r);o<a;){for(nA(e,o,a),++o,--a;i(e[o],s)<0;)++o;for(;i(e[a],s)>0;)--a}i(e[n],s)===0?nA(e,n,a):(++a,nA(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function nA(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function bz(e,t,n){if(e=Float64Array.from(hlt(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return vz(e);if(t>=1)return N_(e);var r,i=(r-1)*t,s=Math.floor(i),o=N_(Awe(e,s).subarray(0,s+1)),a=vz(e.subarray(s+1));return o+(a-o)*(i-s)}}function kwe(e,t,n=_we){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),o=+n(e[s],s,e),a=+n(e[s+1],s+1,e);return o+(a-o)*(i-s)}}function Elt(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(s=+s)>=s&&(++n,r+=s)}if(n)return r/n}function Rwe(e,t){return bz(e,.5,t)}function*Slt(e){for(const t of e)yield*t}function Iwe(e){return Array.from(Slt(e))}function Gd(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function Pwe(e,t){let n=0;for(let r of e)(r=+r)&&(n+=r);return n}function Tlt(e,...t){e=new FN(e),t=t.map(Clt);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function Clt(e){return e instanceof FN?e:new FN(e)}function Alt(...e){const t=new FN;for(const n of e)for(const r of n)t.add(r);return t}var klt={value:()=>{}};function GY(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new v8(n)}function v8(e){this._=e}function Rlt(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}v8.prototype=GY.prototype={constructor:v8,on:function(e,t){var n=this._,r=Rlt(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=Ilt(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=Koe(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Koe(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new v8(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function Ilt(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function Koe(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=klt,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var xz="http://www.w3.org/1999/xhtml";const Xoe={svg:"http://www.w3.org/2000/svg",xhtml:xz,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Q9(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Xoe.hasOwnProperty(t)?{space:Xoe[t],local:e}:e}function Plt(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===xz&&t.documentElement.namespaceURI===xz?t.createElement(e):t.createElementNS(n,e)}}function Nlt(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Nwe(e){var t=Q9(e);return(t.local?Nlt:Plt)(t)}function Dlt(){}function YY(e){return e==null?Dlt:function(){return this.querySelector(e)}}function Olt(e){typeof e!="function"&&(e=YY(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=new Array(o),u,l,c=0;c<o;++c)(u=s[c])&&(l=e.call(u,u.__data__,c,s))&&("__data__"in u&&(l.__data__=u.__data__),a[c]=l);return new ah(r,this._parents)}function Mlt(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Llt(){return[]}function Dwe(e){return e==null?Llt:function(){return this.querySelectorAll(e)}}function Flt(e){return function(){return Mlt(e.apply(this,arguments))}}function $lt(e){typeof e=="function"?e=Flt(e):e=Dwe(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&(r.push(e.call(u,u.__data__,l,o)),i.push(u));return new ah(r,i)}function Owe(e){return function(){return this.matches(e)}}function Mwe(e){return function(t){return t.matches(e)}}var Blt=Array.prototype.find;function jlt(e){return function(){return Blt.call(this.children,e)}}function Ult(){return this.firstElementChild}function zlt(e){return this.select(e==null?Ult:jlt(typeof e=="function"?e:Mwe(e)))}var Vlt=Array.prototype.filter;function Hlt(){return Array.from(this.children)}function qlt(e){return function(){return Vlt.call(this.children,e)}}function Wlt(e){return this.selectAll(e==null?Hlt:qlt(typeof e=="function"?e:Mwe(e)))}function Glt(e){typeof e!="function"&&(e=Owe(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new ah(r,this._parents)}function Lwe(e){return new Array(e.length)}function Ylt(){return new ah(this._enter||this._groups.map(Lwe),this._parents)}function BN(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}BN.prototype={constructor:BN,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Klt(e){return function(){return e}}function Xlt(e,t,n,r,i,s){for(var o=0,a,u=t.length,l=s.length;o<l;++o)(a=t[o])?(a.__data__=s[o],r[o]=a):n[o]=new BN(e,s[o]);for(;o<u;++o)(a=t[o])&&(i[o]=a)}function Qlt(e,t,n,r,i,s,o){var a,u,l=new Map,c=t.length,f=s.length,d=new Array(c),h;for(a=0;a<c;++a)(u=t[a])&&(d[a]=h=o.call(u,u.__data__,a,t)+"",l.has(h)?i[a]=u:l.set(h,u));for(a=0;a<f;++a)h=o.call(e,s[a],a,s)+"",(u=l.get(h))?(r[a]=u,u.__data__=s[a],l.delete(h)):n[a]=new BN(e,s[a]);for(a=0;a<c;++a)(u=t[a])&&l.get(d[a])===u&&(i[a]=u)}function Jlt(e){return e.__data__}function Zlt(e,t){if(!arguments.length)return Array.from(this,Jlt);var n=t?Qlt:Xlt,r=this._parents,i=this._groups;typeof e!="function"&&(e=Klt(e));for(var s=i.length,o=new Array(s),a=new Array(s),u=new Array(s),l=0;l<s;++l){var c=r[l],f=i[l],d=f.length,h=ect(e.call(c,c&&c.__data__,l,r)),p=h.length,m=a[l]=new Array(p),g=o[l]=new Array(p),b=u[l]=new Array(d);n(c,f,m,g,b,h,t);for(var y=0,x=0,w,T;y<p;++y)if(w=m[y]){for(y>=x&&(x=y+1);!(T=g[x])&&++x<p;);w._next=T||null}}return o=new ah(o,r),o._enter=a,o._exit=u,o}function ect(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function tct(){return new ah(this._exit||this._groups.map(Lwe),this._parents)}function nct(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function rct(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),u=0;u<o;++u)for(var l=n[u],c=r[u],f=l.length,d=a[u]=new Array(f),h,p=0;p<f;++p)(h=l[p]||c[p])&&(d[p]=h);for(;u<i;++u)a[u]=n[u];return new ah(a,this._parents)}function ict(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function sct(e){e||(e=oct);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,u=i[s]=new Array(a),l,c=0;c<a;++c)(l=o[c])&&(u[c]=l);u.sort(t)}return new ah(i,this._parents).order()}function oct(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function act(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function uct(){return Array.from(this)}function lct(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function cct(){let e=0;for(const t of this)++e;return e}function fct(){return!this.node()}function dct(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&e.call(a,a.__data__,s,i);return this}function hct(e){return function(){this.removeAttribute(e)}}function pct(e){return function(){this.removeAttributeNS(e.space,e.local)}}function mct(e,t){return function(){this.setAttribute(e,t)}}function gct(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function yct(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function vct(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function bct(e,t){var n=Q9(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?pct:hct:typeof t=="function"?n.local?vct:yct:n.local?gct:mct)(n,t))}function Fwe(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function xct(e){return function(){this.style.removeProperty(e)}}function _ct(e,t,n){return function(){this.style.setProperty(e,t,n)}}function wct(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Ect(e,t,n){return arguments.length>1?this.each((t==null?xct:typeof t=="function"?wct:_ct)(e,t,n??"")):ES(this.node(),e)}function ES(e,t){return e.style.getPropertyValue(t)||Fwe(e).getComputedStyle(e,null).getPropertyValue(t)}function Sct(e){return function(){delete this[e]}}function Tct(e,t){return function(){this[e]=t}}function Cct(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Act(e,t){return arguments.length>1?this.each((t==null?Sct:typeof t=="function"?Cct:Tct)(e,t)):this.node()[e]}function $we(e){return e.trim().split(/^|\s+/)}function KY(e){return e.classList||new Bwe(e)}function Bwe(e){this._node=e,this._names=$we(e.getAttribute("class")||"")}Bwe.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function jwe(e,t){for(var n=KY(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function Uwe(e,t){for(var n=KY(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function kct(e){return function(){jwe(this,e)}}function Rct(e){return function(){Uwe(this,e)}}function Ict(e,t){return function(){(t.apply(this,arguments)?jwe:Uwe)(this,e)}}function Pct(e,t){var n=$we(e+"");if(arguments.length<2){for(var r=KY(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?Ict:t?kct:Rct)(n,t))}function Nct(){this.textContent=""}function Dct(e){return function(){this.textContent=e}}function Oct(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Mct(e){return arguments.length?this.each(e==null?Nct:(typeof e=="function"?Oct:Dct)(e)):this.node().textContent}function Lct(){this.innerHTML=""}function Fct(e){return function(){this.innerHTML=e}}function $ct(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Bct(e){return arguments.length?this.each(e==null?Lct:(typeof e=="function"?$ct:Fct)(e)):this.node().innerHTML}function jct(){this.nextSibling&&this.parentNode.appendChild(this)}function Uct(){return this.each(jct)}function zct(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Vct(){return this.each(zct)}function Hct(e){var t=typeof e=="function"?e:Nwe(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function qct(){return null}function Wct(e,t){var n=typeof e=="function"?e:Nwe(e),r=t==null?qct:typeof t=="function"?t:YY(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Gct(){var e=this.parentNode;e&&e.removeChild(this)}function Yct(){return this.each(Gct)}function Kct(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Xct(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Qct(e){return this.select(e?Xct:Kct)}function Jct(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Zct(e){return function(t){e.call(this,t,this.__data__)}}function eft(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function tft(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function nft(e,t,n){return function(){var r=this.__on,i,s=Zct(t);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function rft(e,t,n){var r=eft(e+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,l=a.length,c;u<l;++u)for(i=0,c=a[u];i<s;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(a=t?nft:tft,i=0;i<s;++i)this.each(a(r[i],t,n));return this}function zwe(e,t,n){var r=Fwe(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function ift(e,t){return function(){return zwe(this,e,t)}}function sft(e,t){return function(){return zwe(this,e,t.apply(this,arguments))}}function oft(e,t){return this.each((typeof t=="function"?sft:ift)(e,t))}function*aft(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var Vwe=[null];function ah(e,t){this._groups=e,this._parents=t}function OR(){return new ah([[document.documentElement]],Vwe)}function uft(){return this}ah.prototype=OR.prototype={constructor:ah,select:Olt,selectAll:$lt,selectChild:zlt,selectChildren:Wlt,filter:Glt,data:Zlt,enter:Ylt,exit:tct,join:nct,merge:rct,selection:uft,order:ict,sort:sct,call:act,nodes:uct,node:lct,size:cct,empty:fct,each:dct,attr:bct,style:Ect,property:Act,classed:Pct,text:Mct,html:Bct,raise:Uct,lower:Vct,append:Hct,insert:Wct,remove:Yct,clone:Qct,datum:Jct,on:rft,dispatch:oft,[Symbol.iterator]:aft};function D_(e){return typeof e=="string"?new ah([[document.querySelector(e)]],[document.documentElement]):new ah([[e]],Vwe)}function lft(e){let t;for(;t=e.sourceEvent;)e=t;return e}function cft(e,t){if(e=lft(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}function VT(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function MR(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Xb(){}var X_=.7,SS=1/X_,WE="\\s*([+-]?\\d+)\\s*",h4="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Hm="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",fft=/^#([0-9a-f]{3,8})$/,dft=new RegExp(`^rgb\\(${WE},${WE},${WE}\\)$`),hft=new RegExp(`^rgb\\(${Hm},${Hm},${Hm}\\)$`),pft=new RegExp(`^rgba\\(${WE},${WE},${WE},${h4}\\)$`),mft=new RegExp(`^rgba\\(${Hm},${Hm},${Hm},${h4}\\)$`),gft=new RegExp(`^hsl\\(${h4},${Hm},${Hm}\\)$`),yft=new RegExp(`^hsla\\(${h4},${Hm},${Hm},${h4}\\)$`),Qoe={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};VT(Xb,Q_,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Joe,formatHex:Joe,formatHex8:vft,formatHsl:bft,formatRgb:Zoe,toString:Zoe});function Joe(){return this.rgb().formatHex()}function vft(){return this.rgb().formatHex8()}function bft(){return Hwe(this).formatHsl()}function Zoe(){return this.rgb().formatRgb()}function Q_(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=fft.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?eae(t):n===3?new Du(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?P6(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?P6(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=dft.exec(e))?new Du(t[1],t[2],t[3],1):(t=hft.exec(e))?new Du(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=pft.exec(e))?P6(t[1],t[2],t[3],t[4]):(t=mft.exec(e))?P6(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=gft.exec(e))?rae(t[1],t[2]/100,t[3]/100,1):(t=yft.exec(e))?rae(t[1],t[2]/100,t[3]/100,t[4]):Qoe.hasOwnProperty(e)?eae(Qoe[e]):e==="transparent"?new Du(NaN,NaN,NaN,0):null}function eae(e){return new Du(e>>16&255,e>>8&255,e&255,1)}function P6(e,t,n,r){return r<=0&&(e=t=n=NaN),new Du(e,t,n,r)}function XY(e){return e instanceof Xb||(e=Q_(e)),e?(e=e.rgb(),new Du(e.r,e.g,e.b,e.opacity)):new Du}function bb(e,t,n,r){return arguments.length===1?XY(e):new Du(e,t,n,r??1)}function Du(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}VT(Du,bb,MR(Xb,{brighter(e){return e=e==null?SS:Math.pow(SS,e),new Du(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?X_:Math.pow(X_,e),new Du(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Du(O_(this.r),O_(this.g),O_(this.b),jN(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:tae,formatHex:tae,formatHex8:xft,formatRgb:nae,toString:nae}));function tae(){return`#${S_(this.r)}${S_(this.g)}${S_(this.b)}`}function xft(){return`#${S_(this.r)}${S_(this.g)}${S_(this.b)}${S_((isNaN(this.opacity)?1:this.opacity)*255)}`}function nae(){const e=jN(this.opacity);return`${e===1?"rgb(":"rgba("}${O_(this.r)}, ${O_(this.g)}, ${O_(this.b)}${e===1?")":`, ${e})`}`}function jN(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function O_(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function S_(e){return e=O_(e),(e<16?"0":"")+e.toString(16)}function rae(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new a0(e,t,n,r)}function Hwe(e){if(e instanceof a0)return new a0(e.h,e.s,e.l,e.opacity);if(e instanceof Xb||(e=Q_(e)),!e)return new a0;if(e instanceof a0)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,u=(s+i)/2;return a?(t===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-t)/a+2:o=(t-n)/a+4,a/=u<.5?s+i:2-s-i,o*=60):a=u>0&&u<1?0:o,new a0(o,a,u,e.opacity)}function UN(e,t,n,r){return arguments.length===1?Hwe(e):new a0(e,t,n,r??1)}function a0(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}VT(a0,UN,MR(Xb,{brighter(e){return e=e==null?SS:Math.pow(SS,e),new a0(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?X_:Math.pow(X_,e),new a0(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Du(E$(e>=240?e-240:e+120,i,r),E$(e,i,r),E$(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new a0(iae(this.h),N6(this.s),N6(this.l),jN(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=jN(this.opacity);return`${e===1?"hsl(":"hsla("}${iae(this.h)}, ${N6(this.s)*100}%, ${N6(this.l)*100}%${e===1?")":`, ${e})`}`}}));function iae(e){return e=(e||0)%360,e<0?e+360:e}function N6(e){return Math.max(0,Math.min(1,e||0))}function E$(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const qwe=Math.PI/180,Wwe=180/Math.PI,zN=18,Gwe=.96422,Ywe=1,Kwe=.82521,Xwe=4/29,GE=6/29,Qwe=3*GE*GE,_ft=GE*GE*GE;function Jwe(e){if(e instanceof qm)return new qm(e.l,e.a,e.b,e.opacity);if(e instanceof jy)return Zwe(e);e instanceof Du||(e=XY(e));var t=A$(e.r),n=A$(e.g),r=A$(e.b),i=S$((.2225045*t+.7168786*n+.0606169*r)/Ywe),s,o;return t===n&&n===r?s=o=i:(s=S$((.4360747*t+.3850649*n+.1430804*r)/Gwe),o=S$((.0139322*t+.0971045*n+.7141733*r)/Kwe)),new qm(116*i-16,500*(s-i),200*(i-o),e.opacity)}function VN(e,t,n,r){return arguments.length===1?Jwe(e):new qm(e,t,n,r??1)}function qm(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}VT(qm,VN,MR(Xb,{brighter(e){return new qm(this.l+zN*(e??1),this.a,this.b,this.opacity)},darker(e){return new qm(this.l-zN*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=Gwe*T$(t),e=Ywe*T$(e),n=Kwe*T$(n),new Du(C$(3.1338561*t-1.6168667*e-.4906146*n),C$(-.9787684*t+1.9161415*e+.033454*n),C$(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function S$(e){return e>_ft?Math.pow(e,1/3):e/Qwe+Xwe}function T$(e){return e>GE?e*e*e:Qwe*(e-Xwe)}function C$(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function A$(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function wft(e){if(e instanceof jy)return new jy(e.h,e.c,e.l,e.opacity);if(e instanceof qm||(e=Jwe(e)),e.a===0&&e.b===0)return new jy(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*Wwe;return new jy(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function HN(e,t,n,r){return arguments.length===1?wft(e):new jy(e,t,n,r??1)}function jy(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function Zwe(e){if(isNaN(e.h))return new qm(e.l,0,0,e.opacity);var t=e.h*qwe;return new qm(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}VT(jy,HN,MR(Xb,{brighter(e){return new jy(this.h,this.c,this.l+zN*(e??1),this.opacity)},darker(e){return new jy(this.h,this.c,this.l-zN*(e??1),this.opacity)},rgb(){return Zwe(this).rgb()}}));var e2e=-.14861,QY=1.78277,JY=-.29227,J9=-.90649,p4=1.97294,sae=p4*J9,oae=p4*QY,aae=QY*JY-J9*e2e;function Eft(e){if(e instanceof M_)return new M_(e.h,e.s,e.l,e.opacity);e instanceof Du||(e=XY(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(aae*r+sae*t-oae*n)/(aae+sae-oae),s=r-i,o=(p4*(n-i)-JY*s)/J9,a=Math.sqrt(o*o+s*s)/(p4*i*(1-i)),u=a?Math.atan2(o,s)*Wwe-120:NaN;return new M_(u<0?u+360:u,a,i,e.opacity)}function _z(e,t,n,r){return arguments.length===1?Eft(e):new M_(e,t,n,r??1)}function M_(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}VT(M_,_z,MR(Xb,{brighter(e){return e=e==null?SS:Math.pow(SS,e),new M_(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?X_:Math.pow(X_,e),new M_(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*qwe,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new Du(255*(t+n*(e2e*r+QY*i)),255*(t+n*(JY*r+J9*i)),255*(t+n*(p4*r)),this.opacity)}}));function t2e(e,t,n,r,i){var s=e*e,o=s*e;return((1-3*e+3*s-o)*t+(4-6*s+3*o)*n+(1+3*e+3*s-3*o)*r+o*i)/6}function n2e(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],s=e[r+1],o=r>0?e[r-1]:2*i-s,a=r<t-1?e[r+2]:2*s-i;return t2e((n-r/t)*t,o,i,s,a)}}function r2e(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],s=e[r%t],o=e[(r+1)%t],a=e[(r+2)%t];return t2e((n-r/t)*t,i,s,o,a)}}const Z9=e=>()=>e;function i2e(e,t){return function(n){return e+n*t}}function Sft(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function eM(e,t){var n=t-e;return n?i2e(e,n>180||n<-180?n-360*Math.round(n/360):n):Z9(isNaN(e)?t:e)}function Tft(e){return(e=+e)==1?Ou:function(t,n){return n-t?Sft(t,n,e):Z9(isNaN(t)?n:t)}}function Ou(e,t){var n=t-e;return n?i2e(e,n):Z9(isNaN(e)?t:e)}const m4=function e(t){var n=Tft(t);function r(i,s){var o=n((i=bb(i)).r,(s=bb(s)).r),a=n(i.g,s.g),u=n(i.b,s.b),l=Ou(i.opacity,s.opacity);return function(c){return i.r=o(c),i.g=a(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function s2e(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),s=new Array(n),o,a;for(o=0;o<n;++o)a=bb(t[o]),r[o]=a.r||0,i[o]=a.g||0,s[o]=a.b||0;return r=e(r),i=e(i),s=e(s),a.opacity=1,function(u){return a.r=r(u),a.g=i(u),a.b=s(u),a+""}}}var Cft=s2e(n2e),Aft=s2e(r2e);function ZY(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function o2e(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function kft(e,t){return(o2e(t)?ZY:a2e)(e,t)}function a2e(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=Qb(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function u2e(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function zh(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function l2e(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Qb(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var wz=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,k$=new RegExp(wz.source,"g");function Rft(e){return function(){return e}}function Ift(e){return function(t){return e(t)+""}}function eK(e,t){var n=wz.lastIndex=k$.lastIndex=0,r,i,s,o=-1,a=[],u=[];for(e=e+"",t=t+"";(r=wz.exec(e))&&(i=k$.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,u.push({i:o,x:zh(r,i)})),n=k$.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?u[0]?Ift(u[0].x):Rft(t):(t=u.length,function(l){for(var c=0,f;c<t;++c)a[(f=u[c]).i]=f.x(l);return a.join("")})}function Qb(e,t){var n=typeof t,r;return t==null||n==="boolean"?Z9(t):(n==="number"?zh:n==="string"?(r=Q_(t))?(t=r,m4):eK:t instanceof Q_?m4:t instanceof Date?u2e:o2e(t)?ZY:Array.isArray(t)?a2e:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?l2e:zh)(e,t)}function Pft(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function Nft(e,t){var n=eM(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function LR(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var uae=180/Math.PI,Ez={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function c2e(e,t,n,r,i,s){var o,a,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),e*r<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*uae,skewX:Math.atan(u)*uae,scaleX:o,scaleY:a}}var D6;function Dft(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Ez:c2e(t.a,t.b,t.c,t.d,t.e,t.f)}function Oft(e){return e==null||(D6||(D6=document.createElementNS("http://www.w3.org/2000/svg","g")),D6.setAttribute("transform",e),!(e=D6.transform.baseVal.consolidate()))?Ez:(e=e.matrix,c2e(e.a,e.b,e.c,e.d,e.e,e.f))}function f2e(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function s(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push("translate(",null,t,null,n);p.push({i:m-4,x:zh(l,f)},{i:m-2,x:zh(c,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function o(l,c,f,d){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:zh(l,c)})):c&&f.push(i(f)+"rotate("+c+r)}function a(l,c,f,d){l!==c?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:zh(l,c)}):c&&f.push(i(f)+"skewX("+c+r)}function u(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push(i(h)+"scale(",null,",",null,")");p.push({i:m-4,x:zh(l,f)},{i:m-2,x:zh(c,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(l,c){var f=[],d=[];return l=e(l),c=e(c),s(l.translateX,l.translateY,c.translateX,c.translateY,f,d),o(l.rotate,c.rotate,f,d),a(l.skewX,c.skewX,f,d),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,d),l=c=null,function(h){for(var p=-1,m=d.length,g;++p<m;)f[(g=d[p]).i]=g.x(h);return f.join("")}}}var d2e=f2e(Dft,"px, ","px)","deg)"),h2e=f2e(Oft,", ",")",")"),Mft=1e-12;function lae(e){return((e=Math.exp(e))+1/e)/2}function Lft(e){return((e=Math.exp(e))-1/e)/2}function Fft(e){return((e=Math.exp(2*e))-1)/(e+1)}const $ft=function e(t,n,r){function i(s,o){var a=s[0],u=s[1],l=s[2],c=o[0],f=o[1],d=o[2],h=c-a,p=f-u,m=h*h+p*p,g,b;if(m<Mft)b=Math.log(d/l)/t,g=function(k){return[a+k*h,u+k*p,l*Math.exp(t*k*b)]};else{var y=Math.sqrt(m),x=(d*d-l*l+r*m)/(2*l*n*y),w=(d*d-l*l-r*m)/(2*d*n*y),T=Math.log(Math.sqrt(x*x+1)-x),A=Math.log(Math.sqrt(w*w+1)-w);b=(A-T)/t,g=function(k){var I=k*b,O=lae(T),M=l/(n*y)*(O*Fft(t*I+T)-Lft(T));return[a+M*h,u+M*p,l*O/lae(t*I+T)]}}return g.duration=b*1e3*t/Math.SQRT2,g}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,u=a*a;return e(o,a,u)},i}(Math.SQRT2,2,4);function p2e(e){return function(t,n){var r=e((t=UN(t)).h,(n=UN(n)).h),i=Ou(t.s,n.s),s=Ou(t.l,n.l),o=Ou(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const Bft=p2e(eM);var jft=p2e(Ou);function Uft(e,t){var n=Ou((e=VN(e)).l,(t=VN(t)).l),r=Ou(e.a,t.a),i=Ou(e.b,t.b),s=Ou(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=r(o),e.b=i(o),e.opacity=s(o),e+""}}function m2e(e){return function(t,n){var r=e((t=HN(t)).h,(n=HN(n)).h),i=Ou(t.c,n.c),s=Ou(t.l,n.l),o=Ou(t.opacity,n.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const zft=m2e(eM);var Vft=m2e(Ou);function g2e(e){return function t(n){n=+n;function r(i,s){var o=e((i=_z(i)).h,(s=_z(s)).h),a=Ou(i.s,s.s),u=Ou(i.l,s.l),l=Ou(i.opacity,s.opacity);return function(c){return i.h=o(c),i.s=a(c),i.l=u(Math.pow(c,n)),i.opacity=l(c),i+""}}return r.gamma=t,r}(1)}const Hft=g2e(eM);var qft=g2e(Ou);function tK(e,t){t===void 0&&(t=e,e=Qb);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[a](o-a)}}function Wft(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const Gft=Object.freeze(Object.defineProperty({__proto__:null,interpolate:Qb,interpolateArray:kft,interpolateBasis:n2e,interpolateBasisClosed:r2e,interpolateCubehelix:Hft,interpolateCubehelixLong:qft,interpolateDate:u2e,interpolateDiscrete:Pft,interpolateHcl:zft,interpolateHclLong:Vft,interpolateHsl:Bft,interpolateHslLong:jft,interpolateHue:Nft,interpolateLab:Uft,interpolateNumber:zh,interpolateNumberArray:ZY,interpolateObject:l2e,interpolateRgb:m4,interpolateRgbBasis:Cft,interpolateRgbBasisClosed:Aft,interpolateRound:LR,interpolateString:eK,interpolateTransformCss:d2e,interpolateTransformSvg:h2e,interpolateZoom:$ft,piecewise:tK,quantize:Wft},Symbol.toStringTag,{value:"Module"}));var TS=0,I3=0,rA=0,y2e=1e3,qN,P3,WN=0,J_=0,tM=0,g4=typeof performance=="object"&&performance.now?performance:Date,v2e=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function nM(){return J_||(v2e(Yft),J_=g4.now()+tM)}function Yft(){J_=0}function y4(){this._call=this._time=this._next=null}y4.prototype=nK.prototype={constructor:y4,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?nM():+n)+(t==null?0:+t),!this._next&&P3!==this&&(P3?P3._next=this:qN=this,P3=this),this._call=e,this._time=n,Sz()},stop:function(){this._call&&(this._call=null,this._time=1/0,Sz())}};function nK(e,t,n){var r=new y4;return r.restart(e,t,n),r}function Kft(){nM(),++TS;for(var e=qN,t;e;)(t=J_-e._time)>=0&&e._call.call(void 0,t),e=e._next;--TS}function cae(){J_=(WN=g4.now())+tM,TS=I3=0;try{Kft()}finally{TS=0,Qft(),J_=0}}function Xft(){var e=g4.now(),t=e-WN;t>y2e&&(tM-=t,WN=e)}function Qft(){for(var e,t=qN,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:qN=n);P3=e,Sz(r)}function Sz(e){if(!TS){I3&&(I3=clearTimeout(I3));var t=e-J_;t>24?(e<1/0&&(I3=setTimeout(cae,e-g4.now()-tM)),rA&&(rA=clearInterval(rA))):(rA||(WN=g4.now(),rA=setInterval(Xft,y2e)),TS=1,v2e(cae))}}function fae(e,t,n){var r=new y4;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}function Jft(e,t,n){var r=new y4,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(s,o,a){o=+o,a=a==null?nM():+a,r._restart(function u(l){l+=i,r._restart(u,i+=o,a),s(l)},o,a)},r.restart(e,t,n),r)}var Zft=GY("start","end","cancel","interrupt"),edt=[],b2e=0,dae=1,Tz=2,b8=3,hae=4,Cz=5,x8=6;function rM(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;tdt(e,n,{name:t,index:r,group:i,on:Zft,tween:edt,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:b2e})}function rK(e,t){var n=$0(e,t);if(n.state>b2e)throw new Error("too late; already scheduled");return n}function wg(e,t){var n=$0(e,t);if(n.state>b8)throw new Error("too late; already running");return n}function $0(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function tdt(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=nK(s,0,n.time);function s(l){n.state=dae,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var c,f,d,h;if(n.state!==dae)return u();for(c in r)if(h=r[c],h.name===n.name){if(h.state===b8)return fae(o);h.state===hae?(h.state=x8,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[c]):+c<t&&(h.state=x8,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[c])}if(fae(function(){n.state===b8&&(n.state=hae,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=Tz,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Tz){for(n.state=b8,i=new Array(d=n.tween.length),c=0,f=-1;c<d;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=h);i.length=f+1}}function a(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=Cz,1),f=-1,d=i.length;++f<d;)i[f].call(e,c);n.state===Cz&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=x8,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function ndt(e,t){var n=e.__transition,r,i,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>Tz&&r.state<Cz,r.state=x8,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function rdt(e){return this.each(function(){ndt(this,e)})}function idt(e,t){var n,r;return function(){var i=wg(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function sdt(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=wg(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:t,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===t){i[u]=a;break}u===l&&i.push(a)}s.tween=i}}function odt(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=$0(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?idt:sdt)(n,e,t))}function iK(e,t,n){var r=e._id;return e.each(function(){var i=wg(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return $0(i,r).value[t]}}function x2e(e,t){var n;return(typeof t=="number"?zh:t instanceof Q_?m4:(n=Q_(t))?(t=n,m4):eK)(e,t)}function adt(e){return function(){this.removeAttribute(e)}}function udt(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ldt(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function cdt(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function fdt(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function ddt(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function hdt(e,t){var n=Q9(e),r=n==="transform"?h2e:x2e;return this.attrTween(e,typeof t=="function"?(n.local?ddt:fdt)(n,r,iK(this,"attr."+e,t)):t==null?(n.local?udt:adt)(n):(n.local?cdt:ldt)(n,r,t))}function pdt(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function mdt(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function gdt(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&mdt(e,s)),n}return i._value=t,i}function ydt(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&pdt(e,s)),n}return i._value=t,i}function vdt(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Q9(e);return this.tween(n,(r.local?gdt:ydt)(r,t))}function bdt(e,t){return function(){rK(this,e).delay=+t.apply(this,arguments)}}function xdt(e,t){return t=+t,function(){rK(this,e).delay=t}}function _dt(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?bdt:xdt)(t,e)):$0(this.node(),t).delay}function wdt(e,t){return function(){wg(this,e).duration=+t.apply(this,arguments)}}function Edt(e,t){return t=+t,function(){wg(this,e).duration=t}}function Sdt(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?wdt:Edt)(t,e)):$0(this.node(),t).duration}function Tdt(e,t){if(typeof t!="function")throw new Error;return function(){wg(this,e).ease=t}}function Cdt(e){var t=this._id;return arguments.length?this.each(Tdt(t,e)):$0(this.node(),t).ease}function Adt(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;wg(this,e).ease=n}}function kdt(e){if(typeof e!="function")throw new Error;return this.each(Adt(this._id,e))}function Rdt(e){typeof e!="function"&&(e=Owe(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new v1(r,this._parents,this._name,this._id)}function Idt(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var u=t[a],l=n[a],c=u.length,f=o[a]=new Array(c),d,h=0;h<c;++h)(d=u[h]||l[h])&&(f[h]=d);for(;a<r;++a)o[a]=t[a];return new v1(o,this._parents,this._name,this._id)}function Pdt(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Ndt(e,t,n){var r,i,s=Pdt(t)?rK:wg;return function(){var o=s(this,e),a=o.on;a!==r&&(i=(r=a).copy()).on(t,n),o.on=i}}function Ddt(e,t){var n=this._id;return arguments.length<2?$0(this.node(),n).on.on(e):this.each(Ndt(n,e,t))}function Odt(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Mdt(){return this.on("end.remove",Odt(this._id))}function Ldt(e){var t=this._name,n=this._id;typeof e!="function"&&(e=YY(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],u=a.length,l=s[o]=new Array(u),c,f,d=0;d<u;++d)(c=a[d])&&(f=e.call(c,c.__data__,d,a))&&("__data__"in c&&(f.__data__=c.__data__),l[d]=f,rM(l[d],t,n,d,l,$0(c,n)));return new v1(s,this._parents,t,n)}function Fdt(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Dwe(e));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var u=r[a],l=u.length,c,f=0;f<l;++f)if(c=u[f]){for(var d=e.call(c,c.__data__,f,u),h,p=$0(c,n),m=0,g=d.length;m<g;++m)(h=d[m])&&rM(h,t,n,m,d,p);s.push(d),o.push(c)}return new v1(s,o,t,n)}var $dt=OR.prototype.constructor;function Bdt(){return new $dt(this._groups,this._parents)}function jdt(e,t){var n,r,i;return function(){var s=ES(this,e),o=(this.style.removeProperty(e),ES(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function _2e(e){return function(){this.style.removeProperty(e)}}function Udt(e,t,n){var r,i=n+"",s;return function(){var o=ES(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function zdt(e,t,n){var r,i,s;return function(){var o=ES(this,e),a=n(this),u=a+"";return a==null&&(u=a=(this.style.removeProperty(e),ES(this,e))),o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a))}}function Vdt(e,t){var n,r,i,s="style."+t,o="end."+s,a;return function(){var u=wg(this,e),l=u.on,c=u.value[s]==null?a||(a=_2e(t)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(o,i=c),u.on=r}}function Hdt(e,t,n){var r=(e+="")=="transform"?d2e:x2e;return t==null?this.styleTween(e,jdt(e,r)).on("end.style."+e,_2e(e)):typeof t=="function"?this.styleTween(e,zdt(e,r,iK(this,"style."+e,t))).each(Vdt(this._id,e)):this.styleTween(e,Udt(e,r,t),n).on("end.style."+e,null)}function qdt(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Wdt(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&qdt(e,o,n)),r}return s._value=t,s}function Gdt(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Wdt(e,t,n??""))}function Ydt(e){return function(){this.textContent=e}}function Kdt(e){return function(){var t=e(this);this.textContent=t??""}}function Xdt(e){return this.tween("text",typeof e=="function"?Kdt(iK(this,"text",e)):Ydt(e==null?"":e+""))}function Qdt(e){return function(t){this.textContent=e.call(this,t)}}function Jdt(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Qdt(i)),t}return r._value=e,r}function Zdt(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Jdt(e))}function eht(){for(var e=this._name,t=this._id,n=w2e(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)if(u=o[l]){var c=$0(u,t);rM(u,e,n,l,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new v1(r,this._parents,e,n)}function tht(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},u={value:function(){--i===0&&s()}};n.each(function(){var l=wg(this,r),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(u)),l.on=t}),i===0&&s()})}var nht=0;function v1(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function w2e(){return++nht}var gy=OR.prototype;v1.prototype={constructor:v1,select:Ldt,selectAll:Fdt,selectChild:gy.selectChild,selectChildren:gy.selectChildren,filter:Rdt,merge:Idt,selection:Bdt,transition:eht,call:gy.call,nodes:gy.nodes,node:gy.node,size:gy.size,empty:gy.empty,each:gy.each,on:Ddt,attr:hdt,attrTween:vdt,style:Hdt,styleTween:Gdt,text:Xdt,textTween:Zdt,remove:Mdt,tween:odt,delay:_dt,duration:Sdt,ease:Cdt,easeVarying:kdt,end:tht,[Symbol.iterator]:gy[Symbol.iterator]};function rht(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var iht={time:null,delay:0,duration:250,ease:rht};function sht(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function oht(e){var t,n;e instanceof v1?(t=e._id,e=e._name):(t=w2e(),(n=iht).time=nM(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&rM(u,e,t,l,o,n||sht(u,t));return new v1(r,this._parents,e,t)}OR.prototype.interrupt=rdt;OR.prototype.transition=oht;const Az=Math.PI,kz=2*Az,s_=1e-6,aht=kz-s_;function E2e(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function uht(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return E2e;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let sK=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?E2e:uht(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,u=r-t,l=i-n,c=o-t,f=a-n,d=c*c+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>s_)if(!(Math.abs(f*u-l*c)>s_)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let h=r-o,p=i-a,m=u*u+l*l,g=h*h+p*p,b=Math.sqrt(m),y=Math.sqrt(d),x=s*Math.tan((Az-Math.acos((m+d-g)/(2*b*y)))/2),w=x/y,T=x/b;Math.abs(w-1)>s_&&this._append`L${t+w*c},${n+w*f}`,this._append`A${s},${s},0,0,${+(f*h>c*p)},${this._x1=t+T*u},${this._y1=n+T*l}`}}arc(t,n,r,i,s,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),u=r*Math.sin(i),l=t+a,c=n+u,f=1^o,d=o?i-s:s-i;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>s_||Math.abs(this._y1-c)>s_)&&this._append`L${l},${c}`,r&&(d<0&&(d=d%kz+kz),d>aht?this._append`A${r},${r},0,1,${f},${t-a},${n-u}A${r},${r},0,1,${f},${this._x1=l},${this._y1=c}`:d>s_&&this._append`A${r},${r},0,${+(d>=Az)},${f},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function iM(){return new sK}iM.prototype=sK.prototype;const Zy=11102230246251565e-32,ql=134217729,lht=(3+8*Zy)*Zy;function R$(e,t,n,r,i){let s,o,a,u,l=t[0],c=r[0],f=0,d=0;c>l==c>-l?(s=l,l=t[++f]):(s=c,c=r[++d]);let h=0;if(f<e&&d<n)for(c>l==c>-l?(o=l+s,a=s-(o-l),l=t[++f]):(o=c+s,a=s-(o-c),c=r[++d]),s=o,a!==0&&(i[h++]=a);f<e&&d<n;)c>l==c>-l?(o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f]):(o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d]),s=o,a!==0&&(i[h++]=a);for(;f<e;)o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f],s=o,a!==0&&(i[h++]=a);for(;d<n;)o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d],s=o,a!==0&&(i[h++]=a);return(s!==0||h===0)&&(i[h++]=s),h}function cht(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function FR(e){return new Float64Array(e)}const fht=(3+16*Zy)*Zy,dht=(2+12*Zy)*Zy,hht=(9+64*Zy)*Zy*Zy,K2=FR(4),pae=FR(8),mae=FR(12),gae=FR(16),Vc=FR(4);function pht(e,t,n,r,i,s,o){let a,u,l,c,f,d,h,p,m,g,b,y,x,w,T,A,k,I;const O=e-i,M=n-i,L=t-s,H=r-s;w=O*H,d=ql*O,h=d-(d-O),p=O-h,d=ql*H,m=d-(d-H),g=H-m,T=p*g-(w-h*m-p*m-h*g),A=L*M,d=ql*L,h=d-(d-L),p=L-h,d=ql*M,m=d-(d-M),g=M-m,k=p*g-(A-h*m-p*m-h*g),b=T-k,f=T-b,K2[0]=T-(b+f)+(f-k),y=w+b,f=y-w,x=w-(y-f)+(b-f),b=x-A,f=x-b,K2[1]=x-(b+f)+(f-A),I=y+b,f=I-y,K2[2]=y-(I-f)+(b-f),K2[3]=I;let D=cht(4,K2),B=dht*o;if(D>=B||-D>=B||(f=e-O,a=e-(O+f)+(f-i),f=n-M,l=n-(M+f)+(f-i),f=t-L,u=t-(L+f)+(f-s),f=r-H,c=r-(H+f)+(f-s),a===0&&u===0&&l===0&&c===0)||(B=hht*o+lht*Math.abs(D),D+=O*c+H*a-(L*l+M*u),D>=B||-D>=B))return D;w=a*H,d=ql*a,h=d-(d-a),p=a-h,d=ql*H,m=d-(d-H),g=H-m,T=p*g-(w-h*m-p*m-h*g),A=u*M,d=ql*u,h=d-(d-u),p=u-h,d=ql*M,m=d-(d-M),g=M-m,k=p*g-(A-h*m-p*m-h*g),b=T-k,f=T-b,Vc[0]=T-(b+f)+(f-k),y=w+b,f=y-w,x=w-(y-f)+(b-f),b=x-A,f=x-b,Vc[1]=x-(b+f)+(f-A),I=y+b,f=I-y,Vc[2]=y-(I-f)+(b-f),Vc[3]=I;const U=R$(4,K2,4,Vc,pae);w=O*c,d=ql*O,h=d-(d-O),p=O-h,d=ql*c,m=d-(d-c),g=c-m,T=p*g-(w-h*m-p*m-h*g),A=L*l,d=ql*L,h=d-(d-L),p=L-h,d=ql*l,m=d-(d-l),g=l-m,k=p*g-(A-h*m-p*m-h*g),b=T-k,f=T-b,Vc[0]=T-(b+f)+(f-k),y=w+b,f=y-w,x=w-(y-f)+(b-f),b=x-A,f=x-b,Vc[1]=x-(b+f)+(f-A),I=y+b,f=I-y,Vc[2]=y-(I-f)+(b-f),Vc[3]=I;const G=R$(U,pae,4,Vc,mae);w=a*c,d=ql*a,h=d-(d-a),p=a-h,d=ql*c,m=d-(d-c),g=c-m,T=p*g-(w-h*m-p*m-h*g),A=u*l,d=ql*u,h=d-(d-u),p=u-h,d=ql*l,m=d-(d-l),g=l-m,k=p*g-(A-h*m-p*m-h*g),b=T-k,f=T-b,Vc[0]=T-(b+f)+(f-k),y=w+b,f=y-w,x=w-(y-f)+(b-f),b=x-A,f=x-b,Vc[1]=x-(b+f)+(f-A),I=y+b,f=I-y,Vc[2]=y-(I-f)+(b-f),Vc[3]=I;const ee=R$(G,mae,4,Vc,gae);return gae[ee-1]}function O6(e,t,n,r,i,s){const o=(t-s)*(n-i),a=(e-i)*(r-s),u=o-a,l=Math.abs(o+a);return Math.abs(u)>=fht*l?u:-pht(e,t,n,r,i,s,l)}const yae=Math.pow(2,-52),M6=new Uint32Array(512);class GN{static from(t,n=bht,r=xht){const i=t.length,s=new Float64Array(i*2);for(let o=0;o<i;o++){const a=t[o];s[2*o]=n(a),s[2*o+1]=r(a)}return new GN(s)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:s}=this,o=t.length>>1;let a=1/0,u=1/0,l=-1/0,c=-1/0;for(let O=0;O<o;O++){const M=t[2*O],L=t[2*O+1];M<a&&(a=M),L<u&&(u=L),M>l&&(l=M),L>c&&(c=L),this._ids[O]=O}const f=(a+l)/2,d=(u+c)/2;let h,p,m;for(let O=0,M=1/0;O<o;O++){const L=I$(f,d,t[2*O],t[2*O+1]);L<M&&(h=O,M=L)}const g=t[2*h],b=t[2*h+1];for(let O=0,M=1/0;O<o;O++){if(O===h)continue;const L=I$(g,b,t[2*O],t[2*O+1]);L<M&&L>0&&(p=O,M=L)}let y=t[2*p],x=t[2*p+1],w=1/0;for(let O=0;O<o;O++){if(O===h||O===p)continue;const M=yht(g,b,y,x,t[2*O],t[2*O+1]);M<w&&(m=O,w=M)}let T=t[2*m],A=t[2*m+1];if(w===1/0){for(let L=0;L<o;L++)this._dists[L]=t[2*L]-t[0]||t[2*L+1]-t[1];kE(this._ids,this._dists,0,o-1);const O=new Uint32Array(o);let M=0;for(let L=0,H=-1/0;L<o;L++){const D=this._ids[L],B=this._dists[D];B>H&&(O[M++]=D,H=B)}this.hull=O.subarray(0,M),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(O6(g,b,y,x,T,A)<0){const O=p,M=y,L=x;p=m,y=T,x=A,m=O,T=M,A=L}const k=vht(g,b,y,x,T,A);this._cx=k.x,this._cy=k.y;for(let O=0;O<o;O++)this._dists[O]=I$(t[2*O],t[2*O+1],k.x,k.y);kE(this._ids,this._dists,0,o-1),this._hullStart=h;let I=3;r[h]=n[m]=p,r[p]=n[h]=m,r[m]=n[p]=h,i[h]=0,i[p]=1,i[m]=2,s.fill(-1),s[this._hashKey(g,b)]=h,s[this._hashKey(y,x)]=p,s[this._hashKey(T,A)]=m,this.trianglesLen=0,this._addTriangle(h,p,m,-1,-1,-1);for(let O=0,M,L;O<this._ids.length;O++){const H=this._ids[O],D=t[2*H],B=t[2*H+1];if(O>0&&Math.abs(D-M)<=yae&&Math.abs(B-L)<=yae||(M=D,L=B,H===h||H===p||H===m))continue;let U=0;for(let X=0,q=this._hashKey(D,B);X<this._hashSize&&(U=s[(q+X)%this._hashSize],!(U!==-1&&U!==r[U]));X++);U=n[U];let G=U,ee;for(;ee=r[G],O6(D,B,t[2*G],t[2*G+1],t[2*ee],t[2*ee+1])>=0;)if(G=ee,G===U){G=-1;break}if(G===-1)continue;let ne=this._addTriangle(G,H,r[G],-1,-1,i[G]);i[H]=this._legalize(ne+2),i[G]=ne,I++;let ue=r[G];for(;ee=r[ue],O6(D,B,t[2*ue],t[2*ue+1],t[2*ee],t[2*ee+1])<0;)ne=this._addTriangle(ue,H,ee,i[H],-1,i[ue]),i[H]=this._legalize(ne+2),r[ue]=ue,I--,ue=ee;if(G===U)for(;ee=n[G],O6(D,B,t[2*ee],t[2*ee+1],t[2*G],t[2*G+1])<0;)ne=this._addTriangle(ee,H,G,-1,i[G],i[ee]),this._legalize(ne+2),i[ee]=ne,r[G]=G,I--,G=ee;this._hullStart=n[H]=G,r[G]=n[ue]=H,r[H]=ue,s[this._hashKey(D,B)]=H,s[this._hashKey(t[2*G],t[2*G+1])]=G}this.hull=new Uint32Array(I);for(let O=0,M=this._hullStart;O<I;O++)this.hull[O]=M,M=r[M];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(mht(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let s=0,o=0;for(;;){const a=r[t],u=t-t%3;if(o=u+(t+2)%3,a===-1){if(s===0)break;t=M6[--s];continue}const l=a-a%3,c=u+(t+1)%3,f=l+(a+2)%3,d=n[o],h=n[t],p=n[c],m=n[f];if(ght(i[2*d],i[2*d+1],i[2*h],i[2*h+1],i[2*p],i[2*p+1],i[2*m],i[2*m+1])){n[t]=m,n[a]=d;const b=r[f];if(b===-1){let x=this._hullStart;do{if(this._hullTri[x]===f){this._hullTri[x]=t;break}x=this._hullPrev[x]}while(x!==this._hullStart)}this._link(t,b),this._link(a,r[o]),this._link(o,f);const y=l+(a+1)%3;s<M6.length&&(M6[s++]=y)}else{if(s===0)break;t=M6[--s]}}return o}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,s,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,s),this._link(a+2,o),this.trianglesLen+=3,a}}function mht(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function I$(e,t,n,r){const i=e-n,s=t-r;return i*i+s*s}function ght(e,t,n,r,i,s,o,a){const u=e-o,l=t-a,c=n-o,f=r-a,d=i-o,h=s-a,p=u*u+l*l,m=c*c+f*f,g=d*d+h*h;return u*(f*g-m*h)-l*(c*g-m*d)+p*(c*h-f*d)<0}function yht(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=(l*c-a*f)*d,p=(o*f-u*c)*d;return h*h+p*p}function vht(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=e+(l*c-a*f)*d,p=t+(o*f-u*c)*d;return{x:h,y:p}}function kE(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const s=e[i],o=t[s];let a=i-1;for(;a>=n&&t[e[a]]>o;)e[a+1]=e[a--];e[a+1]=s}else{const i=n+r>>1;let s=n+1,o=r;iA(e,i,s),t[e[n]]>t[e[r]]&&iA(e,n,r),t[e[s]]>t[e[r]]&&iA(e,s,r),t[e[n]]>t[e[s]]&&iA(e,n,s);const a=e[s],u=t[a];for(;;){do s++;while(t[e[s]]<u);do o--;while(t[e[o]]>u);if(o<s)break;iA(e,s,o)}e[n+1]=e[o],e[o]=a,r-s+1>=o-n?(kE(e,t,s,r),kE(e,t,n,o-1)):(kE(e,t,n,o-1),kE(e,t,s,r))}}function iA(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function bht(e){return e[0]}function xht(e){return e[1]}const vae=1e-6;let T_=class{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,s=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${s}`:(Math.abs(this._x1-i)>vae||Math.abs(this._y1-s)>vae)&&(this._+="L"+i+","+s),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=s}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}};class Rz{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let _ht=class{constructor(t,[n,r,i,s]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((s=+s)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=s,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let s,o;const a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let m=0,g=0,b=r.length,y,x;m<b;m+=3,g+=2){const w=r[m]*2,T=r[m+1]*2,A=r[m+2]*2,k=t[w],I=t[w+1],O=t[T],M=t[T+1],L=t[A],H=t[A+1],D=O-k,B=M-I,U=L-k,G=H-I,ee=(D*G-B*U)*2;if(Math.abs(ee)<1e-9){if(s===void 0){s=o=0;for(const ue of n)s+=t[ue*2],o+=t[ue*2+1];s/=n.length,o/=n.length}const ne=1e9*Math.sign((s-k)*G-(o-I)*U);y=(k+L)/2-ne*G,x=(I+H)/2+ne*U}else{const ne=1/ee,ue=D*D+B*B,X=U*U+G*G;y=k+(G*ue-B*X)*ne,x=I+(D*X-U*ue)*ne}a[g]=y,a[g+1]=x}let u=n[n.length-1],l,c=u*4,f,d=t[2*u],h,p=t[2*u+1];i.fill(0);for(let m=0;m<n.length;++m)u=n[m],l=c,f=d,h=p,c=u*4,d=t[2*u],p=t[2*u+1],i[l+2]=i[c]=h-p,i[l+3]=i[c+1]=d-f}render(t){const n=t==null?t=new T_:void 0,{delaunay:{halfedges:r,inedges:i,hull:s},circumcenters:o,vectors:a}=this;if(s.length<=1)return null;for(let c=0,f=r.length;c<f;++c){const d=r[c];if(d<c)continue;const h=Math.floor(c/3)*2,p=Math.floor(d/3)*2,m=o[h],g=o[h+1],b=o[p],y=o[p+1];this._renderSegment(m,g,b,y,t)}let u,l=s[s.length-1];for(let c=0;c<s.length;++c){u=l,l=s[c];const f=Math.floor(i[l]/3)*2,d=o[f],h=o[f+1],p=u*4,m=this._project(d,h,a[p+2],a[p+3]);m&&this._renderSegment(d,h,m[0],m[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new T_:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new T_:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let s=i.length;for(;i[0]===i[s-2]&&i[1]===i[s-1]&&s>1;)s-=2;for(let o=2;o<s;o+=2)(i[o]!==i[o-2]||i[o+1]!==i[o-1])&&n.lineTo(i[o],i[o+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new Rz;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,s){let o;const a=this._regioncode(t,n),u=this._regioncode(r,i);a===0&&u===0?(s.moveTo(t,n),s.lineTo(r,i)):(o=this._clipSegment(t,n,r,i,a,u))&&(s.moveTo(o[0],o[1]),s.lineTo(o[2],o[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let s=0,o=n.length;s<o;s+=2)for(let a=0,u=i.length;a<u;a+=2)if(n[s]===i[a]&&n[s+1]===i[a+1]&&n[(s+2)%o]===i[(a+u-2)%u]&&n[(s+3)%o]===i[(a+u-1)%u]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:s}}=this,o=r[t];if(o===-1)return null;const a=[];let u=o;do{const l=Math.floor(u/3);if(a.push(n[l*2],n[l*2+1]),u=u%3===2?u-2:u+1,s[u]!==t)break;u=i[u]}while(u!==o&&u!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,s,o,a=n[r-2],u=n[r-1],l,c=this._regioncode(a,u),f,d=0;for(let h=0;h<r;h+=2)if(s=a,o=u,a=n[h],u=n[h+1],l=c,c=this._regioncode(a,u),l===0&&c===0)f=d,d=0,i?i.push(a,u):i=[a,u];else{let p,m,g,b,y;if(l===0){if((p=this._clipSegment(s,o,a,u,l,c))===null)continue;[m,g,b,y]=p}else{if((p=this._clipSegment(a,u,s,o,c,l))===null)continue;[b,y,m,g]=p,f=d,d=this._edgecode(m,g),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(m,g):i=[m,g]}f=d,d=this._edgecode(b,y),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(b,y):i=[b,y]}if(i)f=d,d=this._edgecode(i[0],i[1]),f&&d&&this._edge(t,f,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,s,o){const a=s<o;for(a&&([t,n,r,i,s,o]=[r,i,t,n,o,s]);;){if(s===0&&o===0)return a?[r,i,t,n]:[t,n,r,i];if(s&o)return null;let u,l,c=s||o;c&8?(u=t+(r-t)*(this.ymax-n)/(i-n),l=this.ymax):c&4?(u=t+(r-t)*(this.ymin-n)/(i-n),l=this.ymin):c&2?(l=n+(i-n)*(this.xmax-t)/(r-t),u=this.xmax):(l=n+(i-n)*(this.xmin-t)/(r-t),u=this.xmin),s?(t=u,n=l,s=this._regioncode(t,n)):(r=u,i=l,o=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,s,o){let a=Array.from(n),u;if((u=this._project(a[0],a[1],r,i))&&a.unshift(u[0],u[1]),(u=this._project(a[a.length-2],a[a.length-1],s,o))&&a.push(u[0],u[1]),a=this._clipFinite(t,a))for(let l=0,c=a.length,f,d=this._edgecode(a[c-2],a[c-1]);l<c;l+=2)f=d,d=this._edgecode(a[l],a[l+1]),f&&d&&(l=this._edge(t,f,d,a,l),c=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,s){for(;n!==r;){let o,a;switch(n){case 5:n=4;continue;case 4:n=6,o=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,o=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,o=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,o=this.xmin,a=this.ymin;break}(i[s]!==o||i[s+1]!==a)&&this.contains(t,o,a)&&(i.splice(s,0,o,a),s+=2)}return s}_project(t,n,r,i){let s=1/0,o,a,u;if(i<0){if(n<=this.ymin)return null;(o=(this.ymin-n)/i)<s&&(u=this.ymin,a=t+(s=o)*r)}else if(i>0){if(n>=this.ymax)return null;(o=(this.ymax-n)/i)<s&&(u=this.ymax,a=t+(s=o)*r)}if(r>0){if(t>=this.xmax)return null;(o=(this.xmax-t)/r)<s&&(a=this.xmax,u=n+(s=o)*i)}else if(r<0){if(t<=this.xmin)return null;(o=(this.xmin-t)/r)<s&&(a=this.xmin,u=n+(s=o)*i)}return[a,u]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const wht=2*Math.PI,X2=Math.pow;function Eht(e){return e[0]}function Sht(e){return e[1]}function Tht(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],s=2*t[r+1],o=2*t[r+2];if((n[o]-n[i])*(n[s+1]-n[i+1])-(n[s]-n[i])*(n[o+1]-n[i+1])>1e-10)return!1}return!0}function Cht(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class oK{static from(t,n=Eht,r=Sht,i){return new oK("length"in t?Aht(t,n,r,i):Float64Array.from(kht(t,n,r,i)))}constructor(t){this._delaunator=new GN(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&Tht(t)){this.collinear=Int32Array.from({length:n.length/2},(d,h)=>h).sort((d,h)=>n[2*d]-n[2*h]||n[2*d+1]-n[2*h+1]);const u=this.collinear[0],l=this.collinear[this.collinear.length-1],c=[n[2*u],n[2*u+1],n[2*l],n[2*l+1]],f=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let d=0,h=n.length/2;d<h;++d){const p=Cht(n[2*d],n[2*d+1],f);n[2*d]=p[0],n[2*d+1]=p[1]}this._delaunator=new GN(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let u=0,l=r.length;u<l;++u){const c=s[u%3===2?u-2:u+1];(r[u]===-1||o[c]===-1)&&(o[c]=u)}for(let u=0,l=i.length;u<l;++u)a[i[u]]=u;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],o[i[0]]=1,i.length===2&&(o[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new _ht(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:s,triangles:o,collinear:a}=this;if(a){const f=a.indexOf(t);f>0&&(yield a[f-1]),f<a.length-1&&(yield a[f+1]);return}const u=n[t];if(u===-1)return;let l=u,c=-1;do{if(yield c=o[l],l=l%3===2?l-2:l+1,o[l]!==t)return;if(l=s[l],l===-1){const f=r[(i[t]+1)%r.length];f!==c&&(yield f);return}}while(l!==u)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let s;for(;(s=this._step(r,t,n))>=0&&s!==r&&s!==i;)r=s;return s}_step(t,n,r){const{inedges:i,hull:s,_hullIndex:o,halfedges:a,triangles:u,points:l}=this;if(i[t]===-1||!l.length)return(t+1)%(l.length>>1);let c=t,f=X2(n-l[t*2],2)+X2(r-l[t*2+1],2);const d=i[t];let h=d;do{let p=u[h];const m=X2(n-l[p*2],2)+X2(r-l[p*2+1],2);if(m<f&&(f=m,c=p),h=h%3===2?h-2:h+1,u[h]!==t)break;if(h=a[h],h===-1){if(h=s[(o[t]+1)%s.length],h!==p&&X2(n-l[h*2],2)+X2(r-l[h*2+1],2)<f)return h;break}}while(h!==d);return c}render(t){const n=t==null?t=new T_:void 0,{points:r,halfedges:i,triangles:s}=this;for(let o=0,a=i.length;o<a;++o){const u=i[o];if(u<o)continue;const l=s[o]*2,c=s[u]*2;t.moveTo(r[l],r[l+1]),t.lineTo(r[c],r[c+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new T_:void 0,{points:i}=this;for(let s=0,o=i.length;s<o;s+=2){const a=i[s],u=i[s+1];t.moveTo(a+n,u),t.arc(a,u,n,0,wht)}return r&&r.value()}renderHull(t){const n=t==null?t=new T_:void 0,{hull:r,points:i}=this,s=r[0]*2,o=r.length;t.moveTo(i[s],i[s+1]);for(let a=1;a<o;++a){const u=2*r[a];t.lineTo(i[u],i[u+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new Rz;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new T_:void 0,{points:i,triangles:s}=this,o=s[t*=3]*2,a=s[t+1]*2,u=s[t+2]*2;return n.moveTo(i[o],i[o+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[u],i[u+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new Rz;return this.renderTriangle(t,n),n.value()}}function Aht(e,t,n,r){const i=e.length,s=new Float64Array(i*2);for(let o=0;o<i;++o){const a=e[o];s[o*2]=t.call(r,a,o,e),s[o*2+1]=n.call(r,a,o,e)}return s}function*kht(e,t,n,r){let i=0;for(const s of e)yield t.call(r,s,i,e),yield n.call(r,s,i,e),++i}var bae={},P$={},N$=34,sA=10,D$=13;function S2e(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function Rht(e,t){var n=S2e(e);return function(r,i){return t(n(r),i,e)}}function xae(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function Uf(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function Iht(e){return e<0?"-"+Uf(-e,6):e>9999?"+"+Uf(e,6):Uf(e,4)}function Pht(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":Iht(e.getUTCFullYear())+"-"+Uf(e.getUTCMonth()+1,2)+"-"+Uf(e.getUTCDate(),2)+(i?"T"+Uf(t,2)+":"+Uf(n,2)+":"+Uf(r,2)+"."+Uf(i,3)+"Z":r?"T"+Uf(t,2)+":"+Uf(n,2)+":"+Uf(r,2)+"Z":n||t?"T"+Uf(t,2)+":"+Uf(n,2)+"Z":"")}function Nht(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,d){var h,p,m=i(f,function(g,b){if(h)return h(g,b-1);p=g,h=d?Rht(g,d):S2e(g)});return m.columns=p||[],m}function i(f,d){var h=[],p=f.length,m=0,g=0,b,y=p<=0,x=!1;f.charCodeAt(p-1)===sA&&--p,f.charCodeAt(p-1)===D$&&--p;function w(){if(y)return P$;if(x)return x=!1,bae;var A,k=m,I;if(f.charCodeAt(k)===N$){for(;m++<p&&f.charCodeAt(m)!==N$||f.charCodeAt(++m)===N$;);return(A=m)>=p?y=!0:(I=f.charCodeAt(m++))===sA?x=!0:I===D$&&(x=!0,f.charCodeAt(m)===sA&&++m),f.slice(k+1,A-1).replace(/""/g,'"')}for(;m<p;){if((I=f.charCodeAt(A=m++))===sA)x=!0;else if(I===D$)x=!0,f.charCodeAt(m)===sA&&++m;else if(I!==n)continue;return f.slice(k,A)}return y=!0,f.slice(k,p)}for(;(b=w())!==P$;){for(var T=[];b!==bae&&b!==P$;)T.push(b),b=w();d&&(T=d(T,g++))==null||h.push(T)}return h}function s(f,d){return f.map(function(h){return d.map(function(p){return c(h[p])}).join(e)})}function o(f,d){return d==null&&(d=xae(f)),[d.map(c).join(e)].concat(s(f,d)).join(`
`)}function a(f,d){return d==null&&(d=xae(f)),s(f,d).join(`
`)}function u(f){return f.map(l).join(`
`)}function l(f){return f.map(c).join(e)}function c(f){return f==null?"":f instanceof Date?Pht(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:o,formatBody:a,formatRows:u,formatRow:l,formatValue:c}}function Dht(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var s,o=n.length,a,u=0,l=0;for(s=0;s<o;++s)a=n[s],u+=a.x,l+=a.y;for(u=(u/o-e)*r,l=(l/o-t)*r,s=0;s<o;++s)a=n[s],a.x-=u,a.y-=l}return i.initialize=function(s){n=s},i.x=function(s){return arguments.length?(e=+s,i):e},i.y=function(s){return arguments.length?(t=+s,i):t},i.strength=function(s){return arguments.length?(r=+s,i):r},i}function Oht(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return T2e(this.cover(t,n),t,n,e)}function T2e(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,s=e._root,o={data:r},a=e._x0,u=e._y0,l=e._x1,c=e._y1,f,d,h,p,m,g,b,y;if(!s)return e._root=o,e;for(;s.length;)if((m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d,i=s,!(s=s[b=g<<1|m]))return i[b]=o,e;if(h=+e._x.call(null,s.data),p=+e._y.call(null,s.data),t===h&&n===p)return o.next=s,i?i[b]=o:e._root=o,e;do i=i?i[b]=new Array(4):e._root=new Array(4),(m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d;while((b=g<<1|m)===(y=(p>=d)<<1|h>=f));return i[y]=s,i[b]=o,e}function Mht(e){var t,n,r=e.length,i,s,o=new Array(r),a=new Array(r),u=1/0,l=1/0,c=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(s=+this._y.call(null,t))||(o[n]=i,a[n]=s,i<u&&(u=i),i>c&&(c=i),s<l&&(l=s),s>f&&(f=s));if(u>c||l>f)return this;for(this.cover(u,l).cover(c,f),n=0;n<r;++n)T2e(this,o[n],a[n],e[n]);return this}function Lht(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,s=(r=Math.floor(t))+1;else{for(var o=i-n||1,a=this._root,u,l;n>e||e>=i||r>t||t>=s;)switch(l=(t<r)<<1|e<n,u=new Array(4),u[l]=a,a=u,o*=2,l){case 0:i=n+o,s=r+o;break;case 1:n=i-o,s=r+o;break;case 2:i=n+o,r=s-o;break;case 3:n=i-o,r=s-o;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function Fht(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function $ht(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Jc(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function Bht(e,t,n){var r,i=this._x0,s=this._y0,o,a,u,l,c=this._x1,f=this._y1,d=[],h=this._root,p,m;for(h&&d.push(new Jc(h,i,s,c,f)),n==null?n=1/0:(i=e-n,s=t-n,c=e+n,f=t+n,n*=n);p=d.pop();)if(!(!(h=p.node)||(o=p.x0)>c||(a=p.y0)>f||(u=p.x1)<i||(l=p.y1)<s))if(h.length){var g=(o+u)/2,b=(a+l)/2;d.push(new Jc(h[3],g,b,u,l),new Jc(h[2],o,b,g,l),new Jc(h[1],g,a,u,b),new Jc(h[0],o,a,g,b)),(m=(t>=b)<<1|e>=g)&&(p=d[d.length-1],d[d.length-1]=d[d.length-1-m],d[d.length-1-m]=p)}else{var y=e-+this._x.call(null,h.data),x=t-+this._y.call(null,h.data),w=y*y+x*x;if(w<n){var T=Math.sqrt(n=w);i=e-T,s=t-T,c=e+T,f=t+T,r=h.data}}return r}function jht(e){if(isNaN(c=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,n=this._root,r,i,s,o=this._x0,a=this._y0,u=this._x1,l=this._y1,c,f,d,h,p,m,g,b;if(!n)return this;if(n.length)for(;;){if((p=c>=(d=(o+u)/2))?o=d:u=d,(m=f>=(h=(a+l)/2))?a=h:l=h,t=n,!(n=n[g=m<<1|p]))return this;if(!n.length)break;(t[g+1&3]||t[g+2&3]||t[g+3&3])&&(r=t,b=g)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):t?(s?t[g]=s:delete t[g],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[b]=n:this._root=n),this):(this._root=s,this)}function Uht(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function zht(){return this._root}function Vht(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function Hht(e){var t=[],n,r=this._root,i,s,o,a,u;for(r&&t.push(new Jc(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,s=n.x0,o=n.y0,a=n.x1,u=n.y1)&&r.length){var l=(s+a)/2,c=(o+u)/2;(i=r[3])&&t.push(new Jc(i,l,c,a,u)),(i=r[2])&&t.push(new Jc(i,s,c,l,u)),(i=r[1])&&t.push(new Jc(i,l,o,a,c)),(i=r[0])&&t.push(new Jc(i,s,o,l,c))}return this}function qht(e){var t=[],n=[],r;for(this._root&&t.push(new Jc(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var s,o=r.x0,a=r.y0,u=r.x1,l=r.y1,c=(o+u)/2,f=(a+l)/2;(s=i[0])&&t.push(new Jc(s,o,a,c,f)),(s=i[1])&&t.push(new Jc(s,c,a,u,f)),(s=i[2])&&t.push(new Jc(s,o,f,c,l)),(s=i[3])&&t.push(new Jc(s,c,f,u,l))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function Wht(e){return e[0]}function Ght(e){return arguments.length?(this._x=e,this):this._x}function Yht(e){return e[1]}function Kht(e){return arguments.length?(this._y=e,this):this._y}function aK(e,t,n){var r=new uK(t??Wht,n??Yht,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function uK(e,t,n,r,i,s){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function _ae(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var cf=aK.prototype=uK.prototype;cf.copy=function(){var e=new uK(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=_ae(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=_ae(r));return e};cf.add=Oht;cf.addAll=Mht;cf.cover=Lht;cf.data=Fht;cf.extent=$ht;cf.find=Bht;cf.remove=jht;cf.removeAll=Uht;cf.root=zht;cf.size=Vht;cf.visit=Hht;cf.visitAfter=qht;cf.x=Ght;cf.y=Kht;function ef(e){return function(){return e}}function $v(e){return(e()-.5)*1e-6}function Xht(e){return e.x+e.vx}function Qht(e){return e.y+e.vy}function Jht(e){var t,n,r,i=1,s=1;typeof e!="function"&&(e=ef(e==null?1:+e));function o(){for(var l,c=t.length,f,d,h,p,m,g,b=0;b<s;++b)for(f=aK(t,Xht,Qht).visitAfter(a),l=0;l<c;++l)d=t[l],m=n[d.index],g=m*m,h=d.x+d.vx,p=d.y+d.vy,f.visit(y);function y(x,w,T,A,k){var I=x.data,O=x.r,M=m+O;if(I){if(I.index>d.index){var L=h-I.x-I.vx,H=p-I.y-I.vy,D=L*L+H*H;D<M*M&&(L===0&&(L=$v(r),D+=L*L),H===0&&(H=$v(r),D+=H*H),D=(M-(D=Math.sqrt(D)))/D*i,d.vx+=(L*=D)*(M=(O*=O)/(g+O)),d.vy+=(H*=D)*M,I.vx-=L*(M=1-M),I.vy-=H*M)}return}return w>h+M||A<h-M||T>p+M||k<p-M}}function a(l){if(l.data)return l.r=n[l.data.index];for(var c=l.r=0;c<4;++c)l[c]&&l[c].r>l.r&&(l.r=l[c].r)}function u(){if(t){var l,c=t.length,f;for(n=new Array(c),l=0;l<c;++l)f=t[l],n[f.index]=+e(f,l,t)}}return o.initialize=function(l,c){t=l,r=c,u()},o.iterations=function(l){return arguments.length?(s=+l,o):s},o.strength=function(l){return arguments.length?(i=+l,o):i},o.radius=function(l){return arguments.length?(e=typeof l=="function"?l:ef(+l),u(),o):e},o}function Zht(e){return e.index}function wae(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function ept(e){var t=Zht,n=f,r,i=ef(30),s,o,a,u,l,c=1;e==null&&(e=[]);function f(g){return 1/Math.min(a[g.source.index],a[g.target.index])}function d(g){for(var b=0,y=e.length;b<c;++b)for(var x=0,w,T,A,k,I,O,M;x<y;++x)w=e[x],T=w.source,A=w.target,k=A.x+A.vx-T.x-T.vx||$v(l),I=A.y+A.vy-T.y-T.vy||$v(l),O=Math.sqrt(k*k+I*I),O=(O-s[x])/O*g*r[x],k*=O,I*=O,A.vx-=k*(M=u[x]),A.vy-=I*M,T.vx+=k*(M=1-M),T.vy+=I*M}function h(){if(o){var g,b=o.length,y=e.length,x=new Map(o.map((T,A)=>[t(T,A,o),T])),w;for(g=0,a=new Array(b);g<y;++g)w=e[g],w.index=g,typeof w.source!="object"&&(w.source=wae(x,w.source)),typeof w.target!="object"&&(w.target=wae(x,w.target)),a[w.source.index]=(a[w.source.index]||0)+1,a[w.target.index]=(a[w.target.index]||0)+1;for(g=0,u=new Array(y);g<y;++g)w=e[g],u[g]=a[w.source.index]/(a[w.source.index]+a[w.target.index]);r=new Array(y),p(),s=new Array(y),m()}}function p(){if(o)for(var g=0,b=e.length;g<b;++g)r[g]=+n(e[g],g,e)}function m(){if(o)for(var g=0,b=e.length;g<b;++g)s[g]=+i(e[g],g,e)}return d.initialize=function(g,b){o=g,l=b,h()},d.links=function(g){return arguments.length?(e=g,h(),d):e},d.id=function(g){return arguments.length?(t=g,d):t},d.iterations=function(g){return arguments.length?(c=+g,d):c},d.strength=function(g){return arguments.length?(n=typeof g=="function"?g:ef(+g),p(),d):n},d.distance=function(g){return arguments.length?(i=typeof g=="function"?g:ef(+g),m(),d):i},d}const tpt=1664525,npt=1013904223,Eae=4294967296;function rpt(){let e=1;return()=>(e=(tpt*e+npt)%Eae)/Eae}function ipt(e){return e.x}function spt(e){return e.y}var opt=10,apt=Math.PI*(3-Math.sqrt(5));function upt(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,o=.6,a=new Map,u=nK(f),l=GY("tick","end"),c=rpt();e==null&&(e=[]);function f(){d(),l.call("tick",t),n<r&&(u.stop(),l.call("end",t))}function d(m){var g,b=e.length,y;m===void 0&&(m=1);for(var x=0;x<m;++x)for(n+=(s-n)*i,a.forEach(function(w){w(n)}),g=0;g<b;++g)y=e[g],y.fx==null?y.x+=y.vx*=o:(y.x=y.fx,y.vx=0),y.fy==null?y.y+=y.vy*=o:(y.y=y.fy,y.vy=0);return t}function h(){for(var m=0,g=e.length,b;m<g;++m){if(b=e[m],b.index=m,b.fx!=null&&(b.x=b.fx),b.fy!=null&&(b.y=b.fy),isNaN(b.x)||isNaN(b.y)){var y=opt*Math.sqrt(.5+m),x=m*apt;b.x=y*Math.cos(x),b.y=y*Math.sin(x)}(isNaN(b.vx)||isNaN(b.vy))&&(b.vx=b.vy=0)}}function p(m){return m.initialize&&m.initialize(e,c),m}return h(),t={tick:d,restart:function(){return u.restart(f),t},stop:function(){return u.stop(),t},nodes:function(m){return arguments.length?(e=m,h(),a.forEach(p),t):e},alpha:function(m){return arguments.length?(n=+m,t):n},alphaMin:function(m){return arguments.length?(r=+m,t):r},alphaDecay:function(m){return arguments.length?(i=+m,t):+i},alphaTarget:function(m){return arguments.length?(s=+m,t):s},velocityDecay:function(m){return arguments.length?(o=1-m,t):1-o},randomSource:function(m){return arguments.length?(c=m,a.forEach(p),t):c},force:function(m,g){return arguments.length>1?(g==null?a.delete(m):a.set(m,p(g)),t):a.get(m)},find:function(m,g,b){var y=0,x=e.length,w,T,A,k,I;for(b==null?b=1/0:b*=b,y=0;y<x;++y)k=e[y],w=m-k.x,T=g-k.y,A=w*w+T*T,A<b&&(I=k,b=A);return I},on:function(m,g){return arguments.length>1?(l.on(m,g),t):l.on(m)}}}function lpt(){var e,t,n,r,i=ef(-30),s,o=1,a=1/0,u=.81;function l(h){var p,m=e.length,g=aK(e,ipt,spt).visitAfter(f);for(r=h,p=0;p<m;++p)t=e[p],g.visit(d)}function c(){if(e){var h,p=e.length,m;for(s=new Array(p),h=0;h<p;++h)m=e[h],s[m.index]=+i(m,h,e)}}function f(h){var p=0,m,g,b=0,y,x,w;if(h.length){for(y=x=w=0;w<4;++w)(m=h[w])&&(g=Math.abs(m.value))&&(p+=m.value,b+=g,y+=g*m.x,x+=g*m.y);h.x=y/b,h.y=x/b}else{m=h,m.x=m.data.x,m.y=m.data.y;do p+=s[m.data.index];while(m=m.next)}h.value=p}function d(h,p,m,g){if(!h.value)return!0;var b=h.x-t.x,y=h.y-t.y,x=g-p,w=b*b+y*y;if(x*x/u<w)return w<a&&(b===0&&(b=$v(n),w+=b*b),y===0&&(y=$v(n),w+=y*y),w<o&&(w=Math.sqrt(o*w)),t.vx+=b*h.value*r/w,t.vy+=y*h.value*r/w),!0;if(h.length||w>=a)return;(h.data!==t||h.next)&&(b===0&&(b=$v(n),w+=b*b),y===0&&(y=$v(n),w+=y*y),w<o&&(w=Math.sqrt(o*w)));do h.data!==t&&(x=s[h.data.index]*r/w,t.vx+=b*x,t.vy+=y*x);while(h=h.next)}return l.initialize=function(h,p){e=h,n=p,c()},l.strength=function(h){return arguments.length?(i=typeof h=="function"?h:ef(+h),c(),l):i},l.distanceMin=function(h){return arguments.length?(o=h*h,l):Math.sqrt(o)},l.distanceMax=function(h){return arguments.length?(a=h*h,l):Math.sqrt(a)},l.theta=function(h){return arguments.length?(u=h*h,l):Math.sqrt(u)},l}function cpt(e){var t=ef(.1),n,r,i;typeof e!="function"&&(e=ef(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vx+=(i[u]-c.x)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:ef(+a),o(),s):t},s.x=function(a){return arguments.length?(e=typeof a=="function"?a:ef(+a),o(),s):e},s}function fpt(e){var t=ef(.1),n,r,i;typeof e!="function"&&(e=ef(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vy+=(i[u]-c.y)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:ef(+a),o(),s):t},s.y=function(a){return arguments.length?(e=typeof a=="function"?a:ef(+a),o(),s):e},s}function dpt(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function YN(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function CS(e){return e=YN(Math.abs(e)),e?e[1]:NaN}function hpt(e,t){return function(n,r){for(var i=n.length,s=[],o=0,a=e[0],u=0;i>0&&a>0&&(u+a+1>r&&(a=Math.max(1,r-u)),s.push(n.substring(i-=a,i+a)),!((u+=a+1)>r));)a=e[o=(o+1)%e.length];return s.reverse().join(t)}}function ppt(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var mpt=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Z_(e){if(!(t=mpt.exec(e)))throw new Error("invalid format: "+e);var t;return new lK({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Z_.prototype=lK.prototype;function lK(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}lK.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function gpt(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var C2e;function ypt(e,t){var n=YN(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(C2e=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+YN(e,Math.max(0,t+s-1))[0]}function Sae(e,t){var n=YN(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Tae={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:dpt,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Sae(e*100,t),r:Sae,s:ypt,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Cae(e){return e}var Aae=Array.prototype.map,kae=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function A2e(e){var t=e.grouping===void 0||e.thousands===void 0?Cae:hpt(Aae.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?Cae:ppt(Aae.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function l(f){f=Z_(f);var d=f.fill,h=f.align,p=f.sign,m=f.symbol,g=f.zero,b=f.width,y=f.comma,x=f.precision,w=f.trim,T=f.type;T==="n"?(y=!0,T="g"):Tae[T]||(x===void 0&&(x=12),w=!0,T="g"),(g||d==="0"&&h==="=")&&(g=!0,d="0",h="=");var A=m==="$"?n:m==="#"&&/[boxX]/.test(T)?"0"+T.toLowerCase():"",k=m==="$"?r:/[%p]/.test(T)?o:"",I=Tae[T],O=/[defgprs%]/.test(T);x=x===void 0?6:/[gprs]/.test(T)?Math.max(1,Math.min(21,x)):Math.max(0,Math.min(20,x));function M(L){var H=A,D=k,B,U,G;if(T==="c")D=I(L)+D,L="";else{L=+L;var ee=L<0||1/L<0;if(L=isNaN(L)?u:I(Math.abs(L),x),w&&(L=gpt(L)),ee&&+L==0&&p!=="+"&&(ee=!1),H=(ee?p==="("?p:a:p==="-"||p==="("?"":p)+H,D=(T==="s"?kae[8+C2e/3]:"")+D+(ee&&p==="("?")":""),O){for(B=-1,U=L.length;++B<U;)if(G=L.charCodeAt(B),48>G||G>57){D=(G===46?i+L.slice(B+1):L.slice(B))+D,L=L.slice(0,B);break}}}y&&!g&&(L=t(L,1/0));var ne=H.length+L.length+D.length,ue=ne<b?new Array(b-ne+1).join(d):"";switch(y&&g&&(L=t(ue+L,ue.length?b-D.length:1/0),ue=""),h){case"<":L=H+L+D+ue;break;case"=":L=H+ue+L+D;break;case"^":L=ue.slice(0,ne=ue.length>>1)+H+L+D+ue.slice(ne);break;default:L=ue+H+L+D;break}return s(L)}return M.toString=function(){return f+""},M}function c(f,d){var h=l((f=Z_(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(CS(d)/3)))*3,m=Math.pow(10,-p),g=kae[8+p/3];return function(b){return h(m*b)+g}}return{format:l,formatPrefix:c}}var L6,sM,cK;vpt({thousands:",",grouping:[3],currency:["$",""]});function vpt(e){return L6=A2e(e),sM=L6.format,cK=L6.formatPrefix,L6}function k2e(e){return Math.max(0,-CS(Math.abs(e)))}function R2e(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(CS(t)/3)))*3-CS(Math.abs(e)))}function I2e(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,CS(t)-CS(e))+1}var Yn=1e-6,Iz=1e-12,Wr=Math.PI,qo=Wr/2,KN=Wr/4,of=Wr*2,pa=180/Wr,zr=Wr/180,hi=Math.abs,HT=Math.atan,Jh=Math.atan2,Wn=Math.cos,F6=Math.ceil,P2e=Math.exp,Pz=Math.hypot,XN=Math.log,O$=Math.pow,Fn=Math.sin,qh=Math.sign||function(e){return e>0?1:e<0?-1:0},af=Math.sqrt,fK=Math.tan;function N2e(e){return e>1?0:e<-1?Wr:Math.acos(e)}function rd(e){return e>1?qo:e<-1?-qo:Math.asin(e)}function vl(){}function QN(e,t){e&&Iae.hasOwnProperty(e.type)&&Iae[e.type](e,t)}var Rae={Feature:function(e,t){QN(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)QN(n[r].geometry,t)}},Iae={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){Nz(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Nz(n[r],t,0)},Polygon:function(e,t){Pae(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Pae(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)QN(n[r],t)}};function Nz(e,t,n){var r=-1,i=e.length-n,s;for(t.lineStart();++r<i;)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function Pae(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)Nz(e[n],t,1);t.polygonEnd()}function Oy(e,t){e&&Rae.hasOwnProperty(e.type)?Rae[e.type](e,t):QN(e,t)}var JN=new rf,ZN=new rf,D2e,O2e,Dz,Oz,Mz,ug={point:vl,lineStart:vl,lineEnd:vl,polygonStart:function(){JN=new rf,ug.lineStart=bpt,ug.lineEnd=xpt},polygonEnd:function(){var e=+JN;ZN.add(e<0?of+e:e),this.lineStart=this.lineEnd=this.point=vl},sphere:function(){ZN.add(of)}};function bpt(){ug.point=_pt}function xpt(){M2e(D2e,O2e)}function _pt(e,t){ug.point=M2e,D2e=e,O2e=t,e*=zr,t*=zr,Dz=e,Oz=Wn(t=t/2+KN),Mz=Fn(t)}function M2e(e,t){e*=zr,t*=zr,t=t/2+KN;var n=e-Dz,r=n>=0?1:-1,i=r*n,s=Wn(t),o=Fn(t),a=Mz*o,u=Oz*s+a*Wn(i),l=a*r*Fn(i);JN.add(Jh(l,u)),Dz=e,Oz=s,Mz=o}function wpt(e){return ZN=new rf,Oy(e,ug),ZN*2}function eD(e){return[Jh(e[1],e[0]),rd(e[2])]}function ew(e){var t=e[0],n=e[1],r=Wn(n);return[r*Wn(t),r*Fn(t),Fn(n)]}function $6(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function AS(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function M$(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function B6(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function tD(e){var t=af(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var xo,Wf,Uo,zd,o_,L2e,F2e,YE,Ek,Sv,b1,Ry={point:Lz,lineStart:Nae,lineEnd:Dae,polygonStart:function(){Ry.point=B2e,Ry.lineStart=Ept,Ry.lineEnd=Spt,Ek=new rf,ug.polygonStart()},polygonEnd:function(){ug.polygonEnd(),Ry.point=Lz,Ry.lineStart=Nae,Ry.lineEnd=Dae,JN<0?(xo=-(Uo=180),Wf=-(zd=90)):Ek>Yn?zd=90:Ek<-1e-6&&(Wf=-90),b1[0]=xo,b1[1]=Uo},sphere:function(){xo=-(Uo=180),Wf=-(zd=90)}};function Lz(e,t){Sv.push(b1=[xo=e,Uo=e]),t<Wf&&(Wf=t),t>zd&&(zd=t)}function $2e(e,t){var n=ew([e*zr,t*zr]);if(YE){var r=AS(YE,n),i=[r[1],-r[0],0],s=AS(i,r);tD(s),s=eD(s);var o=e-o_,a=o>0?1:-1,u=s[0]*pa*a,l,c=hi(o)>180;c^(a*o_<u&&u<a*e)?(l=s[1]*pa,l>zd&&(zd=l)):(u=(u+360)%360-180,c^(a*o_<u&&u<a*e)?(l=-s[1]*pa,l<Wf&&(Wf=l)):(t<Wf&&(Wf=t),t>zd&&(zd=t))),c?e<o_?jd(xo,e)>jd(xo,Uo)&&(Uo=e):jd(e,Uo)>jd(xo,Uo)&&(xo=e):Uo>=xo?(e<xo&&(xo=e),e>Uo&&(Uo=e)):e>o_?jd(xo,e)>jd(xo,Uo)&&(Uo=e):jd(e,Uo)>jd(xo,Uo)&&(xo=e)}else Sv.push(b1=[xo=e,Uo=e]);t<Wf&&(Wf=t),t>zd&&(zd=t),YE=n,o_=e}function Nae(){Ry.point=$2e}function Dae(){b1[0]=xo,b1[1]=Uo,Ry.point=Lz,YE=null}function B2e(e,t){if(YE){var n=e-o_;Ek.add(hi(n)>180?n+(n>0?360:-360):n)}else L2e=e,F2e=t;ug.point(e,t),$2e(e,t)}function Ept(){ug.lineStart()}function Spt(){B2e(L2e,F2e),ug.lineEnd(),hi(Ek)>Yn&&(xo=-(Uo=180)),b1[0]=xo,b1[1]=Uo,YE=null}function jd(e,t){return(t-=e)<0?t+360:t}function Tpt(e,t){return e[0]-t[0]}function Oae(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function Cpt(e){var t,n,r,i,s,o,a;if(zd=Uo=-(xo=Wf=1/0),Sv=[],Oy(e,Ry),n=Sv.length){for(Sv.sort(Tpt),t=1,r=Sv[0],s=[r];t<n;++t)i=Sv[t],Oae(r,i[0])||Oae(r,i[1])?(jd(r[0],i[1])>jd(r[0],r[1])&&(r[1]=i[1]),jd(i[0],r[1])>jd(r[0],r[1])&&(r[0]=i[0])):s.push(r=i);for(o=-1/0,n=s.length-1,t=0,r=s[n];t<=n;r=i,++t)i=s[t],(a=jd(r[1],i[0]))>o&&(o=a,xo=i[0],Uo=r[1])}return Sv=b1=null,xo===1/0||Wf===1/0?[[NaN,NaN],[NaN,NaN]]:[[xo,Wf],[Uo,zd]]}var N3,nD,rD,iD,sD,oD,aD,uD,Fz,$z,Bz,j2e,U2e,Kc,Xc,Qc,d0={sphere:vl,point:dK,lineStart:Mae,lineEnd:Lae,polygonStart:function(){d0.lineStart=Rpt,d0.lineEnd=Ipt},polygonEnd:function(){d0.lineStart=Mae,d0.lineEnd=Lae}};function dK(e,t){e*=zr,t*=zr;var n=Wn(t);$R(n*Wn(e),n*Fn(e),Fn(t))}function $R(e,t,n){++N3,rD+=(e-rD)/N3,iD+=(t-iD)/N3,sD+=(n-sD)/N3}function Mae(){d0.point=Apt}function Apt(e,t){e*=zr,t*=zr;var n=Wn(t);Kc=n*Wn(e),Xc=n*Fn(e),Qc=Fn(t),d0.point=kpt,$R(Kc,Xc,Qc)}function kpt(e,t){e*=zr,t*=zr;var n=Wn(t),r=n*Wn(e),i=n*Fn(e),s=Fn(t),o=Jh(af((o=Xc*s-Qc*i)*o+(o=Qc*r-Kc*s)*o+(o=Kc*i-Xc*r)*o),Kc*r+Xc*i+Qc*s);nD+=o,oD+=o*(Kc+(Kc=r)),aD+=o*(Xc+(Xc=i)),uD+=o*(Qc+(Qc=s)),$R(Kc,Xc,Qc)}function Lae(){d0.point=dK}function Rpt(){d0.point=Ppt}function Ipt(){z2e(j2e,U2e),d0.point=dK}function Ppt(e,t){j2e=e,U2e=t,e*=zr,t*=zr,d0.point=z2e;var n=Wn(t);Kc=n*Wn(e),Xc=n*Fn(e),Qc=Fn(t),$R(Kc,Xc,Qc)}function z2e(e,t){e*=zr,t*=zr;var n=Wn(t),r=n*Wn(e),i=n*Fn(e),s=Fn(t),o=Xc*s-Qc*i,a=Qc*r-Kc*s,u=Kc*i-Xc*r,l=Pz(o,a,u),c=rd(l),f=l&&-c/l;Fz.add(f*o),$z.add(f*a),Bz.add(f*u),nD+=c,oD+=c*(Kc+(Kc=r)),aD+=c*(Xc+(Xc=i)),uD+=c*(Qc+(Qc=s)),$R(Kc,Xc,Qc)}function Npt(e){N3=nD=rD=iD=sD=oD=aD=uD=0,Fz=new rf,$z=new rf,Bz=new rf,Oy(e,d0);var t=+Fz,n=+$z,r=+Bz,i=Pz(t,n,r);return i<Iz&&(t=oD,n=aD,r=uD,nD<Yn&&(t=rD,n=iD,r=sD),i=Pz(t,n,r),i<Iz)?[NaN,NaN]:[Jh(n,t)*pa,rd(r/i)*pa]}function jz(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function Uz(e,t){return hi(e)>Wr&&(e-=Math.round(e/of)*of),[e,t]}Uz.invert=Uz;function V2e(e,t,n){return(e%=of)?t||n?jz($ae(e),Bae(t,n)):$ae(e):t||n?Bae(t,n):Uz}function Fae(e){return function(t,n){return t+=e,hi(t)>Wr&&(t-=Math.round(t/of)*of),[t,n]}}function $ae(e){var t=Fae(e);return t.invert=Fae(-e),t}function Bae(e,t){var n=Wn(e),r=Fn(e),i=Wn(t),s=Fn(t);function o(a,u){var l=Wn(u),c=Wn(a)*l,f=Fn(a)*l,d=Fn(u),h=d*n+c*r;return[Jh(f*i-h*s,c*n-d*r),rd(h*i+f*s)]}return o.invert=function(a,u){var l=Wn(u),c=Wn(a)*l,f=Fn(a)*l,d=Fn(u),h=d*i-f*s;return[Jh(f*i+d*s,c*n+h*r),rd(h*n-c*r)]},o}function Dpt(e){e=V2e(e[0]*zr,e[1]*zr,e.length>2?e[2]*zr:0);function t(n){return n=e(n[0]*zr,n[1]*zr),n[0]*=pa,n[1]*=pa,n}return t.invert=function(n){return n=e.invert(n[0]*zr,n[1]*zr),n[0]*=pa,n[1]*=pa,n},t}function Opt(e,t,n,r,i,s){if(n){var o=Wn(t),a=Fn(t),u=r*n;i==null?(i=t+r*of,s=t-u/2):(i=jae(o,i),s=jae(o,s),(r>0?i<s:i>s)&&(i+=r*of));for(var l,c=i;r>0?c>s:c<s;c-=u)l=eD([o,-a*Wn(c),-a*Fn(c)]),e.point(l[0],l[1])}}function jae(e,t){t=ew(t),t[0]-=e,tD(t);var n=N2e(-t[1]);return((-t[2]<0?-n:n)+of-Yn)%of}function H2e(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:vl,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function _8(e,t){return hi(e[0]-t[0])<Yn&&hi(e[1]-t[1])<Yn}function j6(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function q2e(e,t,n,r,i){var s=[],o=[],a,u;if(e.forEach(function(p){if(!((m=p.length-1)<=0)){var m,g=p[0],b=p[m],y;if(_8(g,b)){if(!g[2]&&!b[2]){for(i.lineStart(),a=0;a<m;++a)i.point((g=p[a])[0],g[1]);i.lineEnd();return}b[0]+=2*Yn}s.push(y=new j6(g,p,null,!0)),o.push(y.o=new j6(g,null,y,!1)),s.push(y=new j6(b,p,null,!1)),o.push(y.o=new j6(b,null,y,!0))}}),!!s.length){for(o.sort(t),Uae(s),Uae(o),a=0,u=o.length;a<u;++a)o[a].e=n=!n;for(var l=s[0],c,f;;){for(var d=l,h=!0;d.v;)if((d=d.n)===l)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,u=c.length;a<u;++a)i.point((f=c[a])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(c=d.p.z,a=c.length-1;a>=0;--a)i.point((f=c[a])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,c=d.z,h=!h}while(!d.v);i.lineEnd()}}}function Uae(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function L$(e){return hi(e[0])<=Wr?e[0]:qh(e[0])*((hi(e[0])+Wr)%of-Wr)}function Mpt(e,t){var n=L$(t),r=t[1],i=Fn(r),s=[Fn(n),-Wn(n),0],o=0,a=0,u=new rf;i===1?r=qo+Yn:i===-1&&(r=-qo-Yn);for(var l=0,c=e.length;l<c;++l)if(d=(f=e[l]).length)for(var f,d,h=f[d-1],p=L$(h),m=h[1]/2+KN,g=Fn(m),b=Wn(m),y=0;y<d;++y,p=w,g=A,b=k,h=x){var x=f[y],w=L$(x),T=x[1]/2+KN,A=Fn(T),k=Wn(T),I=w-p,O=I>=0?1:-1,M=O*I,L=M>Wr,H=g*A;if(u.add(Jh(H*O*Fn(M),b*k+H*Wn(M))),o+=L?I+O*of:I,L^p>=n^w>=n){var D=AS(ew(h),ew(x));tD(D);var B=AS(s,D);tD(B);var U=(L^I>=0?-1:1)*rd(B[2]);(r>U||r===U&&(D[0]||D[1]))&&(a+=L^I>=0?1:-1)}}return(o<-1e-6||o<Yn&&u<-1e-12)^a&1}function W2e(e,t,n,r){return function(i){var s=t(i),o=H2e(),a=t(o),u=!1,l,c,f,d={point:h,lineStart:m,lineEnd:g,polygonStart:function(){d.point=b,d.lineStart=y,d.lineEnd=x,c=[],l=[]},polygonEnd:function(){d.point=h,d.lineStart=m,d.lineEnd=g,c=Iwe(c);var w=Mpt(l,r);c.length?(u||(i.polygonStart(),u=!0),q2e(c,Fpt,w,n,i)):w&&(u||(i.polygonStart(),u=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),u&&(i.polygonEnd(),u=!1),c=l=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(w,T){e(w,T)&&i.point(w,T)}function p(w,T){s.point(w,T)}function m(){d.point=p,s.lineStart()}function g(){d.point=h,s.lineEnd()}function b(w,T){f.push([w,T]),a.point(w,T)}function y(){a.lineStart(),f=[]}function x(){b(f[0][0],f[0][1]),a.lineEnd();var w=a.clean(),T=o.result(),A,k=T.length,I,O,M;if(f.pop(),l.push(f),f=null,!!k){if(w&1){if(O=T[0],(I=O.length-1)>0){for(u||(i.polygonStart(),u=!0),i.lineStart(),A=0;A<I;++A)i.point((M=O[A])[0],M[1]);i.lineEnd()}return}k>1&&w&2&&T.push(T.pop().concat(T.shift())),c.push(T.filter(Lpt))}}return d}}function Lpt(e){return e.length>1}function Fpt(e,t){return((e=e.x)[0]<0?e[1]-qo-Yn:qo-e[1])-((t=t.x)[0]<0?t[1]-qo-Yn:qo-t[1])}const zae=W2e(function(){return!0},$pt,jpt,[-Wr,-qo]);function $pt(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,o){var a=s>0?Wr:-Wr,u=hi(s-t);hi(u-Wr)<Yn?(e.point(t,n=(n+o)/2>0?qo:-qo),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(s,n),i=0):r!==a&&u>=Wr&&(hi(t-r)<Yn&&(t-=r*Yn),hi(s-a)<Yn&&(s-=a*Yn),n=Bpt(t,n,s,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=s,n=o),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function Bpt(e,t,n,r){var i,s,o=Fn(e-n);return hi(o)>Yn?HT((Fn(t)*(s=Wn(r))*Fn(n)-Fn(r)*(i=Wn(t))*Fn(e))/(i*s*o)):(t+r)/2}function jpt(e,t,n,r){var i;if(e==null)i=n*qo,r.point(-Wr,i),r.point(0,i),r.point(Wr,i),r.point(Wr,0),r.point(Wr,-i),r.point(0,-i),r.point(-Wr,-i),r.point(-Wr,0),r.point(-Wr,i);else if(hi(e[0]-t[0])>Yn){var s=e[0]<t[0]?Wr:-Wr;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function Upt(e){var t=Wn(e),n=2*zr,r=t>0,i=hi(t)>Yn;function s(c,f,d,h){Opt(h,e,n,d,c,f)}function o(c,f){return Wn(c)*Wn(f)>t}function a(c){var f,d,h,p,m;return{lineStart:function(){p=h=!1,m=1},point:function(g,b){var y=[g,b],x,w=o(g,b),T=r?w?0:l(g,b):w?l(g+(g<0?Wr:-Wr),b):0;if(!f&&(p=h=w)&&c.lineStart(),w!==h&&(x=u(f,y),(!x||_8(f,x)||_8(y,x))&&(y[2]=1)),w!==h)m=0,w?(c.lineStart(),x=u(y,f),c.point(x[0],x[1])):(x=u(f,y),c.point(x[0],x[1],2),c.lineEnd()),f=x;else if(i&&f&&r^w){var A;!(T&d)&&(A=u(y,f,!0))&&(m=0,r?(c.lineStart(),c.point(A[0][0],A[0][1]),c.point(A[1][0],A[1][1]),c.lineEnd()):(c.point(A[1][0],A[1][1]),c.lineEnd(),c.lineStart(),c.point(A[0][0],A[0][1],3)))}w&&(!f||!_8(f,y))&&c.point(y[0],y[1]),f=y,h=w,d=T},lineEnd:function(){h&&c.lineEnd(),f=null},clean:function(){return m|(p&&h)<<1}}}function u(c,f,d){var h=ew(c),p=ew(f),m=[1,0,0],g=AS(h,p),b=$6(g,g),y=g[0],x=b-y*y;if(!x)return!d&&c;var w=t*b/x,T=-t*y/x,A=AS(m,g),k=B6(m,w),I=B6(g,T);M$(k,I);var O=A,M=$6(k,O),L=$6(O,O),H=M*M-L*($6(k,k)-1);if(!(H<0)){var D=af(H),B=B6(O,(-M-D)/L);if(M$(B,k),B=eD(B),!d)return B;var U=c[0],G=f[0],ee=c[1],ne=f[1],ue;G<U&&(ue=U,U=G,G=ue);var X=G-U,q=hi(X-Wr)<Yn,te=q||X<Yn;if(!q&&ne<ee&&(ue=ee,ee=ne,ne=ue),te?q?ee+ne>0^B[1]<(hi(B[0]-U)<Yn?ee:ne):ee<=B[1]&&B[1]<=ne:X>Wr^(U<=B[0]&&B[0]<=G)){var W=B6(O,(-M+D)/L);return M$(W,k),[B,eD(W)]}}}function l(c,f){var d=r?e:Wr-e,h=0;return c<-d?h|=1:c>d&&(h|=2),f<-d?h|=4:f>d&&(h|=8),h}return W2e(o,a,s,r?[0,-e]:[-Wr,e-Wr])}function zpt(e,t,n,r,i,s){var o=e[0],a=e[1],u=t[0],l=t[1],c=0,f=1,d=u-o,h=l-a,p;if(p=n-o,!(!d&&p>0)){if(p/=d,d<0){if(p<c)return;p<f&&(f=p)}else if(d>0){if(p>f)return;p>c&&(c=p)}if(p=i-o,!(!d&&p<0)){if(p/=d,d<0){if(p>f)return;p>c&&(c=p)}else if(d>0){if(p<c)return;p<f&&(f=p)}if(p=r-a,!(!h&&p>0)){if(p/=h,h<0){if(p<c)return;p<f&&(f=p)}else if(h>0){if(p>f)return;p>c&&(c=p)}if(p=s-a,!(!h&&p<0)){if(p/=h,h<0){if(p>f)return;p>c&&(c=p)}else if(h>0){if(p<c)return;p<f&&(f=p)}return c>0&&(e[0]=o+c*d,e[1]=a+c*h),f<1&&(t[0]=o+f*d,t[1]=a+f*h),!0}}}}}var U6=1e9,z6=-1e9;function G2e(e,t,n,r){function i(l,c){return e<=l&&l<=n&&t<=c&&c<=r}function s(l,c,f,d){var h=0,p=0;if(l==null||(h=o(l,f))!==(p=o(c,f))||u(l,c)<0^f>0)do d.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+f+4)%4)!==p);else d.point(c[0],c[1])}function o(l,c){return hi(l[0]-e)<Yn?c>0?0:3:hi(l[0]-n)<Yn?c>0?2:1:hi(l[1]-t)<Yn?c>0?1:0:c>0?3:2}function a(l,c){return u(l.x,c.x)}function u(l,c){var f=o(l,1),d=o(c,1);return f!==d?f-d:f===0?c[1]-l[1]:f===1?l[0]-c[0]:f===2?l[1]-c[1]:c[0]-l[0]}return function(l){var c=l,f=H2e(),d,h,p,m,g,b,y,x,w,T,A,k={point:I,lineStart:H,lineEnd:D,polygonStart:M,polygonEnd:L};function I(U,G){i(U,G)&&c.point(U,G)}function O(){for(var U=0,G=0,ee=h.length;G<ee;++G)for(var ne=h[G],ue=1,X=ne.length,q=ne[0],te,W,Z=q[0],oe=q[1];ue<X;++ue)te=Z,W=oe,q=ne[ue],Z=q[0],oe=q[1],W<=r?oe>r&&(Z-te)*(r-W)>(oe-W)*(e-te)&&++U:oe<=r&&(Z-te)*(r-W)<(oe-W)*(e-te)&&--U;return U}function M(){c=f,d=[],h=[],A=!0}function L(){var U=O(),G=A&&U,ee=(d=Iwe(d)).length;(G||ee)&&(l.polygonStart(),G&&(l.lineStart(),s(null,null,1,l),l.lineEnd()),ee&&q2e(d,a,U,s,l),l.polygonEnd()),c=l,d=h=p=null}function H(){k.point=B,h&&h.push(p=[]),T=!0,w=!1,y=x=NaN}function D(){d&&(B(m,g),b&&w&&f.rejoin(),d.push(f.result())),k.point=I,w&&c.lineEnd()}function B(U,G){var ee=i(U,G);if(h&&p.push([U,G]),T)m=U,g=G,b=ee,T=!1,ee&&(c.lineStart(),c.point(U,G));else if(ee&&w)c.point(U,G);else{var ne=[y=Math.max(z6,Math.min(U6,y)),x=Math.max(z6,Math.min(U6,x))],ue=[U=Math.max(z6,Math.min(U6,U)),G=Math.max(z6,Math.min(U6,G))];zpt(ne,ue,e,t,n,r)?(w||(c.lineStart(),c.point(ne[0],ne[1])),c.point(ue[0],ue[1]),ee||c.lineEnd(),A=!1):ee&&(c.lineStart(),c.point(U,G),A=!1)}y=U,x=G,w=ee}return k}}function Vae(e,t,n){var r=Gd(e,t-Yn,n).concat(t);return function(i){return r.map(function(s){return[i,s]})}}function Hae(e,t,n){var r=Gd(e,t-Yn,n).concat(t);return function(i){return r.map(function(s){return[s,i]})}}function Vpt(){var e,t,n,r,i,s,o,a,u=10,l=u,c=90,f=360,d,h,p,m,g=2.5;function b(){return{type:"MultiLineString",coordinates:y()}}function y(){return Gd(F6(r/c)*c,n,c).map(p).concat(Gd(F6(a/f)*f,o,f).map(m)).concat(Gd(F6(t/u)*u,e,u).filter(function(x){return hi(x%c)>Yn}).map(d)).concat(Gd(F6(s/l)*l,i,l).filter(function(x){return hi(x%f)>Yn}).map(h))}return b.lines=function(){return y().map(function(x){return{type:"LineString",coordinates:x}})},b.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(m(o).slice(1),p(n).reverse().slice(1),m(a).reverse().slice(1))]}},b.extent=function(x){return arguments.length?b.extentMajor(x).extentMinor(x):b.extentMinor()},b.extentMajor=function(x){return arguments.length?(r=+x[0][0],n=+x[1][0],a=+x[0][1],o=+x[1][1],r>n&&(x=r,r=n,n=x),a>o&&(x=a,a=o,o=x),b.precision(g)):[[r,a],[n,o]]},b.extentMinor=function(x){return arguments.length?(t=+x[0][0],e=+x[1][0],s=+x[0][1],i=+x[1][1],t>e&&(x=t,t=e,e=x),s>i&&(x=s,s=i,i=x),b.precision(g)):[[t,s],[e,i]]},b.step=function(x){return arguments.length?b.stepMajor(x).stepMinor(x):b.stepMinor()},b.stepMajor=function(x){return arguments.length?(c=+x[0],f=+x[1],b):[c,f]},b.stepMinor=function(x){return arguments.length?(u=+x[0],l=+x[1],b):[u,l]},b.precision=function(x){return arguments.length?(g=+x,d=Vae(s,i,90),h=Hae(t,e,g),p=Vae(a,o,90),m=Hae(r,n,g),b):g},b.extentMajor([[-180,-90+Yn],[180,90-Yn]]).extentMinor([[-180,-80-Yn],[180,80+Yn]])}const v4=e=>e;var F$=new rf,zz=new rf,Y2e,K2e,Vz,Hz,My={point:vl,lineStart:vl,lineEnd:vl,polygonStart:function(){My.lineStart=Hpt,My.lineEnd=Wpt},polygonEnd:function(){My.lineStart=My.lineEnd=My.point=vl,F$.add(hi(zz)),zz=new rf},result:function(){var e=F$/2;return F$=new rf,e}};function Hpt(){My.point=qpt}function qpt(e,t){My.point=X2e,Y2e=Vz=e,K2e=Hz=t}function X2e(e,t){zz.add(Hz*e-Vz*t),Vz=e,Hz=t}function Wpt(){X2e(Y2e,K2e)}var kS=1/0,lD=kS,b4=-kS,cD=b4,fD={point:Gpt,lineStart:vl,lineEnd:vl,polygonStart:vl,polygonEnd:vl,result:function(){var e=[[kS,lD],[b4,cD]];return b4=cD=-(lD=kS=1/0),e}};function Gpt(e,t){e<kS&&(kS=e),e>b4&&(b4=e),t<lD&&(lD=t),t>cD&&(cD=t)}var qz=0,Wz=0,D3=0,dD=0,hD=0,RE=0,Gz=0,Yz=0,O3=0,Q2e,J2e,Rm,Im,Hh={point:tw,lineStart:qae,lineEnd:Wae,polygonStart:function(){Hh.lineStart=Xpt,Hh.lineEnd=Qpt},polygonEnd:function(){Hh.point=tw,Hh.lineStart=qae,Hh.lineEnd=Wae},result:function(){var e=O3?[Gz/O3,Yz/O3]:RE?[dD/RE,hD/RE]:D3?[qz/D3,Wz/D3]:[NaN,NaN];return qz=Wz=D3=dD=hD=RE=Gz=Yz=O3=0,e}};function tw(e,t){qz+=e,Wz+=t,++D3}function qae(){Hh.point=Ypt}function Ypt(e,t){Hh.point=Kpt,tw(Rm=e,Im=t)}function Kpt(e,t){var n=e-Rm,r=t-Im,i=af(n*n+r*r);dD+=i*(Rm+e)/2,hD+=i*(Im+t)/2,RE+=i,tw(Rm=e,Im=t)}function Wae(){Hh.point=tw}function Xpt(){Hh.point=Jpt}function Qpt(){Z2e(Q2e,J2e)}function Jpt(e,t){Hh.point=Z2e,tw(Q2e=Rm=e,J2e=Im=t)}function Z2e(e,t){var n=e-Rm,r=t-Im,i=af(n*n+r*r);dD+=i*(Rm+e)/2,hD+=i*(Im+t)/2,RE+=i,i=Im*e-Rm*t,Gz+=i*(Rm+e),Yz+=i*(Im+t),O3+=i*3,tw(Rm=e,Im=t)}function eEe(e){this._context=e}eEe.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,of);break}}},result:vl};var Kz=new rf,$$,tEe,nEe,M3,L3,x4={point:vl,lineStart:function(){x4.point=Zpt},lineEnd:function(){$$&&rEe(tEe,nEe),x4.point=vl},polygonStart:function(){$$=!0},polygonEnd:function(){$$=null},result:function(){var e=+Kz;return Kz=new rf,e}};function Zpt(e,t){x4.point=rEe,tEe=M3=e,nEe=L3=t}function rEe(e,t){M3-=e,L3-=t,Kz.add(af(M3*M3+L3*L3)),M3=e,L3=t}let Gae,pD,Yae,Kae;class Xae{constructor(t){this._append=t==null?iEe:e0t(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==Yae||this._append!==pD){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,Yae=r,pD=this._append,Kae=this._,this._=i}this._+=Kae;break}}}result(){const t=this._;return this._="",t.length?t:null}}function iEe(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function e0t(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return iEe;if(t!==Gae){const n=10**t;Gae=t,pD=function(i){let s=1;this._+=i[0];for(const o=i.length;s<o;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}return pD}function sEe(e,t){let n=3,r=4.5,i,s;function o(a){return a&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),Oy(a,i(s))),s.result()}return o.area=function(a){return Oy(a,i(My)),My.result()},o.measure=function(a){return Oy(a,i(x4)),x4.result()},o.bounds=function(a){return Oy(a,i(fD)),fD.result()},o.centroid=function(a){return Oy(a,i(Hh)),Hh.result()},o.projection=function(a){return arguments.length?(i=a==null?(e=null,v4):(e=a).stream,o):e},o.context=function(a){return arguments.length?(s=a==null?(t=null,new Xae(n)):new eEe(t=a),typeof r!="function"&&s.pointRadius(r),o):t},o.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(s.pointRadius(+a),+a),o):r},o.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const u=Math.floor(a);if(!(u>=0))throw new RangeError(`invalid digits: ${a}`);n=u}return t===null&&(s=new Xae(n)),o},o.projection(e).digits(n).context(t)}function oM(e){return function(t){var n=new Xz;for(var r in e)n[r]=e[r];return n.stream=t,n}}function Xz(){}Xz.prototype={constructor:Xz,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function hK(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),Oy(n,e.stream(fD)),t(fD.result()),r!=null&&e.clipExtent(r),e}function aM(e,t,n){return hK(e,function(r){var i=t[1][0]-t[0][0],s=t[1][1]-t[0][1],o=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),a=+t[0][0]+(i-o*(r[1][0]+r[0][0]))/2,u=+t[0][1]+(s-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([a,u])},n)}function pK(e,t,n){return aM(e,[[0,0],t],n)}function mK(e,t,n){return hK(e,function(r){var i=+t,s=i/(r[1][0]-r[0][0]),o=(i-s*(r[1][0]+r[0][0]))/2,a=-s*r[0][1];e.scale(150*s).translate([o,a])},n)}function gK(e,t,n){return hK(e,function(r){var i=+t,s=i/(r[1][1]-r[0][1]),o=-s*r[0][0],a=(i-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([o,a])},n)}var Qae=16,t0t=Wn(30*zr);function Jae(e,t){return+t?r0t(e,t):n0t(e)}function n0t(e){return oM({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function r0t(e,t){function n(r,i,s,o,a,u,l,c,f,d,h,p,m,g){var b=l-r,y=c-i,x=b*b+y*y;if(x>4*t&&m--){var w=o+d,T=a+h,A=u+p,k=af(w*w+T*T+A*A),I=rd(A/=k),O=hi(hi(A)-1)<Yn||hi(s-f)<Yn?(s+f)/2:Jh(T,w),M=e(O,I),L=M[0],H=M[1],D=L-r,B=H-i,U=y*D-b*B;(U*U/x>t||hi((b*D+y*B)/x-.5)>.3||o*d+a*h+u*p<t0t)&&(n(r,i,s,o,a,u,L,H,O,w/=k,T/=k,A,m,g),g.point(L,H),n(L,H,O,w,T,A,l,c,f,d,h,p,m,g))}}return function(r){var i,s,o,a,u,l,c,f,d,h,p,m,g={point:b,lineStart:y,lineEnd:w,polygonStart:function(){r.polygonStart(),g.lineStart=T},polygonEnd:function(){r.polygonEnd(),g.lineStart=y}};function b(I,O){I=e(I,O),r.point(I[0],I[1])}function y(){f=NaN,g.point=x,r.lineStart()}function x(I,O){var M=ew([I,O]),L=e(I,O);n(f,d,c,h,p,m,f=L[0],d=L[1],c=I,h=M[0],p=M[1],m=M[2],Qae,r),r.point(f,d)}function w(){g.point=b,r.lineEnd()}function T(){y(),g.point=A,g.lineEnd=k}function A(I,O){x(i=I,O),s=f,o=d,a=h,u=p,l=m,g.point=x}function k(){n(f,d,c,h,p,m,s,o,i,a,u,l,Qae,r),g.lineEnd=w,w()}return g}}var i0t=oM({point:function(e,t){this.stream.point(e*zr,t*zr)}});function s0t(e){return oM({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function o0t(e,t,n,r,i){function s(o,a){return o*=r,a*=i,[t+e*o,n-e*a]}return s.invert=function(o,a){return[(o-t)/e*r,(n-a)/e*i]},s}function Zae(e,t,n,r,i,s){if(!s)return o0t(e,t,n,r,i);var o=Wn(s),a=Fn(s),u=o*e,l=a*e,c=o/e,f=a/e,d=(a*n-o*t)/e,h=(a*t+o*n)/e;function p(m,g){return m*=r,g*=i,[u*m-l*g+t,n-l*m-u*g]}return p.invert=function(m,g){return[r*(c*m-f*g+d),i*(h-f*m-c*g)]},p}function Eg(e){return oEe(function(){return e})()}function oEe(e){var t,n=150,r=480,i=250,s=0,o=0,a=0,u=0,l=0,c,f=0,d=1,h=1,p=null,m=zae,g=null,b,y,x,w=v4,T=.5,A,k,I,O,M;function L(U){return I(U[0]*zr,U[1]*zr)}function H(U){return U=I.invert(U[0],U[1]),U&&[U[0]*pa,U[1]*pa]}L.stream=function(U){return O&&M===U?O:O=i0t(s0t(c)(m(A(w(M=U)))))},L.preclip=function(U){return arguments.length?(m=U,p=void 0,B()):m},L.postclip=function(U){return arguments.length?(w=U,g=b=y=x=null,B()):w},L.clipAngle=function(U){return arguments.length?(m=+U?Upt(p=U*zr):(p=null,zae),B()):p*pa},L.clipExtent=function(U){return arguments.length?(w=U==null?(g=b=y=x=null,v4):G2e(g=+U[0][0],b=+U[0][1],y=+U[1][0],x=+U[1][1]),B()):g==null?null:[[g,b],[y,x]]},L.scale=function(U){return arguments.length?(n=+U,D()):n},L.translate=function(U){return arguments.length?(r=+U[0],i=+U[1],D()):[r,i]},L.center=function(U){return arguments.length?(s=U[0]%360*zr,o=U[1]%360*zr,D()):[s*pa,o*pa]},L.rotate=function(U){return arguments.length?(a=U[0]%360*zr,u=U[1]%360*zr,l=U.length>2?U[2]%360*zr:0,D()):[a*pa,u*pa,l*pa]},L.angle=function(U){return arguments.length?(f=U%360*zr,D()):f*pa},L.reflectX=function(U){return arguments.length?(d=U?-1:1,D()):d<0},L.reflectY=function(U){return arguments.length?(h=U?-1:1,D()):h<0},L.precision=function(U){return arguments.length?(A=Jae(k,T=U*U),B()):af(T)},L.fitExtent=function(U,G){return aM(L,U,G)},L.fitSize=function(U,G){return pK(L,U,G)},L.fitWidth=function(U,G){return mK(L,U,G)},L.fitHeight=function(U,G){return gK(L,U,G)};function D(){var U=Zae(n,0,0,d,h,f).apply(null,t(s,o)),G=Zae(n,r-U[0],i-U[1],d,h,f);return c=V2e(a,u,l),k=jz(t,G),I=jz(c,k),A=Jae(k,T),B()}function B(){return O=M=null,L}return function(){return t=e.apply(this,arguments),L.invert=t.invert&&H,D()}}function yK(e){var t=0,n=Wr/3,r=oEe(e),i=r(t,n);return i.parallels=function(s){return arguments.length?r(t=s[0]*zr,n=s[1]*zr):[t*pa,n*pa]},i}function a0t(e){var t=Wn(e);function n(r,i){return[r*t,Fn(i)/t]}return n.invert=function(r,i){return[r/t,rd(i*t)]},n}function u0t(e,t){var n=Fn(e),r=(n+Fn(t))/2;if(hi(r)<Yn)return a0t(e);var i=1+n*(2*r-n),s=af(i)/r;function o(a,u){var l=af(i-2*r*Fn(u))/r;return[l*Fn(a*=r),s-l*Wn(a)]}return o.invert=function(a,u){var l=s-u,c=Jh(a,hi(l))*qh(l);return l*r<0&&(c-=Wr*qh(a)*qh(l)),[c/r,rd((i-(a*a+l*l)*r*r)/(2*r))]},o}function mD(){return yK(u0t).scale(155.424).center([0,33.6442])}function aEe(){return mD().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function l0t(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function c0t(){var e,t,n=aEe(),r,i=mD().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=mD().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,u,l={point:function(d,h){u=[d,h]}};function c(d){var h=d[0],p=d[1];return u=null,r.point(h,p),u||(s.point(h,p),u)||(a.point(h,p),u)}c.invert=function(d){var h=n.scale(),p=n.translate(),m=(d[0]-p[0])/h,g=(d[1]-p[1])/h;return(g>=.12&&g<.234&&m>=-.425&&m<-.214?i:g>=.166&&g<.234&&m>=-.214&&m<-.115?o:n).invert(d)},c.stream=function(d){return e&&t===d?e:e=l0t([n.stream(t=d),i.stream(d),o.stream(d)])},c.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),o.precision(d),f()):n.precision()},c.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),o.scale(d),c.translate(n.translate())):n.scale()},c.translate=function(d){if(!arguments.length)return n.translate();var h=n.scale(),p=+d[0],m=+d[1];return r=n.translate(d).clipExtent([[p-.455*h,m-.238*h],[p+.455*h,m+.238*h]]).stream(l),s=i.translate([p-.307*h,m+.201*h]).clipExtent([[p-.425*h+Yn,m+.12*h+Yn],[p-.214*h-Yn,m+.234*h-Yn]]).stream(l),a=o.translate([p-.205*h,m+.212*h]).clipExtent([[p-.214*h+Yn,m+.166*h+Yn],[p-.115*h-Yn,m+.234*h-Yn]]).stream(l),f()},c.fitExtent=function(d,h){return aM(c,d,h)},c.fitSize=function(d,h){return pK(c,d,h)},c.fitWidth=function(d,h){return mK(c,d,h)},c.fitHeight=function(d,h){return gK(c,d,h)};function f(){return e=t=null,c}return c.scale(1070)}function uEe(e){return function(t,n){var r=Wn(t),i=Wn(n),s=e(r*i);return s===1/0?[2,0]:[s*i*Fn(t),s*Fn(n)]}}function BR(e){return function(t,n){var r=af(t*t+n*n),i=e(r),s=Fn(i),o=Wn(i);return[Jh(t*s,r*o),rd(r&&n*s/r)]}}var lEe=uEe(function(e){return af(2/(1+e))});lEe.invert=BR(function(e){return 2*rd(e/2)});function f0t(){return Eg(lEe).scale(124.75).clipAngle(180-.001)}var cEe=uEe(function(e){return(e=N2e(e))&&e/Fn(e)});cEe.invert=BR(function(e){return e});function d0t(){return Eg(cEe).scale(79.4188).clipAngle(180-.001)}function uM(e,t){return[e,XN(fK((qo+t)/2))]}uM.invert=function(e,t){return[e,2*HT(P2e(t))-qo]};function h0t(){return fEe(uM).scale(961/of)}function fEe(e){var t=Eg(e),n=t.center,r=t.scale,i=t.translate,s=t.clipExtent,o=null,a,u,l;t.scale=function(f){return arguments.length?(r(f),c()):r()},t.translate=function(f){return arguments.length?(i(f),c()):i()},t.center=function(f){return arguments.length?(n(f),c()):n()},t.clipExtent=function(f){return arguments.length?(f==null?o=a=u=l=null:(o=+f[0][0],a=+f[0][1],u=+f[1][0],l=+f[1][1]),c()):o==null?null:[[o,a],[u,l]]};function c(){var f=Wr*r(),d=t(Dpt(t.rotate()).invert([0,0]));return s(o==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:e===uM?[[Math.max(d[0]-f,o),a],[Math.min(d[0]+f,u),l]]:[[o,Math.max(d[1]-f,a)],[u,Math.min(d[1]+f,l)]])}return c()}function V6(e){return fK((qo+e)/2)}function p0t(e,t){var n=Wn(e),r=e===t?Fn(e):XN(n/Wn(t))/XN(V6(t)/V6(e)),i=n*O$(V6(e),r)/r;if(!r)return uM;function s(o,a){i>0?a<-qo+Yn&&(a=-qo+Yn):a>qo-Yn&&(a=qo-Yn);var u=i/O$(V6(a),r);return[u*Fn(r*o),i-u*Wn(r*o)]}return s.invert=function(o,a){var u=i-a,l=qh(r)*af(o*o+u*u),c=Jh(o,hi(u))*qh(u);return u*r<0&&(c-=Wr*qh(o)*qh(u)),[c/r,2*HT(O$(i/l,1/r))-qo]},s}function m0t(){return yK(p0t).scale(109.5).parallels([30,30])}function gD(e,t){return[e,t]}gD.invert=gD;function g0t(){return Eg(gD).scale(152.63)}function y0t(e,t){var n=Wn(e),r=e===t?Fn(e):(n-Wn(t))/(t-e),i=n/r+e;if(hi(r)<Yn)return gD;function s(o,a){var u=i-a,l=r*o;return[u*Fn(l),i-u*Wn(l)]}return s.invert=function(o,a){var u=i-a,l=Jh(o,hi(u))*qh(u);return u*r<0&&(l-=Wr*qh(o)*qh(u)),[l/r,i-qh(r)*af(o*o+u*u)]},s}function v0t(){return yK(y0t).scale(131.154).center([0,13.9389])}var Sk=1.340264,Tk=-.081106,Ck=893e-6,Ak=.003796,yD=af(3)/2,b0t=12;function dEe(e,t){var n=rd(yD*Fn(t)),r=n*n,i=r*r*r;return[e*Wn(n)/(yD*(Sk+3*Tk*r+i*(7*Ck+9*Ak*r))),n*(Sk+Tk*r+i*(Ck+Ak*r))]}dEe.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,s=0,o,a,u;s<b0t&&(a=n*(Sk+Tk*r+i*(Ck+Ak*r))-t,u=Sk+3*Tk*r+i*(7*Ck+9*Ak*r),n-=o=a/u,r=n*n,i=r*r*r,!(hi(o)<Iz));++s);return[yD*e*(Sk+3*Tk*r+i*(7*Ck+9*Ak*r))/Wn(n),rd(Fn(n)/yD)]};function x0t(){return Eg(dEe).scale(177.158)}function hEe(e,t){var n=Wn(t),r=Wn(e)*n;return[n*Fn(e)/r,Fn(t)/r]}hEe.invert=BR(HT);function _0t(){return Eg(hEe).scale(144.049).clipAngle(60)}function w0t(){var e=1,t=0,n=0,r=1,i=1,s=0,o,a,u=null,l,c,f,d=1,h=1,p=oM({point:function(w,T){var A=x([w,T]);this.stream.point(A[0],A[1])}}),m=v4,g,b;function y(){return d=e*r,h=e*i,g=b=null,x}function x(w){var T=w[0]*d,A=w[1]*h;if(s){var k=A*o-T*a;T=T*o+A*a,A=k}return[T+t,A+n]}return x.invert=function(w){var T=w[0]-t,A=w[1]-n;if(s){var k=A*o+T*a;T=T*o-A*a,A=k}return[T/d,A/h]},x.stream=function(w){return g&&b===w?g:g=p(m(b=w))},x.postclip=function(w){return arguments.length?(m=w,u=l=c=f=null,y()):m},x.clipExtent=function(w){return arguments.length?(m=w==null?(u=l=c=f=null,v4):G2e(u=+w[0][0],l=+w[0][1],c=+w[1][0],f=+w[1][1]),y()):u==null?null:[[u,l],[c,f]]},x.scale=function(w){return arguments.length?(e=+w,y()):e},x.translate=function(w){return arguments.length?(t=+w[0],n=+w[1],y()):[t,n]},x.angle=function(w){return arguments.length?(s=w%360*zr,a=Fn(s),o=Wn(s),y()):s*pa},x.reflectX=function(w){return arguments.length?(r=w?-1:1,y()):r<0},x.reflectY=function(w){return arguments.length?(i=w?-1:1,y()):i<0},x.fitExtent=function(w,T){return aM(x,w,T)},x.fitSize=function(w,T){return pK(x,w,T)},x.fitWidth=function(w,T){return mK(x,w,T)},x.fitHeight=function(w,T){return gK(x,w,T)},x}function pEe(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}pEe.invert=function(e,t){var n=t,r=25,i;do{var s=n*n,o=s*s;n-=i=(n*(1.007226+s*(.015085+o*(-.044475+.028874*s-.005916*o)))-t)/(1.007226+s*(.015085*3+o*(-.044475*7+.028874*9*s-.005916*11*o)))}while(hi(i)>Yn&&--r>0);return[e/(.8707+(s=n*n)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),n]};function E0t(){return Eg(pEe).scale(175.295)}function mEe(e,t){return[Wn(t)*Fn(e),Fn(t)]}mEe.invert=BR(rd);function S0t(){return Eg(mEe).scale(249.5).clipAngle(90+Yn)}function gEe(e,t){var n=Wn(t),r=1+Wn(e)*n;return[n*Fn(e)/r,Fn(t)/r]}gEe.invert=BR(function(e){return 2*HT(e)});function T0t(){return Eg(gEe).scale(250).clipAngle(142)}function yEe(e,t){return[XN(fK((qo+t)/2)),-e]}yEe.invert=function(e,t){return[-t,2*HT(P2e(e))-qo]};function C0t(){var e=fEe(yEe),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function A0t(e,t){return e.parent===t.parent?1:2}function k0t(e){return e.reduce(R0t,0)/e.length}function R0t(e,t){return e+t.x}function I0t(e){return 1+e.reduce(P0t,0)}function P0t(e,t){return Math.max(e,t.y)}function N0t(e){for(var t;t=e.children;)e=t[0];return e}function D0t(e){for(var t;t=e.children;)e=t[t.length-1];return e}function O0t(){var e=A0t,t=1,n=1,r=!1;function i(s){var o,a=0;s.eachAfter(function(d){var h=d.children;h?(d.x=k0t(h),d.y=I0t(h)):(d.x=o?a+=e(d,o):0,d.y=0,o=d)});var u=N0t(s),l=D0t(s),c=u.x-e(u,l)/2,f=l.x+e(l,u)/2;return s.eachAfter(r?function(d){d.x=(d.x-s.x)*t,d.y=(s.y-d.y)*n}:function(d){d.x=(d.x-c)/(f-c)*t,d.y=(1-(s.y?d.y/s.y:1))*n})}return i.separation=function(s){return arguments.length?(e=s,i):e},i.size=function(s){return arguments.length?(r=!1,t=+s[0],n=+s[1],i):r?null:[t,n]},i.nodeSize=function(s){return arguments.length?(r=!0,t=+s[0],n=+s[1],i):r?[t,n]:null},i}function M0t(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function L0t(){return this.eachAfter(M0t)}function F0t(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function $0t(e,t){for(var n=this,r=[n],i,s,o=-1;n=r.pop();)if(e.call(t,n,++o,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function B0t(e,t){for(var n=this,r=[n],i=[],s,o,a,u=-1;n=r.pop();)if(i.push(n),s=n.children)for(o=0,a=s.length;o<a;++o)r.push(s[o]);for(;n=i.pop();)e.call(t,n,++u,this);return this}function j0t(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function U0t(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function z0t(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function V0t(e){for(var t=this,n=H0t(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function H0t(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function q0t(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function W0t(){return Array.from(this)}function G0t(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function Y0t(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*K0t(){var e=this,t,n=[e],r,i,s;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);while(n.length)}function vK(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=J0t)):t===void 0&&(t=Q0t);for(var n=new RS(e),r,i=[n],s,o,a,u;r=i.pop();)if((o=t(r.data))&&(u=(o=Array.from(o)).length))for(r.children=o,a=u-1;a>=0;--a)i.push(s=o[a]=new RS(o[a])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(vEe)}function X0t(){return vK(this).eachBefore(Z0t)}function Q0t(e){return e.children}function J0t(e){return Array.isArray(e)?e[1]:null}function Z0t(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function vEe(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function RS(e){this.data=e,this.depth=this.height=0,this.parent=null}RS.prototype=vK.prototype={constructor:RS,count:L0t,each:F0t,eachAfter:B0t,eachBefore:$0t,find:j0t,sum:U0t,sort:z0t,path:V0t,ancestors:q0t,descendants:W0t,leaves:G0t,links:Y0t,copy:X0t,[Symbol.iterator]:K0t};function w8(e){return e==null?null:bEe(e)}function bEe(e){if(typeof e!="function")throw new Error;return e}function h_(){return 0}function _E(e){return function(){return e}}const emt=1664525,tmt=1013904223,eue=4294967296;function nmt(){let e=1;return()=>(e=(emt*e+tmt)%eue)/eue}function rmt(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function imt(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function smt(e,t){for(var n=0,r=(e=imt(Array.from(e),t)).length,i=[],s,o;n<r;)s=e[n],o&&xEe(o,s)?++n:(o=amt(i=omt(i,s)),n=0);return o}function omt(e,t){var n,r;if(B$(t,e))return[t];for(n=0;n<e.length;++n)if(H6(t,e[n])&&B$(F3(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(H6(F3(e[n],e[r]),t)&&H6(F3(e[n],t),e[r])&&H6(F3(e[r],t),e[n])&&B$(_Ee(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function H6(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function xEe(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function B$(e,t){for(var n=0;n<t.length;++n)if(!xEe(e,t[n]))return!1;return!0}function amt(e){switch(e.length){case 1:return umt(e[0]);case 2:return F3(e[0],e[1]);case 3:return _Ee(e[0],e[1],e[2])}}function umt(e){return{x:e.x,y:e.y,r:e.r}}function F3(e,t){var n=e.x,r=e.y,i=e.r,s=t.x,o=t.y,a=t.r,u=s-n,l=o-r,c=a-i,f=Math.sqrt(u*u+l*l);return{x:(n+s+u/f*c)/2,y:(r+o+l/f*c)/2,r:(f+i+a)/2}}function _Ee(e,t,n){var r=e.x,i=e.y,s=e.r,o=t.x,a=t.y,u=t.r,l=n.x,c=n.y,f=n.r,d=r-o,h=r-l,p=i-a,m=i-c,g=u-s,b=f-s,y=r*r+i*i-s*s,x=y-o*o-a*a+u*u,w=y-l*l-c*c+f*f,T=h*p-d*m,A=(p*w-m*x)/(T*2)-r,k=(m*g-p*b)/T,I=(h*x-d*w)/(T*2)-i,O=(d*b-h*g)/T,M=k*k+O*O-1,L=2*(s+A*k+I*O),H=A*A+I*I-s*s,D=-(Math.abs(M)>1e-6?(L+Math.sqrt(L*L-4*M*H))/(2*M):H/L);return{x:r+A+k*D,y:i+I+O*D,r:D}}function tue(e,t,n){var r=e.x-t.x,i,s,o=e.y-t.y,a,u,l=r*r+o*o;l?(s=t.r+n.r,s*=s,u=e.r+n.r,u*=u,s>u?(i=(l+u-s)/(2*l),a=Math.sqrt(Math.max(0,u/l-i*i)),n.x=e.x-i*r-a*o,n.y=e.y-i*o+a*r):(i=(l+s-u)/(2*l),a=Math.sqrt(Math.max(0,s/l-i*i)),n.x=t.x+i*r-a*o,n.y=t.y+i*o+a*r)):(n.x=t.x+n.r,n.y=t.y)}function nue(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function rue(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,s=(t.y*n.r+n.y*t.r)/r;return i*i+s*s}function q6(e){this._=e,this.next=null,this.previous=null}function lmt(e,t){if(!(s=(e=rmt(e)).length))return 0;var n,r,i,s,o,a,u,l,c,f,d;if(n=e[0],n.x=0,n.y=0,!(s>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(s>2))return n.r+r.r;tue(r,n,i=e[2]),n=new q6(n),r=new q6(r),i=new q6(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(u=3;u<s;++u){tue(n._,r._,i=e[u]),i=new q6(i),l=r.next,c=n.previous,f=r._.r,d=n._.r;do if(f<=d){if(nue(l._,i._)){r=l,n.next=r,r.previous=n,--u;continue e}f+=l._.r,l=l.next}else{if(nue(c._,i._)){n=c,n.next=r,r.previous=n,--u;continue e}d+=c._.r,c=c.previous}while(l!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,o=rue(n);(i=i.next)!==r;)(a=rue(i))<o&&(n=i,o=a);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=smt(n,t),u=0;u<s;++u)n=e[u],n.x-=i.x,n.y-=i.y;return i.r}function cmt(e){return Math.sqrt(e.value)}function fmt(){var e=null,t=1,n=1,r=h_;function i(s){const o=nmt();return s.x=t/2,s.y=n/2,e?s.eachBefore(iue(e)).eachAfter(j$(r,.5,o)).eachBefore(sue(1)):s.eachBefore(iue(cmt)).eachAfter(j$(h_,1,o)).eachAfter(j$(r,s.r/Math.min(t,n),o)).eachBefore(sue(Math.min(t,n)/(2*s.r))),s}return i.radius=function(s){return arguments.length?(e=w8(s),i):e},i.size=function(s){return arguments.length?(t=+s[0],n=+s[1],i):[t,n]},i.padding=function(s){return arguments.length?(r=typeof s=="function"?s:_E(+s),i):r},i}function iue(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function j$(e,t,n){return function(r){if(i=r.children){var i,s,o=i.length,a=e(r)*t||0,u;if(a)for(s=0;s<o;++s)i[s].r+=a;if(u=lmt(i,n),a)for(s=0;s<o;++s)i[s].r-=a;r.r=u+a}}}function sue(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function wEe(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function jR(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(r-t)/e.value;++a<u;)o=s[a],o.y0=n,o.y1=i,o.x0=t,o.x1=t+=o.value*l}function dmt(){var e=1,t=1,n=0,r=!1;function i(o){var a=o.height+1;return o.x0=o.y0=n,o.x1=e,o.y1=t/a,o.eachBefore(s(t,a)),r&&o.eachBefore(wEe),o}function s(o,a){return function(u){u.children&&jR(u,u.x0,o*(u.depth+1)/a,u.x1,o*(u.depth+2)/a);var l=u.x0,c=u.y0,f=u.x1-n,d=u.y1-n;f<l&&(l=f=(l+f)/2),d<c&&(c=d=(c+d)/2),u.x0=l,u.y0=c,u.x1=f,u.y1=d}}return i.round=function(o){return arguments.length?(r=!!o,i):r},i.size=function(o){return arguments.length?(e=+o[0],t=+o[1],i):[e,t]},i.padding=function(o){return arguments.length?(n=+o,i):n},i}var hmt={depth:-1},oue={},U$={};function pmt(e){return e.id}function mmt(e){return e.parentId}function aue(){var e=pmt,t=mmt,n;function r(i){var s=Array.from(i),o=e,a=t,u,l,c,f,d,h,p,m,g=new Map;if(n!=null){const b=s.map((w,T)=>gmt(n(w,T,i))),y=b.map(uue),x=new Set(b).add("");for(const w of y)x.has(w)||(x.add(w),b.push(w),y.push(uue(w)),s.push(U$));o=(w,T)=>b[T],a=(w,T)=>y[T]}for(c=0,u=s.length;c<u;++c)l=s[c],h=s[c]=new RS(l),(p=o(l,c,i))!=null&&(p+="")&&(m=h.id=p,g.set(m,g.has(m)?oue:h)),(p=a(l,c,i))!=null&&(p+="")&&(h.parent=p);for(c=0;c<u;++c)if(h=s[c],p=h.parent){if(d=g.get(p),!d)throw new Error("missing: "+p);if(d===oue)throw new Error("ambiguous: "+p);d.children?d.children.push(h):d.children=[h],h.parent=d}else{if(f)throw new Error("multiple roots");f=h}if(!f)throw new Error("no root");if(n!=null){for(;f.data===U$&&f.children.length===1;)f=f.children[0],--u;for(let b=s.length-1;b>=0&&(h=s[b],h.data===U$);--b)h.data=null}if(f.parent=hmt,f.eachBefore(function(b){b.depth=b.parent.depth+1,--u}).eachBefore(vEe),f.parent=null,u>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(e=w8(i),r):e},r.parentId=function(i){return arguments.length?(t=w8(i),r):t},r.path=function(i){return arguments.length?(n=w8(i),r):n},r}function gmt(e){e=`${e}`;let t=e.length;return Qz(e,t-1)&&!Qz(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function uue(e){let t=e.length;if(t<2)return"";for(;--t>1&&!Qz(e,t););return e.slice(0,t)}function Qz(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function ymt(e,t){return e.parent===t.parent?1:2}function z$(e){var t=e.children;return t?t[0]:e.t}function V$(e){var t=e.children;return t?t[t.length-1]:e.t}function vmt(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function bmt(e){for(var t=0,n=0,r=e.children,i=r.length,s;--i>=0;)s=r[i],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function xmt(e,t,n){return e.a.parent===t.parent?e.a:n}function E8(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}E8.prototype=Object.create(RS.prototype);function _mt(e){for(var t=new E8(e,0),n,r=[t],i,s,o,a;n=r.pop();)if(s=n._.children)for(n.children=new Array(a=s.length),o=a-1;o>=0;--o)r.push(i=n.children[o]=new E8(s[o],o)),i.parent=n;return(t.parent=new E8(null,0)).children=[t],t}function wmt(){var e=ymt,t=1,n=1,r=null;function i(l){var c=_mt(l);if(c.eachAfter(s),c.parent.m=-c.z,c.eachBefore(o),r)l.eachBefore(u);else{var f=l,d=l,h=l;l.eachBefore(function(y){y.x<f.x&&(f=y),y.x>d.x&&(d=y),y.depth>h.depth&&(h=y)});var p=f===d?1:e(f,d)/2,m=p-f.x,g=t/(d.x+p+m),b=n/(h.depth||1);l.eachBefore(function(y){y.x=(y.x+m)*g,y.y=y.depth*b})}return l}function s(l){var c=l.children,f=l.parent.children,d=l.i?f[l.i-1]:null;if(c){bmt(l);var h=(c[0].z+c[c.length-1].z)/2;d?(l.z=d.z+e(l._,d._),l.m=l.z-h):l.z=h}else d&&(l.z=d.z+e(l._,d._));l.parent.A=a(l,d,l.parent.A||f[0])}function o(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function a(l,c,f){if(c){for(var d=l,h=l,p=c,m=d.parent.children[0],g=d.m,b=h.m,y=p.m,x=m.m,w;p=V$(p),d=z$(d),p&&d;)m=z$(m),h=V$(h),h.a=l,w=p.z+y-d.z-g+e(p._,d._),w>0&&(vmt(xmt(p,l,f),l,w),g+=w,b+=w),y+=p.m,g+=d.m,x+=m.m,b+=h.m;p&&!V$(h)&&(h.t=p,h.m+=y-b),d&&!z$(m)&&(m.t=d,m.m+=g-x,f=l)}return f}function u(l){l.x*=t,l.y=l.depth*n}return i.separation=function(l){return arguments.length?(e=l,i):e},i.size=function(l){return arguments.length?(r=!1,t=+l[0],n=+l[1],i):r?null:[t,n]},i.nodeSize=function(l){return arguments.length?(r=!0,t=+l[0],n=+l[1],i):r?[t,n]:null},i}function lM(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(i-n)/e.value;++a<u;)o=s[a],o.x0=t,o.x1=r,o.y0=n,o.y1=n+=o.value*l}var EEe=(1+Math.sqrt(5))/2;function SEe(e,t,n,r,i,s){for(var o=[],a=t.children,u,l,c=0,f=0,d=a.length,h,p,m=t.value,g,b,y,x,w,T,A;c<d;){h=i-n,p=s-r;do g=a[f++].value;while(!g&&f<d);for(b=y=g,T=Math.max(p/h,h/p)/(m*e),A=g*g*T,w=Math.max(y/A,A/b);f<d;++f){if(g+=l=a[f].value,l<b&&(b=l),l>y&&(y=l),A=g*g*T,x=Math.max(y/A,A/b),x>w){g-=l;break}w=x}o.push(u={value:g,dice:h<p,children:a.slice(c,f)}),u.dice?jR(u,n,r,i,m?r+=p*g/m:s):lM(u,n,r,m?n+=h*g/m:i,s),m-=g,c=f}return o}const TEe=function e(t){function n(r,i,s,o,a){SEe(t,r,i,s,o,a)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(EEe);function Emt(){var e=TEe,t=!1,n=1,r=1,i=[0],s=h_,o=h_,a=h_,u=h_,l=h_;function c(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(f),i=[0],t&&d.eachBefore(wEe),d}function f(d){var h=i[d.depth],p=d.x0+h,m=d.y0+h,g=d.x1-h,b=d.y1-h;g<p&&(p=g=(p+g)/2),b<m&&(m=b=(m+b)/2),d.x0=p,d.y0=m,d.x1=g,d.y1=b,d.children&&(h=i[d.depth+1]=s(d)/2,p+=l(d)-h,m+=o(d)-h,g-=a(d)-h,b-=u(d)-h,g<p&&(p=g=(p+g)/2),b<m&&(m=b=(m+b)/2),e(d,p,m,g,b))}return c.round=function(d){return arguments.length?(t=!!d,c):t},c.size=function(d){return arguments.length?(n=+d[0],r=+d[1],c):[n,r]},c.tile=function(d){return arguments.length?(e=bEe(d),c):e},c.padding=function(d){return arguments.length?c.paddingInner(d).paddingOuter(d):c.paddingInner()},c.paddingInner=function(d){return arguments.length?(s=typeof d=="function"?d:_E(+d),c):s},c.paddingOuter=function(d){return arguments.length?c.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):c.paddingTop()},c.paddingTop=function(d){return arguments.length?(o=typeof d=="function"?d:_E(+d),c):o},c.paddingRight=function(d){return arguments.length?(a=typeof d=="function"?d:_E(+d),c):a},c.paddingBottom=function(d){return arguments.length?(u=typeof d=="function"?d:_E(+d),c):u},c.paddingLeft=function(d){return arguments.length?(l=typeof d=="function"?d:_E(+d),c):l},c}function Smt(e,t,n,r,i){var s=e.children,o,a=s.length,u,l=new Array(a+1);for(l[0]=u=o=0;o<a;++o)l[o+1]=u+=s[o].value;c(0,a,e.value,t,n,r,i);function c(f,d,h,p,m,g,b){if(f>=d-1){var y=s[f];y.x0=p,y.y0=m,y.x1=g,y.y1=b;return}for(var x=l[f],w=h/2+x,T=f+1,A=d-1;T<A;){var k=T+A>>>1;l[k]<w?T=k+1:A=k}w-l[T-1]<l[T]-w&&f+1<T&&--T;var I=l[T]-x,O=h-I;if(g-p>b-m){var M=h?(p*O+g*I)/h:g;c(f,T,I,p,m,M,b),c(T,d,O,M,m,g,b)}else{var L=h?(m*O+b*I)/h:b;c(f,T,I,p,m,g,L),c(T,d,O,p,L,g,b)}}}function Tmt(e,t,n,r,i){(e.depth&1?lM:jR)(e,t,n,r,i)}const Cmt=function e(t){function n(r,i,s,o,a){if((u=r._squarify)&&u.ratio===t)for(var u,l,c,f,d=-1,h,p=u.length,m=r.value;++d<p;){for(l=u[d],c=l.children,f=l.value=0,h=c.length;f<h;++f)l.value+=c[f].value;l.dice?jR(l,i,s,o,m?s+=(a-s)*l.value/m:a):lM(l,i,s,m?i+=(o-i)*l.value/m:o,a),m-=l.value}else r._squarify=u=SEe(t,r,i,s,o,a),u.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(EEe);function Sg(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Jb(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Jz=Symbol("implicit");function bK(){var e=new Yoe,t=[],n=[],r=Jz;function i(s){let o=e.get(s);if(o===void 0){if(r!==Jz)return r;e.set(s,o=t.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new Yoe;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return bK(t,n).unknown(r)},Sg.apply(i,arguments),i}function Amt(e){return function(){return e}}function Zz(e){return+e}var lue=[0,1];function Xf(e){return e}function eV(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Amt(isNaN(t)?NaN:.5)}function kmt(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function Rmt(e,t,n){var r=e[0],i=e[1],s=t[0],o=t[1];return i<r?(r=eV(i,r),s=n(o,s)):(r=eV(r,i),s=n(s,o)),function(a){return s(r(a))}}function Imt(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=eV(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(a){var u=yb(e,a,1,r)-1;return s[u](i[u](a))}}function UR(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function cM(){var e=lue,t=lue,n=Qb,r,i,s,o=Xf,a,u,l;function c(){var d=Math.min(e.length,t.length);return o!==Xf&&(o=kmt(e[0],e[d-1])),a=d>2?Imt:Rmt,u=l=null,f}function f(d){return d==null||isNaN(d=+d)?s:(u||(u=a(e.map(r),t,n)))(r(o(d)))}return f.invert=function(d){return o(i((l||(l=a(t,e.map(r),zh)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,Zz),c()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),c()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=LR,c()},f.clamp=function(d){return arguments.length?(o=d?!0:Xf,c()):o!==Xf},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(s=d,f):s},function(d,h){return r=d,i=h,c()}}function CEe(){return cM()(Xf,Xf)}function AEe(e,t,n,r){var i=vb(e,t,n),s;switch(r=Z_(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=R2e(i,o))&&(r.precision=s),cK(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=I2e(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=k2e(i))&&(r.precision=s-(r.type==="%")*2);break}}return sM(r)}function Vw(e){var t=e.domain;return e.ticks=function(n){var r=t();return gz(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return AEe(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,o=r[i],a=r[s],u,l,c=10;for(a<o&&(l=o,o=a,a=l,l=i,i=s,s=l);c-- >0;){if(l=yz(o,a,n),l===u)return r[i]=o,r[s]=a,t(r);if(l>0)o=Math.floor(o/l)*l,a=Math.ceil(a/l)*l;else if(l<0)o=Math.ceil(o*l)/l,a=Math.floor(a*l)/l;else break;u=l}return e},e}function fM(){var e=CEe();return e.copy=function(){return UR(e,fM())},Sg.apply(e,arguments),Vw(e)}function kEe(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,Zz),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return kEe(e).unknown(t)},e=arguments.length?Array.from(e,Zz):[0,1],Vw(n)}function REe(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),e[n]=t.floor(i),e[r]=t.ceil(s),e}function cue(e){return Math.log(e)}function fue(e){return Math.exp(e)}function Pmt(e){return-Math.log(-e)}function Nmt(e){return-Math.exp(-e)}function Dmt(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Omt(e){return e===10?Dmt:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Mmt(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function due(e){return(t,n)=>-e(-t,n)}function xK(e){const t=e(cue,fue),n=t.domain;let r=10,i,s;function o(){return i=Mmt(r),s=Omt(r),n()[0]<0?(i=due(i),s=due(s),e(Pmt,Nmt)):e(cue,fue),t}return t.base=function(a){return arguments.length?(r=+a,o()):r},t.domain=function(a){return arguments.length?(n(a),o()):n()},t.ticks=a=>{const u=n();let l=u[0],c=u[u.length-1];const f=c<l;f&&([l,c]=[c,l]);let d=i(l),h=i(c),p,m;const g=a==null?10:+a;let b=[];if(!(r%1)&&h-d<g){if(d=Math.floor(d),h=Math.ceil(h),l>0){for(;d<=h;++d)for(p=1;p<r;++p)if(m=d<0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;b.push(m)}}else for(;d<=h;++d)for(p=r-1;p>=1;--p)if(m=d>0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;b.push(m)}b.length*2<g&&(b=gz(l,c,g))}else b=gz(d,h,Math.min(h-d,g)).map(s);return f?b.reverse():b},t.tickFormat=(a,u)=>{if(a==null&&(a=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=Z_(u)).precision==null&&(u.trim=!0),u=sM(u)),a===1/0)return u;const l=Math.max(1,r*a/t.ticks().length);return c=>{let f=c/s(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=l?u(c):""}},t.nice=()=>n(REe(n(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),t}function IEe(){const e=xK(cM()).domain([1,10]);return e.copy=()=>UR(e,IEe()).base(e.base()),Sg.apply(e,arguments),e}function hue(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function pue(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function _K(e){var t=1,n=e(hue(t),pue(t));return n.constant=function(r){return arguments.length?e(hue(t=+r),pue(t)):t},Vw(n)}function PEe(){var e=_K(cM());return e.copy=function(){return UR(e,PEe()).constant(e.constant())},Sg.apply(e,arguments)}function mue(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Lmt(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Fmt(e){return e<0?-e*e:e*e}function wK(e){var t=e(Xf,Xf),n=1;function r(){return n===1?e(Xf,Xf):n===.5?e(Lmt,Fmt):e(mue(n),mue(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Vw(t)}function EK(){var e=wK(cM());return e.copy=function(){return UR(e,EK()).exponent(e.exponent())},Sg.apply(e,arguments),e}function $mt(){return EK.apply(null,arguments).exponent(.5)}function NEe(){var e=[],t=[],n=[],r;function i(){var o=0,a=Math.max(1,t.length);for(n=new Array(a-1);++o<a;)n[o-1]=kwe(e,o/a);return s}function s(o){return o==null||isNaN(o=+o)?r:t[yb(n,o)]}return s.invertExtent=function(o){var a=t.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let a of o)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(Jy),i()},s.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return NEe().domain(e).range(t).unknown(r)},Sg.apply(s,arguments)}function DEe(){var e=0,t=1,n=1,r=[.5],i=[0,1],s;function o(u){return u!=null&&u<=u?i[yb(r,u,0,n)]:s}function a(){var u=-1;for(r=new Array(n);++u<n;)r[u]=((u+1)*t-(u-n)*e)/(n+1);return o}return o.domain=function(u){return arguments.length?([e,t]=u,e=+e,t=+t,a()):[e,t]},o.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,a()):i.slice()},o.invertExtent=function(u){var l=i.indexOf(u);return l<0?[NaN,NaN]:l<1?[e,r[0]]:l>=n?[r[n-1],t]:[r[l-1],r[l]]},o.unknown=function(u){return arguments.length&&(s=u),o},o.thresholds=function(){return r.slice()},o.copy=function(){return DEe().domain([e,t]).range(i).unknown(s)},Sg.apply(Vw(o),arguments)}function OEe(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[yb(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return OEe().domain(e).range(t).unknown(n)},Sg.apply(i,arguments)}const H$=new Date,q$=new Date;function vu(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const u=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return u;let l;do u.push(l=new Date(+s)),t(s,a),e(s);while(l<s&&s<o);return u},i.filter=s=>vu(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;t(o,-1),!s(o););else for(;--a>=0;)for(;t(o,1),!s(o););}),n&&(i.count=(s,o)=>(H$.setTime(+s),q$.setTime(+o),e(H$),e(q$),Math.floor(n(H$,q$))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const IS=vu(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);IS.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?vu(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):IS);IS.range;const Uy=1e3,Wh=Uy*60,zy=Wh*60,x1=zy*24,SK=x1*7,gue=x1*30,W$=x1*365,Vy=vu(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Uy)},(e,t)=>(t-e)/Uy,e=>e.getUTCSeconds());Vy.range;const dM=vu(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Uy)},(e,t)=>{e.setTime(+e+t*Wh)},(e,t)=>(t-e)/Wh,e=>e.getMinutes());dM.range;const hM=vu(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Wh)},(e,t)=>(t-e)/Wh,e=>e.getUTCMinutes());hM.range;const pM=vu(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Uy-e.getMinutes()*Wh)},(e,t)=>{e.setTime(+e+t*zy)},(e,t)=>(t-e)/zy,e=>e.getHours());pM.range;const mM=vu(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*zy)},(e,t)=>(t-e)/zy,e=>e.getUTCHours());mM.range;const e1=vu(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Wh)/x1,e=>e.getDate()-1);e1.range;const Zv=vu(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/x1,e=>e.getUTCDate()-1);Zv.range;const MEe=vu(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/x1,e=>Math.floor(e/x1));MEe.range;function Hw(e){return vu(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Wh)/SK)}const qT=Hw(0),vD=Hw(1),Bmt=Hw(2),jmt=Hw(3),PS=Hw(4),Umt=Hw(5),zmt=Hw(6);qT.range;vD.range;Bmt.range;jmt.range;PS.range;Umt.range;zmt.range;function qw(e){return vu(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/SK)}const WT=qw(0),bD=qw(1),Vmt=qw(2),Hmt=qw(3),NS=qw(4),qmt=qw(5),Wmt=qw(6);WT.range;bD.range;Vmt.range;Hmt.range;NS.range;qmt.range;Wmt.range;const _4=vu(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());_4.range;const w4=vu(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());w4.range;const lg=vu(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());lg.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:vu(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});lg.range;const cg=vu(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());cg.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:vu(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});cg.range;function LEe(e,t,n,r,i,s){const o=[[Vy,1,Uy],[Vy,5,5*Uy],[Vy,15,15*Uy],[Vy,30,30*Uy],[s,1,Wh],[s,5,5*Wh],[s,15,15*Wh],[s,30,30*Wh],[i,1,zy],[i,3,3*zy],[i,6,6*zy],[i,12,12*zy],[r,1,x1],[r,2,2*x1],[n,1,SK],[t,1,gue],[t,3,3*gue],[e,1,W$]];function a(l,c,f){const d=c<l;d&&([l,c]=[c,l]);const h=f&&typeof f.range=="function"?f:u(l,c,f),p=h?h.range(l,+c+1):[];return d?p.reverse():p}function u(l,c,f){const d=Math.abs(c-l)/f,h=zT(([,,g])=>g).right(o,d);if(h===o.length)return e.every(vb(l/W$,c/W$,f));if(h===0)return IS.every(Math.max(vb(l,c,f),1));const[p,m]=o[d/o[h-1][2]<o[h][2]/d?h-1:h];return p.every(m)}return[a,u]}const[Gmt,Ymt]=LEe(cg,w4,WT,MEe,mM,hM),[Kmt,Xmt]=LEe(lg,_4,qT,e1,pM,dM);function G$(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Y$(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function oA(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function FEe(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,o=e.shortDays,a=e.months,u=e.shortMonths,l=aA(i),c=uA(i),f=aA(s),d=uA(s),h=aA(o),p=uA(o),m=aA(a),g=uA(a),b=aA(u),y=uA(u),x={a:ee,A:ne,b:ue,B:X,c:null,d:wue,e:wue,f:bgt,g:Rgt,G:Pgt,H:ggt,I:ygt,j:vgt,L:$Ee,m:xgt,M:_gt,p:q,q:te,Q:Tue,s:Cue,S:wgt,u:Egt,U:Sgt,V:Tgt,w:Cgt,W:Agt,x:null,X:null,y:kgt,Y:Igt,Z:Ngt,"%":Sue},w={a:W,A:Z,b:oe,B:pe,c:null,d:Eue,e:Eue,f:Lgt,g:Wgt,G:Ygt,H:Dgt,I:Ogt,j:Mgt,L:jEe,m:Fgt,M:$gt,p:ce,q:he,Q:Tue,s:Cue,S:Bgt,u:jgt,U:Ugt,V:zgt,w:Vgt,W:Hgt,x:null,X:null,y:qgt,Y:Ggt,Z:Kgt,"%":Sue},T={a:M,A:L,b:H,B:D,c:B,d:xue,e:xue,f:dgt,g:bue,G:vue,H:_ue,I:_ue,j:ugt,L:fgt,m:agt,M:lgt,p:O,q:ogt,Q:pgt,s:mgt,S:cgt,u:tgt,U:ngt,V:rgt,w:egt,W:igt,x:U,X:G,y:bue,Y:vue,Z:sgt,"%":hgt};x.x=A(n,x),x.X=A(r,x),x.c=A(t,x),w.x=A(n,w),w.X=A(r,w),w.c=A(t,w);function A(Ee,Ae){return function(ge){var me=[],Oe=-1,Me=0,Ye=Ee.length,lt,We,nt;for(ge instanceof Date||(ge=new Date(+ge));++Oe<Ye;)Ee.charCodeAt(Oe)===37&&(me.push(Ee.slice(Me,Oe)),(We=yue[lt=Ee.charAt(++Oe)])!=null?lt=Ee.charAt(++Oe):We=lt==="e"?" ":"0",(nt=Ae[lt])&&(lt=nt(ge,We)),me.push(lt),Me=Oe+1);return me.push(Ee.slice(Me,Oe)),me.join("")}}function k(Ee,Ae){return function(ge){var me=oA(1900,void 0,1),Oe=I(me,Ee,ge+="",0),Me,Ye;if(Oe!=ge.length)return null;if("Q"in me)return new Date(me.Q);if("s"in me)return new Date(me.s*1e3+("L"in me?me.L:0));if(Ae&&!("Z"in me)&&(me.Z=0),"p"in me&&(me.H=me.H%12+me.p*12),me.m===void 0&&(me.m="q"in me?me.q:0),"V"in me){if(me.V<1||me.V>53)return null;"w"in me||(me.w=1),"Z"in me?(Me=Y$(oA(me.y,0,1)),Ye=Me.getUTCDay(),Me=Ye>4||Ye===0?bD.ceil(Me):bD(Me),Me=Zv.offset(Me,(me.V-1)*7),me.y=Me.getUTCFullYear(),me.m=Me.getUTCMonth(),me.d=Me.getUTCDate()+(me.w+6)%7):(Me=G$(oA(me.y,0,1)),Ye=Me.getDay(),Me=Ye>4||Ye===0?vD.ceil(Me):vD(Me),Me=e1.offset(Me,(me.V-1)*7),me.y=Me.getFullYear(),me.m=Me.getMonth(),me.d=Me.getDate()+(me.w+6)%7)}else("W"in me||"U"in me)&&("w"in me||(me.w="u"in me?me.u%7:"W"in me?1:0),Ye="Z"in me?Y$(oA(me.y,0,1)).getUTCDay():G$(oA(me.y,0,1)).getDay(),me.m=0,me.d="W"in me?(me.w+6)%7+me.W*7-(Ye+5)%7:me.w+me.U*7-(Ye+6)%7);return"Z"in me?(me.H+=me.Z/100|0,me.M+=me.Z%100,Y$(me)):G$(me)}}function I(Ee,Ae,ge,me){for(var Oe=0,Me=Ae.length,Ye=ge.length,lt,We;Oe<Me;){if(me>=Ye)return-1;if(lt=Ae.charCodeAt(Oe++),lt===37){if(lt=Ae.charAt(Oe++),We=T[lt in yue?Ae.charAt(Oe++):lt],!We||(me=We(Ee,ge,me))<0)return-1}else if(lt!=ge.charCodeAt(me++))return-1}return me}function O(Ee,Ae,ge){var me=l.exec(Ae.slice(ge));return me?(Ee.p=c.get(me[0].toLowerCase()),ge+me[0].length):-1}function M(Ee,Ae,ge){var me=h.exec(Ae.slice(ge));return me?(Ee.w=p.get(me[0].toLowerCase()),ge+me[0].length):-1}function L(Ee,Ae,ge){var me=f.exec(Ae.slice(ge));return me?(Ee.w=d.get(me[0].toLowerCase()),ge+me[0].length):-1}function H(Ee,Ae,ge){var me=b.exec(Ae.slice(ge));return me?(Ee.m=y.get(me[0].toLowerCase()),ge+me[0].length):-1}function D(Ee,Ae,ge){var me=m.exec(Ae.slice(ge));return me?(Ee.m=g.get(me[0].toLowerCase()),ge+me[0].length):-1}function B(Ee,Ae,ge){return I(Ee,t,Ae,ge)}function U(Ee,Ae,ge){return I(Ee,n,Ae,ge)}function G(Ee,Ae,ge){return I(Ee,r,Ae,ge)}function ee(Ee){return o[Ee.getDay()]}function ne(Ee){return s[Ee.getDay()]}function ue(Ee){return u[Ee.getMonth()]}function X(Ee){return a[Ee.getMonth()]}function q(Ee){return i[+(Ee.getHours()>=12)]}function te(Ee){return 1+~~(Ee.getMonth()/3)}function W(Ee){return o[Ee.getUTCDay()]}function Z(Ee){return s[Ee.getUTCDay()]}function oe(Ee){return u[Ee.getUTCMonth()]}function pe(Ee){return a[Ee.getUTCMonth()]}function ce(Ee){return i[+(Ee.getUTCHours()>=12)]}function he(Ee){return 1+~~(Ee.getUTCMonth()/3)}return{format:function(Ee){var Ae=A(Ee+="",x);return Ae.toString=function(){return Ee},Ae},parse:function(Ee){var Ae=k(Ee+="",!1);return Ae.toString=function(){return Ee},Ae},utcFormat:function(Ee){var Ae=A(Ee+="",w);return Ae.toString=function(){return Ee},Ae},utcParse:function(Ee){var Ae=k(Ee+="",!0);return Ae.toString=function(){return Ee},Ae}}}var yue={"-":"",_:" ",0:"0"},Vu=/^\s*\d+/,Qmt=/^%/,Jmt=/[\\^$*+?|[\]().{}]/g;function ki(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function Zmt(e){return e.replace(Jmt,"\\$&")}function aA(e){return new RegExp("^(?:"+e.map(Zmt).join("|")+")","i")}function uA(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function egt(e,t,n){var r=Vu.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function tgt(e,t,n){var r=Vu.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function ngt(e,t,n){var r=Vu.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function rgt(e,t,n){var r=Vu.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function igt(e,t,n){var r=Vu.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function vue(e,t,n){var r=Vu.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function bue(e,t,n){var r=Vu.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function sgt(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function ogt(e,t,n){var r=Vu.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function agt(e,t,n){var r=Vu.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function xue(e,t,n){var r=Vu.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function ugt(e,t,n){var r=Vu.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function _ue(e,t,n){var r=Vu.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function lgt(e,t,n){var r=Vu.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function cgt(e,t,n){var r=Vu.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function fgt(e,t,n){var r=Vu.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function dgt(e,t,n){var r=Vu.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function hgt(e,t,n){var r=Qmt.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function pgt(e,t,n){var r=Vu.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function mgt(e,t,n){var r=Vu.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function wue(e,t){return ki(e.getDate(),t,2)}function ggt(e,t){return ki(e.getHours(),t,2)}function ygt(e,t){return ki(e.getHours()%12||12,t,2)}function vgt(e,t){return ki(1+e1.count(lg(e),e),t,3)}function $Ee(e,t){return ki(e.getMilliseconds(),t,3)}function bgt(e,t){return $Ee(e,t)+"000"}function xgt(e,t){return ki(e.getMonth()+1,t,2)}function _gt(e,t){return ki(e.getMinutes(),t,2)}function wgt(e,t){return ki(e.getSeconds(),t,2)}function Egt(e){var t=e.getDay();return t===0?7:t}function Sgt(e,t){return ki(qT.count(lg(e)-1,e),t,2)}function BEe(e){var t=e.getDay();return t>=4||t===0?PS(e):PS.ceil(e)}function Tgt(e,t){return e=BEe(e),ki(PS.count(lg(e),e)+(lg(e).getDay()===4),t,2)}function Cgt(e){return e.getDay()}function Agt(e,t){return ki(vD.count(lg(e)-1,e),t,2)}function kgt(e,t){return ki(e.getFullYear()%100,t,2)}function Rgt(e,t){return e=BEe(e),ki(e.getFullYear()%100,t,2)}function Igt(e,t){return ki(e.getFullYear()%1e4,t,4)}function Pgt(e,t){var n=e.getDay();return e=n>=4||n===0?PS(e):PS.ceil(e),ki(e.getFullYear()%1e4,t,4)}function Ngt(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+ki(t/60|0,"0",2)+ki(t%60,"0",2)}function Eue(e,t){return ki(e.getUTCDate(),t,2)}function Dgt(e,t){return ki(e.getUTCHours(),t,2)}function Ogt(e,t){return ki(e.getUTCHours()%12||12,t,2)}function Mgt(e,t){return ki(1+Zv.count(cg(e),e),t,3)}function jEe(e,t){return ki(e.getUTCMilliseconds(),t,3)}function Lgt(e,t){return jEe(e,t)+"000"}function Fgt(e,t){return ki(e.getUTCMonth()+1,t,2)}function $gt(e,t){return ki(e.getUTCMinutes(),t,2)}function Bgt(e,t){return ki(e.getUTCSeconds(),t,2)}function jgt(e){var t=e.getUTCDay();return t===0?7:t}function Ugt(e,t){return ki(WT.count(cg(e)-1,e),t,2)}function UEe(e){var t=e.getUTCDay();return t>=4||t===0?NS(e):NS.ceil(e)}function zgt(e,t){return e=UEe(e),ki(NS.count(cg(e),e)+(cg(e).getUTCDay()===4),t,2)}function Vgt(e){return e.getUTCDay()}function Hgt(e,t){return ki(bD.count(cg(e)-1,e),t,2)}function qgt(e,t){return ki(e.getUTCFullYear()%100,t,2)}function Wgt(e,t){return e=UEe(e),ki(e.getUTCFullYear()%100,t,2)}function Ggt(e,t){return ki(e.getUTCFullYear()%1e4,t,4)}function Ygt(e,t){var n=e.getUTCDay();return e=n>=4||n===0?NS(e):NS.ceil(e),ki(e.getUTCFullYear()%1e4,t,4)}function Kgt(){return"+0000"}function Sue(){return"%"}function Tue(e){return+e}function Cue(e){return Math.floor(+e/1e3)}var Q2,TK,zEe,CK,VEe;Xgt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Xgt(e){return Q2=FEe(e),TK=Q2.format,zEe=Q2.parse,CK=Q2.utcFormat,VEe=Q2.utcParse,Q2}function Qgt(e){return new Date(e)}function Jgt(e){return e instanceof Date?+e:+new Date(+e)}function AK(e,t,n,r,i,s,o,a,u,l){var c=CEe(),f=c.invert,d=c.domain,h=l(".%L"),p=l(":%S"),m=l("%I:%M"),g=l("%I %p"),b=l("%a %d"),y=l("%b %d"),x=l("%B"),w=l("%Y");function T(A){return(u(A)<A?h:a(A)<A?p:o(A)<A?m:s(A)<A?g:r(A)<A?i(A)<A?b:y:n(A)<A?x:w)(A)}return c.invert=function(A){return new Date(f(A))},c.domain=function(A){return arguments.length?d(Array.from(A,Jgt)):d().map(Qgt)},c.ticks=function(A){var k=d();return e(k[0],k[k.length-1],A??10)},c.tickFormat=function(A,k){return k==null?T:l(k)},c.nice=function(A){var k=d();return(!A||typeof A.range!="function")&&(A=t(k[0],k[k.length-1],A??10)),A?d(REe(k,A)):c},c.copy=function(){return UR(c,AK(e,t,n,r,i,s,o,a,u,l))},c}function Zgt(){return Sg.apply(AK(Kmt,Xmt,lg,_4,qT,e1,pM,dM,Vy,TK).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function eyt(){return Sg.apply(AK(Gmt,Ymt,cg,w4,WT,Zv,mM,hM,Vy,CK).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function gM(){var e=0,t=1,n,r,i,s,o=Xf,a=!1,u;function l(f){return f==null||isNaN(f=+f)?u:o(i===0?.5:(f=(s(f)-n)*i,a?Math.max(0,Math.min(1,f)):f))}l.domain=function(f){return arguments.length?([e,t]=f,n=s(e=+e),r=s(t=+t),i=n===r?0:1/(r-n),l):[e,t]},l.clamp=function(f){return arguments.length?(a=!!f,l):a},l.interpolator=function(f){return arguments.length?(o=f,l):o};function c(f){return function(d){var h,p;return arguments.length?([h,p]=d,o=f(h,p),l):[o(0),o(1)]}}return l.range=c(Qb),l.rangeRound=c(LR),l.unknown=function(f){return arguments.length?(u=f,l):u},function(f){return s=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),l}}function Zb(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function kK(){var e=Vw(gM()(Xf));return e.copy=function(){return Zb(e,kK())},Jb.apply(e,arguments)}function HEe(){var e=xK(gM()).domain([1,10]);return e.copy=function(){return Zb(e,HEe()).base(e.base())},Jb.apply(e,arguments)}function qEe(){var e=_K(gM());return e.copy=function(){return Zb(e,qEe()).constant(e.constant())},Jb.apply(e,arguments)}function RK(){var e=wK(gM());return e.copy=function(){return Zb(e,RK()).exponent(e.exponent())},Jb.apply(e,arguments)}function tyt(){return RK.apply(null,arguments).exponent(.5)}function yM(){var e=0,t=.5,n=1,r=1,i,s,o,a,u,l=Xf,c,f=!1,d;function h(m){return isNaN(m=+m)?d:(m=.5+((m=+c(m))-s)*(r*m<r*s?a:u),l(f?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([e,t,n]=m,i=c(e=+e),s=c(t=+t),o=c(n=+n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h):[e,t,n]},h.clamp=function(m){return arguments.length?(f=!!m,h):f},h.interpolator=function(m){return arguments.length?(l=m,h):l};function p(m){return function(g){var b,y,x;return arguments.length?([b,y,x]=g,l=tK(m,[b,y,x]),h):[l(0),l(.5),l(1)]}}return h.range=p(Qb),h.rangeRound=p(LR),h.unknown=function(m){return arguments.length?(d=m,h):d},function(m){return c=m,i=m(e),s=m(t),o=m(n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h}}function WEe(){var e=Vw(yM()(Xf));return e.copy=function(){return Zb(e,WEe())},Jb.apply(e,arguments)}function GEe(){var e=xK(yM()).domain([.1,1,10]);return e.copy=function(){return Zb(e,GEe()).base(e.base())},Jb.apply(e,arguments)}function YEe(){var e=_K(yM());return e.copy=function(){return Zb(e,YEe()).constant(e.constant())},Jb.apply(e,arguments)}function IK(){var e=wK(yM());return e.copy=function(){return Zb(e,IK()).exponent(e.exponent())},Jb.apply(e,arguments)}function nyt(){return IK.apply(null,arguments).exponent(.5)}function Tg(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const ryt=Tg("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),iyt=Tg("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),syt=Tg("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),oyt=Tg("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),ayt=Tg("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),uyt=Tg("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),lyt=Tg("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),cyt=Tg("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),fyt=Tg("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),dyt=Tg("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");function Xi(e){return function(){return e}}const Aue=Math.abs,Wl=Math.atan2,Bx=Math.cos,hyt=Math.max,K$=Math.min,gm=Math.sin,C_=Math.sqrt,Gl=1e-12,DS=Math.PI,xD=DS/2,KEe=2*DS;function pyt(e){return e>1?0:e<-1?DS:Math.acos(e)}function kue(e){return e>=1?xD:e<=-1?-xD:Math.asin(e)}function vM(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new sK(t)}function myt(e){return e.innerRadius}function gyt(e){return e.outerRadius}function yyt(e){return e.startAngle}function vyt(e){return e.endAngle}function byt(e){return e&&e.padAngle}function xyt(e,t,n,r,i,s,o,a){var u=n-e,l=r-t,c=o-i,f=a-s,d=f*u-c*l;if(!(d*d<Gl))return d=(c*(t-s)-f*(e-i))/d,[e+d*u,t+d*l]}function W6(e,t,n,r,i,s,o){var a=e-n,u=t-r,l=(o?s:-s)/C_(a*a+u*u),c=l*u,f=-l*a,d=e+c,h=t+f,p=n+c,m=r+f,g=(d+p)/2,b=(h+m)/2,y=p-d,x=m-h,w=y*y+x*x,T=i-s,A=d*m-p*h,k=(x<0?-1:1)*C_(hyt(0,T*T*w-A*A)),I=(A*x-y*k)/w,O=(-A*y-x*k)/w,M=(A*x+y*k)/w,L=(-A*y+x*k)/w,H=I-g,D=O-b,B=M-g,U=L-b;return H*H+D*D>B*B+U*U&&(I=M,O=L),{cx:I,cy:O,x01:-c,y01:-f,x11:I*(i/T-1),y11:O*(i/T-1)}}function _yt(){var e=myt,t=gyt,n=Xi(0),r=null,i=yyt,s=vyt,o=byt,a=null,u=vM(l);function l(){var c,f,d=+e.apply(this,arguments),h=+t.apply(this,arguments),p=i.apply(this,arguments)-xD,m=s.apply(this,arguments)-xD,g=Aue(m-p),b=m>p;if(a||(a=c=u()),h<d&&(f=h,h=d,d=f),!(h>Gl))a.moveTo(0,0);else if(g>KEe-Gl)a.moveTo(h*Bx(p),h*gm(p)),a.arc(0,0,h,p,m,!b),d>Gl&&(a.moveTo(d*Bx(m),d*gm(m)),a.arc(0,0,d,m,p,b));else{var y=p,x=m,w=p,T=m,A=g,k=g,I=o.apply(this,arguments)/2,O=I>Gl&&(r?+r.apply(this,arguments):C_(d*d+h*h)),M=K$(Aue(h-d)/2,+n.apply(this,arguments)),L=M,H=M,D,B;if(O>Gl){var U=kue(O/d*gm(I)),G=kue(O/h*gm(I));(A-=U*2)>Gl?(U*=b?1:-1,w+=U,T-=U):(A=0,w=T=(p+m)/2),(k-=G*2)>Gl?(G*=b?1:-1,y+=G,x-=G):(k=0,y=x=(p+m)/2)}var ee=h*Bx(y),ne=h*gm(y),ue=d*Bx(T),X=d*gm(T);if(M>Gl){var q=h*Bx(x),te=h*gm(x),W=d*Bx(w),Z=d*gm(w),oe;if(g<DS)if(oe=xyt(ee,ne,W,Z,q,te,ue,X)){var pe=ee-oe[0],ce=ne-oe[1],he=q-oe[0],Ee=te-oe[1],Ae=1/gm(pyt((pe*he+ce*Ee)/(C_(pe*pe+ce*ce)*C_(he*he+Ee*Ee)))/2),ge=C_(oe[0]*oe[0]+oe[1]*oe[1]);L=K$(M,(d-ge)/(Ae-1)),H=K$(M,(h-ge)/(Ae+1))}else L=H=0}k>Gl?H>Gl?(D=W6(W,Z,ee,ne,h,H,b),B=W6(q,te,ue,X,h,H,b),a.moveTo(D.cx+D.x01,D.cy+D.y01),H<M?a.arc(D.cx,D.cy,H,Wl(D.y01,D.x01),Wl(B.y01,B.x01),!b):(a.arc(D.cx,D.cy,H,Wl(D.y01,D.x01),Wl(D.y11,D.x11),!b),a.arc(0,0,h,Wl(D.cy+D.y11,D.cx+D.x11),Wl(B.cy+B.y11,B.cx+B.x11),!b),a.arc(B.cx,B.cy,H,Wl(B.y11,B.x11),Wl(B.y01,B.x01),!b))):(a.moveTo(ee,ne),a.arc(0,0,h,y,x,!b)):a.moveTo(ee,ne),!(d>Gl)||!(A>Gl)?a.lineTo(ue,X):L>Gl?(D=W6(ue,X,q,te,d,-L,b),B=W6(ee,ne,W,Z,d,-L,b),a.lineTo(D.cx+D.x01,D.cy+D.y01),L<M?a.arc(D.cx,D.cy,L,Wl(D.y01,D.x01),Wl(B.y01,B.x01),!b):(a.arc(D.cx,D.cy,L,Wl(D.y01,D.x01),Wl(D.y11,D.x11),!b),a.arc(0,0,d,Wl(D.cy+D.y11,D.cx+D.x11),Wl(B.cy+B.y11,B.cx+B.x11),b),a.arc(B.cx,B.cy,L,Wl(B.y11,B.x11),Wl(B.y01,B.x01),!b))):a.arc(0,0,d,T,w,b)}if(a.closePath(),c)return a=null,c+""||null}return l.centroid=function(){var c=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-DS/2;return[Bx(f)*c,gm(f)*c]},l.innerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:Xi(+c),l):e},l.outerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:Xi(+c),l):t},l.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:Xi(+c),l):n},l.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:Xi(+c),l):r},l.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:Xi(+c),l):i},l.endAngle=function(c){return arguments.length?(s=typeof c=="function"?c:Xi(+c),l):s},l.padAngle=function(c){return arguments.length?(o=typeof c=="function"?c:Xi(+c),l):o},l.context=function(c){return arguments.length?(a=c??null,l):a},l}function XEe(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function QEe(e){this._context=e}QEe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function PK(e){return new QEe(e)}function JEe(e){return e[0]}function ZEe(e){return e[1]}function eSe(e,t){var n=Xi(!0),r=null,i=PK,s=null,o=vM(a);e=typeof e=="function"?e:e===void 0?JEe:Xi(e),t=typeof t=="function"?t:t===void 0?ZEe:Xi(t);function a(u){var l,c=(u=XEe(u)).length,f,d=!1,h;for(r==null&&(s=i(h=o())),l=0;l<=c;++l)!(l<c&&n(f=u[l],l,u))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+e(f,l,u),+t(f,l,u));if(h)return s=null,h+""||null}return a.x=function(u){return arguments.length?(e=typeof u=="function"?u:Xi(+u),a):e},a.y=function(u){return arguments.length?(t=typeof u=="function"?u:Xi(+u),a):t},a.defined=function(u){return arguments.length?(n=typeof u=="function"?u:Xi(!!u),a):n},a.curve=function(u){return arguments.length?(i=u,r!=null&&(s=i(r)),a):i},a.context=function(u){return arguments.length?(u==null?r=s=null:s=i(r=u),a):r},a}function tSe(e,t,n){var r=null,i=Xi(!0),s=null,o=PK,a=null,u=vM(l);e=typeof e=="function"?e:e===void 0?JEe:Xi(+e),t=typeof t=="function"?t:Xi(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?ZEe:Xi(+n);function l(f){var d,h,p,m=(f=XEe(f)).length,g,b=!1,y,x=new Array(m),w=new Array(m);for(s==null&&(a=o(y=u())),d=0;d<=m;++d){if(!(d<m&&i(g=f[d],d,f))===b)if(b=!b)h=d,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=d-1;p>=h;--p)a.point(x[p],w[p]);a.lineEnd(),a.areaEnd()}b&&(x[d]=+e(g,d,f),w[d]=+t(g,d,f),a.point(r?+r(g,d,f):x[d],n?+n(g,d,f):w[d]))}if(y)return a=null,y+""||null}function c(){return eSe().defined(i).curve(o).context(s)}return l.x=function(f){return arguments.length?(e=typeof f=="function"?f:Xi(+f),r=null,l):e},l.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Xi(+f),l):e},l.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Xi(+f),l):r},l.y=function(f){return arguments.length?(t=typeof f=="function"?f:Xi(+f),n=null,l):t},l.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Xi(+f),l):t},l.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Xi(+f),l):n},l.lineX0=l.lineY0=function(){return c().x(e).y(t)},l.lineY1=function(){return c().x(e).y(n)},l.lineX1=function(){return c().x(r).y(t)},l.defined=function(f){return arguments.length?(i=typeof f=="function"?f:Xi(!!f),l):i},l.curve=function(f){return arguments.length?(o=f,s!=null&&(a=o(s)),l):o},l.context=function(f){return arguments.length?(f==null?s=a=null:a=o(s=f),l):s},l}const wyt={draw(e,t){const n=C_(t/DS);e.moveTo(n,0),e.arc(0,0,n,0,KEe)}};function Eyt(e,t){let n=null,r=vM(i);e=typeof e=="function"?e:Xi(e||wyt),t=typeof t=="function"?t:Xi(t===void 0?64:+t);function i(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:Xi(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:Xi(+s),i):t},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function xb(){}function _D(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function bM(e){this._context=e}bM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:_D(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:_D(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Syt(e){return new bM(e)}function nSe(e){this._context=e}nSe.prototype={areaStart:xb,areaEnd:xb,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:_D(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Tyt(e){return new nSe(e)}function rSe(e){this._context=e}rSe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:_D(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Cyt(e){return new rSe(e)}function iSe(e,t){this._basis=new bM(e),this._beta=t}iSe.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],s=e[n]-r,o=t[n]-i,a=-1,u;++a<=n;)u=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+u*s),this._beta*t[a]+(1-this._beta)*(i+u*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const Ayt=function e(t){function n(r){return t===1?new bM(r):new iSe(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function wD(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function NK(e,t){this._context=e,this._k=(1-t)/6}NK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:wD(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:wD(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const kyt=function e(t){function n(r){return new NK(r,t)}return n.tension=function(r){return e(+r)},n}(0);function DK(e,t){this._context=e,this._k=(1-t)/6}DK.prototype={areaStart:xb,areaEnd:xb,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:wD(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Ryt=function e(t){function n(r){return new DK(r,t)}return n.tension=function(r){return e(+r)},n}(0);function OK(e,t){this._context=e,this._k=(1-t)/6}OK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:wD(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Iyt=function e(t){function n(r){return new OK(r,t)}return n.tension=function(r){return e(+r)},n}(0);function MK(e,t,n){var r=e._x1,i=e._y1,s=e._x2,o=e._y2;if(e._l01_a>Gl){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>Gl){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*l+e._x1*e._l23_2a-t*e._l12_2a)/c,o=(o*l+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,s,o,e._x2,e._y2)}function sSe(e,t){this._context=e,this._alpha=t}sSe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:MK(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Pyt=function e(t){function n(r){return t?new sSe(r,t):new NK(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function oSe(e,t){this._context=e,this._alpha=t}oSe.prototype={areaStart:xb,areaEnd:xb,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:MK(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Nyt=function e(t){function n(r){return t?new oSe(r,t):new DK(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function aSe(e,t){this._context=e,this._alpha=t}aSe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:MK(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Dyt=function e(t){function n(r){return t?new aSe(r,t):new OK(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function uSe(e){this._context=e}uSe.prototype={areaStart:xb,areaEnd:xb,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Oyt(e){return new uSe(e)}function Rue(e){return e<0?-1:1}function Iue(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(Rue(s)+Rue(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function Pue(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function X$(e,t,n){var r=e._x0,i=e._y0,s=e._x1,o=e._y1,a=(s-r)/3;e._context.bezierCurveTo(r+a,i+a*t,s-a,o-a*n,s,o)}function ED(e){this._context=e}ED.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:X$(this,this._t0,Pue(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,X$(this,Pue(this,n=Iue(this,e,t)),n);break;default:X$(this,this._t0,n=Iue(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function lSe(e){this._context=new cSe(e)}(lSe.prototype=Object.create(ED.prototype)).point=function(e,t){ED.prototype.point.call(this,t,e)};function cSe(e){this._context=e}cSe.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function Myt(e){return new ED(e)}function Lyt(e){return new lSe(e)}function fSe(e){this._context=e}fSe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=Nue(e),i=Nue(t),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Nue(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function Fyt(e){return new fSe(e)}function xM(e,t){this._context=e,this._t=t}xM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function $yt(e){return new xM(e,.5)}function Byt(e){return new xM(e,0)}function jyt(e){return new xM(e,1)}function $3(e,t,n){this.k=e,this.x=t,this.y=n}$3.prototype={constructor:$3,scale:function(e){return e===1?this:new $3(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new $3(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};$3.prototype;var B3={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var Uyt=B3.exports,Due;function zyt(){return Due||(Due=1,function(e,t){(function(){var n,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",a="Invalid `variable` option passed into `_.template`",u="__lodash_hash_undefined__",l=500,c="__lodash_placeholder__",f=1,d=2,h=4,p=1,m=2,g=1,b=2,y=4,x=8,w=16,T=32,A=64,k=128,I=256,O=512,M=30,L="...",H=800,D=16,B=1,U=2,G=3,ee=1/0,ne=9007199254740991,ue=17976931348623157e292,X=NaN,q=4294967295,te=q-1,W=q>>>1,Z=[["ary",k],["bind",g],["bindKey",b],["curry",x],["curryRight",w],["flip",O],["partial",T],["partialRight",A],["rearg",I]],oe="[object Arguments]",pe="[object Array]",ce="[object AsyncFunction]",he="[object Boolean]",Ee="[object Date]",Ae="[object DOMException]",ge="[object Error]",me="[object Function]",Oe="[object GeneratorFunction]",Me="[object Map]",Ye="[object Number]",lt="[object Null]",We="[object Object]",nt="[object Promise]",yt="[object Proxy]",_t="[object RegExp]",Rt="[object Set]",Et="[object String]",Ke="[object Symbol]",Lt="[object Undefined]",sn="[object WeakMap]",Fe="[object WeakSet]",Qe="[object ArrayBuffer]",wt="[object DataView]",Vt="[object Float32Array]",Wt="[object Float64Array]",bn="[object Int8Array]",Nn="[object Int16Array]",Zn="[object Int32Array]",wr="[object Uint8Array]",Hn="[object Uint8ClampedArray]",nr="[object Uint16Array]",Ei="[object Uint32Array]",Dr=/\b__p \+= '';/g,Co=/\b(__p \+=) '' \+/g,Ji=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Di=/&(?:amp|lt|gt|quot|#39);/g,Zi=/[&<>"']/g,ei=RegExp(Di.source),po=RegExp(Zi.source),Wu=/<%-([\s\S]+?)%>/g,Ea=/<%([\s\S]+?)%>/g,Sa=/<%=([\s\S]+?)%>/g,Kr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Oi=/^\w*$/,si=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Js=/[\\^$.*+?()[\]{}|]/g,Xr=RegExp(Js.source),Hi=/^\s+/,Zs=/\s/,mo=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Qo=/\{\n\/\* \[wrapped with (.+)\] \*/,Ta=/,? & /,dd=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Hr=/[()=,{}\[\]\/\s]/,Rl=/\\(\\)?/g,bs=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ya=/\w*$/,Jo=/^[-+]0x[0-9a-f]+$/i,mh=/^0b[01]+$/i,hd=/^\[object .+?Constructor\]$/,df=/^0o[0-7]+$/i,hf=/^(?:0|[1-9]\d*)$/,yc=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,vc=/($^)/,bc=/['\n\r\u2028\u2029\\]/g,Er="\\ud800-\\udfff",xc="\\u0300-\\u036f",xs="\\ufe20-\\ufe2f",Ka="\\u20d0-\\u20ff",As=xc+xs+Ka,Il="\\u2700-\\u27bf",_c="a-z\\xdf-\\xf6\\xf8-\\xff",Zo="\\xac\\xb1\\xd7\\xf7",qi="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ti="\\u2000-\\u206f",rr=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ve="A-Z\\xc0-\\xd6\\xd8-\\xde",Ie="\\ufe0e\\ufe0f",Se=Zo+qi+ti+rr,Be="[']",Ue="["+Er+"]",De="["+Se+"]",ht="["+As+"]",At="\\d+",Pt="["+Il+"]",kt="["+_c+"]",jt="[^"+Er+Se+At+Il+_c+ve+"]",Zt="\\ud83c[\\udffb-\\udfff]",qn="(?:"+ht+"|"+Zt+")",Sn="[^"+Er+"]",lr="(?:\\ud83c[\\udde6-\\uddff]){2}",_n="[\\ud800-\\udbff][\\udc00-\\udfff]",br="["+ve+"]",ls="\\u200d",Ao="(?:"+kt+"|"+jt+")",Pl="(?:"+br+"|"+jt+")",pd="(?:"+Be+"(?:d|ll|m|re|s|t|ve))?",Gu="(?:"+Be+"(?:D|LL|M|RE|S|T|VE))?",pf=qn+"?",eo="["+Ie+"]?",Mi="(?:"+ls+"(?:"+[Sn,lr,_n].join("|")+")"+eo+pf+")*",ko="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ea="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",cr=eo+pf+Mi,Ca="(?:"+[Pt,lr,_n].join("|")+")"+cr,Aa="(?:"+[Sn+ht+"?",ht,lr,_n,Ue].join("|")+")",gp=RegExp(Be,"g"),Nl=RegExp(ht,"g"),ks=RegExp(Zt+"(?="+Zt+")|"+Aa+cr,"g"),Rs=RegExp([br+"?"+kt+"+"+pd+"(?="+[De,br,"$"].join("|")+")",Pl+"+"+Gu+"(?="+[De,br+Ao,"$"].join("|")+")",br+"?"+Ao+"+"+pd,br+"+"+Gu,ea,ko,At,Ca].join("|"),"g"),md=RegExp("["+ls+Er+As+Ie+"]"),wc=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Dl=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Y0=-1,xr={};xr[Vt]=xr[Wt]=xr[bn]=xr[Nn]=xr[Zn]=xr[wr]=xr[Hn]=xr[nr]=xr[Ei]=!0,xr[oe]=xr[pe]=xr[Qe]=xr[he]=xr[wt]=xr[Ee]=xr[ge]=xr[me]=xr[Me]=xr[Ye]=xr[We]=xr[_t]=xr[Rt]=xr[Et]=xr[sn]=!1;var Gn={};Gn[oe]=Gn[pe]=Gn[Qe]=Gn[wt]=Gn[he]=Gn[Ee]=Gn[Vt]=Gn[Wt]=Gn[bn]=Gn[Nn]=Gn[Zn]=Gn[Me]=Gn[Ye]=Gn[We]=Gn[_t]=Gn[Rt]=Gn[Et]=Gn[Ke]=Gn[wr]=Gn[Hn]=Gn[nr]=Gn[Ei]=!0,Gn[ge]=Gn[me]=Gn[sn]=!1;var Ec={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},Ce={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Ne={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},rt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},hn=parseFloat,ir=parseInt,Or=typeof ya=="object"&&ya&&ya.Object===Object&&ya,gi=typeof self=="object"&&self&&self.Object===Object&&self,dn=Or||gi||Function("return this")(),Tr=t&&!t.nodeType&&t,Ir=Tr&&!0&&e&&!e.nodeType&&e,_s=Ir&&Ir.exports===Tr,ta=_s&&Or.process,Mr=function(){try{var ze=Ir&&Ir.require&&Ir.require("util").types;return ze||ta&&ta.binding&&ta.binding("util")}catch{}}(),js=Mr&&Mr.isArrayBuffer,Li=Mr&&Mr.isDate,to=Mr&&Mr.isMap,Xa=Mr&&Mr.isRegExp,na=Mr&&Mr.isSet,Fg=Mr&&Mr.isTypedArray;function no(ze,mt,et){switch(et.length){case 0:return ze.call(mt);case 1:return ze.call(mt,et[0]);case 2:return ze.call(mt,et[0],et[1]);case 3:return ze.call(mt,et[0],et[1],et[2])}return ze.apply(mt,et)}function Sc(ze,mt,et,on){for(var $n=-1,Dn=ze==null?0:ze.length;++$n<Dn;){var Cr=ze[$n];mt(on,Cr,et(Cr),ze)}return on}function oi(ze,mt){for(var et=-1,on=ze==null?0:ze.length;++et<on&&mt(ze[et],et,ze)!==!1;);return ze}function Ro(ze,mt){for(var et=ze==null?0:ze.length;et--&&mt(ze[et],et,ze)!==!1;);return ze}function yi(ze,mt){for(var et=-1,on=ze==null?0:ze.length;++et<on;)if(!mt(ze[et],et,ze))return!1;return!0}function ka(ze,mt){for(var et=-1,on=ze==null?0:ze.length,$n=0,Dn=[];++et<on;){var Cr=ze[et];mt(Cr,et,ze)&&(Dn[$n++]=Cr)}return Dn}function ra(ze,mt){var et=ze==null?0:ze.length;return!!et&&vd(ze,mt,0)>-1}function gd(ze,mt,et){for(var on=-1,$n=ze==null?0:ze.length;++on<$n;)if(et(mt,ze[on]))return!0;return!1}function vi(ze,mt){for(var et=-1,on=ze==null?0:ze.length,$n=Array(on);++et<on;)$n[et]=mt(ze[et],et,ze);return $n}function Yu(ze,mt){for(var et=-1,on=mt.length,$n=ze.length;++et<on;)ze[$n+et]=mt[et];return ze}function Ku(ze,mt,et,on){var $n=-1,Dn=ze==null?0:ze.length;for(on&&Dn&&(et=ze[++$n]);++$n<Dn;)et=mt(et,ze[$n],$n,ze);return et}function $g(ze,mt,et,on){var $n=ze==null?0:ze.length;for(on&&$n&&(et=ze[--$n]);$n--;)et=mt(et,ze[$n],$n,ze);return et}function yd(ze,mt){for(var et=-1,on=ze==null?0:ze.length;++et<on;)if(mt(ze[et],et,ze))return!0;return!1}var Bg=le("length");function mf(ze){return ze.split("")}function gh(ze){return ze.match(dd)||[]}function Ra(ze,mt,et){var on;return et(ze,function($n,Dn,Cr){if(mt($n,Dn,Cr))return on=Dn,!1}),on}function gf(ze,mt,et,on){for(var $n=ze.length,Dn=et+(on?1:-1);on?Dn--:++Dn<$n;)if(mt(ze[Dn],Dn,ze))return Dn;return-1}function vd(ze,mt,et){return mt===mt?vh(ze,mt,et):gf(ze,F,et)}function xu(ze,mt,et,on){for(var $n=et-1,Dn=ze.length;++$n<Dn;)if(on(ze[$n],mt))return $n;return-1}function F(ze){return ze!==ze}function re(ze,mt){var et=ze==null?0:ze.length;return et?Xt(ze,mt)/et:X}function le(ze){return function(mt){return mt==null?n:mt[ze]}}function be(ze){return function(mt){return ze==null?n:ze[mt]}}function Xe(ze,mt,et,on,$n){return $n(ze,function(Dn,Cr,er){et=on?(on=!1,Dn):mt(et,Dn,Cr,er)}),et}function ut(ze,mt){var et=ze.length;for(ze.sort(mt);et--;)ze[et]=ze[et].value;return ze}function Xt(ze,mt){for(var et,on=-1,$n=ze.length;++on<$n;){var Dn=mt(ze[on]);Dn!==n&&(et=et===n?Dn:et+Dn)}return et}function Lr(ze,mt){for(var et=-1,on=Array(ze);++et<ze;)on[et]=mt(et);return on}function Us(ze,mt){return vi(mt,function(et){return[et,ze[et]]})}function Pr(ze){return ze&&ze.slice(0,Ju(ze)+1).replace(Hi,"")}function ai(ze){return function(mt){return ze(mt)}}function cs(ze,mt){return vi(mt,function(et){return ze[et]})}function Io(ze,mt){return ze.has(mt)}function go(ze,mt){for(var et=-1,on=ze.length;++et<on&&vd(mt,ze[et],0)>-1;);return et}function yo(ze,mt){for(var et=ze.length;et--&&vd(mt,ze[et],0)>-1;);return et}function Ol(ze,mt){for(var et=ze.length,on=0;et--;)ze[et]===mt&&++on;return on}var z1=be(Ec),hx=be(Ce);function Tc(ze){return"\\"+rt[ze]}function Xu(ze,mt){return ze==null?n:ze[mt]}function yh(ze){return md.test(ze)}function a2(ze){return wc.test(ze)}function bd(ze){for(var mt,et=[];!(mt=ze.next()).done;)et.push(mt.value);return et}function Cc(ze){var mt=-1,et=Array(ze.size);return ze.forEach(function(on,$n){et[++mt]=[$n,on]}),et}function K0(ze,mt){return function(et){return ze(mt(et))}}function Qu(ze,mt){for(var et=-1,on=ze.length,$n=0,Dn=[];++et<on;){var Cr=ze[et];(Cr===mt||Cr===c)&&(ze[et]=c,Dn[$n++]=et)}return Dn}function Ac(ze){var mt=-1,et=Array(ze.size);return ze.forEach(function(on){et[++mt]=on}),et}function u2(ze){var mt=-1,et=Array(ze.size);return ze.forEach(function(on){et[++mt]=[on,on]}),et}function vh(ze,mt,et){for(var on=et-1,$n=ze.length;++on<$n;)if(ze[on]===mt)return on;return-1}function Ml(ze,mt,et){for(var on=et+1;on--;)if(ze[on]===mt)return on;return on}function kc(ze){return yh(ze)?yp(ze):Bg(ze)}function Po(ze){return yh(ze)?px(ze):mf(ze)}function Ju(ze){for(var mt=ze.length;mt--&&Zs.test(ze.charAt(mt)););return mt}var V1=be(Ne);function yp(ze){for(var mt=ks.lastIndex=0;ks.test(ze);)++mt;return mt}function px(ze){return ze.match(ks)||[]}function mx(ze){return ze.match(Rs)||[]}var ws=function ze(mt){mt=mt==null?dn:xd.defaults(dn.Object(),mt,xd.pick(dn,Dl));var et=mt.Array,on=mt.Date,$n=mt.Error,Dn=mt.Function,Cr=mt.Math,er=mt.Object,bh=mt.RegExp,jg=mt.String,Ia=mt.TypeError,_d=et.prototype,No=Dn.prototype,Ll=er.prototype,xh=mt["__core-js_shared__"],vp=No.toString,mr=Ll.hasOwnProperty,ia=0,_h=function(){var E=/[^.]+$/.exec(xh&&xh.keys&&xh.keys.IE_PROTO||"");return E?"Symbol(src)_1."+E:""}(),bp=Ll.toString,X0=vp.call(er),gx=dn._,yx=bh("^"+vp.call(mr).replace(Js,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Q0=_s?mt.Buffer:n,yf=mt.Symbol,J0=mt.Uint8Array,H1=Q0?Q0.allocUnsafe:n,Fl=K0(er.getPrototypeOf,er),Ug=er.create,wh=Ll.propertyIsEnumerable,zg=_d.splice,Vg=yf?yf.isConcatSpreadable:n,$l=yf?yf.iterator:n,Eh=yf?yf.toStringTag:n,xp=function(){try{var E=rs(er,"defineProperty");return E({},"",{}),E}catch{}}(),vx=mt.clearTimeout!==dn.clearTimeout&&mt.clearTimeout,Wi=on&&on.now!==dn.Date.now&&on.now,q1=mt.setTimeout!==dn.setTimeout&&mt.setTimeout,Sh=Cr.ceil,vf=Cr.floor,Hg=er.getOwnPropertySymbols,W1=Q0?Q0.isBuffer:n,_p=mt.isFinite,G1=_d.join,wp=K0(er.keys,er),ro=Cr.max,Pa=Cr.min,l2=on.now,bx=mt.parseInt,Z0=Cr.random,Ep=_d.reverse,qg=rs(mt,"DataView"),Sp=rs(mt,"Map"),Wg=rs(mt,"Promise"),Do=rs(mt,"Set"),Tp=rs(mt,"WeakMap"),wd=rs(er,"create"),Gg=Tp&&new Tp,Cp={},Y1=lm(qg),bf=lm(Sp),Ap=lm(Wg),Th=lm(Do),Bl=lm(Tp),Ch=yf?yf.prototype:n,_u=Ch?Ch.valueOf:n,Yg=Ch?Ch.toString:n;function ye(E){if(jo(E)&&!Sr(E)&&!(E instanceof On)){if(E instanceof Na)return E;if(mr.call(E,"__wrapped__"))return FI(E)}return new Na(E)}var kp=function(){function E(){}return function(P){if(!bo(P))return{};if(Ug)return Ug(P);E.prototype=P;var V=new E;return E.prototype=n,V}}();function Rc(){}function Na(E,P){this.__wrapped__=E,this.__actions__=[],this.__chain__=!!P,this.__index__=0,this.__values__=n}ye.templateSettings={escape:Wu,evaluate:Ea,interpolate:Sa,variable:"",imports:{_:ye}},ye.prototype=Rc.prototype,ye.prototype.constructor=ye,Na.prototype=kp(Rc.prototype),Na.prototype.constructor=Na;function On(E){this.__wrapped__=E,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=q,this.__views__=[]}function Oo(){var E=new On(this.__wrapped__);return E.__actions__=iu(this.__actions__),E.__dir__=this.__dir__,E.__filtered__=this.__filtered__,E.__iteratees__=iu(this.__iteratees__),E.__takeCount__=this.__takeCount__,E.__views__=iu(this.__views__),E}function K1(){if(this.__filtered__){var E=new On(this);E.__dir__=-1,E.__filtered__=!0}else E=this.clone(),E.__dir__*=-1;return E}function Rp(){var E=this.__wrapped__.value(),P=this.__dir__,V=Sr(E),se=P<0,fe=V?E.length:0,_e=vC(0,fe,this.__views__),Re=_e.start,$e=_e.end,Ge=$e-Re,St=se?$e:Re-1,Ct=this.__iteratees__,Mt=Ct.length,fn=0,Pn=Pa(Ge,this.__takeCount__);if(!V||!se&&fe==Ge&&Pn==Ge)return Bp(E,this.__actions__);var Qn=[];e:for(;Ge--&&fn<Pn;){St+=P;for(var $r=-1,Jn=E[St];++$r<Mt;){var Qr=Ct[$r],li=Qr.iteratee,Od=Qr.type,Bc=li(Jn);if(Od==U)Jn=Bc;else if(!Bc){if(Od==B)continue e;break e}}Qn[fn++]=Jn}return Qn}On.prototype=kp(Rc.prototype),On.prototype.constructor=On;function Qa(E){var P=-1,V=E==null?0:E.length;for(this.clear();++P<V;){var se=E[P];this.set(se[0],se[1])}}function Gi(){this.__data__=wd?wd(null):{},this.size=0}function Fi(E){var P=this.has(E)&&delete this.__data__[E];return this.size-=P?1:0,P}function xf(E){var P=this.__data__;if(wd){var V=P[E];return V===u?n:V}return mr.call(P,E)?P[E]:n}function sa(E){var P=this.__data__;return wd?P[E]!==n:mr.call(P,E)}function Da(E,P){var V=this.__data__;return this.size+=this.has(E)?0:1,V[E]=wd&&P===n?u:P,this}Qa.prototype.clear=Gi,Qa.prototype.delete=Fi,Qa.prototype.get=xf,Qa.prototype.has=sa,Qa.prototype.set=Da;function Oa(E){var P=-1,V=E==null?0:E.length;for(this.clear();++P<V;){var se=E[P];this.set(se[0],se[1])}}function Ip(){this.__data__=[],this.size=0}function Ma(E){var P=this.__data__,V=La(P,E);if(V<0)return!1;var se=P.length-1;return V==se?P.pop():zg.call(P,V,1),--this.size,!0}function em(E){var P=this.__data__,V=La(P,E);return V<0?n:P[V][1]}function xx(E){return La(this.__data__,E)>-1}function X1(E,P){var V=this.__data__,se=La(V,E);return se<0?(++this.size,V.push([E,P])):V[se][1]=P,this}Oa.prototype.clear=Ip,Oa.prototype.delete=Ma,Oa.prototype.get=em,Oa.prototype.has=xx,Oa.prototype.set=X1;function Ja(E){var P=-1,V=E==null?0:E.length;for(this.clear();++P<V;){var se=E[P];this.set(se[0],se[1])}}function c2(){this.size=0,this.__data__={hash:new Qa,map:new(Sp||Oa),string:new Qa}}function _f(E){var P=Kn(this,E).delete(E);return this.size-=P?1:0,P}function tm(E){return Kn(this,E).get(E)}function Q1(E){return Kn(this,E).has(E)}function Kg(E,P){var V=Kn(this,E),se=V.size;return V.set(E,P),this.size+=V.size==se?0:1,this}Ja.prototype.clear=c2,Ja.prototype.delete=_f,Ja.prototype.get=tm,Ja.prototype.has=Q1,Ja.prototype.set=Kg;function Za(E){var P=-1,V=E==null?0:E.length;for(this.__data__=new Ja;++P<V;)this.add(E[P])}function Ah(E){return this.__data__.set(E,u),this}function eu(E){return this.__data__.has(E)}Za.prototype.add=Za.prototype.push=Ah,Za.prototype.has=eu;function oa(E){var P=this.__data__=new Oa(E);this.size=P.size}function kh(){this.__data__=new Oa,this.size=0}function Rh(E){var P=this.__data__,V=P.delete(E);return this.size=P.size,V}function tu(E){return this.__data__.get(E)}function nu(E){return this.__data__.has(E)}function Ih(E,P){var V=this.__data__;if(V instanceof Oa){var se=V.__data__;if(!Sp||se.length<i-1)return se.push([E,P]),this.size=++V.size,this;V=this.__data__=new Ja(se)}return V.set(E,P),this.size=V.size,this}oa.prototype.clear=kh,oa.prototype.delete=Rh,oa.prototype.get=tu,oa.prototype.has=nu,oa.prototype.set=Ih;function wu(E,P){var V=Sr(E),se=!V&&$x(E),fe=!V&&!se&&fv(E),_e=!V&&!se&&!fe&&F2(E),Re=V||se||fe||_e,$e=Re?Lr(E.length,jg):[],Ge=$e.length;for(var St in E)(P||mr.call(E,St))&&!(Re&&(St=="length"||fe&&(St=="offset"||St=="parent")||_e&&(St=="buffer"||St=="byteLength"||St=="byteOffset")||Os(St,Ge)))&&$e.push(St);return $e}function es(E){var P=E.length;return P?E[nl(0,P-1)]:n}function Pp(E,P){return v2(iu(E),el(P,0,E.length))}function f2(E){return v2(iu(E))}function Ph(E,P,V){(V!==n&&!Wp(E[P],V)||V===n&&!(P in E))&&Ic(E,P,V)}function Is(E,P,V){var se=E[P];(!(mr.call(E,P)&&Wp(se,V))||V===n&&!(P in E))&&Ic(E,P,V)}function La(E,P){for(var V=E.length;V--;)if(Wp(E[V][0],P))return V;return-1}function nn(E,P,V,se){return jl(E,function(fe,_e,Re){P(se,fe,V(fe),Re)}),se}function bi(E,P){return E&&Ds(P,Au(P),E)}function Zu(E,P){return E&&Ds(P,Df(P),E)}function Ic(E,P,V){P=="__proto__"&&xp?xp(E,P,{configurable:!0,enumerable:!0,value:V,writable:!0}):E[P]=V}function J1(E,P){for(var V=-1,se=P.length,fe=et(se),_e=E==null;++V<se;)fe[V]=_e?n:$7(E,P[V]);return fe}function el(E,P,V){return E===E&&(V!==n&&(E=E<=V?E:V),P!==n&&(E=E>=P?E:P)),E}function aa(E,P,V,se,fe,_e){var Re,$e=P&f,Ge=P&d,St=P&h;if(V&&(Re=fe?V(E,se,fe,_e):V(E)),Re!==n)return Re;if(!bo(E))return E;var Ct=Sr(E);if(Ct){if(Re=kx(E),!$e)return iu(E,Re)}else{var Mt=ou(E),fn=Mt==me||Mt==Oe;if(fv(E))return Ex(E,$e);if(Mt==We||Mt==oe||fn&&!fe){if(Re=Ge||fn?{}:au(E),!$e)return Ge?yC(E,Zu(Re,E)):am(E,bi(Re,E))}else{if(!Gn[Mt])return fe?E:{};Re=b7(E,Mt,$e)}}_e||(_e=new oa);var Pn=_e.get(E);if(Pn)return Pn;_e.set(E,Re),rte(E)?E.forEach(function(Jn){Re.add(aa(Jn,P,V,Jn,E,_e))}):tte(E)&&E.forEach(function(Jn,Qr){Re.set(Qr,aa(Jn,P,V,Qr,E,_e))});var Qn=St?Ge?qe:it:Ge?Df:Au,$r=Ct?n:Qn(E);return oi($r||E,function(Jn,Qr){$r&&(Qr=Jn,Jn=E[Qr]),Is(Re,Qr,aa(Jn,P,V,Qr,E,_e))}),Re}function Z1(E){var P=Au(E);return function(V){return nm(V,E,P)}}function nm(E,P,V){var se=V.length;if(E==null)return!se;for(E=er(E);se--;){var fe=V[se],_e=P[fe],Re=E[fe];if(Re===n&&!(fe in E)||!_e(Re))return!1}return!0}function ev(E,P,V){if(typeof E!="function")throw new Ia(o);return uv(function(){E.apply(n,V)},P)}function Pc(E,P,V,se){var fe=-1,_e=ra,Re=!0,$e=E.length,Ge=[],St=P.length;if(!$e)return Ge;V&&(P=vi(P,ai(V))),se?(_e=gd,Re=!1):P.length>=i&&(_e=Io,Re=!1,P=new Za(P));e:for(;++fe<$e;){var Ct=E[fe],Mt=V==null?Ct:V(Ct);if(Ct=se||Ct!==0?Ct:0,Re&&Mt===Mt){for(var fn=St;fn--;)if(P[fn]===Mt)continue e;Ge.push(Ct)}else _e(P,Mt,se)||Ge.push(Ct)}return Ge}var jl=Lo(Ps),tv=Lo(Nh,!0);function zs(E,P){var V=!0;return jl(E,function(se,fe,_e){return V=!!P(se,fe,_e),V}),V}function ua(E,P,V){for(var se=-1,fe=E.length;++se<fe;){var _e=E[se],Re=P(_e);if(Re!=null&&($e===n?Re===Re&&!Dd(Re):V(Re,$e)))var $e=Re,Ge=_e}return Ge}function Nc(E,P,V,se){var fe=E.length;for(V=Nr(V),V<0&&(V=-V>fe?0:fe+V),se=se===n||se>fe?fe:Nr(se),se<0&&(se+=fe),se=V>se?0:ste(se);V<se;)E[V++]=P;return E}function Xg(E,P){var V=[];return jl(E,function(se,fe,_e){P(se,fe,_e)&&V.push(se)}),V}function Es(E,P,V,se,fe){var _e=-1,Re=E.length;for(V||(V=m2),fe||(fe=[]);++_e<Re;){var $e=E[_e];P>0&&V($e)?P>1?Es($e,P-1,V,se,fe):Yu(fe,$e):se||(fe[fe.length]=$e)}return fe}var Eu=Up(),rm=Up(!0);function Ps(E,P){return E&&Eu(E,P,Au)}function Nh(E,P){return E&&rm(E,P,Au)}function Np(E,P){return ka(P,function(V){return hy(E[V])})}function wf(E,P){P=kf(P,E);for(var V=0,se=P.length;E!=null&&V<se;)E=E[Id(P[V++])];return V&&V==se?E:n}function Qg(E,P,V){var se=P(E);return Sr(E)?se:Yu(se,V(E))}function Mo(E){return E==null?E===n?Lt:lt:Eh&&Eh in er(E)?Br(E):xC(E)}function Dc(E,P){return E>P}function ru(E,P){return E!=null&&mr.call(E,P)}function Ef(E,P){return E!=null&&P in er(E)}function im(E,P,V){return E>=Pa(P,V)&&E<ro(P,V)}function Dp(E,P,V){for(var se=V?gd:ra,fe=E[0].length,_e=E.length,Re=_e,$e=et(_e),Ge=1/0,St=[];Re--;){var Ct=E[Re];Re&&P&&(Ct=vi(Ct,ai(P))),Ge=Pa(Ct.length,Ge),$e[Re]=!V&&(P||fe>=120&&Ct.length>=120)?new Za(Re&&Ct):n}Ct=E[0];var Mt=-1,fn=$e[0];e:for(;++Mt<fe&&St.length<Ge;){var Pn=Ct[Mt],Qn=P?P(Pn):Pn;if(Pn=V||Pn!==0?Pn:0,!(fn?Io(fn,Qn):se(St,Qn,V))){for(Re=_e;--Re;){var $r=$e[Re];if(!($r?Io($r,Qn):se(E[Re],Qn,V)))continue e}fn&&fn.push(Qn),St.push(Pn)}}return St}function tl(E,P,V,se){return Ps(E,function(fe,_e,Re){P(se,V(fe),_e,Re)}),se}function Su(E,P,V){P=kf(P,E),E=Ba(E,P);var se=E==null?E:E[Id(il(P))];return se==null?n:no(se,E,V)}function sm(E){return jo(E)&&Mo(E)==oe}function nv(E){return jo(E)&&Mo(E)==Qe}function Sf(E){return jo(E)&&Mo(E)==Ee}function Tu(E,P,V,se,fe){return E===P?!0:E==null||P==null||!jo(E)&&!jo(P)?E!==E&&P!==P:rv(E,P,V,se,Tu,fe)}function rv(E,P,V,se,fe,_e){var Re=Sr(E),$e=Sr(P),Ge=Re?pe:ou(E),St=$e?pe:ou(P);Ge=Ge==oe?We:Ge,St=St==oe?We:St;var Ct=Ge==We,Mt=St==We,fn=Ge==St;if(fn&&fv(E)){if(!fv(P))return!1;Re=!0,Ct=!1}if(fn&&!Ct)return _e||(_e=new oa),Re||F2(E)?Ui(E,P,V,se,fe,_e):Si(E,P,Ge,V,se,fe,_e);if(!(V&p)){var Pn=Ct&&mr.call(E,"__wrapped__"),Qn=Mt&&mr.call(P,"__wrapped__");if(Pn||Qn){var $r=Pn?E.value():E,Jn=Qn?P.value():P;return _e||(_e=new oa),fe($r,Jn,V,se,_e)}}return fn?(_e||(_e=new oa),su(E,P,V,se,fe,_e)):!1}function Jg(E){return jo(E)&&ou(E)==Me}function Dh(E,P,V,se){var fe=V.length,_e=fe,Re=!se;if(E==null)return!_e;for(E=er(E);fe--;){var $e=V[fe];if(Re&&$e[2]?$e[1]!==E[$e[0]]:!($e[0]in E))return!1}for(;++fe<_e;){$e=V[fe];var Ge=$e[0],St=E[Ge],Ct=$e[1];if(Re&&$e[2]){if(St===n&&!(Ge in E))return!1}else{var Mt=new oa;if(se)var fn=se(St,Ct,Ge,E,P,Mt);if(!(fn===n?Tu(Ct,St,p|m,se,Mt):fn))return!1}}return!0}function Ss(E){if(!bo(E)||NI(E))return!1;var P=hy(E)?yx:hd;return P.test(lm(E))}function fr(E){return jo(E)&&Mo(E)==_t}function $i(E){return jo(E)&&ou(E)==Rt}function fs(E){return jo(E)&&QI(E.length)&&!!xr[Mo(E)]}function Ns(E){return typeof E=="function"?E:E==null?Of:typeof E=="object"?Sr(E)?Bi(E[0],E[1]):Tf(E):gte(E)}function Vs(E){if(!Hp(E))return wp(E);var P=[];for(var V in er(E))mr.call(E,V)&&V!="constructor"&&P.push(V);return P}function Oh(E){if(!bo(E))return MI(E);var P=Hp(E),V=[];for(var se in E)se=="constructor"&&(P||!mr.call(E,se))||V.push(se);return V}function Yi(E,P){return E<P}function Op(E,P){var V=-1,se=Nf(E)?et(E.length):[];return jl(E,function(fe,_e,Re){se[++V]=P(fe,_e,Re)}),se}function Tf(E){var P=Fr(E);return P.length==1&&P[0][2]?g2(P[0][0],P[0][1]):function(V){return V===E||Dh(V,E,P)}}function Bi(E,P){return vn(E)&&Ix(P)?g2(Id(E),P):function(V){var se=$7(V,E);return se===n&&se===P?B7(V,E):Tu(P,se,p|m)}}function Ed(E,P,V,se,fe){E!==P&&Eu(P,function(_e,Re){if(fe||(fe=new oa),bo(_e))Mp(E,P,Re,V,Ed,se,fe);else{var $e=se?se(Fh(E,Re),_e,Re+"",E,P,fe):n;$e===n&&($e=_e),Ph(E,Re,$e)}},Df)}function Mp(E,P,V,se,fe,_e,Re){var $e=Fh(E,V),Ge=Fh(P,V),St=Re.get(Ge);if(St){Ph(E,V,St);return}var Ct=_e?_e($e,Ge,V+"",E,P,Re):n,Mt=Ct===n;if(Mt){var fn=Sr(Ge),Pn=!fn&&fv(Ge),Qn=!fn&&!Pn&&F2(Ge);Ct=Ge,fn||Pn||Qn?Sr($e)?Ct=$e:da($e)?Ct=iu($e):Pn?(Mt=!1,Ct=Ex(Ge,!0)):Qn?(Mt=!1,Ct=Tx(Ge,!0)):Ct=[]:$C(Ge)||$x(Ge)?(Ct=$e,$x($e)?Ct=ote($e):(!bo($e)||hy($e))&&(Ct=au(Ge))):Mt=!1}Mt&&(Re.set(Ge,Ct),fe(Ct,Ge,se,_e,Re),Re.delete(Ge)),Ph(E,V,Ct)}function la(E,P){var V=E.length;if(V)return P+=P<0?V:0,Os(P,V)?E[P]:n}function Lp(E,P,V){P.length?P=vi(P,function(_e){return Sr(_e)?function(Re){return wf(Re,_e.length===1?_e[0]:_e)}:_e}):P=[Of];var se=-1;P=vi(P,ai(Gt()));var fe=Op(E,function(_e,Re,$e){var Ge=vi(P,function(St){return St(_e)});return{criteria:Ge,index:++se,value:_e}});return ut(fe,function(_e,Re){return gC(_e,Re,V)})}function Zg(E,P){return Fa(E,P,function(V,se){return B7(E,se)})}function Fa(E,P,V){for(var se=-1,fe=P.length,_e={};++se<fe;){var Re=P[se],$e=wf(E,Re);V($e,Re)&&Cf(_e,kf(Re,E),$e)}return _e}function Ti(E){return function(P){return wf(P,E)}}function ds(E,P,V,se){var fe=se?xu:vd,_e=-1,Re=P.length,$e=E;for(E===P&&(P=iu(P)),V&&($e=vi(E,ai(V)));++_e<Re;)for(var Ge=0,St=P[_e],Ct=V?V(St):St;(Ge=fe($e,Ct,Ge,se))>-1;)$e!==E&&zg.call($e,Ge,1),zg.call(E,Ge,1);return E}function Hs(E,P){for(var V=E?P.length:0,se=V-1;V--;){var fe=P[V];if(V==se||fe!==_e){var _e=fe;Os(fe)?zg.call(E,fe,1):ny(E,fe)}}return E}function nl(E,P){return E+vf(Z0()*(P-E+1))}function Mh(E,P,V,se){for(var fe=-1,_e=ro(Sh((P-E)/(V||1)),0),Re=et(_e);_e--;)Re[se?_e:++fe]=E,E+=V;return Re}function Cu(E,P){var V="";if(!E||P<1||P>ne)return V;do P%2&&(V+=E),P=vf(P/2),P&&(E+=E);while(P);return V}function dr(E,P){return Fc(y2(E,P,Of),E+"")}function io(E){return es($2(E))}function ey(E,P){var V=$2(E);return v2(V,el(P,0,V.length))}function Cf(E,P,V,se){if(!bo(E))return E;P=kf(P,E);for(var fe=-1,_e=P.length,Re=_e-1,$e=E;$e!=null&&++fe<_e;){var Ge=Id(P[fe]),St=V;if(Ge==="__proto__"||Ge==="constructor"||Ge==="prototype")return E;if(fe!=Re){var Ct=$e[Ge];St=se?se(Ct,Ge,$e):n,St===n&&(St=bo(Ct)?Ct:Os(P[fe+1])?[]:{})}Is($e,Ge,St),$e=$e[Ge]}return E}var Fp=Gg?function(E,P){return Gg.set(E,P),E}:Of,ts=xp?function(E,P){return xp(E,"toString",{configurable:!0,enumerable:!1,value:U7(P),writable:!0})}:Of;function vo(E){return v2($2(E))}function ji(E,P,V){var se=-1,fe=E.length;P<0&&(P=-P>fe?0:fe+P),V=V>fe?fe:V,V<0&&(V+=fe),fe=P>V?0:V-P>>>0,P>>>=0;for(var _e=et(fe);++se<fe;)_e[se]=E[se+P];return _e}function $a(E,P){var V;return jl(E,function(se,fe,_e){return V=P(se,fe,_e),!V}),!!V}function $p(E,P,V){var se=0,fe=E==null?se:E.length;if(typeof P=="number"&&P===P&&fe<=W){for(;se<fe;){var _e=se+fe>>>1,Re=E[_e];Re!==null&&!Dd(Re)&&(V?Re<=P:Re<P)?se=_e+1:fe=_e}return fe}return om(E,P,Of,V)}function om(E,P,V,se){var fe=0,_e=E==null?0:E.length;if(_e===0)return 0;P=V(P);for(var Re=P!==P,$e=P===null,Ge=Dd(P),St=P===n;fe<_e;){var Ct=vf((fe+_e)/2),Mt=V(E[Ct]),fn=Mt!==n,Pn=Mt===null,Qn=Mt===Mt,$r=Dd(Mt);if(Re)var Jn=se||Qn;else St?Jn=Qn&&(se||fn):$e?Jn=Qn&&fn&&(se||!Pn):Ge?Jn=Qn&&fn&&!Pn&&(se||!$r):Pn||$r?Jn=!1:Jn=se?Mt<=P:Mt<P;Jn?fe=Ct+1:_e=Ct}return Pa(_e,te)}function ty(E,P){for(var V=-1,se=E.length,fe=0,_e=[];++V<se;){var Re=E[V],$e=P?P(Re):Re;if(!V||!Wp($e,Ge)){var Ge=$e;_e[fe++]=Re===0?0:Re}}return _e}function _x(E){return typeof E=="number"?E:Dd(E)?X:+E}function qs(E){if(typeof E=="string")return E;if(Sr(E))return vi(E,qs)+"";if(Dd(E))return Yg?Yg.call(E):"";var P=E+"";return P=="0"&&1/E==-1/0?"-0":P}function Af(E,P,V){var se=-1,fe=ra,_e=E.length,Re=!0,$e=[],Ge=$e;if(V)Re=!1,fe=gd;else if(_e>=i){var St=P?null:Ve(E);if(St)return Ac(St);Re=!1,fe=Io,Ge=new Za}else Ge=P?[]:$e;e:for(;++se<_e;){var Ct=E[se],Mt=P?P(Ct):Ct;if(Ct=V||Ct!==0?Ct:0,Re&&Mt===Mt){for(var fn=Ge.length;fn--;)if(Ge[fn]===Mt)continue e;P&&Ge.push(Mt),$e.push(Ct)}else fe(Ge,Mt,V)||(Ge!==$e&&Ge.push(Mt),$e.push(Ct))}return $e}function ny(E,P){return P=kf(P,E),E=Ba(E,P),E==null||delete E[Id(il(P))]}function ry(E,P,V,se){return Cf(E,P,V(wf(E,P)),se)}function Oc(E,P,V,se){for(var fe=E.length,_e=se?fe:-1;(se?_e--:++_e<fe)&&P(E[_e],_e,E););return V?ji(E,se?0:_e,se?_e+1:fe):ji(E,se?_e+1:0,se?fe:_e)}function Bp(E,P){var V=E;return V instanceof On&&(V=V.value()),Ku(P,function(se,fe){return fe.func.apply(fe.thisArg,Yu([se],fe.args))},V)}function iy(E,P,V){var se=E.length;if(se<2)return se?Af(E[0]):[];for(var fe=-1,_e=et(se);++fe<se;)for(var Re=E[fe],$e=-1;++$e<se;)$e!=fe&&(_e[fe]=Pc(_e[fe]||Re,E[$e],P,V));return Af(Es(_e,1),P,V)}function jp(E,P,V){for(var se=-1,fe=E.length,_e=P.length,Re={};++se<fe;){var $e=se<_e?P[se]:n;V(Re,E[se],$e)}return Re}function Sd(E){return da(E)?E:[]}function iv(E){return typeof E=="function"?E:Of}function kf(E,P){return Sr(E)?E:vn(E,P)?[E]:EC(Ki(E))}var wx=dr;function Rf(E,P,V){var se=E.length;return V=V===n?se:V,!P&&V>=se?E:ji(E,P,V)}var Td=vx||function(E){return dn.clearTimeout(E)};function Ex(E,P){if(P)return E.slice();var V=E.length,se=H1?H1(V):new E.constructor(V);return E.copy(se),se}function Mc(E){var P=new E.constructor(E.byteLength);return new J0(P).set(new J0(E)),P}function Sx(E,P){var V=P?Mc(E.buffer):E.buffer;return new E.constructor(V,E.byteOffset,E.byteLength)}function ns(E){var P=new E.constructor(E.source,Ya.exec(E));return P.lastIndex=E.lastIndex,P}function d2(E){return _u?er(_u.call(E)):{}}function Tx(E,P){var V=P?Mc(E.buffer):E.buffer;return new E.constructor(V,E.byteOffset,E.length)}function Cx(E,P){if(E!==P){var V=E!==n,se=E===null,fe=E===E,_e=Dd(E),Re=P!==n,$e=P===null,Ge=P===P,St=Dd(P);if(!$e&&!St&&!_e&&E>P||_e&&Re&&Ge&&!$e&&!St||se&&Re&&Ge||!V&&Ge||!fe)return 1;if(!se&&!_e&&!St&&E<P||St&&V&&fe&&!se&&!_e||$e&&V&&fe||!Re&&fe||!Ge)return-1}return 0}function gC(E,P,V){for(var se=-1,fe=E.criteria,_e=P.criteria,Re=fe.length,$e=V.length;++se<Re;){var Ge=Cx(fe[se],_e[se]);if(Ge){if(se>=$e)return Ge;var St=V[se];return Ge*(St=="desc"?-1:1)}}return E.index-P.index}function Ax(E,P,V,se){for(var fe=-1,_e=E.length,Re=V.length,$e=-1,Ge=P.length,St=ro(_e-Re,0),Ct=et(Ge+St),Mt=!se;++$e<Ge;)Ct[$e]=P[$e];for(;++fe<Re;)(Mt||fe<_e)&&(Ct[V[fe]]=E[fe]);for(;St--;)Ct[$e++]=E[fe++];return Ct}function sv(E,P,V,se){for(var fe=-1,_e=E.length,Re=-1,$e=V.length,Ge=-1,St=P.length,Ct=ro(_e-$e,0),Mt=et(Ct+St),fn=!se;++fe<Ct;)Mt[fe]=E[fe];for(var Pn=fe;++Ge<St;)Mt[Pn+Ge]=P[Ge];for(;++Re<$e;)(fn||fe<_e)&&(Mt[Pn+V[Re]]=E[fe++]);return Mt}function iu(E,P){var V=-1,se=E.length;for(P||(P=et(se));++V<se;)P[V]=E[V];return P}function Ds(E,P,V,se){var fe=!V;V||(V={});for(var _e=-1,Re=P.length;++_e<Re;){var $e=P[_e],Ge=se?se(V[$e],E[$e],$e,V,E):n;Ge===n&&(Ge=E[$e]),fe?Ic(V,$e,Ge):Is(V,$e,Ge)}return V}function am(E,P){return Ds(E,$o(E),P)}function yC(E,P){return Ds(E,p2(E),P)}function Lc(E,P){return function(V,se){var fe=Sr(V)?Sc:nn,_e=P?P():{};return fe(V,E,Gt(se,2),_e)}}function Cd(E){return dr(function(P,V){var se=-1,fe=V.length,_e=fe>1?V[fe-1]:n,Re=fe>2?V[2]:n;for(_e=E.length>3&&typeof _e=="function"?(fe--,_e):n,Re&&rl(V[0],V[1],Re)&&(_e=fe<3?n:_e,fe=1),P=er(P);++se<fe;){var $e=V[se];$e&&E(P,$e,se,_e)}return P})}function Lo(E,P){return function(V,se){if(V==null)return V;if(!Nf(V))return E(V,se);for(var fe=V.length,_e=P?fe:-1,Re=er(V);(P?_e--:++_e<fe)&&se(Re[_e],_e,Re)!==!1;);return V}}function Up(E){return function(P,V,se){for(var fe=-1,_e=er(P),Re=se(P),$e=Re.length;$e--;){var Ge=Re[E?$e:++fe];if(V(_e[Ge],Ge,_e)===!1)break}return P}}function um(E,P,V){var se=P&g,fe=Vp(E);function _e(){var Re=this&&this!==dn&&this instanceof _e?fe:E;return Re.apply(se?V:this,arguments)}return _e}function sy(E){return function(P){P=Ki(P);var V=yh(P)?Po(P):n,se=V?V[0]:P.charAt(0),fe=V?Rf(V,1).join(""):P.slice(1);return se[E]()+fe}}function zp(E){return function(P){return Ku(pte(hte(P).replace(gp,"")),E,"")}}function Vp(E){return function(){var P=arguments;switch(P.length){case 0:return new E;case 1:return new E(P[0]);case 2:return new E(P[0],P[1]);case 3:return new E(P[0],P[1],P[2]);case 4:return new E(P[0],P[1],P[2],P[3]);case 5:return new E(P[0],P[1],P[2],P[3],P[4]);case 6:return new E(P[0],P[1],P[2],P[3],P[4],P[5]);case 7:return new E(P[0],P[1],P[2],P[3],P[4],P[5],P[6])}var V=kp(E.prototype),se=E.apply(V,P);return bo(se)?se:V}}function ov(E,P,V){var se=Vp(E);function fe(){for(var _e=arguments.length,Re=et(_e),$e=_e,Ge=kn(fe);$e--;)Re[$e]=arguments[$e];var St=_e<3&&Re[0]!==Ge&&Re[_e-1]!==Ge?[]:Qu(Re,Ge);if(_e-=St.length,_e<V)return ae(E,P,Ad,fe.placeholder,n,Re,St,n,n,V-_e);var Ct=this&&this!==dn&&this instanceof fe?se:E;return no(Ct,this,Re)}return fe}function Lh(E){return function(P,V,se){var fe=er(P);if(!Nf(P)){var _e=Gt(V,3);P=Au(P),V=function($e){return _e(fe[$e],$e,fe)}}var Re=E(P,V,se);return Re>-1?fe[_e?P[Re]:Re]:n}}function oy(E){return Fo(function(P){var V=P.length,se=V,fe=Na.prototype.thru;for(E&&P.reverse();se--;){var _e=P[se];if(typeof _e!="function")throw new Ia(o);if(fe&&!Re&&rn(_e)=="wrapper")var Re=new Na([],!0)}for(se=Re?se:V;++se<V;){_e=P[se];var $e=rn(_e),Ge=$e=="wrapper"?ct(_e):n;Ge&&Rx(Ge[0])&&Ge[1]==(k|x|T|I)&&!Ge[4].length&&Ge[9]==1?Re=Re[rn(Ge[0])].apply(Re,Ge[3]):Re=_e.length==1&&Rx(_e)?Re[$e]():Re.thru(_e)}return function(){var St=arguments,Ct=St[0];if(Re&&St.length==1&&Sr(Ct))return Re.plant(Ct).value();for(var Mt=0,fn=V?P[Mt].apply(this,St):Ct;++Mt<V;)fn=P[Mt].call(this,fn);return fn}})}function Ad(E,P,V,se,fe,_e,Re,$e,Ge,St){var Ct=P&k,Mt=P&g,fn=P&b,Pn=P&(x|w),Qn=P&O,$r=fn?n:Vp(E);function Jn(){for(var Qr=arguments.length,li=et(Qr),Od=Qr;Od--;)li[Od]=arguments[Od];if(Pn)var Bc=kn(Jn),Md=Ol(li,Bc);if(se&&(li=Ax(li,se,fe,Pn)),_e&&(li=sv(li,_e,Re,Pn)),Qr-=Md,Pn&&Qr<St){var ha=Qu(li,Bc);return ae(E,P,Ad,Jn.placeholder,V,li,ha,$e,Ge,St-Qr)}var Gp=Mt?V:this,my=fn?Gp[E]:E;return Qr=li.length,$e?li=kd(li,$e):Qn&&Qr>1&&li.reverse(),Ct&&Ge<Qr&&(li.length=Ge),this&&this!==dn&&this instanceof Jn&&(my=$r||Vp(my)),my.apply(Gp,li)}return Jn}function h2(E,P){return function(V,se){return tl(V,E,P(se),{})}}function ay(E,P){return function(V,se){var fe;if(V===n&&se===n)return P;if(V!==n&&(fe=V),se!==n){if(fe===n)return se;typeof V=="string"||typeof se=="string"?(V=qs(V),se=qs(se)):(V=_x(V),se=_x(se)),fe=E(V,se)}return fe}}function S(E){return Fo(function(P){return P=vi(P,ai(Gt())),dr(function(V){var se=this;return E(P,function(fe){return no(fe,se,V)})})})}function C(E,P){P=P===n?" ":qs(P);var V=P.length;if(V<2)return V?Cu(P,E):P;var se=Cu(P,Sh(E/kc(P)));return yh(P)?Rf(Po(se),0,E).join(""):se.slice(0,E)}function $(E,P,V,se){var fe=P&g,_e=Vp(E);function Re(){for(var $e=-1,Ge=arguments.length,St=-1,Ct=se.length,Mt=et(Ct+Ge),fn=this&&this!==dn&&this instanceof Re?_e:E;++St<Ct;)Mt[St]=se[St];for(;Ge--;)Mt[St++]=arguments[++$e];return no(fn,fe?V:this,Mt)}return Re}function Y(E){return function(P,V,se){return se&&typeof se!="number"&&rl(P,V,se)&&(V=se=n),P=py(P),V===n?(V=P,P=0):V=py(V),se=se===n?P<V?1:-1:py(se),Mh(P,V,se,E)}}function J(E){return function(P,V){return typeof P=="string"&&typeof V=="string"||(P=$h(P),V=$h(V)),E(P,V)}}function ae(E,P,V,se,fe,_e,Re,$e,Ge,St){var Ct=P&x,Mt=Ct?Re:n,fn=Ct?n:Re,Pn=Ct?_e:n,Qn=Ct?n:_e;P|=Ct?T:A,P&=~(Ct?A:T),P&y||(P&=-4);var $r=[E,P,fe,Pn,Mt,Qn,fn,$e,Ge,St],Jn=V.apply(n,$r);return Rx(E)&&_C(Jn,$r),Jn.placeholder=se,wC(Jn,E,P)}function xe(E){var P=Cr[E];return function(V,se){if(V=$h(V),se=se==null?0:Pa(Nr(se),292),se&&_p(V)){var fe=(Ki(V)+"e").split("e"),_e=P(fe[0]+"e"+(+fe[1]+se));return fe=(Ki(_e)+"e").split("e"),+(fe[0]+"e"+(+fe[1]-se))}return P(V)}}var Ve=Do&&1/Ac(new Do([,-0]))[1]==ee?function(E){return new Do(E)}:H7;function at(E){return function(P){var V=ou(P);return V==Me?Cc(P):V==Rt?u2(P):Us(P,E(P))}}function Ft(E,P,V,se,fe,_e,Re,$e){var Ge=P&b;if(!Ge&&typeof E!="function")throw new Ia(o);var St=se?se.length:0;if(St||(P&=-97,se=fe=n),Re=Re===n?Re:ro(Nr(Re),0),$e=$e===n?$e:Nr($e),St-=fe?fe.length:0,P&A){var Ct=se,Mt=fe;se=fe=n}var fn=Ge?n:ct(E),Pn=[E,P,V,se,fe,Ct,Mt,_e,Re,$e];if(fn&&OI(Pn,fn),E=Pn[0],P=Pn[1],V=Pn[2],se=Pn[3],fe=Pn[4],$e=Pn[9]=Pn[9]===n?Ge?0:E.length:ro(Pn[9]-St,0),!$e&&P&(x|w)&&(P&=-25),!P||P==g)var Qn=um(E,P,V);else P==x||P==w?Qn=ov(E,P,$e):(P==T||P==(g|T))&&!fe.length?Qn=$(E,P,V,se):Qn=Ad.apply(n,Pn);var $r=fn?Fp:_C;return wC($r(Qn,Pn),E,P)}function yn(E,P,V,se){return E===n||Wp(E,Ll[V])&&!mr.call(se,V)?P:E}function tr(E,P,V,se,fe,_e){return bo(E)&&bo(P)&&(_e.set(P,E),Ed(E,P,n,tr,_e),_e.delete(P)),E}function an(E){return $C(E)?n:E}function Ui(E,P,V,se,fe,_e){var Re=V&p,$e=E.length,Ge=P.length;if($e!=Ge&&!(Re&&Ge>$e))return!1;var St=_e.get(E),Ct=_e.get(P);if(St&&Ct)return St==P&&Ct==E;var Mt=-1,fn=!0,Pn=V&m?new Za:n;for(_e.set(E,P),_e.set(P,E);++Mt<$e;){var Qn=E[Mt],$r=P[Mt];if(se)var Jn=Re?se($r,Qn,Mt,P,E,_e):se(Qn,$r,Mt,E,P,_e);if(Jn!==n){if(Jn)continue;fn=!1;break}if(Pn){if(!yd(P,function(Qr,li){if(!Io(Pn,li)&&(Qn===Qr||fe(Qn,Qr,V,se,_e)))return Pn.push(li)})){fn=!1;break}}else if(!(Qn===$r||fe(Qn,$r,V,se,_e))){fn=!1;break}}return _e.delete(E),_e.delete(P),fn}function Si(E,P,V,se,fe,_e,Re){switch(V){case wt:if(E.byteLength!=P.byteLength||E.byteOffset!=P.byteOffset)return!1;E=E.buffer,P=P.buffer;case Qe:return!(E.byteLength!=P.byteLength||!_e(new J0(E),new J0(P)));case he:case Ee:case Ye:return Wp(+E,+P);case ge:return E.name==P.name&&E.message==P.message;case _t:case Et:return E==P+"";case Me:var $e=Cc;case Rt:var Ge=se&p;if($e||($e=Ac),E.size!=P.size&&!Ge)return!1;var St=Re.get(E);if(St)return St==P;se|=m,Re.set(E,P);var Ct=Ui($e(E),$e(P),se,fe,_e,Re);return Re.delete(E),Ct;case Ke:if(_u)return _u.call(E)==_u.call(P)}return!1}function su(E,P,V,se,fe,_e){var Re=V&p,$e=it(E),Ge=$e.length,St=it(P),Ct=St.length;if(Ge!=Ct&&!Re)return!1;for(var Mt=Ge;Mt--;){var fn=$e[Mt];if(!(Re?fn in P:mr.call(P,fn)))return!1}var Pn=_e.get(E),Qn=_e.get(P);if(Pn&&Qn)return Pn==P&&Qn==E;var $r=!0;_e.set(E,P),_e.set(P,E);for(var Jn=Re;++Mt<Ge;){fn=$e[Mt];var Qr=E[fn],li=P[fn];if(se)var Od=Re?se(li,Qr,fn,P,E,_e):se(Qr,li,fn,E,P,_e);if(!(Od===n?Qr===li||fe(Qr,li,V,se,_e):Od)){$r=!1;break}Jn||(Jn=fn=="constructor")}if($r&&!Jn){var Bc=E.constructor,Md=P.constructor;Bc!=Md&&"constructor"in E&&"constructor"in P&&!(typeof Bc=="function"&&Bc instanceof Bc&&typeof Md=="function"&&Md instanceof Md)&&($r=!1)}return _e.delete(E),_e.delete(P),$r}function Fo(E){return Fc(y2(E,n,x2),E+"")}function it(E){return Qg(E,Au,$o)}function qe(E){return Qg(E,Df,p2)}var ct=Gg?function(E){return Gg.get(E)}:H7;function rn(E){for(var P=E.name+"",V=Cp[P],se=mr.call(Cp,P)?V.length:0;se--;){var fe=V[se],_e=fe.func;if(_e==null||_e==E)return fe.name}return P}function kn(E){var P=mr.call(ye,"placeholder")?ye:E;return P.placeholder}function Gt(){var E=ye.iteratee||z7;return E=E===z7?Ns:E,arguments.length?E(arguments[0],arguments[1]):E}function Kn(E,P){var V=E.__data__;return av(P)?V[typeof P=="string"?"string":"hash"]:V.map}function Fr(E){for(var P=Au(E),V=P.length;V--;){var se=P[V],fe=E[se];P[V]=[se,fe,Ix(fe)]}return P}function rs(E,P){var V=Xu(E,P);return Ss(V)?V:n}function Br(E){var P=mr.call(E,Eh),V=E[Eh];try{E[Eh]=n;var se=!0}catch{}var fe=bp.call(E);return se&&(P?E[Eh]=V:delete E[Eh]),fe}var $o=Hg?function(E){return E==null?[]:(E=er(E),ka(Hg(E),function(P){return wh.call(E,P)}))}:q7,p2=Hg?function(E){for(var P=[];E;)Yu(P,$o(E)),E=Fl(E);return P}:q7,ou=Mo;(qg&&ou(new qg(new ArrayBuffer(1)))!=wt||Sp&&ou(new Sp)!=Me||Wg&&ou(Wg.resolve())!=nt||Do&&ou(new Do)!=Rt||Tp&&ou(new Tp)!=sn)&&(ou=function(E){var P=Mo(E),V=P==We?E.constructor:n,se=V?lm(V):"";if(se)switch(se){case Y1:return wt;case bf:return Me;case Ap:return nt;case Th:return Rt;case Bl:return sn}return P});function vC(E,P,V){for(var se=-1,fe=V.length;++se<fe;){var _e=V[se],Re=_e.size;switch(_e.type){case"drop":E+=Re;break;case"dropRight":P-=Re;break;case"take":P=Pa(P,E+Re);break;case"takeRight":E=ro(E,P-Re);break}}return{start:E,end:P}}function PI(E){var P=E.match(Qo);return P?P[1].split(Ta):[]}function bC(E,P,V){P=kf(P,E);for(var se=-1,fe=P.length,_e=!1;++se<fe;){var Re=Id(P[se]);if(!(_e=E!=null&&V(E,Re)))break;E=E[Re]}return _e||++se!=fe?_e:(fe=E==null?0:E.length,!!fe&&QI(fe)&&Os(Re,fe)&&(Sr(E)||$x(E)))}function kx(E){var P=E.length,V=new E.constructor(P);return P&&typeof E[0]=="string"&&mr.call(E,"index")&&(V.index=E.index,V.input=E.input),V}function au(E){return typeof E.constructor=="function"&&!Hp(E)?kp(Fl(E)):{}}function b7(E,P,V){var se=E.constructor;switch(P){case Qe:return Mc(E);case he:case Ee:return new se(+E);case wt:return Sx(E,V);case Vt:case Wt:case bn:case Nn:case Zn:case wr:case Hn:case nr:case Ei:return Tx(E,V);case Me:return new se;case Ye:case Et:return new se(E);case _t:return ns(E);case Rt:return new se;case Ke:return d2(E)}}function x7(E,P){var V=P.length;if(!V)return E;var se=V-1;return P[se]=(V>1?"& ":"")+P[se],P=P.join(V>2?", ":" "),E.replace(mo,`{
/* [wrapped with `+P+`] */
`)}function m2(E){return Sr(E)||$x(E)||!!(Vg&&E&&E[Vg])}function Os(E,P){var V=typeof E;return P=P??ne,!!P&&(V=="number"||V!="symbol"&&hf.test(E))&&E>-1&&E%1==0&&E<P}function rl(E,P,V){if(!bo(V))return!1;var se=typeof P;return(se=="number"?Nf(V)&&Os(P,V.length):se=="string"&&P in V)?Wp(V[P],E):!1}function vn(E,P){if(Sr(E))return!1;var V=typeof E;return V=="number"||V=="symbol"||V=="boolean"||E==null||Dd(E)?!0:Oi.test(E)||!Kr.test(E)||P!=null&&E in er(P)}function av(E){var P=typeof E;return P=="string"||P=="number"||P=="symbol"||P=="boolean"?E!=="__proto__":E===null}function Rx(E){var P=rn(E),V=ye[P];if(typeof V!="function"||!(P in On.prototype))return!1;if(E===V)return!0;var se=ct(V);return!!se&&E===se[0]}function NI(E){return!!_h&&_h in E}var _7=xh?hy:W7;function Hp(E){var P=E&&E.constructor,V=typeof P=="function"&&P.prototype||Ll;return E===V}function Ix(E){return E===E&&!bo(E)}function g2(E,P){return function(V){return V==null?!1:V[E]===P&&(P!==n||E in er(V))}}function DI(E){var P=Yt(E,function(se){return V.size===l&&V.clear(),se}),V=P.cache;return P}function OI(E,P){var V=E[1],se=P[1],fe=V|se,_e=fe<(g|b|k),Re=se==k&&V==x||se==k&&V==I&&E[7].length<=P[8]||se==(k|I)&&P[7].length<=P[8]&&V==x;if(!(_e||Re))return E;se&g&&(E[2]=P[2],fe|=V&g?0:y);var $e=P[3];if($e){var Ge=E[3];E[3]=Ge?Ax(Ge,$e,P[4]):$e,E[4]=Ge?Qu(E[3],c):P[4]}return $e=P[5],$e&&(Ge=E[5],E[5]=Ge?sv(Ge,$e,P[6]):$e,E[6]=Ge?Qu(E[5],c):P[6]),$e=P[7],$e&&(E[7]=$e),se&k&&(E[8]=E[8]==null?P[8]:Pa(E[8],P[8])),E[9]==null&&(E[9]=P[9]),E[0]=P[0],E[1]=fe,E}function MI(E){var P=[];if(E!=null)for(var V in er(E))P.push(V);return P}function xC(E){return bp.call(E)}function y2(E,P,V){return P=ro(P===n?E.length-1:P,0),function(){for(var se=arguments,fe=-1,_e=ro(se.length-P,0),Re=et(_e);++fe<_e;)Re[fe]=se[P+fe];fe=-1;for(var $e=et(P+1);++fe<P;)$e[fe]=se[fe];return $e[P]=V(Re),no(E,this,$e)}}function Ba(E,P){return P.length<2?E:wf(E,ji(P,0,-1))}function kd(E,P){for(var V=E.length,se=Pa(P.length,V),fe=iu(E);se--;){var _e=P[se];E[se]=Os(_e,V)?fe[_e]:n}return E}function Fh(E,P){if(!(P==="constructor"&&typeof E[P]=="function")&&P!="__proto__")return E[P]}var _C=Rd(Fp),uv=q1||function(E,P){return dn.setTimeout(E,P)},Fc=Rd(ts);function wC(E,P,V){var se=P+"";return Fc(E,x7(se,LI(PI(se),V)))}function Rd(E){var P=0,V=0;return function(){var se=l2(),fe=D-(se-V);if(V=se,fe>0){if(++P>=H)return arguments[0]}else P=0;return E.apply(n,arguments)}}function v2(E,P){var V=-1,se=E.length,fe=se-1;for(P=P===n?se:P;++V<P;){var _e=nl(V,fe),Re=E[_e];E[_e]=E[V],E[V]=Re}return E.length=P,E}var EC=DI(function(E){var P=[];return E.charCodeAt(0)===46&&P.push(""),E.replace(si,function(V,se,fe,_e){P.push(fe?_e.replace(Rl,"$1"):se||V)}),P});function Id(E){if(typeof E=="string"||Dd(E))return E;var P=E+"";return P=="0"&&1/E==-1/0?"-0":P}function lm(E){if(E!=null){try{return vp.call(E)}catch{}try{return E+""}catch{}}return""}function LI(E,P){return oi(Z,function(V){var se="_."+V[0];P&V[1]&&!ra(E,se)&&E.push(se)}),E.sort()}function FI(E){if(E instanceof On)return E.clone();var P=new Na(E.__wrapped__,E.__chain__);return P.__actions__=iu(E.__actions__),P.__index__=E.__index__,P.__values__=E.__values__,P}function b2(E,P,V){(V?rl(E,P,V):P===n)?P=1:P=ro(Nr(P),0);var se=E==null?0:E.length;if(!se||P<1)return[];for(var fe=0,_e=0,Re=et(Sh(se/P));fe<se;)Re[_e++]=ji(E,fe,fe+=P);return Re}function SC(E){for(var P=-1,V=E==null?0:E.length,se=0,fe=[];++P<V;){var _e=E[P];_e&&(fe[se++]=_e)}return fe}function If(){var E=arguments.length;if(!E)return[];for(var P=et(E-1),V=arguments[0],se=E;se--;)P[se-1]=arguments[se];return Yu(Sr(V)?iu(V):[V],Es(P,1))}var ui=dr(function(E,P){return da(E)?Pc(E,Es(P,1,da,!0)):[]}),ja=dr(function(E,P){var V=il(P);return da(V)&&(V=n),da(E)?Pc(E,Es(P,1,da,!0),Gt(V,2)):[]}),Bo=dr(function(E,P){var V=il(P);return da(V)&&(V=n),da(E)?Pc(E,Es(P,1,da,!0),n,V):[]});function uu(E,P,V){var se=E==null?0:E.length;return se?(P=V||P===n?1:Nr(P),ji(E,P<0?0:P,se)):[]}function $c(E,P,V){var se=E==null?0:E.length;return se?(P=V||P===n?1:Nr(P),P=se-P,ji(E,0,P<0?0:P)):[]}function lv(E,P){return E&&E.length?Oc(E,Gt(P,3),!0,!0):[]}function ca(E,P){return E&&E.length?Oc(E,Gt(P,3),!0):[]}function Px(E,P,V,se){var fe=E==null?0:E.length;return fe?(V&&typeof V!="number"&&rl(E,P,V)&&(V=0,se=fe),Nc(E,P,V,se)):[]}function cm(E,P,V){var se=E==null?0:E.length;if(!se)return-1;var fe=V==null?0:Nr(V);return fe<0&&(fe=ro(se+fe,0)),gf(E,Gt(P,3),fe)}function Nx(E,P,V){var se=E==null?0:E.length;if(!se)return-1;var fe=se-1;return V!==n&&(fe=Nr(V),fe=V<0?ro(se+fe,0):Pa(fe,se-1)),gf(E,Gt(P,3),fe,!0)}function x2(E){var P=E==null?0:E.length;return P?Es(E,1):[]}function Dx(E){var P=E==null?0:E.length;return P?Es(E,ee):[]}function Ul(E,P){var V=E==null?0:E.length;return V?(P=P===n?1:Nr(P),Es(E,P)):[]}function TC(E){for(var P=-1,V=E==null?0:E.length,se={};++P<V;){var fe=E[P];se[fe[0]]=fe[1]}return se}function uy(E){return E&&E.length?E[0]:n}function qp(E,P,V){var se=E==null?0:E.length;if(!se)return-1;var fe=V==null?0:Nr(V);return fe<0&&(fe=ro(se+fe,0)),vd(E,P,fe)}function _2(E){var P=E==null?0:E.length;return P?ji(E,0,-1):[]}var CC=dr(function(E){var P=vi(E,Sd);return P.length&&P[0]===E[0]?Dp(P):[]}),fm=dr(function(E){var P=il(E),V=vi(E,Sd);return P===il(V)?P=n:V.pop(),V.length&&V[0]===E[0]?Dp(V,Gt(P,2)):[]}),w2=dr(function(E){var P=il(E),V=vi(E,Sd);return P=typeof P=="function"?P:n,P&&V.pop(),V.length&&V[0]===E[0]?Dp(V,n,P):[]});function dm(E,P){return E==null?"":G1.call(E,P)}function il(E){var P=E==null?0:E.length;return P?E[P-1]:n}function Ox(E,P,V){var se=E==null?0:E.length;if(!se)return-1;var fe=se;return V!==n&&(fe=Nr(V),fe=fe<0?ro(se+fe,0):Pa(fe,se-1)),P===P?Ml(E,P,fe):gf(E,F,fe,!0)}function AC(E,P){return E&&E.length?la(E,Nr(P)):n}var E2=dr(Mx);function Mx(E,P){return E&&E.length&&P&&P.length?ds(E,P):E}function sl(E,P,V){return E&&E.length&&P&&P.length?ds(E,P,Gt(V,2)):E}function hm(E,P,V){return E&&E.length&&P&&P.length?ds(E,P,n,V):E}var Pd=Fo(function(E,P){var V=E==null?0:E.length,se=J1(E,P);return Hs(E,vi(P,function(fe){return Os(fe,V)?+fe:fe}).sort(Cx)),se});function zl(E,P){var V=[];if(!(E&&E.length))return V;var se=-1,fe=[],_e=E.length;for(P=Gt(P,3);++se<_e;){var Re=E[se];P(Re,se,E)&&(V.push(Re),fe.push(se))}return Hs(E,fe),V}function S2(E){return E==null?E:Ep.call(E)}function kC(E,P,V){var se=E==null?0:E.length;return se?(V&&typeof V!="number"&&rl(E,P,V)?(P=0,V=se):(P=P==null?0:Nr(P),V=V===n?se:Nr(V)),ji(E,P,V)):[]}function RC(E,P){return $p(E,P)}function w7(E,P,V){return om(E,P,Gt(V,2))}function pm(E,P){var V=E==null?0:E.length;if(V){var se=$p(E,P);if(se<V&&Wp(E[se],P))return se}return-1}function $I(E,P){return $p(E,P,!0)}function IC(E,P,V){return om(E,P,Gt(V,2),!0)}function ly(E,P){var V=E==null?0:E.length;if(V){var se=$p(E,P,!0)-1;if(Wp(E[se],P))return se}return-1}function PC(E){return E&&E.length?ty(E):[]}function cy(E,P){return E&&E.length?ty(E,Gt(P,2)):[]}function BI(E){var P=E==null?0:E.length;return P?ji(E,1,P):[]}function jI(E,P,V){return E&&E.length?(P=V||P===n?1:Nr(P),ji(E,0,P<0?0:P)):[]}function NC(E,P,V){var se=E==null?0:E.length;return se?(P=V||P===n?1:Nr(P),P=se-P,ji(E,P<0?0:P,se)):[]}function T2(E,P){return E&&E.length?Oc(E,Gt(P,3),!1,!0):[]}function E7(E,P){return E&&E.length?Oc(E,Gt(P,3)):[]}var S7=dr(function(E){return Af(Es(E,1,da,!0))}),UI=dr(function(E){var P=il(E);return da(P)&&(P=n),Af(Es(E,1,da,!0),Gt(P,2))}),zI=dr(function(E){var P=il(E);return P=typeof P=="function"?P:n,Af(Es(E,1,da,!0),n,P)});function fy(E){return E&&E.length?Af(E):[]}function T7(E,P){return E&&E.length?Af(E,Gt(P,2)):[]}function cv(E,P){return P=typeof P=="function"?P:n,E&&E.length?Af(E,n,P):[]}function C2(E){if(!(E&&E.length))return[];var P=0;return E=ka(E,function(V){if(da(V))return P=ro(V.length,P),!0}),Lr(P,function(V){return vi(E,le(V))})}function Ws(E,P){if(!(E&&E.length))return[];var V=C2(E);return P==null?V:vi(V,function(se){return no(P,n,se)})}var C7=dr(function(E,P){return da(E)?Pc(E,P):[]}),VI=dr(function(E){return iy(ka(E,da))}),A7=dr(function(E){var P=il(E);return da(P)&&(P=n),iy(ka(E,da),Gt(P,2))}),k7=dr(function(E){var P=il(E);return P=typeof P=="function"?P:n,iy(ka(E,da),n,P)}),HI=dr(C2);function qI(E,P){return jp(E||[],P||[],Is)}function R7(E,P){return jp(E||[],P||[],Cf)}var Pf=dr(function(E){var P=E.length,V=P>1?E[P-1]:n;return V=typeof V=="function"?(E.pop(),V):n,Ws(E,V)});function A2(E){var P=ye(E);return P.__chain__=!0,P}function I7(E,P){return P(E),E}function Nd(E,P){return P(E)}var k2=Fo(function(E){var P=E.length,V=P?E[0]:0,se=this.__wrapped__,fe=function(_e){return J1(_e,E)};return P>1||this.__actions__.length||!(se instanceof On)||!Os(V)?this.thru(fe):(se=se.slice(V,+V+(P?1:0)),se.__actions__.push({func:Nd,args:[fe],thisArg:n}),new Na(se,this.__chain__).thru(function(_e){return P&&!_e.length&&_e.push(n),_e}))});function dy(){return A2(this)}function R2(){return new Na(this.value(),this.__chain__)}function DC(){this.__values__===n&&(this.__values__=ite(this.value()));var E=this.__index__>=this.__values__.length,P=E?n:this.__values__[this.__index__++];return{done:E,value:P}}function OC(){return this}function P7(E){for(var P,V=this;V instanceof Rc;){var se=FI(V);se.__index__=0,se.__values__=n,P?fe.__wrapped__=se:P=se;var fe=se;V=V.__wrapped__}return fe.__wrapped__=E,P}function MC(){var E=this.__wrapped__;if(E instanceof On){var P=E;return this.__actions__.length&&(P=new On(this)),P=P.reverse(),P.__actions__.push({func:Nd,args:[S2],thisArg:n}),new Na(P,this.__chain__)}return this.thru(S2)}function N7(){return Bp(this.__wrapped__,this.__actions__)}var WI=Lc(function(E,P,V){mr.call(E,V)?++E[V]:Ic(E,V,1)});function GI(E,P,V){var se=Sr(E)?yi:zs;return V&&rl(E,P,V)&&(P=n),se(E,Gt(P,3))}function I2(E,P){var V=Sr(E)?ka:Xg;return V(E,Gt(P,3))}var P2=Lh(cm),YI=Lh(Nx);function LC(E,P){return Es(M2(E,P),1)}function KI(E,P){return Es(M2(E,P),ee)}function FC(E,P,V){return V=V===n?1:Nr(V),Es(M2(E,P),V)}function Lx(E,P){var V=Sr(E)?oi:jl;return V(E,Gt(P,3))}function N2(E,P){var V=Sr(E)?Ro:tv;return V(E,Gt(P,3))}var D2=Lc(function(E,P,V){mr.call(E,V)?E[V].push(P):Ic(E,V,[P])});function XI(E,P,V,se){E=Nf(E)?E:$2(E),V=V&&!se?Nr(V):0;var fe=E.length;return V<0&&(V=ro(fe+V,0)),JI(E)?V<=fe&&E.indexOf(P,V)>-1:!!fe&&vd(E,P,V)>-1}var D7=dr(function(E,P,V){var se=-1,fe=typeof P=="function",_e=Nf(E)?et(E.length):[];return jl(E,function(Re){_e[++se]=fe?no(P,Re,V):Su(Re,P,V)}),_e}),O2=Lc(function(E,P,V){Ic(E,V,P)});function M2(E,P){var V=Sr(E)?vi:Op;return V(E,Gt(P,3))}function Fx(E,P,V,se){return E==null?[]:(Sr(P)||(P=P==null?[]:[P]),V=se?n:V,Sr(V)||(V=V==null?[]:[V]),Lp(E,P,V))}var O7=Lc(function(E,P,V){E[V?0:1].push(P)},function(){return[[],[]]});function L2(E,P,V){var se=Sr(E)?Ku:Xe,fe=arguments.length<3;return se(E,Gt(P,4),V,fe,jl)}function v(E,P,V){var se=Sr(E)?$g:Xe,fe=arguments.length<3;return se(E,Gt(P,4),V,fe,tv)}function _(E,P){var V=Sr(E)?ka:Xg;return V(E,Cn(Gt(P,3)))}function N(E){var P=Sr(E)?es:io;return P(E)}function j(E,P,V){(V?rl(E,P,V):P===n)?P=1:P=Nr(P);var se=Sr(E)?Pp:ey;return se(E,P)}function Q(E){var P=Sr(E)?f2:vo;return P(E)}function ie(E){if(E==null)return 0;if(Nf(E))return JI(E)?kc(E):E.length;var P=ou(E);return P==Me||P==Rt?E.size:Vs(E).length}function de(E,P,V){var se=Sr(E)?yd:$a;return V&&rl(E,P,V)&&(P=n),se(E,Gt(P,3))}var ke=dr(function(E,P){if(E==null)return[];var V=P.length;return V>1&&rl(E,P[0],P[1])?P=[]:V>2&&rl(P[0],P[1],P[2])&&(P=[P[0]]),Lp(E,Es(P,1),[])}),Le=Wi||function(){return dn.Date.now()};function st(E,P){if(typeof P!="function")throw new Ia(o);return E=Nr(E),function(){if(--E<1)return P.apply(this,arguments)}}function Ot(E,P,V){return P=V?n:P,P=E&&P==null?E.length:P,Ft(E,k,n,n,n,n,P)}function Ut(E,P){var V;if(typeof P!="function")throw new Ia(o);return E=Nr(E),function(){return--E>0&&(V=P.apply(this,arguments)),E<=1&&(P=n),V}}var Dt=dr(function(E,P,V){var se=g;if(V.length){var fe=Qu(V,kn(Dt));se|=T}return Ft(E,se,P,V,fe)}),pn=dr(function(E,P,V){var se=g|b;if(V.length){var fe=Qu(V,kn(pn));se|=T}return Ft(P,se,E,V,fe)});function En(E,P,V){P=V?n:P;var se=Ft(E,x,n,n,n,n,n,P);return se.placeholder=En.placeholder,se}function Tn(E,P,V){P=V?n:P;var se=Ft(E,w,n,n,n,n,n,P);return se.placeholder=Tn.placeholder,se}function so(E,P,V){var se,fe,_e,Re,$e,Ge,St=0,Ct=!1,Mt=!1,fn=!0;if(typeof E!="function")throw new Ia(o);P=$h(P)||0,bo(V)&&(Ct=!!V.leading,Mt="maxWait"in V,_e=Mt?ro($h(V.maxWait)||0,P):_e,fn="trailing"in V?!!V.trailing:fn);function Pn(ha){var Gp=se,my=fe;return se=fe=n,St=ha,Re=E.apply(my,Gp),Re}function Qn(ha){return St=ha,$e=uv(Qr,P),Ct?Pn(ha):Re}function $r(ha){var Gp=ha-Ge,my=ha-St,yte=P-Gp;return Mt?Pa(yte,_e-my):yte}function Jn(ha){var Gp=ha-Ge,my=ha-St;return Ge===n||Gp>=P||Gp<0||Mt&&my>=_e}function Qr(){var ha=Le();if(Jn(ha))return li(ha);$e=uv(Qr,$r(ha))}function li(ha){return $e=n,fn&&se?Pn(ha):(se=fe=n,Re)}function Od(){$e!==n&&Td($e),St=0,se=Ge=fe=$e=n}function Bc(){return $e===n?Re:li(Le())}function Md(){var ha=Le(),Gp=Jn(ha);if(se=arguments,fe=this,Ge=ha,Gp){if($e===n)return Qn(Ge);if(Mt)return Td($e),$e=uv(Qr,P),Pn(Ge)}return $e===n&&($e=uv(Qr,P)),Re}return Md.cancel=Od,Md.flush=Bc,Md}var Je=dr(function(E,P){return ev(E,1,P)}),je=dr(function(E,P,V){return ev(E,$h(P)||0,V)});function tt(E){return Ft(E,O)}function Yt(E,P){if(typeof E!="function"||P!=null&&typeof P!="function")throw new Ia(o);var V=function(){var se=arguments,fe=P?P.apply(this,se):se[0],_e=V.cache;if(_e.has(fe))return _e.get(fe);var Re=E.apply(this,se);return V.cache=_e.set(fe,Re)||_e,Re};return V.cache=new(Yt.Cache||Ja),V}Yt.Cache=Ja;function Cn(E){if(typeof E!="function")throw new Ia(o);return function(){var P=arguments;switch(P.length){case 0:return!E.call(this);case 1:return!E.call(this,P[0]);case 2:return!E.call(this,P[0],P[1]);case 3:return!E.call(this,P[0],P[1],P[2])}return!E.apply(this,P)}}function jn(E){return Ut(2,E)}var Un=wx(function(E,P){P=P.length==1&&Sr(P[0])?vi(P[0],ai(Gt())):vi(Es(P,1),ai(Gt()));var V=P.length;return dr(function(se){for(var fe=-1,_e=Pa(se.length,V);++fe<_e;)se[fe]=P[fe].call(this,se[fe]);return no(E,this,se)})}),Xn=dr(function(E,P){var V=Qu(P,kn(Xn));return Ft(E,T,n,P,V)}),fa=dr(function(E,P){var V=Qu(P,kn(fa));return Ft(E,A,n,P,V)}),xi=Fo(function(E,P){return Ft(E,I,n,n,n,P)});function mm(E,P){if(typeof E!="function")throw new Ia(o);return P=P===n?P:Nr(P),dr(E,P)}function M7(E,P){if(typeof E!="function")throw new Ia(o);return P=P==null?0:ro(Nr(P),0),dr(function(V){var se=V[P],fe=Rf(V,0,P);return se&&Yu(fe,se),no(E,this,fe)})}function Y5e(E,P,V){var se=!0,fe=!0;if(typeof E!="function")throw new Ia(o);return bo(V)&&(se="leading"in V?!!V.leading:se,fe="trailing"in V?!!V.trailing:fe),so(E,P,{leading:se,maxWait:P,trailing:fe})}function K5e(E){return Ot(E,1)}function X5e(E,P){return Xn(iv(P),E)}function Q5e(){if(!arguments.length)return[];var E=arguments[0];return Sr(E)?E:[E]}function J5e(E){return aa(E,h)}function Z5e(E,P){return P=typeof P=="function"?P:n,aa(E,h,P)}function ePe(E){return aa(E,f|h)}function tPe(E,P){return P=typeof P=="function"?P:n,aa(E,f|h,P)}function nPe(E,P){return P==null||nm(E,P,Au(P))}function Wp(E,P){return E===P||E!==E&&P!==P}var rPe=J(Dc),iPe=J(function(E,P){return E>=P}),$x=sm(function(){return arguments}())?sm:function(E){return jo(E)&&mr.call(E,"callee")&&!wh.call(E,"callee")},Sr=et.isArray,sPe=js?ai(js):nv;function Nf(E){return E!=null&&QI(E.length)&&!hy(E)}function da(E){return jo(E)&&Nf(E)}function oPe(E){return E===!0||E===!1||jo(E)&&Mo(E)==he}var fv=W1||W7,aPe=Li?ai(Li):Sf;function uPe(E){return jo(E)&&E.nodeType===1&&!$C(E)}function lPe(E){if(E==null)return!0;if(Nf(E)&&(Sr(E)||typeof E=="string"||typeof E.splice=="function"||fv(E)||F2(E)||$x(E)))return!E.length;var P=ou(E);if(P==Me||P==Rt)return!E.size;if(Hp(E))return!Vs(E).length;for(var V in E)if(mr.call(E,V))return!1;return!0}function cPe(E,P){return Tu(E,P)}function fPe(E,P,V){V=typeof V=="function"?V:n;var se=V?V(E,P):n;return se===n?Tu(E,P,n,V):!!se}function L7(E){if(!jo(E))return!1;var P=Mo(E);return P==ge||P==Ae||typeof E.message=="string"&&typeof E.name=="string"&&!$C(E)}function dPe(E){return typeof E=="number"&&_p(E)}function hy(E){if(!bo(E))return!1;var P=Mo(E);return P==me||P==Oe||P==ce||P==yt}function ete(E){return typeof E=="number"&&E==Nr(E)}function QI(E){return typeof E=="number"&&E>-1&&E%1==0&&E<=ne}function bo(E){var P=typeof E;return E!=null&&(P=="object"||P=="function")}function jo(E){return E!=null&&typeof E=="object"}var tte=to?ai(to):Jg;function hPe(E,P){return E===P||Dh(E,P,Fr(P))}function pPe(E,P,V){return V=typeof V=="function"?V:n,Dh(E,P,Fr(P),V)}function mPe(E){return nte(E)&&E!=+E}function gPe(E){if(_7(E))throw new $n(s);return Ss(E)}function yPe(E){return E===null}function vPe(E){return E==null}function nte(E){return typeof E=="number"||jo(E)&&Mo(E)==Ye}function $C(E){if(!jo(E)||Mo(E)!=We)return!1;var P=Fl(E);if(P===null)return!0;var V=mr.call(P,"constructor")&&P.constructor;return typeof V=="function"&&V instanceof V&&vp.call(V)==X0}var F7=Xa?ai(Xa):fr;function bPe(E){return ete(E)&&E>=-9007199254740991&&E<=ne}var rte=na?ai(na):$i;function JI(E){return typeof E=="string"||!Sr(E)&&jo(E)&&Mo(E)==Et}function Dd(E){return typeof E=="symbol"||jo(E)&&Mo(E)==Ke}var F2=Fg?ai(Fg):fs;function xPe(E){return E===n}function _Pe(E){return jo(E)&&ou(E)==sn}function wPe(E){return jo(E)&&Mo(E)==Fe}var EPe=J(Yi),SPe=J(function(E,P){return E<=P});function ite(E){if(!E)return[];if(Nf(E))return JI(E)?Po(E):iu(E);if($l&&E[$l])return bd(E[$l]());var P=ou(E),V=P==Me?Cc:P==Rt?Ac:$2;return V(E)}function py(E){if(!E)return E===0?E:0;if(E=$h(E),E===ee||E===-1/0){var P=E<0?-1:1;return P*ue}return E===E?E:0}function Nr(E){var P=py(E),V=P%1;return P===P?V?P-V:P:0}function ste(E){return E?el(Nr(E),0,q):0}function $h(E){if(typeof E=="number")return E;if(Dd(E))return X;if(bo(E)){var P=typeof E.valueOf=="function"?E.valueOf():E;E=bo(P)?P+"":P}if(typeof E!="string")return E===0?E:+E;E=Pr(E);var V=mh.test(E);return V||df.test(E)?ir(E.slice(2),V?2:8):Jo.test(E)?X:+E}function ote(E){return Ds(E,Df(E))}function TPe(E){return E?el(Nr(E),-9007199254740991,ne):E===0?E:0}function Ki(E){return E==null?"":qs(E)}var CPe=Cd(function(E,P){if(Hp(P)||Nf(P)){Ds(P,Au(P),E);return}for(var V in P)mr.call(P,V)&&Is(E,V,P[V])}),ate=Cd(function(E,P){Ds(P,Df(P),E)}),ZI=Cd(function(E,P,V,se){Ds(P,Df(P),E,se)}),APe=Cd(function(E,P,V,se){Ds(P,Au(P),E,se)}),kPe=Fo(J1);function RPe(E,P){var V=kp(E);return P==null?V:bi(V,P)}var IPe=dr(function(E,P){E=er(E);var V=-1,se=P.length,fe=se>2?P[2]:n;for(fe&&rl(P[0],P[1],fe)&&(se=1);++V<se;)for(var _e=P[V],Re=Df(_e),$e=-1,Ge=Re.length;++$e<Ge;){var St=Re[$e],Ct=E[St];(Ct===n||Wp(Ct,Ll[St])&&!mr.call(E,St))&&(E[St]=_e[St])}return E}),PPe=dr(function(E){return E.push(n,tr),no(ute,n,E)});function NPe(E,P){return Ra(E,Gt(P,3),Ps)}function DPe(E,P){return Ra(E,Gt(P,3),Nh)}function OPe(E,P){return E==null?E:Eu(E,Gt(P,3),Df)}function MPe(E,P){return E==null?E:rm(E,Gt(P,3),Df)}function LPe(E,P){return E&&Ps(E,Gt(P,3))}function FPe(E,P){return E&&Nh(E,Gt(P,3))}function $Pe(E){return E==null?[]:Np(E,Au(E))}function BPe(E){return E==null?[]:Np(E,Df(E))}function $7(E,P,V){var se=E==null?n:wf(E,P);return se===n?V:se}function jPe(E,P){return E!=null&&bC(E,P,ru)}function B7(E,P){return E!=null&&bC(E,P,Ef)}var UPe=h2(function(E,P,V){P!=null&&typeof P.toString!="function"&&(P=bp.call(P)),E[P]=V},U7(Of)),zPe=h2(function(E,P,V){P!=null&&typeof P.toString!="function"&&(P=bp.call(P)),mr.call(E,P)?E[P].push(V):E[P]=[V]},Gt),VPe=dr(Su);function Au(E){return Nf(E)?wu(E):Vs(E)}function Df(E){return Nf(E)?wu(E,!0):Oh(E)}function HPe(E,P){var V={};return P=Gt(P,3),Ps(E,function(se,fe,_e){Ic(V,P(se,fe,_e),se)}),V}function qPe(E,P){var V={};return P=Gt(P,3),Ps(E,function(se,fe,_e){Ic(V,fe,P(se,fe,_e))}),V}var WPe=Cd(function(E,P,V){Ed(E,P,V)}),ute=Cd(function(E,P,V,se){Ed(E,P,V,se)}),GPe=Fo(function(E,P){var V={};if(E==null)return V;var se=!1;P=vi(P,function(_e){return _e=kf(_e,E),se||(se=_e.length>1),_e}),Ds(E,qe(E),V),se&&(V=aa(V,f|d|h,an));for(var fe=P.length;fe--;)ny(V,P[fe]);return V});function YPe(E,P){return lte(E,Cn(Gt(P)))}var KPe=Fo(function(E,P){return E==null?{}:Zg(E,P)});function lte(E,P){if(E==null)return{};var V=vi(qe(E),function(se){return[se]});return P=Gt(P),Fa(E,V,function(se,fe){return P(se,fe[0])})}function XPe(E,P,V){P=kf(P,E);var se=-1,fe=P.length;for(fe||(fe=1,E=n);++se<fe;){var _e=E==null?n:E[Id(P[se])];_e===n&&(se=fe,_e=V),E=hy(_e)?_e.call(E):_e}return E}function QPe(E,P,V){return E==null?E:Cf(E,P,V)}function JPe(E,P,V,se){return se=typeof se=="function"?se:n,E==null?E:Cf(E,P,V,se)}var cte=at(Au),fte=at(Df);function ZPe(E,P,V){var se=Sr(E),fe=se||fv(E)||F2(E);if(P=Gt(P,4),V==null){var _e=E&&E.constructor;fe?V=se?new _e:[]:bo(E)?V=hy(_e)?kp(Fl(E)):{}:V={}}return(fe?oi:Ps)(E,function(Re,$e,Ge){return P(V,Re,$e,Ge)}),V}function e8e(E,P){return E==null?!0:ny(E,P)}function t8e(E,P,V){return E==null?E:ry(E,P,iv(V))}function n8e(E,P,V,se){return se=typeof se=="function"?se:n,E==null?E:ry(E,P,iv(V),se)}function $2(E){return E==null?[]:cs(E,Au(E))}function r8e(E){return E==null?[]:cs(E,Df(E))}function i8e(E,P,V){return V===n&&(V=P,P=n),V!==n&&(V=$h(V),V=V===V?V:0),P!==n&&(P=$h(P),P=P===P?P:0),el($h(E),P,V)}function s8e(E,P,V){return P=py(P),V===n?(V=P,P=0):V=py(V),E=$h(E),im(E,P,V)}function o8e(E,P,V){if(V&&typeof V!="boolean"&&rl(E,P,V)&&(P=V=n),V===n&&(typeof P=="boolean"?(V=P,P=n):typeof E=="boolean"&&(V=E,E=n)),E===n&&P===n?(E=0,P=1):(E=py(E),P===n?(P=E,E=0):P=py(P)),E>P){var se=E;E=P,P=se}if(V||E%1||P%1){var fe=Z0();return Pa(E+fe*(P-E+hn("1e-"+((fe+"").length-1))),P)}return nl(E,P)}var a8e=zp(function(E,P,V){return P=P.toLowerCase(),E+(V?dte(P):P)});function dte(E){return j7(Ki(E).toLowerCase())}function hte(E){return E=Ki(E),E&&E.replace(yc,z1).replace(Nl,"")}function u8e(E,P,V){E=Ki(E),P=qs(P);var se=E.length;V=V===n?se:el(Nr(V),0,se);var fe=V;return V-=P.length,V>=0&&E.slice(V,fe)==P}function l8e(E){return E=Ki(E),E&&po.test(E)?E.replace(Zi,hx):E}function c8e(E){return E=Ki(E),E&&Xr.test(E)?E.replace(Js,"\\$&"):E}var f8e=zp(function(E,P,V){return E+(V?"-":"")+P.toLowerCase()}),d8e=zp(function(E,P,V){return E+(V?" ":"")+P.toLowerCase()}),h8e=sy("toLowerCase");function p8e(E,P,V){E=Ki(E),P=Nr(P);var se=P?kc(E):0;if(!P||se>=P)return E;var fe=(P-se)/2;return C(vf(fe),V)+E+C(Sh(fe),V)}function m8e(E,P,V){E=Ki(E),P=Nr(P);var se=P?kc(E):0;return P&&se<P?E+C(P-se,V):E}function g8e(E,P,V){E=Ki(E),P=Nr(P);var se=P?kc(E):0;return P&&se<P?C(P-se,V)+E:E}function y8e(E,P,V){return V||P==null?P=0:P&&(P=+P),bx(Ki(E).replace(Hi,""),P||0)}function v8e(E,P,V){return(V?rl(E,P,V):P===n)?P=1:P=Nr(P),Cu(Ki(E),P)}function b8e(){var E=arguments,P=Ki(E[0]);return E.length<3?P:P.replace(E[1],E[2])}var x8e=zp(function(E,P,V){return E+(V?"_":"")+P.toLowerCase()});function _8e(E,P,V){return V&&typeof V!="number"&&rl(E,P,V)&&(P=V=n),V=V===n?q:V>>>0,V?(E=Ki(E),E&&(typeof P=="string"||P!=null&&!F7(P))&&(P=qs(P),!P&&yh(E))?Rf(Po(E),0,V):E.split(P,V)):[]}var w8e=zp(function(E,P,V){return E+(V?" ":"")+j7(P)});function E8e(E,P,V){return E=Ki(E),V=V==null?0:el(Nr(V),0,E.length),P=qs(P),E.slice(V,V+P.length)==P}function S8e(E,P,V){var se=ye.templateSettings;V&&rl(E,P,V)&&(P=n),E=Ki(E),P=ZI({},P,se,yn);var fe=ZI({},P.imports,se.imports,yn),_e=Au(fe),Re=cs(fe,_e),$e,Ge,St=0,Ct=P.interpolate||vc,Mt="__p += '",fn=bh((P.escape||vc).source+"|"+Ct.source+"|"+(Ct===Sa?bs:vc).source+"|"+(P.evaluate||vc).source+"|$","g"),Pn="//# sourceURL="+(mr.call(P,"sourceURL")?(P.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Y0+"]")+`
`;E.replace(fn,function(Jn,Qr,li,Od,Bc,Md){return li||(li=Od),Mt+=E.slice(St,Md).replace(bc,Tc),Qr&&($e=!0,Mt+=`' +
__e(`+Qr+`) +
'`),Bc&&(Ge=!0,Mt+=`';
`+Bc+`;
__p += '`),li&&(Mt+=`' +
((__t = (`+li+`)) == null ? '' : __t) +
'`),St=Md+Jn.length,Jn}),Mt+=`';
`;var Qn=mr.call(P,"variable")&&P.variable;if(!Qn)Mt=`with (obj) {
`+Mt+`
}
`;else if(Hr.test(Qn))throw new $n(a);Mt=(Ge?Mt.replace(Dr,""):Mt).replace(Co,"$1").replace(Ji,"$1;"),Mt="function("+(Qn||"obj")+`) {
`+(Qn?"":`obj || (obj = {});
`)+"var __t, __p = ''"+($e?", __e = _.escape":"")+(Ge?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Mt+`return __p
}`;var $r=mte(function(){return Dn(_e,Pn+"return "+Mt).apply(n,Re)});if($r.source=Mt,L7($r))throw $r;return $r}function T8e(E){return Ki(E).toLowerCase()}function C8e(E){return Ki(E).toUpperCase()}function A8e(E,P,V){if(E=Ki(E),E&&(V||P===n))return Pr(E);if(!E||!(P=qs(P)))return E;var se=Po(E),fe=Po(P),_e=go(se,fe),Re=yo(se,fe)+1;return Rf(se,_e,Re).join("")}function k8e(E,P,V){if(E=Ki(E),E&&(V||P===n))return E.slice(0,Ju(E)+1);if(!E||!(P=qs(P)))return E;var se=Po(E),fe=yo(se,Po(P))+1;return Rf(se,0,fe).join("")}function R8e(E,P,V){if(E=Ki(E),E&&(V||P===n))return E.replace(Hi,"");if(!E||!(P=qs(P)))return E;var se=Po(E),fe=go(se,Po(P));return Rf(se,fe).join("")}function I8e(E,P){var V=M,se=L;if(bo(P)){var fe="separator"in P?P.separator:fe;V="length"in P?Nr(P.length):V,se="omission"in P?qs(P.omission):se}E=Ki(E);var _e=E.length;if(yh(E)){var Re=Po(E);_e=Re.length}if(V>=_e)return E;var $e=V-kc(se);if($e<1)return se;var Ge=Re?Rf(Re,0,$e).join(""):E.slice(0,$e);if(fe===n)return Ge+se;if(Re&&($e+=Ge.length-$e),F7(fe)){if(E.slice($e).search(fe)){var St,Ct=Ge;for(fe.global||(fe=bh(fe.source,Ki(Ya.exec(fe))+"g")),fe.lastIndex=0;St=fe.exec(Ct);)var Mt=St.index;Ge=Ge.slice(0,Mt===n?$e:Mt)}}else if(E.indexOf(qs(fe),$e)!=$e){var fn=Ge.lastIndexOf(fe);fn>-1&&(Ge=Ge.slice(0,fn))}return Ge+se}function P8e(E){return E=Ki(E),E&&ei.test(E)?E.replace(Di,V1):E}var N8e=zp(function(E,P,V){return E+(V?" ":"")+P.toUpperCase()}),j7=sy("toUpperCase");function pte(E,P,V){return E=Ki(E),P=V?n:P,P===n?a2(E)?mx(E):gh(E):E.match(P)||[]}var mte=dr(function(E,P){try{return no(E,n,P)}catch(V){return L7(V)?V:new $n(V)}}),D8e=Fo(function(E,P){return oi(P,function(V){V=Id(V),Ic(E,V,Dt(E[V],E))}),E});function O8e(E){var P=E==null?0:E.length,V=Gt();return E=P?vi(E,function(se){if(typeof se[1]!="function")throw new Ia(o);return[V(se[0]),se[1]]}):[],dr(function(se){for(var fe=-1;++fe<P;){var _e=E[fe];if(no(_e[0],this,se))return no(_e[1],this,se)}})}function M8e(E){return Z1(aa(E,f))}function U7(E){return function(){return E}}function L8e(E,P){return E==null||E!==E?P:E}var F8e=oy(),$8e=oy(!0);function Of(E){return E}function z7(E){return Ns(typeof E=="function"?E:aa(E,f))}function B8e(E){return Tf(aa(E,f))}function j8e(E,P){return Bi(E,aa(P,f))}var U8e=dr(function(E,P){return function(V){return Su(V,E,P)}}),z8e=dr(function(E,P){return function(V){return Su(E,V,P)}});function V7(E,P,V){var se=Au(P),fe=Np(P,se);V==null&&!(bo(P)&&(fe.length||!se.length))&&(V=P,P=E,E=this,fe=Np(P,Au(P)));var _e=!(bo(V)&&"chain"in V)||!!V.chain,Re=hy(E);return oi(fe,function($e){var Ge=P[$e];E[$e]=Ge,Re&&(E.prototype[$e]=function(){var St=this.__chain__;if(_e||St){var Ct=E(this.__wrapped__),Mt=Ct.__actions__=iu(this.__actions__);return Mt.push({func:Ge,args:arguments,thisArg:E}),Ct.__chain__=St,Ct}return Ge.apply(E,Yu([this.value()],arguments))})}),E}function V8e(){return dn._===this&&(dn._=gx),this}function H7(){}function H8e(E){return E=Nr(E),dr(function(P){return la(P,E)})}var q8e=S(vi),W8e=S(yi),G8e=S(yd);function gte(E){return vn(E)?le(Id(E)):Ti(E)}function Y8e(E){return function(P){return E==null?n:wf(E,P)}}var K8e=Y(),X8e=Y(!0);function q7(){return[]}function W7(){return!1}function Q8e(){return{}}function J8e(){return""}function Z8e(){return!0}function eNe(E,P){if(E=Nr(E),E<1||E>ne)return[];var V=q,se=Pa(E,q);P=Gt(P),E-=q;for(var fe=Lr(se,P);++V<E;)P(V);return fe}function tNe(E){return Sr(E)?vi(E,Id):Dd(E)?[E]:iu(EC(Ki(E)))}function nNe(E){var P=++ia;return Ki(E)+P}var rNe=ay(function(E,P){return E+P},0),iNe=xe("ceil"),sNe=ay(function(E,P){return E/P},1),oNe=xe("floor");function aNe(E){return E&&E.length?ua(E,Of,Dc):n}function uNe(E,P){return E&&E.length?ua(E,Gt(P,2),Dc):n}function lNe(E){return re(E,Of)}function cNe(E,P){return re(E,Gt(P,2))}function fNe(E){return E&&E.length?ua(E,Of,Yi):n}function dNe(E,P){return E&&E.length?ua(E,Gt(P,2),Yi):n}var hNe=ay(function(E,P){return E*P},1),pNe=xe("round"),mNe=ay(function(E,P){return E-P},0);function gNe(E){return E&&E.length?Xt(E,Of):0}function yNe(E,P){return E&&E.length?Xt(E,Gt(P,2)):0}return ye.after=st,ye.ary=Ot,ye.assign=CPe,ye.assignIn=ate,ye.assignInWith=ZI,ye.assignWith=APe,ye.at=kPe,ye.before=Ut,ye.bind=Dt,ye.bindAll=D8e,ye.bindKey=pn,ye.castArray=Q5e,ye.chain=A2,ye.chunk=b2,ye.compact=SC,ye.concat=If,ye.cond=O8e,ye.conforms=M8e,ye.constant=U7,ye.countBy=WI,ye.create=RPe,ye.curry=En,ye.curryRight=Tn,ye.debounce=so,ye.defaults=IPe,ye.defaultsDeep=PPe,ye.defer=Je,ye.delay=je,ye.difference=ui,ye.differenceBy=ja,ye.differenceWith=Bo,ye.drop=uu,ye.dropRight=$c,ye.dropRightWhile=lv,ye.dropWhile=ca,ye.fill=Px,ye.filter=I2,ye.flatMap=LC,ye.flatMapDeep=KI,ye.flatMapDepth=FC,ye.flatten=x2,ye.flattenDeep=Dx,ye.flattenDepth=Ul,ye.flip=tt,ye.flow=F8e,ye.flowRight=$8e,ye.fromPairs=TC,ye.functions=$Pe,ye.functionsIn=BPe,ye.groupBy=D2,ye.initial=_2,ye.intersection=CC,ye.intersectionBy=fm,ye.intersectionWith=w2,ye.invert=UPe,ye.invertBy=zPe,ye.invokeMap=D7,ye.iteratee=z7,ye.keyBy=O2,ye.keys=Au,ye.keysIn=Df,ye.map=M2,ye.mapKeys=HPe,ye.mapValues=qPe,ye.matches=B8e,ye.matchesProperty=j8e,ye.memoize=Yt,ye.merge=WPe,ye.mergeWith=ute,ye.method=U8e,ye.methodOf=z8e,ye.mixin=V7,ye.negate=Cn,ye.nthArg=H8e,ye.omit=GPe,ye.omitBy=YPe,ye.once=jn,ye.orderBy=Fx,ye.over=q8e,ye.overArgs=Un,ye.overEvery=W8e,ye.overSome=G8e,ye.partial=Xn,ye.partialRight=fa,ye.partition=O7,ye.pick=KPe,ye.pickBy=lte,ye.property=gte,ye.propertyOf=Y8e,ye.pull=E2,ye.pullAll=Mx,ye.pullAllBy=sl,ye.pullAllWith=hm,ye.pullAt=Pd,ye.range=K8e,ye.rangeRight=X8e,ye.rearg=xi,ye.reject=_,ye.remove=zl,ye.rest=mm,ye.reverse=S2,ye.sampleSize=j,ye.set=QPe,ye.setWith=JPe,ye.shuffle=Q,ye.slice=kC,ye.sortBy=ke,ye.sortedUniq=PC,ye.sortedUniqBy=cy,ye.split=_8e,ye.spread=M7,ye.tail=BI,ye.take=jI,ye.takeRight=NC,ye.takeRightWhile=T2,ye.takeWhile=E7,ye.tap=I7,ye.throttle=Y5e,ye.thru=Nd,ye.toArray=ite,ye.toPairs=cte,ye.toPairsIn=fte,ye.toPath=tNe,ye.toPlainObject=ote,ye.transform=ZPe,ye.unary=K5e,ye.union=S7,ye.unionBy=UI,ye.unionWith=zI,ye.uniq=fy,ye.uniqBy=T7,ye.uniqWith=cv,ye.unset=e8e,ye.unzip=C2,ye.unzipWith=Ws,ye.update=t8e,ye.updateWith=n8e,ye.values=$2,ye.valuesIn=r8e,ye.without=C7,ye.words=pte,ye.wrap=X5e,ye.xor=VI,ye.xorBy=A7,ye.xorWith=k7,ye.zip=HI,ye.zipObject=qI,ye.zipObjectDeep=R7,ye.zipWith=Pf,ye.entries=cte,ye.entriesIn=fte,ye.extend=ate,ye.extendWith=ZI,V7(ye,ye),ye.add=rNe,ye.attempt=mte,ye.camelCase=a8e,ye.capitalize=dte,ye.ceil=iNe,ye.clamp=i8e,ye.clone=J5e,ye.cloneDeep=ePe,ye.cloneDeepWith=tPe,ye.cloneWith=Z5e,ye.conformsTo=nPe,ye.deburr=hte,ye.defaultTo=L8e,ye.divide=sNe,ye.endsWith=u8e,ye.eq=Wp,ye.escape=l8e,ye.escapeRegExp=c8e,ye.every=GI,ye.find=P2,ye.findIndex=cm,ye.findKey=NPe,ye.findLast=YI,ye.findLastIndex=Nx,ye.findLastKey=DPe,ye.floor=oNe,ye.forEach=Lx,ye.forEachRight=N2,ye.forIn=OPe,ye.forInRight=MPe,ye.forOwn=LPe,ye.forOwnRight=FPe,ye.get=$7,ye.gt=rPe,ye.gte=iPe,ye.has=jPe,ye.hasIn=B7,ye.head=uy,ye.identity=Of,ye.includes=XI,ye.indexOf=qp,ye.inRange=s8e,ye.invoke=VPe,ye.isArguments=$x,ye.isArray=Sr,ye.isArrayBuffer=sPe,ye.isArrayLike=Nf,ye.isArrayLikeObject=da,ye.isBoolean=oPe,ye.isBuffer=fv,ye.isDate=aPe,ye.isElement=uPe,ye.isEmpty=lPe,ye.isEqual=cPe,ye.isEqualWith=fPe,ye.isError=L7,ye.isFinite=dPe,ye.isFunction=hy,ye.isInteger=ete,ye.isLength=QI,ye.isMap=tte,ye.isMatch=hPe,ye.isMatchWith=pPe,ye.isNaN=mPe,ye.isNative=gPe,ye.isNil=vPe,ye.isNull=yPe,ye.isNumber=nte,ye.isObject=bo,ye.isObjectLike=jo,ye.isPlainObject=$C,ye.isRegExp=F7,ye.isSafeInteger=bPe,ye.isSet=rte,ye.isString=JI,ye.isSymbol=Dd,ye.isTypedArray=F2,ye.isUndefined=xPe,ye.isWeakMap=_Pe,ye.isWeakSet=wPe,ye.join=dm,ye.kebabCase=f8e,ye.last=il,ye.lastIndexOf=Ox,ye.lowerCase=d8e,ye.lowerFirst=h8e,ye.lt=EPe,ye.lte=SPe,ye.max=aNe,ye.maxBy=uNe,ye.mean=lNe,ye.meanBy=cNe,ye.min=fNe,ye.minBy=dNe,ye.stubArray=q7,ye.stubFalse=W7,ye.stubObject=Q8e,ye.stubString=J8e,ye.stubTrue=Z8e,ye.multiply=hNe,ye.nth=AC,ye.noConflict=V8e,ye.noop=H7,ye.now=Le,ye.pad=p8e,ye.padEnd=m8e,ye.padStart=g8e,ye.parseInt=y8e,ye.random=o8e,ye.reduce=L2,ye.reduceRight=v,ye.repeat=v8e,ye.replace=b8e,ye.result=XPe,ye.round=pNe,ye.runInContext=ze,ye.sample=N,ye.size=ie,ye.snakeCase=x8e,ye.some=de,ye.sortedIndex=RC,ye.sortedIndexBy=w7,ye.sortedIndexOf=pm,ye.sortedLastIndex=$I,ye.sortedLastIndexBy=IC,ye.sortedLastIndexOf=ly,ye.startCase=w8e,ye.startsWith=E8e,ye.subtract=mNe,ye.sum=gNe,ye.sumBy=yNe,ye.template=S8e,ye.times=eNe,ye.toFinite=py,ye.toInteger=Nr,ye.toLength=ste,ye.toLower=T8e,ye.toNumber=$h,ye.toSafeInteger=TPe,ye.toString=Ki,ye.toUpper=C8e,ye.trim=A8e,ye.trimEnd=k8e,ye.trimStart=R8e,ye.truncate=I8e,ye.unescape=P8e,ye.uniqueId=nNe,ye.upperCase=N8e,ye.upperFirst=j7,ye.each=Lx,ye.eachRight=N2,ye.first=uy,V7(ye,function(){var E={};return Ps(ye,function(P,V){mr.call(ye.prototype,V)||(E[V]=P)}),E}(),{chain:!1}),ye.VERSION=r,oi(["bind","bindKey","curry","curryRight","partial","partialRight"],function(E){ye[E].placeholder=ye}),oi(["drop","take"],function(E,P){On.prototype[E]=function(V){V=V===n?1:ro(Nr(V),0);var se=this.__filtered__&&!P?new On(this):this.clone();return se.__filtered__?se.__takeCount__=Pa(V,se.__takeCount__):se.__views__.push({size:Pa(V,q),type:E+(se.__dir__<0?"Right":"")}),se},On.prototype[E+"Right"]=function(V){return this.reverse()[E](V).reverse()}}),oi(["filter","map","takeWhile"],function(E,P){var V=P+1,se=V==B||V==G;On.prototype[E]=function(fe){var _e=this.clone();return _e.__iteratees__.push({iteratee:Gt(fe,3),type:V}),_e.__filtered__=_e.__filtered__||se,_e}}),oi(["head","last"],function(E,P){var V="take"+(P?"Right":"");On.prototype[E]=function(){return this[V](1).value()[0]}}),oi(["initial","tail"],function(E,P){var V="drop"+(P?"":"Right");On.prototype[E]=function(){return this.__filtered__?new On(this):this[V](1)}}),On.prototype.compact=function(){return this.filter(Of)},On.prototype.find=function(E){return this.filter(E).head()},On.prototype.findLast=function(E){return this.reverse().find(E)},On.prototype.invokeMap=dr(function(E,P){return typeof E=="function"?new On(this):this.map(function(V){return Su(V,E,P)})}),On.prototype.reject=function(E){return this.filter(Cn(Gt(E)))},On.prototype.slice=function(E,P){E=Nr(E);var V=this;return V.__filtered__&&(E>0||P<0)?new On(V):(E<0?V=V.takeRight(-E):E&&(V=V.drop(E)),P!==n&&(P=Nr(P),V=P<0?V.dropRight(-P):V.take(P-E)),V)},On.prototype.takeRightWhile=function(E){return this.reverse().takeWhile(E).reverse()},On.prototype.toArray=function(){return this.take(q)},Ps(On.prototype,function(E,P){var V=/^(?:filter|find|map|reject)|While$/.test(P),se=/^(?:head|last)$/.test(P),fe=ye[se?"take"+(P=="last"?"Right":""):P],_e=se||/^find/.test(P);fe&&(ye.prototype[P]=function(){var Re=this.__wrapped__,$e=se?[1]:arguments,Ge=Re instanceof On,St=$e[0],Ct=Ge||Sr(Re),Mt=function(Qr){var li=fe.apply(ye,Yu([Qr],$e));return se&&fn?li[0]:li};Ct&&V&&typeof St=="function"&&St.length!=1&&(Ge=Ct=!1);var fn=this.__chain__,Pn=!!this.__actions__.length,Qn=_e&&!fn,$r=Ge&&!Pn;if(!_e&&Ct){Re=$r?Re:new On(this);var Jn=E.apply(Re,$e);return Jn.__actions__.push({func:Nd,args:[Mt],thisArg:n}),new Na(Jn,fn)}return Qn&&$r?E.apply(this,$e):(Jn=this.thru(Mt),Qn?se?Jn.value()[0]:Jn.value():Jn)})}),oi(["pop","push","shift","sort","splice","unshift"],function(E){var P=_d[E],V=/^(?:push|sort|unshift)$/.test(E)?"tap":"thru",se=/^(?:pop|shift)$/.test(E);ye.prototype[E]=function(){var fe=arguments;if(se&&!this.__chain__){var _e=this.value();return P.apply(Sr(_e)?_e:[],fe)}return this[V](function(Re){return P.apply(Sr(Re)?Re:[],fe)})}}),Ps(On.prototype,function(E,P){var V=ye[P];if(V){var se=V.name+"";mr.call(Cp,se)||(Cp[se]=[]),Cp[se].push({name:P,func:V})}}),Cp[Ad(n,b).name]=[{name:"wrapper",func:n}],On.prototype.clone=Oo,On.prototype.reverse=K1,On.prototype.value=Rp,ye.prototype.at=k2,ye.prototype.chain=dy,ye.prototype.commit=R2,ye.prototype.next=DC,ye.prototype.plant=P7,ye.prototype.reverse=MC,ye.prototype.toJSON=ye.prototype.valueOf=ye.prototype.value=N7,ye.prototype.first=ye.prototype.head,$l&&(ye.prototype[$l]=OC),ye},xd=ws();Ir?((Ir.exports=xd)._=xd,Tr._=xd):dn._=xd}).call(Uyt)}(B3,B3.exports)),B3.exports}var dSe=zyt();const hSe=hc(dSe);function Vyt({parameters:e,setAnswer:t}){const n=z.useRef(null),{image:r,question:i,tiles:s,example:o,ourDefinition:a}=e,[u,l]=z.useState({width:0,height:0}),[c,f]=z.useState(s.map(h=>({...h,clicked:!1,unClicked:!1}))),d=z.useRef(null);return z.useEffect(()=>{const h=new Image;h.src=r,h.onload=()=>{const p=d.current,m=window.innerHeight-p.getBoundingClientRect().top,g=window.innerWidth-p.getBoundingClientRect().left,b=h.width/h.height;let y,x;m*b<=g?(x=m,y=m*b):(y=g,x=g/b),l({width:y,height:x,multiplier:y/h.width})}},[r]),z.useEffect(()=>{const h=D_(n.current),p=u.multiplier;h.select("g").selectAll("rect").data(c).join("rect").attr("x",m=>m.x*p).attr("y",m=>m.y*p).attr("width",m=>m.width*p).attr("height",m=>m.height*p).attr("stroke","black").attr("stroke-width",2).attr("cursor","pointer").attr("fill","#e6e6e6").attr("opacity",m=>m.clicked?0:.5).on("click",(m,g)=>{const b=hSe.cloneDeep(c),y=b.findIndex(x=>x.x===g.x&&x.y===g.y);b[y].clicked&&(b[y].unClicked=!0),b[y].clicked=!b[y].clicked,f(b),t({status:!0,answers:{patches:JSON.stringify({patches:b.filter(x=>x.clicked||x.unClicked),multiplier:u.multiplier,question:i})}})}).on("mouseover",(m,g)=>{D_(m.target).attr("stroke","blue").attr("stroke-width",2)}).on("mouseout",(m,g)=>{D_(m.target).attr("stroke","gray").attr("stroke-width",.5)})},[c,t,u]),R.jsxs("div",{children:[o&&R.jsx("h1",{children:"Example Question"}),o?R.jsx("div",{children:R.jsx("h3",{children:i})}):R.jsxs("div",{children:[R.jsxs("h3",{children:["Please annotate ",R.jsx("u",{children:"minimum patches"})," that ",R.jsx("span",{style:{color:"red"},children:" must be revealed "})," for people to ",R.jsx("span",{style:{color:"red"},children:"confidently"})," answer the question below, assuming that people ",R.jsx("span",{style:{color:"red"},children:"cannot"})," see the blocked area.",R.jsx("br",{}),"Then provide your answer for the question."]}),R.jsxs("h3",{children:["Q: ",i]})]}),R.jsx(He,{ref:d,className:"ImageWrapper",style:{width:"100%",display:"block"},children:R.jsxs("svg",{id:"clickAccuracySvg",ref:n,width:u.width,height:u.height,children:[R.jsx("image",{href:r,width:u.width,height:u.height}),R.jsx("g",{id:"rectangles"})]})})]})}const Hyt=Object.freeze(Object.defineProperty({__proto__:null,default:Vyt},Symbol.toStringTag,{value:"Module"}));function qyt({parameters:e,setAnswer:t}){const n=z.useRef(null),{image:r,question:i,radius_count:s,example:o}=e,[a,u]=z.useState([]),[l,c]=z.useState({width:0,height:0}),f=z.useRef(null),[d,h]=z.useState(0);z.useEffect(()=>{const m=new Image;m.src=r,m.onload=()=>{const g=f.current,b=window.innerHeight-g.getBoundingClientRect().top,y=window.innerWidth-g.getBoundingClientRect().left,x=m.width/m.height;let w,T;b*x<=y?(T=b,w=b*x):(w=y,T=y/x),c({width:w,height:T,multiplier:w/m.width}),h((w+T)/4/s)}},[r]);const p=z.useCallback(m=>{const g=D_(n.current),b=cft(m,g.node()),y={x:b[0],y:b[1]},x=[...a,y];u(x),t({status:!0,answers:{circles:JSON.stringify({circles:x.map(w=>({x:parseInt(w.x/l.multiplier),y:parseInt(w.y/l.multiplier)})),radius:d/l.multiplier,multiplier:l.multiplier,question:i})}})},[a,t,l]);return R.jsxs("div",{children:[o&&R.jsx("h1",{children:"Example Question"}),o?R.jsx("div",{children:R.jsx("h3",{children:i})}):R.jsxs("div",{children:[R.jsx("h3",{children:"Please click on regions that you wish to reveal. Then provide your answer for the question."}),R.jsxs("h3",{children:["Q: ",i]})]}),R.jsx(He,{ref:f,className:"ImageWrapper",style:{width:"100%",display:"block"},children:R.jsxs("svg",{id:"clickAccuracySvg",ref:n,width:l.width,height:l.height,onClick:p,children:[R.jsxs("defs",{children:[R.jsxs("filter",{id:"imageBlurFilter",children:[R.jsx("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"11"}),R.jsx("feComponentTransfer",{children:R.jsx("feFuncA",{type:"table",tableValues:"1 1"})})]}),R.jsxs("mask",{id:"unblurMask",children:[R.jsx("rect",{width:"100%",height:"100%",fill:"white"}),a.length>0&&R.jsx("circle",{cx:a[a.length-1].x,cy:a[a.length-1].y,r:d,fill:"black"},0)]})]}),R.jsx("image",{href:r,width:l.width,height:l.height}),R.jsx("image",{href:r,width:l.width,height:l.height,filter:"url(#imageBlurFilter)",mask:"url(#unblurMask)"}),a.length>0&&R.jsx("circle",{cx:a[a.length-1].x,cy:a[a.length-1].y,r:d,fill:"transparent",stroke:"red"},0)]})})]})}const Wyt=Object.freeze(Object.defineProperty({__proto__:null,default:qyt},Symbol.toStringTag,{value:"Module"})),pSe=({tool:e,setTool:t,undo:n,clearAll:r})=>R.jsxs(He,{sx:{width:250,backgroundColor:"#f8f9fa",padding:20,borderRight:"1px solid #ddd",display:"flex",flexDirection:"column",gap:20},children:[R.jsx(wo,{order:4,align:"center",sx:{fontWeight:700},children:"Toolbox"}),R.jsx(jm,{my:"sm"}),R.jsxs(Jf,{spacing:"sm",children:[R.jsx(Nt,{weight:500,children:"Fill Type"}),R.jsx(co,{children:R.jsxs(Qd.Group,{name:"fillType",value:e,onChange:i=>{t(i)},children:[R.jsx(He,{mb:"sm",children:R.jsx(Qd,{value:"stroke",label:"Stroke Fill"})}),R.jsx(He,{mb:"sm",children:R.jsx(Qd,{value:"polygon",label:"Polygon Fill"})})]})})]}),R.jsx(jm,{my:"md"}),R.jsxs(Jf,{spacing:"xs",children:[R.jsx(Nt,{weight:500,children:"Actions"}),R.jsx(Bn,{color:"gray",variant:"light",onClick:n,children:"Undo"}),R.jsx(Bn,{color:"red",variant:"light",onClick:r,children:"Clear All"})]}),R.jsx(jm,{my:"md"}),R.jsxs(Jf,{spacing:"xs",children:[R.jsx(Nt,{size:"xl",children:"Tool Tips"}),R.jsxs(Nt,{size:"md",children:[R.jsx("b",{children:"Stroke Fill:"})," Draw shape by clicking and dragging."]}),R.jsxs(Nt,{size:"md",children:[R.jsx("b",{children:"Polygon Fill:"})," Click multiple points to draw a polygon. ",R.jsx("u",{children:"Double click"})," to close the polygon."]})]})]}),Gyt=Object.freeze(Object.defineProperty({__proto__:null,default:pSe},Symbol.toStringTag,{value:"Module"}));var Q$,Oue;function Yyt(){if(Oue)return Q$;Oue=1;var e=C1();return Q$=function(n,r,i){const s=e.useRef("loading"),o=e.useRef(),[a,u]=e.useState(0),l=e.useRef(),c=e.useRef(),f=e.useRef();return(l.current!==n||c.current!==r||f.current!==i)&&(s.current="loading",o.current=void 0,l.current=n,c.current=r,f.current=i),e.useLayoutEffect(function(){if(!n)return;var d=document.createElement("img");function h(){s.current="loaded",o.current=d,u(Math.random())}function p(){s.current="failed",o.current=void 0,u(Math.random())}return d.addEventListener("load",h),d.addEventListener("error",p),r&&(d.crossOrigin=r),i&&(d.referrerPolicy=i),d.src=n,function(){d.removeEventListener("load",h),d.removeEventListener("error",p)}},[n,r,i]),[o.current,s.current]},Q$}var Kyt=Yyt();const Xyt=hc(Kyt);var S8={exports:{}},lA={},J$={},Z$={},Mue;function Vr(){return Mue||(Mue=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e._registerNode=e.Konva=e.glob=void 0;const t=Math.PI/180;function n(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}e.glob=typeof ya<"u"?ya:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},e.Konva={_global:e.glob,version:"9.3.18",isBrowser:n(),isUnminified:/param/.test((function(i){}).toString()),dblClickWindow:400,getAngle(i){return e.Konva.angleDeg?i*t:i},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_fixTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return e.Konva.DD.isDragging},isTransforming(){var i;return(i=e.Konva.Transformer)===null||i===void 0?void 0:i.isTransforming()},isDragReady(){return!!e.Konva.DD.node},releaseCanvasOnDestroy:!0,document:e.glob.document,_injectGlobal(i){e.glob.Konva=i}};const r=i=>{e.Konva[i.prototype.getClassName()]=i};e._registerNode=r,e.Konva._injectGlobal(e.Konva)}(Z$)),Z$}var eB={},Lue;function Xo(){return Lue||(Lue=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Util=e.Transform=void 0;const t=Vr();class n{constructor(w=[1,0,0,1,0,0]){this.dirty=!1,this.m=w&&w.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new n(this.m)}copyInto(w){w.m[0]=this.m[0],w.m[1]=this.m[1],w.m[2]=this.m[2],w.m[3]=this.m[3],w.m[4]=this.m[4],w.m[5]=this.m[5]}point(w){const T=this.m;return{x:T[0]*w.x+T[2]*w.y+T[4],y:T[1]*w.x+T[3]*w.y+T[5]}}translate(w,T){return this.m[4]+=this.m[0]*w+this.m[2]*T,this.m[5]+=this.m[1]*w+this.m[3]*T,this}scale(w,T){return this.m[0]*=w,this.m[1]*=w,this.m[2]*=T,this.m[3]*=T,this}rotate(w){const T=Math.cos(w),A=Math.sin(w),k=this.m[0]*T+this.m[2]*A,I=this.m[1]*T+this.m[3]*A,O=this.m[0]*-A+this.m[2]*T,M=this.m[1]*-A+this.m[3]*T;return this.m[0]=k,this.m[1]=I,this.m[2]=O,this.m[3]=M,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(w,T){const A=this.m[0]+this.m[2]*T,k=this.m[1]+this.m[3]*T,I=this.m[2]+this.m[0]*w,O=this.m[3]+this.m[1]*w;return this.m[0]=A,this.m[1]=k,this.m[2]=I,this.m[3]=O,this}multiply(w){const T=this.m[0]*w.m[0]+this.m[2]*w.m[1],A=this.m[1]*w.m[0]+this.m[3]*w.m[1],k=this.m[0]*w.m[2]+this.m[2]*w.m[3],I=this.m[1]*w.m[2]+this.m[3]*w.m[3],O=this.m[0]*w.m[4]+this.m[2]*w.m[5]+this.m[4],M=this.m[1]*w.m[4]+this.m[3]*w.m[5]+this.m[5];return this.m[0]=T,this.m[1]=A,this.m[2]=k,this.m[3]=I,this.m[4]=O,this.m[5]=M,this}invert(){const w=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),T=this.m[3]*w,A=-this.m[1]*w,k=-this.m[2]*w,I=this.m[0]*w,O=w*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),M=w*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=T,this.m[1]=A,this.m[2]=k,this.m[3]=I,this.m[4]=O,this.m[5]=M,this}getMatrix(){return this.m}decompose(){const w=this.m[0],T=this.m[1],A=this.m[2],k=this.m[3],I=this.m[4],O=this.m[5],M=w*k-T*A,L={x:I,y:O,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(w!=0||T!=0){const H=Math.sqrt(w*w+T*T);L.rotation=T>0?Math.acos(w/H):-Math.acos(w/H),L.scaleX=H,L.scaleY=M/H,L.skewX=(w*A+T*k)/M,L.skewY=0}else if(A!=0||k!=0){const H=Math.sqrt(A*A+k*k);L.rotation=Math.PI/2-(k>0?Math.acos(-A/H):-Math.acos(A/H)),L.scaleX=M/H,L.scaleY=H,L.skewX=0,L.skewY=(w*A+T*k)/M}return L.rotation=e.Util._getRotation(L.rotation),L}}e.Transform=n;const r="[object Array]",i="[object Number]",s="[object String]",o="[object Boolean]",a=Math.PI/180,u=180/Math.PI,l="#",c="",f="0",d="Konva warning: ",h="Konva error: ",p="rgb(",m={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},g=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let b=[];const y=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(x){setTimeout(x,60)};e.Util={_isElement(x){return!!(x&&x.nodeType==1)},_isFunction(x){return!!(x&&x.constructor&&x.call&&x.apply)},_isPlainObject(x){return!!x&&x.constructor===Object},_isArray(x){return Object.prototype.toString.call(x)===r},_isNumber(x){return Object.prototype.toString.call(x)===i&&!isNaN(x)&&isFinite(x)},_isString(x){return Object.prototype.toString.call(x)===s},_isBoolean(x){return Object.prototype.toString.call(x)===o},isObject(x){return x instanceof Object},isValidSelector(x){if(typeof x!="string")return!1;const w=x[0];return w==="#"||w==="."||w===w.toUpperCase()},_sign(x){return x===0||x>0?1:-1},requestAnimFrame(x){b.push(x),b.length===1&&y(function(){const w=b;b=[],w.forEach(function(T){T()})})},createCanvasElement(){const x=document.createElement("canvas");try{x.style=x.style||{}}catch{}return x},createImageElement(){return document.createElement("img")},_isInDocument(x){for(;x=x.parentNode;)if(x==document)return!0;return!1},_urlToImage(x,w){const T=e.Util.createImageElement();T.onload=function(){w(T)},T.src=x},_rgbToHex(x,w,T){return((1<<24)+(x<<16)+(w<<8)+T).toString(16).slice(1)},_hexToRgb(x){x=x.replace(l,c);const w=parseInt(x,16);return{r:w>>16&255,g:w>>8&255,b:w&255}},getRandomColor(){let x=(Math.random()*16777215<<0).toString(16);for(;x.length<6;)x=f+x;return l+x},getRGB(x){let w;return x in m?(w=m[x],{r:w[0],g:w[1],b:w[2]}):x[0]===l?this._hexToRgb(x.substring(1)):x.substr(0,4)===p?(w=g.exec(x.replace(/ /g,"")),{r:parseInt(w[1],10),g:parseInt(w[2],10),b:parseInt(w[3],10)}):{r:0,g:0,b:0}},colorToRGBA(x){return x=x||"black",e.Util._namedColorToRBA(x)||e.Util._hex3ColorToRGBA(x)||e.Util._hex4ColorToRGBA(x)||e.Util._hex6ColorToRGBA(x)||e.Util._hex8ColorToRGBA(x)||e.Util._rgbColorToRGBA(x)||e.Util._rgbaColorToRGBA(x)||e.Util._hslColorToRGBA(x)},_namedColorToRBA(x){const w=m[x.toLowerCase()];return w?{r:w[0],g:w[1],b:w[2],a:1}:null},_rgbColorToRGBA(x){if(x.indexOf("rgb(")===0){x=x.match(/rgb\(([^)]+)\)/)[1];const w=x.split(/ *, */).map(Number);return{r:w[0],g:w[1],b:w[2],a:1}}},_rgbaColorToRGBA(x){if(x.indexOf("rgba(")===0){x=x.match(/rgba\(([^)]+)\)/)[1];const w=x.split(/ *, */).map((T,A)=>T.slice(-1)==="%"?A===3?parseInt(T)/100:parseInt(T)/100*255:Number(T));return{r:w[0],g:w[1],b:w[2],a:w[3]}}},_hex8ColorToRGBA(x){if(x[0]==="#"&&x.length===9)return{r:parseInt(x.slice(1,3),16),g:parseInt(x.slice(3,5),16),b:parseInt(x.slice(5,7),16),a:parseInt(x.slice(7,9),16)/255}},_hex6ColorToRGBA(x){if(x[0]==="#"&&x.length===7)return{r:parseInt(x.slice(1,3),16),g:parseInt(x.slice(3,5),16),b:parseInt(x.slice(5,7),16),a:1}},_hex4ColorToRGBA(x){if(x[0]==="#"&&x.length===5)return{r:parseInt(x[1]+x[1],16),g:parseInt(x[2]+x[2],16),b:parseInt(x[3]+x[3],16),a:parseInt(x[4]+x[4],16)/255}},_hex3ColorToRGBA(x){if(x[0]==="#"&&x.length===4)return{r:parseInt(x[1]+x[1],16),g:parseInt(x[2]+x[2],16),b:parseInt(x[3]+x[3],16),a:1}},_hslColorToRGBA(x){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(x)){const[w,...T]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(x),A=Number(T[0])/360,k=Number(T[1])/100,I=Number(T[2])/100;let O,M,L;if(k===0)return L=I*255,{r:Math.round(L),g:Math.round(L),b:Math.round(L),a:1};I<.5?O=I*(1+k):O=I+k-I*k;const H=2*I-O,D=[0,0,0];for(let B=0;B<3;B++)M=A+1/3*-(B-1),M<0&&M++,M>1&&M--,6*M<1?L=H+(O-H)*6*M:2*M<1?L=O:3*M<2?L=H+(O-H)*(2/3-M)*6:L=H,D[B]=L*255;return{r:Math.round(D[0]),g:Math.round(D[1]),b:Math.round(D[2]),a:1}}},haveIntersection(x,w){return!(w.x>x.x+x.width||w.x+w.width<x.x||w.y>x.y+x.height||w.y+w.height<x.y)},cloneObject(x){const w={};for(const T in x)this._isPlainObject(x[T])?w[T]=this.cloneObject(x[T]):this._isArray(x[T])?w[T]=this.cloneArray(x[T]):w[T]=x[T];return w},cloneArray(x){return x.slice(0)},degToRad(x){return x*a},radToDeg(x){return x*u},_degToRad(x){return e.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),e.Util.degToRad(x)},_radToDeg(x){return e.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),e.Util.radToDeg(x)},_getRotation(x){return t.Konva.angleDeg?e.Util.radToDeg(x):x},_capitalize(x){return x.charAt(0).toUpperCase()+x.slice(1)},throw(x){throw new Error(h+x)},error(x){console.error(h+x)},warn(x){t.Konva.showWarnings&&console.warn(d+x)},each(x,w){for(const T in x)w(T,x[T])},_inRange(x,w,T){return w<=x&&x<T},_getProjectionToSegment(x,w,T,A,k,I){let O,M,L;const H=(x-T)*(x-T)+(w-A)*(w-A);if(H==0)O=x,M=w,L=(k-T)*(k-T)+(I-A)*(I-A);else{const D=((k-x)*(T-x)+(I-w)*(A-w))/H;D<0?(O=x,M=w,L=(x-k)*(x-k)+(w-I)*(w-I)):D>1?(O=T,M=A,L=(T-k)*(T-k)+(A-I)*(A-I)):(O=x+D*(T-x),M=w+D*(A-w),L=(O-k)*(O-k)+(M-I)*(M-I))}return[O,M,L]},_getProjectionToLine(x,w,T){const A=e.Util.cloneObject(x);let k=Number.MAX_VALUE;return w.forEach(function(I,O){if(!T&&O===w.length-1)return;const M=w[(O+1)%w.length],L=e.Util._getProjectionToSegment(I.x,I.y,M.x,M.y,x.x,x.y),H=L[0],D=L[1],B=L[2];B<k&&(A.x=H,A.y=D,k=B)}),A},_prepareArrayForTween(x,w,T){const A=[],k=[];if(x.length>w.length){const O=w;w=x,x=O}for(let O=0;O<x.length;O+=2)A.push({x:x[O],y:x[O+1]});for(let O=0;O<w.length;O+=2)k.push({x:w[O],y:w[O+1]});const I=[];return k.forEach(function(O){const M=e.Util._getProjectionToLine(O,A,T);I.push(M.x),I.push(M.y)}),I},_prepareToStringify(x){let w;x.visitedByCircularReferenceRemoval=!0;for(const T in x)if(x.hasOwnProperty(T)&&x[T]&&typeof x[T]=="object"){if(w=Object.getOwnPropertyDescriptor(x,T),x[T].visitedByCircularReferenceRemoval||e.Util._isElement(x[T]))if(w.configurable)delete x[T];else return null;else if(e.Util._prepareToStringify(x[T])===null)if(w.configurable)delete x[T];else return null}return delete x.visitedByCircularReferenceRemoval,x},_assign(x,w){for(const T in w)x[T]=w[T];return x},_getFirstPointerId(x){return x.touches?x.changedTouches[0].identifier:x.pointerId||999},releaseCanvas(...x){t.Konva.releaseCanvasOnDestroy&&x.forEach(w=>{w.width=0,w.height=0})},drawRoundedRectPath(x,w,T,A){let k=0,I=0,O=0,M=0;typeof A=="number"?k=I=O=M=Math.min(A,w/2,T/2):(k=Math.min(A[0]||0,w/2,T/2),I=Math.min(A[1]||0,w/2,T/2),M=Math.min(A[2]||0,w/2,T/2),O=Math.min(A[3]||0,w/2,T/2)),x.moveTo(k,0),x.lineTo(w-I,0),x.arc(w-I,I,I,Math.PI*3/2,0,!1),x.lineTo(w,T-M),x.arc(w-M,T-M,M,0,Math.PI/2,!1),x.lineTo(O,T),x.arc(O,T-O,O,Math.PI/2,Math.PI,!1),x.lineTo(0,k),x.arc(k,k,k,Math.PI,Math.PI*3/2,!1)}}}(eB)),eB}var cA={},tB={},$f={},Fue;function Zr(){if(Fue)return $f;Fue=1,Object.defineProperty($f,"__esModule",{value:!0}),$f.RGBComponent=r,$f.alphaComponent=i,$f.getNumberValidator=s,$f.getNumberOrArrayOfNumbersValidator=o,$f.getNumberOrAutoValidator=a,$f.getStringValidator=u,$f.getStringOrGradientValidator=l,$f.getFunctionValidator=c,$f.getNumberArrayValidator=f,$f.getBooleanValidator=d,$f.getComponentValidator=h;const e=Vr(),t=Xo();function n(p){return t.Util._isString(p)?'"'+p+'"':Object.prototype.toString.call(p)==="[object Number]"||t.Util._isBoolean(p)?p:Object.prototype.toString.call(p)}function r(p){return p>255?255:p<0?0:Math.round(p)}function i(p){return p>1?1:p<1e-4?1e-4:p}function s(){if(e.Konva.isUnminified)return function(p,m){return t.Util._isNumber(p)||t.Util.warn(n(p)+' is a not valid value for "'+m+'" attribute. The value should be a number.'),p}}function o(p){if(e.Konva.isUnminified)return function(m,g){let b=t.Util._isNumber(m),y=t.Util._isArray(m)&&m.length==p;return!b&&!y&&t.Util.warn(n(m)+' is a not valid value for "'+g+'" attribute. The value should be a number or Array<number>('+p+")"),m}}function a(){if(e.Konva.isUnminified)return function(p,m){var g=t.Util._isNumber(p),b=p==="auto";return g||b||t.Util.warn(n(p)+' is a not valid value for "'+m+'" attribute. The value should be a number or "auto".'),p}}function u(){if(e.Konva.isUnminified)return function(p,m){return t.Util._isString(p)||t.Util.warn(n(p)+' is a not valid value for "'+m+'" attribute. The value should be a string.'),p}}function l(){if(e.Konva.isUnminified)return function(p,m){const g=t.Util._isString(p),b=Object.prototype.toString.call(p)==="[object CanvasGradient]"||p&&p.addColorStop;return g||b||t.Util.warn(n(p)+' is a not valid value for "'+m+'" attribute. The value should be a string or a native gradient.'),p}}function c(){if(e.Konva.isUnminified)return function(p,m){return t.Util._isFunction(p)||t.Util.warn(n(p)+' is a not valid value for "'+m+'" attribute. The value should be a function.'),p}}function f(){if(e.Konva.isUnminified)return function(p,m){const g=Int8Array?Object.getPrototypeOf(Int8Array):null;return g&&p instanceof g||(t.Util._isArray(p)?p.forEach(function(b){t.Util._isNumber(b)||t.Util.warn('"'+m+'" attribute has non numeric element '+b+". Make sure that all elements are numbers.")}):t.Util.warn(n(p)+' is a not valid value for "'+m+'" attribute. The value should be a array of numbers.')),p}}function d(){if(e.Konva.isUnminified)return function(p,m){var g=p===!0||p===!1;return g||t.Util.warn(n(p)+' is a not valid value for "'+m+'" attribute. The value should be a boolean.'),p}}function h(p){if(e.Konva.isUnminified)return function(m,g){return m==null||t.Util.isObject(m)||t.Util.warn(n(m)+' is a not valid value for "'+g+'" attribute. The value should be an object with properties '+p),m}}return $f}var $ue;function Yr(){return $ue||($ue=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Factory=void 0;const t=Xo(),n=Zr(),r="get",i="set";e.Factory={addGetterSetter(s,o,a,u,l){e.Factory.addGetter(s,o,a),e.Factory.addSetter(s,o,u,l),e.Factory.addOverloadedGetterSetter(s,o)},addGetter(s,o,a){var u=r+t.Util._capitalize(o);s.prototype[u]=s.prototype[u]||function(){const l=this.attrs[o];return l===void 0?a:l}},addSetter(s,o,a,u){var l=i+t.Util._capitalize(o);s.prototype[l]||e.Factory.overWriteSetter(s,o,a,u)},overWriteSetter(s,o,a,u){var l=i+t.Util._capitalize(o);s.prototype[l]=function(c){return a&&c!==void 0&&c!==null&&(c=a.call(this,c,o)),this._setAttr(o,c),u&&u.call(this),this}},addComponentsGetterSetter(s,o,a,u,l){const c=a.length,f=t.Util._capitalize,d=r+f(o),h=i+f(o);s.prototype[d]=function(){const m={};for(let g=0;g<c;g++){const b=a[g];m[b]=this.getAttr(o+f(b))}return m};const p=(0,n.getComponentValidator)(a);s.prototype[h]=function(m){const g=this.attrs[o];u&&(m=u.call(this,m,o)),p&&p.call(this,m,o);for(const b in m)m.hasOwnProperty(b)&&this._setAttr(o+f(b),m[b]);return m||a.forEach(b=>{this._setAttr(o+f(b),void 0)}),this._fireChangeEvent(o,g,m),l&&l.call(this),this},e.Factory.addOverloadedGetterSetter(s,o)},addOverloadedGetterSetter(s,o){var a=t.Util._capitalize(o),u=i+a,l=r+a;s.prototype[o]=function(){return arguments.length?(this[u](arguments[0]),this):this[l]()}},addDeprecatedGetterSetter(s,o,a,u){t.Util.error("Adding deprecated "+o);const l=r+t.Util._capitalize(o),c=o+" property is deprecated and will be removed soon. Look at Konva change log for more information.";s.prototype[l]=function(){t.Util.error(c);const f=this.attrs[o];return f===void 0?a:f},e.Factory.addSetter(s,o,u,function(){t.Util.error(c)}),e.Factory.addOverloadedGetterSetter(s,o)},backCompat(s,o){t.Util.each(o,function(a,u){const l=s.prototype[u],c=r+t.Util._capitalize(a),f=i+t.Util._capitalize(a);function d(){l.apply(this,arguments),t.Util.error('"'+a+'" method is deprecated and will be removed soon. Use ""'+u+'" instead.')}s.prototype[a]=d,s.prototype[c]=d,s.prototype[f]=d})},afterSetFilter(){this._filterUpToDate=!1}}}(tB)),tB}var yy={},vy={},Bue;function mSe(){if(Bue)return vy;Bue=1,Object.defineProperty(vy,"__esModule",{value:!0}),vy.HitContext=vy.SceneContext=vy.Context=void 0;const e=Xo(),t=Vr();function n(b){const y=[],x=b.length,w=e.Util;for(let T=0;T<x;T++){let A=b[T];w._isNumber(A)?A=Math.round(A*1e3)/1e3:w._isString(A)||(A=A+""),y.push(A)}return y}const r=",",i="(",s=")",o="([",a="])",u=";",l="()",c="=",f=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],d=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"],h=100;class p{constructor(y){this.canvas=y,t.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(y){y.fillEnabled()&&this._fill(y)}_fill(y){}strokeShape(y){y.hasStroke()&&this._stroke(y)}_stroke(y){}fillStrokeShape(y){y.attrs.fillAfterStrokeEnabled?(this.strokeShape(y),this.fillShape(y)):(this.fillShape(y),this.strokeShape(y))}getTrace(y,x){let w=this.traceArr,T=w.length,A="",k,I,O,M;for(k=0;k<T;k++)I=w[k],O=I.method,O?(M=I.args,A+=O,y?A+=l:e.Util._isArray(M[0])?A+=o+M.join(r)+a:(x&&(M=M.map(L=>typeof L=="number"?Math.floor(L):L)),A+=i+M.join(r)+s)):(A+=I.property,y||(A+=c+I.val)),A+=u;return A}clearTrace(){this.traceArr=[]}_trace(y){let x=this.traceArr,w;x.push(y),w=x.length,w>=h&&x.shift()}reset(){const y=this.getCanvas().getPixelRatio();this.setTransform(1*y,0,0,1*y,0,0)}getCanvas(){return this.canvas}clear(y){const x=this.getCanvas();y?this.clearRect(y.x||0,y.y||0,y.width||0,y.height||0):this.clearRect(0,0,x.getWidth()/x.pixelRatio,x.getHeight()/x.pixelRatio)}_applyLineCap(y){const x=y.attrs.lineCap;x&&this.setAttr("lineCap",x)}_applyOpacity(y){const x=y.getAbsoluteOpacity();x!==1&&this.setAttr("globalAlpha",x)}_applyLineJoin(y){const x=y.attrs.lineJoin;x&&this.setAttr("lineJoin",x)}setAttr(y,x){this._context[y]=x}arc(y,x,w,T,A,k){this._context.arc(y,x,w,T,A,k)}arcTo(y,x,w,T,A){this._context.arcTo(y,x,w,T,A)}beginPath(){this._context.beginPath()}bezierCurveTo(y,x,w,T,A,k){this._context.bezierCurveTo(y,x,w,T,A,k)}clearRect(y,x,w,T){this._context.clearRect(y,x,w,T)}clip(...y){this._context.clip.apply(this._context,y)}closePath(){this._context.closePath()}createImageData(y,x){const w=arguments;if(w.length===2)return this._context.createImageData(y,x);if(w.length===1)return this._context.createImageData(y)}createLinearGradient(y,x,w,T){return this._context.createLinearGradient(y,x,w,T)}createPattern(y,x){return this._context.createPattern(y,x)}createRadialGradient(y,x,w,T,A,k){return this._context.createRadialGradient(y,x,w,T,A,k)}drawImage(y,x,w,T,A,k,I,O,M){const L=arguments,H=this._context;L.length===3?H.drawImage(y,x,w):L.length===5?H.drawImage(y,x,w,T,A):L.length===9&&H.drawImage(y,x,w,T,A,k,I,O,M)}ellipse(y,x,w,T,A,k,I,O){this._context.ellipse(y,x,w,T,A,k,I,O)}isPointInPath(y,x,w,T){return w?this._context.isPointInPath(w,y,x,T):this._context.isPointInPath(y,x,T)}fill(...y){this._context.fill.apply(this._context,y)}fillRect(y,x,w,T){this._context.fillRect(y,x,w,T)}strokeRect(y,x,w,T){this._context.strokeRect(y,x,w,T)}fillText(y,x,w,T){T?this._context.fillText(y,x,w,T):this._context.fillText(y,x,w)}measureText(y){return this._context.measureText(y)}getImageData(y,x,w,T){return this._context.getImageData(y,x,w,T)}lineTo(y,x){this._context.lineTo(y,x)}moveTo(y,x){this._context.moveTo(y,x)}rect(y,x,w,T){this._context.rect(y,x,w,T)}roundRect(y,x,w,T,A){this._context.roundRect(y,x,w,T,A)}putImageData(y,x,w){this._context.putImageData(y,x,w)}quadraticCurveTo(y,x,w,T){this._context.quadraticCurveTo(y,x,w,T)}restore(){this._context.restore()}rotate(y){this._context.rotate(y)}save(){this._context.save()}scale(y,x){this._context.scale(y,x)}setLineDash(y){this._context.setLineDash?this._context.setLineDash(y):"mozDash"in this._context?this._context.mozDash=y:"webkitLineDash"in this._context&&(this._context.webkitLineDash=y)}getLineDash(){return this._context.getLineDash()}setTransform(y,x,w,T,A,k){this._context.setTransform(y,x,w,T,A,k)}stroke(y){y?this._context.stroke(y):this._context.stroke()}strokeText(y,x,w,T){this._context.strokeText(y,x,w,T)}transform(y,x,w,T,A,k){this._context.transform(y,x,w,T,A,k)}translate(y,x){this._context.translate(y,x)}_enableTrace(){let y=this,x=f.length,w=this.setAttr,T,A;const k=function(I){let O=y[I],M;y[I]=function(){return A=n(Array.prototype.slice.call(arguments,0)),M=O.apply(y,arguments),y._trace({method:I,args:A}),M}};for(T=0;T<x;T++)k(f[T]);y.setAttr=function(){w.apply(y,arguments);const I=arguments[0];let O=arguments[1];(I==="shadowOffsetX"||I==="shadowOffsetY"||I==="shadowBlur")&&(O=O/this.canvas.getPixelRatio()),y._trace({property:I,val:O})}}_applyGlobalCompositeOperation(y){const x=y.attrs.globalCompositeOperation;!x||x==="source-over"||this.setAttr("globalCompositeOperation",x)}}vy.Context=p,d.forEach(function(b){Object.defineProperty(p.prototype,b,{get(){return this._context[b]},set(y){this._context[b]=y}})});class m extends p{constructor(y,{willReadFrequently:x=!1}={}){super(y),this._context=y._canvas.getContext("2d",{willReadFrequently:x})}_fillColor(y){const x=y.fill();this.setAttr("fillStyle",x),y._fillFunc(this)}_fillPattern(y){this.setAttr("fillStyle",y._getFillPattern()),y._fillFunc(this)}_fillLinearGradient(y){const x=y._getLinearGradient();x&&(this.setAttr("fillStyle",x),y._fillFunc(this))}_fillRadialGradient(y){const x=y._getRadialGradient();x&&(this.setAttr("fillStyle",x),y._fillFunc(this))}_fill(y){const x=y.fill(),w=y.getFillPriority();if(x&&w==="color"){this._fillColor(y);return}const T=y.getFillPatternImage();if(T&&w==="pattern"){this._fillPattern(y);return}const A=y.getFillLinearGradientColorStops();if(A&&w==="linear-gradient"){this._fillLinearGradient(y);return}const k=y.getFillRadialGradientColorStops();if(k&&w==="radial-gradient"){this._fillRadialGradient(y);return}x?this._fillColor(y):T?this._fillPattern(y):A?this._fillLinearGradient(y):k&&this._fillRadialGradient(y)}_strokeLinearGradient(y){const x=y.getStrokeLinearGradientStartPoint(),w=y.getStrokeLinearGradientEndPoint(),T=y.getStrokeLinearGradientColorStops(),A=this.createLinearGradient(x.x,x.y,w.x,w.y);if(T){for(let k=0;k<T.length;k+=2)A.addColorStop(T[k],T[k+1]);this.setAttr("strokeStyle",A)}}_stroke(y){const x=y.dash(),w=y.getStrokeScaleEnabled();if(y.hasStroke()){if(!w){this.save();const A=this.getCanvas().getPixelRatio();this.setTransform(A,0,0,A,0,0)}this._applyLineCap(y),x&&y.dashEnabled()&&(this.setLineDash(x),this.setAttr("lineDashOffset",y.dashOffset())),this.setAttr("lineWidth",y.strokeWidth()),y.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),y.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(y):this.setAttr("strokeStyle",y.stroke()),y._strokeFunc(this),w||this.restore()}}_applyShadow(y){var x,w,T;const A=(x=y.getShadowRGBA())!==null&&x!==void 0?x:"black",k=(w=y.getShadowBlur())!==null&&w!==void 0?w:5,I=(T=y.getShadowOffset())!==null&&T!==void 0?T:{x:0,y:0},O=y.getAbsoluteScale(),M=this.canvas.getPixelRatio(),L=O.x*M,H=O.y*M;this.setAttr("shadowColor",A),this.setAttr("shadowBlur",k*Math.min(Math.abs(L),Math.abs(H))),this.setAttr("shadowOffsetX",I.x*L),this.setAttr("shadowOffsetY",I.y*H)}}vy.SceneContext=m;class g extends p{constructor(y){super(y),this._context=y._canvas.getContext("2d",{willReadFrequently:!0})}_fill(y){this.save(),this.setAttr("fillStyle",y.colorKey),y._fillFuncHit(this),this.restore()}strokeShape(y){y.hasHitStroke()&&this._stroke(y)}_stroke(y){if(y.hasHitStroke()){const x=y.getStrokeScaleEnabled();if(!x){this.save();const A=this.getCanvas().getPixelRatio();this.setTransform(A,0,0,A,0,0)}this._applyLineCap(y);const w=y.hitStrokeWidth(),T=w==="auto"?y.strokeWidth():w;this.setAttr("lineWidth",T),this.setAttr("strokeStyle",y.colorKey),y._strokeFuncHit(this),x||this.restore()}}}return vy.HitContext=g,vy}var jue;function _M(){if(jue)return yy;jue=1,Object.defineProperty(yy,"__esModule",{value:!0}),yy.HitCanvas=yy.SceneCanvas=yy.Canvas=void 0;const e=Xo(),t=mSe(),n=Vr(),r=Yr(),i=Zr();let s;function o(){if(s)return s;const c=e.Util.createCanvasElement(),f=c.getContext("2d");return s=function(){const d=n.Konva._global.devicePixelRatio||1,h=f.webkitBackingStorePixelRatio||f.mozBackingStorePixelRatio||f.msBackingStorePixelRatio||f.oBackingStorePixelRatio||f.backingStorePixelRatio||1;return d/h}(),e.Util.releaseCanvas(c),s}class a{constructor(f){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const h=(f||{}).pixelRatio||n.Konva.pixelRatio||o();this.pixelRatio=h,this._canvas=e.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(f){const d=this.pixelRatio;this.pixelRatio=f,this.setSize(this.getWidth()/d,this.getHeight()/d)}setWidth(f){this.width=this._canvas.width=f*this.pixelRatio,this._canvas.style.width=f+"px";const d=this.pixelRatio;this.getContext()._context.scale(d,d)}setHeight(f){this.height=this._canvas.height=f*this.pixelRatio,this._canvas.style.height=f+"px";const d=this.pixelRatio;this.getContext()._context.scale(d,d)}getWidth(){return this.width}getHeight(){return this.height}setSize(f,d){this.setWidth(f||0),this.setHeight(d||0)}toDataURL(f,d){try{return this._canvas.toDataURL(f,d)}catch{try{return this._canvas.toDataURL()}catch(p){return e.Util.error("Unable to get data URL. "+p.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}yy.Canvas=a,r.Factory.addGetterSetter(a,"pixelRatio",void 0,(0,i.getNumberValidator)());class u extends a{constructor(f={width:0,height:0,willReadFrequently:!1}){super(f),this.context=new t.SceneContext(this,{willReadFrequently:f.willReadFrequently}),this.setSize(f.width,f.height)}}yy.SceneCanvas=u;class l extends a{constructor(f={width:0,height:0}){super(f),this.hitCanvas=!0,this.context=new t.HitContext(this),this.setSize(f.width,f.height)}}return yy.HitCanvas=l,yy}var nB={},Uue;function LK(){return Uue||(Uue=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DD=void 0;const t=Vr(),n=Xo();e.DD={get isDragging(){let r=!1;return e.DD._dragElements.forEach(i=>{i.dragStatus==="dragging"&&(r=!0)}),r},justDragged:!1,get node(){let r;return e.DD._dragElements.forEach(i=>{r=i.node}),r},_dragElements:new Map,_drag(r){const i=[];e.DD._dragElements.forEach((s,o)=>{const{node:a}=s,u=a.getStage();u.setPointersPositions(r),s.pointerId===void 0&&(s.pointerId=n.Util._getFirstPointerId(r));const l=u._changedPointerPositions.find(c=>c.id===s.pointerId);if(l){if(s.dragStatus!=="dragging"){const c=a.dragDistance();if(Math.max(Math.abs(l.x-s.startPointerPos.x),Math.abs(l.y-s.startPointerPos.y))<c||(a.startDrag({evt:r}),!a.isDragging()))return}a._setDragPosition(r,s),i.push(a)}}),i.forEach(s=>{s.fire("dragmove",{type:"dragmove",target:s,evt:r},!0)})},_endDragBefore(r){const i=[];e.DD._dragElements.forEach(s=>{const{node:o}=s,a=o.getStage();if(r&&a.setPointersPositions(r),!a._changedPointerPositions.find(c=>c.id===s.pointerId))return;(s.dragStatus==="dragging"||s.dragStatus==="stopped")&&(e.DD.justDragged=!0,t.Konva._mouseListenClick=!1,t.Konva._touchListenClick=!1,t.Konva._pointerListenClick=!1,s.dragStatus="stopped");const l=s.node.getLayer()||s.node instanceof t.Konva.Stage&&s.node;l&&i.indexOf(l)===-1&&i.push(l)}),i.forEach(s=>{s.draw()})},_endDragAfter(r){e.DD._dragElements.forEach((i,s)=>{i.dragStatus==="stopped"&&i.node.fire("dragend",{type:"dragend",target:i.node,evt:r},!0),i.dragStatus!=="dragging"&&e.DD._dragElements.delete(s)})}},t.Konva.isBrowser&&(window.addEventListener("mouseup",e.DD._endDragBefore,!0),window.addEventListener("touchend",e.DD._endDragBefore,!0),window.addEventListener("touchcancel",e.DD._endDragBefore,!0),window.addEventListener("mousemove",e.DD._drag),window.addEventListener("touchmove",e.DD._drag),window.addEventListener("mouseup",e.DD._endDragAfter,!1),window.addEventListener("touchend",e.DD._endDragAfter,!1),window.addEventListener("touchcancel",e.DD._endDragAfter,!1))}(nB)),nB}var zue;function _a(){if(zue)return cA;zue=1,Object.defineProperty(cA,"__esModule",{value:!0}),cA.Node=void 0;const e=Xo(),t=Yr(),n=_M(),r=Vr(),i=LK(),s=Zr(),o="absoluteOpacity",a="allEventListeners",u="absoluteTransform",l="absoluteScale",c="canvas",f="Change",d="children",h="konva",p="listening",m="mouseenter",g="mouseleave",b="set",y="Shape",x=" ",w="stage",T="transform",A="Stage",k="visible",I=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(x);let O=1;class M{constructor(D){this._id=O++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(D),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(D){(D===T||D===u)&&this._cache.get(D)?this._cache.get(D).dirty=!0:D?this._cache.delete(D):this._cache.clear()}_getCache(D,B){let U=this._cache.get(D);return(U===void 0||(D===T||D===u)&&U.dirty===!0)&&(U=B.call(this),this._cache.set(D,U)),U}_calculate(D,B,U){if(!this._attachedDepsListeners.get(D)){const G=B.map(ee=>ee+"Change.konva").join(x);this.on(G,()=>{this._clearCache(D)}),this._attachedDepsListeners.set(D,!0)}return this._getCache(D,U)}_getCanvasCache(){return this._cache.get(c)}_clearSelfAndDescendantCache(D){this._clearCache(D),D===u&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(c)){const{scene:D,filter:B,hit:U}=this._cache.get(c);e.Util.releaseCanvas(D,B,U),this._cache.delete(c)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(D){const B=D||{};let U={};(B.x===void 0||B.y===void 0||B.width===void 0||B.height===void 0)&&(U=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let G=Math.ceil(B.width||U.width),ee=Math.ceil(B.height||U.height),ne=B.pixelRatio,ue=B.x===void 0?Math.floor(U.x):B.x,X=B.y===void 0?Math.floor(U.y):B.y,q=B.offset||0,te=B.drawBorder||!1,W=B.hitCanvasPixelRatio||1;if(!G||!ee){e.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const Z=Math.abs(Math.round(U.x)-ue)>.5?1:0,oe=Math.abs(Math.round(U.y)-X)>.5?1:0;G+=q*2+Z,ee+=q*2+oe,ue-=q,X-=q;const pe=new n.SceneCanvas({pixelRatio:ne,width:G,height:ee}),ce=new n.SceneCanvas({pixelRatio:ne,width:0,height:0,willReadFrequently:!0}),he=new n.HitCanvas({pixelRatio:W,width:G,height:ee}),Ee=pe.getContext(),Ae=he.getContext();return he.isCache=!0,pe.isCache=!0,this._cache.delete(c),this._filterUpToDate=!1,B.imageSmoothingEnabled===!1&&(pe.getContext()._context.imageSmoothingEnabled=!1,ce.getContext()._context.imageSmoothingEnabled=!1),Ee.save(),Ae.save(),Ee.translate(-ue,-X),Ae.translate(-ue,-X),this._isUnderCache=!0,this._clearSelfAndDescendantCache(o),this._clearSelfAndDescendantCache(l),this.drawScene(pe,this),this.drawHit(he,this),this._isUnderCache=!1,Ee.restore(),Ae.restore(),te&&(Ee.save(),Ee.beginPath(),Ee.rect(0,0,G,ee),Ee.closePath(),Ee.setAttr("strokeStyle","red"),Ee.setAttr("lineWidth",5),Ee.stroke(),Ee.restore()),this._cache.set(c,{scene:pe,filter:ce,hit:he,x:ue,y:X}),this._requestDraw(),this}isCached(){return this._cache.has(c)}getClientRect(D){throw new Error('abstract "getClientRect" method call')}_transformedRect(D,B){const U=[{x:D.x,y:D.y},{x:D.x+D.width,y:D.y},{x:D.x+D.width,y:D.y+D.height},{x:D.x,y:D.y+D.height}];let G=1/0,ee=1/0,ne=-1/0,ue=-1/0;const X=this.getAbsoluteTransform(B);return U.forEach(function(q){const te=X.point(q);G===void 0&&(G=ne=te.x,ee=ue=te.y),G=Math.min(G,te.x),ee=Math.min(ee,te.y),ne=Math.max(ne,te.x),ue=Math.max(ue,te.y)}),{x:G,y:ee,width:ne-G,height:ue-ee}}_drawCachedSceneCanvas(D){D.save(),D._applyOpacity(this),D._applyGlobalCompositeOperation(this);const B=this._getCanvasCache();D.translate(B.x,B.y);const U=this._getCachedSceneCanvas(),G=U.pixelRatio;D.drawImage(U._canvas,0,0,U.width/G,U.height/G),D.restore()}_drawCachedHitCanvas(D){const B=this._getCanvasCache(),U=B.hit;D.save(),D.translate(B.x,B.y),D.drawImage(U._canvas,0,0,U.width/U.pixelRatio,U.height/U.pixelRatio),D.restore()}_getCachedSceneCanvas(){let D=this.filters(),B=this._getCanvasCache(),U=B.scene,G=B.filter,ee=G.getContext(),ne,ue,X,q;if(D){if(!this._filterUpToDate){const te=U.pixelRatio;G.setSize(U.width/U.pixelRatio,U.height/U.pixelRatio);try{for(ne=D.length,ee.clear(),ee.drawImage(U._canvas,0,0,U.getWidth()/te,U.getHeight()/te),ue=ee.getImageData(0,0,G.getWidth(),G.getHeight()),X=0;X<ne;X++){if(q=D[X],typeof q!="function"){e.Util.error("Filter should be type of function, but got "+typeof q+" instead. Please check correct filters");continue}q.call(this,ue),ee.putImageData(ue,0,0)}}catch(W){e.Util.error("Unable to apply filter. "+W.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return G}return U}on(D,B){if(this._cache&&this._cache.delete(a),arguments.length===3)return this._delegate.apply(this,arguments);let U=D.split(x),G=U.length,ee,ne,ue,X,q;for(ee=0;ee<G;ee++)ne=U[ee],ue=ne.split("."),X=ue[0],q=ue[1]||"",this.eventListeners[X]||(this.eventListeners[X]=[]),this.eventListeners[X].push({name:q,handler:B});return this}off(D,B){let U=(D||"").split(x),G=U.length,ee,ne,ue,X,q,te;if(this._cache&&this._cache.delete(a),!D)for(ne in this.eventListeners)this._off(ne);for(ee=0;ee<G;ee++)if(ue=U[ee],X=ue.split("."),q=X[0],te=X[1],q)this.eventListeners[q]&&this._off(q,te,B);else for(ne in this.eventListeners)this._off(ne,te,B);return this}dispatchEvent(D){const B={target:this,type:D.type,evt:D};return this.fire(D.type,B),this}addEventListener(D,B){return this.on(D,function(U){B.call(this,U.evt)}),this}removeEventListener(D){return this.off(D),this}_delegate(D,B,U){const G=this;this.on(D,function(ee){const ne=ee.target.findAncestors(B,!0,G);for(let ue=0;ue<ne.length;ue++)ee=e.Util.cloneObject(ee),ee.currentTarget=ne[ue],U.call(ne[ue],ee)})}remove(){return this.isDragging()&&this.stopDrag(),i.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(u),this._clearSelfAndDescendantCache(o),this._clearSelfAndDescendantCache(l),this._clearSelfAndDescendantCache(w),this._clearSelfAndDescendantCache(k),this._clearSelfAndDescendantCache(p)}_remove(){this._clearCaches();const D=this.getParent();D&&D.children&&(D.children.splice(this.index,1),D._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(D){const B="get"+e.Util._capitalize(D);return e.Util._isFunction(this[B])?this[B]():this.attrs[D]}getAncestors(){let D=this.getParent(),B=[];for(;D;)B.push(D),D=D.getParent();return B}getAttrs(){return this.attrs||{}}setAttrs(D){return this._batchTransformChanges(()=>{let B,U;if(!D)return this;for(B in D)B!==d&&(U=b+e.Util._capitalize(B),e.Util._isFunction(this[U])?this[U](D[B]):this._setAttr(B,D[B]))}),this}isListening(){return this._getCache(p,this._isListening)}_isListening(D){if(!this.listening())return!1;const U=this.getParent();return U&&U!==D&&this!==D?U._isListening(D):!0}isVisible(){return this._getCache(k,this._isVisible)}_isVisible(D){if(!this.visible())return!1;const U=this.getParent();return U&&U!==D&&this!==D?U._isVisible(D):!0}shouldDrawHit(D,B=!1){if(D)return this._isVisible(D)&&this._isListening(D);const U=this.getLayer();let G=!1;i.DD._dragElements.forEach(ne=>{ne.dragStatus==="dragging"&&(ne.node.nodeType==="Stage"||ne.node.getLayer()===U)&&(G=!0)});const ee=!B&&!r.Konva.hitOnDragEnabled&&(G||r.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!ee}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let D=this.getDepth(),B=this,U=0,G,ee,ne,ue;function X(te){for(G=[],ee=te.length,ne=0;ne<ee;ne++)ue=te[ne],U++,ue.nodeType!==y&&(G=G.concat(ue.getChildren().slice())),ue._id===B._id&&(ne=ee);G.length>0&&G[0].getDepth()<=D&&X(G)}const q=this.getStage();return B.nodeType!==A&&q&&X(q.getChildren()),U}getDepth(){let D=0,B=this.parent;for(;B;)D++,B=B.parent;return D}_batchTransformChanges(D){this._batchingTransformChange=!0,D(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(T),this._clearSelfAndDescendantCache(u)),this._needClearTransformCache=!1}setPosition(D){return this._batchTransformChanges(()=>{this.x(D.x),this.y(D.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const D=this.getStage();if(!D)return null;const B=D.getPointerPosition();if(!B)return null;const U=this.getAbsoluteTransform().copy();return U.invert(),U.point(B)}getAbsolutePosition(D){let B=!1,U=this.parent;for(;U;){if(U.isCached()){B=!0;break}U=U.parent}B&&!D&&(D=!0);const G=this.getAbsoluteTransform(D).getMatrix(),ee=new e.Transform,ne=this.offset();return ee.m=G.slice(),ee.translate(ne.x,ne.y),ee.getTranslation()}setAbsolutePosition(D){const{x:B,y:U,...G}=this._clearTransform();this.attrs.x=B,this.attrs.y=U,this._clearCache(T);const ee=this._getAbsoluteTransform().copy();return ee.invert(),ee.translate(D.x,D.y),D={x:this.attrs.x+ee.getTranslation().x,y:this.attrs.y+ee.getTranslation().y},this._setTransform(G),this.setPosition({x:D.x,y:D.y}),this._clearCache(T),this._clearSelfAndDescendantCache(u),this}_setTransform(D){let B;for(B in D)this.attrs[B]=D[B]}_clearTransform(){const D={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,D}move(D){let B=D.x,U=D.y,G=this.x(),ee=this.y();return B!==void 0&&(G+=B),U!==void 0&&(ee+=U),this.setPosition({x:G,y:ee}),this}_eachAncestorReverse(D,B){let U=[],G=this.getParent(),ee,ne;if(!(B&&B._id===this._id)){for(U.unshift(this);G&&(!B||G._id!==B._id);)U.unshift(G),G=G.parent;for(ee=U.length,ne=0;ne<ee;ne++)D(U[ne])}}rotate(D){return this.rotation(this.rotation()+D),this}moveToTop(){if(!this.parent)return e.Util.warn("Node has no parent. moveToTop function is ignored."),!1;const D=this.index,B=this.parent.getChildren().length;return D<B-1?(this.parent.children.splice(D,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return e.Util.warn("Node has no parent. moveUp function is ignored."),!1;const D=this.index,B=this.parent.getChildren().length;return D<B-1?(this.parent.children.splice(D,1),this.parent.children.splice(D+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return e.Util.warn("Node has no parent. moveDown function is ignored."),!1;const D=this.index;return D>0?(this.parent.children.splice(D,1),this.parent.children.splice(D-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return e.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;const D=this.index;return D>0?(this.parent.children.splice(D,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(D){if(!this.parent)return e.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(D<0||D>=this.parent.children.length)&&e.Util.warn("Unexpected value "+D+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const B=this.index;return this.parent.children.splice(B,1),this.parent.children.splice(D,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(o,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let D=this.opacity();const B=this.getParent();return B&&!B._isUnderCache&&(D*=B.getAbsoluteOpacity()),D}moveTo(D){return this.getParent()!==D&&(this._remove(),D.add(this)),this}toObject(){let D=this.getAttrs(),B,U,G,ee,ne;const ue={attrs:{},className:this.getClassName()};for(B in D)U=D[B],ne=e.Util.isObject(U)&&!e.Util._isPlainObject(U)&&!e.Util._isArray(U),!ne&&(G=typeof this[B]=="function"&&this[B],delete D[B],ee=G?G.call(this):null,D[B]=U,ee!==U&&(ue.attrs[B]=U));return e.Util._prepareToStringify(ue)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(D,B,U){const G=[];B&&this._isMatch(D)&&G.push(this);let ee=this.parent;for(;ee;){if(ee===U)return G;ee._isMatch(D)&&G.push(ee),ee=ee.parent}return G}isAncestorOf(D){return!1}findAncestor(D,B,U){return this.findAncestors(D,B,U)[0]}_isMatch(D){if(!D)return!1;if(typeof D=="function")return D(this);let B=D.replace(/ /g,"").split(","),U=B.length,G,ee;for(G=0;G<U;G++)if(ee=B[G],e.Util.isValidSelector(ee)||(e.Util.warn('Selector "'+ee+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),e.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),e.Util.warn("Konva is awesome, right?")),ee.charAt(0)==="#"){if(this.id()===ee.slice(1))return!0}else if(ee.charAt(0)==="."){if(this.hasName(ee.slice(1)))return!0}else if(this.className===ee||this.nodeType===ee)return!0;return!1}getLayer(){const D=this.getParent();return D?D.getLayer():null}getStage(){return this._getCache(w,this._getStage)}_getStage(){const D=this.getParent();return D?D.getStage():null}fire(D,B={},U){return B.target=B.target||this,U?this._fireAndBubble(D,B):this._fire(D,B),this}getAbsoluteTransform(D){return D?this._getAbsoluteTransform(D):this._getCache(u,this._getAbsoluteTransform)}_getAbsoluteTransform(D){let B;if(D)return B=new e.Transform,this._eachAncestorReverse(function(U){const G=U.transformsEnabled();G==="all"?B.multiply(U.getTransform()):G==="position"&&B.translate(U.x()-U.offsetX(),U.y()-U.offsetY())},D),B;{B=this._cache.get(u)||new e.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(B):B.reset();const U=this.transformsEnabled();if(U==="all")B.multiply(this.getTransform());else if(U==="position"){const G=this.attrs.x||0,ee=this.attrs.y||0,ne=this.attrs.offsetX||0,ue=this.attrs.offsetY||0;B.translate(G-ne,ee-ue)}return B.dirty=!1,B}}getAbsoluteScale(D){let B=this;for(;B;)B._isUnderCache&&(D=B),B=B.getParent();const G=this.getAbsoluteTransform(D).decompose();return{x:G.scaleX,y:G.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(T,this._getTransform)}_getTransform(){var D,B;const U=this._cache.get(T)||new e.Transform;U.reset();const G=this.x(),ee=this.y(),ne=r.Konva.getAngle(this.rotation()),ue=(D=this.attrs.scaleX)!==null&&D!==void 0?D:1,X=(B=this.attrs.scaleY)!==null&&B!==void 0?B:1,q=this.attrs.skewX||0,te=this.attrs.skewY||0,W=this.attrs.offsetX||0,Z=this.attrs.offsetY||0;return(G!==0||ee!==0)&&U.translate(G,ee),ne!==0&&U.rotate(ne),(q!==0||te!==0)&&U.skew(q,te),(ue!==1||X!==1)&&U.scale(ue,X),(W!==0||Z!==0)&&U.translate(-1*W,-1*Z),U.dirty=!1,U}clone(D){let B=e.Util.cloneObject(this.attrs),U,G,ee,ne,ue;for(U in D)B[U]=D[U];const X=new this.constructor(B);for(U in this.eventListeners)for(G=this.eventListeners[U],ee=G.length,ne=0;ne<ee;ne++)ue=G[ne],ue.name.indexOf(h)<0&&(X.eventListeners[U]||(X.eventListeners[U]=[]),X.eventListeners[U].push(ue));return X}_toKonvaCanvas(D){D=D||{};const B=this.getClientRect(),U=this.getStage(),G=D.x!==void 0?D.x:Math.floor(B.x),ee=D.y!==void 0?D.y:Math.floor(B.y),ne=D.pixelRatio||1,ue=new n.SceneCanvas({width:D.width||Math.ceil(B.width)||(U?U.width():0),height:D.height||Math.ceil(B.height)||(U?U.height():0),pixelRatio:ne}),X=ue.getContext(),q=new n.SceneCanvas({width:ue.width/ue.pixelRatio+Math.abs(G),height:ue.height/ue.pixelRatio+Math.abs(ee),pixelRatio:ue.pixelRatio});return D.imageSmoothingEnabled===!1&&(X._context.imageSmoothingEnabled=!1),X.save(),(G||ee)&&X.translate(-1*G,-1*ee),this.drawScene(ue,void 0,q),X.restore(),ue}toCanvas(D){return this._toKonvaCanvas(D)._canvas}toDataURL(D){D=D||{};const B=D.mimeType||null,U=D.quality||null,G=this._toKonvaCanvas(D).toDataURL(B,U);return D.callback&&D.callback(G),G}toImage(D){return new Promise((B,U)=>{try{const G=D==null?void 0:D.callback;G&&delete D.callback,e.Util._urlToImage(this.toDataURL(D),function(ee){B(ee),G==null||G(ee)})}catch(G){U(G)}})}toBlob(D){return new Promise((B,U)=>{try{const G=D==null?void 0:D.callback;G&&delete D.callback,this.toCanvas(D).toBlob(ee=>{B(ee),G==null||G(ee)},D==null?void 0:D.mimeType,D==null?void 0:D.quality)}catch(G){U(G)}})}setSize(D){return this.width(D.width),this.height(D.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():r.Konva.dragDistance}_off(D,B,U){let G=this.eventListeners[D],ee,ne,ue;for(ee=0;ee<G.length;ee++)if(ne=G[ee].name,ue=G[ee].handler,(ne!=="konva"||B==="konva")&&(!B||ne===B)&&(!U||U===ue)){if(G.splice(ee,1),G.length===0){delete this.eventListeners[D];break}ee--}}_fireChangeEvent(D,B,U){this._fire(D+f,{oldVal:B,newVal:U})}addName(D){if(!this.hasName(D)){const B=this.name(),U=B?B+" "+D:D;this.name(U)}return this}hasName(D){if(!D)return!1;const B=this.name();return B?(B||"").split(/\s/g).indexOf(D)!==-1:!1}removeName(D){const B=(this.name()||"").split(/\s/g),U=B.indexOf(D);return U!==-1&&(B.splice(U,1),this.name(B.join(" "))),this}setAttr(D,B){const U=this[b+e.Util._capitalize(D)];return e.Util._isFunction(U)?U.call(this,B):this._setAttr(D,B),this}_requestDraw(){if(r.Konva.autoDrawEnabled){const D=this.getLayer()||this.getStage();D==null||D.batchDraw()}}_setAttr(D,B){const U=this.attrs[D];U===B&&!e.Util.isObject(B)||(B==null?delete this.attrs[D]:this.attrs[D]=B,this._shouldFireChangeEvents&&this._fireChangeEvent(D,U,B),this._requestDraw())}_setComponentAttr(D,B,U){let G;U!==void 0&&(G=this.attrs[D],G||(this.attrs[D]=this.getAttr(D)),this.attrs[D][B]=U,this._fireChangeEvent(D,G,U))}_fireAndBubble(D,B,U){if(B&&this.nodeType===y&&(B.target=this),!((D===m||D===g)&&(U&&(this===U||this.isAncestorOf&&this.isAncestorOf(U))||this.nodeType==="Stage"&&!U))){this._fire(D,B);const ee=(D===m||D===g)&&U&&U.isAncestorOf&&U.isAncestorOf(this)&&!U.isAncestorOf(this.parent);(B&&!B.cancelBubble||!B)&&this.parent&&this.parent.isListening()&&!ee&&(U&&U.parent?this._fireAndBubble.call(this.parent,D,B,U):this._fireAndBubble.call(this.parent,D,B))}}_getProtoListeners(D){var B,U,G;const ee=(B=this._cache.get(a))!==null&&B!==void 0?B:{};let ne=ee==null?void 0:ee[D];if(ne===void 0){ne=[];let ue=Object.getPrototypeOf(this);for(;ue;){const X=(G=(U=ue.eventListeners)===null||U===void 0?void 0:U[D])!==null&&G!==void 0?G:[];ne.push(...X),ue=Object.getPrototypeOf(ue)}ee[D]=ne,this._cache.set(a,ee)}return ne}_fire(D,B){B=B||{},B.currentTarget=this,B.type=D;const U=this._getProtoListeners(D);if(U)for(var G=0;G<U.length;G++)U[G].handler.call(this,B);const ee=this.eventListeners[D];if(ee)for(var G=0;G<ee.length;G++)ee[G].handler.call(this,B)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(D){const B=D?D.pointerId:void 0,U=this.getStage(),G=this.getAbsolutePosition();if(!U)return;const ee=U._getPointerById(B)||U._changedPointerPositions[0]||G;i.DD._dragElements.set(this._id,{node:this,startPointerPos:ee,offset:{x:ee.x-G.x,y:ee.y-G.y},dragStatus:"ready",pointerId:B})}startDrag(D,B=!0){i.DD._dragElements.has(this._id)||this._createDragElement(D);const U=i.DD._dragElements.get(this._id);U.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:D&&D.evt},B)}_setDragPosition(D,B){const U=this.getStage()._getPointerById(B.pointerId);if(!U)return;let G={x:U.x-B.offset.x,y:U.y-B.offset.y};const ee=this.dragBoundFunc();if(ee!==void 0){const ne=ee.call(this,G,D);ne?G=ne:e.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==G.x||this._lastPos.y!==G.y)&&(this.setAbsolutePosition(G),this._requestDraw()),this._lastPos=G}stopDrag(D){const B=i.DD._dragElements.get(this._id);B&&(B.dragStatus="stopped"),i.DD._endDragBefore(D),i.DD._endDragAfter(D)}setDraggable(D){this._setAttr("draggable",D),this._dragChange()}isDragging(){const D=i.DD._dragElements.get(this._id);return D?D.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(D){if(!(!(D.evt.button!==void 0)||r.Konva.dragButtons.indexOf(D.evt.button)>=0)||this.isDragging())return;let G=!1;i.DD._dragElements.forEach(ee=>{this.isAncestorOf(ee.node)&&(G=!0)}),G||this._createDragElement(D)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const B=i.DD._dragElements.get(this._id),U=B&&B.dragStatus==="dragging",G=B&&B.dragStatus==="ready";U?this.stopDrag():G&&i.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(D={x:0,y:0}){const B=this.getStage();if(!B)return!1;const U={x:-D.x,y:-D.y,width:B.width()+2*D.x,height:B.height()+2*D.y};return e.Util.haveIntersection(U,this.getClientRect())}static create(D,B){return e.Util._isString(D)&&(D=JSON.parse(D)),this._createNode(D,B)}static _createNode(D,B){let U=M.prototype.getClassName.call(D),G=D.children,ee,ne,ue;B&&(D.attrs.container=B),r.Konva[U]||(e.Util.warn('Can not find a node with class name "'+U+'". Fallback to "Shape".'),U="Shape");const X=r.Konva[U];if(ee=new X(D.attrs),G)for(ne=G.length,ue=0;ue<ne;ue++)ee.add(M._createNode(G[ue]));return ee}}cA.Node=M,M.prototype.nodeType="Node",M.prototype._attrsAffectingSize=[],M.prototype.eventListeners={},M.prototype.on.call(M.prototype,I,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(T),this._clearSelfAndDescendantCache(u)}),M.prototype.on.call(M.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(k)}),M.prototype.on.call(M.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(p)}),M.prototype.on.call(M.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(o)});const L=t.Factory.addGetterSetter;return L(M,"zIndex"),L(M,"absolutePosition"),L(M,"position"),L(M,"x",0,(0,s.getNumberValidator)()),L(M,"y",0,(0,s.getNumberValidator)()),L(M,"globalCompositeOperation","source-over",(0,s.getStringValidator)()),L(M,"opacity",1,(0,s.getNumberValidator)()),L(M,"name","",(0,s.getStringValidator)()),L(M,"id","",(0,s.getStringValidator)()),L(M,"rotation",0,(0,s.getNumberValidator)()),t.Factory.addComponentsGetterSetter(M,"scale",["x","y"]),L(M,"scaleX",1,(0,s.getNumberValidator)()),L(M,"scaleY",1,(0,s.getNumberValidator)()),t.Factory.addComponentsGetterSetter(M,"skew",["x","y"]),L(M,"skewX",0,(0,s.getNumberValidator)()),L(M,"skewY",0,(0,s.getNumberValidator)()),t.Factory.addComponentsGetterSetter(M,"offset",["x","y"]),L(M,"offsetX",0,(0,s.getNumberValidator)()),L(M,"offsetY",0,(0,s.getNumberValidator)()),L(M,"dragDistance",void 0,(0,s.getNumberValidator)()),L(M,"width",0,(0,s.getNumberValidator)()),L(M,"height",0,(0,s.getNumberValidator)()),L(M,"listening",!0,(0,s.getBooleanValidator)()),L(M,"preventDefault",!0,(0,s.getBooleanValidator)()),L(M,"filters",void 0,function(H){return this._filterUpToDate=!1,H}),L(M,"visible",!0,(0,s.getBooleanValidator)()),L(M,"transformsEnabled","all",(0,s.getStringValidator)()),L(M,"size"),L(M,"dragBoundFunc"),L(M,"draggable",!1,(0,s.getBooleanValidator)()),t.Factory.backCompat(M,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),cA}var fA={},Vue;function wM(){if(Vue)return fA;Vue=1,Object.defineProperty(fA,"__esModule",{value:!0}),fA.Container=void 0;const e=Yr(),t=_a(),n=Zr();let r=class extends t.Node{constructor(){super(...arguments),this.children=[]}getChildren(s){if(!s)return this.children||[];const o=this.children||[],a=[];return o.forEach(function(u){s(u)&&a.push(u)}),a}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(s=>{s.parent=null,s.index=0,s.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(s=>{s.parent=null,s.index=0,s.destroy()}),this.children=[],this._requestDraw(),this}add(...s){if(s.length===0)return this;if(s.length>1){for(let a=0;a<s.length;a++)this.add(s[a]);return this}const o=s[0];return o.getParent()?(o.moveTo(this),this):(this._validateAdd(o),o.index=this.getChildren().length,o.parent=this,o._clearCaches(),this.getChildren().push(o),this._fire("add",{child:o}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(s){return this._generalFind(s,!1)}findOne(s){const o=this._generalFind(s,!0);return o.length>0?o[0]:void 0}_generalFind(s,o){const a=[];return this._descendants(u=>{const l=u._isMatch(s);return l&&a.push(u),!!(l&&o)}),a}_descendants(s){let o=!1;const a=this.getChildren();for(const u of a){if(o=s(u),o)return!0;if(u.hasChildren()&&(o=u._descendants(s),o))return!0}return!1}toObject(){const s=t.Node.prototype.toObject.call(this);return s.children=[],this.getChildren().forEach(o=>{s.children.push(o.toObject())}),s}isAncestorOf(s){let o=s.getParent();for(;o;){if(o._id===this._id)return!0;o=o.getParent()}return!1}clone(s){const o=t.Node.prototype.clone.call(this,s);return this.getChildren().forEach(function(a){o.add(a.clone())}),o}getAllIntersections(s){const o=[];return this.find("Shape").forEach(a=>{a.isVisible()&&a.intersects(s)&&o.push(a)}),o}_clearSelfAndDescendantCache(s){var o;super._clearSelfAndDescendantCache(s),!this.isCached()&&((o=this.children)===null||o===void 0||o.forEach(function(a){a._clearSelfAndDescendantCache(s)}))}_setChildrenIndices(){var s;(s=this.children)===null||s===void 0||s.forEach(function(o,a){o.index=a}),this._requestDraw()}drawScene(s,o,a){const u=this.getLayer(),l=s||u&&u.getCanvas(),c=l&&l.getContext(),f=this._getCanvasCache(),d=f&&f.scene,h=l&&l.isCache;if(!this.isVisible()&&!h)return this;if(d){c.save();const p=this.getAbsoluteTransform(o).getMatrix();c.transform(p[0],p[1],p[2],p[3],p[4],p[5]),this._drawCachedSceneCanvas(c),c.restore()}else this._drawChildren("drawScene",l,o,a);return this}drawHit(s,o){if(!this.shouldDrawHit(o))return this;const a=this.getLayer(),u=s||a&&a.hitCanvas,l=u&&u.getContext(),c=this._getCanvasCache();if(c&&c.hit){l.save();const d=this.getAbsoluteTransform(o).getMatrix();l.transform(d[0],d[1],d[2],d[3],d[4],d[5]),this._drawCachedHitCanvas(l),l.restore()}else this._drawChildren("drawHit",u,o);return this}_drawChildren(s,o,a,u){var l;const c=o&&o.getContext(),f=this.clipWidth(),d=this.clipHeight(),h=this.clipFunc(),p=typeof f=="number"&&typeof d=="number"||h,m=a===this;if(p){c.save();const b=this.getAbsoluteTransform(a);let y=b.getMatrix();c.transform(y[0],y[1],y[2],y[3],y[4],y[5]),c.beginPath();let x;if(h)x=h.call(this,c,this);else{const w=this.clipX(),T=this.clipY();c.rect(w||0,T||0,f,d)}c.clip.apply(c,x),y=b.copy().invert().getMatrix(),c.transform(y[0],y[1],y[2],y[3],y[4],y[5])}const g=!m&&this.globalCompositeOperation()!=="source-over"&&s==="drawScene";g&&(c.save(),c._applyGlobalCompositeOperation(this)),(l=this.children)===null||l===void 0||l.forEach(function(b){b[s](o,a,u)}),g&&c.restore(),p&&c.restore()}getClientRect(s={}){var o;const a=s.skipTransform,u=s.relativeTo;let l,c,f,d,h={x:1/0,y:1/0,width:0,height:0};const p=this;(o=this.children)===null||o===void 0||o.forEach(function(b){if(!b.visible())return;const y=b.getClientRect({relativeTo:p,skipShadow:s.skipShadow,skipStroke:s.skipStroke});y.width===0&&y.height===0||(l===void 0?(l=y.x,c=y.y,f=y.x+y.width,d=y.y+y.height):(l=Math.min(l,y.x),c=Math.min(c,y.y),f=Math.max(f,y.x+y.width),d=Math.max(d,y.y+y.height)))});const m=this.find("Shape");let g=!1;for(let b=0;b<m.length;b++)if(m[b]._isVisible(this)){g=!0;break}return g&&l!==void 0?h={x:l,y:c,width:f-l,height:d-c}:h={x:0,y:0,width:0,height:0},a?h:this._transformedRect(h,u)}};return fA.Container=r,e.Factory.addComponentsGetterSetter(r,"clip",["x","y","width","height"]),e.Factory.addGetterSetter(r,"clipX",void 0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(r,"clipY",void 0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(r,"clipWidth",void 0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(r,"clipHeight",void 0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(r,"clipFunc"),fA}var rB={},pv={},Hue;function gSe(){if(Hue)return pv;Hue=1,Object.defineProperty(pv,"__esModule",{value:!0}),pv.getCapturedShape=r,pv.createEvent=i,pv.hasPointerCapture=s,pv.setPointerCapture=o,pv.releaseCapture=a;const e=Vr(),t=new Map,n=e.Konva._global.PointerEvent!==void 0;function r(u){return t.get(u)}function i(u){return{evt:u,pointerId:u.pointerId}}function s(u,l){return t.get(u)===l}function o(u,l){a(u),l.getStage()&&(t.set(u,l),n&&l._fire("gotpointercapture",i(new PointerEvent("gotpointercapture"))))}function a(u,l){const c=t.get(u);if(!c)return;const f=c.getStage();f&&f.content,t.delete(u),n&&c._fire("lostpointercapture",i(new PointerEvent("lostpointercapture")))}return pv}var que;function Qyt(){return que||(que=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Stage=e.stages=void 0;const t=Xo(),n=Yr(),r=wM(),i=Vr(),s=_M(),o=LK(),a=Vr(),u=gSe(),l="Stage",c="string",f="px",d="mouseout",h="mouseleave",p="mouseover",m="mouseenter",g="mousemove",b="mousedown",y="mouseup",x="pointermove",w="pointerdown",T="pointerup",A="pointercancel",k="lostpointercapture",I="pointerout",O="pointerleave",M="pointerover",L="pointerenter",H="contextmenu",D="touchstart",B="touchend",U="touchmove",G="touchcancel",ee="wheel",ne=5,ue=[[m,"_pointerenter"],[b,"_pointerdown"],[g,"_pointermove"],[y,"_pointerup"],[h,"_pointerleave"],[D,"_pointerdown"],[U,"_pointermove"],[B,"_pointerup"],[G,"_pointercancel"],[p,"_pointerover"],[ee,"_wheel"],[H,"_contextmenu"],[w,"_pointerdown"],[x,"_pointermove"],[T,"_pointerup"],[A,"_pointercancel"],[k,"_lostpointercapture"]],X={mouse:{[I]:d,[O]:h,[M]:p,[L]:m,[x]:g,[w]:b,[T]:y,[A]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[I]:"touchout",[O]:"touchleave",[M]:"touchover",[L]:"touchenter",[x]:U,[w]:D,[T]:B,[A]:G,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[I]:I,[O]:O,[M]:M,[L]:L,[x]:x,[w]:w,[T]:T,[A]:A,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},q=pe=>pe.indexOf("pointer")>=0?"pointer":pe.indexOf("touch")>=0?"touch":"mouse",te=pe=>{const ce=q(pe);if(ce==="pointer")return i.Konva.pointerEventsEnabled&&X.pointer;if(ce==="touch")return X.touch;if(ce==="mouse")return X.mouse};function W(pe={}){return(pe.clipFunc||pe.clipWidth||pe.clipHeight)&&t.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),pe}const Z="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";e.stages=[];class oe extends r.Container{constructor(ce){super(W(ce)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),e.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{W(this.attrs)}),this._checkVisibility()}_validateAdd(ce){const he=ce.getType()==="Layer",Ee=ce.getType()==="FastLayer";he||Ee||t.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const ce=this.visible()?"":"none";this.content.style.display=ce}setContainer(ce){if(typeof ce===c){if(ce.charAt(0)==="."){const Ee=ce.slice(1);ce=document.getElementsByClassName(Ee)[0]}else{var he;ce.charAt(0)!=="#"?he=ce:he=ce.slice(1),ce=document.getElementById(he)}if(!ce)throw"Can not find container in document with id "+he}return this._setAttr("container",ce),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),ce.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const ce=this.children,he=ce.length;for(let Ee=0;Ee<he;Ee++)ce[Ee].clear();return this}clone(ce){return ce||(ce={}),ce.container=typeof document<"u"&&document.createElement("div"),r.Container.prototype.clone.call(this,ce)}destroy(){super.destroy();const ce=this.content;ce&&t.Util._isInDocument(ce)&&this.container().removeChild(ce);const he=e.stages.indexOf(this);return he>-1&&e.stages.splice(he,1),t.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const ce=this._pointerPositions[0]||this._changedPointerPositions[0];return ce?{x:ce.x,y:ce.y}:(t.Util.warn(Z),null)}_getPointerById(ce){return this._pointerPositions.find(he=>he.id===ce)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(ce){ce=ce||{},ce.x=ce.x||0,ce.y=ce.y||0,ce.width=ce.width||this.width(),ce.height=ce.height||this.height();const he=new s.SceneCanvas({width:ce.width,height:ce.height,pixelRatio:ce.pixelRatio||1}),Ee=he.getContext()._context,Ae=this.children;return(ce.x||ce.y)&&Ee.translate(-1*ce.x,-1*ce.y),Ae.forEach(function(ge){if(!ge.isVisible())return;const me=ge._toKonvaCanvas(ce);Ee.drawImage(me._canvas,ce.x,ce.y,me.getWidth()/me.getPixelRatio(),me.getHeight()/me.getPixelRatio())}),he}getIntersection(ce){if(!ce)return null;const he=this.children,Ee=he.length,Ae=Ee-1;for(let ge=Ae;ge>=0;ge--){const me=he[ge].getIntersection(ce);if(me)return me}return null}_resizeDOM(){const ce=this.width(),he=this.height();this.content&&(this.content.style.width=ce+f,this.content.style.height=he+f),this.bufferCanvas.setSize(ce,he),this.bufferHitCanvas.setSize(ce,he),this.children.forEach(Ee=>{Ee.setSize({width:ce,height:he}),Ee.draw()})}add(ce,...he){if(arguments.length>1){for(let Ae=0;Ae<arguments.length;Ae++)this.add(arguments[Ae]);return this}super.add(ce);const Ee=this.children.length;return Ee>ne&&t.Util.warn("The stage has "+Ee+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),ce.setSize({width:this.width(),height:this.height()}),ce.draw(),i.Konva.isBrowser&&this.content.appendChild(ce.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(ce){return u.hasPointerCapture(ce,this)}setPointerCapture(ce){u.setPointerCapture(ce,this)}releaseCapture(ce){u.releaseCapture(ce,this)}getLayers(){return this.children}_bindContentEvents(){i.Konva.isBrowser&&ue.forEach(([ce,he])=>{this.content.addEventListener(ce,Ee=>{this[he](Ee)},{passive:!1})})}_pointerenter(ce){this.setPointersPositions(ce);const he=te(ce.type);he&&this._fire(he.pointerenter,{evt:ce,target:this,currentTarget:this})}_pointerover(ce){this.setPointersPositions(ce);const he=te(ce.type);he&&this._fire(he.pointerover,{evt:ce,target:this,currentTarget:this})}_getTargetShape(ce){let he=this[ce+"targetShape"];return he&&!he.getStage()&&(he=null),he}_pointerleave(ce){const he=te(ce.type),Ee=q(ce.type);if(!he)return;this.setPointersPositions(ce);const Ae=this._getTargetShape(Ee),ge=!(i.Konva.isDragging()||i.Konva.isTransforming())||i.Konva.hitOnDragEnabled;Ae&&ge?(Ae._fireAndBubble(he.pointerout,{evt:ce}),Ae._fireAndBubble(he.pointerleave,{evt:ce}),this._fire(he.pointerleave,{evt:ce,target:this,currentTarget:this}),this[Ee+"targetShape"]=null):ge&&(this._fire(he.pointerleave,{evt:ce,target:this,currentTarget:this}),this._fire(he.pointerout,{evt:ce,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(ce){const he=te(ce.type),Ee=q(ce.type);if(!he)return;this.setPointersPositions(ce);let Ae=!1;this._changedPointerPositions.forEach(ge=>{const me=this.getIntersection(ge);if(o.DD.justDragged=!1,i.Konva["_"+Ee+"ListenClick"]=!0,!me||!me.isListening()){this[Ee+"ClickStartShape"]=void 0;return}i.Konva.capturePointerEventsEnabled&&me.setPointerCapture(ge.id),this[Ee+"ClickStartShape"]=me,me._fireAndBubble(he.pointerdown,{evt:ce,pointerId:ge.id}),Ae=!0;const Oe=ce.type.indexOf("touch")>=0;me.preventDefault()&&ce.cancelable&&Oe&&ce.preventDefault()}),Ae||this._fire(he.pointerdown,{evt:ce,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(ce){const he=te(ce.type),Ee=q(ce.type);if(!he||(i.Konva.isDragging()&&o.DD.node.preventDefault()&&ce.cancelable&&ce.preventDefault(),this.setPointersPositions(ce),!(!(i.Konva.isDragging()||i.Konva.isTransforming())||i.Konva.hitOnDragEnabled)))return;const ge={};let me=!1;const Oe=this._getTargetShape(Ee);this._changedPointerPositions.forEach(Me=>{const Ye=u.getCapturedShape(Me.id)||this.getIntersection(Me),lt=Me.id,We={evt:ce,pointerId:lt},nt=Oe!==Ye;if(nt&&Oe&&(Oe._fireAndBubble(he.pointerout,{...We},Ye),Oe._fireAndBubble(he.pointerleave,{...We},Ye)),Ye){if(ge[Ye._id])return;ge[Ye._id]=!0}Ye&&Ye.isListening()?(me=!0,nt&&(Ye._fireAndBubble(he.pointerover,{...We},Oe),Ye._fireAndBubble(he.pointerenter,{...We},Oe),this[Ee+"targetShape"]=Ye),Ye._fireAndBubble(he.pointermove,{...We})):Oe&&(this._fire(he.pointerover,{evt:ce,target:this,currentTarget:this,pointerId:lt}),this[Ee+"targetShape"]=null)}),me||this._fire(he.pointermove,{evt:ce,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(ce){const he=te(ce.type),Ee=q(ce.type);if(!he)return;this.setPointersPositions(ce);const Ae=this[Ee+"ClickStartShape"],ge=this[Ee+"ClickEndShape"],me={};let Oe=!1;this._changedPointerPositions.forEach(Me=>{const Ye=u.getCapturedShape(Me.id)||this.getIntersection(Me);if(Ye){if(Ye.releaseCapture(Me.id),me[Ye._id])return;me[Ye._id]=!0}const lt=Me.id,We={evt:ce,pointerId:lt};let nt=!1;i.Konva["_"+Ee+"InDblClickWindow"]?(nt=!0,clearTimeout(this[Ee+"DblTimeout"])):o.DD.justDragged||(i.Konva["_"+Ee+"InDblClickWindow"]=!0,clearTimeout(this[Ee+"DblTimeout"])),this[Ee+"DblTimeout"]=setTimeout(function(){i.Konva["_"+Ee+"InDblClickWindow"]=!1},i.Konva.dblClickWindow),Ye&&Ye.isListening()?(Oe=!0,this[Ee+"ClickEndShape"]=Ye,Ye._fireAndBubble(he.pointerup,{...We}),i.Konva["_"+Ee+"ListenClick"]&&Ae&&Ae===Ye&&(Ye._fireAndBubble(he.pointerclick,{...We}),nt&&ge&&ge===Ye&&Ye._fireAndBubble(he.pointerdblclick,{...We}))):(this[Ee+"ClickEndShape"]=null,i.Konva["_"+Ee+"ListenClick"]&&this._fire(he.pointerclick,{evt:ce,target:this,currentTarget:this,pointerId:lt}),nt&&this._fire(he.pointerdblclick,{evt:ce,target:this,currentTarget:this,pointerId:lt}))}),Oe||this._fire(he.pointerup,{evt:ce,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),i.Konva["_"+Ee+"ListenClick"]=!1,ce.cancelable&&Ee!=="touch"&&Ee!=="pointer"&&ce.preventDefault()}_contextmenu(ce){this.setPointersPositions(ce);const he=this.getIntersection(this.getPointerPosition());he&&he.isListening()?he._fireAndBubble(H,{evt:ce}):this._fire(H,{evt:ce,target:this,currentTarget:this})}_wheel(ce){this.setPointersPositions(ce);const he=this.getIntersection(this.getPointerPosition());he&&he.isListening()?he._fireAndBubble(ee,{evt:ce}):this._fire(ee,{evt:ce,target:this,currentTarget:this})}_pointercancel(ce){this.setPointersPositions(ce);const he=u.getCapturedShape(ce.pointerId)||this.getIntersection(this.getPointerPosition());he&&he._fireAndBubble(T,u.createEvent(ce)),u.releaseCapture(ce.pointerId)}_lostpointercapture(ce){u.releaseCapture(ce.pointerId)}setPointersPositions(ce){const he=this._getContentPosition();let Ee=null,Ae=null;ce=ce||window.event,ce.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(ce.touches,ge=>{this._pointerPositions.push({id:ge.identifier,x:(ge.clientX-he.left)/he.scaleX,y:(ge.clientY-he.top)/he.scaleY})}),Array.prototype.forEach.call(ce.changedTouches||ce.touches,ge=>{this._changedPointerPositions.push({id:ge.identifier,x:(ge.clientX-he.left)/he.scaleX,y:(ge.clientY-he.top)/he.scaleY})})):(Ee=(ce.clientX-he.left)/he.scaleX,Ae=(ce.clientY-he.top)/he.scaleY,this.pointerPos={x:Ee,y:Ae},this._pointerPositions=[{x:Ee,y:Ae,id:t.Util._getFirstPointerId(ce)}],this._changedPointerPositions=[{x:Ee,y:Ae,id:t.Util._getFirstPointerId(ce)}])}_setPointerPosition(ce){t.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(ce)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const ce=this.content.getBoundingClientRect();return{top:ce.top,left:ce.left,scaleX:ce.width/this.content.clientWidth||1,scaleY:ce.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new s.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new s.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!i.Konva.isBrowser)return;const ce=this.container();if(!ce)throw"Stage has no container. A container is required.";ce.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),ce.appendChild(this.content),this._resizeDOM()}cache(){return t.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(ce){ce.batchDraw()}),this}}e.Stage=oe,oe.prototype.nodeType=l,(0,a._registerNode)(oe),n.Factory.addGetterSetter(oe,"container"),i.Konva.isBrowser&&document.addEventListener("visibilitychange",()=>{e.stages.forEach(pe=>{pe.batchDraw()})})}(rB)),rB}var dA={},iB={},Wue;function Hu(){return Wue||(Wue=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Shape=e.shapes=void 0;const t=Vr(),n=Xo(),r=Yr(),i=_a(),s=Zr(),o=Vr(),a=gSe(),u="hasShadow",l="shadowRGBA",c="patternImage",f="linearGradient",d="radialGradient";let h;function p(){return h||(h=n.Util.createCanvasElement().getContext("2d"),h)}e.shapes={};function m(O){const M=this.attrs.fillRule;M?O.fill(M):O.fill()}function g(O){O.stroke()}function b(O){const M=this.attrs.fillRule;M?O.fill(M):O.fill()}function y(O){O.stroke()}function x(){this._clearCache(u)}function w(){this._clearCache(l)}function T(){this._clearCache(c)}function A(){this._clearCache(f)}function k(){this._clearCache(d)}class I extends i.Node{constructor(M){super(M);let L;for(;L=n.Util.getRandomColor(),!(L&&!(L in e.shapes)););this.colorKey=L,e.shapes[L]=this}getContext(){return n.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return n.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(u,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(c,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const L=p().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(L&&L.setTransform){const H=new n.Transform;H.translate(this.fillPatternX(),this.fillPatternY()),H.rotate(t.Konva.getAngle(this.fillPatternRotation())),H.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),H.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const D=H.getMatrix(),B=typeof DOMMatrix>"u"?{a:D[0],b:D[1],c:D[2],d:D[3],e:D[4],f:D[5]}:new DOMMatrix(D);L.setTransform(B)}return L}}_getLinearGradient(){return this._getCache(f,this.__getLinearGradient)}__getLinearGradient(){const M=this.fillLinearGradientColorStops();if(M){const L=p(),H=this.fillLinearGradientStartPoint(),D=this.fillLinearGradientEndPoint(),B=L.createLinearGradient(H.x,H.y,D.x,D.y);for(let U=0;U<M.length;U+=2)B.addColorStop(M[U],M[U+1]);return B}}_getRadialGradient(){return this._getCache(d,this.__getRadialGradient)}__getRadialGradient(){const M=this.fillRadialGradientColorStops();if(M){const L=p(),H=this.fillRadialGradientStartPoint(),D=this.fillRadialGradientEndPoint(),B=L.createRadialGradient(H.x,H.y,this.fillRadialGradientStartRadius(),D.x,D.y,this.fillRadialGradientEndRadius());for(let U=0;U<M.length;U+=2)B.addColorStop(M[U],M[U+1]);return B}}getShadowRGBA(){return this._getCache(l,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const M=n.Util.colorToRGBA(this.shadowColor());if(M)return"rgba("+M.r+","+M.g+","+M.b+","+M.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const M=this.hitStrokeWidth();return M==="auto"?this.hasStroke():this.strokeEnabled()&&!!M}intersects(M){const L=this.getStage();if(!L)return!1;const H=L.bufferHitCanvas;return H.getContext().clear(),this.drawHit(H,void 0,!0),H.context.getImageData(Math.round(M.x),Math.round(M.y),1,1).data[3]>0}destroy(){return i.Node.prototype.destroy.call(this),delete e.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(M){var L;if(!((L=this.attrs.perfectDrawEnabled)!==null&&L!==void 0?L:!0))return!1;const D=M||this.hasFill(),B=this.hasStroke(),U=this.getAbsoluteOpacity()!==1;if(D&&B&&U)return!0;const G=this.hasShadow(),ee=this.shadowForStrokeEnabled();return!!(D&&B&&G&&ee)}setStrokeHitEnabled(M){n.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),M?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const M=this.size();return{x:this._centroid?-M.width/2:0,y:this._centroid?-M.height/2:0,width:M.width,height:M.height}}getClientRect(M={}){let L=!1,H=this.getParent();for(;H;){if(H.isCached()){L=!0;break}H=H.getParent()}const D=M.skipTransform,B=M.relativeTo||L&&this.getStage()||void 0,U=this.getSelfRect(),ee=!M.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,ne=U.width+ee,ue=U.height+ee,X=!M.skipShadow&&this.hasShadow(),q=X?this.shadowOffsetX():0,te=X?this.shadowOffsetY():0,W=ne+Math.abs(q),Z=ue+Math.abs(te),oe=X&&this.shadowBlur()||0,pe=W+oe*2,ce=Z+oe*2,he={width:pe,height:ce,x:-(ee/2+oe)+Math.min(q,0)+U.x,y:-(ee/2+oe)+Math.min(te,0)+U.y};return D?he:this._transformedRect(he,B)}drawScene(M,L,H){const D=this.getLayer();let B=M||D.getCanvas(),U=B.getContext(),G=this._getCanvasCache(),ee=this.getSceneFunc(),ne=this.hasShadow(),ue,X;const q=B.isCache,te=L===this;if(!this.isVisible()&&!te)return this;if(G){U.save();const Z=this.getAbsoluteTransform(L).getMatrix();return U.transform(Z[0],Z[1],Z[2],Z[3],Z[4],Z[5]),this._drawCachedSceneCanvas(U),U.restore(),this}if(!ee)return this;if(U.save(),this._useBufferCanvas()&&!q){ue=this.getStage();const Z=H||ue.bufferCanvas;X=Z.getContext(),X.clear(),X.save(),X._applyLineJoin(this);var W=this.getAbsoluteTransform(L).getMatrix();X.transform(W[0],W[1],W[2],W[3],W[4],W[5]),ee.call(this,X,this),X.restore();const oe=Z.pixelRatio;ne&&U._applyShadow(this),U._applyOpacity(this),U._applyGlobalCompositeOperation(this),U.drawImage(Z._canvas,0,0,Z.width/oe,Z.height/oe)}else{if(U._applyLineJoin(this),!te){var W=this.getAbsoluteTransform(L).getMatrix();U.transform(W[0],W[1],W[2],W[3],W[4],W[5]),U._applyOpacity(this),U._applyGlobalCompositeOperation(this)}ne&&U._applyShadow(this),ee.call(this,U,this)}return U.restore(),this}drawHit(M,L,H=!1){if(!this.shouldDrawHit(L,H))return this;const D=this.getLayer(),B=M||D.hitCanvas,U=B&&B.getContext(),G=this.hitFunc()||this.sceneFunc(),ee=this._getCanvasCache(),ne=ee&&ee.hit;if(this.colorKey||n.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),ne){U.save();const X=this.getAbsoluteTransform(L).getMatrix();return U.transform(X[0],X[1],X[2],X[3],X[4],X[5]),this._drawCachedHitCanvas(U),U.restore(),this}if(!G)return this;if(U.save(),U._applyLineJoin(this),!(this===L)){const X=this.getAbsoluteTransform(L).getMatrix();U.transform(X[0],X[1],X[2],X[3],X[4],X[5])}return G.call(this,U,this),U.restore(),this}drawHitFromCache(M=0){const L=this._getCanvasCache(),H=this._getCachedSceneCanvas(),D=L.hit,B=D.getContext(),U=D.getWidth(),G=D.getHeight();B.clear(),B.drawImage(H._canvas,0,0,U,G);try{const ee=B.getImageData(0,0,U,G),ne=ee.data,ue=ne.length,X=n.Util._hexToRgb(this.colorKey);for(let q=0;q<ue;q+=4)ne[q+3]>M?(ne[q]=X.r,ne[q+1]=X.g,ne[q+2]=X.b,ne[q+3]=255):ne[q+3]=0;B.putImageData(ee,0,0)}catch(ee){n.Util.error("Unable to draw hit graph from cached scene canvas. "+ee.message)}return this}hasPointerCapture(M){return a.hasPointerCapture(M,this)}setPointerCapture(M){a.setPointerCapture(M,this)}releaseCapture(M){a.releaseCapture(M,this)}}e.Shape=I,I.prototype._fillFunc=m,I.prototype._strokeFunc=g,I.prototype._fillFuncHit=b,I.prototype._strokeFuncHit=y,I.prototype._centroid=!1,I.prototype.nodeType="Shape",(0,o._registerNode)(I),I.prototype.eventListeners={},I.prototype.on.call(I.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",x),I.prototype.on.call(I.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",w),I.prototype.on.call(I.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",T),I.prototype.on.call(I.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",A),I.prototype.on.call(I.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",k),r.Factory.addGetterSetter(I,"stroke",void 0,(0,s.getStringOrGradientValidator)()),r.Factory.addGetterSetter(I,"strokeWidth",2,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(I,"fillAfterStrokeEnabled",!1),r.Factory.addGetterSetter(I,"hitStrokeWidth","auto",(0,s.getNumberOrAutoValidator)()),r.Factory.addGetterSetter(I,"strokeHitEnabled",!0,(0,s.getBooleanValidator)()),r.Factory.addGetterSetter(I,"perfectDrawEnabled",!0,(0,s.getBooleanValidator)()),r.Factory.addGetterSetter(I,"shadowForStrokeEnabled",!0,(0,s.getBooleanValidator)()),r.Factory.addGetterSetter(I,"lineJoin"),r.Factory.addGetterSetter(I,"lineCap"),r.Factory.addGetterSetter(I,"sceneFunc"),r.Factory.addGetterSetter(I,"hitFunc"),r.Factory.addGetterSetter(I,"dash"),r.Factory.addGetterSetter(I,"dashOffset",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(I,"shadowColor",void 0,(0,s.getStringValidator)()),r.Factory.addGetterSetter(I,"shadowBlur",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(I,"shadowOpacity",1,(0,s.getNumberValidator)()),r.Factory.addComponentsGetterSetter(I,"shadowOffset",["x","y"]),r.Factory.addGetterSetter(I,"shadowOffsetX",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(I,"shadowOffsetY",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(I,"fillPatternImage"),r.Factory.addGetterSetter(I,"fill",void 0,(0,s.getStringOrGradientValidator)()),r.Factory.addGetterSetter(I,"fillPatternX",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(I,"fillPatternY",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(I,"fillLinearGradientColorStops"),r.Factory.addGetterSetter(I,"strokeLinearGradientColorStops"),r.Factory.addGetterSetter(I,"fillRadialGradientStartRadius",0),r.Factory.addGetterSetter(I,"fillRadialGradientEndRadius",0),r.Factory.addGetterSetter(I,"fillRadialGradientColorStops"),r.Factory.addGetterSetter(I,"fillPatternRepeat","repeat"),r.Factory.addGetterSetter(I,"fillEnabled",!0),r.Factory.addGetterSetter(I,"strokeEnabled",!0),r.Factory.addGetterSetter(I,"shadowEnabled",!0),r.Factory.addGetterSetter(I,"dashEnabled",!0),r.Factory.addGetterSetter(I,"strokeScaleEnabled",!0),r.Factory.addGetterSetter(I,"fillPriority","color"),r.Factory.addComponentsGetterSetter(I,"fillPatternOffset",["x","y"]),r.Factory.addGetterSetter(I,"fillPatternOffsetX",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(I,"fillPatternOffsetY",0,(0,s.getNumberValidator)()),r.Factory.addComponentsGetterSetter(I,"fillPatternScale",["x","y"]),r.Factory.addGetterSetter(I,"fillPatternScaleX",1,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(I,"fillPatternScaleY",1,(0,s.getNumberValidator)()),r.Factory.addComponentsGetterSetter(I,"fillLinearGradientStartPoint",["x","y"]),r.Factory.addComponentsGetterSetter(I,"strokeLinearGradientStartPoint",["x","y"]),r.Factory.addGetterSetter(I,"fillLinearGradientStartPointX",0),r.Factory.addGetterSetter(I,"strokeLinearGradientStartPointX",0),r.Factory.addGetterSetter(I,"fillLinearGradientStartPointY",0),r.Factory.addGetterSetter(I,"strokeLinearGradientStartPointY",0),r.Factory.addComponentsGetterSetter(I,"fillLinearGradientEndPoint",["x","y"]),r.Factory.addComponentsGetterSetter(I,"strokeLinearGradientEndPoint",["x","y"]),r.Factory.addGetterSetter(I,"fillLinearGradientEndPointX",0),r.Factory.addGetterSetter(I,"strokeLinearGradientEndPointX",0),r.Factory.addGetterSetter(I,"fillLinearGradientEndPointY",0),r.Factory.addGetterSetter(I,"strokeLinearGradientEndPointY",0),r.Factory.addComponentsGetterSetter(I,"fillRadialGradientStartPoint",["x","y"]),r.Factory.addGetterSetter(I,"fillRadialGradientStartPointX",0),r.Factory.addGetterSetter(I,"fillRadialGradientStartPointY",0),r.Factory.addComponentsGetterSetter(I,"fillRadialGradientEndPoint",["x","y"]),r.Factory.addGetterSetter(I,"fillRadialGradientEndPointX",0),r.Factory.addGetterSetter(I,"fillRadialGradientEndPointY",0),r.Factory.addGetterSetter(I,"fillPatternRotation",0),r.Factory.addGetterSetter(I,"fillRule",void 0,(0,s.getStringValidator)()),r.Factory.backCompat(I,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})}(iB)),iB}var Gue;function ySe(){if(Gue)return dA;Gue=1,Object.defineProperty(dA,"__esModule",{value:!0}),dA.Layer=void 0;const e=Xo(),t=wM(),n=_a(),r=Yr(),i=_M(),s=Zr(),o=Hu(),a=Vr(),u="#",l="beforeDraw",c="draw",f=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],d=f.length;class h extends t.Container{constructor(m){super(m),this.canvas=new i.SceneCanvas,this.hitCanvas=new i.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(m){return this.getContext().clear(m),this.getHitCanvas().getContext().clear(m),this}setZIndex(m){super.setZIndex(m);const g=this.getStage();return g&&g.content&&(g.content.removeChild(this.getNativeCanvasElement()),m<g.children.length-1?g.content.insertBefore(this.getNativeCanvasElement(),g.children[m+1].getCanvas()._canvas):g.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){n.Node.prototype.moveToTop.call(this);const m=this.getStage();return m&&m.content&&(m.content.removeChild(this.getNativeCanvasElement()),m.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!n.Node.prototype.moveUp.call(this))return!1;const g=this.getStage();return!g||!g.content?!1:(g.content.removeChild(this.getNativeCanvasElement()),this.index<g.children.length-1?g.content.insertBefore(this.getNativeCanvasElement(),g.children[this.index+1].getCanvas()._canvas):g.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(n.Node.prototype.moveDown.call(this)){const m=this.getStage();if(m){const g=m.children;m.content&&(m.content.removeChild(this.getNativeCanvasElement()),m.content.insertBefore(this.getNativeCanvasElement(),g[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(n.Node.prototype.moveToBottom.call(this)){const m=this.getStage();if(m){const g=m.children;m.content&&(m.content.removeChild(this.getNativeCanvasElement()),m.content.insertBefore(this.getNativeCanvasElement(),g[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const m=this.getNativeCanvasElement();return n.Node.prototype.remove.call(this),m&&m.parentNode&&e.Util._isInDocument(m)&&m.parentNode.removeChild(m),this}getStage(){return this.parent}setSize({width:m,height:g}){return this.canvas.setSize(m,g),this.hitCanvas.setSize(m,g),this._setSmoothEnabled(),this}_validateAdd(m){const g=m.getType();g!=="Group"&&g!=="Shape"&&e.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(m){return m=m||{},m.width=m.width||this.getWidth(),m.height=m.height||this.getHeight(),m.x=m.x!==void 0?m.x:this.x(),m.y=m.y!==void 0?m.y:this.y(),n.Node.prototype._toKonvaCanvas.call(this,m)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){e.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){e.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,e.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(m){if(!this.isListening()||!this.isVisible())return null;let g=1,b=!1;for(;;){for(let y=0;y<d;y++){const x=f[y],w=this._getIntersection({x:m.x+x.x*g,y:m.y+x.y*g}),T=w.shape;if(T)return T;if(b=!!w.antialiased,!w.antialiased)break}if(b)g+=1;else return null}}_getIntersection(m){const g=this.hitCanvas.pixelRatio,b=this.hitCanvas.context.getImageData(Math.round(m.x*g),Math.round(m.y*g),1,1).data,y=b[3];if(y===255){const x=e.Util._rgbToHex(b[0],b[1],b[2]),w=o.shapes[u+x];return w?{shape:w}:{antialiased:!0}}else if(y>0)return{antialiased:!0};return{}}drawScene(m,g){const b=this.getLayer(),y=m||b&&b.getCanvas();return this._fire(l,{node:this}),this.clearBeforeDraw()&&y.getContext().clear(),t.Container.prototype.drawScene.call(this,y,g),this._fire(c,{node:this}),this}drawHit(m,g){const b=this.getLayer(),y=m||b&&b.hitCanvas;return b&&b.clearBeforeDraw()&&b.getHitCanvas().getContext().clear(),t.Container.prototype.drawHit.call(this,y,g),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(m){e.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(m)}getHitGraphEnabled(m){return e.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const m=this.parent;!!this.hitCanvas._canvas.parentNode?m.content.removeChild(this.hitCanvas._canvas):m.content.appendChild(this.hitCanvas._canvas)}destroy(){return e.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}}return dA.Layer=h,h.prototype.nodeType="Layer",(0,a._registerNode)(h),r.Factory.addGetterSetter(h,"imageSmoothingEnabled",!0),r.Factory.addGetterSetter(h,"clearBeforeDraw",!0),r.Factory.addGetterSetter(h,"hitGraphEnabled",!0,(0,s.getBooleanValidator)()),dA}var hA={},Yue;function Jyt(){if(Yue)return hA;Yue=1,Object.defineProperty(hA,"__esModule",{value:!0}),hA.FastLayer=void 0;const e=Xo(),t=ySe(),n=Vr();let r=class extends t.Layer{constructor(s){super(s),this.listening(!1),e.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}};return hA.FastLayer=r,r.prototype.nodeType="FastLayer",(0,n._registerNode)(r),hA}var pA={},Kue;function FK(){if(Kue)return pA;Kue=1,Object.defineProperty(pA,"__esModule",{value:!0}),pA.Group=void 0;const e=Xo(),t=wM(),n=Vr();class r extends t.Container{_validateAdd(s){const o=s.getType();o!=="Group"&&o!=="Shape"&&e.Util.throw("You may only add groups and shapes to groups.")}}return pA.Group=r,r.prototype.nodeType="Group",(0,n._registerNode)(r),pA}var mA={},Xue;function $K(){if(Xue)return mA;Xue=1,Object.defineProperty(mA,"__esModule",{value:!0}),mA.Animation=void 0;const e=Vr(),t=Xo(),n=function(){return e.glob.performance&&e.glob.performance.now?function(){return e.glob.performance.now()}:function(){return new Date().getTime()}}();let r=class wE{constructor(s,o){this.id=wE.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:n(),frameRate:0},this.func=s,this.setLayers(o)}setLayers(s){let o=[];return s&&(o=Array.isArray(s)?s:[s]),this.layers=o,this}getLayers(){return this.layers}addLayer(s){const o=this.layers,a=o.length;for(let u=0;u<a;u++)if(o[u]._id===s._id)return!1;return this.layers.push(s),!0}isRunning(){const o=wE.animations,a=o.length;for(let u=0;u<a;u++)if(o[u].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=n(),wE._addAnimation(this),this}stop(){return wE._removeAnimation(this),this}_updateFrameObject(s){this.frame.timeDiff=s-this.frame.lastTime,this.frame.lastTime=s,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(s){this.animations.push(s),this._handleAnimation()}static _removeAnimation(s){const o=s.id,a=this.animations,u=a.length;for(let l=0;l<u;l++)if(a[l].id===o){this.animations.splice(l,1);break}}static _runFrames(){const s={},o=this.animations;for(let a=0;a<o.length;a++){const u=o[a],l=u.layers,c=u.func;u._updateFrameObject(n());const f=l.length;let d;if(c?d=c.call(u,u.frame)!==!1:d=!0,!!d)for(let h=0;h<f;h++){const p=l[h];p._id!==void 0&&(s[p._id]=p)}}for(const a in s)s.hasOwnProperty(a)&&s[a].batchDraw()}static _animationLoop(){const s=wE;s.animations.length?(s._runFrames(),t.Util.requestAnimFrame(s._animationLoop)):s.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,t.Util.requestAnimFrame(this._animationLoop))}};return mA.Animation=r,r.animations=[],r.animIdCounter=0,r.animRunning=!1,mA}var sB={},Que;function Zyt(){return Que||(Que=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Easings=e.Tween=void 0;const t=Xo(),n=$K(),r=_a(),i=Vr(),s={node:1,duration:1,easing:1,onFinish:1,yoyo:1},o=1,a=2,u=3,l=["fill","stroke","shadowColor"];let c=0;class f{constructor(p,m,g,b,y,x,w){this.prop=p,this.propFunc=m,this.begin=b,this._pos=b,this.duration=x,this._change=0,this.prevPos=0,this.yoyo=w,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=g,this._change=y-this.begin,this.pause()}fire(p){const m=this[p];m&&m()}setTime(p){p>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():p<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=p,this.update())}getTime(){return this._time}setPosition(p){this.prevPos=this._pos,this.propFunc(p),this._pos=p}getPosition(p){return p===void 0&&(p=this._time),this.func(p,this.begin,this._change,this.duration)}play(){this.state=a,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=u,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(p){this.pause(),this._time=p,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const p=this.getTimer()-this._startTime;this.state===a?this.setTime(p):this.state===u&&this.setTime(this.duration-p)}pause(){this.state=o,this.fire("onPause")}getTimer(){return new Date().getTime()}}class d{constructor(p){const m=this,g=p.node,b=g._id,y=p.easing||e.Easings.Linear,x=!!p.yoyo;let w,T;typeof p.duration>"u"?w=.3:p.duration===0?w=.001:w=p.duration,this.node=g,this._id=c++;const A=g.getLayer()||(g instanceof i.Konva.Stage?g.getLayers():null);A||t.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new n.Animation(function(){m.tween.onEnterFrame()},A),this.tween=new f(T,function(k){m._tweenFunc(k)},y,0,1,w*1e3,x),this._addListeners(),d.attrs[b]||(d.attrs[b]={}),d.attrs[b][this._id]||(d.attrs[b][this._id]={}),d.tweens[b]||(d.tweens[b]={});for(T in p)s[T]===void 0&&this._addAttr(T,p[T]);this.reset(),this.onFinish=p.onFinish,this.onReset=p.onReset,this.onUpdate=p.onUpdate}_addAttr(p,m){const g=this.node,b=g._id;let y,x,w,T,A;const k=d.tweens[b][p];k&&delete d.attrs[b][k][p];let I=g.getAttr(p);if(t.Util._isArray(m))if(y=[],x=Math.max(m.length,I.length),p==="points"&&m.length!==I.length&&(m.length>I.length?(T=I,I=t.Util._prepareArrayForTween(I,m,g.closed())):(w=m,m=t.Util._prepareArrayForTween(m,I,g.closed()))),p.indexOf("fill")===0)for(let O=0;O<x;O++)if(O%2===0)y.push(m[O]-I[O]);else{const M=t.Util.colorToRGBA(I[O]);A=t.Util.colorToRGBA(m[O]),I[O]=M,y.push({r:A.r-M.r,g:A.g-M.g,b:A.b-M.b,a:A.a-M.a})}else for(let O=0;O<x;O++)y.push(m[O]-I[O]);else l.indexOf(p)!==-1?(I=t.Util.colorToRGBA(I),A=t.Util.colorToRGBA(m),y={r:A.r-I.r,g:A.g-I.g,b:A.b-I.b,a:A.a-I.a}):y=m-I;d.attrs[b][this._id][p]={start:I,diff:y,end:m,trueEnd:w,trueStart:T},d.tweens[b][p]=this._id}_tweenFunc(p){const m=this.node,g=d.attrs[m._id][this._id];let b,y,x,w,T,A,k,I;for(b in g){if(y=g[b],x=y.start,w=y.diff,I=y.end,t.Util._isArray(x))if(T=[],k=Math.max(x.length,I.length),b.indexOf("fill")===0)for(A=0;A<k;A++)A%2===0?T.push((x[A]||0)+w[A]*p):T.push("rgba("+Math.round(x[A].r+w[A].r*p)+","+Math.round(x[A].g+w[A].g*p)+","+Math.round(x[A].b+w[A].b*p)+","+(x[A].a+w[A].a*p)+")");else for(A=0;A<k;A++)T.push((x[A]||0)+w[A]*p);else l.indexOf(b)!==-1?T="rgba("+Math.round(x.r+w.r*p)+","+Math.round(x.g+w.g*p)+","+Math.round(x.b+w.b*p)+","+(x.a+w.a*p)+")":T=x+w*p;m.setAttr(b,T)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const p=this.node,m=d.attrs[p._id][this._id];m.points&&m.points.trueEnd&&p.setAttr("points",m.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const p=this.node,m=d.attrs[p._id][this._id];m.points&&m.points.trueStart&&p.points(m.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(p){return this.tween.seek(p*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const p=this.node._id,m=this._id,g=d.tweens[p];this.pause();for(const b in g)delete d.tweens[p][b];delete d.attrs[p][m]}}e.Tween=d,d.attrs={},d.tweens={},r.Node.prototype.to=function(h){const p=h.onFinish;h.node=this,h.onFinish=function(){this.destroy(),p&&p()},new d(h).play()},e.Easings={BackEaseIn(h,p,m,g){return m*(h/=g)*h*((1.70158+1)*h-1.70158)+p},BackEaseOut(h,p,m,g){return m*((h=h/g-1)*h*((1.70158+1)*h+1.70158)+1)+p},BackEaseInOut(h,p,m,g){let b=1.70158;return(h/=g/2)<1?m/2*(h*h*(((b*=1.525)+1)*h-b))+p:m/2*((h-=2)*h*(((b*=1.525)+1)*h+b)+2)+p},ElasticEaseIn(h,p,m,g,b,y){let x=0;return h===0?p:(h/=g)===1?p+m:(y||(y=g*.3),!b||b<Math.abs(m)?(b=m,x=y/4):x=y/(2*Math.PI)*Math.asin(m/b),-(b*Math.pow(2,10*(h-=1))*Math.sin((h*g-x)*(2*Math.PI)/y))+p)},ElasticEaseOut(h,p,m,g,b,y){let x=0;return h===0?p:(h/=g)===1?p+m:(y||(y=g*.3),!b||b<Math.abs(m)?(b=m,x=y/4):x=y/(2*Math.PI)*Math.asin(m/b),b*Math.pow(2,-10*h)*Math.sin((h*g-x)*(2*Math.PI)/y)+m+p)},ElasticEaseInOut(h,p,m,g,b,y){let x=0;return h===0?p:(h/=g/2)===2?p+m:(y||(y=g*(.3*1.5)),!b||b<Math.abs(m)?(b=m,x=y/4):x=y/(2*Math.PI)*Math.asin(m/b),h<1?-.5*(b*Math.pow(2,10*(h-=1))*Math.sin((h*g-x)*(2*Math.PI)/y))+p:b*Math.pow(2,-10*(h-=1))*Math.sin((h*g-x)*(2*Math.PI)/y)*.5+m+p)},BounceEaseOut(h,p,m,g){return(h/=g)<1/2.75?m*(7.5625*h*h)+p:h<2/2.75?m*(7.5625*(h-=1.5/2.75)*h+.75)+p:h<2.5/2.75?m*(7.5625*(h-=2.25/2.75)*h+.9375)+p:m*(7.5625*(h-=2.625/2.75)*h+.984375)+p},BounceEaseIn(h,p,m,g){return m-e.Easings.BounceEaseOut(g-h,0,m,g)+p},BounceEaseInOut(h,p,m,g){return h<g/2?e.Easings.BounceEaseIn(h*2,0,m,g)*.5+p:e.Easings.BounceEaseOut(h*2-g,0,m,g)*.5+m*.5+p},EaseIn(h,p,m,g){return m*(h/=g)*h+p},EaseOut(h,p,m,g){return-m*(h/=g)*(h-2)+p},EaseInOut(h,p,m,g){return(h/=g/2)<1?m/2*h*h+p:-m/2*(--h*(h-2)-1)+p},StrongEaseIn(h,p,m,g){return m*(h/=g)*h*h*h*h+p},StrongEaseOut(h,p,m,g){return m*((h=h/g-1)*h*h*h*h+1)+p},StrongEaseInOut(h,p,m,g){return(h/=g/2)<1?m/2*h*h*h*h*h+p:m/2*((h-=2)*h*h*h*h+2)+p},Linear(h,p,m,g){return m*h/g+p}}}(sB)),sB}var Jue;function tV(){return Jue||(Jue=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Konva=void 0;const t=Vr(),n=Xo(),r=_a(),i=wM(),s=Qyt(),o=ySe(),a=Jyt(),u=FK(),l=LK(),c=Hu(),f=$K(),d=Zyt(),h=mSe(),p=_M();e.Konva=n.Util._assign(t.Konva,{Util:n.Util,Transform:n.Transform,Node:r.Node,Container:i.Container,Stage:s.Stage,stages:s.stages,Layer:o.Layer,FastLayer:a.FastLayer,Group:u.Group,DD:l.DD,Shape:c.Shape,shapes:c.shapes,Animation:f.Animation,Tween:d.Tween,Easings:d.Easings,Context:h.Context,Canvas:p.Canvas}),e.default=e.Konva}(J$)),J$}var gA={},Zue;function e1t(){if(Zue)return gA;Zue=1,Object.defineProperty(gA,"__esModule",{value:!0}),gA.Arc=void 0;const e=Yr(),t=Hu(),n=Vr(),r=Zr(),i=Vr();let s=class extends t.Shape{_sceneFunc(a){const u=n.Konva.getAngle(this.angle()),l=this.clockwise();a.beginPath(),a.arc(0,0,this.outerRadius(),0,u,l),a.arc(0,0,this.innerRadius(),u,0,!l),a.closePath(),a.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(a){this.outerRadius(a/2)}setHeight(a){this.outerRadius(a/2)}getSelfRect(){const a=this.innerRadius(),u=this.outerRadius(),l=this.clockwise(),c=n.Konva.getAngle(l?360-this.angle():this.angle()),f=Math.cos(Math.min(c,Math.PI)),d=1,h=Math.sin(Math.min(Math.max(Math.PI,c),3*Math.PI/2)),p=Math.sin(Math.min(c,Math.PI/2)),m=f*(f>0?a:u),g=d*u,b=h*(h>0?a:u),y=p*(p>0?u:a);return{x:m,y:l?-1*y:b,width:g-m,height:y-b}}};return gA.Arc=s,s.prototype._centroid=!0,s.prototype.className="Arc",s.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,i._registerNode)(s),e.Factory.addGetterSetter(s,"innerRadius",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(s,"outerRadius",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(s,"angle",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(s,"clockwise",!1,(0,r.getBooleanValidator)()),gA}var yA={},vA={},ele;function vSe(){if(ele)return vA;ele=1,Object.defineProperty(vA,"__esModule",{value:!0}),vA.Line=void 0;const e=Yr(),t=Vr(),n=Hu(),r=Zr();function i(a,u,l,c,f,d,h){const p=Math.sqrt(Math.pow(l-a,2)+Math.pow(c-u,2)),m=Math.sqrt(Math.pow(f-l,2)+Math.pow(d-c,2)),g=h*p/(p+m),b=h*m/(p+m),y=l-g*(f-a),x=c-g*(d-u),w=l+b*(f-a),T=c+b*(d-u);return[y,x,w,T]}function s(a,u){const l=a.length,c=[];for(let f=2;f<l-2;f+=2){const d=i(a[f-2],a[f-1],a[f],a[f+1],a[f+2],a[f+3],u);isNaN(d[0])||(c.push(d[0]),c.push(d[1]),c.push(a[f]),c.push(a[f+1]),c.push(d[2]),c.push(d[3]))}return c}class o extends n.Shape{constructor(u){super(u),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(u){let l=this.points(),c=l.length,f=this.tension(),d=this.closed(),h=this.bezier(),p,m,g;if(c){if(u.beginPath(),u.moveTo(l[0],l[1]),f!==0&&c>4){for(p=this.getTensionPoints(),m=p.length,g=d?0:4,d||u.quadraticCurveTo(p[0],p[1],p[2],p[3]);g<m-2;)u.bezierCurveTo(p[g++],p[g++],p[g++],p[g++],p[g++],p[g++]);d||u.quadraticCurveTo(p[m-2],p[m-1],l[c-2],l[c-1])}else if(h)for(g=2;g<c;)u.bezierCurveTo(l[g++],l[g++],l[g++],l[g++],l[g++],l[g++]);else for(g=2;g<c;g+=2)u.lineTo(l[g],l[g+1]);d?(u.closePath(),u.fillStrokeShape(this)):u.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():s(this.points(),this.tension())}_getTensionPointsClosed(){const u=this.points(),l=u.length,c=this.tension(),f=i(u[l-2],u[l-1],u[0],u[1],u[2],u[3],c),d=i(u[l-4],u[l-3],u[l-2],u[l-1],u[0],u[1],c),h=s(u,c);return[f[2],f[3]].concat(h).concat([d[0],d[1],u[l-2],u[l-1],d[2],d[3],f[0],f[1],u[0],u[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let u=this.points();if(u.length<4)return{x:u[0]||0,y:u[1]||0,width:0,height:0};this.tension()!==0?u=[u[0],u[1],...this._getTensionPoints(),u[u.length-2],u[u.length-1]]:u=this.points();let l=u[0],c=u[0],f=u[1],d=u[1],h,p;for(let m=0;m<u.length/2;m++)h=u[m*2],p=u[m*2+1],l=Math.min(l,h),c=Math.max(c,h),f=Math.min(f,p),d=Math.max(d,p);return{x:l,y:f,width:c-l,height:d-f}}}return vA.Line=o,o.prototype.className="Line",o.prototype._attrsAffectingSize=["points","bezier","tension"],(0,t._registerNode)(o),e.Factory.addGetterSetter(o,"closed",!1),e.Factory.addGetterSetter(o,"bezier",!1),e.Factory.addGetterSetter(o,"tension",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(o,"points",[],(0,r.getNumberArrayValidator)()),vA}var bA={},oB={},tle;function t1t(){return tle||(tle=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.t2length=e.getQuadraticArcLength=e.getCubicArcLength=e.binomialCoefficients=e.cValues=e.tValues=void 0,e.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],e.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],e.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const t=(o,a,u)=>{let l,c;const d=u/2;l=0;for(let h=0;h<20;h++)c=d*e.tValues[20][h]+d,l+=e.cValues[20][h]*r(o,a,c);return d*l};e.getCubicArcLength=t;const n=(o,a,u)=>{u===void 0&&(u=1);const l=o[0]-2*o[1]+o[2],c=a[0]-2*a[1]+a[2],f=2*o[1]-2*o[0],d=2*a[1]-2*a[0],h=4*(l*l+c*c),p=4*(l*f+c*d),m=f*f+d*d;if(h===0)return u*Math.sqrt(Math.pow(o[2]-o[0],2)+Math.pow(a[2]-a[0],2));const g=p/(2*h),b=m/h,y=u+g,x=b-g*g,w=y*y+x>0?Math.sqrt(y*y+x):0,T=g*g+x>0?Math.sqrt(g*g+x):0,A=g+Math.sqrt(g*g+x)!==0?x*Math.log(Math.abs((y+w)/(g+T))):0;return Math.sqrt(h)/2*(y*w-g*T+A)};e.getQuadraticArcLength=n;function r(o,a,u){const l=i(1,u,o),c=i(1,u,a),f=l*l+c*c;return Math.sqrt(f)}const i=(o,a,u)=>{const l=u.length-1;let c,f;if(l===0)return 0;if(o===0){f=0;for(let d=0;d<=l;d++)f+=e.binomialCoefficients[l][d]*Math.pow(1-a,l-d)*Math.pow(a,d)*u[d];return f}else{c=new Array(l);for(let d=0;d<l;d++)c[d]=l*(u[d+1]-u[d]);return i(o-1,a,c)}},s=(o,a,u)=>{let l=1,c=o/a,f=(o-u(c))/a,d=0;for(;l>.001;){const h=u(c+f),p=Math.abs(o-h)/a;if(p<l)l=p,c+=f;else{const m=u(c-f),g=Math.abs(o-m)/a;g<l?(l=g,c-=f):f/=2}if(d++,d>500)break}return c};e.t2length=s}(oB)),oB}var nle;function BK(){if(nle)return bA;nle=1,Object.defineProperty(bA,"__esModule",{value:!0}),bA.Path=void 0;const e=Yr(),t=Hu(),n=Vr(),r=t1t();let i=class jf extends t.Shape{constructor(o){super(o),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=jf.parsePathData(this.data()),this.pathLength=jf.getPathLength(this.dataArray)}_sceneFunc(o){const a=this.dataArray;o.beginPath();let u=!1;for(let w=0;w<a.length;w++){const T=a[w].command,A=a[w].points;switch(T){case"L":o.lineTo(A[0],A[1]);break;case"M":o.moveTo(A[0],A[1]);break;case"C":o.bezierCurveTo(A[0],A[1],A[2],A[3],A[4],A[5]);break;case"Q":o.quadraticCurveTo(A[0],A[1],A[2],A[3]);break;case"A":var l=A[0],c=A[1],f=A[2],d=A[3],h=A[4],p=A[5],m=A[6],g=A[7],b=f>d?f:d,y=f>d?1:f/d,x=f>d?d/f:1;o.translate(l,c),o.rotate(m),o.scale(y,x),o.arc(0,0,b,h,h+p,1-g),o.scale(1/y,1/x),o.rotate(-m),o.translate(-l,-c);break;case"z":u=!0,o.closePath();break}}!u&&!this.hasFill()?o.strokeShape(this):o.fillStrokeShape(this)}getSelfRect(){let o=[];this.dataArray.forEach(function(h){if(h.command==="A"){const p=h.points[4],m=h.points[5],g=h.points[4]+m;let b=Math.PI/180;if(Math.abs(p-g)<b&&(b=Math.abs(p-g)),m<0)for(let y=p-b;y>g;y-=b){const x=jf.getPointOnEllipticalArc(h.points[0],h.points[1],h.points[2],h.points[3],y,0);o.push(x.x,x.y)}else for(let y=p+b;y<g;y+=b){const x=jf.getPointOnEllipticalArc(h.points[0],h.points[1],h.points[2],h.points[3],y,0);o.push(x.x,x.y)}}else if(h.command==="C")for(let p=0;p<=1;p+=.01){const m=jf.getPointOnCubicBezier(p,h.start.x,h.start.y,h.points[0],h.points[1],h.points[2],h.points[3],h.points[4],h.points[5]);o.push(m.x,m.y)}else o=o.concat(h.points)});let a=o[0],u=o[0],l=o[1],c=o[1],f,d;for(let h=0;h<o.length/2;h++)f=o[h*2],d=o[h*2+1],isNaN(f)||(a=Math.min(a,f),u=Math.max(u,f)),isNaN(d)||(l=Math.min(l,d),c=Math.max(c,d));return{x:a,y:l,width:u-a,height:c-l}}getLength(){return this.pathLength}getPointAtLength(o){return jf.getPointAtLengthOfDataArray(o,this.dataArray)}static getLineLength(o,a,u,l){return Math.sqrt((u-o)*(u-o)+(l-a)*(l-a))}static getPathLength(o){let a=0;for(let u=0;u<o.length;++u)a+=o[u].pathLength;return a}static getPointAtLengthOfDataArray(o,a){let u,l=0,c=a.length;if(!c)return null;for(;l<c&&o>a[l].pathLength;)o-=a[l].pathLength,++l;if(l===c)return u=a[l-1].points.slice(-2),{x:u[0],y:u[1]};if(o<.01)return u=a[l].points.slice(0,2),{x:u[0],y:u[1]};const f=a[l],d=f.points;switch(f.command){case"L":return jf.getPointOnLine(o,f.start.x,f.start.y,d[0],d[1]);case"C":return jf.getPointOnCubicBezier((0,r.t2length)(o,jf.getPathLength(a),w=>(0,r.getCubicArcLength)([f.start.x,d[0],d[2],d[4]],[f.start.y,d[1],d[3],d[5]],w)),f.start.x,f.start.y,d[0],d[1],d[2],d[3],d[4],d[5]);case"Q":return jf.getPointOnQuadraticBezier((0,r.t2length)(o,jf.getPathLength(a),w=>(0,r.getQuadraticArcLength)([f.start.x,d[0],d[2]],[f.start.y,d[1],d[3]],w)),f.start.x,f.start.y,d[0],d[1],d[2],d[3]);case"A":var h=d[0],p=d[1],m=d[2],g=d[3],b=d[4],y=d[5],x=d[6];return b+=y*o/f.pathLength,jf.getPointOnEllipticalArc(h,p,m,g,b,x)}return null}static getPointOnLine(o,a,u,l,c,f,d){f=f??a,d=d??u;const h=this.getLineLength(a,u,l,c);if(h<1e-10)return{x:a,y:u};if(l===a)return{x:f,y:d+(c>u?o:-o)};const p=(c-u)/(l-a),m=Math.sqrt(o*o/(1+p*p))*(l<a?-1:1),g=p*m;if(Math.abs(d-u-p*(f-a))<1e-10)return{x:f+m,y:d+g};const b=((f-a)*(l-a)+(d-u)*(c-u))/(h*h),y=a+b*(l-a),x=u+b*(c-u),w=this.getLineLength(f,d,y,x),T=Math.sqrt(o*o-w*w),A=Math.sqrt(T*T/(1+p*p))*(l<a?-1:1),k=p*A;return{x:y+A,y:x+k}}static getPointOnCubicBezier(o,a,u,l,c,f,d,h,p){function m(T){return T*T*T}function g(T){return 3*T*T*(1-T)}function b(T){return 3*T*(1-T)*(1-T)}function y(T){return(1-T)*(1-T)*(1-T)}const x=h*m(o)+f*g(o)+l*b(o)+a*y(o),w=p*m(o)+d*g(o)+c*b(o)+u*y(o);return{x,y:w}}static getPointOnQuadraticBezier(o,a,u,l,c,f,d){function h(y){return y*y}function p(y){return 2*y*(1-y)}function m(y){return(1-y)*(1-y)}const g=f*h(o)+l*p(o)+a*m(o),b=d*h(o)+c*p(o)+u*m(o);return{x:g,y:b}}static getPointOnEllipticalArc(o,a,u,l,c,f){const d=Math.cos(f),h=Math.sin(f),p={x:u*Math.cos(c),y:l*Math.sin(c)};return{x:o+(p.x*d-p.y*h),y:a+(p.x*h+p.y*d)}}static parsePathData(o){if(!o)return[];let a=o;const u=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];a=a.replace(new RegExp(" ","g"),",");for(var l=0;l<u.length;l++)a=a.replace(new RegExp(u[l],"g"),"|"+u[l]);const c=a.split("|"),f=[],d=[];let h=0,p=0;const m=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let g;for(l=1;l<c.length;l++){let D=c[l],B=D.charAt(0);for(D=D.slice(1),d.length=0;g=m.exec(D);)d.push(g[0]);const U=[];for(let G=0,ee=d.length;G<ee;G++){if(d[G]==="00"){U.push(0,0);continue}const ne=parseFloat(d[G]);isNaN(ne)?U.push(0):U.push(ne)}for(;U.length>0&&!isNaN(U[0]);){let G="",ee=[];const ne=h,ue=p;var b,y,x,w,T,A,k,I,O,M;switch(B){case"l":h+=U.shift(),p+=U.shift(),G="L",ee.push(h,p);break;case"L":h=U.shift(),p=U.shift(),ee.push(h,p);break;case"m":var L=U.shift(),H=U.shift();if(h+=L,p+=H,G="M",f.length>2&&f[f.length-1].command==="z"){for(let X=f.length-2;X>=0;X--)if(f[X].command==="M"){h=f[X].points[0]+L,p=f[X].points[1]+H;break}}ee.push(h,p),B="l";break;case"M":h=U.shift(),p=U.shift(),G="M",ee.push(h,p),B="L";break;case"h":h+=U.shift(),G="L",ee.push(h,p);break;case"H":h=U.shift(),G="L",ee.push(h,p);break;case"v":p+=U.shift(),G="L",ee.push(h,p);break;case"V":p=U.shift(),G="L",ee.push(h,p);break;case"C":ee.push(U.shift(),U.shift(),U.shift(),U.shift()),h=U.shift(),p=U.shift(),ee.push(h,p);break;case"c":ee.push(h+U.shift(),p+U.shift(),h+U.shift(),p+U.shift()),h+=U.shift(),p+=U.shift(),G="C",ee.push(h,p);break;case"S":y=h,x=p,b=f[f.length-1],b.command==="C"&&(y=h+(h-b.points[2]),x=p+(p-b.points[3])),ee.push(y,x,U.shift(),U.shift()),h=U.shift(),p=U.shift(),G="C",ee.push(h,p);break;case"s":y=h,x=p,b=f[f.length-1],b.command==="C"&&(y=h+(h-b.points[2]),x=p+(p-b.points[3])),ee.push(y,x,h+U.shift(),p+U.shift()),h+=U.shift(),p+=U.shift(),G="C",ee.push(h,p);break;case"Q":ee.push(U.shift(),U.shift()),h=U.shift(),p=U.shift(),ee.push(h,p);break;case"q":ee.push(h+U.shift(),p+U.shift()),h+=U.shift(),p+=U.shift(),G="Q",ee.push(h,p);break;case"T":y=h,x=p,b=f[f.length-1],b.command==="Q"&&(y=h+(h-b.points[0]),x=p+(p-b.points[1])),h=U.shift(),p=U.shift(),G="Q",ee.push(y,x,h,p);break;case"t":y=h,x=p,b=f[f.length-1],b.command==="Q"&&(y=h+(h-b.points[0]),x=p+(p-b.points[1])),h+=U.shift(),p+=U.shift(),G="Q",ee.push(y,x,h,p);break;case"A":w=U.shift(),T=U.shift(),A=U.shift(),k=U.shift(),I=U.shift(),O=h,M=p,h=U.shift(),p=U.shift(),G="A",ee=this.convertEndpointToCenterParameterization(O,M,h,p,k,I,w,T,A);break;case"a":w=U.shift(),T=U.shift(),A=U.shift(),k=U.shift(),I=U.shift(),O=h,M=p,h+=U.shift(),p+=U.shift(),G="A",ee=this.convertEndpointToCenterParameterization(O,M,h,p,k,I,w,T,A);break}f.push({command:G||B,points:ee,start:{x:ne,y:ue},pathLength:this.calcLength(ne,ue,G||B,ee)})}(B==="z"||B==="Z")&&f.push({command:"z",points:[],start:void 0,pathLength:0})}return f}static calcLength(o,a,u,l){let c,f,d,h;const p=jf;switch(u){case"L":return p.getLineLength(o,a,l[0],l[1]);case"C":return(0,r.getCubicArcLength)([o,l[0],l[2],l[4]],[a,l[1],l[3],l[5]],1);case"Q":return(0,r.getQuadraticArcLength)([o,l[0],l[2]],[a,l[1],l[3]],1);case"A":c=0;var m=l[4],g=l[5],b=l[4]+g,y=Math.PI/180;if(Math.abs(m-b)<y&&(y=Math.abs(m-b)),f=p.getPointOnEllipticalArc(l[0],l[1],l[2],l[3],m,0),g<0)for(h=m-y;h>b;h-=y)d=p.getPointOnEllipticalArc(l[0],l[1],l[2],l[3],h,0),c+=p.getLineLength(f.x,f.y,d.x,d.y),f=d;else for(h=m+y;h<b;h+=y)d=p.getPointOnEllipticalArc(l[0],l[1],l[2],l[3],h,0),c+=p.getLineLength(f.x,f.y,d.x,d.y),f=d;return d=p.getPointOnEllipticalArc(l[0],l[1],l[2],l[3],b,0),c+=p.getLineLength(f.x,f.y,d.x,d.y),c}return 0}static convertEndpointToCenterParameterization(o,a,u,l,c,f,d,h,p){const m=p*(Math.PI/180),g=Math.cos(m)*(o-u)/2+Math.sin(m)*(a-l)/2,b=-1*Math.sin(m)*(o-u)/2+Math.cos(m)*(a-l)/2,y=g*g/(d*d)+b*b/(h*h);y>1&&(d*=Math.sqrt(y),h*=Math.sqrt(y));let x=Math.sqrt((d*d*(h*h)-d*d*(b*b)-h*h*(g*g))/(d*d*(b*b)+h*h*(g*g)));c===f&&(x*=-1),isNaN(x)&&(x=0);const w=x*d*b/h,T=x*-h*g/d,A=(o+u)/2+Math.cos(m)*w-Math.sin(m)*T,k=(a+l)/2+Math.sin(m)*w+Math.cos(m)*T,I=function(U){return Math.sqrt(U[0]*U[0]+U[1]*U[1])},O=function(U,G){return(U[0]*G[0]+U[1]*G[1])/(I(U)*I(G))},M=function(U,G){return(U[0]*G[1]<U[1]*G[0]?-1:1)*Math.acos(O(U,G))},L=M([1,0],[(g-w)/d,(b-T)/h]),H=[(g-w)/d,(b-T)/h],D=[(-1*g-w)/d,(-1*b-T)/h];let B=M(H,D);return O(H,D)<=-1&&(B=Math.PI),O(H,D)>=1&&(B=0),f===0&&B>0&&(B=B-2*Math.PI),f===1&&B<0&&(B=B+2*Math.PI),[A,k,d,h,L,B,m,f]}};return bA.Path=i,i.prototype.className="Path",i.prototype._attrsAffectingSize=["data"],(0,n._registerNode)(i),e.Factory.addGetterSetter(i,"data"),bA}var rle;function n1t(){if(rle)return yA;rle=1,Object.defineProperty(yA,"__esModule",{value:!0}),yA.Arrow=void 0;const e=Yr(),t=vSe(),n=Zr(),r=Vr(),i=BK();let s=class extends t.Line{_sceneFunc(a){super._sceneFunc(a);const u=Math.PI*2,l=this.points();let c=l;const f=this.tension()!==0&&l.length>4;f&&(c=this.getTensionPoints());const d=this.pointerLength(),h=l.length;let p,m;if(f){const y=[c[c.length-4],c[c.length-3],c[c.length-2],c[c.length-1],l[h-2],l[h-1]],x=i.Path.calcLength(c[c.length-4],c[c.length-3],"C",y),w=i.Path.getPointOnQuadraticBezier(Math.min(1,1-d/x),y[0],y[1],y[2],y[3],y[4],y[5]);p=l[h-2]-w.x,m=l[h-1]-w.y}else p=l[h-2]-l[h-4],m=l[h-1]-l[h-3];const g=(Math.atan2(m,p)+u)%u,b=this.pointerWidth();this.pointerAtEnding()&&(a.save(),a.beginPath(),a.translate(l[h-2],l[h-1]),a.rotate(g),a.moveTo(0,0),a.lineTo(-d,b/2),a.lineTo(-d,-b/2),a.closePath(),a.restore(),this.__fillStroke(a)),this.pointerAtBeginning()&&(a.save(),a.beginPath(),a.translate(l[0],l[1]),f?(p=(c[0]+c[2])/2-l[0],m=(c[1]+c[3])/2-l[1]):(p=l[2]-l[0],m=l[3]-l[1]),a.rotate((Math.atan2(-m,-p)+u)%u),a.moveTo(0,0),a.lineTo(-d,b/2),a.lineTo(-d,-b/2),a.closePath(),a.restore(),this.__fillStroke(a))}__fillStroke(a){const u=this.dashEnabled();u&&(this.attrs.dashEnabled=!1,a.setLineDash([])),a.fillStrokeShape(this),u&&(this.attrs.dashEnabled=!0)}getSelfRect(){const a=super.getSelfRect(),u=this.pointerWidth()/2;return{x:a.x,y:a.y-u,width:a.width,height:a.height+u*2}}};return yA.Arrow=s,s.prototype.className="Arrow",(0,r._registerNode)(s),e.Factory.addGetterSetter(s,"pointerLength",10,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(s,"pointerWidth",10,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(s,"pointerAtBeginning",!1),e.Factory.addGetterSetter(s,"pointerAtEnding",!0),yA}var xA={},ile;function r1t(){if(ile)return xA;ile=1,Object.defineProperty(xA,"__esModule",{value:!0}),xA.Circle=void 0;const e=Yr(),t=Hu(),n=Zr(),r=Vr();class i extends t.Shape{_sceneFunc(o){o.beginPath(),o.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),o.closePath(),o.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(o){this.radius()!==o/2&&this.radius(o/2)}setHeight(o){this.radius()!==o/2&&this.radius(o/2)}}return xA.Circle=i,i.prototype._centroid=!0,i.prototype.className="Circle",i.prototype._attrsAffectingSize=["radius"],(0,r._registerNode)(i),e.Factory.addGetterSetter(i,"radius",0,(0,n.getNumberValidator)()),xA}var _A={},sle;function i1t(){if(sle)return _A;sle=1,Object.defineProperty(_A,"__esModule",{value:!0}),_A.Ellipse=void 0;const e=Yr(),t=Hu(),n=Zr(),r=Vr();let i=class extends t.Shape{_sceneFunc(o){const a=this.radiusX(),u=this.radiusY();o.beginPath(),o.save(),a!==u&&o.scale(1,u/a),o.arc(0,0,a,0,Math.PI*2,!1),o.restore(),o.closePath(),o.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(o){this.radiusX(o/2)}setHeight(o){this.radiusY(o/2)}};return _A.Ellipse=i,i.prototype.className="Ellipse",i.prototype._centroid=!0,i.prototype._attrsAffectingSize=["radiusX","radiusY"],(0,r._registerNode)(i),e.Factory.addComponentsGetterSetter(i,"radius",["x","y"]),e.Factory.addGetterSetter(i,"radiusX",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(i,"radiusY",0,(0,n.getNumberValidator)()),_A}var wA={},ole;function s1t(){if(ole)return wA;ole=1,Object.defineProperty(wA,"__esModule",{value:!0}),wA.Image=void 0;const e=Xo(),t=Yr(),n=Hu(),r=Vr(),i=Zr();class s extends n.Shape{constructor(a){super(a),this.on("imageChange.konva",()=>{this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const a=this.image();a&&a.complete||a&&a.readyState===4||a&&a.addEventListener&&a.addEventListener("load",()=>{this._requestDraw()})}_useBufferCanvas(){const a=!!this.cornerRadius(),u=this.hasShadow();return a&&u?!0:super._useBufferCanvas(!0)}_sceneFunc(a){const u=this.getWidth(),l=this.getHeight(),c=this.cornerRadius(),f=this.attrs.image;let d;if(f){const h=this.attrs.cropWidth,p=this.attrs.cropHeight;h&&p?d=[f,this.cropX(),this.cropY(),h,p,0,0,u,l]:d=[f,0,0,u,l]}(this.hasFill()||this.hasStroke()||c)&&(a.beginPath(),c?e.Util.drawRoundedRectPath(a,u,l,c):a.rect(0,0,u,l),a.closePath(),a.fillStrokeShape(this)),f&&(c&&a.clip(),a.drawImage.apply(a,d))}_hitFunc(a){const u=this.width(),l=this.height(),c=this.cornerRadius();a.beginPath(),c?e.Util.drawRoundedRectPath(a,u,l,c):a.rect(0,0,u,l),a.closePath(),a.fillStrokeShape(this)}getWidth(){var a,u;return(a=this.attrs.width)!==null&&a!==void 0?a:(u=this.image())===null||u===void 0?void 0:u.width}getHeight(){var a,u;return(a=this.attrs.height)!==null&&a!==void 0?a:(u=this.image())===null||u===void 0?void 0:u.height}static fromURL(a,u,l=null){const c=e.Util.createImageElement();c.onload=function(){const f=new s({image:c});u(f)},c.onerror=l,c.crossOrigin="Anonymous",c.src=a}}return wA.Image=s,s.prototype.className="Image",(0,r._registerNode)(s),t.Factory.addGetterSetter(s,"cornerRadius",0,(0,i.getNumberOrArrayOfNumbersValidator)(4)),t.Factory.addGetterSetter(s,"image"),t.Factory.addComponentsGetterSetter(s,"crop",["x","y","width","height"]),t.Factory.addGetterSetter(s,"cropX",0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(s,"cropY",0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(s,"cropWidth",0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(s,"cropHeight",0,(0,i.getNumberValidator)()),wA}var jx={},ale;function o1t(){if(ale)return jx;ale=1,Object.defineProperty(jx,"__esModule",{value:!0}),jx.Tag=jx.Label=void 0;const e=Yr(),t=Hu(),n=FK(),r=Zr(),i=Vr(),s=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],o="Change.konva",a="none",u="up",l="right",c="down",f="left",d=s.length;class h extends n.Group{constructor(g){super(g),this.on("add.konva",function(b){this._addListeners(b.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(g){let b=this,y;const x=function(){b._sync()};for(y=0;y<d;y++)g.on(s[y]+o,x)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let g=this.getText(),b=this.getTag(),y,x,w,T,A,k,I;if(g&&b){switch(y=g.width(),x=g.height(),w=b.pointerDirection(),T=b.pointerWidth(),I=b.pointerHeight(),A=0,k=0,w){case u:A=y/2,k=-1*I;break;case l:A=y+T,k=x/2;break;case c:A=y/2,k=x+I;break;case f:A=-1*T,k=x/2;break}b.setAttrs({x:-1*A,y:-1*k,width:y,height:x}),g.setAttrs({x:-1*A,y:-1*k})}}}jx.Label=h,h.prototype.className="Label",(0,i._registerNode)(h);class p extends t.Shape{_sceneFunc(g){const b=this.width(),y=this.height(),x=this.pointerDirection(),w=this.pointerWidth(),T=this.pointerHeight(),A=this.cornerRadius();let k=0,I=0,O=0,M=0;typeof A=="number"?k=I=O=M=Math.min(A,b/2,y/2):(k=Math.min(A[0]||0,b/2,y/2),I=Math.min(A[1]||0,b/2,y/2),M=Math.min(A[2]||0,b/2,y/2),O=Math.min(A[3]||0,b/2,y/2)),g.beginPath(),g.moveTo(k,0),x===u&&(g.lineTo((b-w)/2,0),g.lineTo(b/2,-1*T),g.lineTo((b+w)/2,0)),g.lineTo(b-I,0),g.arc(b-I,I,I,Math.PI*3/2,0,!1),x===l&&(g.lineTo(b,(y-T)/2),g.lineTo(b+w,y/2),g.lineTo(b,(y+T)/2)),g.lineTo(b,y-M),g.arc(b-M,y-M,M,0,Math.PI/2,!1),x===c&&(g.lineTo((b+w)/2,y),g.lineTo(b/2,y+T),g.lineTo((b-w)/2,y)),g.lineTo(O,y),g.arc(O,y-O,O,Math.PI/2,Math.PI,!1),x===f&&(g.lineTo(0,(y+T)/2),g.lineTo(-1*w,y/2),g.lineTo(0,(y-T)/2)),g.lineTo(0,k),g.arc(k,k,k,Math.PI,Math.PI*3/2,!1),g.closePath(),g.fillStrokeShape(this)}getSelfRect(){let g=0,b=0,y=this.pointerWidth(),x=this.pointerHeight(),w=this.pointerDirection(),T=this.width(),A=this.height();return w===u?(b-=x,A+=x):w===c?A+=x:w===f?(g-=y*1.5,T+=y):w===l&&(T+=y*1.5),{x:g,y:b,width:T,height:A}}}return jx.Tag=p,p.prototype.className="Tag",(0,i._registerNode)(p),e.Factory.addGetterSetter(p,"pointerDirection",a),e.Factory.addGetterSetter(p,"pointerWidth",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(p,"pointerHeight",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(p,"cornerRadius",0,(0,r.getNumberOrArrayOfNumbersValidator)(4)),jx}var EA={},ule;function bSe(){if(ule)return EA;ule=1,Object.defineProperty(EA,"__esModule",{value:!0}),EA.Rect=void 0;const e=Yr(),t=Hu(),n=Vr(),r=Xo(),i=Zr();let s=class extends t.Shape{_sceneFunc(a){const u=this.cornerRadius(),l=this.width(),c=this.height();a.beginPath(),u?r.Util.drawRoundedRectPath(a,l,c,u):a.rect(0,0,l,c),a.closePath(),a.fillStrokeShape(this)}};return EA.Rect=s,s.prototype.className="Rect",(0,n._registerNode)(s),e.Factory.addGetterSetter(s,"cornerRadius",0,(0,i.getNumberOrArrayOfNumbersValidator)(4)),EA}var SA={},lle;function a1t(){if(lle)return SA;lle=1,Object.defineProperty(SA,"__esModule",{value:!0}),SA.RegularPolygon=void 0;const e=Yr(),t=Hu(),n=Zr(),r=Vr();let i=class extends t.Shape{_sceneFunc(o){const a=this._getPoints();o.beginPath(),o.moveTo(a[0].x,a[0].y);for(let u=1;u<a.length;u++)o.lineTo(a[u].x,a[u].y);o.closePath(),o.fillStrokeShape(this)}_getPoints(){const o=this.attrs.sides,a=this.attrs.radius||0,u=[];for(let l=0;l<o;l++)u.push({x:a*Math.sin(l*2*Math.PI/o),y:-1*a*Math.cos(l*2*Math.PI/o)});return u}getSelfRect(){const o=this._getPoints();let a=o[0].x,u=o[0].y,l=o[0].x,c=o[0].y;return o.forEach(f=>{a=Math.min(a,f.x),u=Math.max(u,f.x),l=Math.min(l,f.y),c=Math.max(c,f.y)}),{x:a,y:l,width:u-a,height:c-l}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(o){this.radius(o/2)}setHeight(o){this.radius(o/2)}};return SA.RegularPolygon=i,i.prototype.className="RegularPolygon",i.prototype._centroid=!0,i.prototype._attrsAffectingSize=["radius"],(0,r._registerNode)(i),e.Factory.addGetterSetter(i,"radius",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(i,"sides",0,(0,n.getNumberValidator)()),SA}var TA={},cle;function u1t(){if(cle)return TA;cle=1,Object.defineProperty(TA,"__esModule",{value:!0}),TA.Ring=void 0;const e=Yr(),t=Hu(),n=Zr(),r=Vr(),i=Math.PI*2;let s=class extends t.Shape{_sceneFunc(a){a.beginPath(),a.arc(0,0,this.innerRadius(),0,i,!1),a.moveTo(this.outerRadius(),0),a.arc(0,0,this.outerRadius(),i,0,!0),a.closePath(),a.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(a){this.outerRadius(a/2)}setHeight(a){this.outerRadius(a/2)}};return TA.Ring=s,s.prototype.className="Ring",s.prototype._centroid=!0,s.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,r._registerNode)(s),e.Factory.addGetterSetter(s,"innerRadius",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(s,"outerRadius",0,(0,n.getNumberValidator)()),TA}var CA={},fle;function l1t(){if(fle)return CA;fle=1,Object.defineProperty(CA,"__esModule",{value:!0}),CA.Sprite=void 0;const e=Yr(),t=Hu(),n=$K(),r=Zr(),i=Vr();let s=class extends t.Shape{constructor(a){super(a),this._updated=!0,this.anim=new n.Animation(()=>{const u=this._updated;return this._updated=!1,u}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(a){const u=this.animation(),l=this.frameIndex(),c=l*4,f=this.animations()[u],d=this.frameOffsets(),h=f[c+0],p=f[c+1],m=f[c+2],g=f[c+3],b=this.image();if((this.hasFill()||this.hasStroke())&&(a.beginPath(),a.rect(0,0,m,g),a.closePath(),a.fillStrokeShape(this)),b)if(d){const y=d[u],x=l*2;a.drawImage(b,h,p,m,g,y[x+0],y[x+1],m,g)}else a.drawImage(b,h,p,m,g,0,0,m,g)}_hitFunc(a){const u=this.animation(),l=this.frameIndex(),c=l*4,f=this.animations()[u],d=this.frameOffsets(),h=f[c+2],p=f[c+3];if(a.beginPath(),d){const m=d[u],g=l*2;a.rect(m[g+0],m[g+1],h,p)}else a.rect(0,0,h,p);a.closePath(),a.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const a=this;this.interval=setInterval(function(){a._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const a=this.getLayer();this.anim.setLayers(a),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const a=this.frameIndex(),u=this.animation(),l=this.animations(),c=l[u],f=c.length/4;a<f-1?this.frameIndex(a+1):this.frameIndex(0)}};return CA.Sprite=s,s.prototype.className="Sprite",(0,i._registerNode)(s),e.Factory.addGetterSetter(s,"animation"),e.Factory.addGetterSetter(s,"animations"),e.Factory.addGetterSetter(s,"frameOffsets"),e.Factory.addGetterSetter(s,"image"),e.Factory.addGetterSetter(s,"frameIndex",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(s,"frameRate",17,(0,r.getNumberValidator)()),e.Factory.backCompat(s,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"}),CA}var AA={},dle;function c1t(){if(dle)return AA;dle=1,Object.defineProperty(AA,"__esModule",{value:!0}),AA.Star=void 0;const e=Yr(),t=Hu(),n=Zr(),r=Vr();let i=class extends t.Shape{_sceneFunc(o){const a=this.innerRadius(),u=this.outerRadius(),l=this.numPoints();o.beginPath(),o.moveTo(0,0-u);for(let c=1;c<l*2;c++){const f=c%2===0?u:a,d=f*Math.sin(c*Math.PI/l),h=-1*f*Math.cos(c*Math.PI/l);o.lineTo(d,h)}o.closePath(),o.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(o){this.outerRadius(o/2)}setHeight(o){this.outerRadius(o/2)}};return AA.Star=i,i.prototype.className="Star",i.prototype._centroid=!0,i.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,r._registerNode)(i),e.Factory.addGetterSetter(i,"numPoints",5,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(i,"innerRadius",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(i,"outerRadius",0,(0,n.getNumberValidator)()),AA}var J2={},hle;function xSe(){if(hle)return J2;hle=1,Object.defineProperty(J2,"__esModule",{value:!0}),J2.Text=void 0,J2.stringToArray=o;const e=Xo(),t=Yr(),n=Hu(),r=Vr(),i=Zr(),s=Vr();function o(te){return[...te].reduce((W,Z,oe,pe)=>{if(new RegExp("\\p{Emoji}","u").test(Z)){const ce=pe[oe+1];ce&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(ce)?(W.push(Z+ce),pe[oe+1]=""):W.push(Z)}else new RegExp("\\p{Regional_Indicator}{2}","u").test(Z+(pe[oe+1]||""))?W.push(Z+pe[oe+1]):oe>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(Z)?W[W.length-1]+=Z:Z&&W.push(Z);return W},[])}const a="auto",u="center",l="inherit",c="justify",f="Change.konva",d="2d",h="-",p="left",m="text",g="Text",b="top",y="bottom",x="middle",w="normal",T="px ",A=" ",k="right",I="rtl",O="word",M="char",L="none",H="",D=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],B=D.length;function U(te){return te.split(",").map(W=>{W=W.trim();const Z=W.indexOf(" ")>=0,oe=W.indexOf('"')>=0||W.indexOf("'")>=0;return Z&&!oe&&(W=`"${W}"`),W}).join(", ")}let G;function ee(){return G||(G=e.Util.createCanvasElement().getContext(d),G)}function ne(te){te.fillText(this._partialText,this._partialTextX,this._partialTextY)}function ue(te){te.setAttr("miterLimit",2),te.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function X(te){return te=te||{},!te.fillLinearGradientColorStops&&!te.fillRadialGradientColorStops&&!te.fillPatternImage&&(te.fill=te.fill||"black"),te}let q=class extends n.Shape{constructor(W){super(X(W)),this._partialTextX=0,this._partialTextY=0;for(let Z=0;Z<B;Z++)this.on(D[Z]+f,this._setTextData);this._setTextData()}_sceneFunc(W){const Z=this.textArr,oe=Z.length;if(!this.text())return;let pe=this.padding(),ce=this.fontSize(),he=this.lineHeight()*ce,Ee=this.verticalAlign(),Ae=this.direction(),ge=0,me=this.align(),Oe=this.getWidth(),Me=this.letterSpacing(),Ye=this.fill(),lt=this.textDecoration(),We=lt.indexOf("underline")!==-1,nt=lt.indexOf("line-through")!==-1,yt;Ae=Ae===l?W.direction:Ae;let _t=he/2,Rt=x;if(r.Konva._fixTextRendering){const Wt=this.measureSize("M");Rt="alphabetic",_t=(Wt.fontBoundingBoxAscent-Wt.fontBoundingBoxDescent)/2+he/2}var Et=0,Ke=0;for(Ae===I&&W.setAttr("direction",Ae),W.setAttr("font",this._getContextFont()),W.setAttr("textBaseline",Rt),W.setAttr("textAlign",p),Ee===x?ge=(this.getHeight()-oe*he-pe*2)/2:Ee===y&&(ge=this.getHeight()-oe*he-pe*2),W.translate(pe,ge+pe),yt=0;yt<oe;yt++){var Et=0,Ke=0,Lt=Z[yt],sn=Lt.text,Fe=Lt.width,Qe=Lt.lastInParagraph,wt,Vt;if(W.save(),me===k?Et+=Oe-Fe-pe*2:me===u&&(Et+=(Oe-Fe-pe*2)/2),We){W.save(),W.beginPath();const Nn=r.Konva._fixTextRendering?Math.round(ce/4):Math.round(ce/2),Zn=Et,wr=_t+Ke+Nn;W.moveTo(Zn,wr),wt=sn.split(" ").length-1,Vt=me===c&&!Qe?Oe-pe*2:Fe,W.lineTo(Zn+Math.round(Vt),wr),W.lineWidth=ce/15;const Hn=this._getLinearGradient();W.strokeStyle=Hn||Ye,W.stroke(),W.restore()}if(nt){W.save(),W.beginPath();const Nn=r.Konva._fixTextRendering?-Math.round(ce/4):0;W.moveTo(Et,_t+Ke+Nn),wt=sn.split(" ").length-1,Vt=me===c&&!Qe?Oe-pe*2:Fe,W.lineTo(Et+Math.round(Vt),_t+Ke+Nn),W.lineWidth=ce/15;const Zn=this._getLinearGradient();W.strokeStyle=Zn||Ye,W.stroke(),W.restore()}if(Ae!==I&&(Me!==0||me===c)){wt=sn.split(" ").length-1;const Nn=o(sn);for(let Zn=0;Zn<Nn.length;Zn++){const wr=Nn[Zn];wr===" "&&!Qe&&me===c&&(Et+=(Oe-pe*2-Fe)/wt),this._partialTextX=Et,this._partialTextY=_t+Ke,this._partialText=wr,W.fillStrokeShape(this),Et+=this.measureSize(wr).width+Me}}else Me!==0&&W.setAttr("letterSpacing",`${Me}px`),this._partialTextX=Et,this._partialTextY=_t+Ke,this._partialText=sn,W.fillStrokeShape(this);W.restore(),oe>1&&(_t+=he)}}_hitFunc(W){const Z=this.getWidth(),oe=this.getHeight();W.beginPath(),W.rect(0,0,Z,oe),W.closePath(),W.fillStrokeShape(this)}setText(W){const Z=e.Util._isString(W)?W:W==null?"":W+"";return this._setAttr(m,Z),this}getWidth(){return this.attrs.width===a||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===a||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return e.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(W){var Z,oe,pe,ce,he,Ee,Ae,ge,me,Oe,Me;let Ye=ee(),lt=this.fontSize(),We;Ye.save(),Ye.font=this._getContextFont(),We=Ye.measureText(W),Ye.restore();const nt=lt/100;return{actualBoundingBoxAscent:(Z=We.actualBoundingBoxAscent)!==null&&Z!==void 0?Z:71.58203125*nt,actualBoundingBoxDescent:(oe=We.actualBoundingBoxDescent)!==null&&oe!==void 0?oe:0,actualBoundingBoxLeft:(pe=We.actualBoundingBoxLeft)!==null&&pe!==void 0?pe:-7.421875*nt,actualBoundingBoxRight:(ce=We.actualBoundingBoxRight)!==null&&ce!==void 0?ce:75.732421875*nt,alphabeticBaseline:(he=We.alphabeticBaseline)!==null&&he!==void 0?he:0,emHeightAscent:(Ee=We.emHeightAscent)!==null&&Ee!==void 0?Ee:100*nt,emHeightDescent:(Ae=We.emHeightDescent)!==null&&Ae!==void 0?Ae:-20*nt,fontBoundingBoxAscent:(ge=We.fontBoundingBoxAscent)!==null&&ge!==void 0?ge:91*nt,fontBoundingBoxDescent:(me=We.fontBoundingBoxDescent)!==null&&me!==void 0?me:21*nt,hangingBaseline:(Oe=We.hangingBaseline)!==null&&Oe!==void 0?Oe:72.80000305175781*nt,ideographicBaseline:(Me=We.ideographicBaseline)!==null&&Me!==void 0?Me:-21*nt,width:We.width,height:lt}}_getContextFont(){return this.fontStyle()+A+this.fontVariant()+A+(this.fontSize()+T)+U(this.fontFamily())}_addTextLine(W){this.align()===c&&(W=W.trim());const oe=this._getTextWidth(W);return this.textArr.push({text:W,width:oe,lastInParagraph:!1})}_getTextWidth(W){const Z=this.letterSpacing(),oe=W.length;return ee().measureText(W).width+Z*oe}_setTextData(){let W=this.text().split(`
`),Z=+this.fontSize(),oe=0,pe=this.lineHeight()*Z,ce=this.attrs.width,he=this.attrs.height,Ee=ce!==a&&ce!==void 0,Ae=he!==a&&he!==void 0,ge=this.padding(),me=ce-ge*2,Oe=he-ge*2,Me=0,Ye=this.wrap(),lt=Ye!==L,We=Ye!==M&&lt,nt=this.ellipsis();this.textArr=[],ee().font=this._getContextFont();const yt=nt?this._getTextWidth(H):0;for(let _t=0,Rt=W.length;_t<Rt;++_t){let Et=W[_t],Ke=this._getTextWidth(Et);if(Ee&&Ke>me)for(;Et.length>0;){let Lt=0,sn=o(Et).length,Fe="",Qe=0;for(;Lt<sn;){const wt=Lt+sn>>>1,Vt=o(Et),Wt=Vt.slice(0,wt+1).join(""),bn=this._getTextWidth(Wt)+yt;bn<=me?(Lt=wt+1,Fe=Wt,Qe=bn):sn=wt}if(Fe){if(We){const Wt=o(Et),bn=o(Fe),Nn=Wt[bn.length],Zn=Nn===A||Nn===h;let wr;if(Zn&&Qe<=me)wr=bn.length;else{const Hn=bn.lastIndexOf(A),nr=bn.lastIndexOf(h);wr=Math.max(Hn,nr)+1}wr>0&&(Lt=wr,Fe=Wt.slice(0,Lt).join(""),Qe=this._getTextWidth(Fe))}if(Fe=Fe.trimRight(),this._addTextLine(Fe),oe=Math.max(oe,Qe),Me+=pe,this._shouldHandleEllipsis(Me)){this._tryToAddEllipsisToLastLine();break}if(Et=o(Et).slice(Lt).join("").trimLeft(),Et.length>0&&(Ke=this._getTextWidth(Et),Ke<=me)){this._addTextLine(Et),Me+=pe,oe=Math.max(oe,Ke);break}}else break}else this._addTextLine(Et),Me+=pe,oe=Math.max(oe,Ke),this._shouldHandleEllipsis(Me)&&_t<Rt-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),Ae&&Me+pe>Oe)break}this.textHeight=Z,this.textWidth=oe}_shouldHandleEllipsis(W){const Z=+this.fontSize(),oe=this.lineHeight()*Z,pe=this.attrs.height,ce=pe!==a&&pe!==void 0,he=this.padding(),Ee=pe-he*2;return!(this.wrap()!==L)||ce&&W+oe>Ee}_tryToAddEllipsisToLastLine(){const W=this.attrs.width,Z=W!==a&&W!==void 0,oe=this.padding(),pe=W-oe*2,ce=this.ellipsis(),he=this.textArr[this.textArr.length-1];!he||!ce||(Z&&(this._getTextWidth(he.text+H)<pe||(he.text=he.text.slice(0,he.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(he.text+H))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const W=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,Z=this.hasShadow();return W&&Z?!0:super._useBufferCanvas()}};return J2.Text=q,q.prototype._fillFunc=ne,q.prototype._strokeFunc=ue,q.prototype.className=g,q.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],(0,s._registerNode)(q),t.Factory.overWriteSetter(q,"width",(0,i.getNumberOrAutoValidator)()),t.Factory.overWriteSetter(q,"height",(0,i.getNumberOrAutoValidator)()),t.Factory.addGetterSetter(q,"direction",l),t.Factory.addGetterSetter(q,"fontFamily","Arial"),t.Factory.addGetterSetter(q,"fontSize",12,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(q,"fontStyle",w),t.Factory.addGetterSetter(q,"fontVariant",w),t.Factory.addGetterSetter(q,"padding",0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(q,"align",p),t.Factory.addGetterSetter(q,"verticalAlign",b),t.Factory.addGetterSetter(q,"lineHeight",1,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(q,"wrap",O),t.Factory.addGetterSetter(q,"ellipsis",!1,(0,i.getBooleanValidator)()),t.Factory.addGetterSetter(q,"letterSpacing",0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(q,"text","",(0,i.getStringValidator)()),t.Factory.addGetterSetter(q,"textDecoration",""),J2}var kA={},ple;function f1t(){if(ple)return kA;ple=1,Object.defineProperty(kA,"__esModule",{value:!0}),kA.TextPath=void 0;const e=Xo(),t=Yr(),n=Hu(),r=BK(),i=xSe(),s=Zr(),o=Vr(),a="",u="normal";function l(d){d.fillText(this.partialText,0,0)}function c(d){d.strokeText(this.partialText,0,0)}let f=class extends n.Shape{constructor(h){super(h),this.dummyCanvas=e.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return r.Path.getPathLength(this.dataArray)}_getPointAtLength(h){if(!this.attrs.data)return null;const p=this.pathLength;return h-1>p?null:r.Path.getPointAtLengthOfDataArray(h,this.dataArray)}_readDataAttribute(){this.dataArray=r.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(h){h.setAttr("font",this._getContextFont()),h.setAttr("textBaseline",this.textBaseline()),h.setAttr("textAlign","left"),h.save();const p=this.textDecoration(),m=this.fill(),g=this.fontSize(),b=this.glyphInfo;p==="underline"&&h.beginPath();for(let y=0;y<b.length;y++){h.save();const x=b[y].p0;h.translate(x.x,x.y),h.rotate(b[y].rotation),this.partialText=b[y].text,h.fillStrokeShape(this),p==="underline"&&(y===0&&h.moveTo(0,g/2+1),h.lineTo(g,g/2+1)),h.restore()}p==="underline"&&(h.strokeStyle=m,h.lineWidth=g/20,h.stroke()),h.restore()}_hitFunc(h){h.beginPath();const p=this.glyphInfo;if(p.length>=1){const m=p[0].p0;h.moveTo(m.x,m.y)}for(let m=0;m<p.length;m++){const g=p[m].p1;h.lineTo(g.x,g.y)}h.setAttr("lineWidth",this.fontSize()),h.setAttr("strokeStyle",this.colorKey),h.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return e.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(h){return i.Text.prototype.setText.call(this,h)}_getContextFont(){return i.Text.prototype._getContextFont.call(this)}_getTextSize(h){const m=this.dummyCanvas.getContext("2d");m.save(),m.font=this._getContextFont();const g=m.measureText(h);return m.restore(),{width:g.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:h,height:p}=this._getTextSize(this.attrs.text);if(this.textWidth=h,this.textHeight=p,this.glyphInfo=[],!this.attrs.data)return null;const m=this.letterSpacing(),g=this.align(),b=this.kerningFunc(),y=Math.max(this.textWidth+((this.attrs.text||"").length-1)*m,0);let x=0;g==="center"&&(x=Math.max(0,this.pathLength/2-y/2)),g==="right"&&(x=Math.max(0,this.pathLength-y));const w=(0,i.stringToArray)(this.text());let T=x;for(let A=0;A<w.length;A++){const k=this._getPointAtLength(T);if(!k)return;let I=this._getTextSize(w[A]).width+m;if(w[A]===" "&&g==="justify"){const B=this.text().split(" ").length-1;I+=(this.pathLength-y)/B}const O=this._getPointAtLength(T+I);if(!O)return;const M=r.Path.getLineLength(k.x,k.y,O.x,O.y);let L=0;if(b)try{L=b(w[A-1],w[A])*this.fontSize()}catch{L=0}k.x+=L,O.x+=L,this.textWidth+=L;const H=r.Path.getPointOnLine(L+M/2,k.x,k.y,O.x,O.y),D=Math.atan2(O.y-k.y,O.x-k.x);this.glyphInfo.push({transposeX:H.x,transposeY:H.y,text:w[A],rotation:D,p0:k,p1:O}),T+=I}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const h=[];this.glyphInfo.forEach(function(T){h.push(T.p0.x),h.push(T.p0.y),h.push(T.p1.x),h.push(T.p1.y)});let p=h[0]||0,m=h[0]||0,g=h[1]||0,b=h[1]||0,y,x;for(let T=0;T<h.length/2;T++)y=h[T*2],x=h[T*2+1],p=Math.min(p,y),m=Math.max(m,y),g=Math.min(g,x),b=Math.max(b,x);const w=this.fontSize();return{x:p-w/2,y:g-w/2,width:m-p+w,height:b-g+w}}destroy(){return e.Util.releaseCanvas(this.dummyCanvas),super.destroy()}};return kA.TextPath=f,f.prototype._fillFunc=l,f.prototype._strokeFunc=c,f.prototype._fillFuncHit=l,f.prototype._strokeFuncHit=c,f.prototype.className="TextPath",f.prototype._attrsAffectingSize=["text","fontSize","data"],(0,o._registerNode)(f),t.Factory.addGetterSetter(f,"data"),t.Factory.addGetterSetter(f,"fontFamily","Arial"),t.Factory.addGetterSetter(f,"fontSize",12,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(f,"fontStyle",u),t.Factory.addGetterSetter(f,"align","left"),t.Factory.addGetterSetter(f,"letterSpacing",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(f,"textBaseline","middle"),t.Factory.addGetterSetter(f,"fontVariant",u),t.Factory.addGetterSetter(f,"text",a),t.Factory.addGetterSetter(f,"textDecoration",""),t.Factory.addGetterSetter(f,"kerningFunc",void 0),kA}var RA={},mle;function d1t(){if(mle)return RA;mle=1,Object.defineProperty(RA,"__esModule",{value:!0}),RA.Transformer=void 0;const e=Xo(),t=Yr(),n=_a(),r=Hu(),i=bSe(),s=FK(),o=Vr(),a=Zr(),u=Vr(),l="tr-konva",c=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(I=>I+`.${l}`).join(" "),f="nodesRect",d=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],h={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},p="ontouchstart"in o.Konva._global;function m(I,O,M){if(I==="rotater")return M;O+=e.Util.degToRad(h[I]||0);const L=(e.Util.radToDeg(O)%360+360)%360;return e.Util._inRange(L,315+22.5,360)||e.Util._inRange(L,0,22.5)?"ns-resize":e.Util._inRange(L,45-22.5,45+22.5)?"nesw-resize":e.Util._inRange(L,90-22.5,90+22.5)?"ew-resize":e.Util._inRange(L,135-22.5,135+22.5)?"nwse-resize":e.Util._inRange(L,180-22.5,180+22.5)?"ns-resize":e.Util._inRange(L,225-22.5,225+22.5)?"nesw-resize":e.Util._inRange(L,270-22.5,270+22.5)?"ew-resize":e.Util._inRange(L,315-22.5,315+22.5)?"nwse-resize":(e.Util.error("Transformer has unknown angle for cursor detection: "+L),"pointer")}const g=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function b(I){return{x:I.x+I.width/2*Math.cos(I.rotation)+I.height/2*Math.sin(-I.rotation),y:I.y+I.height/2*Math.cos(I.rotation)+I.width/2*Math.sin(I.rotation)}}function y(I,O,M){const L=M.x+(I.x-M.x)*Math.cos(O)-(I.y-M.y)*Math.sin(O),H=M.y+(I.x-M.x)*Math.sin(O)+(I.y-M.y)*Math.cos(O);return{...I,rotation:I.rotation+O,x:L,y:H}}function x(I,O){const M=b(I);return y(I,O,M)}function w(I,O,M){let L=O;for(let H=0;H<I.length;H++){const D=o.Konva.getAngle(I[H]),B=Math.abs(D-O)%(Math.PI*2);Math.min(B,Math.PI*2-B)<M&&(L=D)}return L}let T=0,A=class extends s.Group{constructor(O){super(O),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(c,this.update),this.getNode()&&this.update()}attachTo(O){return this.setNode(O),this}setNode(O){return e.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([O])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return l+this._id}setNodes(O=[]){this._nodes&&this._nodes.length&&this.detach();const M=O.filter(H=>H.isAncestorOf(this)?(e.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=O=M,O.length===1&&this.useSingleNodeRotation()?this.rotation(O[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(H=>{const D=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()},B=H._attrsAffectingSize.map(U=>U+"Change."+this._getEventNamespace()).join(" ");H.on(B,D),H.on(d.map(U=>U+`.${this._getEventNamespace()}`).join(" "),D),H.on(`absoluteTransformChange.${this._getEventNamespace()}`,D),this._proxyDrag(H)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(O){let M;O.on(`dragstart.${this._getEventNamespace()}`,L=>{M=O.getAbsolutePosition(),!this.isDragging()&&O!==this.findOne(".back")&&this.startDrag(L,!1)}),O.on(`dragmove.${this._getEventNamespace()}`,L=>{if(!M)return;const H=O.getAbsolutePosition(),D=H.x-M.x,B=H.y-M.y;this.nodes().forEach(U=>{if(U===O||U.isDragging())return;const G=U.getAbsolutePosition();U.setAbsolutePosition({x:G.x+D,y:G.y+B}),U.startDrag(L)}),M=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(O=>{O.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(f),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(f,this.__getNodeRect)}__getNodeShape(O,M=this.rotation(),L){const H=O.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),D=O.getAbsoluteScale(L),B=O.getAbsolutePosition(L),U=H.x*D.x-O.offsetX()*D.x,G=H.y*D.y-O.offsetY()*D.y,ee=(o.Konva.getAngle(O.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),ne={x:B.x+U*Math.cos(ee)+G*Math.sin(-ee),y:B.y+G*Math.cos(ee)+U*Math.sin(ee),width:H.width*D.x,height:H.height*D.y,rotation:ee};return y(ne,-o.Konva.getAngle(M),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const M=[];this.nodes().map(ee=>{const ne=ee.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),ue=[{x:ne.x,y:ne.y},{x:ne.x+ne.width,y:ne.y},{x:ne.x+ne.width,y:ne.y+ne.height},{x:ne.x,y:ne.y+ne.height}],X=ee.getAbsoluteTransform();ue.forEach(function(q){const te=X.point(q);M.push(te)})});const L=new e.Transform;L.rotate(-o.Konva.getAngle(this.rotation()));let H=1/0,D=1/0,B=-1/0,U=-1/0;M.forEach(function(ee){const ne=L.point(ee);H===void 0&&(H=B=ne.x,D=U=ne.y),H=Math.min(H,ne.x),D=Math.min(D,ne.y),B=Math.max(B,ne.x),U=Math.max(U,ne.y)}),L.invert();const G=L.point({x:H,y:D});return{x:G.x,y:G.y,width:B-H,height:U-D,rotation:o.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),g.forEach(O=>{this._createAnchor(O)}),this._createAnchor("rotater")}_createAnchor(O){const M=new i.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:O+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:p?10:"auto"}),L=this;M.on("mousedown touchstart",function(H){L._handleMouseDown(H)}),M.on("dragstart",H=>{M.stopDrag(),H.cancelBubble=!0}),M.on("dragend",H=>{H.cancelBubble=!0}),M.on("mouseenter",()=>{const H=o.Konva.getAngle(this.rotation()),D=this.rotateAnchorCursor(),B=m(O,H,D);M.getStage().content&&(M.getStage().content.style.cursor=B),this._cursorChange=!0}),M.on("mouseout",()=>{M.getStage().content&&(M.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(M)}_createBack(){const O=new r.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(M,L){const H=L.getParent(),D=H.padding();M.beginPath(),M.rect(-D,-D,L.width()+D*2,L.height()+D*2),M.moveTo(L.width()/2,-D),H.rotateEnabled()&&H.rotateLineVisible()&&M.lineTo(L.width()/2,-H.rotateAnchorOffset()*e.Util._sign(L.height())-D),M.fillStrokeShape(L)},hitFunc:(M,L)=>{if(!this.shouldOverdrawWholeArea())return;const H=this.padding();M.beginPath(),M.rect(-H,-H,L.width()+H*2,L.height()+H*2),M.fillStrokeShape(L)}});this.add(O),this._proxyDrag(O),O.on("dragstart",M=>{M.cancelBubble=!0}),O.on("dragmove",M=>{M.cancelBubble=!0}),O.on("dragend",M=>{M.cancelBubble=!0}),this.on("dragmove",M=>{this.update()})}_handleMouseDown(O){if(this._transforming)return;this._movingAnchorName=O.target.name().split(" ")[0];const M=this._getNodeRect(),L=M.width,H=M.height,D=Math.sqrt(Math.pow(L,2)+Math.pow(H,2));this.sin=Math.abs(H/D),this.cos=Math.abs(L/D),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const B=O.target.getAbsolutePosition(),U=O.target.getStage().getPointerPosition();this._anchorDragOffset={x:U.x-B.x,y:U.y-B.y},T++,this._fire("transformstart",{evt:O.evt,target:this.getNode()}),this._nodes.forEach(G=>{G._fire("transformstart",{evt:O.evt,target:G})})}_handleMouseMove(O){let M,L,H;const D=this.findOne("."+this._movingAnchorName),B=D.getStage();B.setPointersPositions(O);const U=B.getPointerPosition();let G={x:U.x-this._anchorDragOffset.x,y:U.y-this._anchorDragOffset.y};const ee=D.getAbsolutePosition();this.anchorDragBoundFunc()&&(G=this.anchorDragBoundFunc()(ee,G,O)),D.setAbsolutePosition(G);const ne=D.getAbsolutePosition();if(ee.x===ne.x&&ee.y===ne.y)return;if(this._movingAnchorName==="rotater"){const Ee=this._getNodeRect();M=D.x()-Ee.width/2,L=-D.y()+Ee.height/2;let Ae=Math.atan2(-L,M)+Math.PI/2;Ee.height<0&&(Ae-=Math.PI);const me=o.Konva.getAngle(this.rotation())+Ae,Oe=o.Konva.getAngle(this.rotationSnapTolerance()),Ye=w(this.rotationSnaps(),me,Oe)-Ee.rotation,lt=x(Ee,Ye);this._fitNodesInto(lt,O);return}const ue=this.shiftBehavior();let X;ue==="inverted"?X=this.keepRatio()&&!O.shiftKey:ue==="none"?X=this.keepRatio():X=this.keepRatio()||O.shiftKey;var oe=this.centeredScaling()||O.altKey;if(this._movingAnchorName==="top-left"){if(X){var q=oe?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};H=Math.sqrt(Math.pow(q.x-D.x(),2)+Math.pow(q.y-D.y(),2));var te=this.findOne(".top-left").x()>q.x?-1:1,W=this.findOne(".top-left").y()>q.y?-1:1;M=H*this.cos*te,L=H*this.sin*W,this.findOne(".top-left").x(q.x-M),this.findOne(".top-left").y(q.y-L)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(D.y());else if(this._movingAnchorName==="top-right"){if(X){var q=oe?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};H=Math.sqrt(Math.pow(D.x()-q.x,2)+Math.pow(q.y-D.y(),2));var te=this.findOne(".top-right").x()<q.x?-1:1,W=this.findOne(".top-right").y()>q.y?-1:1;M=H*this.cos*te,L=H*this.sin*W,this.findOne(".top-right").x(q.x+M),this.findOne(".top-right").y(q.y-L)}var Z=D.position();this.findOne(".top-left").y(Z.y),this.findOne(".bottom-right").x(Z.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(D.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(D.x());else if(this._movingAnchorName==="bottom-left"){if(X){var q=oe?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};H=Math.sqrt(Math.pow(q.x-D.x(),2)+Math.pow(D.y()-q.y,2));var te=q.x<D.x()?-1:1,W=D.y()<q.y?-1:1;M=H*this.cos*te,L=H*this.sin*W,D.x(q.x-M),D.y(q.y+L)}Z=D.position(),this.findOne(".top-left").x(Z.x),this.findOne(".bottom-right").y(Z.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(D.y());else if(this._movingAnchorName==="bottom-right"){if(X){var q=oe?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};H=Math.sqrt(Math.pow(D.x()-q.x,2)+Math.pow(D.y()-q.y,2));var te=this.findOne(".bottom-right").x()<q.x?-1:1,W=this.findOne(".bottom-right").y()<q.y?-1:1;M=H*this.cos*te,L=H*this.sin*W,this.findOne(".bottom-right").x(q.x+M),this.findOne(".bottom-right").y(q.y+L)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));var oe=this.centeredScaling()||O.altKey;if(oe){const Ee=this.findOne(".top-left"),Ae=this.findOne(".bottom-right"),ge=Ee.x(),me=Ee.y(),Oe=this.getWidth()-Ae.x(),Me=this.getHeight()-Ae.y();Ae.move({x:-ge,y:-me}),Ee.move({x:Oe,y:Me})}const pe=this.findOne(".top-left").getAbsolutePosition();M=pe.x,L=pe.y;const ce=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),he=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:M,y:L,width:ce,height:he,rotation:o.Konva.getAngle(this.rotation())},O)}_handleMouseUp(O){this._removeEvents(O)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(O){var M;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const L=this.getNode();T--,this._fire("transformend",{evt:O,target:L}),(M=this.getLayer())===null||M===void 0||M.batchDraw(),L&&this._nodes.forEach(H=>{var D;H._fire("transformend",{evt:O,target:H}),(D=H.getLayer())===null||D===void 0||D.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(O,M){const L=this._getNodeRect(),H=1;if(e.Util._inRange(O.width,-this.padding()*2-H,H)){this.update();return}if(e.Util._inRange(O.height,-this.padding()*2-H,H)){this.update();return}const D=new e.Transform;if(D.rotate(o.Konva.getAngle(this.rotation())),this._movingAnchorName&&O.width<0&&this._movingAnchorName.indexOf("left")>=0){const X=D.point({x:-this.padding()*2,y:0});O.x+=X.x,O.y+=X.y,O.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=X.x,this._anchorDragOffset.y-=X.y}else if(this._movingAnchorName&&O.width<0&&this._movingAnchorName.indexOf("right")>=0){const X=D.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=X.x,this._anchorDragOffset.y-=X.y,O.width+=this.padding()*2}if(this._movingAnchorName&&O.height<0&&this._movingAnchorName.indexOf("top")>=0){const X=D.point({x:0,y:-this.padding()*2});O.x+=X.x,O.y+=X.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=X.x,this._anchorDragOffset.y-=X.y,O.height+=this.padding()*2}else if(this._movingAnchorName&&O.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const X=D.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=X.x,this._anchorDragOffset.y-=X.y,O.height+=this.padding()*2}if(this.boundBoxFunc()){const X=this.boundBoxFunc()(L,O);X?O=X:e.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const B=1e7,U=new e.Transform;U.translate(L.x,L.y),U.rotate(L.rotation),U.scale(L.width/B,L.height/B);const G=new e.Transform,ee=O.width/B,ne=O.height/B;this.flipEnabled()===!1?(G.translate(O.x,O.y),G.rotate(O.rotation),G.translate(O.width<0?O.width:0,O.height<0?O.height:0),G.scale(Math.abs(ee),Math.abs(ne))):(G.translate(O.x,O.y),G.rotate(O.rotation),G.scale(ee,ne));const ue=G.multiply(U.invert());this._nodes.forEach(X=>{var q;const te=X.getParent().getAbsoluteTransform(),W=X.getTransform().copy();W.translate(X.offsetX(),X.offsetY());const Z=new e.Transform;Z.multiply(te.copy().invert()).multiply(ue).multiply(te).multiply(W);const oe=Z.decompose();X.setAttrs(oe),(q=X.getLayer())===null||q===void 0||q.batchDraw()}),this.rotation(e.Util._getRotation(O.rotation)),this._nodes.forEach(X=>{this._fire("transform",{evt:M,target:X}),X._fire("transform",{evt:M,target:X})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(O,M){this.findOne(O).setAttrs(M)}update(){var O;const M=this._getNodeRect();this.rotation(e.Util._getRotation(M.rotation));const L=M.width,H=M.height,D=this.enabledAnchors(),B=this.resizeEnabled(),U=this.padding(),G=this.anchorSize(),ee=this.find("._anchor");ee.forEach(ue=>{ue.setAttrs({width:G,height:G,offsetX:G/2,offsetY:G/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:G/2+U,offsetY:G/2+U,visible:B&&D.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:L/2,y:0,offsetY:G/2+U,visible:B&&D.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:L,y:0,offsetX:G/2-U,offsetY:G/2+U,visible:B&&D.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:H/2,offsetX:G/2+U,visible:B&&D.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:L,y:H/2,offsetX:G/2-U,visible:B&&D.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:H,offsetX:G/2+U,offsetY:G/2-U,visible:B&&D.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:L/2,y:H,offsetY:G/2-U,visible:B&&D.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:L,y:H,offsetX:G/2-U,offsetY:G/2-U,visible:B&&D.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:L/2,y:-this.rotateAnchorOffset()*e.Util._sign(H)-U,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:L,height:H,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const ne=this.anchorStyleFunc();ne&&ee.forEach(ue=>{ne(ue)}),(O=this.getLayer())===null||O===void 0||O.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const O=this.findOne("."+this._movingAnchorName);O&&O.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),s.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return n.Node.prototype.toObject.call(this)}clone(O){return n.Node.prototype.clone.call(this,O)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}};RA.Transformer=A,A.isTransforming=()=>T>0;function k(I){return I instanceof Array||e.Util.warn("enabledAnchors value should be an array"),I instanceof Array&&I.forEach(function(O){g.indexOf(O)===-1&&e.Util.warn("Unknown anchor name: "+O+". Available names are: "+g.join(", "))}),I||[]}return A.prototype.className="Transformer",(0,u._registerNode)(A),t.Factory.addGetterSetter(A,"enabledAnchors",g,k),t.Factory.addGetterSetter(A,"flipEnabled",!0,(0,a.getBooleanValidator)()),t.Factory.addGetterSetter(A,"resizeEnabled",!0),t.Factory.addGetterSetter(A,"anchorSize",10,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(A,"rotateEnabled",!0),t.Factory.addGetterSetter(A,"rotateLineVisible",!0),t.Factory.addGetterSetter(A,"rotationSnaps",[]),t.Factory.addGetterSetter(A,"rotateAnchorOffset",50,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(A,"rotateAnchorCursor","crosshair"),t.Factory.addGetterSetter(A,"rotationSnapTolerance",5,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(A,"borderEnabled",!0),t.Factory.addGetterSetter(A,"anchorStroke","rgb(0, 161, 255)"),t.Factory.addGetterSetter(A,"anchorStrokeWidth",1,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(A,"anchorFill","white"),t.Factory.addGetterSetter(A,"anchorCornerRadius",0,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(A,"borderStroke","rgb(0, 161, 255)"),t.Factory.addGetterSetter(A,"borderStrokeWidth",1,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(A,"borderDash"),t.Factory.addGetterSetter(A,"keepRatio",!0),t.Factory.addGetterSetter(A,"shiftBehavior","default"),t.Factory.addGetterSetter(A,"centeredScaling",!1),t.Factory.addGetterSetter(A,"ignoreStroke",!1),t.Factory.addGetterSetter(A,"padding",0,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(A,"nodes"),t.Factory.addGetterSetter(A,"node"),t.Factory.addGetterSetter(A,"boundBoxFunc"),t.Factory.addGetterSetter(A,"anchorDragBoundFunc"),t.Factory.addGetterSetter(A,"anchorStyleFunc"),t.Factory.addGetterSetter(A,"shouldOverdrawWholeArea",!1),t.Factory.addGetterSetter(A,"useSingleNodeRotation",!0),t.Factory.backCompat(A,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"}),RA}var IA={},gle;function h1t(){if(gle)return IA;gle=1,Object.defineProperty(IA,"__esModule",{value:!0}),IA.Wedge=void 0;const e=Yr(),t=Hu(),n=Vr(),r=Zr(),i=Vr();let s=class extends t.Shape{_sceneFunc(a){a.beginPath(),a.arc(0,0,this.radius(),0,n.Konva.getAngle(this.angle()),this.clockwise()),a.lineTo(0,0),a.closePath(),a.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(a){this.radius(a/2)}setHeight(a){this.radius(a/2)}};return IA.Wedge=s,s.prototype.className="Wedge",s.prototype._centroid=!0,s.prototype._attrsAffectingSize=["radius"],(0,i._registerNode)(s),e.Factory.addGetterSetter(s,"radius",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(s,"angle",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(s,"clockwise",!1),e.Factory.backCompat(s,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"}),IA}var PA={},yle;function p1t(){if(yle)return PA;yle=1,Object.defineProperty(PA,"__esModule",{value:!0}),PA.Blur=void 0;const e=Yr(),t=_a(),n=Zr();function r(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const i=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],s=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function o(u,l){const c=u.data,f=u.width,d=u.height;let h,p,m,g,b,y,x,w,T,A,k,I,O,M,L,H,D,B,U,G,ee,ne,ue,X;const q=l+l+1,te=f-1,W=d-1,Z=l+1,oe=Z*(Z+1)/2,pe=new r,ce=i[l],he=s[l];let Ee=null,Ae=pe,ge=null,me=null;for(m=1;m<q;m++)Ae=Ae.next=new r,m===Z&&(Ee=Ae);for(Ae.next=pe,x=y=0,p=0;p<d;p++){for(H=D=B=U=w=T=A=k=0,I=Z*(G=c[y]),O=Z*(ee=c[y+1]),M=Z*(ne=c[y+2]),L=Z*(ue=c[y+3]),w+=oe*G,T+=oe*ee,A+=oe*ne,k+=oe*ue,Ae=pe,m=0;m<Z;m++)Ae.r=G,Ae.g=ee,Ae.b=ne,Ae.a=ue,Ae=Ae.next;for(m=1;m<Z;m++)g=y+((te<m?te:m)<<2),w+=(Ae.r=G=c[g])*(X=Z-m),T+=(Ae.g=ee=c[g+1])*X,A+=(Ae.b=ne=c[g+2])*X,k+=(Ae.a=ue=c[g+3])*X,H+=G,D+=ee,B+=ne,U+=ue,Ae=Ae.next;for(ge=pe,me=Ee,h=0;h<f;h++)c[y+3]=ue=k*ce>>he,ue!==0?(ue=255/ue,c[y]=(w*ce>>he)*ue,c[y+1]=(T*ce>>he)*ue,c[y+2]=(A*ce>>he)*ue):c[y]=c[y+1]=c[y+2]=0,w-=I,T-=O,A-=M,k-=L,I-=ge.r,O-=ge.g,M-=ge.b,L-=ge.a,g=x+((g=h+l+1)<te?g:te)<<2,H+=ge.r=c[g],D+=ge.g=c[g+1],B+=ge.b=c[g+2],U+=ge.a=c[g+3],w+=H,T+=D,A+=B,k+=U,ge=ge.next,I+=G=me.r,O+=ee=me.g,M+=ne=me.b,L+=ue=me.a,H-=G,D-=ee,B-=ne,U-=ue,me=me.next,y+=4;x+=f}for(h=0;h<f;h++){for(D=B=U=H=T=A=k=w=0,y=h<<2,I=Z*(G=c[y]),O=Z*(ee=c[y+1]),M=Z*(ne=c[y+2]),L=Z*(ue=c[y+3]),w+=oe*G,T+=oe*ee,A+=oe*ne,k+=oe*ue,Ae=pe,m=0;m<Z;m++)Ae.r=G,Ae.g=ee,Ae.b=ne,Ae.a=ue,Ae=Ae.next;for(b=f,m=1;m<=l;m++)y=b+h<<2,w+=(Ae.r=G=c[y])*(X=Z-m),T+=(Ae.g=ee=c[y+1])*X,A+=(Ae.b=ne=c[y+2])*X,k+=(Ae.a=ue=c[y+3])*X,H+=G,D+=ee,B+=ne,U+=ue,Ae=Ae.next,m<W&&(b+=f);for(y=h,ge=pe,me=Ee,p=0;p<d;p++)g=y<<2,c[g+3]=ue=k*ce>>he,ue>0?(ue=255/ue,c[g]=(w*ce>>he)*ue,c[g+1]=(T*ce>>he)*ue,c[g+2]=(A*ce>>he)*ue):c[g]=c[g+1]=c[g+2]=0,w-=I,T-=O,A-=M,k-=L,I-=ge.r,O-=ge.g,M-=ge.b,L-=ge.a,g=h+((g=p+Z)<W?g:W)*f<<2,w+=H+=ge.r=c[g],T+=D+=ge.g=c[g+1],A+=B+=ge.b=c[g+2],k+=U+=ge.a=c[g+3],ge=ge.next,I+=G=me.r,O+=ee=me.g,M+=ne=me.b,L+=ue=me.a,H-=G,D-=ee,B-=ne,U-=ue,me=me.next,y+=f}}const a=function(l){const c=Math.round(this.blurRadius());c>0&&o(l,c)};return PA.Blur=a,e.Factory.addGetterSetter(t.Node,"blurRadius",0,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),PA}var NA={},vle;function m1t(){if(vle)return NA;vle=1,Object.defineProperty(NA,"__esModule",{value:!0}),NA.Brighten=void 0;const e=Yr(),t=_a(),n=Zr(),r=function(i){const s=this.brightness()*255,o=i.data,a=o.length;for(let u=0;u<a;u+=4)o[u]+=s,o[u+1]+=s,o[u+2]+=s};return NA.Brighten=r,e.Factory.addGetterSetter(t.Node,"brightness",0,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),NA}var DA={},ble;function g1t(){if(ble)return DA;ble=1,Object.defineProperty(DA,"__esModule",{value:!0}),DA.Contrast=void 0;const e=Yr(),t=_a(),n=Zr(),r=function(i){const s=Math.pow((this.contrast()+100)/100,2),o=i.data,a=o.length;let u=150,l=150,c=150;for(let f=0;f<a;f+=4)u=o[f],l=o[f+1],c=o[f+2],u/=255,u-=.5,u*=s,u+=.5,u*=255,l/=255,l-=.5,l*=s,l+=.5,l*=255,c/=255,c-=.5,c*=s,c+=.5,c*=255,u=u<0?0:u>255?255:u,l=l<0?0:l>255?255:l,c=c<0?0:c>255?255:c,o[f]=u,o[f+1]=l,o[f+2]=c};return DA.Contrast=r,e.Factory.addGetterSetter(t.Node,"contrast",0,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),DA}var OA={},xle;function y1t(){if(xle)return OA;xle=1,Object.defineProperty(OA,"__esModule",{value:!0}),OA.Emboss=void 0;const e=Yr(),t=_a(),n=Xo(),r=Zr(),i=function(s){const o=this.embossStrength()*10,a=this.embossWhiteLevel()*255,u=this.embossDirection(),l=this.embossBlend(),c=s.data,f=s.width,d=s.height,h=f*4;let p=0,m=0,g=d;switch(u){case"top-left":p=-1,m=-1;break;case"top":p=-1,m=0;break;case"top-right":p=-1,m=1;break;case"right":p=0,m=1;break;case"bottom-right":p=1,m=1;break;case"bottom":p=1,m=0;break;case"bottom-left":p=1,m=-1;break;case"left":p=0,m=-1;break;default:n.Util.error("Unknown emboss direction: "+u)}do{const b=(g-1)*h;let y=p;g+y<1&&(y=0),g+y>d&&(y=0);const x=(g-1+y)*f*4;let w=f;do{const T=b+(w-1)*4;let A=m;w+A<1&&(A=0),w+A>f&&(A=0);const k=x+(w-1+A)*4,I=c[T]-c[k],O=c[T+1]-c[k+1],M=c[T+2]-c[k+2];let L=I;const H=L>0?L:-L,D=O>0?O:-O,B=M>0?M:-M;if(D>H&&(L=O),B>H&&(L=M),L*=o,l){const U=c[T]+L,G=c[T+1]+L,ee=c[T+2]+L;c[T]=U>255?255:U<0?0:U,c[T+1]=G>255?255:G<0?0:G,c[T+2]=ee>255?255:ee<0?0:ee}else{let U=a-L;U<0?U=0:U>255&&(U=255),c[T]=c[T+1]=c[T+2]=U}}while(--w)}while(--g)};return OA.Emboss=i,e.Factory.addGetterSetter(t.Node,"embossStrength",.5,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"embossWhiteLevel",.5,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"embossDirection","top-left",void 0,e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"embossBlend",!1,void 0,e.Factory.afterSetFilter),OA}var MA={},_le;function v1t(){if(_le)return MA;_le=1,Object.defineProperty(MA,"__esModule",{value:!0}),MA.Enhance=void 0;const e=Yr(),t=_a(),n=Zr();function r(s,o,a,u,l){const c=a-o,f=l-u;if(c===0)return u+f/2;if(f===0)return u;let d=(s-o)/c;return d=f*d+u,d}const i=function(s){const o=s.data,a=o.length;let u=o[0],l=u,c,f=o[1],d=f,h,p=o[2],m=p,g;const b=this.enhance();if(b===0)return;for(let L=0;L<a;L+=4)c=o[L+0],c<u?u=c:c>l&&(l=c),h=o[L+1],h<f?f=h:h>d&&(d=h),g=o[L+2],g<p?p=g:g>m&&(m=g);l===u&&(l=255,u=0),d===f&&(d=255,f=0),m===p&&(m=255,p=0);let y,x,w,T,A,k,I,O,M;b>0?(x=l+b*(255-l),w=u-b*(u-0),A=d+b*(255-d),k=f-b*(f-0),O=m+b*(255-m),M=p-b*(p-0)):(y=(l+u)*.5,x=l+b*(l-y),w=u+b*(u-y),T=(d+f)*.5,A=d+b*(d-T),k=f+b*(f-T),I=(m+p)*.5,O=m+b*(m-I),M=p+b*(p-I));for(let L=0;L<a;L+=4)o[L+0]=r(o[L+0],u,l,w,x),o[L+1]=r(o[L+1],f,d,k,A),o[L+2]=r(o[L+2],p,m,M,O)};return MA.Enhance=i,e.Factory.addGetterSetter(t.Node,"enhance",0,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),MA}var LA={},wle;function b1t(){if(wle)return LA;wle=1,Object.defineProperty(LA,"__esModule",{value:!0}),LA.Grayscale=void 0;const e=function(t){const n=t.data,r=n.length;for(let i=0;i<r;i+=4){const s=.34*n[i]+.5*n[i+1]+.16*n[i+2];n[i]=s,n[i+1]=s,n[i+2]=s}};return LA.Grayscale=e,LA}var FA={},Ele;function x1t(){if(Ele)return FA;Ele=1,Object.defineProperty(FA,"__esModule",{value:!0}),FA.HSL=void 0;const e=Yr(),t=_a(),n=Zr();e.Factory.addGetterSetter(t.Node,"hue",0,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"saturation",0,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"luminance",0,(0,n.getNumberValidator)(),e.Factory.afterSetFilter);const r=function(i){const s=i.data,o=s.length,a=1,u=Math.pow(2,this.saturation()),l=Math.abs(this.hue()+360)%360,c=this.luminance()*127,f=a*u*Math.cos(l*Math.PI/180),d=a*u*Math.sin(l*Math.PI/180),h=.299*a+.701*f+.167*d,p=.587*a-.587*f+.33*d,m=.114*a-.114*f-.497*d,g=.299*a-.299*f-.328*d,b=.587*a+.413*f+.035*d,y=.114*a-.114*f+.293*d,x=.299*a-.3*f+1.25*d,w=.587*a-.586*f-1.05*d,T=.114*a+.886*f-.2*d;let A,k,I,O;for(let M=0;M<o;M+=4)A=s[M+0],k=s[M+1],I=s[M+2],O=s[M+3],s[M+0]=h*A+p*k+m*I+c,s[M+1]=g*A+b*k+y*I+c,s[M+2]=x*A+w*k+T*I+c,s[M+3]=O};return FA.HSL=r,FA}var $A={},Sle;function _1t(){if(Sle)return $A;Sle=1,Object.defineProperty($A,"__esModule",{value:!0}),$A.HSV=void 0;const e=Yr(),t=_a(),n=Zr(),r=function(i){const s=i.data,o=s.length,a=Math.pow(2,this.value()),u=Math.pow(2,this.saturation()),l=Math.abs(this.hue()+360)%360,c=a*u*Math.cos(l*Math.PI/180),f=a*u*Math.sin(l*Math.PI/180),d=.299*a+.701*c+.167*f,h=.587*a-.587*c+.33*f,p=.114*a-.114*c-.497*f,m=.299*a-.299*c-.328*f,g=.587*a+.413*c+.035*f,b=.114*a-.114*c+.293*f,y=.299*a-.3*c+1.25*f,x=.587*a-.586*c-1.05*f,w=.114*a+.886*c-.2*f;let T,A,k,I;for(let O=0;O<o;O+=4)T=s[O+0],A=s[O+1],k=s[O+2],I=s[O+3],s[O+0]=d*T+h*A+p*k,s[O+1]=m*T+g*A+b*k,s[O+2]=y*T+x*A+w*k,s[O+3]=I};return $A.HSV=r,e.Factory.addGetterSetter(t.Node,"hue",0,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"saturation",0,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"value",0,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),$A}var BA={},Tle;function w1t(){if(Tle)return BA;Tle=1,Object.defineProperty(BA,"__esModule",{value:!0}),BA.Invert=void 0;const e=function(t){const n=t.data,r=n.length;for(let i=0;i<r;i+=4)n[i]=255-n[i],n[i+1]=255-n[i+1],n[i+2]=255-n[i+2]};return BA.Invert=e,BA}var jA={},Cle;function E1t(){if(Cle)return jA;Cle=1,Object.defineProperty(jA,"__esModule",{value:!0}),jA.Kaleidoscope=void 0;const e=Yr(),t=_a(),n=Xo(),r=Zr(),i=function(a,u,l){const c=a.data,f=u.data,d=a.width,h=a.height,p=l.polarCenterX||d/2,m=l.polarCenterY||h/2;let g=Math.sqrt(p*p+m*m),b=d-p,y=h-m;const x=Math.sqrt(b*b+y*y);g=x>g?x:g;const w=h,T=d,A=360/T*Math.PI/180;for(let k=0;k<T;k+=1){const I=Math.sin(k*A),O=Math.cos(k*A);for(let M=0;M<w;M+=1){b=Math.floor(p+g*M/w*O),y=Math.floor(m+g*M/w*I);let L=(y*d+b)*4;const H=c[L+0],D=c[L+1],B=c[L+2],U=c[L+3];L=(k+M*d)*4,f[L+0]=H,f[L+1]=D,f[L+2]=B,f[L+3]=U}}},s=function(a,u,l){const c=a.data,f=u.data,d=a.width,h=a.height,p=l.polarCenterX||d/2,m=l.polarCenterY||h/2;let g=Math.sqrt(p*p+m*m),b=d-p,y=h-m;const x=Math.sqrt(b*b+y*y);g=x>g?x:g;const w=h,T=d,A=0;let k,I;for(b=0;b<d;b+=1)for(y=0;y<h;y+=1){const O=b-p,M=y-m,L=Math.sqrt(O*O+M*M)*w/g;let H=(Math.atan2(M,O)*180/Math.PI+360+A)%360;H=H*T/360,k=Math.floor(H),I=Math.floor(L);let D=(I*d+k)*4;const B=c[D+0],U=c[D+1],G=c[D+2],ee=c[D+3];D=(y*d+b)*4,f[D+0]=B,f[D+1]=U,f[D+2]=G,f[D+3]=ee}},o=function(a){const u=a.width,l=a.height;let c,f,d,h,p,m,g,b,y,x,w=Math.round(this.kaleidoscopePower());const T=Math.round(this.kaleidoscopeAngle()),A=Math.floor(u*(T%360)/360);if(w<1)return;const k=n.Util.createCanvasElement();k.width=u,k.height=l;const I=k.getContext("2d").getImageData(0,0,u,l);n.Util.releaseCanvas(k),i(a,I,{polarCenterX:u/2,polarCenterY:l/2});let O=u/Math.pow(2,w);for(;O<=8;)O=O*2,w-=1;O=Math.ceil(O);let M=O,L=0,H=M,D=1;for(A+O>u&&(L=M,H=0,D=-1),f=0;f<l;f+=1)for(c=L;c!==H;c+=D)d=Math.round(c+A)%u,y=(u*f+d)*4,p=I.data[y+0],m=I.data[y+1],g=I.data[y+2],b=I.data[y+3],x=(u*f+c)*4,I.data[x+0]=p,I.data[x+1]=m,I.data[x+2]=g,I.data[x+3]=b;for(f=0;f<l;f+=1)for(M=Math.floor(O),h=0;h<w;h+=1){for(c=0;c<M+1;c+=1)y=(u*f+c)*4,p=I.data[y+0],m=I.data[y+1],g=I.data[y+2],b=I.data[y+3],x=(u*f+M*2-c-1)*4,I.data[x+0]=p,I.data[x+1]=m,I.data[x+2]=g,I.data[x+3]=b;M*=2}s(I,a,{polarRotation:0})};return jA.Kaleidoscope=o,e.Factory.addGetterSetter(t.Node,"kaleidoscopePower",2,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"kaleidoscopeAngle",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),jA}var UA={},Ale;function S1t(){if(Ale)return UA;Ale=1,Object.defineProperty(UA,"__esModule",{value:!0}),UA.Mask=void 0;const e=Yr(),t=_a(),n=Zr();function r(d,h,p){let m=(p*d.width+h)*4;const g=[];return g.push(d.data[m++],d.data[m++],d.data[m++],d.data[m++]),g}function i(d,h){return Math.sqrt(Math.pow(d[0]-h[0],2)+Math.pow(d[1]-h[1],2)+Math.pow(d[2]-h[2],2))}function s(d){const h=[0,0,0];for(let p=0;p<d.length;p++)h[0]+=d[p][0],h[1]+=d[p][1],h[2]+=d[p][2];return h[0]/=d.length,h[1]/=d.length,h[2]/=d.length,h}function o(d,h){const p=r(d,0,0),m=r(d,d.width-1,0),g=r(d,0,d.height-1),b=r(d,d.width-1,d.height-1),y=h||10;if(i(p,m)<y&&i(m,b)<y&&i(b,g)<y&&i(g,p)<y){const x=s([m,p,b,g]),w=[];for(let T=0;T<d.width*d.height;T++){const A=i(x,[d.data[T*4],d.data[T*4+1],d.data[T*4+2]]);w[T]=A<y?0:255}return w}}function a(d,h){for(let p=0;p<d.width*d.height;p++)d.data[4*p+3]=h[p]}function u(d,h,p){const m=[1,1,1,1,0,1,1,1,1],g=Math.round(Math.sqrt(m.length)),b=Math.floor(g/2),y=[];for(let x=0;x<p;x++)for(let w=0;w<h;w++){const T=x*h+w;let A=0;for(let k=0;k<g;k++)for(let I=0;I<g;I++){const O=x+k-b,M=w+I-b;if(O>=0&&O<p&&M>=0&&M<h){const L=O*h+M,H=m[k*g+I];A+=d[L]*H}}y[T]=A===255*8?255:0}return y}function l(d,h,p){const m=[1,1,1,1,1,1,1,1,1],g=Math.round(Math.sqrt(m.length)),b=Math.floor(g/2),y=[];for(let x=0;x<p;x++)for(let w=0;w<h;w++){const T=x*h+w;let A=0;for(let k=0;k<g;k++)for(let I=0;I<g;I++){const O=x+k-b,M=w+I-b;if(O>=0&&O<p&&M>=0&&M<h){const L=O*h+M,H=m[k*g+I];A+=d[L]*H}}y[T]=A>=255*4?255:0}return y}function c(d,h,p){const m=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],g=Math.round(Math.sqrt(m.length)),b=Math.floor(g/2),y=[];for(let x=0;x<p;x++)for(let w=0;w<h;w++){const T=x*h+w;let A=0;for(let k=0;k<g;k++)for(let I=0;I<g;I++){const O=x+k-b,M=w+I-b;if(O>=0&&O<p&&M>=0&&M<h){const L=O*h+M,H=m[k*g+I];A+=d[L]*H}}y[T]=A}return y}const f=function(d){const h=this.threshold();let p=o(d,h);return p&&(p=u(p,d.width,d.height),p=l(p,d.width,d.height),p=c(p,d.width,d.height),a(d,p)),d};return UA.Mask=f,e.Factory.addGetterSetter(t.Node,"threshold",0,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),UA}var zA={},kle;function T1t(){if(kle)return zA;kle=1,Object.defineProperty(zA,"__esModule",{value:!0}),zA.Noise=void 0;const e=Yr(),t=_a(),n=Zr(),r=function(i){const s=this.noise()*255,o=i.data,a=o.length,u=s/2;for(let l=0;l<a;l+=4)o[l+0]+=u-2*u*Math.random(),o[l+1]+=u-2*u*Math.random(),o[l+2]+=u-2*u*Math.random()};return zA.Noise=r,e.Factory.addGetterSetter(t.Node,"noise",.2,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),zA}var VA={},Rle;function C1t(){if(Rle)return VA;Rle=1,Object.defineProperty(VA,"__esModule",{value:!0}),VA.Pixelate=void 0;const e=Yr(),t=Xo(),n=_a(),r=Zr(),i=function(s){let o=Math.ceil(this.pixelSize()),a=s.width,u=s.height,l,c,f,d,h,p,m,g=Math.ceil(a/o),b=Math.ceil(u/o),y,x,w,T,A,k,I,O=s.data;if(o<=0){t.Util.error("pixelSize value can not be <= 0");return}for(A=0;A<g;A+=1)for(k=0;k<b;k+=1){for(d=0,h=0,p=0,m=0,y=A*o,x=y+o,w=k*o,T=w+o,I=0,l=y;l<x;l+=1)if(!(l>=a))for(c=w;c<T;c+=1)c>=u||(f=(a*c+l)*4,d+=O[f+0],h+=O[f+1],p+=O[f+2],m+=O[f+3],I+=1);for(d=d/I,h=h/I,p=p/I,m=m/I,l=y;l<x;l+=1)if(!(l>=a))for(c=w;c<T;c+=1)c>=u||(f=(a*c+l)*4,O[f+0]=d,O[f+1]=h,O[f+2]=p,O[f+3]=m)}};return VA.Pixelate=i,e.Factory.addGetterSetter(n.Node,"pixelSize",8,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),VA}var HA={},Ile;function A1t(){if(Ile)return HA;Ile=1,Object.defineProperty(HA,"__esModule",{value:!0}),HA.Posterize=void 0;const e=Yr(),t=_a(),n=Zr(),r=function(i){const s=Math.round(this.levels()*254)+1,o=i.data,a=o.length,u=255/s;for(let l=0;l<a;l+=1)o[l]=Math.floor(o[l]/u)*u};return HA.Posterize=r,e.Factory.addGetterSetter(t.Node,"levels",.5,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),HA}var qA={},Ple;function k1t(){if(Ple)return qA;Ple=1,Object.defineProperty(qA,"__esModule",{value:!0}),qA.RGB=void 0;const e=Yr(),t=_a(),n=Zr(),r=function(i){const s=i.data,o=s.length,a=this.red(),u=this.green(),l=this.blue();for(let c=0;c<o;c+=4){const f=(.34*s[c]+.5*s[c+1]+.16*s[c+2])/255;s[c]=f*a,s[c+1]=f*u,s[c+2]=f*l,s[c+3]=s[c+3]}};return qA.RGB=r,e.Factory.addGetterSetter(t.Node,"red",0,function(i){return this._filterUpToDate=!1,i>255?255:i<0?0:Math.round(i)}),e.Factory.addGetterSetter(t.Node,"green",0,function(i){return this._filterUpToDate=!1,i>255?255:i<0?0:Math.round(i)}),e.Factory.addGetterSetter(t.Node,"blue",0,n.RGBComponent,e.Factory.afterSetFilter),qA}var WA={},Nle;function R1t(){if(Nle)return WA;Nle=1,Object.defineProperty(WA,"__esModule",{value:!0}),WA.RGBA=void 0;const e=Yr(),t=_a(),n=Zr(),r=function(i){const s=i.data,o=s.length,a=this.red(),u=this.green(),l=this.blue(),c=this.alpha();for(let f=0;f<o;f+=4){const d=1-c;s[f]=a*c+s[f]*d,s[f+1]=u*c+s[f+1]*d,s[f+2]=l*c+s[f+2]*d}};return WA.RGBA=r,e.Factory.addGetterSetter(t.Node,"red",0,function(i){return this._filterUpToDate=!1,i>255?255:i<0?0:Math.round(i)}),e.Factory.addGetterSetter(t.Node,"green",0,function(i){return this._filterUpToDate=!1,i>255?255:i<0?0:Math.round(i)}),e.Factory.addGetterSetter(t.Node,"blue",0,n.RGBComponent,e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"alpha",1,function(i){return this._filterUpToDate=!1,i>1?1:i<0?0:i}),WA}var GA={},Dle;function I1t(){if(Dle)return GA;Dle=1,Object.defineProperty(GA,"__esModule",{value:!0}),GA.Sepia=void 0;const e=function(t){const n=t.data,r=n.length;for(let i=0;i<r;i+=4){const s=n[i+0],o=n[i+1],a=n[i+2];n[i+0]=Math.min(255,s*.393+o*.769+a*.189),n[i+1]=Math.min(255,s*.349+o*.686+a*.168),n[i+2]=Math.min(255,s*.272+o*.534+a*.131)}};return GA.Sepia=e,GA}var YA={},Ole;function P1t(){if(Ole)return YA;Ole=1,Object.defineProperty(YA,"__esModule",{value:!0}),YA.Solarize=void 0;const e=function(t){const n=t.data,r=t.width,i=t.height,s=r*4;let o=i;do{const a=(o-1)*s;let u=r;do{const l=a+(u-1)*4;let c=n[l],f=n[l+1],d=n[l+2];c>127&&(c=255-c),f>127&&(f=255-f),d>127&&(d=255-d),n[l]=c,n[l+1]=f,n[l+2]=d}while(--u)}while(--o)};return YA.Solarize=e,YA}var KA={},Mle;function N1t(){if(Mle)return KA;Mle=1,Object.defineProperty(KA,"__esModule",{value:!0}),KA.Threshold=void 0;const e=Yr(),t=_a(),n=Zr(),r=function(i){const s=this.threshold()*255,o=i.data,a=o.length;for(let u=0;u<a;u+=1)o[u]=o[u]<s?0:255};return KA.Threshold=r,e.Factory.addGetterSetter(t.Node,"threshold",.5,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),KA}var Lle;function D1t(){if(Lle)return lA;Lle=1,Object.defineProperty(lA,"__esModule",{value:!0}),lA.Konva=void 0;const e=tV(),t=e1t(),n=n1t(),r=r1t(),i=i1t(),s=s1t(),o=o1t(),a=vSe(),u=BK(),l=bSe(),c=a1t(),f=u1t(),d=l1t(),h=c1t(),p=xSe(),m=f1t(),g=d1t(),b=h1t(),y=p1t(),x=m1t(),w=g1t(),T=y1t(),A=v1t(),k=b1t(),I=x1t(),O=_1t(),M=w1t(),L=E1t(),H=S1t(),D=T1t(),B=C1t(),U=A1t(),G=k1t(),ee=R1t(),ne=I1t(),ue=P1t(),X=N1t();return lA.Konva=e.Konva.Util._assign(e.Konva,{Arc:t.Arc,Arrow:n.Arrow,Circle:r.Circle,Ellipse:i.Ellipse,Image:s.Image,Label:o.Label,Tag:o.Tag,Line:a.Line,Path:u.Path,Rect:l.Rect,RegularPolygon:c.RegularPolygon,Ring:f.Ring,Sprite:d.Sprite,Star:h.Star,Text:p.Text,TextPath:m.TextPath,Transformer:g.Transformer,Wedge:b.Wedge,Filters:{Blur:y.Blur,Brighten:x.Brighten,Contrast:w.Contrast,Emboss:T.Emboss,Enhance:A.Enhance,Grayscale:k.Grayscale,HSL:I.HSL,HSV:O.HSV,Invert:M.Invert,Kaleidoscope:L.Kaleidoscope,Mask:H.Mask,Noise:D.Noise,Pixelate:B.Pixelate,Posterize:U.Posterize,RGB:G.RGB,RGBA:ee.RGBA,Sepia:ne.Sepia,Solarize:ue.Solarize,Threshold:X.Threshold}}),lA}var O1t=S8.exports,Fle;function M1t(){if(Fle)return S8.exports;Fle=1,Object.defineProperty(O1t,"__esModule",{value:!0});const e=D1t();return S8.exports=e.Konva,S8.exports}M1t();var G6={exports:{}},$le;function L1t(){return $le||($le=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Konva=void 0;var n=tV();Object.defineProperty(t,"Konva",{enumerable:!0,get:function(){return n.Konva}});const r=tV();e.exports=r.Konva}(G6,G6.exports)),G6.exports}var F1t=L1t();const E4=hc(F1t);var aB={exports:{}};/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uB,Ble;function $1t(){return Ble||(Ble=1,uB=function(t){var n={},r=C1(),i=rq(),s=Object.assign;function o(S){for(var C="https://reactjs.org/docs/error-decoder.html?invariant="+S,$=1;$<arguments.length;$++)C+="&args[]="+encodeURIComponent(arguments[$]);return"Minified React error #"+S+"; visit "+C+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,u=Symbol.for("react.element"),l=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),h=Symbol.for("react.provider"),p=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),b=Symbol.for("react.suspense_list"),y=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),w=Symbol.for("react.offscreen"),T=Symbol.iterator;function A(S){return S===null||typeof S!="object"?null:(S=T&&S[T]||S["@@iterator"],typeof S=="function"?S:null)}function k(S){if(S==null)return null;if(typeof S=="function")return S.displayName||S.name||null;if(typeof S=="string")return S;switch(S){case c:return"Fragment";case l:return"Portal";case d:return"Profiler";case f:return"StrictMode";case g:return"Suspense";case b:return"SuspenseList"}if(typeof S=="object")switch(S.$$typeof){case p:return(S.displayName||"Context")+".Consumer";case h:return(S._context.displayName||"Context")+".Provider";case m:var C=S.render;return S=S.displayName,S||(S=C.displayName||C.name||"",S=S!==""?"ForwardRef("+S+")":"ForwardRef"),S;case y:return C=S.displayName||null,C!==null?C:k(S.type)||"Memo";case x:C=S._payload,S=S._init;try{return k(S(C))}catch{}}return null}function I(S){var C=S.type;switch(S.tag){case 24:return"Cache";case 9:return(C.displayName||"Context")+".Consumer";case 10:return(C._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return S=C.render,S=S.displayName||S.name||"",C.displayName||(S!==""?"ForwardRef("+S+")":"ForwardRef");case 7:return"Fragment";case 5:return C;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return k(C);case 8:return C===f?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof C=="function")return C.displayName||C.name||null;if(typeof C=="string")return C}return null}function O(S){var C=S,$=S;if(S.alternate)for(;C.return;)C=C.return;else{S=C;do C=S,C.flags&4098&&($=C.return),S=C.return;while(S)}return C.tag===3?$:null}function M(S){if(O(S)!==S)throw Error(o(188))}function L(S){var C=S.alternate;if(!C){if(C=O(S),C===null)throw Error(o(188));return C!==S?null:S}for(var $=S,Y=C;;){var J=$.return;if(J===null)break;var ae=J.alternate;if(ae===null){if(Y=J.return,Y!==null){$=Y;continue}break}if(J.child===ae.child){for(ae=J.child;ae;){if(ae===$)return M(J),S;if(ae===Y)return M(J),C;ae=ae.sibling}throw Error(o(188))}if($.return!==Y.return)$=J,Y=ae;else{for(var xe=!1,Ve=J.child;Ve;){if(Ve===$){xe=!0,$=J,Y=ae;break}if(Ve===Y){xe=!0,Y=J,$=ae;break}Ve=Ve.sibling}if(!xe){for(Ve=ae.child;Ve;){if(Ve===$){xe=!0,$=ae,Y=J;break}if(Ve===Y){xe=!0,Y=ae,$=J;break}Ve=Ve.sibling}if(!xe)throw Error(o(189))}}if($.alternate!==Y)throw Error(o(190))}if($.tag!==3)throw Error(o(188));return $.stateNode.current===$?S:C}function H(S){return S=L(S),S!==null?D(S):null}function D(S){if(S.tag===5||S.tag===6)return S;for(S=S.child;S!==null;){var C=D(S);if(C!==null)return C;S=S.sibling}return null}function B(S){if(S.tag===5||S.tag===6)return S;for(S=S.child;S!==null;){if(S.tag!==4){var C=B(S);if(C!==null)return C}S=S.sibling}return null}var U=Array.isArray,G=t.getPublicInstance,ee=t.getRootHostContext,ne=t.getChildHostContext,ue=t.prepareForCommit,X=t.resetAfterCommit,q=t.createInstance,te=t.appendInitialChild,W=t.finalizeInitialChildren,Z=t.prepareUpdate,oe=t.shouldSetTextContent,pe=t.createTextInstance,ce=t.scheduleTimeout,he=t.cancelTimeout,Ee=t.noTimeout,Ae=t.isPrimaryRenderer,ge=t.supportsMutation,me=t.supportsPersistence,Oe=t.supportsHydration,Me=t.getInstanceFromNode,Ye=t.preparePortalMount,lt=t.getCurrentEventPriority,We=t.detachDeletedInstance,nt=t.supportsMicrotasks,yt=t.scheduleMicrotask,_t=t.supportsTestSelectors,Rt=t.findFiberRoot,Et=t.getBoundingRect,Ke=t.getTextContent,Lt=t.isHiddenSubtree,sn=t.matchAccessibilityRole,Fe=t.setFocusIfFocusable,Qe=t.setupIntersectionObserver,wt=t.appendChild,Vt=t.appendChildToContainer,Wt=t.commitTextUpdate,bn=t.commitMount,Nn=t.commitUpdate,Zn=t.insertBefore,wr=t.insertInContainerBefore,Hn=t.removeChild,nr=t.removeChildFromContainer,Ei=t.resetTextContent,Dr=t.hideInstance,Co=t.hideTextInstance,Ji=t.unhideInstance,Di=t.unhideTextInstance,Zi=t.clearContainer,ei=t.cloneInstance,po=t.createContainerChildSet,Wu=t.appendChildToContainerChildSet,Ea=t.finalizeContainerChildren,Sa=t.replaceContainerChildren,Kr=t.cloneHiddenInstance,Oi=t.cloneHiddenTextInstance,si=t.canHydrateInstance,Js=t.canHydrateTextInstance,Xr=t.canHydrateSuspenseInstance,Hi=t.isSuspenseInstancePending,Zs=t.isSuspenseInstanceFallback,mo=t.getSuspenseInstanceFallbackErrorDetails,Qo=t.registerSuspenseInstanceRetry,Ta=t.getNextHydratableSibling,dd=t.getFirstHydratableChild,Hr=t.getFirstHydratableChildWithinContainer,Rl=t.getFirstHydratableChildWithinSuspenseInstance,bs=t.hydrateInstance,Ya=t.hydrateTextInstance,Jo=t.hydrateSuspenseInstance,mh=t.getNextHydratableInstanceAfterSuspenseInstance,hd=t.commitHydratedContainer,df=t.commitHydratedSuspenseInstance,hf=t.clearSuspenseBoundary,yc=t.clearSuspenseBoundaryFromContainer,vc=t.shouldDeleteUnhydratedTailInstances,bc=t.didNotMatchHydratedContainerTextInstance,Er=t.didNotMatchHydratedTextInstance,xc;function xs(S){if(xc===void 0)try{throw Error()}catch($){var C=$.stack.trim().match(/\n( *(at )?)/);xc=C&&C[1]||""}return`
`+xc+S}var Ka=!1;function As(S,C){if(!S||Ka)return"";Ka=!0;var $=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(C)if(C=function(){throw Error()},Object.defineProperty(C.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(C,[])}catch(Ft){var Y=Ft}Reflect.construct(S,[],C)}else{try{C.call()}catch(Ft){Y=Ft}S.call(C.prototype)}else{try{throw Error()}catch(Ft){Y=Ft}S()}}catch(Ft){if(Ft&&Y&&typeof Ft.stack=="string"){for(var J=Ft.stack.split(`
`),ae=Y.stack.split(`
`),xe=J.length-1,Ve=ae.length-1;1<=xe&&0<=Ve&&J[xe]!==ae[Ve];)Ve--;for(;1<=xe&&0<=Ve;xe--,Ve--)if(J[xe]!==ae[Ve]){if(xe!==1||Ve!==1)do if(xe--,Ve--,0>Ve||J[xe]!==ae[Ve]){var at=`
`+J[xe].replace(" at new "," at ");return S.displayName&&at.includes("<anonymous>")&&(at=at.replace("<anonymous>",S.displayName)),at}while(1<=xe&&0<=Ve);break}}}finally{Ka=!1,Error.prepareStackTrace=$}return(S=S?S.displayName||S.name:"")?xs(S):""}var Il=Object.prototype.hasOwnProperty,_c=[],Zo=-1;function qi(S){return{current:S}}function ti(S){0>Zo||(S.current=_c[Zo],_c[Zo]=null,Zo--)}function rr(S,C){Zo++,_c[Zo]=S.current,S.current=C}var ve={},Ie=qi(ve),Se=qi(!1),Be=ve;function Ue(S,C){var $=S.type.contextTypes;if(!$)return ve;var Y=S.stateNode;if(Y&&Y.__reactInternalMemoizedUnmaskedChildContext===C)return Y.__reactInternalMemoizedMaskedChildContext;var J={},ae;for(ae in $)J[ae]=C[ae];return Y&&(S=S.stateNode,S.__reactInternalMemoizedUnmaskedChildContext=C,S.__reactInternalMemoizedMaskedChildContext=J),J}function De(S){return S=S.childContextTypes,S!=null}function ht(){ti(Se),ti(Ie)}function At(S,C,$){if(Ie.current!==ve)throw Error(o(168));rr(Ie,C),rr(Se,$)}function Pt(S,C,$){var Y=S.stateNode;if(C=C.childContextTypes,typeof Y.getChildContext!="function")return $;Y=Y.getChildContext();for(var J in Y)if(!(J in C))throw Error(o(108,I(S)||"Unknown",J));return s({},$,Y)}function kt(S){return S=(S=S.stateNode)&&S.__reactInternalMemoizedMergedChildContext||ve,Be=Ie.current,rr(Ie,S),rr(Se,Se.current),!0}function jt(S,C,$){var Y=S.stateNode;if(!Y)throw Error(o(169));$?(S=Pt(S,C,Be),Y.__reactInternalMemoizedMergedChildContext=S,ti(Se),ti(Ie),rr(Ie,S)):ti(Se),rr(Se,$)}var Zt=Math.clz32?Math.clz32:lr,qn=Math.log,Sn=Math.LN2;function lr(S){return S>>>=0,S===0?32:31-(qn(S)/Sn|0)|0}var _n=64,br=4194304;function ls(S){switch(S&-S){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return S&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return S&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return S}}function Ao(S,C){var $=S.pendingLanes;if($===0)return 0;var Y=0,J=S.suspendedLanes,ae=S.pingedLanes,xe=$&268435455;if(xe!==0){var Ve=xe&~J;Ve!==0?Y=ls(Ve):(ae&=xe,ae!==0&&(Y=ls(ae)))}else xe=$&~J,xe!==0?Y=ls(xe):ae!==0&&(Y=ls(ae));if(Y===0)return 0;if(C!==0&&C!==Y&&!(C&J)&&(J=Y&-Y,ae=C&-C,J>=ae||J===16&&(ae&4194240)!==0))return C;if(Y&4&&(Y|=$&16),C=S.entangledLanes,C!==0)for(S=S.entanglements,C&=Y;0<C;)$=31-Zt(C),J=1<<$,Y|=S[$],C&=~J;return Y}function Pl(S,C){switch(S){case 1:case 2:case 4:return C+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return C+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pd(S,C){for(var $=S.suspendedLanes,Y=S.pingedLanes,J=S.expirationTimes,ae=S.pendingLanes;0<ae;){var xe=31-Zt(ae),Ve=1<<xe,at=J[xe];at===-1?(!(Ve&$)||Ve&Y)&&(J[xe]=Pl(Ve,C)):at<=C&&(S.expiredLanes|=Ve),ae&=~Ve}}function Gu(S){return S=S.pendingLanes&-1073741825,S!==0?S:S&1073741824?1073741824:0}function pf(){var S=_n;return _n<<=1,!(_n&4194240)&&(_n=64),S}function eo(S){for(var C=[],$=0;31>$;$++)C.push(S);return C}function Mi(S,C,$){S.pendingLanes|=C,C!==536870912&&(S.suspendedLanes=0,S.pingedLanes=0),S=S.eventTimes,C=31-Zt(C),S[C]=$}function ko(S,C){var $=S.pendingLanes&~C;S.pendingLanes=C,S.suspendedLanes=0,S.pingedLanes=0,S.expiredLanes&=C,S.mutableReadLanes&=C,S.entangledLanes&=C,C=S.entanglements;var Y=S.eventTimes;for(S=S.expirationTimes;0<$;){var J=31-Zt($),ae=1<<J;C[J]=0,Y[J]=-1,S[J]=-1,$&=~ae}}function ea(S,C){var $=S.entangledLanes|=C;for(S=S.entanglements;$;){var Y=31-Zt($),J=1<<Y;J&C|S[Y]&C&&(S[Y]|=C),$&=~J}}var cr=0;function Ca(S){return S&=-S,1<S?4<S?S&268435455?16:536870912:4:1}var Aa=i.unstable_scheduleCallback,gp=i.unstable_cancelCallback,Nl=i.unstable_shouldYield,ks=i.unstable_requestPaint,Rs=i.unstable_now,md=i.unstable_ImmediatePriority,wc=i.unstable_UserBlockingPriority,Dl=i.unstable_NormalPriority,Y0=i.unstable_IdlePriority,xr=null,Gn=null;function Ec(S){if(Gn&&typeof Gn.onCommitFiberRoot=="function")try{Gn.onCommitFiberRoot(xr,S,void 0,(S.current.flags&128)===128)}catch{}}function Ce(S,C){return S===C&&(S!==0||1/S===1/C)||S!==S&&C!==C}var Ne=typeof Object.is=="function"?Object.is:Ce,rt=null,hn=!1,ir=!1;function Or(S){rt===null?rt=[S]:rt.push(S)}function gi(S){hn=!0,Or(S)}function dn(){if(!ir&&rt!==null){ir=!0;var S=0,C=cr;try{var $=rt;for(cr=1;S<$.length;S++){var Y=$[S];do Y=Y(!0);while(Y!==null)}rt=null,hn=!1}catch(J){throw rt!==null&&(rt=rt.slice(S+1)),Aa(md,dn),J}finally{cr=C,ir=!1}}return null}var Tr=[],Ir=0,_s=null,ta=0,Mr=[],js=0,Li=null,to=1,Xa="";function na(S,C){Tr[Ir++]=ta,Tr[Ir++]=_s,_s=S,ta=C}function Fg(S,C,$){Mr[js++]=to,Mr[js++]=Xa,Mr[js++]=Li,Li=S;var Y=to;S=Xa;var J=32-Zt(Y)-1;Y&=~(1<<J),$+=1;var ae=32-Zt(C)+J;if(30<ae){var xe=J-J%5;ae=(Y&(1<<xe)-1).toString(32),Y>>=xe,J-=xe,to=1<<32-Zt(C)+J|$<<J|Y,Xa=ae+S}else to=1<<ae|$<<J|Y,Xa=S}function no(S){S.return!==null&&(na(S,1),Fg(S,1,0))}function Sc(S){for(;S===_s;)_s=Tr[--Ir],Tr[Ir]=null,ta=Tr[--Ir],Tr[Ir]=null;for(;S===Li;)Li=Mr[--js],Mr[js]=null,Xa=Mr[--js],Mr[js]=null,to=Mr[--js],Mr[js]=null}var oi=null,Ro=null,yi=!1,ka=!1,ra=null;function gd(S,C){var $=Ds(5,null,null,0);$.elementType="DELETED",$.stateNode=C,$.return=S,C=S.deletions,C===null?(S.deletions=[$],S.flags|=16):C.push($)}function vi(S,C){switch(S.tag){case 5:return C=si(C,S.type,S.pendingProps),C!==null?(S.stateNode=C,oi=S,Ro=dd(C),!0):!1;case 6:return C=Js(C,S.pendingProps),C!==null?(S.stateNode=C,oi=S,Ro=null,!0):!1;case 13:if(C=Xr(C),C!==null){var $=Li!==null?{id:to,overflow:Xa}:null;return S.memoizedState={dehydrated:C,treeContext:$,retryLane:1073741824},$=Ds(18,null,null,0),$.stateNode=C,$.return=S,S.child=$,oi=S,Ro=null,!0}return!1;default:return!1}}function Yu(S){return(S.mode&1)!==0&&(S.flags&128)===0}function Ku(S){if(yi){var C=Ro;if(C){var $=C;if(!vi(S,C)){if(Yu(S))throw Error(o(418));C=Ta($);var Y=oi;C&&vi(S,C)?gd(Y,$):(S.flags=S.flags&-4097|2,yi=!1,oi=S)}}else{if(Yu(S))throw Error(o(418));S.flags=S.flags&-4097|2,yi=!1,oi=S}}}function $g(S){for(S=S.return;S!==null&&S.tag!==5&&S.tag!==3&&S.tag!==13;)S=S.return;oi=S}function yd(S){if(!Oe||S!==oi)return!1;if(!yi)return $g(S),yi=!0,!1;if(S.tag!==3&&(S.tag!==5||vc(S.type)&&!oe(S.type,S.memoizedProps))){var C=Ro;if(C){if(Yu(S))throw Bg(),Error(o(418));for(;C;)gd(S,C),C=Ta(C)}}if($g(S),S.tag===13){if(!Oe)throw Error(o(316));if(S=S.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(o(317));Ro=mh(S)}else Ro=oi?Ta(S.stateNode):null;return!0}function Bg(){for(var S=Ro;S;)S=Ta(S)}function mf(){Oe&&(Ro=oi=null,ka=yi=!1)}function gh(S){ra===null?ra=[S]:ra.push(S)}var Ra=a.ReactCurrentBatchConfig;function gf(S,C){if(Ne(S,C))return!0;if(typeof S!="object"||S===null||typeof C!="object"||C===null)return!1;var $=Object.keys(S),Y=Object.keys(C);if($.length!==Y.length)return!1;for(Y=0;Y<$.length;Y++){var J=$[Y];if(!Il.call(C,J)||!Ne(S[J],C[J]))return!1}return!0}function vd(S){switch(S.tag){case 5:return xs(S.type);case 16:return xs("Lazy");case 13:return xs("Suspense");case 19:return xs("SuspenseList");case 0:case 2:case 15:return S=As(S.type,!1),S;case 11:return S=As(S.type.render,!1),S;case 1:return S=As(S.type,!0),S;default:return""}}function xu(S,C,$){if(S=$.ref,S!==null&&typeof S!="function"&&typeof S!="object"){if($._owner){if($=$._owner,$){if($.tag!==1)throw Error(o(309));var Y=$.stateNode}if(!Y)throw Error(o(147,S));var J=Y,ae=""+S;return C!==null&&C.ref!==null&&typeof C.ref=="function"&&C.ref._stringRef===ae?C.ref:(C=function(xe){var Ve=J.refs;xe===null?delete Ve[ae]:Ve[ae]=xe},C._stringRef=ae,C)}if(typeof S!="string")throw Error(o(284));if(!$._owner)throw Error(o(290,S))}return S}function F(S,C){throw S=Object.prototype.toString.call(C),Error(o(31,S==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":S))}function re(S){var C=S._init;return C(S._payload)}function le(S){function C(it,qe){if(S){var ct=it.deletions;ct===null?(it.deletions=[qe],it.flags|=16):ct.push(qe)}}function $(it,qe){if(!S)return null;for(;qe!==null;)C(it,qe),qe=qe.sibling;return null}function Y(it,qe){for(it=new Map;qe!==null;)qe.key!==null?it.set(qe.key,qe):it.set(qe.index,qe),qe=qe.sibling;return it}function J(it,qe){return it=Lc(it,qe),it.index=0,it.sibling=null,it}function ae(it,qe,ct){return it.index=ct,S?(ct=it.alternate,ct!==null?(ct=ct.index,ct<qe?(it.flags|=2,qe):ct):(it.flags|=2,qe)):(it.flags|=1048576,qe)}function xe(it){return S&&it.alternate===null&&(it.flags|=2),it}function Ve(it,qe,ct,rn){return qe===null||qe.tag!==6?(qe=um(ct,it.mode,rn),qe.return=it,qe):(qe=J(qe,ct),qe.return=it,qe)}function at(it,qe,ct,rn){var kn=ct.type;return kn===c?yn(it,qe,ct.props.children,rn,ct.key):qe!==null&&(qe.elementType===kn||typeof kn=="object"&&kn!==null&&kn.$$typeof===x&&re(kn)===qe.type)?(rn=J(qe,ct.props),rn.ref=xu(it,qe,ct),rn.return=it,rn):(rn=Cd(ct.type,ct.key,ct.props,null,it.mode,rn),rn.ref=xu(it,qe,ct),rn.return=it,rn)}function Ft(it,qe,ct,rn){return qe===null||qe.tag!==4||qe.stateNode.containerInfo!==ct.containerInfo||qe.stateNode.implementation!==ct.implementation?(qe=sy(ct,it.mode,rn),qe.return=it,qe):(qe=J(qe,ct.children||[]),qe.return=it,qe)}function yn(it,qe,ct,rn,kn){return qe===null||qe.tag!==7?(qe=Lo(ct,it.mode,rn,kn),qe.return=it,qe):(qe=J(qe,ct),qe.return=it,qe)}function tr(it,qe,ct){if(typeof qe=="string"&&qe!==""||typeof qe=="number")return qe=um(""+qe,it.mode,ct),qe.return=it,qe;if(typeof qe=="object"&&qe!==null){switch(qe.$$typeof){case u:return ct=Cd(qe.type,qe.key,qe.props,null,it.mode,ct),ct.ref=xu(it,null,qe),ct.return=it,ct;case l:return qe=sy(qe,it.mode,ct),qe.return=it,qe;case x:var rn=qe._init;return tr(it,rn(qe._payload),ct)}if(U(qe)||A(qe))return qe=Lo(qe,it.mode,ct,null),qe.return=it,qe;F(it,qe)}return null}function an(it,qe,ct,rn){var kn=qe!==null?qe.key:null;if(typeof ct=="string"&&ct!==""||typeof ct=="number")return kn!==null?null:Ve(it,qe,""+ct,rn);if(typeof ct=="object"&&ct!==null){switch(ct.$$typeof){case u:return ct.key===kn?at(it,qe,ct,rn):null;case l:return ct.key===kn?Ft(it,qe,ct,rn):null;case x:return kn=ct._init,an(it,qe,kn(ct._payload),rn)}if(U(ct)||A(ct))return kn!==null?null:yn(it,qe,ct,rn,null);F(it,ct)}return null}function Ui(it,qe,ct,rn,kn){if(typeof rn=="string"&&rn!==""||typeof rn=="number")return it=it.get(ct)||null,Ve(qe,it,""+rn,kn);if(typeof rn=="object"&&rn!==null){switch(rn.$$typeof){case u:return it=it.get(rn.key===null?ct:rn.key)||null,at(qe,it,rn,kn);case l:return it=it.get(rn.key===null?ct:rn.key)||null,Ft(qe,it,rn,kn);case x:var Gt=rn._init;return Ui(it,qe,ct,Gt(rn._payload),kn)}if(U(rn)||A(rn))return it=it.get(ct)||null,yn(qe,it,rn,kn,null);F(qe,rn)}return null}function Si(it,qe,ct,rn){for(var kn=null,Gt=null,Kn=qe,Fr=qe=0,rs=null;Kn!==null&&Fr<ct.length;Fr++){Kn.index>Fr?(rs=Kn,Kn=null):rs=Kn.sibling;var Br=an(it,Kn,ct[Fr],rn);if(Br===null){Kn===null&&(Kn=rs);break}S&&Kn&&Br.alternate===null&&C(it,Kn),qe=ae(Br,qe,Fr),Gt===null?kn=Br:Gt.sibling=Br,Gt=Br,Kn=rs}if(Fr===ct.length)return $(it,Kn),yi&&na(it,Fr),kn;if(Kn===null){for(;Fr<ct.length;Fr++)Kn=tr(it,ct[Fr],rn),Kn!==null&&(qe=ae(Kn,qe,Fr),Gt===null?kn=Kn:Gt.sibling=Kn,Gt=Kn);return yi&&na(it,Fr),kn}for(Kn=Y(it,Kn);Fr<ct.length;Fr++)rs=Ui(Kn,it,Fr,ct[Fr],rn),rs!==null&&(S&&rs.alternate!==null&&Kn.delete(rs.key===null?Fr:rs.key),qe=ae(rs,qe,Fr),Gt===null?kn=rs:Gt.sibling=rs,Gt=rs);return S&&Kn.forEach(function($o){return C(it,$o)}),yi&&na(it,Fr),kn}function su(it,qe,ct,rn){var kn=A(ct);if(typeof kn!="function")throw Error(o(150));if(ct=kn.call(ct),ct==null)throw Error(o(151));for(var Gt=kn=null,Kn=qe,Fr=qe=0,rs=null,Br=ct.next();Kn!==null&&!Br.done;Fr++,Br=ct.next()){Kn.index>Fr?(rs=Kn,Kn=null):rs=Kn.sibling;var $o=an(it,Kn,Br.value,rn);if($o===null){Kn===null&&(Kn=rs);break}S&&Kn&&$o.alternate===null&&C(it,Kn),qe=ae($o,qe,Fr),Gt===null?kn=$o:Gt.sibling=$o,Gt=$o,Kn=rs}if(Br.done)return $(it,Kn),yi&&na(it,Fr),kn;if(Kn===null){for(;!Br.done;Fr++,Br=ct.next())Br=tr(it,Br.value,rn),Br!==null&&(qe=ae(Br,qe,Fr),Gt===null?kn=Br:Gt.sibling=Br,Gt=Br);return yi&&na(it,Fr),kn}for(Kn=Y(it,Kn);!Br.done;Fr++,Br=ct.next())Br=Ui(Kn,it,Fr,Br.value,rn),Br!==null&&(S&&Br.alternate!==null&&Kn.delete(Br.key===null?Fr:Br.key),qe=ae(Br,qe,Fr),Gt===null?kn=Br:Gt.sibling=Br,Gt=Br);return S&&Kn.forEach(function(p2){return C(it,p2)}),yi&&na(it,Fr),kn}function Fo(it,qe,ct,rn){if(typeof ct=="object"&&ct!==null&&ct.type===c&&ct.key===null&&(ct=ct.props.children),typeof ct=="object"&&ct!==null){switch(ct.$$typeof){case u:e:{for(var kn=ct.key,Gt=qe;Gt!==null;){if(Gt.key===kn){if(kn=ct.type,kn===c){if(Gt.tag===7){$(it,Gt.sibling),qe=J(Gt,ct.props.children),qe.return=it,it=qe;break e}}else if(Gt.elementType===kn||typeof kn=="object"&&kn!==null&&kn.$$typeof===x&&re(kn)===Gt.type){$(it,Gt.sibling),qe=J(Gt,ct.props),qe.ref=xu(it,Gt,ct),qe.return=it,it=qe;break e}$(it,Gt);break}else C(it,Gt);Gt=Gt.sibling}ct.type===c?(qe=Lo(ct.props.children,it.mode,rn,ct.key),qe.return=it,it=qe):(rn=Cd(ct.type,ct.key,ct.props,null,it.mode,rn),rn.ref=xu(it,qe,ct),rn.return=it,it=rn)}return xe(it);case l:e:{for(Gt=ct.key;qe!==null;){if(qe.key===Gt)if(qe.tag===4&&qe.stateNode.containerInfo===ct.containerInfo&&qe.stateNode.implementation===ct.implementation){$(it,qe.sibling),qe=J(qe,ct.children||[]),qe.return=it,it=qe;break e}else{$(it,qe);break}else C(it,qe);qe=qe.sibling}qe=sy(ct,it.mode,rn),qe.return=it,it=qe}return xe(it);case x:return Gt=ct._init,Fo(it,qe,Gt(ct._payload),rn)}if(U(ct))return Si(it,qe,ct,rn);if(A(ct))return su(it,qe,ct,rn);F(it,ct)}return typeof ct=="string"&&ct!==""||typeof ct=="number"?(ct=""+ct,qe!==null&&qe.tag===6?($(it,qe.sibling),qe=J(qe,ct),qe.return=it,it=qe):($(it,qe),qe=um(ct,it.mode,rn),qe.return=it,it=qe),xe(it)):$(it,qe)}return Fo}var be=le(!0),Xe=le(!1),ut=qi(null),Xt=null,Lr=null,Us=null;function Pr(){Us=Lr=Xt=null}function ai(S,C,$){Ae?(rr(ut,C._currentValue),C._currentValue=$):(rr(ut,C._currentValue2),C._currentValue2=$)}function cs(S){var C=ut.current;ti(ut),Ae?S._currentValue=C:S._currentValue2=C}function Io(S,C,$){for(;S!==null;){var Y=S.alternate;if((S.childLanes&C)!==C?(S.childLanes|=C,Y!==null&&(Y.childLanes|=C)):Y!==null&&(Y.childLanes&C)!==C&&(Y.childLanes|=C),S===$)break;S=S.return}}function go(S,C){Xt=S,Us=Lr=null,S=S.dependencies,S!==null&&S.firstContext!==null&&(S.lanes&C&&(On=!0),S.firstContext=null)}function yo(S){var C=Ae?S._currentValue:S._currentValue2;if(Us!==S)if(S={context:S,memoizedValue:C,next:null},Lr===null){if(Xt===null)throw Error(o(308));Lr=S,Xt.dependencies={lanes:0,firstContext:S}}else Lr=Lr.next=S;return C}var Ol=null;function z1(S){Ol===null?Ol=[S]:Ol.push(S)}function hx(S,C,$,Y){var J=C.interleaved;return J===null?($.next=$,z1(C)):($.next=J.next,J.next=$),C.interleaved=$,Tc(S,Y)}function Tc(S,C){S.lanes|=C;var $=S.alternate;for($!==null&&($.lanes|=C),$=S,S=S.return;S!==null;)S.childLanes|=C,$=S.alternate,$!==null&&($.childLanes|=C),$=S,S=S.return;return $.tag===3?$.stateNode:null}var Xu=!1;function yh(S){S.updateQueue={baseState:S.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function a2(S,C){S=S.updateQueue,C.updateQueue===S&&(C.updateQueue={baseState:S.baseState,firstBaseUpdate:S.firstBaseUpdate,lastBaseUpdate:S.lastBaseUpdate,shared:S.shared,effects:S.effects})}function bd(S,C){return{eventTime:S,lane:C,tag:0,payload:null,callback:null,next:null}}function Cc(S,C,$){var Y=S.updateQueue;if(Y===null)return null;if(Y=Y.shared,fr&2){var J=Y.pending;return J===null?C.next=C:(C.next=J.next,J.next=C),Y.pending=C,Tc(S,$)}return J=Y.interleaved,J===null?(C.next=C,z1(Y)):(C.next=J.next,J.next=C),Y.interleaved=C,Tc(S,$)}function K0(S,C,$){if(C=C.updateQueue,C!==null&&(C=C.shared,($&4194240)!==0)){var Y=C.lanes;Y&=S.pendingLanes,$|=Y,C.lanes=$,ea(S,$)}}function Qu(S,C){var $=S.updateQueue,Y=S.alternate;if(Y!==null&&(Y=Y.updateQueue,$===Y)){var J=null,ae=null;if($=$.firstBaseUpdate,$!==null){do{var xe={eventTime:$.eventTime,lane:$.lane,tag:$.tag,payload:$.payload,callback:$.callback,next:null};ae===null?J=ae=xe:ae=ae.next=xe,$=$.next}while($!==null);ae===null?J=ae=C:ae=ae.next=C}else J=ae=C;$={baseState:Y.baseState,firstBaseUpdate:J,lastBaseUpdate:ae,shared:Y.shared,effects:Y.effects},S.updateQueue=$;return}S=$.lastBaseUpdate,S===null?$.firstBaseUpdate=C:S.next=C,$.lastBaseUpdate=C}function Ac(S,C,$,Y){var J=S.updateQueue;Xu=!1;var ae=J.firstBaseUpdate,xe=J.lastBaseUpdate,Ve=J.shared.pending;if(Ve!==null){J.shared.pending=null;var at=Ve,Ft=at.next;at.next=null,xe===null?ae=Ft:xe.next=Ft,xe=at;var yn=S.alternate;yn!==null&&(yn=yn.updateQueue,Ve=yn.lastBaseUpdate,Ve!==xe&&(Ve===null?yn.firstBaseUpdate=Ft:Ve.next=Ft,yn.lastBaseUpdate=at))}if(ae!==null){var tr=J.baseState;xe=0,yn=Ft=at=null,Ve=ae;do{var an=Ve.lane,Ui=Ve.eventTime;if((Y&an)===an){yn!==null&&(yn=yn.next={eventTime:Ui,lane:0,tag:Ve.tag,payload:Ve.payload,callback:Ve.callback,next:null});e:{var Si=S,su=Ve;switch(an=C,Ui=$,su.tag){case 1:if(Si=su.payload,typeof Si=="function"){tr=Si.call(Ui,tr,an);break e}tr=Si;break e;case 3:Si.flags=Si.flags&-65537|128;case 0:if(Si=su.payload,an=typeof Si=="function"?Si.call(Ui,tr,an):Si,an==null)break e;tr=s({},tr,an);break e;case 2:Xu=!0}}Ve.callback!==null&&Ve.lane!==0&&(S.flags|=64,an=J.effects,an===null?J.effects=[Ve]:an.push(Ve))}else Ui={eventTime:Ui,lane:an,tag:Ve.tag,payload:Ve.payload,callback:Ve.callback,next:null},yn===null?(Ft=yn=Ui,at=tr):yn=yn.next=Ui,xe|=an;if(Ve=Ve.next,Ve===null){if(Ve=J.shared.pending,Ve===null)break;an=Ve,Ve=an.next,an.next=null,J.lastBaseUpdate=an,J.shared.pending=null}}while(!0);if(yn===null&&(at=tr),J.baseState=at,J.firstBaseUpdate=Ft,J.lastBaseUpdate=yn,C=J.shared.interleaved,C!==null){J=C;do xe|=J.lane,J=J.next;while(J!==C)}else ae===null&&(J.shared.lanes=0);Tf|=xe,S.lanes=xe,S.memoizedState=tr}}function u2(S,C,$){if(S=C.effects,C.effects=null,S!==null)for(C=0;C<S.length;C++){var Y=S[C],J=Y.callback;if(J!==null){if(Y.callback=null,Y=$,typeof J!="function")throw Error(o(191,J));J.call(Y)}}}var vh={},Ml=qi(vh),kc=qi(vh),Po=qi(vh);function Ju(S){if(S===vh)throw Error(o(174));return S}function V1(S,C){rr(Po,C),rr(kc,S),rr(Ml,vh),S=ee(C),ti(Ml),rr(Ml,S)}function yp(){ti(Ml),ti(kc),ti(Po)}function px(S){var C=Ju(Po.current),$=Ju(Ml.current);C=ne($,S.type,C),$!==C&&(rr(kc,S),rr(Ml,C))}function mx(S){kc.current===S&&(ti(Ml),ti(kc))}var ws=qi(0);function xd(S){for(var C=S;C!==null;){if(C.tag===13){var $=C.memoizedState;if($!==null&&($=$.dehydrated,$===null||Hi($)||Zs($)))return C}else if(C.tag===19&&C.memoizedProps.revealOrder!==void 0){if(C.flags&128)return C}else if(C.child!==null){C.child.return=C,C=C.child;continue}if(C===S)break;for(;C.sibling===null;){if(C.return===null||C.return===S)return null;C=C.return}C.sibling.return=C.return,C=C.sibling}return null}var ze=[];function mt(){for(var S=0;S<ze.length;S++){var C=ze[S];Ae?C._workInProgressVersionPrimary=null:C._workInProgressVersionSecondary=null}ze.length=0}var et=a.ReactCurrentDispatcher,on=a.ReactCurrentBatchConfig,$n=0,Dn=null,Cr=null,er=null,bh=!1,jg=!1,Ia=0,_d=0;function No(){throw Error(o(321))}function Ll(S,C){if(C===null)return!1;for(var $=0;$<C.length&&$<S.length;$++)if(!Ne(S[$],C[$]))return!1;return!0}function xh(S,C,$,Y,J,ae){if($n=ae,Dn=C,C.memoizedState=null,C.updateQueue=null,C.lanes=0,et.current=S===null||S.memoizedState===null?qg:Sp,S=$(Y,J),jg){ae=0;do{if(jg=!1,Ia=0,25<=ae)throw Error(o(301));ae+=1,er=Cr=null,C.updateQueue=null,et.current=Wg,S=$(Y,J)}while(jg)}if(et.current=Ep,C=Cr!==null&&Cr.next!==null,$n=0,er=Cr=Dn=null,bh=!1,C)throw Error(o(300));return S}function vp(){var S=Ia!==0;return Ia=0,S}function mr(){var S={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return er===null?Dn.memoizedState=er=S:er=er.next=S,er}function ia(){if(Cr===null){var S=Dn.alternate;S=S!==null?S.memoizedState:null}else S=Cr.next;var C=er===null?Dn.memoizedState:er.next;if(C!==null)er=C,Cr=S;else{if(S===null)throw Error(o(310));Cr=S,S={memoizedState:Cr.memoizedState,baseState:Cr.baseState,baseQueue:Cr.baseQueue,queue:Cr.queue,next:null},er===null?Dn.memoizedState=er=S:er=er.next=S}return er}function _h(S,C){return typeof C=="function"?C(S):C}function bp(S){var C=ia(),$=C.queue;if($===null)throw Error(o(311));$.lastRenderedReducer=S;var Y=Cr,J=Y.baseQueue,ae=$.pending;if(ae!==null){if(J!==null){var xe=J.next;J.next=ae.next,ae.next=xe}Y.baseQueue=J=ae,$.pending=null}if(J!==null){ae=J.next,Y=Y.baseState;var Ve=xe=null,at=null,Ft=ae;do{var yn=Ft.lane;if(($n&yn)===yn)at!==null&&(at=at.next={lane:0,action:Ft.action,hasEagerState:Ft.hasEagerState,eagerState:Ft.eagerState,next:null}),Y=Ft.hasEagerState?Ft.eagerState:S(Y,Ft.action);else{var tr={lane:yn,action:Ft.action,hasEagerState:Ft.hasEagerState,eagerState:Ft.eagerState,next:null};at===null?(Ve=at=tr,xe=Y):at=at.next=tr,Dn.lanes|=yn,Tf|=yn}Ft=Ft.next}while(Ft!==null&&Ft!==ae);at===null?xe=Y:at.next=Ve,Ne(Y,C.memoizedState)||(On=!0),C.memoizedState=Y,C.baseState=xe,C.baseQueue=at,$.lastRenderedState=Y}if(S=$.interleaved,S!==null){J=S;do ae=J.lane,Dn.lanes|=ae,Tf|=ae,J=J.next;while(J!==S)}else J===null&&($.lanes=0);return[C.memoizedState,$.dispatch]}function X0(S){var C=ia(),$=C.queue;if($===null)throw Error(o(311));$.lastRenderedReducer=S;var Y=$.dispatch,J=$.pending,ae=C.memoizedState;if(J!==null){$.pending=null;var xe=J=J.next;do ae=S(ae,xe.action),xe=xe.next;while(xe!==J);Ne(ae,C.memoizedState)||(On=!0),C.memoizedState=ae,C.baseQueue===null&&(C.baseState=ae),$.lastRenderedState=ae}return[ae,Y]}function gx(){}function yx(S,C){var $=Dn,Y=ia(),J=C(),ae=!Ne(Y.memoizedState,J);if(ae&&(Y.memoizedState=J,On=!0),Y=Y.queue,xp(J0.bind(null,$,Y,S),[S]),Y.getSnapshot!==C||ae||er!==null&&er.memoizedState.tag&1){if($.flags|=2048,wh(9,yf.bind(null,$,Y,J,C),void 0,null),$i===null)throw Error(o(349));$n&30||Q0($,C,J)}return J}function Q0(S,C,$){S.flags|=16384,S={getSnapshot:C,value:$},C=Dn.updateQueue,C===null?(C={lastEffect:null,stores:null},Dn.updateQueue=C,C.stores=[S]):($=C.stores,$===null?C.stores=[S]:$.push(S))}function yf(S,C,$,Y){C.value=$,C.getSnapshot=Y,H1(C)&&Fl(S)}function J0(S,C,$){return $(function(){H1(C)&&Fl(S)})}function H1(S){var C=S.getSnapshot;S=S.value;try{var $=C();return!Ne(S,$)}catch{return!0}}function Fl(S){var C=Tc(S,1);C!==null&&ji(C,S,1,-1)}function Ug(S){var C=mr();return typeof S=="function"&&(S=S()),C.memoizedState=C.baseState=S,S={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_h,lastRenderedState:S},C.queue=S,S=S.dispatch=Pa.bind(null,Dn,S),[C.memoizedState,S]}function wh(S,C,$,Y){return S={tag:S,create:C,destroy:$,deps:Y,next:null},C=Dn.updateQueue,C===null?(C={lastEffect:null,stores:null},Dn.updateQueue=C,C.lastEffect=S.next=S):($=C.lastEffect,$===null?C.lastEffect=S.next=S:(Y=$.next,$.next=S,S.next=Y,C.lastEffect=S)),S}function zg(){return ia().memoizedState}function Vg(S,C,$,Y){var J=mr();Dn.flags|=S,J.memoizedState=wh(1|C,$,void 0,Y===void 0?null:Y)}function $l(S,C,$,Y){var J=ia();Y=Y===void 0?null:Y;var ae=void 0;if(Cr!==null){var xe=Cr.memoizedState;if(ae=xe.destroy,Y!==null&&Ll(Y,xe.deps)){J.memoizedState=wh(C,$,ae,Y);return}}Dn.flags|=S,J.memoizedState=wh(1|C,$,ae,Y)}function Eh(S,C){return Vg(8390656,8,S,C)}function xp(S,C){return $l(2048,8,S,C)}function vx(S,C){return $l(4,2,S,C)}function Wi(S,C){return $l(4,4,S,C)}function q1(S,C){if(typeof C=="function")return S=S(),C(S),function(){C(null)};if(C!=null)return S=S(),C.current=S,function(){C.current=null}}function Sh(S,C,$){return $=$!=null?$.concat([S]):null,$l(4,4,q1.bind(null,C,S),$)}function vf(){}function Hg(S,C){var $=ia();C=C===void 0?null:C;var Y=$.memoizedState;return Y!==null&&C!==null&&Ll(C,Y[1])?Y[0]:($.memoizedState=[S,C],S)}function W1(S,C){var $=ia();C=C===void 0?null:C;var Y=$.memoizedState;return Y!==null&&C!==null&&Ll(C,Y[1])?Y[0]:(S=S(),$.memoizedState=[S,C],S)}function _p(S,C,$){return $n&21?(Ne($,C)||($=pf(),Dn.lanes|=$,Tf|=$,S.baseState=!0),C):(S.baseState&&(S.baseState=!1,On=!0),S.memoizedState=$)}function G1(S,C){var $=cr;cr=$!==0&&4>$?$:4,S(!0);var Y=on.transition;on.transition={};try{S(!1),C()}finally{cr=$,on.transition=Y}}function wp(){return ia().memoizedState}function ro(S,C,$){var Y=vo(S);if($={lane:Y,action:$,hasEagerState:!1,eagerState:null,next:null},l2(S))bx(C,$);else if($=hx(S,C,$,Y),$!==null){var J=ts();ji($,S,Y,J),Z0($,C,Y)}}function Pa(S,C,$){var Y=vo(S),J={lane:Y,action:$,hasEagerState:!1,eagerState:null,next:null};if(l2(S))bx(C,J);else{var ae=S.alternate;if(S.lanes===0&&(ae===null||ae.lanes===0)&&(ae=C.lastRenderedReducer,ae!==null))try{var xe=C.lastRenderedState,Ve=ae(xe,$);if(J.hasEagerState=!0,J.eagerState=Ve,Ne(Ve,xe)){var at=C.interleaved;at===null?(J.next=J,z1(C)):(J.next=at.next,at.next=J),C.interleaved=J;return}}catch{}finally{}$=hx(S,C,J,Y),$!==null&&(J=ts(),ji($,S,Y,J),Z0($,C,Y))}}function l2(S){var C=S.alternate;return S===Dn||C!==null&&C===Dn}function bx(S,C){jg=bh=!0;var $=S.pending;$===null?C.next=C:(C.next=$.next,$.next=C),S.pending=C}function Z0(S,C,$){if($&4194240){var Y=C.lanes;Y&=S.pendingLanes,$|=Y,C.lanes=$,ea(S,$)}}var Ep={readContext:yo,useCallback:No,useContext:No,useEffect:No,useImperativeHandle:No,useInsertionEffect:No,useLayoutEffect:No,useMemo:No,useReducer:No,useRef:No,useState:No,useDebugValue:No,useDeferredValue:No,useTransition:No,useMutableSource:No,useSyncExternalStore:No,useId:No,unstable_isNewReconciler:!1},qg={readContext:yo,useCallback:function(S,C){return mr().memoizedState=[S,C===void 0?null:C],S},useContext:yo,useEffect:Eh,useImperativeHandle:function(S,C,$){return $=$!=null?$.concat([S]):null,Vg(4194308,4,q1.bind(null,C,S),$)},useLayoutEffect:function(S,C){return Vg(4194308,4,S,C)},useInsertionEffect:function(S,C){return Vg(4,2,S,C)},useMemo:function(S,C){var $=mr();return C=C===void 0?null:C,S=S(),$.memoizedState=[S,C],S},useReducer:function(S,C,$){var Y=mr();return C=$!==void 0?$(C):C,Y.memoizedState=Y.baseState=C,S={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:S,lastRenderedState:C},Y.queue=S,S=S.dispatch=ro.bind(null,Dn,S),[Y.memoizedState,S]},useRef:function(S){var C=mr();return S={current:S},C.memoizedState=S},useState:Ug,useDebugValue:vf,useDeferredValue:function(S){return mr().memoizedState=S},useTransition:function(){var S=Ug(!1),C=S[0];return S=G1.bind(null,S[1]),mr().memoizedState=S,[C,S]},useMutableSource:function(){},useSyncExternalStore:function(S,C,$){var Y=Dn,J=mr();if(yi){if($===void 0)throw Error(o(407));$=$()}else{if($=C(),$i===null)throw Error(o(349));$n&30||Q0(Y,C,$)}J.memoizedState=$;var ae={value:$,getSnapshot:C};return J.queue=ae,Eh(J0.bind(null,Y,ae,S),[S]),Y.flags|=2048,wh(9,yf.bind(null,Y,ae,$,C),void 0,null),$},useId:function(){var S=mr(),C=$i.identifierPrefix;if(yi){var $=Xa,Y=to;$=(Y&~(1<<32-Zt(Y)-1)).toString(32)+$,C=":"+C+"R"+$,$=Ia++,0<$&&(C+="H"+$.toString(32)),C+=":"}else $=_d++,C=":"+C+"r"+$.toString(32)+":";return S.memoizedState=C},unstable_isNewReconciler:!1},Sp={readContext:yo,useCallback:Hg,useContext:yo,useEffect:xp,useImperativeHandle:Sh,useInsertionEffect:vx,useLayoutEffect:Wi,useMemo:W1,useReducer:bp,useRef:zg,useState:function(){return bp(_h)},useDebugValue:vf,useDeferredValue:function(S){var C=ia();return _p(C,Cr.memoizedState,S)},useTransition:function(){var S=bp(_h)[0],C=ia().memoizedState;return[S,C]},useMutableSource:gx,useSyncExternalStore:yx,useId:wp,unstable_isNewReconciler:!1},Wg={readContext:yo,useCallback:Hg,useContext:yo,useEffect:xp,useImperativeHandle:Sh,useInsertionEffect:vx,useLayoutEffect:Wi,useMemo:W1,useReducer:X0,useRef:zg,useState:function(){return X0(_h)},useDebugValue:vf,useDeferredValue:function(S){var C=ia();return Cr===null?C.memoizedState=S:_p(C,Cr.memoizedState,S)},useTransition:function(){var S=X0(_h)[0],C=ia().memoizedState;return[S,C]},useMutableSource:gx,useSyncExternalStore:yx,useId:wp,unstable_isNewReconciler:!1};function Do(S,C){if(S&&S.defaultProps){C=s({},C),S=S.defaultProps;for(var $ in S)C[$]===void 0&&(C[$]=S[$]);return C}return C}function Tp(S,C,$,Y){C=S.memoizedState,$=$(Y,C),$=$==null?C:s({},C,$),S.memoizedState=$,S.lanes===0&&(S.updateQueue.baseState=$)}var wd={isMounted:function(S){return(S=S._reactInternals)?O(S)===S:!1},enqueueSetState:function(S,C,$){S=S._reactInternals;var Y=ts(),J=vo(S),ae=bd(Y,J);ae.payload=C,$!=null&&(ae.callback=$),C=Cc(S,ae,J),C!==null&&(ji(C,S,J,Y),K0(C,S,J))},enqueueReplaceState:function(S,C,$){S=S._reactInternals;var Y=ts(),J=vo(S),ae=bd(Y,J);ae.tag=1,ae.payload=C,$!=null&&(ae.callback=$),C=Cc(S,ae,J),C!==null&&(ji(C,S,J,Y),K0(C,S,J))},enqueueForceUpdate:function(S,C){S=S._reactInternals;var $=ts(),Y=vo(S),J=bd($,Y);J.tag=2,C!=null&&(J.callback=C),C=Cc(S,J,Y),C!==null&&(ji(C,S,Y,$),K0(C,S,Y))}};function Gg(S,C,$,Y,J,ae,xe){return S=S.stateNode,typeof S.shouldComponentUpdate=="function"?S.shouldComponentUpdate(Y,ae,xe):C.prototype&&C.prototype.isPureReactComponent?!gf($,Y)||!gf(J,ae):!0}function Cp(S,C,$){var Y=!1,J=ve,ae=C.contextType;return typeof ae=="object"&&ae!==null?ae=yo(ae):(J=De(C)?Be:Ie.current,Y=C.contextTypes,ae=(Y=Y!=null)?Ue(S,J):ve),C=new C($,ae),S.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,C.updater=wd,S.stateNode=C,C._reactInternals=S,Y&&(S=S.stateNode,S.__reactInternalMemoizedUnmaskedChildContext=J,S.__reactInternalMemoizedMaskedChildContext=ae),C}function Y1(S,C,$,Y){S=C.state,typeof C.componentWillReceiveProps=="function"&&C.componentWillReceiveProps($,Y),typeof C.UNSAFE_componentWillReceiveProps=="function"&&C.UNSAFE_componentWillReceiveProps($,Y),C.state!==S&&wd.enqueueReplaceState(C,C.state,null)}function bf(S,C,$,Y){var J=S.stateNode;J.props=$,J.state=S.memoizedState,J.refs={},yh(S);var ae=C.contextType;typeof ae=="object"&&ae!==null?J.context=yo(ae):(ae=De(C)?Be:Ie.current,J.context=Ue(S,ae)),J.state=S.memoizedState,ae=C.getDerivedStateFromProps,typeof ae=="function"&&(Tp(S,C,ae,$),J.state=S.memoizedState),typeof C.getDerivedStateFromProps=="function"||typeof J.getSnapshotBeforeUpdate=="function"||typeof J.UNSAFE_componentWillMount!="function"&&typeof J.componentWillMount!="function"||(C=J.state,typeof J.componentWillMount=="function"&&J.componentWillMount(),typeof J.UNSAFE_componentWillMount=="function"&&J.UNSAFE_componentWillMount(),C!==J.state&&wd.enqueueReplaceState(J,J.state,null),Ac(S,$,J,Y),J.state=S.memoizedState),typeof J.componentDidMount=="function"&&(S.flags|=4194308)}function Ap(S,C){try{var $="",Y=C;do $+=vd(Y),Y=Y.return;while(Y);var J=$}catch(ae){J=`
Error generating stack: `+ae.message+`
`+ae.stack}return{value:S,source:C,stack:J,digest:null}}function Th(S,C,$){return{value:S,source:null,stack:$??null,digest:C??null}}function Bl(S,C){try{console.error(C.value)}catch($){setTimeout(function(){throw $})}}var Ch=typeof WeakMap=="function"?WeakMap:Map;function _u(S,C,$){$=bd(-1,$),$.tag=3,$.payload={element:null};var Y=C.value;return $.callback=function(){ds||(ds=!0,Hs=Y),Bl(S,C)},$}function Yg(S,C,$){$=bd(-1,$),$.tag=3;var Y=S.type.getDerivedStateFromError;if(typeof Y=="function"){var J=C.value;$.payload=function(){return Y(J)},$.callback=function(){Bl(S,C)}}var ae=S.stateNode;return ae!==null&&typeof ae.componentDidCatch=="function"&&($.callback=function(){Bl(S,C),typeof Y!="function"&&(nl===null?nl=new Set([this]):nl.add(this));var xe=C.stack;this.componentDidCatch(C.value,{componentStack:xe!==null?xe:""})}),$}function ye(S,C,$){var Y=S.pingCache;if(Y===null){Y=S.pingCache=new Ch;var J=new Set;Y.set(C,J)}else J=Y.get(C),J===void 0&&(J=new Set,Y.set(C,J));J.has($)||(J.add($),S=d2.bind(null,S,C,$),C.then(S,S))}function kp(S){do{var C;if((C=S.tag===13)&&(C=S.memoizedState,C=C!==null?C.dehydrated!==null:!0),C)return S;S=S.return}while(S!==null);return null}function Rc(S,C,$,Y,J){return S.mode&1?(S.flags|=65536,S.lanes=J,S):(S===C?S.flags|=65536:(S.flags|=128,$.flags|=131072,$.flags&=-52805,$.tag===1&&($.alternate===null?$.tag=17:(C=bd(-1,1),C.tag=2,Cc($,C,1))),$.lanes|=1),S)}var Na=a.ReactCurrentOwner,On=!1;function Oo(S,C,$,Y){C.child=S===null?Xe(C,null,$,Y):be(C,S.child,$,Y)}function K1(S,C,$,Y,J){$=$.render;var ae=C.ref;return go(C,J),Y=xh(S,C,$,Y,ae,J),$=vp(),S!==null&&!On?(C.updateQueue=S.updateQueue,C.flags&=-2053,S.lanes&=~J,Za(S,C,J)):(yi&&$&&no(C),C.flags|=1,Oo(S,C,Y,J),C.child)}function Rp(S,C,$,Y,J){if(S===null){var ae=$.type;return typeof ae=="function"&&!am(ae)&&ae.defaultProps===void 0&&$.compare===null&&$.defaultProps===void 0?(C.tag=15,C.type=ae,Qa(S,C,ae,Y,J)):(S=Cd($.type,null,Y,C,C.mode,J),S.ref=C.ref,S.return=C,C.child=S)}if(ae=S.child,!(S.lanes&J)){var xe=ae.memoizedProps;if($=$.compare,$=$!==null?$:gf,$(xe,Y)&&S.ref===C.ref)return Za(S,C,J)}return C.flags|=1,S=Lc(ae,Y),S.ref=C.ref,S.return=C,C.child=S}function Qa(S,C,$,Y,J){if(S!==null){var ae=S.memoizedProps;if(gf(ae,Y)&&S.ref===C.ref)if(On=!1,C.pendingProps=Y=ae,(S.lanes&J)!==0)S.flags&131072&&(On=!0);else return C.lanes=S.lanes,Za(S,C,J)}return xf(S,C,$,Y,J)}function Gi(S,C,$){var Y=C.pendingProps,J=Y.children,ae=S!==null?S.memoizedState:null;if(Y.mode==="hidden")if(!(C.mode&1))C.memoizedState={baseLanes:0,cachePool:null,transitions:null},rr(Oh,Vs),Vs|=$;else{if(!($&1073741824))return S=ae!==null?ae.baseLanes|$:$,C.lanes=C.childLanes=1073741824,C.memoizedState={baseLanes:S,cachePool:null,transitions:null},C.updateQueue=null,rr(Oh,Vs),Vs|=S,null;C.memoizedState={baseLanes:0,cachePool:null,transitions:null},Y=ae!==null?ae.baseLanes:$,rr(Oh,Vs),Vs|=Y}else ae!==null?(Y=ae.baseLanes|$,C.memoizedState=null):Y=$,rr(Oh,Vs),Vs|=Y;return Oo(S,C,J,$),C.child}function Fi(S,C){var $=C.ref;(S===null&&$!==null||S!==null&&S.ref!==$)&&(C.flags|=512,C.flags|=2097152)}function xf(S,C,$,Y,J){var ae=De($)?Be:Ie.current;return ae=Ue(C,ae),go(C,J),$=xh(S,C,$,Y,ae,J),Y=vp(),S!==null&&!On?(C.updateQueue=S.updateQueue,C.flags&=-2053,S.lanes&=~J,Za(S,C,J)):(yi&&Y&&no(C),C.flags|=1,Oo(S,C,$,J),C.child)}function sa(S,C,$,Y,J){if(De($)){var ae=!0;kt(C)}else ae=!1;if(go(C,J),C.stateNode===null)Kg(S,C),Cp(C,$,Y),bf(C,$,Y,J),Y=!0;else if(S===null){var xe=C.stateNode,Ve=C.memoizedProps;xe.props=Ve;var at=xe.context,Ft=$.contextType;typeof Ft=="object"&&Ft!==null?Ft=yo(Ft):(Ft=De($)?Be:Ie.current,Ft=Ue(C,Ft));var yn=$.getDerivedStateFromProps,tr=typeof yn=="function"||typeof xe.getSnapshotBeforeUpdate=="function";tr||typeof xe.UNSAFE_componentWillReceiveProps!="function"&&typeof xe.componentWillReceiveProps!="function"||(Ve!==Y||at!==Ft)&&Y1(C,xe,Y,Ft),Xu=!1;var an=C.memoizedState;xe.state=an,Ac(C,Y,xe,J),at=C.memoizedState,Ve!==Y||an!==at||Se.current||Xu?(typeof yn=="function"&&(Tp(C,$,yn,Y),at=C.memoizedState),(Ve=Xu||Gg(C,$,Ve,Y,an,at,Ft))?(tr||typeof xe.UNSAFE_componentWillMount!="function"&&typeof xe.componentWillMount!="function"||(typeof xe.componentWillMount=="function"&&xe.componentWillMount(),typeof xe.UNSAFE_componentWillMount=="function"&&xe.UNSAFE_componentWillMount()),typeof xe.componentDidMount=="function"&&(C.flags|=4194308)):(typeof xe.componentDidMount=="function"&&(C.flags|=4194308),C.memoizedProps=Y,C.memoizedState=at),xe.props=Y,xe.state=at,xe.context=Ft,Y=Ve):(typeof xe.componentDidMount=="function"&&(C.flags|=4194308),Y=!1)}else{xe=C.stateNode,a2(S,C),Ve=C.memoizedProps,Ft=C.type===C.elementType?Ve:Do(C.type,Ve),xe.props=Ft,tr=C.pendingProps,an=xe.context,at=$.contextType,typeof at=="object"&&at!==null?at=yo(at):(at=De($)?Be:Ie.current,at=Ue(C,at));var Ui=$.getDerivedStateFromProps;(yn=typeof Ui=="function"||typeof xe.getSnapshotBeforeUpdate=="function")||typeof xe.UNSAFE_componentWillReceiveProps!="function"&&typeof xe.componentWillReceiveProps!="function"||(Ve!==tr||an!==at)&&Y1(C,xe,Y,at),Xu=!1,an=C.memoizedState,xe.state=an,Ac(C,Y,xe,J);var Si=C.memoizedState;Ve!==tr||an!==Si||Se.current||Xu?(typeof Ui=="function"&&(Tp(C,$,Ui,Y),Si=C.memoizedState),(Ft=Xu||Gg(C,$,Ft,Y,an,Si,at)||!1)?(yn||typeof xe.UNSAFE_componentWillUpdate!="function"&&typeof xe.componentWillUpdate!="function"||(typeof xe.componentWillUpdate=="function"&&xe.componentWillUpdate(Y,Si,at),typeof xe.UNSAFE_componentWillUpdate=="function"&&xe.UNSAFE_componentWillUpdate(Y,Si,at)),typeof xe.componentDidUpdate=="function"&&(C.flags|=4),typeof xe.getSnapshotBeforeUpdate=="function"&&(C.flags|=1024)):(typeof xe.componentDidUpdate!="function"||Ve===S.memoizedProps&&an===S.memoizedState||(C.flags|=4),typeof xe.getSnapshotBeforeUpdate!="function"||Ve===S.memoizedProps&&an===S.memoizedState||(C.flags|=1024),C.memoizedProps=Y,C.memoizedState=Si),xe.props=Y,xe.state=Si,xe.context=at,Y=Ft):(typeof xe.componentDidUpdate!="function"||Ve===S.memoizedProps&&an===S.memoizedState||(C.flags|=4),typeof xe.getSnapshotBeforeUpdate!="function"||Ve===S.memoizedProps&&an===S.memoizedState||(C.flags|=1024),Y=!1)}return Da(S,C,$,Y,ae,J)}function Da(S,C,$,Y,J,ae){Fi(S,C);var xe=(C.flags&128)!==0;if(!Y&&!xe)return J&&jt(C,$,!1),Za(S,C,ae);Y=C.stateNode,Na.current=C;var Ve=xe&&typeof $.getDerivedStateFromError!="function"?null:Y.render();return C.flags|=1,S!==null&&xe?(C.child=be(C,S.child,null,ae),C.child=be(C,null,Ve,ae)):Oo(S,C,Ve,ae),C.memoizedState=Y.state,J&&jt(C,$,!0),C.child}function Oa(S){var C=S.stateNode;C.pendingContext?At(S,C.pendingContext,C.pendingContext!==C.context):C.context&&At(S,C.context,!1),V1(S,C.containerInfo)}function Ip(S,C,$,Y,J){return mf(),gh(J),C.flags|=256,Oo(S,C,$,Y),C.child}var Ma={dehydrated:null,treeContext:null,retryLane:0};function em(S){return{baseLanes:S,cachePool:null,transitions:null}}function xx(S,C,$){var Y=C.pendingProps,J=ws.current,ae=!1,xe=(C.flags&128)!==0,Ve;if((Ve=xe)||(Ve=S!==null&&S.memoizedState===null?!1:(J&2)!==0),Ve?(ae=!0,C.flags&=-129):(S===null||S.memoizedState!==null)&&(J|=1),rr(ws,J&1),S===null)return Ku(C),S=C.memoizedState,S!==null&&(S=S.dehydrated,S!==null)?(C.mode&1?Zs(S)?C.lanes=8:C.lanes=1073741824:C.lanes=1,null):(xe=Y.children,S=Y.fallback,ae?(Y=C.mode,ae=C.child,xe={mode:"hidden",children:xe},!(Y&1)&&ae!==null?(ae.childLanes=0,ae.pendingProps=xe):ae=Up(xe,Y,0,null),S=Lo(S,Y,$,null),ae.return=C,S.return=C,ae.sibling=S,C.child=ae,C.child.memoizedState=em($),C.memoizedState=Ma,S):X1(C,xe));if(J=S.memoizedState,J!==null&&(Ve=J.dehydrated,Ve!==null))return c2(S,C,xe,Y,Ve,J,$);if(ae){ae=Y.fallback,xe=C.mode,J=S.child,Ve=J.sibling;var at={mode:"hidden",children:Y.children};return!(xe&1)&&C.child!==J?(Y=C.child,Y.childLanes=0,Y.pendingProps=at,C.deletions=null):(Y=Lc(J,at),Y.subtreeFlags=J.subtreeFlags&14680064),Ve!==null?ae=Lc(Ve,ae):(ae=Lo(ae,xe,$,null),ae.flags|=2),ae.return=C,Y.return=C,Y.sibling=ae,C.child=Y,Y=ae,ae=C.child,xe=S.child.memoizedState,xe=xe===null?em($):{baseLanes:xe.baseLanes|$,cachePool:null,transitions:xe.transitions},ae.memoizedState=xe,ae.childLanes=S.childLanes&~$,C.memoizedState=Ma,Y}return ae=S.child,S=ae.sibling,Y=Lc(ae,{mode:"visible",children:Y.children}),!(C.mode&1)&&(Y.lanes=$),Y.return=C,Y.sibling=null,S!==null&&($=C.deletions,$===null?(C.deletions=[S],C.flags|=16):$.push(S)),C.child=Y,C.memoizedState=null,Y}function X1(S,C){return C=Up({mode:"visible",children:C},S.mode,0,null),C.return=S,S.child=C}function Ja(S,C,$,Y){return Y!==null&&gh(Y),be(C,S.child,null,$),S=X1(C,C.pendingProps.children),S.flags|=2,C.memoizedState=null,S}function c2(S,C,$,Y,J,ae,xe){if($)return C.flags&256?(C.flags&=-257,Y=Th(Error(o(422))),Ja(S,C,xe,Y)):C.memoizedState!==null?(C.child=S.child,C.flags|=128,null):(ae=Y.fallback,J=C.mode,Y=Up({mode:"visible",children:Y.children},J,0,null),ae=Lo(ae,J,xe,null),ae.flags|=2,Y.return=C,ae.return=C,Y.sibling=ae,C.child=Y,C.mode&1&&be(C,S.child,null,xe),C.child.memoizedState=em(xe),C.memoizedState=Ma,ae);if(!(C.mode&1))return Ja(S,C,xe,null);if(Zs(J))return Y=mo(J).digest,ae=Error(o(419)),Y=Th(ae,Y,void 0),Ja(S,C,xe,Y);if($=(xe&S.childLanes)!==0,On||$){if(Y=$i,Y!==null){switch(xe&-xe){case 4:J=2;break;case 16:J=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:J=32;break;case 536870912:J=268435456;break;default:J=0}J=J&(Y.suspendedLanes|xe)?0:J,J!==0&&J!==ae.retryLane&&(ae.retryLane=J,Tc(S,J),ji(Y,S,J,-1))}return jp(),Y=Th(Error(o(421))),Ja(S,C,xe,Y)}return Hi(J)?(C.flags|=128,C.child=S.child,C=Cx.bind(null,S),Qo(J,C),null):(S=ae.treeContext,Oe&&(Ro=Rl(J),oi=C,yi=!0,ra=null,ka=!1,S!==null&&(Mr[js++]=to,Mr[js++]=Xa,Mr[js++]=Li,to=S.id,Xa=S.overflow,Li=C)),C=X1(C,Y.children),C.flags|=4096,C)}function _f(S,C,$){S.lanes|=C;var Y=S.alternate;Y!==null&&(Y.lanes|=C),Io(S.return,C,$)}function tm(S,C,$,Y,J){var ae=S.memoizedState;ae===null?S.memoizedState={isBackwards:C,rendering:null,renderingStartTime:0,last:Y,tail:$,tailMode:J}:(ae.isBackwards=C,ae.rendering=null,ae.renderingStartTime=0,ae.last=Y,ae.tail=$,ae.tailMode=J)}function Q1(S,C,$){var Y=C.pendingProps,J=Y.revealOrder,ae=Y.tail;if(Oo(S,C,Y.children,$),Y=ws.current,Y&2)Y=Y&1|2,C.flags|=128;else{if(S!==null&&S.flags&128)e:for(S=C.child;S!==null;){if(S.tag===13)S.memoizedState!==null&&_f(S,$,C);else if(S.tag===19)_f(S,$,C);else if(S.child!==null){S.child.return=S,S=S.child;continue}if(S===C)break e;for(;S.sibling===null;){if(S.return===null||S.return===C)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}Y&=1}if(rr(ws,Y),!(C.mode&1))C.memoizedState=null;else switch(J){case"forwards":for($=C.child,J=null;$!==null;)S=$.alternate,S!==null&&xd(S)===null&&(J=$),$=$.sibling;$=J,$===null?(J=C.child,C.child=null):(J=$.sibling,$.sibling=null),tm(C,!1,J,$,ae);break;case"backwards":for($=null,J=C.child,C.child=null;J!==null;){if(S=J.alternate,S!==null&&xd(S)===null){C.child=J;break}S=J.sibling,J.sibling=$,$=J,J=S}tm(C,!0,$,null,ae);break;case"together":tm(C,!1,null,null,void 0);break;default:C.memoizedState=null}return C.child}function Kg(S,C){!(C.mode&1)&&S!==null&&(S.alternate=null,C.alternate=null,C.flags|=2)}function Za(S,C,$){if(S!==null&&(C.dependencies=S.dependencies),Tf|=C.lanes,!($&C.childLanes))return null;if(S!==null&&C.child!==S.child)throw Error(o(153));if(C.child!==null){for(S=C.child,$=Lc(S,S.pendingProps),C.child=$,$.return=C;S.sibling!==null;)S=S.sibling,$=$.sibling=Lc(S,S.pendingProps),$.return=C;$.sibling=null}return C.child}function Ah(S,C,$){switch(C.tag){case 3:Oa(C),mf();break;case 5:px(C);break;case 1:De(C.type)&&kt(C);break;case 4:V1(C,C.stateNode.containerInfo);break;case 10:ai(C,C.type._context,C.memoizedProps.value);break;case 13:var Y=C.memoizedState;if(Y!==null)return Y.dehydrated!==null?(rr(ws,ws.current&1),C.flags|=128,null):$&C.child.childLanes?xx(S,C,$):(rr(ws,ws.current&1),S=Za(S,C,$),S!==null?S.sibling:null);rr(ws,ws.current&1);break;case 19:if(Y=($&C.childLanes)!==0,S.flags&128){if(Y)return Q1(S,C,$);C.flags|=128}var J=C.memoizedState;if(J!==null&&(J.rendering=null,J.tail=null,J.lastEffect=null),rr(ws,ws.current),Y)break;return null;case 22:case 23:return C.lanes=0,Gi(S,C,$)}return Za(S,C,$)}function eu(S){S.flags|=4}function oa(S,C){if(S!==null&&S.child===C.child)return!0;if(C.flags&16)return!1;for(S=C.child;S!==null;){if(S.flags&12854||S.subtreeFlags&12854)return!1;S=S.sibling}return!0}var kh,Rh,tu,nu;if(ge)kh=function(S,C){for(var $=C.child;$!==null;){if($.tag===5||$.tag===6)te(S,$.stateNode);else if($.tag!==4&&$.child!==null){$.child.return=$,$=$.child;continue}if($===C)break;for(;$.sibling===null;){if($.return===null||$.return===C)return;$=$.return}$.sibling.return=$.return,$=$.sibling}},Rh=function(){},tu=function(S,C,$,Y,J){if(S=S.memoizedProps,S!==Y){var ae=C.stateNode,xe=Ju(Ml.current);$=Z(ae,$,S,Y,J,xe),(C.updateQueue=$)&&eu(C)}},nu=function(S,C,$,Y){$!==Y&&eu(C)};else if(me){kh=function(S,C,$,Y){for(var J=C.child;J!==null;){if(J.tag===5){var ae=J.stateNode;$&&Y&&(ae=Kr(ae,J.type,J.memoizedProps,J)),te(S,ae)}else if(J.tag===6)ae=J.stateNode,$&&Y&&(ae=Oi(ae,J.memoizedProps,J)),te(S,ae);else if(J.tag!==4){if(J.tag===22&&J.memoizedState!==null)ae=J.child,ae!==null&&(ae.return=J),kh(S,J,!0,!0);else if(J.child!==null){J.child.return=J,J=J.child;continue}}if(J===C)break;for(;J.sibling===null;){if(J.return===null||J.return===C)return;J=J.return}J.sibling.return=J.return,J=J.sibling}};var Ih=function(S,C,$,Y){for(var J=C.child;J!==null;){if(J.tag===5){var ae=J.stateNode;$&&Y&&(ae=Kr(ae,J.type,J.memoizedProps,J)),Wu(S,ae)}else if(J.tag===6)ae=J.stateNode,$&&Y&&(ae=Oi(ae,J.memoizedProps,J)),Wu(S,ae);else if(J.tag!==4){if(J.tag===22&&J.memoizedState!==null)ae=J.child,ae!==null&&(ae.return=J),Ih(S,J,!0,!0);else if(J.child!==null){J.child.return=J,J=J.child;continue}}if(J===C)break;for(;J.sibling===null;){if(J.return===null||J.return===C)return;J=J.return}J.sibling.return=J.return,J=J.sibling}};Rh=function(S,C){var $=C.stateNode;if(!oa(S,C)){S=$.containerInfo;var Y=po(S);Ih(Y,C,!1,!1),$.pendingChildren=Y,eu(C),Ea(S,Y)}},tu=function(S,C,$,Y,J){var ae=S.stateNode,xe=S.memoizedProps;if((S=oa(S,C))&&xe===Y)C.stateNode=ae;else{var Ve=C.stateNode,at=Ju(Ml.current),Ft=null;xe!==Y&&(Ft=Z(Ve,$,xe,Y,J,at)),S&&Ft===null?C.stateNode=ae:(ae=ei(ae,Ft,$,xe,Y,C,S,Ve),W(ae,$,Y,J,at)&&eu(C),C.stateNode=ae,S?eu(C):kh(ae,C,!1,!1))}},nu=function(S,C,$,Y){$!==Y?(S=Ju(Po.current),$=Ju(Ml.current),C.stateNode=pe(Y,S,$,C),eu(C)):C.stateNode=S.stateNode}}else Rh=function(){},tu=function(){},nu=function(){};function wu(S,C){if(!yi)switch(S.tailMode){case"hidden":C=S.tail;for(var $=null;C!==null;)C.alternate!==null&&($=C),C=C.sibling;$===null?S.tail=null:$.sibling=null;break;case"collapsed":$=S.tail;for(var Y=null;$!==null;)$.alternate!==null&&(Y=$),$=$.sibling;Y===null?C||S.tail===null?S.tail=null:S.tail.sibling=null:Y.sibling=null}}function es(S){var C=S.alternate!==null&&S.alternate.child===S.child,$=0,Y=0;if(C)for(var J=S.child;J!==null;)$|=J.lanes|J.childLanes,Y|=J.subtreeFlags&14680064,Y|=J.flags&14680064,J.return=S,J=J.sibling;else for(J=S.child;J!==null;)$|=J.lanes|J.childLanes,Y|=J.subtreeFlags,Y|=J.flags,J.return=S,J=J.sibling;return S.subtreeFlags|=Y,S.childLanes=$,C}function Pp(S,C,$){var Y=C.pendingProps;switch(Sc(C),C.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return es(C),null;case 1:return De(C.type)&&ht(),es(C),null;case 3:return $=C.stateNode,yp(),ti(Se),ti(Ie),mt(),$.pendingContext&&($.context=$.pendingContext,$.pendingContext=null),(S===null||S.child===null)&&(yd(C)?eu(C):S===null||S.memoizedState.isDehydrated&&!(C.flags&256)||(C.flags|=1024,ra!==null&&(ty(ra),ra=null))),Rh(S,C),es(C),null;case 5:mx(C),$=Ju(Po.current);var J=C.type;if(S!==null&&C.stateNode!=null)tu(S,C,J,Y,$),S.ref!==C.ref&&(C.flags|=512,C.flags|=2097152);else{if(!Y){if(C.stateNode===null)throw Error(o(166));return es(C),null}if(S=Ju(Ml.current),yd(C)){if(!Oe)throw Error(o(175));S=bs(C.stateNode,C.type,C.memoizedProps,$,S,C,!ka),C.updateQueue=S,S!==null&&eu(C)}else{var ae=q(J,Y,$,S,C);kh(ae,C,!1,!1),C.stateNode=ae,W(ae,J,Y,$,S)&&eu(C)}C.ref!==null&&(C.flags|=512,C.flags|=2097152)}return es(C),null;case 6:if(S&&C.stateNode!=null)nu(S,C,S.memoizedProps,Y);else{if(typeof Y!="string"&&C.stateNode===null)throw Error(o(166));if(S=Ju(Po.current),$=Ju(Ml.current),yd(C)){if(!Oe)throw Error(o(176));if(S=C.stateNode,$=C.memoizedProps,(Y=Ya(S,$,C,!ka))&&(J=oi,J!==null))switch(J.tag){case 3:bc(J.stateNode.containerInfo,S,$,(J.mode&1)!==0);break;case 5:Er(J.type,J.memoizedProps,J.stateNode,S,$,(J.mode&1)!==0)}Y&&eu(C)}else C.stateNode=pe(Y,S,$,C)}return es(C),null;case 13:if(ti(ws),Y=C.memoizedState,S===null||S.memoizedState!==null&&S.memoizedState.dehydrated!==null){if(yi&&Ro!==null&&C.mode&1&&!(C.flags&128))Bg(),mf(),C.flags|=98560,J=!1;else if(J=yd(C),Y!==null&&Y.dehydrated!==null){if(S===null){if(!J)throw Error(o(318));if(!Oe)throw Error(o(344));if(J=C.memoizedState,J=J!==null?J.dehydrated:null,!J)throw Error(o(317));Jo(J,C)}else mf(),!(C.flags&128)&&(C.memoizedState=null),C.flags|=4;es(C),J=!1}else ra!==null&&(ty(ra),ra=null),J=!0;if(!J)return C.flags&65536?C:null}return C.flags&128?(C.lanes=$,C):($=Y!==null,$!==(S!==null&&S.memoizedState!==null)&&$&&(C.child.flags|=8192,C.mode&1&&(S===null||ws.current&1?Yi===0&&(Yi=3):jp())),C.updateQueue!==null&&(C.flags|=4),es(C),null);case 4:return yp(),Rh(S,C),S===null&&Ye(C.stateNode.containerInfo),es(C),null;case 10:return cs(C.type._context),es(C),null;case 17:return De(C.type)&&ht(),es(C),null;case 19:if(ti(ws),J=C.memoizedState,J===null)return es(C),null;if(Y=(C.flags&128)!==0,ae=J.rendering,ae===null)if(Y)wu(J,!1);else{if(Yi!==0||S!==null&&S.flags&128)for(S=C.child;S!==null;){if(ae=xd(S),ae!==null){for(C.flags|=128,wu(J,!1),S=ae.updateQueue,S!==null&&(C.updateQueue=S,C.flags|=4),C.subtreeFlags=0,S=$,$=C.child;$!==null;)Y=$,J=S,Y.flags&=14680066,ae=Y.alternate,ae===null?(Y.childLanes=0,Y.lanes=J,Y.child=null,Y.subtreeFlags=0,Y.memoizedProps=null,Y.memoizedState=null,Y.updateQueue=null,Y.dependencies=null,Y.stateNode=null):(Y.childLanes=ae.childLanes,Y.lanes=ae.lanes,Y.child=ae.child,Y.subtreeFlags=0,Y.deletions=null,Y.memoizedProps=ae.memoizedProps,Y.memoizedState=ae.memoizedState,Y.updateQueue=ae.updateQueue,Y.type=ae.type,J=ae.dependencies,Y.dependencies=J===null?null:{lanes:J.lanes,firstContext:J.firstContext}),$=$.sibling;return rr(ws,ws.current&1|2),C.child}S=S.sibling}J.tail!==null&&Rs()>Zg&&(C.flags|=128,Y=!0,wu(J,!1),C.lanes=4194304)}else{if(!Y)if(S=xd(ae),S!==null){if(C.flags|=128,Y=!0,S=S.updateQueue,S!==null&&(C.updateQueue=S,C.flags|=4),wu(J,!0),J.tail===null&&J.tailMode==="hidden"&&!ae.alternate&&!yi)return es(C),null}else 2*Rs()-J.renderingStartTime>Zg&&$!==1073741824&&(C.flags|=128,Y=!0,wu(J,!1),C.lanes=4194304);J.isBackwards?(ae.sibling=C.child,C.child=ae):(S=J.last,S!==null?S.sibling=ae:C.child=ae,J.last=ae)}return J.tail!==null?(C=J.tail,J.rendering=C,J.tail=C.sibling,J.renderingStartTime=Rs(),C.sibling=null,S=ws.current,rr(ws,Y?S&1|2:S&1),C):(es(C),null);case 22:case 23:return ry(),$=C.memoizedState!==null,S!==null&&S.memoizedState!==null!==$&&(C.flags|=8192),$&&C.mode&1?Vs&1073741824&&(es(C),ge&&C.subtreeFlags&6&&(C.flags|=8192)):es(C),null;case 24:return null;case 25:return null}throw Error(o(156,C.tag))}function f2(S,C){switch(Sc(C),C.tag){case 1:return De(C.type)&&ht(),S=C.flags,S&65536?(C.flags=S&-65537|128,C):null;case 3:return yp(),ti(Se),ti(Ie),mt(),S=C.flags,S&65536&&!(S&128)?(C.flags=S&-65537|128,C):null;case 5:return mx(C),null;case 13:if(ti(ws),S=C.memoizedState,S!==null&&S.dehydrated!==null){if(C.alternate===null)throw Error(o(340));mf()}return S=C.flags,S&65536?(C.flags=S&-65537|128,C):null;case 19:return ti(ws),null;case 4:return yp(),null;case 10:return cs(C.type._context),null;case 22:case 23:return ry(),null;case 24:return null;default:return null}}var Ph=!1,Is=!1,La=typeof WeakSet=="function"?WeakSet:Set,nn=null;function bi(S,C){var $=S.ref;if($!==null)if(typeof $=="function")try{$(null)}catch(Y){ns(S,C,Y)}else $.current=null}function Zu(S,C,$){try{$()}catch(Y){ns(S,C,Y)}}var Ic=!1;function J1(S,C){for(ue(S.containerInfo),nn=C;nn!==null;)if(S=nn,C=S.child,(S.subtreeFlags&1028)!==0&&C!==null)C.return=S,nn=C;else for(;nn!==null;){S=nn;try{var $=S.alternate;if(S.flags&1024)switch(S.tag){case 0:case 11:case 15:break;case 1:if($!==null){var Y=$.memoizedProps,J=$.memoizedState,ae=S.stateNode,xe=ae.getSnapshotBeforeUpdate(S.elementType===S.type?Y:Do(S.type,Y),J);ae.__reactInternalSnapshotBeforeUpdate=xe}break;case 3:ge&&Zi(S.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(Ve){ns(S,S.return,Ve)}if(C=S.sibling,C!==null){C.return=S.return,nn=C;break}nn=S.return}return $=Ic,Ic=!1,$}function el(S,C,$){var Y=C.updateQueue;if(Y=Y!==null?Y.lastEffect:null,Y!==null){var J=Y=Y.next;do{if((J.tag&S)===S){var ae=J.destroy;J.destroy=void 0,ae!==void 0&&Zu(C,$,ae)}J=J.next}while(J!==Y)}}function aa(S,C){if(C=C.updateQueue,C=C!==null?C.lastEffect:null,C!==null){var $=C=C.next;do{if(($.tag&S)===S){var Y=$.create;$.destroy=Y()}$=$.next}while($!==C)}}function Z1(S){var C=S.ref;if(C!==null){var $=S.stateNode;switch(S.tag){case 5:S=G($);break;default:S=$}typeof C=="function"?C(S):C.current=S}}function nm(S){var C=S.alternate;C!==null&&(S.alternate=null,nm(C)),S.child=null,S.deletions=null,S.sibling=null,S.tag===5&&(C=S.stateNode,C!==null&&We(C)),S.stateNode=null,S.return=null,S.dependencies=null,S.memoizedProps=null,S.memoizedState=null,S.pendingProps=null,S.stateNode=null,S.updateQueue=null}function ev(S){return S.tag===5||S.tag===3||S.tag===4}function Pc(S){e:for(;;){for(;S.sibling===null;){if(S.return===null||ev(S.return))return null;S=S.return}for(S.sibling.return=S.return,S=S.sibling;S.tag!==5&&S.tag!==6&&S.tag!==18;){if(S.flags&2||S.child===null||S.tag===4)continue e;S.child.return=S,S=S.child}if(!(S.flags&2))return S.stateNode}}function jl(S,C,$){var Y=S.tag;if(Y===5||Y===6)S=S.stateNode,C?wr($,S,C):Vt($,S);else if(Y!==4&&(S=S.child,S!==null))for(jl(S,C,$),S=S.sibling;S!==null;)jl(S,C,$),S=S.sibling}function tv(S,C,$){var Y=S.tag;if(Y===5||Y===6)S=S.stateNode,C?Zn($,S,C):wt($,S);else if(Y!==4&&(S=S.child,S!==null))for(tv(S,C,$),S=S.sibling;S!==null;)tv(S,C,$),S=S.sibling}var zs=null,ua=!1;function Nc(S,C,$){for($=$.child;$!==null;)Xg(S,C,$),$=$.sibling}function Xg(S,C,$){if(Gn&&typeof Gn.onCommitFiberUnmount=="function")try{Gn.onCommitFiberUnmount(xr,$)}catch{}switch($.tag){case 5:Is||bi($,C);case 6:if(ge){var Y=zs,J=ua;zs=null,Nc(S,C,$),zs=Y,ua=J,zs!==null&&(ua?nr(zs,$.stateNode):Hn(zs,$.stateNode))}else Nc(S,C,$);break;case 18:ge&&zs!==null&&(ua?yc(zs,$.stateNode):hf(zs,$.stateNode));break;case 4:ge?(Y=zs,J=ua,zs=$.stateNode.containerInfo,ua=!0,Nc(S,C,$),zs=Y,ua=J):(me&&(Y=$.stateNode.containerInfo,J=po(Y),Sa(Y,J)),Nc(S,C,$));break;case 0:case 11:case 14:case 15:if(!Is&&(Y=$.updateQueue,Y!==null&&(Y=Y.lastEffect,Y!==null))){J=Y=Y.next;do{var ae=J,xe=ae.destroy;ae=ae.tag,xe!==void 0&&(ae&2||ae&4)&&Zu($,C,xe),J=J.next}while(J!==Y)}Nc(S,C,$);break;case 1:if(!Is&&(bi($,C),Y=$.stateNode,typeof Y.componentWillUnmount=="function"))try{Y.props=$.memoizedProps,Y.state=$.memoizedState,Y.componentWillUnmount()}catch(Ve){ns($,C,Ve)}Nc(S,C,$);break;case 21:Nc(S,C,$);break;case 22:$.mode&1?(Is=(Y=Is)||$.memoizedState!==null,Nc(S,C,$),Is=Y):Nc(S,C,$);break;default:Nc(S,C,$)}}function Es(S){var C=S.updateQueue;if(C!==null){S.updateQueue=null;var $=S.stateNode;$===null&&($=S.stateNode=new La),C.forEach(function(Y){var J=gC.bind(null,S,Y);$.has(Y)||($.add(Y),Y.then(J,J))})}}function Eu(S,C){var $=C.deletions;if($!==null)for(var Y=0;Y<$.length;Y++){var J=$[Y];try{var ae=S,xe=C;if(ge){var Ve=xe;e:for(;Ve!==null;){switch(Ve.tag){case 5:zs=Ve.stateNode,ua=!1;break e;case 3:zs=Ve.stateNode.containerInfo,ua=!0;break e;case 4:zs=Ve.stateNode.containerInfo,ua=!0;break e}Ve=Ve.return}if(zs===null)throw Error(o(160));Xg(ae,xe,J),zs=null,ua=!1}else Xg(ae,xe,J);var at=J.alternate;at!==null&&(at.return=null),J.return=null}catch(Ft){ns(J,C,Ft)}}if(C.subtreeFlags&12854)for(C=C.child;C!==null;)rm(C,S),C=C.sibling}function rm(S,C){var $=S.alternate,Y=S.flags;switch(S.tag){case 0:case 11:case 14:case 15:if(Eu(C,S),Ps(S),Y&4){try{el(3,S,S.return),aa(3,S)}catch(an){ns(S,S.return,an)}try{el(5,S,S.return)}catch(an){ns(S,S.return,an)}}break;case 1:Eu(C,S),Ps(S),Y&512&&$!==null&&bi($,$.return);break;case 5:if(Eu(C,S),Ps(S),Y&512&&$!==null&&bi($,$.return),ge){if(S.flags&32){var J=S.stateNode;try{Ei(J)}catch(an){ns(S,S.return,an)}}if(Y&4&&(J=S.stateNode,J!=null)){var ae=S.memoizedProps;if($=$!==null?$.memoizedProps:ae,Y=S.type,C=S.updateQueue,S.updateQueue=null,C!==null)try{Nn(J,C,Y,$,ae,S)}catch(an){ns(S,S.return,an)}}}break;case 6:if(Eu(C,S),Ps(S),Y&4&&ge){if(S.stateNode===null)throw Error(o(162));J=S.stateNode,ae=S.memoizedProps,$=$!==null?$.memoizedProps:ae;try{Wt(J,$,ae)}catch(an){ns(S,S.return,an)}}break;case 3:if(Eu(C,S),Ps(S),Y&4){if(ge&&Oe&&$!==null&&$.memoizedState.isDehydrated)try{hd(C.containerInfo)}catch(an){ns(S,S.return,an)}if(me){J=C.containerInfo,ae=C.pendingChildren;try{Sa(J,ae)}catch(an){ns(S,S.return,an)}}}break;case 4:if(Eu(C,S),Ps(S),Y&4&&me){ae=S.stateNode,J=ae.containerInfo,ae=ae.pendingChildren;try{Sa(J,ae)}catch(an){ns(S,S.return,an)}}break;case 13:Eu(C,S),Ps(S),J=S.child,J.flags&8192&&(ae=J.memoizedState!==null,J.stateNode.isHidden=ae,!ae||J.alternate!==null&&J.alternate.memoizedState!==null||(Lp=Rs())),Y&4&&Es(S);break;case 22:var xe=$!==null&&$.memoizedState!==null;if(S.mode&1?(Is=($=Is)||xe,Eu(C,S),Is=$):Eu(C,S),Ps(S),Y&8192){if($=S.memoizedState!==null,(S.stateNode.isHidden=$)&&!xe&&S.mode&1)for(nn=S,Y=S.child;Y!==null;){for(C=nn=Y;nn!==null;){xe=nn;var Ve=xe.child;switch(xe.tag){case 0:case 11:case 14:case 15:el(4,xe,xe.return);break;case 1:bi(xe,xe.return);var at=xe.stateNode;if(typeof at.componentWillUnmount=="function"){var Ft=xe,yn=xe.return;try{var tr=Ft;at.props=tr.memoizedProps,at.state=tr.memoizedState,at.componentWillUnmount()}catch(an){ns(Ft,yn,an)}}break;case 5:bi(xe,xe.return);break;case 22:if(xe.memoizedState!==null){Qg(C);continue}}Ve!==null?(Ve.return=xe,nn=Ve):Qg(C)}Y=Y.sibling}if(ge){e:if(Y=null,ge)for(C=S;;){if(C.tag===5){if(Y===null){Y=C;try{J=C.stateNode,$?Dr(J):Ji(C.stateNode,C.memoizedProps)}catch(an){ns(S,S.return,an)}}}else if(C.tag===6){if(Y===null)try{ae=C.stateNode,$?Co(ae):Di(ae,C.memoizedProps)}catch(an){ns(S,S.return,an)}}else if((C.tag!==22&&C.tag!==23||C.memoizedState===null||C===S)&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===S)break e;for(;C.sibling===null;){if(C.return===null||C.return===S)break e;Y===C&&(Y=null),C=C.return}Y===C&&(Y=null),C.sibling.return=C.return,C=C.sibling}}}break;case 19:Eu(C,S),Ps(S),Y&4&&Es(S);break;case 21:break;default:Eu(C,S),Ps(S)}}function Ps(S){var C=S.flags;if(C&2){try{if(ge){e:{for(var $=S.return;$!==null;){if(ev($)){var Y=$;break e}$=$.return}throw Error(o(160))}switch(Y.tag){case 5:var J=Y.stateNode;Y.flags&32&&(Ei(J),Y.flags&=-33);var ae=Pc(S);tv(S,ae,J);break;case 3:case 4:var xe=Y.stateNode.containerInfo,Ve=Pc(S);jl(S,Ve,xe);break;default:throw Error(o(161))}}}catch(at){ns(S,S.return,at)}S.flags&=-3}C&4096&&(S.flags&=-4097)}function Nh(S,C,$){nn=S,Np(S)}function Np(S,C,$){for(var Y=(S.mode&1)!==0;nn!==null;){var J=nn,ae=J.child;if(J.tag===22&&Y){var xe=J.memoizedState!==null||Ph;if(!xe){var Ve=J.alternate,at=Ve!==null&&Ve.memoizedState!==null||Is;Ve=Ph;var Ft=Is;if(Ph=xe,(Is=at)&&!Ft)for(nn=J;nn!==null;)xe=nn,at=xe.child,xe.tag===22&&xe.memoizedState!==null?Mo(J):at!==null?(at.return=xe,nn=at):Mo(J);for(;ae!==null;)nn=ae,Np(ae),ae=ae.sibling;nn=J,Ph=Ve,Is=Ft}wf(S)}else J.subtreeFlags&8772&&ae!==null?(ae.return=J,nn=ae):wf(S)}}function wf(S){for(;nn!==null;){var C=nn;if(C.flags&8772){var $=C.alternate;try{if(C.flags&8772)switch(C.tag){case 0:case 11:case 15:Is||aa(5,C);break;case 1:var Y=C.stateNode;if(C.flags&4&&!Is)if($===null)Y.componentDidMount();else{var J=C.elementType===C.type?$.memoizedProps:Do(C.type,$.memoizedProps);Y.componentDidUpdate(J,$.memoizedState,Y.__reactInternalSnapshotBeforeUpdate)}var ae=C.updateQueue;ae!==null&&u2(C,ae,Y);break;case 3:var xe=C.updateQueue;if(xe!==null){if($=null,C.child!==null)switch(C.child.tag){case 5:$=G(C.child.stateNode);break;case 1:$=C.child.stateNode}u2(C,xe,$)}break;case 5:var Ve=C.stateNode;$===null&&C.flags&4&&bn(Ve,C.type,C.memoizedProps,C);break;case 6:break;case 4:break;case 12:break;case 13:if(Oe&&C.memoizedState===null){var at=C.alternate;if(at!==null){var Ft=at.memoizedState;if(Ft!==null){var yn=Ft.dehydrated;yn!==null&&df(yn)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(o(163))}Is||C.flags&512&&Z1(C)}catch(tr){ns(C,C.return,tr)}}if(C===S){nn=null;break}if($=C.sibling,$!==null){$.return=C.return,nn=$;break}nn=C.return}}function Qg(S){for(;nn!==null;){var C=nn;if(C===S){nn=null;break}var $=C.sibling;if($!==null){$.return=C.return,nn=$;break}nn=C.return}}function Mo(S){for(;nn!==null;){var C=nn;try{switch(C.tag){case 0:case 11:case 15:var $=C.return;try{aa(4,C)}catch(at){ns(C,$,at)}break;case 1:var Y=C.stateNode;if(typeof Y.componentDidMount=="function"){var J=C.return;try{Y.componentDidMount()}catch(at){ns(C,J,at)}}var ae=C.return;try{Z1(C)}catch(at){ns(C,ae,at)}break;case 5:var xe=C.return;try{Z1(C)}catch(at){ns(C,xe,at)}}}catch(at){ns(C,C.return,at)}if(C===S){nn=null;break}var Ve=C.sibling;if(Ve!==null){Ve.return=C.return,nn=Ve;break}nn=C.return}}var Dc=0,ru=1,Ef=2,im=3,Dp=4;if(typeof Symbol=="function"&&Symbol.for){var tl=Symbol.for;Dc=tl("selector.component"),ru=tl("selector.has_pseudo_class"),Ef=tl("selector.role"),im=tl("selector.test_id"),Dp=tl("selector.text")}function Su(S){var C=Me(S);if(C!=null){if(typeof C.memoizedProps["data-testname"]!="string")throw Error(o(364));return C}if(S=Rt(S),S===null)throw Error(o(362));return S.stateNode.current}function sm(S,C){switch(C.$$typeof){case Dc:if(S.type===C.value)return!0;break;case ru:e:{C=C.value,S=[S,0];for(var $=0;$<S.length;){var Y=S[$++],J=S[$++],ae=C[J];if(Y.tag!==5||!Lt(Y)){for(;ae!=null&&sm(Y,ae);)J++,ae=C[J];if(J===C.length){C=!0;break e}else for(Y=Y.child;Y!==null;)S.push(Y,J),Y=Y.sibling}}C=!1}return C;case Ef:if(S.tag===5&&sn(S.stateNode,C.value))return!0;break;case Dp:if((S.tag===5||S.tag===6)&&(S=Ke(S),S!==null&&0<=S.indexOf(C.value)))return!0;break;case im:if(S.tag===5&&(S=S.memoizedProps["data-testname"],typeof S=="string"&&S.toLowerCase()===C.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function nv(S){switch(S.$$typeof){case Dc:return"<"+(k(S.value)||"Unknown")+">";case ru:return":has("+(nv(S)||"")+")";case Ef:return'[role="'+S.value+'"]';case Dp:return'"'+S.value+'"';case im:return'[data-testname="'+S.value+'"]';default:throw Error(o(365))}}function Sf(S,C){var $=[];S=[S,0];for(var Y=0;Y<S.length;){var J=S[Y++],ae=S[Y++],xe=C[ae];if(J.tag!==5||!Lt(J)){for(;xe!=null&&sm(J,xe);)ae++,xe=C[ae];if(ae===C.length)$.push(J);else for(J=J.child;J!==null;)S.push(J,ae),J=J.sibling}}return $}function Tu(S,C){if(!_t)throw Error(o(363));S=Su(S),S=Sf(S,C),C=[],S=Array.from(S);for(var $=0;$<S.length;){var Y=S[$++];if(Y.tag===5)Lt(Y)||C.push(Y.stateNode);else for(Y=Y.child;Y!==null;)S.push(Y),Y=Y.sibling}return C}var rv=Math.ceil,Jg=a.ReactCurrentDispatcher,Dh=a.ReactCurrentOwner,Ss=a.ReactCurrentBatchConfig,fr=0,$i=null,fs=null,Ns=0,Vs=0,Oh=qi(0),Yi=0,Op=null,Tf=0,Bi=0,Ed=0,Mp=null,la=null,Lp=0,Zg=1/0,Fa=null;function Ti(){Zg=Rs()+500}var ds=!1,Hs=null,nl=null,Mh=!1,Cu=null,dr=0,io=0,ey=null,Cf=-1,Fp=0;function ts(){return fr&6?Rs():Cf!==-1?Cf:Cf=Rs()}function vo(S){return S.mode&1?fr&2&&Ns!==0?Ns&-Ns:Ra.transition!==null?(Fp===0&&(Fp=pf()),Fp):(S=cr,S!==0?S:lt()):1}function ji(S,C,$,Y){if(50<io)throw io=0,ey=null,Error(o(185));Mi(S,$,Y),(!(fr&2)||S!==$i)&&(S===$i&&(!(fr&2)&&(Bi|=$),Yi===4&&qs(S,Ns)),$a(S,Y),$===1&&fr===0&&!(C.mode&1)&&(Ti(),hn&&dn()))}function $a(S,C){var $=S.callbackNode;pd(S,C);var Y=Ao(S,S===$i?Ns:0);if(Y===0)$!==null&&gp($),S.callbackNode=null,S.callbackPriority=0;else if(C=Y&-Y,S.callbackPriority!==C){if($!=null&&gp($),C===1)S.tag===0?gi(Af.bind(null,S)):Or(Af.bind(null,S)),nt?yt(function(){!(fr&6)&&dn()}):Aa(md,dn),$=null;else{switch(Ca(Y)){case 1:$=md;break;case 4:$=wc;break;case 16:$=Dl;break;case 536870912:$=Y0;break;default:$=Dl}$=sv($,$p.bind(null,S))}S.callbackPriority=C,S.callbackNode=$}}function $p(S,C){if(Cf=-1,Fp=0,fr&6)throw Error(o(327));var $=S.callbackNode;if(Mc()&&S.callbackNode!==$)return null;var Y=Ao(S,S===$i?Ns:0);if(Y===0)return null;if(Y&30||Y&S.expiredLanes||C)C=Sd(S,Y);else{C=Y;var J=fr;fr|=2;var ae=iy();($i!==S||Ns!==C)&&(Fa=null,Ti(),Oc(S,C));do try{kf();break}catch(Ve){Bp(S,Ve)}while(!0);Pr(),Jg.current=ae,fr=J,fs!==null?C=0:($i=null,Ns=0,C=Yi)}if(C!==0){if(C===2&&(J=Gu(S),J!==0&&(Y=J,C=om(S,J))),C===1)throw $=Op,Oc(S,0),qs(S,Y),$a(S,Rs()),$;if(C===6)qs(S,Y);else{if(J=S.current.alternate,!(Y&30)&&!_x(J)&&(C=Sd(S,Y),C===2&&(ae=Gu(S),ae!==0&&(Y=ae,C=om(S,ae))),C===1))throw $=Op,Oc(S,0),qs(S,Y),$a(S,Rs()),$;switch(S.finishedWork=J,S.finishedLanes=Y,C){case 0:case 1:throw Error(o(345));case 2:Td(S,la,Fa);break;case 3:if(qs(S,Y),(Y&130023424)===Y&&(C=Lp+500-Rs(),10<C)){if(Ao(S,0)!==0)break;if(J=S.suspendedLanes,(J&Y)!==Y){ts(),S.pingedLanes|=S.suspendedLanes&J;break}S.timeoutHandle=ce(Td.bind(null,S,la,Fa),C);break}Td(S,la,Fa);break;case 4:if(qs(S,Y),(Y&4194240)===Y)break;for(C=S.eventTimes,J=-1;0<Y;){var xe=31-Zt(Y);ae=1<<xe,xe=C[xe],xe>J&&(J=xe),Y&=~ae}if(Y=J,Y=Rs()-Y,Y=(120>Y?120:480>Y?480:1080>Y?1080:1920>Y?1920:3e3>Y?3e3:4320>Y?4320:1960*rv(Y/1960))-Y,10<Y){S.timeoutHandle=ce(Td.bind(null,S,la,Fa),Y);break}Td(S,la,Fa);break;case 5:Td(S,la,Fa);break;default:throw Error(o(329))}}}return $a(S,Rs()),S.callbackNode===$?$p.bind(null,S):null}function om(S,C){var $=Mp;return S.current.memoizedState.isDehydrated&&(Oc(S,C).flags|=256),S=Sd(S,C),S!==2&&(C=la,la=$,C!==null&&ty(C)),S}function ty(S){la===null?la=S:la.push.apply(la,S)}function _x(S){for(var C=S;;){if(C.flags&16384){var $=C.updateQueue;if($!==null&&($=$.stores,$!==null))for(var Y=0;Y<$.length;Y++){var J=$[Y],ae=J.getSnapshot;J=J.value;try{if(!Ne(ae(),J))return!1}catch{return!1}}}if($=C.child,C.subtreeFlags&16384&&$!==null)$.return=C,C=$;else{if(C===S)break;for(;C.sibling===null;){if(C.return===null||C.return===S)return!0;C=C.return}C.sibling.return=C.return,C=C.sibling}}return!0}function qs(S,C){for(C&=~Ed,C&=~Bi,S.suspendedLanes|=C,S.pingedLanes&=~C,S=S.expirationTimes;0<C;){var $=31-Zt(C),Y=1<<$;S[$]=-1,C&=~Y}}function Af(S){if(fr&6)throw Error(o(327));Mc();var C=Ao(S,0);if(!(C&1))return $a(S,Rs()),null;var $=Sd(S,C);if(S.tag!==0&&$===2){var Y=Gu(S);Y!==0&&(C=Y,$=om(S,Y))}if($===1)throw $=Op,Oc(S,0),qs(S,C),$a(S,Rs()),$;if($===6)throw Error(o(345));return S.finishedWork=S.current.alternate,S.finishedLanes=C,Td(S,la,Fa),$a(S,Rs()),null}function ny(S){Cu!==null&&Cu.tag===0&&!(fr&6)&&Mc();var C=fr;fr|=1;var $=Ss.transition,Y=cr;try{if(Ss.transition=null,cr=1,S)return S()}finally{cr=Y,Ss.transition=$,fr=C,!(fr&6)&&dn()}}function ry(){Vs=Oh.current,ti(Oh)}function Oc(S,C){S.finishedWork=null,S.finishedLanes=0;var $=S.timeoutHandle;if($!==Ee&&(S.timeoutHandle=Ee,he($)),fs!==null)for($=fs.return;$!==null;){var Y=$;switch(Sc(Y),Y.tag){case 1:Y=Y.type.childContextTypes,Y!=null&&ht();break;case 3:yp(),ti(Se),ti(Ie),mt();break;case 5:mx(Y);break;case 4:yp();break;case 13:ti(ws);break;case 19:ti(ws);break;case 10:cs(Y.type._context);break;case 22:case 23:ry()}$=$.return}if($i=S,fs=S=Lc(S.current,null),Ns=Vs=C,Yi=0,Op=null,Ed=Bi=Tf=0,la=Mp=null,Ol!==null){for(C=0;C<Ol.length;C++)if($=Ol[C],Y=$.interleaved,Y!==null){$.interleaved=null;var J=Y.next,ae=$.pending;if(ae!==null){var xe=ae.next;ae.next=J,Y.next=xe}$.pending=Y}Ol=null}return S}function Bp(S,C){do{var $=fs;try{if(Pr(),et.current=Ep,bh){for(var Y=Dn.memoizedState;Y!==null;){var J=Y.queue;J!==null&&(J.pending=null),Y=Y.next}bh=!1}if($n=0,er=Cr=Dn=null,jg=!1,Ia=0,Dh.current=null,$===null||$.return===null){Yi=1,Op=C,fs=null;break}e:{var ae=S,xe=$.return,Ve=$,at=C;if(C=Ns,Ve.flags|=32768,at!==null&&typeof at=="object"&&typeof at.then=="function"){var Ft=at,yn=Ve,tr=yn.tag;if(!(yn.mode&1)&&(tr===0||tr===11||tr===15)){var an=yn.alternate;an?(yn.updateQueue=an.updateQueue,yn.memoizedState=an.memoizedState,yn.lanes=an.lanes):(yn.updateQueue=null,yn.memoizedState=null)}var Ui=kp(xe);if(Ui!==null){Ui.flags&=-257,Rc(Ui,xe,Ve,ae,C),Ui.mode&1&&ye(ae,Ft,C),C=Ui,at=Ft;var Si=C.updateQueue;if(Si===null){var su=new Set;su.add(at),C.updateQueue=su}else Si.add(at);break e}else{if(!(C&1)){ye(ae,Ft,C),jp();break e}at=Error(o(426))}}else if(yi&&Ve.mode&1){var Fo=kp(xe);if(Fo!==null){!(Fo.flags&65536)&&(Fo.flags|=256),Rc(Fo,xe,Ve,ae,C),gh(Ap(at,Ve));break e}}ae=at=Ap(at,Ve),Yi!==4&&(Yi=2),Mp===null?Mp=[ae]:Mp.push(ae),ae=xe;do{switch(ae.tag){case 3:ae.flags|=65536,C&=-C,ae.lanes|=C;var it=_u(ae,at,C);Qu(ae,it);break e;case 1:Ve=at;var qe=ae.type,ct=ae.stateNode;if(!(ae.flags&128)&&(typeof qe.getDerivedStateFromError=="function"||ct!==null&&typeof ct.componentDidCatch=="function"&&(nl===null||!nl.has(ct)))){ae.flags|=65536,C&=-C,ae.lanes|=C;var rn=Yg(ae,Ve,C);Qu(ae,rn);break e}}ae=ae.return}while(ae!==null)}Rf($)}catch(kn){C=kn,fs===$&&$!==null&&(fs=$=$.return);continue}break}while(!0)}function iy(){var S=Jg.current;return Jg.current=Ep,S===null?Ep:S}function jp(){(Yi===0||Yi===3||Yi===2)&&(Yi=4),$i===null||!(Tf&268435455)&&!(Bi&268435455)||qs($i,Ns)}function Sd(S,C){var $=fr;fr|=2;var Y=iy();($i!==S||Ns!==C)&&(Fa=null,Oc(S,C));do try{iv();break}catch(J){Bp(S,J)}while(!0);if(Pr(),fr=$,Jg.current=Y,fs!==null)throw Error(o(261));return $i=null,Ns=0,Yi}function iv(){for(;fs!==null;)wx(fs)}function kf(){for(;fs!==null&&!Nl();)wx(fs)}function wx(S){var C=Ax(S.alternate,S,Vs);S.memoizedProps=S.pendingProps,C===null?Rf(S):fs=C,Dh.current=null}function Rf(S){var C=S;do{var $=C.alternate;if(S=C.return,C.flags&32768){if($=f2($,C),$!==null){$.flags&=32767,fs=$;return}if(S!==null)S.flags|=32768,S.subtreeFlags=0,S.deletions=null;else{Yi=6,fs=null;return}}else if($=Pp($,C,Vs),$!==null){fs=$;return}if(C=C.sibling,C!==null){fs=C;return}fs=C=S}while(C!==null);Yi===0&&(Yi=5)}function Td(S,C,$){var Y=cr,J=Ss.transition;try{Ss.transition=null,cr=1,Ex(S,C,$,Y)}finally{Ss.transition=J,cr=Y}return null}function Ex(S,C,$,Y){do Mc();while(Cu!==null);if(fr&6)throw Error(o(327));$=S.finishedWork;var J=S.finishedLanes;if($===null)return null;if(S.finishedWork=null,S.finishedLanes=0,$===S.current)throw Error(o(177));S.callbackNode=null,S.callbackPriority=0;var ae=$.lanes|$.childLanes;if(ko(S,ae),S===$i&&(fs=$i=null,Ns=0),!($.subtreeFlags&2064)&&!($.flags&2064)||Mh||(Mh=!0,sv(Dl,function(){return Mc(),null})),ae=($.flags&15990)!==0,$.subtreeFlags&15990||ae){ae=Ss.transition,Ss.transition=null;var xe=cr;cr=1;var Ve=fr;fr|=4,Dh.current=null,J1(S,$),rm($,S),X(S.containerInfo),S.current=$,Nh($),ks(),fr=Ve,cr=xe,Ss.transition=ae}else S.current=$;if(Mh&&(Mh=!1,Cu=S,dr=J),ae=S.pendingLanes,ae===0&&(nl=null),Ec($.stateNode),$a(S,Rs()),C!==null)for(Y=S.onRecoverableError,$=0;$<C.length;$++)J=C[$],Y(J.value,{componentStack:J.stack,digest:J.digest});if(ds)throw ds=!1,S=Hs,Hs=null,S;return dr&1&&S.tag!==0&&Mc(),ae=S.pendingLanes,ae&1?S===ey?io++:(io=0,ey=S):io=0,dn(),null}function Mc(){if(Cu!==null){var S=Ca(dr),C=Ss.transition,$=cr;try{if(Ss.transition=null,cr=16>S?16:S,Cu===null)var Y=!1;else{if(S=Cu,Cu=null,dr=0,fr&6)throw Error(o(331));var J=fr;for(fr|=4,nn=S.current;nn!==null;){var ae=nn,xe=ae.child;if(nn.flags&16){var Ve=ae.deletions;if(Ve!==null){for(var at=0;at<Ve.length;at++){var Ft=Ve[at];for(nn=Ft;nn!==null;){var yn=nn;switch(yn.tag){case 0:case 11:case 15:el(8,yn,ae)}var tr=yn.child;if(tr!==null)tr.return=yn,nn=tr;else for(;nn!==null;){yn=nn;var an=yn.sibling,Ui=yn.return;if(nm(yn),yn===Ft){nn=null;break}if(an!==null){an.return=Ui,nn=an;break}nn=Ui}}}var Si=ae.alternate;if(Si!==null){var su=Si.child;if(su!==null){Si.child=null;do{var Fo=su.sibling;su.sibling=null,su=Fo}while(su!==null)}}nn=ae}}if(ae.subtreeFlags&2064&&xe!==null)xe.return=ae,nn=xe;else e:for(;nn!==null;){if(ae=nn,ae.flags&2048)switch(ae.tag){case 0:case 11:case 15:el(9,ae,ae.return)}var it=ae.sibling;if(it!==null){it.return=ae.return,nn=it;break e}nn=ae.return}}var qe=S.current;for(nn=qe;nn!==null;){xe=nn;var ct=xe.child;if(xe.subtreeFlags&2064&&ct!==null)ct.return=xe,nn=ct;else e:for(xe=qe;nn!==null;){if(Ve=nn,Ve.flags&2048)try{switch(Ve.tag){case 0:case 11:case 15:aa(9,Ve)}}catch(kn){ns(Ve,Ve.return,kn)}if(Ve===xe){nn=null;break e}var rn=Ve.sibling;if(rn!==null){rn.return=Ve.return,nn=rn;break e}nn=Ve.return}}if(fr=J,dn(),Gn&&typeof Gn.onPostCommitFiberRoot=="function")try{Gn.onPostCommitFiberRoot(xr,S)}catch{}Y=!0}return Y}finally{cr=$,Ss.transition=C}}return!1}function Sx(S,C,$){C=Ap($,C),C=_u(S,C,1),S=Cc(S,C,1),C=ts(),S!==null&&(Mi(S,1,C),$a(S,C))}function ns(S,C,$){if(S.tag===3)Sx(S,S,$);else for(;C!==null;){if(C.tag===3){Sx(C,S,$);break}else if(C.tag===1){var Y=C.stateNode;if(typeof C.type.getDerivedStateFromError=="function"||typeof Y.componentDidCatch=="function"&&(nl===null||!nl.has(Y))){S=Ap($,S),S=Yg(C,S,1),C=Cc(C,S,1),S=ts(),C!==null&&(Mi(C,1,S),$a(C,S));break}}C=C.return}}function d2(S,C,$){var Y=S.pingCache;Y!==null&&Y.delete(C),C=ts(),S.pingedLanes|=S.suspendedLanes&$,$i===S&&(Ns&$)===$&&(Yi===4||Yi===3&&(Ns&130023424)===Ns&&500>Rs()-Lp?Oc(S,0):Ed|=$),$a(S,C)}function Tx(S,C){C===0&&(S.mode&1?(C=br,br<<=1,!(br&130023424)&&(br=4194304)):C=1);var $=ts();S=Tc(S,C),S!==null&&(Mi(S,C,$),$a(S,$))}function Cx(S){var C=S.memoizedState,$=0;C!==null&&($=C.retryLane),Tx(S,$)}function gC(S,C){var $=0;switch(S.tag){case 13:var Y=S.stateNode,J=S.memoizedState;J!==null&&($=J.retryLane);break;case 19:Y=S.stateNode;break;default:throw Error(o(314))}Y!==null&&Y.delete(C),Tx(S,$)}var Ax;Ax=function(S,C,$){if(S!==null)if(S.memoizedProps!==C.pendingProps||Se.current)On=!0;else{if(!(S.lanes&$)&&!(C.flags&128))return On=!1,Ah(S,C,$);On=!!(S.flags&131072)}else On=!1,yi&&C.flags&1048576&&Fg(C,ta,C.index);switch(C.lanes=0,C.tag){case 2:var Y=C.type;Kg(S,C),S=C.pendingProps;var J=Ue(C,Ie.current);go(C,$),J=xh(null,C,Y,S,J,$);var ae=vp();return C.flags|=1,typeof J=="object"&&J!==null&&typeof J.render=="function"&&J.$$typeof===void 0?(C.tag=1,C.memoizedState=null,C.updateQueue=null,De(Y)?(ae=!0,kt(C)):ae=!1,C.memoizedState=J.state!==null&&J.state!==void 0?J.state:null,yh(C),J.updater=wd,C.stateNode=J,J._reactInternals=C,bf(C,Y,S,$),C=Da(null,C,Y,!0,ae,$)):(C.tag=0,yi&&ae&&no(C),Oo(null,C,J,$),C=C.child),C;case 16:Y=C.elementType;e:{switch(Kg(S,C),S=C.pendingProps,J=Y._init,Y=J(Y._payload),C.type=Y,J=C.tag=yC(Y),S=Do(Y,S),J){case 0:C=xf(null,C,Y,S,$);break e;case 1:C=sa(null,C,Y,S,$);break e;case 11:C=K1(null,C,Y,S,$);break e;case 14:C=Rp(null,C,Y,Do(Y.type,S),$);break e}throw Error(o(306,Y,""))}return C;case 0:return Y=C.type,J=C.pendingProps,J=C.elementType===Y?J:Do(Y,J),xf(S,C,Y,J,$);case 1:return Y=C.type,J=C.pendingProps,J=C.elementType===Y?J:Do(Y,J),sa(S,C,Y,J,$);case 3:e:{if(Oa(C),S===null)throw Error(o(387));Y=C.pendingProps,ae=C.memoizedState,J=ae.element,a2(S,C),Ac(C,Y,null,$);var xe=C.memoizedState;if(Y=xe.element,Oe&&ae.isDehydrated)if(ae={element:Y,isDehydrated:!1,cache:xe.cache,pendingSuspenseBoundaries:xe.pendingSuspenseBoundaries,transitions:xe.transitions},C.updateQueue.baseState=ae,C.memoizedState=ae,C.flags&256){J=Ap(Error(o(423)),C),C=Ip(S,C,Y,$,J);break e}else if(Y!==J){J=Ap(Error(o(424)),C),C=Ip(S,C,Y,$,J);break e}else for(Oe&&(Ro=Hr(C.stateNode.containerInfo),oi=C,yi=!0,ra=null,ka=!1),$=Xe(C,null,Y,$),C.child=$;$;)$.flags=$.flags&-3|4096,$=$.sibling;else{if(mf(),Y===J){C=Za(S,C,$);break e}Oo(S,C,Y,$)}C=C.child}return C;case 5:return px(C),S===null&&Ku(C),Y=C.type,J=C.pendingProps,ae=S!==null?S.memoizedProps:null,xe=J.children,oe(Y,J)?xe=null:ae!==null&&oe(Y,ae)&&(C.flags|=32),Fi(S,C),Oo(S,C,xe,$),C.child;case 6:return S===null&&Ku(C),null;case 13:return xx(S,C,$);case 4:return V1(C,C.stateNode.containerInfo),Y=C.pendingProps,S===null?C.child=be(C,null,Y,$):Oo(S,C,Y,$),C.child;case 11:return Y=C.type,J=C.pendingProps,J=C.elementType===Y?J:Do(Y,J),K1(S,C,Y,J,$);case 7:return Oo(S,C,C.pendingProps,$),C.child;case 8:return Oo(S,C,C.pendingProps.children,$),C.child;case 12:return Oo(S,C,C.pendingProps.children,$),C.child;case 10:e:{if(Y=C.type._context,J=C.pendingProps,ae=C.memoizedProps,xe=J.value,ai(C,Y,xe),ae!==null)if(Ne(ae.value,xe)){if(ae.children===J.children&&!Se.current){C=Za(S,C,$);break e}}else for(ae=C.child,ae!==null&&(ae.return=C);ae!==null;){var Ve=ae.dependencies;if(Ve!==null){xe=ae.child;for(var at=Ve.firstContext;at!==null;){if(at.context===Y){if(ae.tag===1){at=bd(-1,$&-$),at.tag=2;var Ft=ae.updateQueue;if(Ft!==null){Ft=Ft.shared;var yn=Ft.pending;yn===null?at.next=at:(at.next=yn.next,yn.next=at),Ft.pending=at}}ae.lanes|=$,at=ae.alternate,at!==null&&(at.lanes|=$),Io(ae.return,$,C),Ve.lanes|=$;break}at=at.next}}else if(ae.tag===10)xe=ae.type===C.type?null:ae.child;else if(ae.tag===18){if(xe=ae.return,xe===null)throw Error(o(341));xe.lanes|=$,Ve=xe.alternate,Ve!==null&&(Ve.lanes|=$),Io(xe,$,C),xe=ae.sibling}else xe=ae.child;if(xe!==null)xe.return=ae;else for(xe=ae;xe!==null;){if(xe===C){xe=null;break}if(ae=xe.sibling,ae!==null){ae.return=xe.return,xe=ae;break}xe=xe.return}ae=xe}Oo(S,C,J.children,$),C=C.child}return C;case 9:return J=C.type,Y=C.pendingProps.children,go(C,$),J=yo(J),Y=Y(J),C.flags|=1,Oo(S,C,Y,$),C.child;case 14:return Y=C.type,J=Do(Y,C.pendingProps),J=Do(Y.type,J),Rp(S,C,Y,J,$);case 15:return Qa(S,C,C.type,C.pendingProps,$);case 17:return Y=C.type,J=C.pendingProps,J=C.elementType===Y?J:Do(Y,J),Kg(S,C),C.tag=1,De(Y)?(S=!0,kt(C)):S=!1,go(C,$),Cp(C,Y,J),bf(C,Y,J,$),Da(null,C,Y,!0,S,$);case 19:return Q1(S,C,$);case 22:return Gi(S,C,$)}throw Error(o(156,C.tag))};function sv(S,C){return Aa(S,C)}function iu(S,C,$,Y){this.tag=S,this.key=$,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=C,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=Y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ds(S,C,$,Y){return new iu(S,C,$,Y)}function am(S){return S=S.prototype,!(!S||!S.isReactComponent)}function yC(S){if(typeof S=="function")return am(S)?1:0;if(S!=null){if(S=S.$$typeof,S===m)return 11;if(S===y)return 14}return 2}function Lc(S,C){var $=S.alternate;return $===null?($=Ds(S.tag,C,S.key,S.mode),$.elementType=S.elementType,$.type=S.type,$.stateNode=S.stateNode,$.alternate=S,S.alternate=$):($.pendingProps=C,$.type=S.type,$.flags=0,$.subtreeFlags=0,$.deletions=null),$.flags=S.flags&14680064,$.childLanes=S.childLanes,$.lanes=S.lanes,$.child=S.child,$.memoizedProps=S.memoizedProps,$.memoizedState=S.memoizedState,$.updateQueue=S.updateQueue,C=S.dependencies,$.dependencies=C===null?null:{lanes:C.lanes,firstContext:C.firstContext},$.sibling=S.sibling,$.index=S.index,$.ref=S.ref,$}function Cd(S,C,$,Y,J,ae){var xe=2;if(Y=S,typeof S=="function")am(S)&&(xe=1);else if(typeof S=="string")xe=5;else e:switch(S){case c:return Lo($.children,J,ae,C);case f:xe=8,J|=8;break;case d:return S=Ds(12,$,C,J|2),S.elementType=d,S.lanes=ae,S;case g:return S=Ds(13,$,C,J),S.elementType=g,S.lanes=ae,S;case b:return S=Ds(19,$,C,J),S.elementType=b,S.lanes=ae,S;case w:return Up($,J,ae,C);default:if(typeof S=="object"&&S!==null)switch(S.$$typeof){case h:xe=10;break e;case p:xe=9;break e;case m:xe=11;break e;case y:xe=14;break e;case x:xe=16,Y=null;break e}throw Error(o(130,S==null?S:typeof S,""))}return C=Ds(xe,$,C,J),C.elementType=S,C.type=Y,C.lanes=ae,C}function Lo(S,C,$,Y){return S=Ds(7,S,Y,C),S.lanes=$,S}function Up(S,C,$,Y){return S=Ds(22,S,Y,C),S.elementType=w,S.lanes=$,S.stateNode={isHidden:!1},S}function um(S,C,$){return S=Ds(6,S,null,C),S.lanes=$,S}function sy(S,C,$){return C=Ds(4,S.children!==null?S.children:[],S.key,C),C.lanes=$,C.stateNode={containerInfo:S.containerInfo,pendingChildren:null,implementation:S.implementation},C}function zp(S,C,$,Y,J){this.tag=C,this.containerInfo=S,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Ee,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=eo(0),this.expirationTimes=eo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=eo(0),this.identifierPrefix=Y,this.onRecoverableError=J,Oe&&(this.mutableSourceEagerHydrationData=null)}function Vp(S,C,$,Y,J,ae,xe,Ve,at){return S=new zp(S,C,$,Ve,at),C===1?(C=1,ae===!0&&(C|=8)):C=0,ae=Ds(3,null,null,C),S.current=ae,ae.stateNode=S,ae.memoizedState={element:Y,isDehydrated:$,cache:null,transitions:null,pendingSuspenseBoundaries:null},yh(ae),S}function ov(S){if(!S)return ve;S=S._reactInternals;e:{if(O(S)!==S||S.tag!==1)throw Error(o(170));var C=S;do{switch(C.tag){case 3:C=C.stateNode.context;break e;case 1:if(De(C.type)){C=C.stateNode.__reactInternalMemoizedMergedChildContext;break e}}C=C.return}while(C!==null);throw Error(o(171))}if(S.tag===1){var $=S.type;if(De($))return Pt(S,$,C)}return C}function Lh(S){var C=S._reactInternals;if(C===void 0)throw typeof S.render=="function"?Error(o(188)):(S=Object.keys(S).join(","),Error(o(268,S)));return S=H(C),S===null?null:S.stateNode}function oy(S,C){if(S=S.memoizedState,S!==null&&S.dehydrated!==null){var $=S.retryLane;S.retryLane=$!==0&&$<C?$:C}}function Ad(S,C){oy(S,C),(S=S.alternate)&&oy(S,C)}function h2(S){return S=H(S),S===null?null:S.stateNode}function ay(){return null}return n.attemptContinuousHydration=function(S){if(S.tag===13){var C=Tc(S,134217728);if(C!==null){var $=ts();ji(C,S,134217728,$)}Ad(S,134217728)}},n.attemptDiscreteHydration=function(S){if(S.tag===13){var C=Tc(S,1);if(C!==null){var $=ts();ji(C,S,1,$)}Ad(S,1)}},n.attemptHydrationAtCurrentPriority=function(S){if(S.tag===13){var C=vo(S),$=Tc(S,C);if($!==null){var Y=ts();ji($,S,C,Y)}Ad(S,C)}},n.attemptSynchronousHydration=function(S){switch(S.tag){case 3:var C=S.stateNode;if(C.current.memoizedState.isDehydrated){var $=ls(C.pendingLanes);$!==0&&(ea(C,$|1),$a(C,Rs()),!(fr&6)&&(Ti(),dn()))}break;case 13:ny(function(){var Y=Tc(S,1);if(Y!==null){var J=ts();ji(Y,S,1,J)}}),Ad(S,1)}},n.batchedUpdates=function(S,C){var $=fr;fr|=1;try{return S(C)}finally{fr=$,fr===0&&(Ti(),hn&&dn())}},n.createComponentSelector=function(S){return{$$typeof:Dc,value:S}},n.createContainer=function(S,C,$,Y,J,ae,xe){return Vp(S,C,!1,null,$,Y,J,ae,xe)},n.createHasPseudoClassSelector=function(S){return{$$typeof:ru,value:S}},n.createHydrationContainer=function(S,C,$,Y,J,ae,xe,Ve,at){return S=Vp($,Y,!0,S,J,ae,xe,Ve,at),S.context=ov(null),$=S.current,Y=ts(),J=vo($),ae=bd(Y,J),ae.callback=C??null,Cc($,ae,J),S.current.lanes=J,Mi(S,J,Y),$a(S,Y),S},n.createPortal=function(S,C,$){var Y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:Y==null?null:""+Y,children:S,containerInfo:C,implementation:$}},n.createRoleSelector=function(S){return{$$typeof:Ef,value:S}},n.createTestNameSelector=function(S){return{$$typeof:im,value:S}},n.createTextSelector=function(S){return{$$typeof:Dp,value:S}},n.deferredUpdates=function(S){var C=cr,$=Ss.transition;try{return Ss.transition=null,cr=16,S()}finally{cr=C,Ss.transition=$}},n.discreteUpdates=function(S,C,$,Y,J){var ae=cr,xe=Ss.transition;try{return Ss.transition=null,cr=1,S(C,$,Y,J)}finally{cr=ae,Ss.transition=xe,fr===0&&Ti()}},n.findAllNodes=Tu,n.findBoundingRects=function(S,C){if(!_t)throw Error(o(363));C=Tu(S,C),S=[];for(var $=0;$<C.length;$++)S.push(Et(C[$]));for(C=S.length-1;0<C;C--){$=S[C];for(var Y=$.x,J=Y+$.width,ae=$.y,xe=ae+$.height,Ve=C-1;0<=Ve;Ve--)if(C!==Ve){var at=S[Ve],Ft=at.x,yn=Ft+at.width,tr=at.y,an=tr+at.height;if(Y>=Ft&&ae>=tr&&J<=yn&&xe<=an){S.splice(C,1);break}else if(Y!==Ft||$.width!==at.width||an<ae||tr>xe){if(!(ae!==tr||$.height!==at.height||yn<Y||Ft>J)){Ft>Y&&(at.width+=Ft-Y,at.x=Y),yn<J&&(at.width=J-Ft),S.splice(C,1);break}}else{tr>ae&&(at.height+=tr-ae,at.y=ae),an<xe&&(at.height=xe-tr),S.splice(C,1);break}}}return S},n.findHostInstance=Lh,n.findHostInstanceWithNoPortals=function(S){return S=L(S),S=S!==null?B(S):null,S===null?null:S.stateNode},n.findHostInstanceWithWarning=function(S){return Lh(S)},n.flushControlled=function(S){var C=fr;fr|=1;var $=Ss.transition,Y=cr;try{Ss.transition=null,cr=1,S()}finally{cr=Y,Ss.transition=$,fr=C,fr===0&&(Ti(),dn())}},n.flushPassiveEffects=Mc,n.flushSync=ny,n.focusWithin=function(S,C){if(!_t)throw Error(o(363));for(S=Su(S),C=Sf(S,C),C=Array.from(C),S=0;S<C.length;){var $=C[S++];if(!Lt($)){if($.tag===5&&Fe($.stateNode))return!0;for($=$.child;$!==null;)C.push($),$=$.sibling}}return!1},n.getCurrentUpdatePriority=function(){return cr},n.getFindAllNodesFailureDescription=function(S,C){if(!_t)throw Error(o(363));var $=0,Y=[];S=[Su(S),0];for(var J=0;J<S.length;){var ae=S[J++],xe=S[J++],Ve=C[xe];if((ae.tag!==5||!Lt(ae))&&(sm(ae,Ve)&&(Y.push(nv(Ve)),xe++,xe>$&&($=xe)),xe<C.length))for(ae=ae.child;ae!==null;)S.push(ae,xe),ae=ae.sibling}if($<C.length){for(S=[];$<C.length;$++)S.push(nv(C[$]));return`findAllNodes was able to match part of the selector:
  `+(Y.join(" > ")+`

No matching component was found for:
  `)+S.join(" > ")}return null},n.getPublicRootInstance=function(S){if(S=S.current,!S.child)return null;switch(S.child.tag){case 5:return G(S.child.stateNode);default:return S.child.stateNode}},n.injectIntoDevTools=function(S){if(S={bundleType:S.bundleType,version:S.version,rendererPackageName:S.rendererPackageName,rendererConfig:S.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:h2,findFiberByHostInstance:S.findFiberByHostInstance||ay,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")S=!1;else{var C=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(C.isDisabled||!C.supportsFiber)S=!0;else{try{xr=C.inject(S),Gn=C}catch{}S=!!C.checkDCE}}return S},n.isAlreadyRendering=function(){return!1},n.observeVisibleRects=function(S,C,$,Y){if(!_t)throw Error(o(363));S=Tu(S,C);var J=Qe(S,$,Y).disconnect;return{disconnect:function(){J()}}},n.registerMutableSourceForHydration=function(S,C){var $=C._getVersion;$=$(C._source),S.mutableSourceEagerHydrationData==null?S.mutableSourceEagerHydrationData=[C,$]:S.mutableSourceEagerHydrationData.push(C,$)},n.runWithPriority=function(S,C){var $=cr;try{return cr=S,C()}finally{cr=$}},n.shouldError=function(){return null},n.shouldSuspend=function(){return!1},n.updateContainer=function(S,C,$,Y){var J=C.current,ae=ts(),xe=vo(J);return $=ov($),C.context===null?C.context=$:C.pendingContext=$,C=bd(ae,xe),C.payload={element:S},Y=Y===void 0?null:Y,Y!==null&&(C.callback=Y),S=Cc(J,C,xe),S!==null&&(ji(S,J,xe,ae),K0(S,J,xe)),xe},n}),uB}var jle;function B1t(){return jle||(jle=1,aB.exports=$1t()),aB.exports}var j1t=B1t();const U1t=hc(j1t);var lB={exports:{}},mv={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ule;function z1t(){return Ule||(Ule=1,mv.ConcurrentRoot=1,mv.ContinuousEventPriority=4,mv.DefaultEventPriority=16,mv.DiscreteEventPriority=1,mv.IdleEventPriority=536870912,mv.LegacyRoot=0),mv}var zle;function V1t(){return zle||(zle=1,lB.exports=z1t()),lB.exports}var _Se=V1t(),H1t=Vr();const Vle={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let Hle=!1,qle=!1;const jK=".react-konva-event",q1t=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,W1t=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,G1t={};function EM(e,t,n=G1t){if(!Hle&&"zIndex"in t&&(console.warn(W1t),Hle=!0),!qle&&t.draggable){var r=t.x!==void 0||t.y!==void 0,i=t.onDragEnd||t.onDragMove;r&&!i&&(console.warn(q1t),qle=!0)}for(var s in n)if(!Vle[s]){var o=s.slice(0,2)==="on",a=n[s]!==t[s];if(o&&a){var u=s.substr(2).toLowerCase();u.substr(0,7)==="content"&&(u="content"+u.substr(7,1).toUpperCase()+u.substr(8)),e.off(u,n[s])}var l=!t.hasOwnProperty(s);l&&e.setAttr(s,void 0)}var c=t._useStrictMode,f={},d=!1;const h={};for(var s in t)if(!Vle[s]){var o=s.slice(0,2)==="on",p=n[s]!==t[s];if(o&&p){var u=s.substr(2).toLowerCase();u.substr(0,7)==="content"&&(u="content"+u.substr(7,1).toUpperCase()+u.substr(8)),t[s]&&(h[u]=t[s])}!o&&(t[s]!==n[s]||c&&t[s]!==e.getAttr(s))&&(d=!0,f[s]=t[s])}d&&(e.setAttrs(f),ex(e));for(var u in h)e.on(u+jK,h[u])}function ex(e){if(!H1t.Konva.autoDrawEnabled){var t=e.getLayer()||e.getStage();t&&t.batchDraw()}}var cB=rq();const wSe={},Y1t={};E4.Node.prototype._applyProps=EM;function K1t(e,t){if(typeof t=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${t}`);return}e.add(t),ex(e)}function X1t(e,t,n){let r=E4[e];r||(console.error(`Konva has no node with the type ${e}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${e}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),r=E4.Group);const i={},s={};for(var o in t){var a=o.slice(0,2)==="on";a?s[o]=t[o]:i[o]=t[o]}const u=new r(i);return EM(u,s),u}function Q1t(e,t,n){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${e}"`)}function J1t(e,t,n){return!1}function Z1t(e){return e}function evt(){return null}function tvt(){return null}function nvt(e,t,n,r){return Y1t}function rvt(){}function ivt(e){}function svt(e,t){return!1}function ovt(){return wSe}function avt(){return wSe}const uvt=setTimeout,lvt=clearTimeout,cvt=-1;function fvt(e,t){return!1}const dvt=!1,hvt=!0,pvt=!0;function mvt(e,t){t.parent===e?t.moveToTop():e.add(t),ex(e)}function gvt(e,t){t.parent===e?t.moveToTop():e.add(t),ex(e)}function ESe(e,t,n){t._remove(),e.add(t),t.setZIndex(n.getZIndex()),ex(e)}function yvt(e,t,n){ESe(e,t,n)}function vvt(e,t){t.destroy(),t.off(jK),ex(e)}function bvt(e,t){t.destroy(),t.off(jK),ex(e)}function xvt(e,t,n){console.error(`Text components are not yet supported in ReactKonva. You text is: "${n}"`)}function _vt(e,t,n){}function wvt(e,t,n,r,i){EM(e,i,r)}function Evt(e){e.hide(),ex(e)}function Svt(e){}function Tvt(e,t){(t.visible==null||t.visible)&&e.show()}function Cvt(e,t){}function Avt(e){}function kvt(){}const Rvt=()=>_Se.DefaultEventPriority,Ivt=Object.freeze(Object.defineProperty({__proto__:null,appendChild:mvt,appendChildToContainer:gvt,appendInitialChild:K1t,cancelTimeout:lvt,clearContainer:Avt,commitMount:_vt,commitTextUpdate:xvt,commitUpdate:wvt,createInstance:X1t,createTextInstance:Q1t,detachDeletedInstance:kvt,finalizeInitialChildren:J1t,getChildHostContext:avt,getCurrentEventPriority:Rvt,getPublicInstance:Z1t,getRootHostContext:ovt,hideInstance:Evt,hideTextInstance:Svt,idlePriority:cB.unstable_IdlePriority,insertBefore:ESe,insertInContainerBefore:yvt,isPrimaryRenderer:dvt,noTimeout:cvt,now:cB.unstable_now,prepareForCommit:evt,preparePortalMount:tvt,prepareUpdate:nvt,removeChild:vvt,removeChildFromContainer:bvt,resetAfterCommit:rvt,resetTextContent:ivt,run:cB.unstable_runWithPriority,scheduleTimeout:uvt,shouldDeprioritizeSubtree:svt,shouldSetTextContent:fvt,supportsMutation:pvt,unhideInstance:Tvt,unhideTextInstance:Cvt,warnsIfNotActing:hvt},Symbol.toStringTag,{value:"Module"}));var Pvt=Object.defineProperty,Nvt=Object.defineProperties,Dvt=Object.getOwnPropertyDescriptors,Wle=Object.getOwnPropertySymbols,Ovt=Object.prototype.hasOwnProperty,Mvt=Object.prototype.propertyIsEnumerable,Gle=(e,t,n)=>t in e?Pvt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Yle=(e,t)=>{for(var n in t||(t={}))Ovt.call(t,n)&&Gle(e,n,t[n]);if(Wle)for(var n of Wle(t))Mvt.call(t,n)&&Gle(e,n,t[n]);return e},Lvt=(e,t)=>Nvt(e,Dvt(t)),Kle,Xle;typeof window<"u"&&((Kle=window.document)!=null&&Kle.createElement||((Xle=window.navigator)==null?void 0:Xle.product)==="ReactNative")?z.useLayoutEffect:z.useEffect;function SSe(e,t,n){if(!e)return;if(n(e)===!0)return e;let r=e.child;for(;r;){const i=SSe(r,t,n);if(i)return i;r=r.sibling}}function TSe(e){try{return Object.defineProperties(e,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return e}}const Qle=console.error;console.error=function(){const e=[...arguments].join("");if(e!=null&&e.startsWith("Warning:")&&e.includes("useContext")){console.error=Qle;return}return Qle.apply(this,arguments)};const UK=TSe(z.createContext(null));class CSe extends z.Component{render(){return z.createElement(UK.Provider,{value:this._reactInternals},this.props.children)}}function Fvt(){const e=z.useContext(UK);if(e===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const t=z.useId();return z.useMemo(()=>{for(const r of[e,e==null?void 0:e.alternate]){if(!r)continue;const i=SSe(r,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===t)return!0;o=o.next}});if(i)return i}},[e,t])}function $vt(){const e=Fvt(),[t]=z.useState(()=>new Map);t.clear();let n=e;for(;n;){if(n.type&&typeof n.type=="object"){const i=n.type._context===void 0&&n.type.Provider===n.type?n.type:n.type._context;i&&i!==UK&&!t.has(i)&&t.set(i,z.useContext(TSe(i)))}n=n.return}return t}function Bvt(){const e=$vt();return z.useMemo(()=>Array.from(e.keys()).reduce((t,n)=>r=>z.createElement(t,null,z.createElement(n.Provider,Lvt(Yle({},r),{value:e.get(n)}))),t=>z.createElement(CSe,Yle({},t))),[e])}function jvt(e){const t=sr.useRef({});return sr.useLayoutEffect(()=>{t.current=e}),sr.useLayoutEffect(()=>()=>{t.current={}},[]),t.current}const Uvt=e=>{const t=sr.useRef(),n=sr.useRef(),r=sr.useRef(),i=jvt(e),s=Bvt(),o=a=>{const{forwardedRef:u}=e;u&&(typeof u=="function"?u(a):u.current=a)};return sr.useLayoutEffect(()=>(n.current=new E4.Stage({width:e.width,height:e.height,container:t.current}),o(n.current),r.current=j3.createContainer(n.current,_Se.LegacyRoot,!1,null),j3.updateContainer(sr.createElement(s,{},e.children),r.current),()=>{E4.isBrowser&&(o(null),j3.updateContainer(null,r.current,null),n.current.destroy())}),[]),sr.useLayoutEffect(()=>{o(n.current),EM(n.current,e,i),j3.updateContainer(sr.createElement(s,{},e.children),r.current,null)}),sr.createElement("div",{ref:t,id:e.id,accessKey:e.accessKey,className:e.className,role:e.role,style:e.style,tabIndex:e.tabIndex,title:e.title})},zvt="Layer",Vvt="Circle",fB="Line",Hvt="Image",j3=U1t(Ivt);j3.injectIntoDevTools({findHostInstanceByFiber:()=>null,bundleType:0,version:sr.version,rendererPackageName:"react-konva"});const qvt=sr.forwardRef((e,t)=>sr.createElement(CSe,{},sr.createElement(Uvt,{...e,forwardedRef:t})));var Y6={},K6={},dB,Jle;function Wvt(){if(Jle)return dB;Jle=1,dB=function(i,s,o){var a=document.head||document.getElementsByTagName("head")[0],u=document.createElement("script");typeof s=="function"&&(o=s,s={}),s=s||{},o=o||function(){},u.type=s.type||"text/javascript",u.charset=s.charset||"utf8",u.async="async"in s?!!s.async:!0,u.src=i,s.attrs&&e(u,s.attrs),s.text&&(u.text=""+s.text);var l="onload"in u?t:n;l(u,o),u.onload||t(u,o),a.appendChild(u)};function e(r,i){for(var s in i)r.setAttribute(s,i[s])}function t(r,i){r.onload=function(){this.onerror=this.onload=null,i(null,r)},r.onerror=function(){this.onerror=this.onload=null,i(new Error("Failed to load "+this.src),r)}}function n(r,i){r.onreadystatechange=function(){this.readyState!="complete"&&this.readyState!="loaded"||(this.onreadystatechange=null,i(null,r))}}return dB}var X6={},Zle;function ASe(){if(Zle)return X6;Zle=1,Object.defineProperty(X6,"__esModule",{value:!0});var e=C1(),t=n(e);function n(i){if(i&&i.__esModule)return i;var s={};if(i!=null)for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(s[o]=i[o]);return s.default=i,s}var r=t.createContext({MathJax:null,registerNode:function(){}});return X6.default=r,X6}var ece;function Gvt(){if(ece)return K6;ece=1,Object.defineProperty(K6,"__esModule",{value:!0});var e=function(){function h(p,m){for(var g=0;g<m.length;g++){var b=m[g];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(p,b.key,b)}}return function(p,m,g){return m&&h(p.prototype,m),g&&h(p,g),p}}(),t=C1(),n=u(t),r=Wvt(),i=a(r),s=ASe(),o=a(s);function a(h){return h&&h.__esModule?h:{default:h}}function u(h){if(h&&h.__esModule)return h;var p={};if(h!=null)for(var m in h)Object.prototype.hasOwnProperty.call(h,m)&&(p[m]=h[m]);return p.default=h,p}function l(h,p){if(!(h instanceof p))throw new TypeError("Cannot call a class as a function")}function c(h,p){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:h}function f(h,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);h.prototype=Object.create(p&&p.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(h,p):h.__proto__=p)}var d=function(h){f(p,h);function p(m){l(this,p);var g=c(this,(p.__proto__||Object.getPrototypeOf(p)).call(this,m));return g.hasNodes=!1,g.loaded=!1,g.registerNode=function(){g.hasNodes=!0},g.load=function(){var b=g.props.script;if(!(g.loaded||!g.hasNodes)){if(g.loaded=!0,!b){g.onLoad(null);return}(0,i.default)(b,g.onLoad)}},g.onLoad=function(b){var y=g.props.options;MathJax.Hub.Config(y),g.setState({MathJax})},g.state={MathJax:null,registerNode:g.registerNode},g}return e(p,[{key:"componentDidMount",value:function(){this.load()}},{key:"componentDidUpdate",value:function(){this.load()}},{key:"render",value:function(){var g=this.props.children;return n.createElement(o.default.Provider,{value:this.state},g)}}]),p}(n.Component);return d.defaultProps={script:"https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML",options:{tex2jax:{inlineMath:[]},showMathMenu:!1,showMathMenuMSIE:!1}},K6.default=d,K6}var Q6={},J6={},tce;function Yvt(){if(tce)return J6;tce=1,Object.defineProperty(J6,"__esModule",{value:!0});var e=[],t=[],n=!1;function r(s,o,a){e.push(o),t.push(a),n||(n=!0,setTimeout(function(){return i(s)},0))}function i(s){s.Hub.Queue(function(){var o=s.Hub.elementScripts;s.Hub.elementScripts=function(a){return e};try{return s.Hub.Process(null,function(){t.forEach(function(a){a()}),e=[],t=[],n=!1})}catch(a){throw a}finally{s.Hub.elementScripts=o}})}return J6.default=r,J6}var nce;function Kvt(){if(nce)return Q6;nce=1,Object.defineProperty(Q6,"__esModule",{value:!0});var e=Object.assign||function(g){for(var b=1;b<arguments.length;b++){var y=arguments[b];for(var x in y)Object.prototype.hasOwnProperty.call(y,x)&&(g[x]=y[x])}return g},t=function(){function g(b,y){for(var x=0;x<y.length;x++){var w=y[x];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(b,w.key,w)}}return function(b,y,x){return y&&g(b.prototype,y),x&&g(b,x),b}}(),n=C1(),r=l(n),i=ASe(),s=u(i),o=Yvt(),a=u(o);function u(g){return g&&g.__esModule?g:{default:g}}function l(g){if(g&&g.__esModule)return g;var b={};if(g!=null)for(var y in g)Object.prototype.hasOwnProperty.call(g,y)&&(b[y]=g[y]);return b.default=g,b}function c(g,b){var y={};for(var x in g)b.indexOf(x)>=0||Object.prototype.hasOwnProperty.call(g,x)&&(y[x]=g[x]);return y}function f(g,b){if(!(g instanceof b))throw new TypeError("Cannot call a class as a function")}function d(g,b){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:g}function h(g,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);g.prototype=Object.create(b&&b.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(g,b):g.__proto__=b)}var p=function(g){h(b,g);function b(){var y,x,w,T;f(this,b);for(var A=arguments.length,k=Array(A),I=0;I<A;I++)k[I]=arguments[I];return T=(x=(w=d(this,(y=b.__proto__||Object.getPrototypeOf(b)).call.apply(y,[this].concat(k))),w),w.container=r.createRef(),x),d(w,T)}return t(b,[{key:"componentDidMount",value:function(){this.typeset()}},{key:"componentDidUpdate",value:function(x){var w=x.inline!=this.props.inline;this.typeset(w)}},{key:"componentWillUnmount",value:function(){this.clear()}},{key:"clear",value:function(){var x=this.props.MathJax;if(!(!this.script||!x)){var w=x.Hub.getJaxFor(this.script);w&&w.Remove()}}},{key:"typeset",value:function(x){var w=this,T=this.props,A=T.MathJax,k=T.formula,I=T.onRender;if(A)if(x&&this.clear(),!x&&this.script)A.Hub.Queue(function(){var M=A.Hub.getJaxFor(w.script);if(M)M.Text(k,I);else{var L=w.setScriptText(k);(0,a.default)(A,L,I)}});else{var O=this.setScriptText(k);(0,a.default)(A,O,I)}}},{key:"setScriptText",value:function(x){var w=this.props.inline;return this.script||(this.script=document.createElement("script"),this.script.type="math/tex; "+(w?"":"mode=display"),this.container.current.appendChild(this.script)),"text"in this.script?this.script.text=x:this.script.textContent=x,this.script}},{key:"render",value:function(){var x=this.props;x.MathJax,x.formula,x.inline,x.onRender;var w=c(x,["MathJax","formula","inline","onRender"]);return this.props.inline?r.createElement("span",e({ref:this.container},w)):r.createElement("div",e({ref:this.container},w))}}]),b}(r.Component);p.defaultProps={inline:!1,onRender:function(){}};var m=function(g){h(b,g);function b(){return f(this,b),d(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return t(b,[{key:"render",value:function(){var x=this;return r.createElement(s.default.Consumer,null,function(w){var T=w.MathJax,A=w.registerNode;return A(),T?r.createElement(p,e({},x.props,{MathJax:T})):null})}}]),b}(r.PureComponent);return Q6.default=m,Q6}var rce;function Xvt(){if(rce)return Y6;rce=1,Object.defineProperty(Y6,"__esModule",{value:!0});var e=Gvt(),t=i(e),n=Kvt(),r=i(n);function i(o){return o&&o.__esModule?o:{default:o}}var s={Provider:t.default,Node:r.default};return Y6.default=s,Y6}Xvt();function Qvt({parameters:e,setAnswer:t}){const{image:n,question:r,example:i}=e,[s,o]=z.useState("stroke"),[a,u]=z.useState({width:0,height:0}),l=z.useRef(null),[c,f]=z.useState([]),[d,h]=z.useState([]),[p,m]=z.useState(!1),g=z.useRef(null),[b]=Xyt(n),y=z.useCallback(L=>{const H=L.map(D=>({...D,points:D.points.map(B=>parseInt(B/a.multiplier))}));t({status:!0,answers:{annotations:JSON.stringify({annotations:H,multiplier:a.multiplier,question:r})}})},[t,c,a]),x=L=>{L!==s&&(h([]),m(!1)),o(L)},w=()=>{const L=c.slice(0,-1);f(L),y(L),h([]),m(!1)},T=()=>{f([]),h([]),m(!1),y([])},A=L=>{if(s==="polygon")return;m(!0);const D=g.current.getPointerPosition(),B=parseInt(D.x),U=parseInt(D.y);h([B,U])},k=L=>{if(s==="polygon"||!p)return;const D=g.current.getPointerPosition(),B=parseInt(D.x),U=parseInt(D.y);h(G=>[...G,B,U])},I=L=>{if(s==="polygon")return;m(!1);const H=[...c,{tool:"stroke",points:d}];f(H),y(H),h([])},O=L=>{if(s!=="polygon")return;const D=g.current.getPointerPosition(),B=parseInt(D.x),U=parseInt(D.y);h(G=>[...G,B,U])},M=L=>{if(s!=="polygon")return;const H=[...c,{tool:"polygon",points:d}];f(H),y(H),h([])};return z.useEffect(()=>{const L=new Image;L.src=n,L.onload=()=>{const H=l.current,D=window.innerHeight-H.getBoundingClientRect().top,B=window.innerWidth-H.getBoundingClientRect().left,U=L.width/L.height;let G,ee;D*U<=B?(ee=D,G=D*U):(G=B,ee=B/U);const ne=G/L.width;u({width:G,height:ee,multiplier:ne})}},[n]),R.jsxs("div",{children:[i&&R.jsx("h1",{children:"Example Question"}),i?R.jsx("div",{children:R.jsx("h3",{children:r})}):R.jsxs("div",{children:[R.jsxs("h3",{children:["Please identify and annotate the regions that are ",R.jsx("span",{style:{color:"red"},children:"important"})," for answering the question below. Then provide your answer for the question."]}),R.jsxs("h3",{children:["Q: ",r]})]}),R.jsxs(He,{ref:l,className:"ImageWrapper",style:{width:"100%",display:"flex"},children:[R.jsx(He,{style:{width:"250px",backgroundColor:"#f4f4f4",padding:"20px",borderRight:"1px solid #ddd",boxSizing:"border-box",flexShrink:0},children:R.jsx(pSe,{tool:s,setTool:x,undo:w,clearAll:T})}),R.jsx(qvt,{ref:g,width:a.width,height:a.height,onMouseDown:A,onMouseMove:k,onMouseUp:I,onClick:O,onDblClick:M,style:{border:"1px solid black"},children:R.jsxs(zvt,{children:[b&&R.jsx(Hvt,{image:b,width:a.width,height:a.height}),c.map((L,H)=>{const{tool:D,points:B}=L,U=D==="polygon";return R.jsx(fB,{points:B,stroke:U?"blue":"red",strokeWidth:2,closed:!0,fill:U?"rgba(0, 0, 255, 0.3)":"rgba(255, 0, 0, 0.3)"},H)}),d.length>0&&s==="polygon"&&R.jsx(fB,{points:d,stroke:"blue",strokeWidth:2,closed:d.length>3,fill:d.length>3?"rgba(0, 150, 255, 0.3)":null}),d.length>0&&s==="stroke"&&R.jsx(fB,{points:d,stroke:"red",strokeWidth:2,closed:!0,fill:"rgba(255, 150, 0, 0.3)"}),s==="polygon"&&d.length>0&&R.jsx(Vvt,{x:d[d.length-2],y:d[d.length-1],radius:5,fill:"red"})]})})]})]})}const Jvt=Object.freeze(Object.defineProperty({__proto__:null,default:Qvt},Symbol.toStringTag,{value:"Module"}));function Zvt({parameters:e,setAnswer:t}){const n=z.useRef(null),{image:r,question:i,x_grids:s,y_grids:o,example:a}=e,[u,l]=z.useState({width:0,height:0}),[c,f]=z.useState([]),d=z.useRef(null);return z.useEffect(()=>{const h=new Image;h.src=r,h.onload=()=>{const p=d.current,m=window.innerHeight-p.getBoundingClientRect().top,g=window.innerWidth-p.getBoundingClientRect().left,b=h.width/h.height;let y,x;m*b<=g?(x=m,y=m*b):(y=g,x=g/b),l({width:y,height:x,multiplier:y/h.width});let w=s,T=o;s.includes(0)||(w=[0,...s]),o.includes(0)||(T=[0,...o]);const A=[];for(let k=0;k<w.length;k++)for(let I=0;I<T.length;I++){let O,M;k+1===w.length?O=h.width-w[k]:O=w[k+1]-w[k],I+1===T.length?M=h.height-T[I]:M=T[I+1]-T[I],A.push({x:w[k],y:T[I],width:O,height:M,clicked:!1,unClicked:!1})}f(A)}},[r]),z.useEffect(()=>{const h=D_(n.current),p=u.multiplier;h.select("g").selectAll("rect").data(c).join("rect").attr("x",m=>m.x*p).attr("y",m=>m.y*p).attr("width",m=>m.width*p).attr("height",m=>m.height*p).attr("stroke","black").attr("stroke-width",2).attr("cursor","pointer").attr("fill","#e6e6e6").attr("opacity",m=>m.clicked?0:.5).on("click",(m,g)=>{const b=hSe.cloneDeep(c),y=b.findIndex(x=>x.x===g.x&&x.y===g.y);b[y].clicked&&(b[y].unClicked=!0),b[y].clicked=!b[y].clicked,f(b),t({status:!0,answers:{patches:JSON.stringify({patches:b.filter(x=>x.clicked||x.unClicked),multiplier:u.multiplier,question:i})}})}).on("mouseover",(m,g)=>{D_(m.target).attr("stroke","blue").attr("stroke-width",2)}).on("mouseout",(m,g)=>{D_(m.target).attr("stroke","gray").attr("stroke-width",.5)})},[c,t,u]),R.jsxs("div",{children:[a&&R.jsx("h1",{children:"Example Question"}),a?R.jsx("div",{children:R.jsx("h3",{children:i})}):R.jsxs("div",{children:[R.jsxs("h3",{children:["Please annotate ",R.jsx("u",{children:"minimum patches"})," that ",R.jsx("span",{style:{color:"red"},children:" must be revealed "})," for people to ",R.jsx("span",{style:{color:"red"},children:"confidently"})," answer the question below, assuming that people ",R.jsx("span",{style:{color:"red"},children:"cannot"})," see the blocked area. Then provide your answer for the question."]}),R.jsxs("h3",{children:["Q: ",i]})]}),R.jsx(He,{ref:d,className:"ImageWrapper",style:{width:"100%",display:"block"},children:R.jsxs("svg",{id:"clickAccuracySvg",ref:n,width:u.width,height:u.height,children:[R.jsxs("defs",{children:[R.jsxs("filter",{id:"imageBlurFilter",children:[R.jsx("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"17"}),R.jsx("feComponentTransfer",{children:R.jsx("feFuncA",{type:"table",tableValues:"1 1"})})]}),R.jsxs("mask",{id:"unblurMask",children:[R.jsx("rect",{width:"100%",height:"100%",fill:"white"}),c.filter(h=>h.clicked).map((h,p)=>R.jsx("rect",{x:h.x*u.multiplier,y:h.y*u.multiplier,width:h.width*u.multiplier,height:h.height*u.multiplier,fill:"black"},p))]})]}),R.jsx("image",{href:r,width:u.width,height:u.height}),R.jsx("g",{id:"rectangles"})]})})]})}const ebt=Object.freeze(Object.defineProperty({__proto__:null,default:Zvt},Symbol.toStringTag,{value:"Module"}));class tbt extends sr.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}render(){return this.state.hasError?R.jsx(Nt,{children:this.state.error.toString()}):this.props.children}}const ice=Object.assign({"../public/adaptive_blur/assets/tilegrid.jsx":Hyt,"../public/bubble/assets/bubble.jsx":Wyt,"../public/importAnnot/assets/ToolBox.jsx":Gyt,"../public/importAnnot/assets/importantannot.jsx":Jvt,"../public/static_blur/assets/grid.jsx":ebt});function nbt({currentConfig:e,provState:t}){const n=dp(),r=F0(),i=`../public/${e.path}`,s=i in ice?ice[i].default:null,o=gc(),{updateResponseBlockValidation:a,setreactiveAnswers:u}=Tl(),l=z.useCallback(({status:c,provenanceGraph:f,answers:d})=>{o(a({location:"sidebar",identifier:`${r}_${n}`,status:c,values:d,provenanceGraph:f})),o(u(d))},[r,n,u,o,a]);return R.jsx(z.Suspense,{fallback:R.jsx("div",{children:"Loading..."}),children:s?R.jsx(tbt,{children:R.jsx(s,{parameters:e.parameters,setAnswer:l,provenanceState:t})}):R.jsx(gb,{path:e.path})})}function rbt({currentConfig:e}){const[t,n]=z.useState(""),[r,i]=z.useState(!0);return z.useEffect(()=>{async function s(){const o=await WY(e.path);o!==void 0&&n(o),i(!1)}s()},[e.path]),r||t?R.jsx(lc,{text:t}):R.jsx(gb,{path:e.path})}function GT(e){return e.baseComponent!==void 0}function kSe(){const e=dp(),{setAlertModal:t}=Tl(),n=gc();z.useEffect(()=>{window.history.pushState(null,"",window.location.href),window.onpopstate=()=>{window.history.pushState(null,"",window.location.href),n(t({show:!0,message:"Using the browser's back button is prohibited during the study."}))}},[e,t,n])}var sce=Object.prototype.hasOwnProperty;function oce(e,t,n){for(n of e.keys())if(kk(n,t))return n}function kk(e,t){var n,r,i;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&kk(e[r],t[r]););return r===-1}if(n===Set){if(e.size!==t.size)return!1;for(r of e)if(i=r,i&&typeof i=="object"&&(i=oce(t,i),!i)||!t.has(i))return!1;return!0}if(n===Map){if(e.size!==t.size)return!1;for(r of e)if(i=r[0],i&&typeof i=="object"&&(i=oce(t,i),!i)||!kk(r[1],t.get(i)))return!1;return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return r===-1}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return r===-1}if(!n||typeof e=="object"){r=0;for(n in e)if(sce.call(e,n)&&++r&&!sce.call(t,n)||!(n in t)||!kk(e[n],t[n]))return!1;return Object.keys(t).length===r}}return e!==e&&t!==t}function ibt(e){var t=z.useRef(e),n=z.useRef(0);return kk(e,t.current)||(t.current=e,n.current+=1),z.useMemo(function(){return t.current},[n.current])}function sbt(e,t){return z.useEffect(e,ibt(t))}const SD=(e,t=null)=>{const[n,r]=z.useState("idle"),[i,s]=z.useState(null),[o,a]=z.useState(null),u=z.useRef(null),l=z.useRef(!1);z.useEffect(()=>(l.current=!0,()=>{l.current=!1}),[]);const c=z.useCallback((...f)=>{r("pending"),a(null);const d=Promise.resolve(e(...f)).then(h=>(l.current&&d===u.current&&(s(h),r("success")),h)).catch(h=>{throw l.current&&d===u.current&&(s(null),a(h),r("error")),h});return u.current=d,d},[e]);return sbt(()=>{if(t)try{c(...t)}catch{}},[c,t]),{execute:c,status:n,value:i,error:o}};function RSe(e){const t=e.endTime===-1?void 0:e.endTime-e.startTime,n=(e.windowEvents||[]).filter(o=>o!==void 0).filter(([o,a,u])=>a==="visibility");let r=0,i=0;for(;i<n.length-1;){if(n[i][2]==="hidden"){for(let o=i+1;o<n.length;o+=1)if(n[o][2]==="visible"){r+=n[o][0]-n[i][0],i=o;break}}i+=1}return t?t-r:void 0}const obt="_root_1spq0_1",abt="_description_1spq0_9",ubt="_title_1spq0_10",lbt="_closeButton_1spq0_14",cbt={root:obt,description:abt,title:ubt,closeButton:lbt},S4=e=>{const{title:t,message:n,color:r}=e;Pw.show({title:t,message:n,position:"top-center",classNames:cbt,color:r||"blue",autoClose:r==="red"||r==="yellow"?!1:5e3})},ace=["status","rejectReason","rejectTime","percentComplete","description","instruction","responsePrompt","answer","correctAnswer","responseMin","responseMax","startTime","endTime","duration","cleanedDuration","meta","configHash"],ISe=["participantId","trialId","trialOrder","responseId"];function zK(e,t){const n=`data:text/json;charset=utf-8,${encodeURIComponent(e)}`,r=document.createElement("a");r.setAttribute("href",n),r.setAttribute("download",t),document.body.appendChild(r),r.click(),r.remove()}function fbt(e,t,n){const r=(Object.entries(e.answers).filter(([i,s])=>s.endTime!==-1).length/(C0(e.sequence).length-1)*100).toFixed(2);return[{participantId:e.participantId,trialId:"participantTags",trialOrder:null,responseId:"participantTags",answer:JSON.stringify(e.participantTags)},...Object.entries(e.answers).map(([i,s])=>{const o=i.split("_").slice(0,-1).join("_"),a=parseInt(`${i.split("_").at(-1)}`,10),u=n.components[o],l=GT(u)&&u.baseComponent&&n.baseComponents?VY({},n.baseComponents[u.baseComponent],u):u,c=s.endTime===-1?void 0:s.endTime-s.startTime,f=RSe(s);return Object.entries(s.answer).map(([h,p])=>{var b,y;const m={participantId:e.participantId,trialId:o,trialOrder:a,responseId:h},g=l.response.find(x=>x.id===h);if(t.includes("status")&&(m.status=e.rejected?"rejected":e.completed?"completed":"in progress"),t.includes("rejectReason")&&(m.rejectReason=e.rejected?e.rejected.reason:void 0),t.includes("rejectTime")&&(m.rejectTime=e.rejected?new Date(e.rejected.timestamp).toISOString():void 0),t.includes("configHash")&&(m.configHash=e.participantConfigHash),t.includes("percentComplete")&&(m.percentComplete=r),t.includes("description")&&(m.description=l.description),t.includes("instruction")&&(m.instruction=l.instruction),t.includes("responsePrompt")&&(m.responsePrompt=g==null?void 0:g.prompt),t.includes("answer")&&(m.answer=p),t.includes("correctAnswer")){const x=(y=(b=l.correctAnswer)==null?void 0:b.find(w=>w.id===h))==null?void 0:y.answer;m.correctAnswer=typeof x=="object"?JSON.stringify(x):x}return t.includes("responseMin")&&(m.responseMin=(g==null?void 0:g.type)==="numerical"?g.min:void 0),t.includes("responseMax")&&(m.responseMax=(g==null?void 0:g.type)==="numerical"?g.max:void 0),t.includes("startTime")&&(m.startTime=new Date(s.startTime).toISOString()),t.includes("endTime")&&(m.endTime=new Date(s.endTime).toISOString()),t.includes("duration")&&(m.duration=c),t.includes("cleanedDuration")&&(m.cleanedDuration=f),t.includes("meta")&&(m.meta=JSON.stringify(l.meta,null,2)),m}).flat()}).flat()]}async function dbt(e,t,n,r){if(!n)return{header:[],rows:[]};const i=[...ISe,...e],s=[...new Set(t.map(c=>c.participantConfigHash))],o=await n.getAllConfigsFromHash(s,r),a=i,l=(await Promise.all(t.map(async c=>await fbt(c,i,o[c.participantConfigHash])))).flat().sort((c,f)=>c!==f?c.participantId.localeCompare(f.participantId):c.trialOrder-f.trialOrder);return{header:a,rows:l}}function hbt({opened:e,close:t,filename:n,data:r,studyId:i}){const[s,o]=z.useState([...ace].filter(p=>p!=="meta")),a=Yo(),{value:u,status:l,error:c}=SD(dbt,[s,r,a.storageEngine,i]),f=z.useCallback(()=>{if(!u)return;const p=[u.header.join(","),...u.rows.map(m=>u.header.map(g=>`"${`${m[g]}`.replace(/"/g,'""')}"`).join(","))].join(`
`);zK(p,n)},[n,u]),d=z.useCallback(()=>{u&&(window.parent.postMessage({type:"revisitWidget/PYTHON_EXPORT_TIDY",payload:u},"*"),S4({title:"Success",message:"Data sent to python notebook",color:"green"}))},[u]),h=z.useMemo(()=>{if(!u)return"";const p=u.rows.length>5?5:u.rows.length,m=p===1?"":"s";return`This is a preview of the first ${m?p:""} row${m} of the CSV. The full CSV contains ${u.rows.length} row${m}.`},[u]);return R.jsxs(Eo,{opened:e,size:"90%",onClose:t,title:"Tidy CSV Exporter",centered:!0,withCloseButton:!1,children:[R.jsx(RW,{searchable:!0,nothingFoundMessage:"Property not found",data:[...ace],value:s,onChange:p=>o(p),label:"Included optional columns:",leftSection:R.jsx(Yze,{}),variant:"filled"}),R.jsx(Jd,{h:"md"}),R.jsxs(He,{mih:300,style:{width:"100%",overflow:"scroll"},children:[l==="success"&&u?R.jsxs(zn,{striped:!0,captionSide:"bottom",withTableBorder:!0,children:[R.jsx(zn.Thead,{children:R.jsx(zn.Tr,{children:u.header.map(p=>R.jsx(zn.Th,{style:{whiteSpace:"nowrap",minWidth:["description","instruction","participantId"].includes(p)?200:void 0},children:R.jsxs(An,{direction:"row",justify:"space-between",align:"center",children:[p,!ISe.includes(p)&&R.jsx(Ub,{onClick:()=>o(s.filter(m=>m!==p)),style:{marginBottom:-3,marginLeft:8},variant:"subtle",color:"gray",children:R.jsx(hR,{size:16})})]})},p))})}),R.jsx(zn.Tbody,{children:u.rows.slice(0,5).map((p,m)=>R.jsx(zn.Tr,{children:u.header.map(g=>R.jsx(zn.Td,{style:{whiteSpace:["description","instruction","participantId"].includes(g)?"normal":"nowrap"},children:p[g]},`${m}-${g}`))},m))})]}):l==="error"&&c?R.jsx(Gy,{variant:"light",children:c.message}):null,R.jsx(ih,{visible:l==="pending"||l==="idle"})]}),R.jsx(Jd,{h:"sm"}),R.jsx(An,{justify:"center",fz:"sm",c:"dimmed",children:R.jsx(Nt,{children:h})}),R.jsx(Jd,{h:"md"}),R.jsxs(co,{justify:"right",children:[R.jsx(Bn,{onClick:t,color:"dark",variant:"subtle",children:"Close"}),R.jsx(Bn,{leftSection:R.jsx(R1e,{}),onClick:f,"data-autofocus":!0,children:"Download"}),i==="__revisit-widget"&&R.jsx(Bn,{onClick:d,children:R.jsx($ze,{})})]})]})}function pbt(){const e=y1(),{storageEngine:t}=Yo(),n=Ai(x=>x.answers),r=UT(),[i,s]=z.useState(!1);z.useEffect(()=>{if(r){s(!0);return}const x=setInterval(async()=>{await t.verifyCompletion(n)&&(s(!0),clearInterval(x))},1e3)},[]),kSe();const[o,a]=z.useState(),[u,l]=z.useState(""),c=e.studyMetadata.title.replace(" ","_");z.useEffect(()=>{async function x(){if(t){const w=await t.getCurrentParticipantId(),T=await t.getParticipantData();l(w),a(T)}}x()},[t]);const f=z.useCallback(async()=>{zK(JSON.stringify(o,null,2),`${c}_${u}.json`)},[c,o,u]),d=e.uiConfig.autoDownloadStudy||!1,h=d&&e.uiConfig.autoDownloadTime||-1,[p,m]=z.useState(Math.floor(h/1e3));z.useEffect(()=>{if(i){const x=setInterval(()=>{m(w=>w-1)},1e3);return p<=0?(d&&f(),clearInterval(x),()=>clearInterval(x)):()=>clearInterval(x)}return()=>{}},[d,i,p,f]);const g=Uw(),[b,y]=z.useState(!1);return z.useEffect(()=>{(async()=>{if(t){const w=await t.getModes(g);y(w.dataCollectionEnabled)}})()},[t,g]),R.jsx(u1,{style:{height:"100%"},children:R.jsx(An,{direction:"column",children:i||!b?e.uiConfig.studyEndMsg?R.jsx(lc,{text:e.uiConfig.studyEndMsg}):R.jsx(Nt,{size:"xl",display:"block",children:"Thank you for completing the study. You may close this window now."}):R.jsxs(R.Fragment,{children:[R.jsx(Nt,{size:"xl",display:"block",children:"Please wait while your answers are uploaded."}),R.jsx(Jd,{h:"lg"}),R.jsx(u1,{children:R.jsx(bg,{color:"blue"})})]})})})}function mbt(){return R.jsx(Nt,{children:"Thank you for participating. Unfortunately you have didn't answer the training correctly, which means you are not eligible to participate in the study. You may close this window now."})}function gbt(){return R.jsx(Nt,{children:"Thank you for participating. Unfortunately, you have not answered the questions within the given time limit. Because of this, you are no longer eligible to participate in the study. You may close this window now."})}const uce={};function nV(e,t){e===void 0&&(e=uce),t===void 0&&(t=uce);const n=Object.keys(e),r=Object.keys(t);return e===t||n.length===r.length&&n.every(i=>e[i]===t[i])}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var ybt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),vbt=Object.prototype.hasOwnProperty;function rV(e,t){return vbt.call(e,t)}function iV(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)rV(e,i)&&r.push(i);return r}function Yd(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function sV(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function a_(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function PSe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function oV(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(oV(e[t]))return!0}else if(typeof e=="object"){for(var r=iV(e),i=r.length,s=0;s<i;s++)if(oV(e[r[s]]))return!0}}return!1}function lce(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var NSe=function(e){ybt(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,lce(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=lce(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),zo=NSe,bbt=Yd,IE={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=TD(n,this.path);r&&(r=Yd(r));var i=L_(n,{op:"remove",path:this.from}).removed;return L_(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=TD(n,this.from);return L_(n,{op:"add",path:this.path,value:Yd(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:T4(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},xbt={add:function(e,t,n){return sV(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:IE.move,copy:IE.copy,test:IE.test,_get:IE._get};function TD(e,t){if(t=="")return e;var n={op:"_get",path:t};return L_(e,n),n.value}function L_(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):CD(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=TD(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=T4(e,t.value),o.test===!1)throw new zo("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new zo("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=Yd(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=CD;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=PSe(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!sV(h))throw new zo("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);sV(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new zo("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=xbt[t.op].call(t,l,h,e);if(o.test===!1)throw new zo("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=IE[t.op].call(t,l,h,e);if(o.test===!1)throw new zo("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new zo("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function SM(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new zo("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Yd(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=L_(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function _bt(e,t,n){var r=L_(e,t);if(r.test===!1)throw new zo("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function CD(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new zo("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(IE[e.op]){if(typeof e.path!="string")throw new zo("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new zo('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new zo("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new zo("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&oV(e.value))throw new zo("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new zo("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new zo("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=DSe([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new zo("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new zo("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function DSe(e,t,n){try{if(!Array.isArray(e))throw new zo("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)SM(Yd(t),Yd(e),n||!0);else{n=n||CD;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof zo)return i;throw i}}function T4(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!T4(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!T4(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const wbt=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:zo,_areEquals:T4,applyOperation:L_,applyPatch:SM,applyReducer:_bt,deepClone:bbt,getValueByPointer:TD,validate:DSe,validator:CD},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var VK=new WeakMap,Ebt=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),Sbt=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function Tbt(e){return VK.get(e)}function Cbt(e,t){return e.observers.get(t)}function Abt(e,t){e.observers.delete(t.callback)}function kbt(e,t){t.unobserve()}function Rbt(e,t){var n=[],r,i=Tbt(e);if(!i)i=new Ebt(e),VK.set(e,i);else{var s=Cbt(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=Yd(e),t){r.callback=t,r.next=null;var o=function(){aV(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){aV(r),clearTimeout(r.next),Abt(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new Sbt(t,r)),r}function aV(e,t){t===void 0&&(t=!1);var n=VK.get(e.object);HK(n.value,e.object,e.patches,"",t),e.patches.length&&SM(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function HK(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=iV(t),o=iV(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(rV(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?HK(c,f,n,r+"/"+a_(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+a_(l),value:Yd(c)}),n.push({op:"replace",path:r+"/"+a_(l),value:Yd(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+a_(l),value:Yd(c)}),n.push({op:"remove",path:r+"/"+a_(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!rV(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+a_(l),value:Yd(t[l])})}}}function Ibt(e,t,n){n===void 0&&(n=!1);var r=[];return HK(e,t,r,"",n),r}const Pbt=Object.freeze(Object.defineProperty({__proto__:null,compare:Ibt,generate:aV,observe:Rbt,unobserve:kbt},Symbol.toStringTag,{value:"Module"}));Object.assign({},wbt,Pbt,{JsonPatchError:NSe,deepClone:Yd,escapePathComponent:a_,unescapePathComponent:PSe});var hB,cce;function Nbt(){if(cce)return hB;cce=1;var e=/("(?:[^\\"]|\\.)*")|[:,]/g;return hB=function(n,r){var i,s,o;return r=r||{},i=JSON.stringify([1],void 0,r.indent===void 0?2:r.indent).slice(2,-3),s=i===""?1/0:r.maxLength===void 0?80:r.maxLength,o=r.replacer,function a(u,l,c){var f,d,h,p,m,g,b,y,x,w,T,A;if(u&&typeof u.toJSON=="function"&&(u=u.toJSON()),T=JSON.stringify(u,o),T===void 0)return T;if(b=s-l.length-c,T.length<=b&&(x=T.replace(e,function(k,I){return I||k+" "}),x.length<=b))return x;if(o!=null&&(u=JSON.parse(T),o=void 0),typeof u=="object"&&u!==null){if(y=l+i,h=[],d=0,Array.isArray(u))for(w="[",f="]",b=u.length;d<b;d++)h.push(a(u[d],y,d===b-1?0:1)||"null");else for(w="{",f="}",g=Object.keys(u),b=g.length;d<b;d++)p=g[d],m=JSON.stringify(p)+": ",A=a(u[p],y,m.length+(d===b-1?0:1)),A!==void 0&&h.push(m+A);if(h.length>0)return[w,i+h.join(`,
`+y),f].join(`
`+l)}return T}(n,"",0)},hB}var Dbt=Nbt();const pB=hc(Dbt);function cd(e,t,n){return e.fields=t||[],e.fname=n,e}function Wo(e){return e==null?null:e.fname}function sc(e){return e==null?null:e.fields}function OSe(e){return e.length===1?Obt(e[0]):Mbt(e)}const Obt=e=>function(t){return t[e]},Mbt=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function vt(e){throw Error(e)}function Cg(e){const t=[],n=e.length;let r=null,i=0,s="",o,a,u;e=e+"";function l(){t.push(s+e.substring(o,a)),s="",o=a+1}for(o=a=0;a<n;++a)if(u=e[a],u==="\\")s+=e.substring(o,a++),o=a;else if(u===r)l(),r=null,i=-1;else{if(r)continue;o===i&&u==='"'||o===i&&u==="'"?(o=a+1,r=u):u==="."&&!i?a>o?l():o=a+1:u==="["?(a>o&&l(),i=o=a+1):u==="]"&&(i||vt("Access path missing open bracket: "+e),i>0&&l(),i=0,o=a+1)}return i&&vt("Access path missing closing bracket: "+e),r&&vt("Access path missing closing quote: "+e),a>o&&(a++,l()),t}function Zh(e,t,n){const r=Cg(e);return e=r.length===1?r[0]:e,cd((n&&n.get||OSe)(r),[e],t||e)}const zR=Zh("id"),fc=cd(e=>e,[],"identity"),Mv=cd(()=>0,[],"zero"),YT=cd(()=>1,[],"one"),ep=cd(()=>!0,[],"true"),xv=cd(()=>!1,[],"false");function Lbt(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const MSe=0,qK=1,WK=2,LSe=3,FSe=4;function GK(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Lbt,r=e||MSe;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=qK&&n(t||"error","ERROR",arguments),this},warn(){return r>=WK&&n(t||"warn","WARN",arguments),this},info(){return r>=LSe&&n(t||"log","INFO",arguments),this},debug(){return r>=FSe&&n(t||"log","DEBUG",arguments),this}}}var xt=Array.isArray;function un(e){return e===Object(e)}const fce=e=>e!=="__proto__";function KT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(const s in i)if(s==="signals")r.signals=Fbt(r.signals,i.signals);else{const o=s==="legend"?{layout:1}:s==="style"?!0:null;XT(r,s,i[s],o)}return r},{})}function XT(e,t,n,r){if(!fce(t))return;let i,s;if(un(n)&&!xt(n)){s=un(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?XT(s,i,n[i]):fce(i)&&(s[i]=n[i])}else e[t]=n}function Fbt(e,t){if(e==null)return t;const n={},r=[];function i(s){n[s.name]||(n[s.name]=1,r.push(s))}return t.forEach(i),e.forEach(i),r}function pi(e){return e[e.length-1]}function rc(e){return e==null||e===""?null:+e}const $Se=e=>t=>e*Math.exp(t),BSe=e=>t=>Math.log(e*t),jSe=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),USe=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,AD=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function TM(e,t,n,r){const i=n(e[0]),s=n(pi(e)),o=(s-i)*t;return[r(i-o),r(s-o)]}function zSe(e,t){return TM(e,t,rc,fc)}function VSe(e,t){var n=Math.sign(e[0]);return TM(e,t,BSe(n),$Se(n))}function HSe(e,t,n){return TM(e,t,AD(n),AD(1/n))}function qSe(e,t,n){return TM(e,t,jSe(n),USe(n))}function CM(e,t,n,r,i){const s=r(e[0]),o=r(pi(e)),a=t!=null?r(t):(s+o)/2;return[i(a+(s-a)*n),i(a+(o-a)*n)]}function YK(e,t,n){return CM(e,t,n,rc,fc)}function KK(e,t,n){const r=Math.sign(e[0]);return CM(e,t,n,BSe(r),$Se(r))}function kD(e,t,n,r){return CM(e,t,n,AD(r),AD(1/r))}function XK(e,t,n,r){return CM(e,t,n,jSe(r),USe(r))}function WSe(e){return 1+~~(new Date(e).getMonth()/3)}function GSe(e){return 1+~~(new Date(e).getUTCMonth()/3)}function ln(e){return e!=null?xt(e)?e:[e]:[]}function YSe(e,t,n){let r=e[0],i=e[1],s;return i<r&&(s=i,i=r,r=s),s=i-r,s>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-s),r+s]}function Rr(e){return typeof e=="function"}const $bt="descending";function QK(e,t,n){n=n||{},t=ln(t)||[];const r=[],i=[],s={},o=n.comparator||Bbt;return ln(e).forEach((a,u)=>{a!=null&&(r.push(t[u]===$bt?-1:1),i.push(a=Rr(a)?a:Zh(a,null,n)),(sc(a)||[]).forEach(l=>s[l]=1))}),i.length===0?null:cd(o(i,r),Object.keys(s))}const AM=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),Bbt=(e,t)=>e.length===1?jbt(e[0],t[0]):Ubt(e,t,e.length),jbt=(e,t)=>function(n,r){return AM(e(n),e(r))*t},Ubt=(e,t,n)=>(t.push(0),function(r,i){let s,o=0,a=-1;for(;o===0&&++a<n;)s=e[a],o=AM(s(r),s(i));return o*t[a]});function dc(e){return Rr(e)?e:()=>e}function JK(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function kr(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function fg(e,t){let n=0,r,i,s,o;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(s=o=i;n<r;++n)i=e[n],i!=null&&(i<s&&(s=i),i>o&&(o=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(s=o=i;n<r;++n)i=t(e[n]),i!=null&&(i<s&&(s=i),i>o&&(o=i))}return[s,o]}function KSe(e,t){const n=e.length;let r=-1,i,s,o,a,u;if(t==null){for(;++r<n;)if(s=e[r],s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=e[r],s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}else{for(;++r<n;)if(s=t(e[r],r,e),s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=t(e[r],r,e),s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}return[a,u]}const zbt=Object.prototype.hasOwnProperty;function gn(e,t){return zbt.call(e,t)}const Z6={};function QT(e){let t={},n;function r(s){return gn(t,s)&&t[s]!==Z6}const i={size:0,empty:0,object:t,has:r,get(s){return r(s)?t[s]:void 0},set(s,o){return r(s)||(++i.size,t[s]===Z6&&--i.empty),t[s]=o,this},delete(s){return r(s)&&(--i.size,++i.empty,t[s]=Z6),this},clear(){i.size=i.empty=0,i.object=t={}},test(s){return arguments.length?(n=s,i):n},clean(){const s={};let o=0;for(const a in t){const u=t[a];u!==Z6&&(!n||!n(u))&&(s[a]=u,++o)}i.size=o,i.empty=0,i.object=t=s}};return e&&Object.keys(e).forEach(s=>{i.set(s,e[s])}),i}function XSe(e,t,n,r,i,s){if(!n&&n!==0)return s;const o=+n;let a=e[0],u=pi(e),l;u<a&&(l=a,a=u,u=l),l=Math.abs(t-a);const c=Math.abs(u-t);return l<c&&l<=o?r:c<=o?i:s}function en(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),kr(r,n)}function PE(e,t,n,r){let i=t[0],s=t[t.length-1],o;return i>s&&(o=i,i=s,s=o),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=s:e<s)}function tx(e){return typeof e=="boolean"}function eb(e){return Object.prototype.toString.call(e)==="[object Date]"}function QSe(e){return e&&Rr(e[Symbol.iterator])}function Ri(e){return typeof e=="number"}function JSe(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function cn(e){return typeof e=="string"}function ZK(e,t,n){e&&(e=t?ln(e).map(a=>a.replace(/\\(.)/g,"$1")):ln(e));const r=e&&e.length,i=n&&n.get||OSe,s=a=>i(t?[a]:Cg(a));let o;if(!r)o=function(){return""};else if(r===1){const a=s(e[0]);o=function(u){return""+a(u)}}else{const a=e.map(s);o=function(u){let l=""+a[0](u),c=0;for(;++c<r;)l+="|"+a[c](u);return l}}return cd(o,e,"key")}function ZSe(e,t){const n=e[0],r=pi(e),i=+t;return i?i===1?r:n+i*(r-n):n}const Vbt=1e4;function eTe(e){e=+e||Vbt;let t,n,r;const i=()=>{t={},n={},r=0},s=(o,a)=>(++r>e&&(n=t,t={},r=1),t[o]=a);return i(),{clear:i,has:o=>gn(t,o)||gn(n,o),get:o=>gn(t,o)?t[o]:gn(n,o)?s(o,n[o]):void 0,set:(o,a)=>gn(t,o)?t[o]=a:s(o,a)}}function tTe(e,t,n,r){const i=t.length,s=n.length;if(!s)return t;if(!i)return n;const o=r||new t.constructor(i+s);let a=0,u=0,l=0;for(;a<i&&u<s;++l)o[l]=e(t[a],n[u])>0?n[u++]:t[a++];for(;a<i;++a,++l)o[l]=t[a];for(;u<s;++u,++l)o[l]=n[u];return o}function U3(e,t){let n="";for(;--t>=0;)n+=e;return n}function nTe(e,t,n,r){const i=n||" ",s=e+"",o=t-s.length;return o<=0?s:r==="left"?U3(i,o)+s:r==="center"?U3(i,~~(o/2))+s+U3(i,Math.ceil(o/2)):s+U3(i,o)}function VR(e){return e&&pi(e)-e[0]||0}function Jt(e){return xt(e)?"["+e.map(Jt)+"]":un(e)||cn(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function eX(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const Hbt=e=>Ri(e)||eb(e)?e:Date.parse(e);function tX(e,t){return t=t||Hbt,e==null||e===""?null:t(e)}function nX(e){return e==null||e===""?null:e+""}function A0(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function rTe(e,t,n,r){const i=r??"",s=e+"",o=s.length,a=Math.max(0,t-i.length);return o<=t?s:n==="left"?i+s.slice(o-a):n==="center"?s.slice(0,Math.ceil(a/2))+i+s.slice(o-~~(a/2)):s.slice(0,a)+i}function Tv(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const s=t(e[i]);s&&n(s,i,e)}}else e.forEach(n)}function qbt(e){return e}function Wbt(e){if(e==null)return qbt;var t,n,r=e.scale[0],i=e.scale[1],s=e.translate[0],o=e.translate[1];return function(a,u){u||(t=n=0);var l=2,c=a.length,f=new Array(c);for(f[0]=(t+=a[0])*r+s,f[1]=(n+=a[1])*i+o;l<c;)f[l]=a[l],++l;return f}}function Gbt(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function Ybt(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return dce(e,n)})}:dce(e,t)}function dce(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,s=iTe(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:s}:r==null?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:r,properties:i,geometry:s}}function iTe(e,t){var n=Wbt(e.transform),r=e.arcs;function i(c,f){f.length&&f.pop();for(var d=r[c<0?~c:c],h=0,p=d.length;h<p;++h)f.push(n(d[h],h));c<0&&Gbt(f,p)}function s(c){return n(c)}function o(c){for(var f=[],d=0,h=c.length;d<h;++d)i(c[d],f);return f.length<2&&f.push(f[0]),f}function a(c){for(var f=o(c);f.length<4;)f.push(f[0]);return f}function u(c){return c.map(a)}function l(c){var f=c.type,d;switch(f){case"GeometryCollection":return{type:f,geometries:c.geometries.map(l)};case"Point":d=s(c.coordinates);break;case"MultiPoint":d=c.coordinates.map(s);break;case"LineString":d=o(c.arcs);break;case"MultiLineString":d=c.arcs.map(o);break;case"Polygon":d=u(c.arcs);break;case"MultiPolygon":d=c.arcs.map(u);break;default:return null}return{type:f,coordinates:d}}return l(t)}function Kbt(e,t){var n={},r={},i={},s=[],o=-1;t.forEach(function(l,c){var f=e.arcs[l<0?~l:l],d;f.length<3&&!f[1][0]&&!f[1][1]&&(d=t[++o],t[o]=l,t[c]=d)}),t.forEach(function(l){var c=a(l),f=c[0],d=c[1],h,p;if(h=i[f])if(delete i[h.end],h.push(l),h.end=d,p=r[d]){delete r[p.start];var m=p===h?h:h.concat(p);r[m.start=h.start]=i[m.end=p.end]=m}else r[h.start]=i[h.end]=h;else if(h=r[d])if(delete r[h.start],h.unshift(l),h.start=f,p=i[f]){delete i[p.end];var g=p===h?h:p.concat(h);r[g.start=p.start]=i[g.end=h.end]=g}else r[h.start]=i[h.end]=h;else h=[l],r[h.start=f]=i[h.end=d]=h});function a(l){var c=e.arcs[l<0?~l:l],f=c[0],d;return e.transform?(d=[0,0],c.forEach(function(h){d[0]+=h[0],d[1]+=h[1]})):d=c[c.length-1],l<0?[d,f]:[f,d]}function u(l,c){for(var f in l){var d=l[f];delete c[d.start],delete d.start,delete d.end,d.forEach(function(h){n[h<0?~h:h]=1}),s.push(d)}}return u(i,r),u(r,i),t.forEach(function(l){n[l<0?~l:l]||s.push([l])}),s}function Xbt(e){return iTe(e,Qbt.apply(this,arguments))}function Qbt(e,t,n){var r,i,s;if(arguments.length>1)r=Jbt(e,t,n);else for(i=0,r=new Array(s=e.arcs.length);i<s;++i)r[i]=i;return{type:"MultiLineString",arcs:Kbt(e,r)}}function Jbt(e,t,n){var r=[],i=[],s;function o(f){var d=f<0?~f:f;(i[d]||(i[d]=[])).push({i:f,g:s})}function a(f){f.forEach(o)}function u(f){f.forEach(a)}function l(f){f.forEach(u)}function c(f){switch(s=f,f.type){case"GeometryCollection":f.geometries.forEach(c);break;case"LineString":a(f.arcs);break;case"MultiLineString":case"Polygon":u(f.arcs);break;case"MultiPolygon":l(f.arcs);break}}return c(t),i.forEach(n==null?function(f){r.push(f[0].i)}:function(f){n(f[0].g,f[f.length-1].g)&&r.push(f[0].i)}),r}const wl="year",id="quarter",oc="month",fu="week",sd="date",ec="day",dg="dayofyear",uh="hours",lh="minutes",tp="seconds",k0="milliseconds",rX=[wl,id,oc,fu,sd,ec,dg,uh,lh,tp,k0],mB=rX.reduce((e,t,n)=>(e[t]=1+n,e),{});function iX(e){const t=ln(e).slice(),n={};return t.length||vt("Missing time unit."),t.forEach(i=>{gn(mB,i)?n[i]=1:vt(`Invalid time unit: ${i}.`)}),(n[fu]||n[ec]?1:0)+(n[id]||n[oc]||n[sd]?1:0)+(n[dg]?1:0)>1&&vt(`Incompatible time units: ${e}`),t.sort((i,s)=>mB[i]-mB[s]),t}const Zbt={[wl]:"%Y ",[id]:"Q%q ",[oc]:"%b ",[sd]:"%d ",[fu]:"W%U ",[ec]:"%a ",[dg]:"%j ",[uh]:"%H:00",[lh]:"00:%M",[tp]:":%S",[k0]:".%L",[`${wl}-${oc}`]:"%Y-%m ",[`${wl}-${oc}-${sd}`]:"%Y-%m-%d ",[`${uh}-${lh}`]:"%H:%M"};function sTe(e,t){const n=kr({},Zbt,t),r=iX(e),i=r.length;let s="",o=0,a,u;for(o=0;o<i;)for(a=r.length;a>o;--a)if(u=r.slice(o,a).join("-"),n[u]!=null){s+=n[u],o=a;break}return s.trim()}const p_=new Date;function sX(e){return p_.setFullYear(e),p_.setMonth(0),p_.setDate(1),p_.setHours(0,0,0,0),p_}function oTe(e){return uTe(new Date(e))}function aTe(e){return uV(new Date(e))}function uTe(e){return e1.count(sX(e.getFullYear())-1,e)}function uV(e){return qT.count(sX(e.getFullYear())-1,e)}function lV(e){return sX(e).getDay()}function ext(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(-1,t,n,r,i,s,o);return a.setFullYear(e),a}return new Date(e,t,n,r,i,s,o)}function lTe(e){return fTe(new Date(e))}function cTe(e){return cV(new Date(e))}function fTe(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return Zv.count(t-1,e)}function cV(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return WT.count(t-1,e)}function fV(e){return p_.setTime(Date.UTC(e,0,1)),p_.getUTCDay()}function txt(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(Date.UTC(-1,t,n,r,i,s,o));return a.setUTCFullYear(n.y),a}return new Date(Date.UTC(e,t,n,r,i,s,o))}function dTe(e,t,n,r,i){const s=t||1,o=pi(e),a=(b,y,x)=>(x=x||b,nxt(n[x],r[x],b===o&&s,y)),u=new Date,l=A0(e),c=l[wl]?a(wl):dc(2012),f=l[oc]?a(oc):l[id]?a(id):Mv,d=l[fu]&&l[ec]?a(ec,1,fu+ec):l[fu]?a(fu,1):l[ec]?a(ec,1):l[sd]?a(sd,1):l[dg]?a(dg,1):YT,h=l[uh]?a(uh):Mv,p=l[lh]?a(lh):Mv,m=l[tp]?a(tp):Mv,g=l[k0]?a(k0):Mv;return function(b){u.setTime(+b);const y=c(u);return i(y,f(u),d(u,y),h(u),p(u),m(u),g(u))}}function nxt(e,t,n,r){const i=n<=1?e:r?(s,o)=>r+n*Math.floor((e(s,o)-r)/n):(s,o)=>n*Math.floor(e(s,o)/n);return t?(s,o)=>t(i(s,o),o):i}function OS(e,t,n){return t+e*7-(n+6)%7}const rxt={[wl]:e=>e.getFullYear(),[id]:e=>Math.floor(e.getMonth()/3),[oc]:e=>e.getMonth(),[sd]:e=>e.getDate(),[uh]:e=>e.getHours(),[lh]:e=>e.getMinutes(),[tp]:e=>e.getSeconds(),[k0]:e=>e.getMilliseconds(),[dg]:e=>uTe(e),[fu]:e=>uV(e),[fu+ec]:(e,t)=>OS(uV(e),e.getDay(),lV(t)),[ec]:(e,t)=>OS(1,e.getDay(),lV(t))},ixt={[id]:e=>3*e,[fu]:(e,t)=>OS(e,0,lV(t))};function hTe(e,t){return dTe(e,t||1,rxt,ixt,ext)}const sxt={[wl]:e=>e.getUTCFullYear(),[id]:e=>Math.floor(e.getUTCMonth()/3),[oc]:e=>e.getUTCMonth(),[sd]:e=>e.getUTCDate(),[uh]:e=>e.getUTCHours(),[lh]:e=>e.getUTCMinutes(),[tp]:e=>e.getUTCSeconds(),[k0]:e=>e.getUTCMilliseconds(),[dg]:e=>fTe(e),[fu]:e=>cV(e),[ec]:(e,t)=>OS(1,e.getUTCDay(),fV(t)),[fu+ec]:(e,t)=>OS(cV(e),e.getUTCDay(),fV(t))},oxt={[id]:e=>3*e,[fu]:(e,t)=>OS(e,0,fV(t))};function pTe(e,t){return dTe(e,t||1,sxt,oxt,txt)}const axt={[wl]:lg,[id]:_4.every(3),[oc]:_4,[fu]:qT,[sd]:e1,[ec]:e1,[dg]:e1,[uh]:pM,[lh]:dM,[tp]:Vy,[k0]:IS},uxt={[wl]:cg,[id]:w4.every(3),[oc]:w4,[fu]:WT,[sd]:Zv,[ec]:Zv,[dg]:Zv,[uh]:mM,[lh]:hM,[tp]:Vy,[k0]:IS};function JT(e){return axt[e]}function ZT(e){return uxt[e]}function mTe(e,t,n){return e?e.offset(t,n):void 0}function gTe(e,t,n){return mTe(JT(e),t,n)}function yTe(e,t,n){return mTe(ZT(e),t,n)}function vTe(e,t,n,r){return e?e.range(t,n,r):void 0}function bTe(e,t,n,r){return vTe(JT(e),t,n,r)}function xTe(e,t,n,r){return vTe(ZT(e),t,n,r)}const z3=1e3,V3=z3*60,H3=V3*60,kM=H3*24,lxt=kM*7,hce=kM*30,dV=kM*365,_Te=[wl,oc,sd,uh,lh,tp,k0],q3=_Te.slice(0,-1),W3=q3.slice(0,-1),G3=W3.slice(0,-1),cxt=G3.slice(0,-1),fxt=[wl,fu],pce=[wl,oc],wTe=[wl],XA=[[q3,1,z3],[q3,5,5*z3],[q3,15,15*z3],[q3,30,30*z3],[W3,1,V3],[W3,5,5*V3],[W3,15,15*V3],[W3,30,30*V3],[G3,1,H3],[G3,3,3*H3],[G3,6,6*H3],[G3,12,12*H3],[cxt,1,kM],[fxt,1,lxt],[pce,1,hce],[pce,3,3*hce],[wTe,1,dV]];function ETe(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(VR(t))/n;let i=zT(a=>a[2]).right(XA,r),s,o;return i===XA.length?(s=wTe,o=vb(t[0]/dV,t[1]/dV,n)):i?(i=XA[r/XA[i-1][2]<XA[i][2]/r?i-1:i],s=i[0],o=i[1]):(s=_Te,o=Math.max(vb(t[0],t[1],n),1)),{units:s,step:o}}function Y3(e){const t={};return n=>t[n]||(t[n]=e(n))}function dxt(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let s=hxt(r,i);const o=s<r.length?r.slice(s):"";for(;--s>i;)if(r[s]!=="0"){++s;break}return r.slice(0,s)+o}}function hxt(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function STe(e){const t=Y3(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=Z_(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return dxt(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,s,o){o=Z_(o??",f");const a=vb(r,i,s),u=Math.max(Math.abs(r),Math.abs(i));let l;if(o.precision==null)switch(o.type){case"s":return isNaN(l=R2e(a,u))||(o.precision=l),n(o,u);case"":case"e":case"g":case"p":case"r":{isNaN(l=I2e(a,u))||(o.precision=l-(o.type==="e"));break}case"f":case"%":{isNaN(l=k2e(a))||(o.precision=l-(o.type==="%")*2);break}}return t(o)}}}let hV;TTe();function TTe(){return hV=STe({format:sM,formatPrefix:cK})}function CTe(e){return STe(A2e(e))}function RD(e){return arguments.length?hV=CTe(e):hV}function mce(e,t,n){n=n||{},un(n)||vt(`Invalid time multi-format specifier: ${n}`);const r=t(tp),i=t(lh),s=t(uh),o=t(sd),a=t(fu),u=t(oc),l=t(id),c=t(wl),f=e(n[k0]||".%L"),d=e(n[tp]||":%S"),h=e(n[lh]||"%I:%M"),p=e(n[uh]||"%I %p"),m=e(n[sd]||n[ec]||"%a %d"),g=e(n[fu]||"%b %d"),b=e(n[oc]||"%B"),y=e(n[id]||"%B"),x=e(n[wl]||"%Y");return w=>(r(w)<w?f:i(w)<w?d:s(w)<w?h:o(w)<w?p:u(w)<w?a(w)<w?m:g:c(w)<w?l(w)<w?b:y:x)(w)}function ATe(e){const t=Y3(e.format),n=Y3(e.utcFormat);return{timeFormat:r=>cn(r)?t(r):mce(t,JT,r),utcFormat:r=>cn(r)?n(r):mce(n,ZT,r),timeParse:Y3(e.parse),utcParse:Y3(e.utcParse)}}let pV;kTe();function kTe(){return pV=ATe({format:TK,parse:zEe,utcFormat:CK,utcParse:VEe})}function RTe(e){return ATe(FEe(e))}function C4(e){return arguments.length?pV=RTe(e):pV}const mV=(e,t)=>kr({},e,t);function ITe(e,t){const n=e?CTe(e):RD(),r=t?RTe(t):C4();return mV(n,r)}function oX(e,t){const n=arguments.length;return n&&n!==2&&vt("defaultLocale expects either zero or two arguments."),n?mV(RD(e),C4(t)):mV(RD(),C4())}function pxt(){return TTe(),kTe(),oX()}const mxt=/^(data:|([A-Za-z]+:)?\/\/)/,gxt=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,yxt=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,gce="file://";function vxt(e,t){return n=>({options:n||{},sanitize:xxt,load:bxt,fileAccess:!1,file:_xt(t),http:Ext(e)})}async function bxt(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function xxt(e,t){t=kr({},this.options,t);const n=this.fileAccess,r={href:null};let i,s,o;const a=gxt.test(e.replace(yxt,""));(e==null||typeof e!="string"||!a)&&vt("Sanitize failure, invalid URI: "+Jt(e));const u=mxt.test(e);return(o=t.baseURL)&&!u&&(!e.startsWith("/")&&!o.endsWith("/")&&(e="/"+e),e=o+e),s=(i=e.startsWith(gce))||t.mode==="file"||t.mode!=="http"&&!u&&n,i?e=e.slice(gce.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),s=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!s}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function _xt(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,s)=>{i?r(i):n(s)})}):wxt}async function wxt(){vt("No file system access.")}function Ext(e){return e?async function(t,n){const r=kr({},this.options.http,n),i=n&&n.response,s=await e(t,r);return s.ok?Rr(s[i])?s[i]():s.text():vt(s.status+""+s.statusText)}:Sxt}async function Sxt(){vt("No HTTP fetch method available.")}const Txt=e=>e!=null&&e===e,Cxt=e=>e==="true"||e==="false"||e===!0||e===!1,Axt=e=>!Number.isNaN(Date.parse(e)),PTe=e=>!Number.isNaN(+e)&&!(e instanceof Date),kxt=e=>PTe(e)&&Number.isInteger(+e),gV={boolean:eX,integer:rc,number:rc,date:tX,string:nX,unknown:fc},e5=[Cxt,kxt,PTe,Axt],Rxt=["boolean","integer","number","date"];function NTe(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=e5.length,i=e5.map((s,o)=>o+1);for(let s=0,o=0,a,u;s<n;++s)for(u=t?e[s][t]:e[s],a=0;a<r;++a)if(i[a]&&Txt(u)&&!e5[a](u)&&(i[a]=0,++o,o===e5.length))return"string";return Rxt[i.reduce((s,o)=>s===0?o:s,0)-1]}function DTe(e,t){return t.reduce((n,r)=>(n[r]=NTe(e,r),n),{})}function yce(e){const t=function(n,r){const i={delimiter:e};return aX(n,r?kr(r,i):i)};return t.responseType="text",t}function aX(e,t){return t.header&&(e=t.header.map(Jt).join(t.delimiter)+`
`+e),Nht(t.delimiter).parse(e+"")}aX.responseType="text";function Ixt(e){return typeof Buffer=="function"&&Rr(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function uX(e,t){const n=t&&t.property?Zh(t.property):fc;return un(e)&&!Ixt(e)?Pxt(n(e),t):n(JSON.parse(e))}uX.responseType="json";function Pxt(e,t){return!xt(e)&&QSe(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const Nxt={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function OTe(e,t){let n,r,i,s;return e=uX(e,t),t&&t.feature?(n=Ybt,i=t.feature):t&&t.mesh?(n=Xbt,i=t.mesh,s=Nxt[t.filter]):vt("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,s):vt("Invalid TopoJSON object: "+i),r&&r.features||[r]}OTe.responseType="json";const T8={dsv:aX,csv:yce(","),tsv:yce("	"),json:uX,topojson:OTe};function lX(e,t){return arguments.length>1?(T8[e]=t,this):gn(T8,e)?T8[e]:null}function MTe(e){const t=lX(e);return t&&t.responseType||"text"}function LTe(e,t,n,r){t=t||{};const i=lX(t.type||"json");return i||vt("Unknown data format type: "+t.type),e=i(e,t),t.parse&&Dxt(e,t.parse,n,r),gn(e,"columns")&&delete e.columns,e}function Dxt(e,t,n,r){if(!e.length)return;const i=C4();n=n||i.timeParse,r=r||i.utcParse;let s=e.columns||Object.keys(e[0]),o,a,u,l,c,f;t==="auto"&&(t=DTe(e,s)),s=Object.keys(t);const d=s.map(h=>{const p=t[h];let m,g;if(p&&(p.startsWith("date:")||p.startsWith("utc:")))return m=p.split(/:(.+)?/,2),g=m[1],(g[0]==="'"&&g[g.length-1]==="'"||g[0]==='"'&&g[g.length-1]==='"')&&(g=g.slice(1,-1)),(m[0]==="utc"?r:n)(g);if(!gV[p])throw Error("Illegal format pattern: "+h+":"+p);return gV[p]});for(u=0,c=e.length,f=s.length;u<c;++u)for(o=e[u],l=0;l<f;++l)a=s[l],o[a]=d[l](o[a])}const RM=vxt(typeof fetch<"u"&&fetch,null);function IM(e){const t=e||fc,n=[],r={};return n.add=i=>{const s=t(i);return r[s]||(r[s]=1,n.push(i)),n},n.remove=i=>{const s=t(i);if(r[s]){r[s]=0;const o=n.indexOf(i);o>=0&&n.splice(o,1)}return n},n}async function C8(e,t){try{await t(e)}catch(n){e.error(n)}}const FTe=Symbol("vega_id");let Oxt=1;function PM(e){return!!(e&&Ln(e))}function Ln(e){return e[FTe]}function $Te(e,t){return e[FTe]=t,e}function Vi(e){const t=e===Object(e)?e:{data:e};return Ln(t)?t:$Te(t,Oxt++)}function cX(e){return NM(e,Vi({}))}function NM(e,t){for(const n in e)t[n]=e[n];return t}function BTe(e,t){return $Te(t,Ln(e))}function Ww(e,t){return e?t?(n,r)=>e(n,r)||Ln(t(n))-Ln(t(r)):(n,r)=>e(n,r)||Ln(n)-Ln(r):null}function jTe(e){return e&&e.constructor===Gw}function Gw(){const e=[],t=[],n=[],r=[],i=[];let s=null,o=!1;return{constructor:Gw,insert(a){const u=ln(a),l=u.length;for(let c=0;c<l;++c)e.push(u[c]);return this},remove(a){const u=Rr(a)?r:t,l=ln(a),c=l.length;for(let f=0;f<c;++f)u.push(l[f]);return this},modify(a,u,l){const c={field:u,value:dc(l)};return Rr(a)?(c.filter=a,i.push(c)):(c.tuple=a,n.push(c)),this},encode(a,u){return Rr(a)?i.push({filter:a,field:u}):n.push({tuple:a,field:u}),this},clean(a){return s=a,this},reflow(){return o=!0,this},pulse(a,u){const l={},c={};let f,d,h,p,m,g;for(f=0,d=u.length;f<d;++f)l[Ln(u[f])]=1;for(f=0,d=t.length;f<d;++f)m=t[f],l[Ln(m)]=-1;for(f=0,d=r.length;f<d;++f)p=r[f],u.forEach(y=>{p(y)&&(l[Ln(y)]=-1)});for(f=0,d=e.length;f<d;++f)m=e[f],g=Ln(m),l[g]?l[g]=1:a.add.push(Vi(e[f]));for(f=0,d=u.length;f<d;++f)m=u[f],l[Ln(m)]<0&&a.rem.push(m);function b(y,x,w){w?y[x]=w(y):a.encode=x,o||(c[Ln(y)]=y)}for(f=0,d=n.length;f<d;++f)h=n[f],m=h.tuple,p=h.field,g=l[Ln(m)],g>0&&(b(m,p,h.value),a.modifies(p));for(f=0,d=i.length;f<d;++f)h=i[f],p=h.filter,u.forEach(y=>{p(y)&&l[Ln(y)]>0&&b(y,h.field,h.value)}),a.modifies(h.field);if(o)a.mod=t.length||r.length?u.filter(y=>l[Ln(y)]>0):u.slice();else for(g in c)a.mod.push(c[g]);return(s||s==null&&(t.length||r.length))&&a.clean(!0),a}}}const A8="_:mod:_";function DM(){Object.defineProperty(this,A8,{writable:!0,value:{}})}DM.prototype={set(e,t,n,r){const i=this,s=i[e],o=i[A8];return t!=null&&t>=0?(s[t]!==n||r)&&(s[t]=n,o[t+":"+e]=-1,o[e]=-1):(s!==n||r)&&(i[e]=n,o[e]=xt(n)?1+n.length:-1),i},modified(e,t){const n=this[A8];if(arguments.length){if(xt(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[A8]={},this}};let Mxt=0;const Lxt="pulse",Fxt=new DM,$xt=1,Bxt=2;function Ts(e,t,n,r){this.id=++Mxt,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function vce(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}Ts.prototype={targets(){return this._targets||(this._targets=IM(zR))},set(e){return this.value!==e?(this.value=e,1):0},skip:vce($xt),modified:vce(Bxt),parameters(e,t,n){t=t!==!1;const r=this._argval=this._argval||new DM,i=this._argops=this._argops||[],s=[];let o,a,u,l;const c=(f,d,h)=>{h instanceof Ts?(h!==this&&(t&&h.targets().add(this),s.push(h)),i.push({op:h,name:f,index:d})):r.set(f,d,h)};for(o in e)if(a=e[o],o===Lxt)ln(a).forEach(f=>{f instanceof Ts?f!==this&&(f.targets().add(this),s.push(f)):vt("Pulse parameters must be operator instances.")}),this.source=a;else if(xt(a))for(r.set(o,-1,Array(u=a.length)),l=0;l<u;++l)c(o,l,a[l]);else c(o,-1,a);return this.marshall().clear(),n&&(i.initonly=!0),s},marshall(e){const t=this._argval||Fxt,n=this._argops;let r,i,s,o;if(n){const a=n.length;for(i=0;i<a;++i)r=n[i],s=r.op,o=s.modified()&&s.stamp===e,t.set(r.name,r.index,s.value,o);if(n.initonly){for(i=0;i<a;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function jxt(e,t,n,r){let i=1,s;return e instanceof Ts?s=e:e&&e.prototype instanceof Ts?s=new e:Rr(e)?s=new Ts(null,e):(i=0,s=new Ts(e,t)),this.rank(s),i&&(r=n,n=t),n&&this.connect(s,s.parameters(n,r)),this.touch(s),s}function Uxt(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}let zxt=0;function OM(e,t,n){this.id=++zxt,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function _v(e,t,n){return new OM(e,t,n)}OM.prototype={_filter:ep,_apply:fc,targets(){return this._targets||(this._targets=IM(zR))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=_v(e);return this.targets().add(t),t},apply(e){const t=_v(null,e);return this.targets().add(t),t},merge(){const e=_v();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=_v();return this.targets().add(_v(null,null,JK(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(_v(null,null,()=>n=!0)),t.targets().add(_v(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=ep,this._targets=null}};function Vxt(e,t,n,r){const i=this,s=_v(n,r),o=function(l){l.dataflow=i;try{s.receive(l)}catch(c){i.error(c)}finally{i.run()}};let a;typeof e=="string"&&typeof document<"u"?a=document.querySelectorAll(e):a=ln(e);const u=a.length;for(let l=0;l<u;++l)a[l].addEventListener(t,o);return s}function Hxt(e,t){const n=this.locale();return LTe(e,t,n.timeParse,n.utcParse)}function qxt(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function Wxt(e,t){const n=this;let r=0,i;try{i=await n.loader().load(e,{context:"dataflow",response:MTe(t&&t.type)});try{i=n.parse(i,t)}catch(s){r=-2,n.warn("Data ingestion failed",e,s)}}catch(s){r=-1,n.warn("Loading failed",e,s)}return{data:i,status:r}}async function Gxt(e,t,n){const r=this,i=r._pending||Yxt(r);i.requests+=1;const s=await r.request(t,n);return r.pulse(e,r.changeset().remove(ep).insert(s.data||[])),i.done(),s}function Yxt(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const Kxt={skip:!0};function Xxt(e,t,n,r,i){return(e instanceof Ts?Jxt:Qxt)(this,e,t,n,r,i),this}function Qxt(e,t,n,r,i,s){const o=kr({},s,Kxt);let a,u;Rr(n)||(n=dc(n)),r===void 0?a=l=>e.touch(n(l)):Rr(r)?(u=new Ts(null,r,i,!1),a=l=>{u.evaluate(l);const c=n(l),f=u.value;jTe(f)?e.pulse(c,f,s):e.update(c,f,o)}):a=l=>e.update(n(l),r,o),t.apply(a)}function Jxt(e,t,n,r,i,s){if(r===void 0)t.targets().add(n);else{const o=s||{},a=new Ts(null,Zxt(n,r),i,!1);a.modified(o.force),a.rank=t.rank,t.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),e.connect(n,[a]))}}function Zxt(e,t){return t=Rr(t)?t:dc(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function e_t(e){e.rank=++this._rank}function t_t(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&vt("Cycle detected in dataflow graph.")}const ID={},Em=1,Cv=2,Ay=4,n_t=Em|Cv,bce=Em|Ay,Z2=Em|Cv|Ay,xce=8,QA=16,_ce=32,wce=64;function tb(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function gB(e,t){const n=[];return Tv(e,t,r=>n.push(r)),n}function Ece(e,t){const n={};return e.visit(t,r=>{n[Ln(r)]=1}),r=>n[Ln(r)]?null:r}function t5(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}tb.prototype={StopPropagation:ID,ADD:Em,REM:Cv,MOD:Ay,ADD_REM:n_t,ADD_MOD:bce,ALL:Z2,REFLOW:xce,SOURCE:QA,NO_SOURCE:_ce,NO_FIELDS:wce,fork(e){return new tb(this.dataflow).init(this,e)},clone(){const e=this.fork(Z2);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(Z2|QA)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new tb(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&wce)&&(n.fields=e.fields),t&Em?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&Cv?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&Ay?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&_ce?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||Z2;return t&Em&&this.add.length||t&Cv&&this.rem.length||t&Ay&&this.mod.length},reflow(e){if(e)return this.fork(Z2).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(Ay,Ece(this,Em))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return xt(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?xt(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){const n=this;return e&Em&&(n.addF=t5(n.addF,t)),e&Cv&&(n.remF=t5(n.remF,t)),e&Ay&&(n.modF=t5(n.modF,t)),e&QA&&(n.srcF=t5(n.srcF,t)),n},materialize(e){e=e||Z2;const t=this;return e&Em&&t.addF&&(t.add=gB(t.add,t.addF),t.addF=null),e&Cv&&t.remF&&(t.rem=gB(t.rem,t.remF),t.remF=null),e&Ay&&t.modF&&(t.mod=gB(t.mod,t.modF),t.modF=null),e&QA&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(e&QA)return Tv(n.source,n.srcF,r),n;e&Em&&Tv(n.add,n.addF,r),e&Cv&&Tv(n.rem,n.remF,r),e&Ay&&Tv(n.mod,n.modF,r);const i=n.source;if(e&xce&&i){const s=n.add.length+n.mod.length;s===i.length||(s?Tv(i,Ece(n,bce),r):Tv(i,n.srcF,r))}return n}};function fX(e,t,n,r){const i=this;let s=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(const o of n)if(o.stamp===t){if(o.fields){const a=i.fields||(i.fields={});for(const u in o.fields)a[u]=1}o.changed(i.ADD)&&(s|=i.ADD),o.changed(i.REM)&&(s|=i.REM),o.changed(i.MOD)&&(s|=i.MOD)}this.changes=s}en(fX,tb,{fork(e){const t=new tb(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?xt(e)?e.some(r=>n[r]):n[e]:0},filter(){vt("MultiPulse does not support filtering.")},materialize(){vt("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let s=0;if(e&n.SOURCE)for(;s<i;++s)r[s].visit(e,t);else for(;s<i;++s)r[s].stamp===n.stamp&&r[s].visit(e,t);return n}});async function r_t(e,t,n){const r=this,i=[];if(r._pulse)return UTe(r);if(r._pending&&await r._pending,t&&await C8(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const s=++r._clock;r._pulse=new tb(r,s,e),r._touched.forEach(c=>r._enqueue(c,!0)),r._touched=IM(zR);let o=0,a,u,l;try{for(;r._heap.size()>0;){if(a=r._heap.pop(),a.rank!==a.qrank){r._enqueue(a,!0);continue}u=a.run(r._getPulse(a,e)),u.then?u=await u:u.async&&(i.push(u.async),u=ID),u!==ID&&a._targets&&a._targets.forEach(c=>r._enqueue(c)),++o}}catch(c){r._heap.clear(),l=c}if(r._input={},r._pulse=null,r.debug(`Pulse ${s}: ${o} operators`),l&&(r._postrun=[],r.error(l)),r._postrun.length){const c=r._postrun.sort((f,d)=>d.priority-f.priority);r._postrun=[];for(let f=0;f<c.length;++f)await C8(r,c[f].callback)}return n&&await C8(r,n),i.length&&Promise.all(i).then(c=>r.runAsync(null,()=>{c.forEach(f=>{try{f(r)}catch(d){r.error(d)}})})),r}async function i_t(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}function s_t(e,t,n){return this._pulse?UTe(this):(this.evaluate(e,t,n),this)}function o_t(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function UTe(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function a_t(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function u_t(e,t){const n=e.source,r=this._clock;return n&&xt(n)?new fX(this,r,n.map(i=>i.pulse),t):this._input[e.id]||l_t(this._pulse,n&&n.pulse)}function l_t(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==ID&&(e.source=t.source),e)}const dX={skip:!1,force:!1};function c_t(e,t){const n=t||dX;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function f_t(e,t,n){const r=n||dX;return(e.set(t)||r.force)&&this.touch(e,r),this}function d_t(e,t,n){this.touch(e,n||dX);const r=new tb(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function h_t(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),zTe(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,p_t(t,0,e)):r=n,r}}}function zTe(e,t,n,r){let i,s;const o=e[n];for(;n>t;){if(s=n-1>>1,i=e[s],r(o,i)<0){e[n]=i,n=s;continue}break}return e[n]=o}function p_t(e,t,n){const r=t,i=e.length,s=e[t];let o=(t<<1)+1,a;for(;o<i;)a=o+1,a<i&&n(e[o],e[a])>=0&&(o=a),e[t]=e[o],t=o,o=(t<<1)+1;return e[t]=s,zTe(e,r,t,n)}function KE(){this.logger(GK()),this.logLevel(qK),this._clock=0,this._rank=0,this._locale=oX();try{this._loader=RM()}catch{}this._touched=IM(zR),this._input={},this._pulse=null,this._heap=h_t((e,t)=>e.qrank-t.qrank),this._postrun=[]}function JA(e){return function(){return this._log[e].apply(this,arguments)}}KE.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:JA("error"),warn:JA("warn"),info:JA("info"),debug:JA("debug"),logLevel:JA("level"),cleanThreshold:1e4,add:jxt,connect:Uxt,rank:e_t,rerank:t_t,pulse:d_t,touch:c_t,update:f_t,changeset:Gw,ingest:qxt,parse:Hxt,preload:Gxt,request:Wxt,events:Vxt,on:Xxt,evaluate:r_t,run:s_t,runAsync:i_t,runAfter:o_t,_enqueue:a_t,_getPulse:u_t};function pt(e,t){Ts.call(this,e,null,t)}en(pt,Ts,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const MS={};function VTe(e){const t=HTe(e);return t&&t.Definition||null}function HTe(e){return e=e&&e.toLowerCase(),gn(MS,e)?MS[e]:null}function*qTe(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function hX(e,t,n){const r=Float64Array.from(qTe(e,n));return r.sort(Jy),t.map(i=>kwe(r,i))}function pX(e,t){return hX(e,[.25,.5,.75],t)}function mX(e,t){const n=e.length,r=glt(e,t),i=pX(e,t),s=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,s)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function WTe(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let s=e.extent[0],o=e.extent[1],a,u,l,c,f,d;const h=e.span||o-s||Math.abs(s)||1;if(e.step)a=e.step;else if(e.steps){for(c=h/t,f=0,d=e.steps.length;f<d&&e.steps[f]<c;++f);a=e.steps[Math.max(0,f-1)]}else{for(u=Math.ceil(Math.log(t)/r),l=e.minstep||0,a=Math.max(l,Math.pow(n,Math.round(Math.log(h)/r)-u));Math.ceil(h/a)>t;)a*=n;for(f=0,d=i.length;f<d;++f)c=a/i[f],c>=l&&h/c<=t&&(a=c)}c=Math.log(a);const p=c>=0?0:~~(-c/r)+1,m=Math.pow(n,-p-1);return(e.nice||e.nice===void 0)&&(c=Math.floor(s/a+m)*a,s=s<c?c-a:c,o=Math.ceil(o/a)*a),{start:s,stop:o===s?s+a:o,step:a}}var np=Math.random;function m_t(e){np=e}function GTe(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(qTe(e,r)),s=i.length,o=t;let a,u,l,c;for(l=0,c=Array(o);l<o;++l){for(a=0,u=0;u<s;++u)a+=i[~~(np()*s)];c[l]=a/s}return c.sort(Jy),[bz(c,n/2),bz(c,1-n/2)]}function YTe(e,t,n,r){r=r||(d=>d);const i=e.length,s=new Float64Array(i);let o=0,a=1,u=r(e[0]),l=u,c=u+t,f;for(;a<i;++a){if(f=r(e[a]),f>=c){for(l=(u+l)/2;o<a;++o)s[o]=l;c=f+t,u=f}l=f}for(l=(u+l)/2;o<a;++o)s[o]=l;return n?g_t(s,t+t/4):s}function g_t(e,t){const n=e.length;let r=0,i=1,s,o;for(;e[r]===e[i];)++i;for(;i<n;){for(s=i+1;e[i]===e[s];)++s;if(e[i]-e[i-1]<t){for(o=i+(r+s-i-i>>1);o<i;)e[o++]=e[i];for(;o>i;)e[o--]=e[r]}r=i,i=s}return e}function y_t(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function v_t(e,t){t==null&&(t=e,e=0);let n,r,i;const s={min(o){return arguments.length?(n=o||0,i=r-n,s):n},max(o){return arguments.length?(r=o||0,i=r-n,s):r},sample(){return n+Math.floor(i*np())},pdf(o){return o===Math.floor(o)&&o>=n&&o<r?1/i:0},cdf(o){const a=Math.floor(o);return a<n?0:a>=r?1:(a-n+1)/i},icdf(o){return o>=0&&o<=1?n-1+Math.floor(o*i):NaN}};return s.min(e).max(t)}const KTe=Math.sqrt(2*Math.PI),b_t=Math.SQRT2;let ZA=NaN;function MM(e,t){e=e||0,t=t??1;let n=0,r=0,i,s;if(ZA===ZA)n=ZA,ZA=NaN;else{do n=np()*2-1,r=np()*2-1,i=n*n+r*r;while(i===0||i>1);s=Math.sqrt(-2*Math.log(i)/i),n*=s,ZA=r*s}return e+n*t}function gX(e,t,n){n=n??1;const r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*KTe)}function LM(e,t,n){t=t||0,n=n??1;const r=(e-t)/n,i=Math.abs(r);let s;if(i>37)s=0;else{const o=Math.exp(-i*i/2);let a;i<7.07106781186547?(a=.0352624965998911*i+.700383064443688,a=a*i+6.37396220353165,a=a*i+33.912866078383,a=a*i+112.079291497871,a=a*i+221.213596169931,a=a*i+220.206867912376,s=o*a,a=.0883883476483184*i+1.75566716318264,a=a*i+16.064177579207,a=a*i+86.7807322029461,a=a*i+296.564248779674,a=a*i+637.333633378831,a=a*i+793.826512519948,a=a*i+440.413735824752,s=s/a):(a=i+.65,a=i+4/a,a=i+3/a,a=i+2/a,a=i+1/a,s=o/a/2.506628274631)}return r>0?1-s:s}function FM(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*b_t*x_t(2*e-1)}function x_t(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function yX(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>MM(n,r),pdf:s=>gX(s,n,r),cdf:s=>LM(s,n,r),icdf:s=>FM(s,n,r)};return i.mean(e).stdev(t)}function vX(e,t){const n=yX();let r=0;const i={data(s){return arguments.length?(e=s,r=s?s.length:0,i.bandwidth(t)):e},bandwidth(s){return arguments.length?(t=s,!t&&e&&(t=mX(e)),i):t},sample(){return e[~~(np()*r)]+t*n.sample()},pdf(s){let o=0,a=0;for(;a<r;++a)o+=n.pdf((s-e[a])/t);return o/t/r},cdf(s){let o=0,a=0;for(;a<r;++a)o+=n.cdf((s-e[a])/t);return o/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function bX(e,t){return e=e||0,t=t??1,Math.exp(e+MM()*t)}function xX(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*KTe*e)}function _X(e,t,n){return LM(Math.log(e),t,n)}function wX(e,t,n){return Math.exp(FM(e,t,n))}function XTe(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>bX(n,r),pdf:s=>xX(s,n,r),cdf:s=>_X(s,n,r),icdf:s=>wX(s,n,r)};return i.mean(e).stdev(t)}function QTe(e,t){let n=0,r;function i(o){const a=[];let u=0,l;for(l=0;l<n;++l)u+=a[l]=o[l]==null?1:+o[l];for(l=0;l<n;++l)a[l]/=u;return a}const s={weights(o){return arguments.length?(r=i(t=o||[]),s):t},distributions(o){return arguments.length?(o?(n=o.length,e=o):(n=0,e=[]),s.weights(t)):e},sample(){const o=np();let a=e[n-1],u=r[0],l=0;for(;l<n-1;u+=r[++l])if(o<u){a=e[l];break}return a.sample()},pdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].pdf(o);return a},cdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].cdf(o);return a},icdf(){throw Error("Mixture icdf not supported.")}};return s.distributions(e).weights(t)}function EX(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*np()}function SX(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function TX(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function CX(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function JTe(e,t){let n,r;const i={min(s){return arguments.length?(n=s||0,i):n},max(s){return arguments.length?(r=s??1,i):r},sample:()=>EX(n,r),pdf:s=>SX(s,n,r),cdf:s=>TX(s,n,r),icdf:s=>CX(s,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function AX(e,t,n){let r=0,i=0;for(const s of e){const o=n(s);t(s)==null||o==null||isNaN(o)||(r+=(o-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function HR(e,t,n,r){const i=r-e*e,s=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-s*e,s]}function $M(e,t,n,r){e=e.filter(h=>{let p=t(h),m=n(h);return p!=null&&(p=+p)>=p&&m!=null&&(m=+m)>=m}),r&&e.sort((h,p)=>t(h)-t(p));const i=e.length,s=new Float64Array(i),o=new Float64Array(i);let a=0,u=0,l=0,c,f,d;for(d of e)s[a]=c=+t(d),o[a]=f=+n(d),++a,u+=(c-u)/a,l+=(f-l)/a;for(a=0;a<i;++a)s[a]-=u,o[a]-=l;return[s,o,u,l]}function qR(e,t,n,r){let i=-1,s,o;for(const a of e)s=t(a),o=n(a),s!=null&&(s=+s)>=s&&o!=null&&(o=+o)>=o&&r(s,o,++i)}function eC(e,t,n,r,i){let s=0,o=0;return qR(e,t,n,(a,u)=>{const l=u-i(a),c=u-r;s+=l*l,o+=c*c}),1-s/o}function kX(e,t,n){let r=0,i=0,s=0,o=0,a=0;qR(e,t,n,(c,f)=>{++a,r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=HR(r,i,s,o),l=c=>u[0]+u[1]*c;return{coef:u,predict:l,rSquared:eC(e,t,n,i,l)}}function ZTe(e,t,n){let r=0,i=0,s=0,o=0,a=0;qR(e,t,n,(c,f)=>{++a,c=Math.log(c),r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=HR(r,i,s,o),l=c=>u[0]+u[1]*Math.log(c);return{coef:u,predict:l,rSquared:eC(e,t,n,i,l)}}function eCe(e,t,n){const[r,i,s,o]=$M(e,t,n);let a=0,u=0,l=0,c=0,f=0,d,h,p;qR(e,t,n,(y,x)=>{d=r[f++],h=Math.log(x),p=d*x,a+=(x*h-a)/f,u+=(p-u)/f,l+=(p*h-l)/f,c+=(d*p-c)/f});const[m,g]=HR(u/o,a/o,l/o,c/o),b=y=>Math.exp(m+g*(y-s));return{coef:[Math.exp(m-g*s),g],predict:b,rSquared:eC(e,t,n,o,b)}}function tCe(e,t,n){let r=0,i=0,s=0,o=0,a=0,u=0;qR(e,t,n,(f,d)=>{const h=Math.log(f),p=Math.log(d);++u,r+=(h-r)/u,i+=(p-i)/u,s+=(h*p-s)/u,o+=(h*h-o)/u,a+=(d-a)/u});const l=HR(r,i,s,o),c=f=>l[0]*Math.pow(f,l[1]);return l[0]=Math.exp(l[0]),{coef:l,predict:c,rSquared:eC(e,t,n,a,c)}}function RX(e,t,n){const[r,i,s,o]=$M(e,t,n),a=r.length;let u=0,l=0,c=0,f=0,d=0,h,p,m,g;for(h=0;h<a;)p=r[h],m=i[h++],g=p*p,u+=(g-u)/h,l+=(g*p-l)/h,c+=(g*g-c)/h,f+=(p*m-f)/h,d+=(g*m-d)/h;const b=c-u*u,y=u*b-l*l,x=(d*u-f*l)/y,w=(f*b-d*l)/y,T=-x*u,A=k=>(k=k-s,x*k*k+w*k+T+o);return{coef:[T-w*s+x*s*s+o,w-2*x*s,x],predict:A,rSquared:eC(e,t,n,o,A)}}function nCe(e,t,n,r){if(r===0)return AX(e,t,n);if(r===1)return kX(e,t,n);if(r===2)return RX(e,t,n);const[i,s,o,a]=$M(e,t,n),u=i.length,l=[],c=[],f=r+1;let d,h,p,m,g;for(d=0;d<f;++d){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d)*s[p];for(l.push(m),g=new Float64Array(f),h=0;h<f;++h){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d+h);g[h]=m}c.push(g)}c.push(l);const b=w_t(c),y=x=>{x-=o;let w=a+b[0]+b[1]*x+b[2]*x*x;for(d=3;d<f;++d)w+=b[d]*Math.pow(x,d);return w};return{coef:__t(f,b,-o,a),predict:y,rSquared:eC(e,t,n,a,y)}}function __t(e,t,n,r){const i=Array(e);let s,o,a,u;for(s=0;s<e;++s)i[s]=0;for(s=e-1;s>=0;--s)for(a=t[s],u=1,i[s]+=a,o=1;o<=s;++o)u*=(s+1-o)/o,i[s-o]+=a*Math.pow(n,o)*u;return i[0]+=r,i}function w_t(e){const t=e.length-1,n=[];let r,i,s,o,a;for(r=0;r<t;++r){for(o=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][o])&&(o=i);for(s=r;s<t+1;++s)a=e[s][r],e[s][r]=e[s][o],e[s][o]=a;for(i=r+1;i<t;++i)for(s=t;s>=r;s--)e[s][i]-=e[s][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(a=0,s=i+1;s<t;++s)a+=e[s][i]*n[s];n[i]=(e[t][i]-a)/e[i][i]}return n}const Sce=2,Tce=1e-12;function rCe(e,t,n,r){const[i,s,o,a]=$M(e,t,n,!0),u=i.length,l=Math.max(2,~~(r*u)),c=new Float64Array(u),f=new Float64Array(u),d=new Float64Array(u).fill(1);for(let h=-1;++h<=Sce;){const p=[0,l-1];for(let g=0;g<u;++g){const b=i[g],y=p[0],x=p[1],w=b-i[y]>i[x]-b?y:x;let T=0,A=0,k=0,I=0,O=0;const M=1/Math.abs(i[w]-b||1);for(let D=y;D<=x;++D){const B=i[D],U=s[D],G=E_t(Math.abs(b-B)*M)*d[D],ee=B*G;T+=G,A+=ee,k+=U*G,I+=U*ee,O+=B*ee}const[L,H]=HR(A/T,k/T,I/T,O/T);c[g]=L+H*b,f[g]=Math.abs(s[g]-c[g]),S_t(i,g+1,p)}if(h===Sce)break;const m=Rwe(f);if(Math.abs(m)<Tce)break;for(let g=0,b,y;g<u;++g)b=f[g]/(6*m),d[g]=b>=1?Tce:(y=1-b*b)*y}return T_t(i,c,o,a)}function E_t(e){return(e=1-e*e*e)*e*e}function S_t(e,t,n){const r=e[t];let i=n[0],s=n[1]+1;if(!(s>=e.length))for(;t>i&&e[s]-r<=r-e[i];)n[0]=++i,n[1]=s,++s}function T_t(e,t,n,r){const i=e.length,s=[];let o=0,a=0,u=[],l;for(;o<i;++o)l=e[o]+n,u[0]===l?u[1]+=(t[o]-u[1])/++a:(a=0,u[1]+=r,u=[l,t[o]],s.push(u));return u[1]+=r,s}const C_t=.5*Math.PI/180;function BM(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=m=>[m,e(m)],s=t[0],o=t[1],a=o-s,u=a/r,l=[i(s)],c=[];if(n===r){for(let m=1;m<r;++m)l.push(i(s+m/n*a));return l.push(i(o)),l}else{c.push(i(o));for(let m=n;--m>0;)c.push(i(s+m/n*a))}let f=l[0],d=c[c.length-1];const h=1/a,p=A_t(f[1],c);for(;d;){const m=i((f[0]+d[0])/2);m[0]-f[0]>=u&&k_t(f,m,d,h,p)>C_t?c.push(m):(f=d,l.push(d),c.pop()),d=c[c.length-1]}return l}function A_t(e,t){let n=e,r=e;const i=t.length;for(let s=0;s<i;++s){const o=t[s][1];o<n&&(n=o),o>r&&(r=o)}return 1/(r-n)}function k_t(e,t,n,r,i){const s=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),o=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(s-o)}function R_t(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function yV(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:R_t(e)}function iCe(e,t,n){return n||e+(t?"_"+t:"")}const yB=()=>{},I_t={init:yB,add:yB,rem:yB,idx:0},A4={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},WR=Object.keys(A4).filter(e=>e!=="__count__");function P_t(e,t){return(n,r)=>kr({name:e,aggregate_param:r,out:n||e},I_t,t)}[...WR,"__count__"].forEach(e=>{A4[e]=P_t(e,A4[e])});function sCe(e,t,n){return A4[e](n,t)}function oCe(e,t){return e.idx-t.idx}function N_t(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=A4[i]())})};return e.forEach(n),Object.values(t).sort(oCe)}function D_t(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function O_t(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function M_t(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function L_t(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function aCe(e,t){const n=t||fc,r=N_t(e),i=e.slice().sort(oCe);function s(o){this._ops=r,this._out=i,this.cell=o,this.init()}return s.prototype.init=D_t,s.prototype.add=O_t,s.prototype.rem=M_t,s.prototype.set=L_t,s.prototype.get=n,s.fields=e.map(o=>o.out),s}function IX(e){this._key=e?Zh(e):Ln,this.reset()}const kl=IX.prototype;kl.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};kl.add=function(e){this._add.push(e)};kl.rem=function(e){this._rem.push(e)};kl.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,s=Array(r-i),o={};let a,u,l;for(a=0;a<i;++a)o[n(t[a])]=1;for(a=0,u=0;a<r;++a)o[n(l=e[a])]?o[n(l)]=0:s[u++]=l;return this._rem=[],this._add=s};kl.distinct=function(e){const t=this.values(),n={};let r=t.length,i=0,s;for(;--r>=0;)s=e(t[r])+"",gn(n,s)||(n[s]=1,++i);return i};kl.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=KSe(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};kl.argmin=function(e){return this.extent(e)[0]||{}};kl.argmax=function(e){return this.extent(e)[1]||{}};kl.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};kl.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};kl.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=pX(this.values(),e),this._get=e),this._q};kl.q1=function(e){return this.quartile(e)[0]};kl.q2=function(e){return this.quartile(e)[1]};kl.q3=function(e){return this.quartile(e)[2]};kl.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=GTe(this.values(),1e3,.05,e),this._get=e),this._ci};kl.ci0=function(e){return this.ci(e)[0]};kl.ci1=function(e){return this.ci(e)[1]};function _b(e){pt.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}_b.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:WR},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};en(_b,pt,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,s=>n.add(s))):(n.value=n.value||n.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function s(a){let u,l,c,f;for(u in a)for(c=a[u].tuple,l=0;l<i;++l)r[l][f=c[n[l]]]=f}s(e._prev),s(t);function o(a,u,l){const c=n[l],f=r[l++];for(const d in f){const h=a?a+"|"+d:d;u[c]=f[d],l<i?o(h,u,l):t[h]||e.cell(h,u)}}o("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(y){const x=ln(sc(y)),w=x.length;let T=0,A;for(;T<w;++T)r[A=x[T]]||(r[A]=1,t.push(A))}this._dims=ln(e.groupby),this._dnames=this._dims.map(y=>{const x=Wo(y);return i(y),n.push(x),x}),this.cellkey=e.key?e.key:yV(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const s=e.fields||[null],o=e.ops||["count"],a=e.aggregate_params||[null],u=e.as||[],l=s.length,c={};let f,d,h,p,m,g,b;for(l!==o.length&&vt("Unmatched number of fields and aggregate ops."),b=0;b<l;++b){if(f=s[b],d=o[b],h=a[b]||null,f==null&&d!=="count"&&vt("Null aggregate field specified."),m=Wo(f),g=iCe(d,m,u[b]),n.push(g),d==="count"){this._counts.push(g);continue}p=c[m],p||(i(f),p=c[m]=[],p.field=f,this._measures.push(p)),d!=="count"&&(this._countOnly=!1),p.push(sCe(d,h,g))}return this._measures=this._measures.map(y=>aCe(y,y.field)),Object.create(null)},cellkey:yV(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let s=0;s<i;++s)n.agg[s]=new r[s](n)}return n.store&&(n.data=new IX),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,s={};for(let o=0;o<i;++o)s[n[o]]=r[o](e);return t?BTe(t.tuple,s):Vi(s)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,s=r.length;i<s;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,s=e.add,o=e.rem,a=e.mod;let u,l,c,f;if(r)for(l in r)u=r[l],(!i||u.num)&&o.push(u.tuple);for(c=0,f=this._alen;c<f;++c)s.push(this.celltuple(t[c])),t[c]=null;for(c=0,f=this._mlen;c<f;++c)u=n[c],(u.num===0&&i?o:a).push(this.celltuple(u)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});const F_t=1e-14;function PX(e){pt.call(this,null,e)}PX.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};en(PX,pt,{transform(e,t){const n=e.interval!==!1,r=this._bins(e),i=r.start,s=r.step,o=e.as||["bin0","bin1"],a=o[0],u=o[1];let l;return e.modified()?(t=t.reflow(!0),l=t.SOURCE):l=t.modified(sc(e.field))?t.ADD_MOD:t.ADD,t.visit(l,n?c=>{const f=r(c);c[a]=f,c[u]=f==null?null:i+s*(1+(f-i)/s)}:c=>c[a]=r(c)),t.modifies(n?o:a)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=WTe(e),r=n.step;let i=n.start,s=i+Math.ceil((n.stop-i)/r)*r,o,a;(o=e.anchor)!=null&&(a=o-(i+r*Math.floor((o-i)/r)),i+=a,s+=a);const u=function(l){let c=rc(t(l));return c==null?null:c<i?-1/0:c>s?1/0:(c=Math.max(i,Math.min(c,s-r)),i+r*Math.floor(F_t+(c-i)/r))};return u.start=i,u.stop=n.stop,u.step=r,this.value=cd(u,sc(t),e.name||"bin_"+Wo(t))}});function uCe(e,t,n){const r=e;let i=t||[],s=n||[],o={},a=0;return{add:u=>s.push(u),remove:u=>o[r(u)]=++a,size:()=>i.length,data:(u,l)=>(a&&(i=i.filter(c=>!o[r(c)]),o={},a=0),l&&u&&i.sort(u),s.length&&(i=u?tTe(u,i,s.sort(u)):i.concat(s),s=[]),i)}}function NX(e){pt.call(this,[],e)}NX.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};en(NX,pt,{transform(e,t){const n=t.fork(t.ALL),r=uCe(Ln,this.value,n.materialize(n.ADD).add),i=e.sort,s=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(s),this.value=n.source=r.data(Ww(i),s),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function lCe(e){Ts.call(this,null,$_t,e)}en(lCe,Ts);function $_t(e){return this.value&&!e.modified()?this.value:QK(e.fields,e.orders)}function DX(e){pt.call(this,null,e)}DX.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function B_t(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}en(DX,pt,{transform(e,t){const n=f=>d=>{for(var h=B_t(a(d),e.case,s)||[],p,m=0,g=h.length;m<g;++m)o.test(p=h[m])||f(p)},r=this._parameterCheck(e,t),i=this._counts,s=this._match,o=this._stop,a=e.field,u=e.as||["text","count"],l=n(f=>i[f]=1+(i[f]||0)),c=n(f=>i[f]-=1);return r?t.visit(t.SOURCE,l):(t.visit(t.ADD,l),t.visit(t.REM,c)),this._finish(t,u)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],s=t[1],o=e.fork(e.NO_SOURCE|e.NO_FIELDS);let a,u,l;for(a in n)u=r[a],l=n[a]||0,!u&&l?(r[a]=u=Vi({}),u[i]=a,u[s]=l,o.add.push(u)):l===0?(u&&o.rem.push(u),n[a]=null,r[a]=null):u[s]!==l&&(u[s]=l,o.mod.push(u));return o.modifies(t)}});function OX(e){pt.call(this,null,e)}OX.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};en(OX,pt,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],s=r[1],o=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let a=this.value;return o?(a&&(n.rem=a),a=t.materialize(t.SOURCE).source,n.add=this.value=j_t(a,i,s,e.filter||ep)):n.mod=a,n.source=this.value,n.modifies(r)}});function j_t(e,t,n,r){for(var i=[],s={},o=e.length,a=0,u,l;a<o;++a)for(s[t]=l=e[a],u=0;u<o;++u)s[n]=e[u],r(s)&&(i.push(Vi(s)),s={},s[t]=l);return i}const Cce={kde:vX,mixture:QTe,normal:yX,lognormal:XTe,uniform:JTe},U_t="distributions",Ace="function",z_t="field";function cCe(e,t){const n=e[Ace];gn(Cce,n)||vt("Unknown distribution function: "+n);const r=Cce[n]();for(const i in e)i===z_t?r.data((e.from||t()).map(e[i])):i===U_t?r[i](e[i].map(s=>cCe(s,t))):typeof r[i]===Ace&&r[i](e[i]);return r}function MX(e){pt.call(this,null,e)}const fCe=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],V_t={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:fCe},{name:"weights",type:"number",array:!0}]};MX.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:fCe.concat(V_t)},{name:"as",type:"string",array:!0,default:["value","density"]}]};en(MX,pt,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=cCe(e.distribution,H_t(t)),i=e.steps||e.minsteps||25,s=e.steps||e.maxsteps||200;let o=e.method||"pdf";o!=="pdf"&&o!=="cdf"&&vt("Invalid density method: "+o),!e.extent&&!r.data&&vt("Missing density extent parameter."),o=r[o];const a=e.as||["value","density"],u=e.extent||fg(r.data()),l=BM(o,u,i,s).map(c=>{const f={};return f[a[0]]=c[0],f[a[1]]=c[1],Vi(f)});this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function H_t(e){return()=>e.materialize(e.SOURCE).source}function dCe(e,t){return e?e.map((n,r)=>t[r]||Wo(n)):null}function LX(e,t,n){const r=[],i=f=>f(u);let s,o,a,u,l,c;if(t==null)r.push(e.map(n));else for(s={},o=0,a=e.length;o<a;++o)u=e[o],l=t.map(i),c=s[l],c||(s[l]=c=[],c.dims=l,r.push(c)),c.push(n(u));return r}const hCe="bin";function FX(e){pt.call(this,null,e)}FX.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:hCe}]};const q_t=(e,t)=>VR(fg(e,t))/30;en(FX,pt,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,r=LX(t.source,e.groupby,fc),i=e.smooth||!1,s=e.field,o=e.step||q_t(n,s),a=Ww((p,m)=>s(p)-s(m)),u=e.as||hCe,l=r.length;let c=1/0,f=-1/0,d=0,h;for(;d<l;++d){const p=r[d].sort(a);h=-1;for(const m of YTe(p,o,i,s))m<c&&(c=m),m>f&&(f=m),p[++h][u]=m}return this.value={start:c,stop:f,step:o},t.reflow(!0).modifies(u)}});function pCe(e){Ts.call(this,null,W_t,e),this.modified(!0)}en(pCe,Ts);function W_t(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:cd(n=>t(n,e),sc(t),Wo(t))}function $X(e){pt.call(this,[void 0,void 0],e)}$X.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};en($X,pt,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let s=n[0],o=n[1];if((i||s==null)&&(s=1/0,o=-1/0),t.visit(i?t.SOURCE:t.ADD,a=>{const u=rc(r(a));u!=null&&(u<s&&(s=u),u>o&&(o=u))}),!Number.isFinite(s)||!Number.isFinite(o)){let a=Wo(r);a&&(a=` for field "${a}"`),t.dataflow.warn(`Infinite extent${a}: [${s}, ${o}]`),s=o=void 0}this.value=[s,o]}});function BX(e,t){Ts.call(this,e),this.parent=t,this.count=0}en(BX,Ts,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function jM(e){pt.call(this,{},e),this._keys=QT();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}en(jM,pt,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let s=gn(i,e)&&i[e],o,a;return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(a=r||(a=this._group[e])&&a.tuple,o=n.dataflow,s=new BX(n.fork(n.NO_SOURCE),this),o.add(s).connect(t(o,e,a)),i[e]=s,this.activate(s)),s},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,s=this._keys,o=e.modified("key"),a=u=>this.subflow(u,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,u=>{const l=Ln(u),c=s.get(l);c!==void 0&&(s.delete(l),a(c).rem(u))}),t.visit(t.ADD,u=>{const l=r(u);s.set(Ln(u),l),a(l).add(u)}),o||t.modified(r.fields)?t.visit(t.MOD,u=>{const l=Ln(u),c=s.get(l),f=r(u);c===f?a(f).mod(u):(s.set(l,f),a(c).rem(u),a(f).add(u))}):t.changed(t.MOD)&&t.visit(t.MOD,u=>{a(s.get(Ln(u))).mod(u)}),o&&t.visit(t.REFLOW,u=>{const l=Ln(u),c=s.get(l),f=r(u);c!==f&&(s.set(l,f),a(c).rem(u),a(f).add(u))}),t.clean()?n.runAfter(()=>{this.clean(),s.clean()}):s.empty>n.cleanThreshold&&n.runAfter(s.clean),t}});function mCe(e){Ts.call(this,null,G_t,e)}en(mCe,Ts);function G_t(e){return this.value&&!e.modified()?this.value:xt(e.name)?ln(e.name).map(t=>Zh(t)):Zh(e.name,e.as)}function jX(e){pt.call(this,QT(),e)}jX.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};en(jX,pt,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),s=i.add,o=i.rem,a=i.mod,u=e.expr;let l=!0;t.visit(t.REM,f=>{const d=Ln(f);r.has(d)?r.delete(d):o.push(f)}),t.visit(t.ADD,f=>{u(f,e)?s.push(f):r.set(Ln(f),1)});function c(f){const d=Ln(f),h=u(f,e),p=r.get(d);h&&p?(r.delete(d),s.push(f)):!h&&!p?(r.set(d,1),o.push(f)):l&&h&&!p&&a.push(f)}return t.visit(t.MOD,c),e.modified()&&(l=!1,t.visit(t.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function UX(e){pt.call(this,[],e)}UX.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};en(UX,pt,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=dCe(r,e.as||[]),s=e.index||null,o=i.length;return n.rem=this.value,t.visit(t.SOURCE,a=>{const u=r.map(p=>p(a)),l=u.reduce((p,m)=>Math.max(p,m.length),0);let c=0,f,d,h;for(;c<l;++c){for(d=cX(a),f=0;f<o;++f)d[i[f]]=(h=u[f][c])==null?null:h;s&&(d[s]=c),n.add.push(d)}}),this.value=n.source=n.add,s&&n.modifies(s),n.modifies(i)}});function zX(e){pt.call(this,[],e)}zX.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};en(zX,pt,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(Wo),s=e.as||["key","value"],o=s[0],a=s[1],u=r.length;return n.rem=this.value,t.visit(t.SOURCE,l=>{for(let c=0,f;c<u;++c)f=cX(l),f[o]=i[c],f[a]=r[c](l),n.add.push(f)}),this.value=n.source=n.add,n.modifies(s)}});function VX(e){pt.call(this,null,e)}VX.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};en(VX,pt,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),s=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(s,o=>o[r]=n(o,e))}});function gCe(e){pt.call(this,[],e)}en(gCe,pt,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i=this.value,s=e.size-i.length,o,a,u;if(s>0){for(o=[];--s>=0;)o.push(u=Vi(r(e))),i.push(u);n.add=n.add.length?n.materialize(n.ADD).add.concat(o):o}else a=i.slice(0,-s),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,i=i.slice(-s);return n.source=this.value=i,n}});const n5={value:"value",median:Rwe,mean:Elt,min:vz,max:N_},Y_t=[];function HX(e){pt.call(this,[],e)}HX.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function K_t(e){var t=e.method||n5.value,n;if(n5[t]==null)vt("Unrecognized imputation method: "+t);else return t===n5.value?(n=e.value!==void 0?e.value:0,()=>n):n5[t]}function X_t(e){const t=e.field;return n=>n?t(n):NaN}en(HX,pt,{transform(e,t){var n=t.fork(t.ALL),r=K_t(e),i=X_t(e),s=Wo(e.field),o=Wo(e.key),a=(e.groupby||[]).map(Wo),u=Q_t(t.source,e.groupby,e.key,e.keyvals),l=[],c=this.value,f=u.domain.length,d,h,p,m,g,b,y,x,w,T;for(g=0,x=u.length;g<x;++g)for(d=u[g],p=d.values,h=NaN,y=0;y<f;++y)if(d[y]==null){for(m=u.domain[y],T={_impute:!0},b=0,w=p.length;b<w;++b)T[a[b]]=p[b];T[o]=m,T[s]=Number.isNaN(h)?h=r(d,i):h,l.push(Vi(T))}return l.length&&(n.add=n.materialize(n.ADD).add.concat(l)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=l,n}});function Q_t(e,t,n,r){var i=b=>b(g),s=[],o=r?r.slice():[],a={},u={},l,c,f,d,h,p,m,g;for(o.forEach((b,y)=>a[b]=y+1),d=0,m=e.length;d<m;++d)g=e[d],p=n(g),h=a[p]||(a[p]=o.push(p)),c=(l=t?t.map(i):Y_t)+"",(f=u[c])||(f=u[c]=[],s.push(f),f.values=l),f[h-1]=g;return s.domain=o,s}function qX(e){_b.call(this,e)}qX.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:WR},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};en(qX,_b,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,s=>n.add(s))):(i=n.value=n.value||this.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),n.changes(),t.visit(t.SOURCE,s=>{kr(s,i[n.cellkey(s)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function WX(e){pt.call(this,null,e)}WX.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};en(WX,pt,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=LX(r,e.groupby,e.field),s=(e.groupby||[]).map(Wo),o=e.bandwidth,a=e.cumulative?"cdf":"pdf",u=e.as||["value","density"],l=[];let c=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;a!=="pdf"&&a!=="cdf"&&vt("Invalid density method: "+a),e.resolve==="shared"&&(c||(c=fg(r,e.field)),f=d=e.steps||d),i.forEach(h=>{const p=vX(h,o)[a],m=e.counts?h.length:1,g=c||fg(h);BM(p,g,f,d).forEach(b=>{const y={};for(let x=0;x<s.length;++x)y[s[x]]=h.dims[x];y[u[0]]=b[0],y[u[1]]=b[1]*m,l.push(Vi(y))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function yCe(e){Ts.call(this,null,J_t,e)}en(yCe,Ts);function J_t(e){return this.value&&!e.modified()?this.value:ZK(e.fields,e.flat)}function vCe(e){pt.call(this,[],e),this._pending=null}en(vCe,pt,{transform(e,t){const n=t.dataflow;return this._pending?vB(this,t,this._pending):Z_t(e)?t.StopPropagation:e.values?vB(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=ln(i.data),s=>s.touch(this)))}:n.request(e.url,e.format).then(r=>vB(this,t,ln(r.data)))}});function Z_t(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function vB(e,t,n){n.forEach(Vi);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function GX(e){pt.call(this,{},e)}GX.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};en(GX,pt,{transform(e,t){const n=e.fields,r=e.index,i=e.values,s=e.default==null?null:e.default,o=e.modified(),a=n.length;let u=o?t.SOURCE:t.ADD,l=t,c=e.as,f,d,h;return i?(d=i.length,a>1&&!c&&vt('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==a*d&&vt('The "as" parameter has too few output field names.'),c=c||i.map(Wo),f=function(p){for(var m=0,g=0,b,y;m<a;++m)if(y=r.get(n[m](p)),y==null)for(b=0;b<d;++b,++g)p[c[g]]=s;else for(b=0;b<d;++b,++g)p[c[g]]=i[b](y)}):(c||vt("Missing output field names."),f=function(p){for(var m=0,g;m<a;++m)g=r.get(n[m](p)),p[c[m]]=g??s}),o?l=t.reflow(!0):(h=n.some(p=>t.modified(p.fields)),u|=h?t.MOD:0),t.visit(u,f),l.modifies(c)}});function bCe(e){Ts.call(this,null,ewt,e)}en(bCe,Ts);function ewt(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r=1/0,i=-1/0,s,o;for(s=0;s<n;++s)o=t[s],o[0]<r&&(r=o[0]),o[1]>i&&(i=o[1]);return[r,i]}function xCe(e){Ts.call(this,null,twt,e)}en(xCe,Ts);function twt(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function _Ce(e){pt.call(this,null,e)}en(_Ce,pt,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function YX(e){_b.call(this,e)}YX.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:WR,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};en(YX,_b,{_transform:_b.prototype.transform,transform(e,t){return this._transform(nwt(e,t),t)}});function nwt(e,t){const n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",s=sc(n).concat(sc(r)),o=iwt(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:o.map(()=>i),fields:o.map(a=>rwt(a,n,r,s)),as:o.map(a=>a+""),modified:e.modified.bind(e)}}function rwt(e,t,n,r){return cd(i=>t(i)===e?n(i):NaN,r,e+"")}function iwt(e,t,n){const r={},i=[];return n.visit(n.SOURCE,s=>{const o=e(s);r[o]||(r[o]=1,i.push(o))}),i.sort(AM),t?i.slice(0,t):i}function wCe(e){jM.call(this,e)}en(wCe,jM,{transform(e,t){const n=e.subflow,r=e.field,i=s=>this.subflow(Ln(s),n,t,s);return(e.modified("field")||r&&t.modified(sc(r)))&&vt("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,s=>{const o=i(s);r(s).forEach(a=>o.mod(a))}),t.visit(t.ADD,s=>{const o=i(s);r(s).forEach(a=>o.add(Vi(a)))}),t.visit(t.REM,s=>{const o=i(s);r(s).forEach(a=>o.rem(a))})):(t.visit(t.MOD,s=>i(s).mod(s)),t.visit(t.ADD,s=>i(s).add(s)),t.visit(t.REM,s=>i(s).rem(s))),t.clean()&&t.runAfter(()=>this.clean()),t}});function KX(e){pt.call(this,null,e)}KX.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};en(KX,pt,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=dCe(e.fields,e.as||[]),s=r?(a,u)=>swt(a,u,r,i):NM;let o;return this.value?o=this.value:(t=t.addAll(),o=this.value={}),t.visit(t.REM,a=>{const u=Ln(a);n.rem.push(o[u]),o[u]=null}),t.visit(t.ADD,a=>{const u=s(a,Vi({}));o[Ln(a)]=u,n.add.push(u)}),t.visit(t.MOD,a=>{n.mod.push(s(a,o[Ln(a)]))}),n}});function swt(e,t,n,r){for(let i=0,s=n.length;i<s;++i)t[r[i]]=n[i](e);return t}function ECe(e){pt.call(this,null,e)}en(ECe,pt,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function XX(e){pt.call(this,null,e)}XX.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const owt=1e-14;en(XX,pt,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=t.materialize(t.SOURCE).source,s=LX(i,e.groupby,e.field),o=(e.groupby||[]).map(Wo),a=[],u=e.step||.01,l=e.probs||Gd(u/2,1-owt,u),c=l.length;return s.forEach(f=>{const d=hX(f,l);for(let h=0;h<c;++h){const p={};for(let m=0;m<o.length;++m)p[o[m]]=f.dims[m];p[r[0]]=l[h],p[r[1]]=d[h],a.push(Vi(p))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}});function SCe(e){pt.call(this,null,e)}en(SCe,pt,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const s=Ln(i);n.rem.push(r[s]),r[s]=null}),t.visit(t.ADD,i=>{const s=cX(i);r[Ln(i)]=s,n.add.push(s)}),t.visit(t.MOD,i=>{const s=r[Ln(i)];for(const o in i)s[o]=i[o],n.modifies(o);n.mod.push(s)})),n}});function QX(e){pt.call(this,[],e),this.count=0}QX.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};en(QX,pt,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,s=this.value.reduce((c,f)=>(c[Ln(f)]=1,c),{});let o=this.value,a=this.count,u=0;function l(c){let f,d;o.length<i?o.push(c):(d=~~((a+1)*np()),d<o.length&&d>=u&&(f=o[d],s[Ln(f)]&&n.rem.push(f),o[d]=c)),++a}if(t.rem.length&&(t.visit(t.REM,c=>{const f=Ln(c);s[f]&&(s[f]=-1,n.rem.push(c)),--a}),o=o.filter(c=>s[Ln(c)]!==-1)),(t.rem.length||r)&&o.length<i&&t.source&&(u=a=o.length,t.visit(t.SOURCE,c=>{s[Ln(c)]||l(c)}),u=-1),r&&o.length>i){const c=o.length-i;for(let f=0;f<c;++f)s[Ln(o[f])]=-1,n.rem.push(o[f]);o=o.slice(c)}return t.mod.length&&t.visit(t.MOD,c=>{s[Ln(c)]&&n.mod.push(c)}),t.add.length&&t.visit(t.ADD,l),(t.add.length||u<0)&&(n.add=o.filter(c=>!s[Ln(c)])),this.count=a,this.value=n.source=o,n}});function JX(e){pt.call(this,null,e)}JX.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};en(JX,pt,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=Gd(e.start,e.stop,e.step||1).map(i=>{const s={};return s[r]=i,Vi(s)}),n.add=t.add.concat(this.value),n}});function TCe(e){pt.call(this,null,e),this.modified(!0)}en(TCe,pt,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function ZX(e){pt.call(this,null,e)}const CCe=["unit0","unit1"];ZX.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:rX,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:CCe}]};en(ZX,pt,{transform(e,t){const n=e.field,r=e.interval!==!1,i=e.timezone==="utc",s=this._floor(e,t),o=(i?ZT:JT)(s.unit).offset,a=e.as||CCe,u=a[0],l=a[1],c=s.step;let f=s.start||1/0,d=s.stop||-1/0,h=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(sc(n)))&&(t=t.reflow(!0),h=t.SOURCE,f=1/0,d=-1/0),t.visit(h,p=>{const m=n(p);let g,b;m==null?(p[u]=null,r&&(p[l]=null)):(p[u]=g=b=s(m),r&&(p[l]=b=o(g,c)),g<f&&(f=g),b>d&&(d=b))}),s.start=f,s.stop=d,t.modifies(r?a:u)},_floor(e,t){const n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:ETe({extent:e.extent||fg(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),s=iX(r),o=this.value||{},a=(n?pTe:hTe)(s,i);return a.unit=pi(s),a.units=s,a.step=i,a.start=o.start,a.stop=o.stop,this.value=a}});function ACe(e){pt.call(this,QT(),e)}en(ACe,pt,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,s=a=>i.set(r(a),a);let o=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,s)):t.changed()?(t.visit(t.REM,a=>i.delete(r(a))),t.visit(t.ADD,s)):o=!1,this.modified(o),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function kCe(e){pt.call(this,null,e)}en(kCe,pt,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(Ww(e.sort)):t.source).map(e.field))}});function awt(e,t,n,r){const i=k4[e](t,n);return{init:i.init||Mv,update:function(s,o){o[r]=i.next(s)}}}const k4={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=k4.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||vt("ntile num must be greater than zero.");const n=k4.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||vt("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=uwt(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function uwt(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}const lwt=Object.keys(k4);function RCe(e){const t=ln(e.ops),n=ln(e.fields),r=ln(e.params),i=ln(e.aggregate_params),s=ln(e.as),o=this.outputs=[],a=this.windows=[],u={},l={},c=[],f=[];let d=!0;function h(p){ln(sc(p)).forEach(m=>u[m]=1)}h(e.sort),t.forEach((p,m)=>{const g=n[m],b=r[m],y=i[m]||null,x=Wo(g),w=iCe(p,x,s[m]);if(h(g),o.push(w),gn(k4,p))a.push(awt(p,g,b,w));else{if(g==null&&p!=="count"&&vt("Null aggregate field specified."),p==="count"){c.push(w);return}d=!1;let T=l[x];T||(T=l[x]=[],T.field=g,f.push(T)),T.push(sCe(p,y,w))}}),(c.length||f.length)&&(this.cell=cwt(f,c,d)),this.inputs=Object.keys(u)}const ICe=RCe.prototype;ICe.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};ICe.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,s=r&&r.length;let o;if(n){for(o=e.p0;o<e.i0;++o)n.rem(i[o]);for(o=e.p1;o<e.i1;++o)n.add(i[o]);n.set(t)}for(o=0;o<s;++o)r[o].update(e,t)};function cwt(e,t,n){e=e.map(u=>aCe(u,u.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,s=r.agg=Array(i),o=0;o<i;++o)s[o]=new e[o](r);if(r.store)var a=r.data=new IX;return r.add=function(u){if(r.num+=1,!n){a&&a.add(u);for(let l=0;l<i;++l)s[l].add(s[l].get(u),u)}},r.rem=function(u){if(r.num-=1,!n){a&&a.rem(u);for(let l=0;l<i;++l)s[l].rem(s[l].get(u),u)}},r.set=function(u){let l,c;for(a&&a.values(),l=0,c=t.length;l<c;++l)u[t[l]]=r.num;if(!n)for(l=0,c=s.length;l<c;++l)s[l].set(u)},r.init=function(){r.num=0,a&&a.reset();for(let u=0;u<i;++u)s[u].init()},r}function eQ(e){pt.call(this,{},e),this._mlen=0,this._mods=[]}eQ.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:lwt.concat(WR)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};en(eQ,pt,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=Ww(e.sort),i=yV(e.groupby),s=a=>this.group(i(a));let o=this.state;(!o||n)&&(o=this.state=new RCe(e)),n||t.modified(o.inputs)?(this.value={},t.visit(t.SOURCE,a=>s(a).add(a))):(t.visit(t.REM,a=>s(a).remove(a)),t.visit(t.ADD,a=>s(a).add(a)));for(let a=0,u=this._mlen;a<u;++a)fwt(this._mods[a],o,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(o.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=uCe(Ln),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function fwt(e,t,n,r){const i=r.sort,s=i&&!r.ignorePeers,o=r.frame||[null,0],a=e.data(n),u=a.length,l=s?zT(i):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:i||dc(-1)};t.init();for(let f=0;f<u;++f)dwt(c,o,f,u),s&&hwt(c,l),t.update(c,a[f])}function dwt(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function hwt(e,t){const n=e.i0,r=e.i1-1,i=e.compare,s=e.data,o=s.length-1;n>0&&!i(s[n],s[n-1])&&(e.i0=t.left(s,s[n])),r<o&&!i(s[r],s[r+1])&&(e.i1=t.right(s,s[r]))}const pwt=Object.freeze(Object.defineProperty({__proto__:null,aggregate:_b,bin:PX,collect:NX,compare:lCe,countpattern:DX,cross:OX,density:MX,dotbin:FX,expression:pCe,extent:$X,facet:jM,field:mCe,filter:jX,flatten:UX,fold:zX,formula:VX,generate:gCe,impute:HX,joinaggregate:qX,kde:WX,key:yCe,load:vCe,lookup:GX,multiextent:bCe,multivalues:xCe,params:_Ce,pivot:YX,prefacet:wCe,project:KX,proxy:ECe,quantile:XX,relay:SCe,sample:QX,sequence:JX,sieve:TCe,subflow:BX,timeunit:ZX,tupleindex:ACe,values:kCe,window:eQ},Symbol.toStringTag,{value:"Module"}));function nb(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const mwt=()=>typeof Image<"u"?Image:null;function tQ(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const gwt="identity",LS="linear",_1="log",GR="pow",YR="sqrt",UM="symlog",nw="time",rw="utc",Wm="sequential",tC="diverging",FS="quantile",zM="quantize",VM="threshold",nQ="ordinal",vV="point",PCe="band",rQ="bin-ordinal",bu="continuous",KR="discrete",XR="discretizing",hp="interpolating",iQ="temporal";function ywt(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function vwt(e){return function(t){const n=e.range();let r=t[0],i=t[1],s=-1,o,a,u,l;for(i<r&&(a=r,r=i,i=a),u=0,l=n.length;u<l;++u)n[u]>=r&&n[u]<=i&&(s<0&&(s=u),o=u);if(!(s<0))return r=e.invertExtent(n[s]),i=e.invertExtent(n[o]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function sQ(){const e=bK().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,s,o=!1,a=0,u=0,l=.5;delete e.unknown;function c(){const f=t().length,d=r[1]<r[0],h=r[1-d],p=tQ(f,a,u);let m=r[d-0];i=(h-m)/(p||1),o&&(i=Math.floor(i)),m+=(h-m-i*(f-a))*l,s=i*(1-a),o&&(m=Math.round(m),s=Math.round(s));const g=Gd(f).map(b=>m+i*b);return n(d?g.reverse():g)}return e.domain=function(f){return arguments.length?(t(f),c()):t()},e.range=function(f){return arguments.length?(r=[+f[0],+f[1]],c()):r.slice()},e.rangeRound=function(f){return r=[+f[0],+f[1]],o=!0,c()},e.bandwidth=function(){return s},e.step=function(){return i},e.round=function(f){return arguments.length?(o=!!f,c()):o},e.padding=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),a=u,c()):a},e.paddingInner=function(f){return arguments.length?(a=Math.max(0,Math.min(1,f)),c()):a},e.paddingOuter=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),c()):u},e.align=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),c()):l},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;const d=r[1]<r[0],h=d?n().reverse():n(),p=h.length-1;let m=+f[0],g=+f[1],b,y,x;if(!(m!==m||g!==g)&&(g<m&&(x=m,m=g,g=x),!(g<h[0]||m>r[1-d])))return b=Math.max(0,yb(h,m)-1),y=m===g?b:yb(h,g)-1,m-h[b]>s+1e-10&&++b,d&&(x=b,b=p-y,y=p-x),b>y?void 0:t().slice(b,y+1)},e.invert=function(f){const d=e.invertRange([f,f]);return d&&d[0]},e.copy=function(){return sQ().domain(t()).range(r).round(o).paddingInner(a).paddingOuter(u).align(l)},c()}function NCe(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return NCe(t())},e}function bwt(){return NCe(sQ().paddingInner(1))}var xwt=Array.prototype.map;function _wt(e){return xwt.call(e,rc)}const wwt=Array.prototype.slice;function DCe(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(yb(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=_wt(r),n):e.slice()},n.range=function(r){return arguments.length?(t=wwt.call(r),n):t.slice()},n.tickFormat=function(r,i){return AEe(e[0],pi(e),r??10,i)},n.copy=function(){return DCe().domain(n.domain()).range(n.range())},n}const PD=new Map,OCe=Symbol("vega_scale");function MCe(e){return e[OCe]=!0,e}function Ewt(e){return e&&e[OCe]===!0}function Swt(e,t,n){const r=function(){const s=t();return s.invertRange||(s.invertRange=s.invert?ywt(s):s.invertExtent?vwt(s):void 0),s.type=e,MCe(s)};return r.metadata=A0(ln(n)),r}function Ii(e,t,n){return arguments.length>1?(PD.set(e,Swt(e,t,n)),this):LCe(e)?PD.get(e):void 0}Ii(gwt,kEe);Ii(LS,fM,bu);Ii(_1,IEe,[bu,_1]);Ii(GR,EK,bu);Ii(YR,$mt,bu);Ii(UM,PEe,bu);Ii(nw,Zgt,[bu,iQ]);Ii(rw,eyt,[bu,iQ]);Ii(Wm,kK,[bu,hp]);Ii(`${Wm}-${LS}`,kK,[bu,hp]);Ii(`${Wm}-${_1}`,HEe,[bu,hp,_1]);Ii(`${Wm}-${GR}`,RK,[bu,hp]);Ii(`${Wm}-${YR}`,tyt,[bu,hp]);Ii(`${Wm}-${UM}`,qEe,[bu,hp]);Ii(`${tC}-${LS}`,WEe,[bu,hp]);Ii(`${tC}-${_1}`,GEe,[bu,hp,_1]);Ii(`${tC}-${GR}`,IK,[bu,hp]);Ii(`${tC}-${YR}`,nyt,[bu,hp]);Ii(`${tC}-${UM}`,YEe,[bu,hp]);Ii(FS,NEe,[XR,FS]);Ii(zM,DEe,XR);Ii(VM,OEe,XR);Ii(rQ,DCe,[KR,XR]);Ii(nQ,bK,KR);Ii(PCe,sQ,KR);Ii(vV,bwt,KR);function LCe(e){return PD.has(e)}function Yw(e,t){const n=PD.get(e);return n&&n.metadata[t]}function oQ(e){return Yw(e,bu)}function $S(e){return Yw(e,KR)}function bV(e){return Yw(e,XR)}function FCe(e){return Yw(e,_1)}function Twt(e){return Yw(e,iQ)}function $Ce(e){return Yw(e,hp)}function BCe(e){return Yw(e,FS)}const Cwt=["clamp","base","constant","exponent"];function jCe(e,t){const n=t[0],r=pi(t)-n;return function(i){return e(n+i*r)}}function HM(e,t,n){return tK(aQ(t||"rgb",n),e)}function UCe(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function zCe(e,t,n){const r=n-t;let i,s,o;return!r||!Number.isFinite(r)?dc(.5):(i=(s=e.type).indexOf("-"),s=i<0?s:s.slice(i+1),o=Ii(s)().domain([t,n]).range([0,1]),Cwt.forEach(a=>e[a]?o[a](e[a]()):0),o)}function aQ(e,t){const n=Gft[Awt(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function Awt(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const kwt={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},Rwt={accent:iyt,category10:ryt,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:syt,observable10:oyt,paired:ayt,pastel1:uyt,pastel2:lyt,set1:cyt,set2:fyt,set3:dyt,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function VCe(e){if(xt(e))return e;const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function HCe(e,t){for(const n in e)uQ(n,t(e[n]))}const kce={};HCe(Rwt,VCe);HCe(kwt,e=>HM(VCe(e)));function uQ(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(kce[e]=t,this):kce[e]}const k8="symbol",Iwt="discrete",Pwt="gradient",Nwt=e=>xt(e)?e.map(t=>String(t)):String(e),Dwt=(e,t)=>e[1]-t[1],Owt=(e,t)=>t[1]-e[1];function lQ(e,t,n){let r;return Ri(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(VR(e.domain())/n||1)+1))),un(t)&&(r=t.step,t=t.interval),cn(t)&&(t=e.type===nw?JT(t):e.type==rw?ZT(t):vt("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function qCe(e,t,n){let r=e.range(),i=r[0],s=pi(r),o=Dwt;if(i>s&&(r=s,s=i,i=r,o=Owt),i=Math.floor(i),s=Math.ceil(s),t=t.map(a=>[a,e(a)]).filter(a=>i<=a[1]&&a[1]<=s).sort(o).map(a=>a[0]),n>0&&t.length>1){const a=[t[0],pi(t)];for(;t.length>n&&t.length>=3;)t=t.filter((u,l)=>!(l%2));t.length<3&&(t=a)}return t}function cQ(e,t){return e.bins?qCe(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function WCe(e,t,n,r,i,s){const o=t.type;let a=Nwt;if(o===nw||i===nw)a=e.timeFormat(r);else if(o===rw||i===rw)a=e.utcFormat(r);else if(FCe(o)){const u=e.formatFloat(r);if(s||t.bins)a=u;else{const l=GCe(t,n,!1);a=c=>l(c)?u(c):""}}else if(t.tickFormat){const u=t.domain();a=e.formatSpan(u[0],u[u.length-1],n,r)}else r&&(a=e.format(r));return a}function GCe(e,t,n){const r=cQ(e,t),i=e.base(),s=Math.log(i),o=Math.max(1,i*t/r.length),a=u=>{let l=u/Math.pow(i,Math.round(Math.log(u)/s));return l*i<i-.5&&(l*=i),l<=o};return n?r.filter(a):a}const xV={[FS]:"quantiles",[zM]:"thresholds",[VM]:"domain"},YCe={[FS]:"quantiles",[zM]:"domain"};function KCe(e,t){return e.bins?Fwt(e.bins):e.type===_1?GCe(e,t,!0):xV[e.type]?Lwt(e[xV[e.type]]()):cQ(e,t)}function Mwt(e,t,n){const r=t[YCe[t.type]](),i=r.length;let s=i>1?r[1]-r[0]:r[0],o;for(o=1;o<i;++o)s=Math.min(s,r[o]-r[o-1]);return e.formatSpan(0,s,3*10,n)}function Lwt(e){const t=[-1/0].concat(e);return t.max=1/0,t}function Fwt(e){const t=e.slice(0,-1);return t.max=pi(e),t}const $wt=e=>xV[e.type]||e.bins;function XCe(e,t,n,r,i,s,o){const a=YCe[t.type]&&s!==nw&&s!==rw?Mwt(e,t,i):WCe(e,t,n,i,s,o);return r===k8&&$wt(t)?Bwt(a):r===Iwt?jwt(a):Uwt(a)}const Bwt=e=>(t,n,r)=>{const i=Rce(r[n+1],Rce(r.max,1/0)),s=Ice(t,e),o=Ice(i,e);return s&&o?s+"  "+o:o?"< "+o:" "+s},Rce=(e,t)=>e??t,jwt=e=>(t,n)=>n?e(t):null,Uwt=e=>t=>e(t),Ice=(e,t)=>Number.isFinite(e)?t(e):null;function zwt(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+pi(t),s=i-r;if(e.type===VM){const o=n?s/n:.1;r-=o,i+=o,s=i-r}return o=>(o-r)/s}function Vwt(e,t,n,r){const i=r||t.type;return cn(n)&&Twt(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===nw?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===rw?e.utcFormat("%A, %d %B %Y, %X UTC"):XCe(e,t,5,null,n,r,!0)}function QCe(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=Vwt(e,t,n.format,n.formatType);if(bV(t.type)){const s=KCe(t).slice(1).map(i),o=s.length;return`${o} boundar${o===1?"y":"ies"}: ${s.join(", ")}`}else if($S(t.type)){const s=t.domain(),o=s.length,a=o>r?s.slice(0,r-2).map(i).join(", ")+", ending with "+s.slice(-1).map(i):s.map(i).join(", ");return`${o} value${o===1?"":"s"}: ${a}`}else{const s=t.domain();return`values from ${i(s[0])} to ${i(pi(s))}`}}let JCe=0;function Hwt(){JCe=0}const ND="p_";function fQ(e){return e&&e.gradient}function ZCe(e,t,n){const r=e.gradient;let i=e.id,s=r==="radial"?ND:"";return i||(i=e.id="gradient_"+JCe++,r==="radial"?(e.x1=ym(e.x1,.5),e.y1=ym(e.y1,.5),e.r1=ym(e.r1,0),e.x2=ym(e.x2,.5),e.y2=ym(e.y2,.5),e.r2=ym(e.r2,.5),s=ND):(e.x1=ym(e.x1,0),e.y1=ym(e.y1,0),e.x2=ym(e.x2,1),e.y2=ym(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+s+i+")"}function ym(e,t){return e??t}function eAe(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,s){return n.push({offset:i,color:s}),r}}}const Pce={basis:{curve:Syt},"basis-closed":{curve:Tyt},"basis-open":{curve:Cyt},bundle:{curve:Ayt,tension:"beta",value:.85},cardinal:{curve:kyt,tension:"tension",value:0},"cardinal-open":{curve:Iyt,tension:"tension",value:0},"cardinal-closed":{curve:Ryt,tension:"tension",value:0},"catmull-rom":{curve:Pyt,tension:"alpha",value:.5},"catmull-rom-closed":{curve:Nyt,tension:"alpha",value:.5},"catmull-rom-open":{curve:Dyt,tension:"alpha",value:.5},linear:{curve:PK},"linear-closed":{curve:Oyt},monotone:{horizontal:Lyt,vertical:Myt},natural:{curve:Fyt},step:{curve:$yt},"step-after":{curve:jyt},"step-before":{curve:Byt}};function dQ(e,t,n){var r=gn(Pce,e)&&Pce[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const qwt={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},Wwt=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,Gwt=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,Ywt=/^((\s+,?\s*)|(,\s*))/,Kwt=/^[01]/;function BS(e){const t=[];return(e.match(Wwt)||[]).forEach(r=>{let i=r[0];const s=i.toLowerCase(),o=qwt[s],a=Xwt(s,o,r.slice(1).trim()),u=a.length;if(u<o||u&&u%o!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...a.slice(0,o)]),u!==o){s==="m"&&(i=i==="M"?"L":"l");for(let l=o;l<u;l+=o)t.push([i,...a.slice(l,l+o)])}}),t}function Xwt(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let s=0;s<t;++s){const o=e==="a"&&(s===3||s===4)?Kwt:Gwt,a=n.slice(i).match(o);if(a===null)throw Error("Invalid SVG path, incorrect parameter type");i+=a[0].length,r.push(+a[0]);const u=n.slice(i).match(Ywt);u!==null&&(i+=u[0].length)}return r}const wb=Math.PI/180,Qwt=1e-14,m_=Math.PI/2,Pm=Math.PI*2,eE=Math.sqrt(3)/2;var bB={},xB={},tAe=[].join;function Jwt(e,t,n,r,i,s,o,a,u){const l=tAe.call(arguments);if(bB[l])return bB[l];const c=o*wb,f=Math.sin(c),d=Math.cos(c);n=Math.abs(n),r=Math.abs(r);const h=d*(a-e)*.5+f*(u-t)*.5,p=d*(u-t)*.5-f*(a-e)*.5;let m=h*h/(n*n)+p*p/(r*r);m>1&&(m=Math.sqrt(m),n*=m,r*=m);const g=d/n,b=f/n,y=-f/r,x=d/r,w=g*a+b*u,T=y*a+x*u,A=g*e+b*t,k=y*e+x*t;let O=1/((A-w)*(A-w)+(k-T)*(k-T))-.25;O<0&&(O=0);let M=Math.sqrt(O);s==i&&(M=-M);const L=.5*(w+A)-M*(k-T),H=.5*(T+k)+M*(A-w),D=Math.atan2(T-H,w-L);let U=Math.atan2(k-H,A-L)-D;U<0&&s===1?U+=Pm:U>0&&s===0&&(U-=Pm);const G=Math.ceil(Math.abs(U/(m_+.001))),ee=[];for(let ne=0;ne<G;++ne){const ue=D+ne*U/G,X=D+(ne+1)*U/G;ee[ne]=[L,H,ue,X,n,r,f,d]}return bB[l]=ee}function Zwt(e){const t=tAe.call(e);if(xB[t])return xB[t];var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],u=e[6],l=e[7];const c=l*o,f=-u*a,d=u*o,h=l*a,p=Math.cos(i),m=Math.sin(i),g=Math.cos(s),b=Math.sin(s),y=.5*(s-i),x=Math.sin(y*.5),w=8/3*x*x/Math.sin(y),T=n+p-w*m,A=r+m+w*p,k=n+g,I=r+b,O=k+w*b,M=I-w*g;return xB[t]=[c*T+f*A,d*T+h*A,c*O+f*M,d*O+h*M,c*k+f*I,d*k+h*I]}const Bh=["l",0,0,0,0,0,0,0];function e2t(e,t,n){const r=Bh[0]=e[0];if(r==="a"||r==="A")Bh[1]=t*e[1],Bh[2]=n*e[2],Bh[3]=e[3],Bh[4]=e[4],Bh[5]=e[5],Bh[6]=t*e[6],Bh[7]=n*e[7];else if(r==="h"||r==="H")Bh[1]=t*e[1];else if(r==="v"||r==="V")Bh[1]=n*e[1];else for(var i=1,s=e.length;i<s;++i)Bh[i]=(i%2==1?t:n)*e[i];return Bh}function R4(e,t,n,r,i,s){var o,a=null,u=0,l=0,c=0,f=0,d,h,p,m,g=0,b=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),s==null&&(s=i),e.beginPath&&e.beginPath();for(var y=0,x=t.length;y<x;++y){switch(o=t[y],(i!==1||s!==1)&&(o=e2t(o,i,s)),o[0]){case"l":u+=o[1],l+=o[2],e.lineTo(u+n,l+r);break;case"L":u=o[1],l=o[2],e.lineTo(u+n,l+r);break;case"h":u+=o[1],e.lineTo(u+n,l+r);break;case"H":u=o[1],e.lineTo(u+n,l+r);break;case"v":l+=o[1],e.lineTo(u+n,l+r);break;case"V":l=o[1],e.lineTo(u+n,l+r);break;case"m":u+=o[1],l+=o[2],g=u,b=l,e.moveTo(u+n,l+r);break;case"M":u=o[1],l=o[2],g=u,b=l,e.moveTo(u+n,l+r);break;case"c":d=u+o[5],h=l+o[6],c=u+o[3],f=l+o[4],e.bezierCurveTo(u+o[1]+n,l+o[2]+r,c+n,f+r,d+n,h+r),u=d,l=h;break;case"C":u=o[5],l=o[6],c=o[3],f=o[4],e.bezierCurveTo(o[1]+n,o[2]+r,c+n,f+r,u+n,l+r);break;case"s":d=u+o[3],h=l+o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,u+o[1]+n,l+o[2]+r,d+n,h+r),c=u+o[1],f=l+o[2],u=d,l=h;break;case"S":d=o[3],h=o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"q":d=u+o[3],h=l+o[4],c=u+o[1],f=l+o[2],e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"Q":d=o[3],h=o[4],e.quadraticCurveTo(o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"t":d=u+o[1],h=l+o[2],a[0].match(/[QqTt]/)===null?(c=u,f=l):a[0]==="t"?(c=2*u-p,f=2*l-m):a[0]==="q"&&(c=2*u-c,f=2*l-f),p=c,m=f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h,c=u+o[1],f=l+o[2];break;case"T":d=o[1],h=o[2],c=2*u-c,f=2*l-f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"a":Nce(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+u+n,o[7]+l+r]),u+=o[6],l+=o[7];break;case"A":Nce(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+r]),u=o[6],l=o[7];break;case"z":case"Z":u=g,l=b,e.closePath();break}a=o}}function Nce(e,t,n,r){const i=Jwt(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let s=0;s<i.length;++s){const o=Zwt(i[s]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}const Dce=.5773502691896257,Oce={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,Pm)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,s=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-s),e.lineTo(i,-s),e.lineTo(0,-n),e.lineTo(-i,-s),e.lineTo(-r,-s),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=eE*n,i=r-n*Dce,s=n/4;e.moveTo(0,-r-i),e.lineTo(-s,r-i),e.lineTo(s,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=eE*n,i=r-n*Dce;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=eE*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=eE*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=eE*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=eE*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function nAe(e){return gn(Oce,e)?Oce[e]:t2t(e)}var _B={};function t2t(e){if(!gn(_B,e)){const t=BS(e);_B[e]={draw:function(n,r){R4(n,t,0,0,Math.sqrt(r)/2)}}}return _B[e]}const gv=.448084975506;function n2t(e){return e.x}function r2t(e){return e.y}function i2t(e){return e.width}function s2t(e){return e.height}function by(e){return typeof e=="function"?e:()=>+e}function r5(e,t,n){return Math.max(t,Math.min(e,n))}function rAe(){var e=n2t,t=r2t,n=i2t,r=s2t,i=by(0),s=i,o=i,a=i,u=null;function l(c,f,d){var h,p=f??+e.call(this,c),m=d??+t.call(this,c),g=+n.call(this,c),b=+r.call(this,c),y=Math.min(g,b)/2,x=r5(+i.call(this,c),0,y),w=r5(+s.call(this,c),0,y),T=r5(+o.call(this,c),0,y),A=r5(+a.call(this,c),0,y);if(u||(u=h=iM()),x<=0&&w<=0&&T<=0&&A<=0)u.rect(p,m,g,b);else{var k=p+g,I=m+b;u.moveTo(p+x,m),u.lineTo(k-w,m),u.bezierCurveTo(k-gv*w,m,k,m+gv*w,k,m+w),u.lineTo(k,I-A),u.bezierCurveTo(k,I-gv*A,k-gv*A,I,k-A,I),u.lineTo(p+T,I),u.bezierCurveTo(p+gv*T,I,p,I-gv*T,p,I-T),u.lineTo(p,m+x),u.bezierCurveTo(p,m+gv*x,p+gv*x,m,p+x,m),u.closePath()}if(h)return u=null,h+""||null}return l.x=function(c){return arguments.length?(e=by(c),l):e},l.y=function(c){return arguments.length?(t=by(c),l):t},l.width=function(c){return arguments.length?(n=by(c),l):n},l.height=function(c){return arguments.length?(r=by(c),l):r},l.cornerRadius=function(c,f,d,h){return arguments.length?(i=by(c),s=f!=null?by(f):i,a=d!=null?by(d):i,o=h!=null?by(h):s,l):i},l.context=function(c){return arguments.length?(u=c??null,l):u},l}function iAe(){var e,t,n,r,i=null,s,o,a,u;function l(f,d,h){const p=h/2;if(s){var m=a-d,g=f-o;if(m||g){var b=Math.hypot(m,g),y=(m/=b)*u,x=(g/=b)*u,w=Math.atan2(g,m);i.moveTo(o-y,a-x),i.lineTo(f-m*p,d-g*p),i.arc(f,d,p,w-Math.PI,w),i.lineTo(o+y,a+x),i.arc(o,a,u,w,w+Math.PI)}else i.arc(f,d,p,0,Pm);i.closePath()}else s=1;o=f,a=d,u=p}function c(f){var d,h=f.length,p,m=!1,g;for(i==null&&(i=g=iM()),d=0;d<=h;++d)!(d<h&&r(p=f[d],d,f))===m&&(m=!m)&&(s=0),m&&l(+e(p,d,f),+t(p,d,f),+n(p,d,f));if(g)return i=null,g+""||null}return c.x=function(f){return arguments.length?(e=f,c):e},c.y=function(f){return arguments.length?(t=f,c):t},c.size=function(f){return arguments.length?(n=f,c):n},c.defined=function(f){return arguments.length?(r=f,c):r},c.context=function(f){return arguments.length?(f==null?i=null:i=f,c):i},c}function QR(e,t){return e??t}const JR=e=>e.x||0,ZR=e=>e.y||0,o2t=e=>e.width||0,a2t=e=>e.height||0,u2t=e=>(e.x||0)+(e.width||0),l2t=e=>(e.y||0)+(e.height||0),c2t=e=>e.startAngle||0,f2t=e=>e.endAngle||0,d2t=e=>e.padAngle||0,h2t=e=>e.innerRadius||0,p2t=e=>e.outerRadius||0,m2t=e=>e.cornerRadius||0,g2t=e=>QR(e.cornerRadiusTopLeft,e.cornerRadius)||0,y2t=e=>QR(e.cornerRadiusTopRight,e.cornerRadius)||0,v2t=e=>QR(e.cornerRadiusBottomRight,e.cornerRadius)||0,b2t=e=>QR(e.cornerRadiusBottomLeft,e.cornerRadius)||0,x2t=e=>QR(e.size,64),_2t=e=>e.size||1,qM=e=>e.defined!==!1,w2t=e=>nAe(e.shape||"circle"),E2t=_yt().startAngle(c2t).endAngle(f2t).padAngle(d2t).innerRadius(h2t).outerRadius(p2t).cornerRadius(m2t),S2t=tSe().x(JR).y1(ZR).y0(l2t).defined(qM),T2t=tSe().y(ZR).x1(JR).x0(u2t).defined(qM),C2t=eSe().x(JR).y(ZR).defined(qM),A2t=rAe().x(JR).y(ZR).width(o2t).height(a2t).cornerRadius(g2t,y2t,v2t,b2t),k2t=Eyt().type(w2t).size(x2t),R2t=iAe().x(JR).y(ZR).defined(qM).size(_2t);function hQ(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function I2t(e,t){return E2t.context(e)(t)}function P2t(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?T2t:S2t).curve(dQ(r,n.orient,n.tension)).context(e)(t)}function N2t(e,t){const n=t[0],r=n.interpolate||"linear";return C2t.curve(dQ(r,n.orient,n.tension)).context(e)(t)}function nC(e,t,n,r){return A2t.context(e)(t,n,r)}function D2t(e,t){return(t.mark.shape||t.shape).context(e)(t)}function O2t(e,t){return k2t.context(e)(t)}function M2t(e,t){return R2t.context(e)(t)}var sAe=1;function oAe(){sAe=1}function pQ(e,t,n){var r=t.clip,i=e._defs,s=t.clip_id||(t.clip_id="clip"+sAe++),o=i.clipping[s]||(i.clipping[s]={id:s});return Rr(r)?o.path=r(null):hQ(n)?o.path=nC(null,n,0,0):(o.width=n.width||0,o.height=n.height||0),"url(#"+s+")"}function qa(e){this.clear(),e&&this.union(e)}qa.prototype={clone(){return new qa(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:s,y2:o}=this,a=Math.cos(e),u=Math.sin(e),l=t-t*a+n*u,c=n-t*u-n*a;return[a*r-u*i+l,u*r+a*i+c,a*r-u*o+l,u*r+a*o+c,a*s-u*i+l,u*s+a*i+c,a*s-u*o+l,u*s+a*o+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function WM(e){this.mark=e,this.bounds=this.bounds||new qa}function GM(e){WM.call(this,e),this.items=this.items||[]}en(GM,WM);class aAe{constructor(t){this._pending=0,this._loader=t||RM()}pending(){return this._pending}sanitizeURL(t){const n=this;return Mce(n),n._loader.sanitize(t,{context:"href"}).then(r=>(e3(n),r)).catch(()=>(e3(n),null))}loadImage(t){const n=this,r=mwt();return Mce(n),n._loader.sanitize(t,{context:"image"}).then(i=>{const s=i.href;if(!s||!r)throw{url:s};const o=new r,a=gn(i,"crossOrigin")?i.crossOrigin:"anonymous";return a!=null&&(o.crossOrigin=a),o.onload=()=>e3(n),o.onerror=()=>e3(n),o.src=s,o}).catch(i=>(e3(n),{complete:!1,width:0,height:0,src:i&&i.url||""}))}ready(){const t=this;return new Promise(n=>{function r(i){t.pending()?setTimeout(()=>{r(!0)},10):n(i)}r(!1)})}}function Mce(e){e._pending+=1}function e3(e){e._pending-=1}function D1(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?L2t(t,r):0))}return e}function L2t(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const F2t=Pm-1e-8;let YM,R8,I8,A_,_V,P8,wV,EV;const Bv=(e,t)=>YM.add(e,t),N8=(e,t)=>Bv(R8=e,I8=t),Lce=e=>Bv(e,YM.y1),Fce=e=>Bv(YM.x1,e),g_=(e,t)=>_V*e+wV*t,y_=(e,t)=>P8*e+EV*t,wB=(e,t)=>Bv(g_(e,t),y_(e,t)),EB=(e,t)=>N8(g_(e,t),y_(e,t));function eI(e,t){return YM=e,t?(A_=t*wb,_V=EV=Math.cos(A_),P8=Math.sin(A_),wV=-P8):(_V=EV=1,A_=P8=wV=0),$2t}const $2t={beginPath(){},closePath(){},moveTo:EB,lineTo:EB,rect(e,t,n,r){A_?(wB(e+n,t),wB(e+n,t+r),wB(e,t+r),EB(e,t)):(Bv(e+n,t+r),N8(e,t))},quadraticCurveTo(e,t,n,r){const i=g_(e,t),s=y_(e,t),o=g_(n,r),a=y_(n,r);$ce(R8,i,o,Lce),$ce(I8,s,a,Fce),N8(o,a)},bezierCurveTo(e,t,n,r,i,s){const o=g_(e,t),a=y_(e,t),u=g_(n,r),l=y_(n,r),c=g_(i,s),f=y_(i,s);Bce(R8,o,u,c,Lce),Bce(I8,a,l,f,Fce),N8(c,f)},arc(e,t,n,r,i,s){if(r+=A_,i+=A_,R8=n*Math.cos(i)+e,I8=n*Math.sin(i)+t,Math.abs(i-r)>F2t)Bv(e-n,t-n),Bv(e+n,t+n);else{const o=l=>Bv(n*Math.cos(l)+e,n*Math.sin(l)+t);let a,u;if(o(r),o(i),i!==r)if(r=r%Pm,r<0&&(r+=Pm),i=i%Pm,i<0&&(i+=Pm),i<r&&(s=!s,a=r,r=i,i=a),s)for(i-=Pm,a=r-r%m_,u=0;u<4&&a>i;++u,a-=m_)o(a);else for(a=r-r%m_+m_,u=0;u<4&&a<i;++u,a=a+m_)o(a)}}};function $ce(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function Bce(e,t,n,r,i){const s=r-e+3*t-3*n,o=e+n-2*t,a=e-t;let u=0,l=0,c;Math.abs(s)>Qwt?(c=o*o+a*s,c>=0&&(c=Math.sqrt(c),u=(-o+c)/s,l=(-o-c)/s)):u=.5*a/o,0<u&&u<1&&i(jce(u,e,t,n,r)),0<l&&l<1&&i(jce(l,e,t,n,r))}function jce(e,t,n,r,i){const s=1-e,o=s*s,a=e*e;return o*s*t+3*o*e*n+3*s*a*r+a*e*i}var rb=(rb=nb(1,1))?rb.getContext("2d"):null;const SV=new qa;function mQ(e){return function(t,n){if(!rb)return!0;e(rb,t),SV.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:s,y2:o}=SV;for(let a=i;a<=o;++a)for(let u=r;u<=s;++u)if(rb.isPointInPath(u,a))return!0;return!1}}function gQ(e,t){return t.contains(e.x||0,e.y||0)}function uAe(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,s=e.height||0;return t.intersects(SV.set(n,r,n+i,r+s))}function lAe(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,s=e.y2!=null?e.y2:r;return NE(t,n,r,i,s)}function NE(e,t,n,r,i){const{x1:s,y1:o,x2:a,y2:u}=e,l=r-t,c=i-n;let f=0,d=1,h,p,m,g;for(g=0;g<4;++g){if(g===0&&(h=-l,p=-(s-t)),g===1&&(h=l,p=a-t),g===2&&(h=-c,p=-(o-n)),g===3&&(h=c,p=u-n),Math.abs(h)<1e-10&&p<0)return!1;if(m=p/h,h<0){if(m>d)return!1;m>f&&(f=m)}else if(h>0){if(m<f)return!1;m<d&&(d=m)}}return!0}function jS(e,t){e.globalCompositeOperation=t.blend||"source-over"}function Xp(e,t){return e??t}function Uce(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function B2t(e,t,n){const r=n.width(),i=n.height();let s;if(t.gradient==="radial")s=e.createRadialGradient(n.x1+Xp(t.x1,.5)*r,n.y1+Xp(t.y1,.5)*i,Math.max(r,i)*Xp(t.r1,0),n.x1+Xp(t.x2,.5)*r,n.y1+Xp(t.y2,.5)*i,Math.max(r,i)*Xp(t.r2,.5));else{const o=Xp(t.x1,0),a=Xp(t.y1,0),u=Xp(t.x2,1),l=Xp(t.y2,0);if(o===u||a===l||r===i)s=e.createLinearGradient(n.x1+o*r,n.y1+a*i,n.x1+u*r,n.y1+l*i);else{const c=nb(Math.ceil(r),Math.ceil(i)),f=c.getContext("2d");return f.scale(r,i),f.fillStyle=Uce(f.createLinearGradient(o,a,u,l),t.stops),f.fillRect(0,0,r,i),e.createPattern(c,"no-repeat")}}return Uce(s,t.stops)}function cAe(e,t,n){return fQ(n)?B2t(e,n,t.bounds):n}function DD(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=cAe(e,t,t.fill),!0):!1}var j2t=[];function US(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=cAe(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||j2t),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function U2t(e,t){return e.zindex-t.zindex||e.index-t.index}function yQ(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,s;for(i=0,s=t.length;i<s;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(U2t)}function R0(e,t){var n=e.items,r,i;if(!n||!n.length)return;const s=yQ(e);if(s&&s.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=s}for(r=0,i=n.length;r<i;++r)t(n[r])}function OD(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const s=yQ(e);for(s&&s.length&&(n=s),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===s){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function vQ(e){return function(t,n,r){R0(n,i=>{(!r||r.intersects(i.bounds))&&fAe(e,t,i,i)})}}function z2t(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&fAe(e,t,n.items[0],n.items)}}function fAe(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(jS(t,n),n.fill&&DD(t,n,i)&&t.fill(),n.stroke&&US(t,n,i)&&t.stroke()))}function KM(e){return e=e||ep,function(t,n,r,i,s,o){return r*=t.pixelRatio,i*=t.pixelRatio,OD(n,a=>{const u=a.bounds;if(!(u&&!u.contains(s,o)||!u)&&e(t,a,r,i,s,o))return a})}}function tI(e,t){return function(n,r,i,s){var o=Array.isArray(r)?r[0]:r,a=t??o.fill,u=o.stroke&&n.isPointInStroke,l,c;return u&&(l=o.strokeWidth,c=o.strokeCap,n.lineWidth=l??1,n.lineCap=c??"butt"),e(n,r)?!1:a&&n.isPointInPath(i,s)||u&&n.isPointInStroke(i,s)}}function bQ(e){return KM(tI(e))}function F_(e,t){return"translate("+e+","+t+")"}function xQ(e){return"rotate("+e+")"}function V2t(e,t){return"scale("+e+","+t+")"}function dAe(e){return F_(e.x||0,e.y||0)}function H2t(e){return F_(e.x||0,e.y||0)+(e.angle?" "+xQ(e.angle):"")}function q2t(e){return F_(e.x||0,e.y||0)+(e.angle?" "+xQ(e.angle):"")+(e.scaleX||e.scaleY?" "+V2t(e.scaleX||1,e.scaleY||1):"")}function _Q(e,t,n){function r(o,a){o("transform",H2t(a)),o("d",t(null,a))}function i(o,a){return t(eI(o,a.angle),a),D1(o,a).translate(a.x||0,a.y||0)}function s(o,a){var u=a.x||0,l=a.y||0,c=a.angle||0;o.translate(u,l),c&&o.rotate(c*=wb),o.beginPath(),t(o,a),c&&o.rotate(-c),o.translate(-u,-l)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:vQ(s),pick:bQ(s),isect:n||mQ(s)}}var W2t=_Q("arc",I2t);function G2t(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,s=1/0,o,a;--i>=0;)e[i].defined!==!1&&(a=Math.abs(e[i][r]-n),a<s&&(s=a,o=e[i]));return o}function Y2t(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,s,o;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],s=e[r].y-t[1],o=i*i+s*s,o<n))return e[r];return null}function K2t(e,t){for(var n=e.length,r,i,s;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],s=r*r+i*i,r=e[n].size||1,s<r*r))return e[n];return null}function wQ(e,t,n){function r(u,l){var c=l.mark.items;c.length&&u("d",t(null,c))}function i(u,l){var c=l.items;return c.length===0?u:(t(eI(u),c),D1(u,c[0]))}function s(u,l){u.beginPath(),t(u,l)}const o=tI(s);function a(u,l,c,f,d,h){var p=l.items,m=l.bounds;return!p||!p.length||m&&!m.contains(d,h)?null:(c*=u.pixelRatio,f*=u.pixelRatio,o(u,p,c,f)?p[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:z2t(s),pick:a,isect:gQ,tip:n}}var X2t=wQ("area",P2t,G2t);function Q2t(e,t){var n=t.clip;e.save(),Rr(n)?(e.beginPath(),n(e),e.clip()):hAe(e,t.group)}function hAe(e,t){e.beginPath(),hQ(t)?nC(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function pAe(e){const t=Xp(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function J2t(e,t){e("transform",dAe(t))}function mAe(e,t){const n=pAe(t);e("d",nC(null,t,n,n))}function Z2t(e,t){e("class","background"),e("aria-hidden",!0),mAe(e,t)}function eEt(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?mAe(e,t):e("d","")}function tEt(e,t,n){const r=t.clip?pQ(n,t,t):null;e("clip-path",r)}function nEt(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),D1(e,t),e.translate(t.x||0,t.y||0)}function I4(e,t,n,r){const i=pAe(t);e.beginPath(),nC(e,t,(n||0)+i,(r||0)+i)}const rEt=tI(I4),iEt=tI(I4,!1),sEt=tI(I4,!0);function oEt(e,t,n,r){R0(t,i=>{const s=i.x||0,o=i.y||0,a=i.strokeForeground,u=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&u&&(I4(e,i,s,o),jS(e,i),i.fill&&DD(e,i,u)&&e.fill(),i.stroke&&!a&&US(e,i,u)&&e.stroke()),e.save(),e.translate(s,o),i.clip&&hAe(e,i),n&&n.translate(-s,-o),R0(i,l=>{(l.marktype==="group"||r==null||r.includes(l.marktype))&&this.draw(e,l,n,r)}),n&&n.translate(s,o),e.restore(),a&&i.stroke&&u&&(I4(e,i,s,o),jS(e,i),US(e,i,u)&&e.stroke())})}function aEt(e,t,n,r,i,s){if(t.bounds&&!t.bounds.contains(i,s)||!t.items)return null;const o=n*e.pixelRatio,a=r*e.pixelRatio;return OD(t,u=>{let l,c,f;const d=u.bounds;if(d&&!d.contains(i,s))return;c=u.x||0,f=u.y||0;const h=c+(u.width||0),p=f+(u.height||0),m=u.clip;if(m&&(i<c||i>h||s<f||s>p))return;if(e.save(),e.translate(c,f),c=i-c,f=s-f,m&&hQ(u)&&!sEt(e,u,o,a))return e.restore(),null;const g=u.strokeForeground,b=t.interactive!==!1;return b&&g&&u.stroke&&iEt(e,u,o,a)?(e.restore(),u):(l=OD(u,y=>uEt(y,c,f)?this.pick(y,n,r,c,f):null),!l&&b&&(u.fill||!g&&u.stroke)&&rEt(e,u,o,a)&&(l=u),e.restore(),l||null)})}function uEt(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var lEt={type:"group",tag:"g",nested:!1,attr:J2t,bound:nEt,draw:oEt,pick:aEt,isect:uAe,content:tEt,background:Z2t,foreground:eEt},P4={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function EQ(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function SQ(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function TQ(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function XM(e,t){return e==="center"?t/2:e==="right"?t:0}function QM(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function cEt(e,t,n){const r=EQ(t,n),i=SQ(t,r),s=TQ(t,r),o=(t.x||0)-XM(t.align,i),a=(t.y||0)-QM(t.baseline,s),u=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",u,P4["xmlns:xlink"],"xlink:href"),e("transform",F_(o,a)),e("width",i),e("height",s),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function fEt(e,t){const n=t.image,r=SQ(t,n),i=TQ(t,n),s=(t.x||0)-XM(t.align,r),o=(t.y||0)-QM(t.baseline,i);return e.set(s,o,s+r,o+i)}function dEt(e,t,n){R0(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=EQ(r,this);let s=SQ(r,i),o=TQ(r,i);if(s===0||o===0)return;let a=(r.x||0)-XM(r.align,s),u=(r.y||0)-QM(r.baseline,o),l,c,f,d;r.aspect!==!1&&(c=i.width/i.height,f=r.width/r.height,c===c&&f===f&&c!==f&&(f<c?(d=s/c,u+=(o-d)/2,o=d):(d=o*c,a+=(s-d)/2,s=d))),(i.complete||i.toDataURL)&&(jS(e,r),e.globalAlpha=(l=r.opacity)!=null?l:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,a,u,s,o))})}var hEt={type:"image",tag:"image",nested:!1,attr:cEt,bound:fEt,draw:dEt,pick:KM(),isect:ep,get:EQ,xOffset:XM,yOffset:QM},pEt=wQ("line",N2t,Y2t);function mEt(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",q2t(t)),e("d",t.path)}function D8(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,s=t.scaleX||1,o=t.scaleY||1,a=(t.angle||0)*wb,u=t.pathCache;(!u||u.path!==n)&&((t.pathCache=u=BS(n)).path=n),a&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(a),R4(e,u,0,0,s,o),e.rotate(-a),e.translate(-r,-i)):R4(e,u,r,i,s,o)}function gEt(e,t){return D8(eI(e,t.angle),t)?e.set(0,0,0,0):D1(e,t,!0)}var yEt={type:"path",tag:"path",nested:!1,attr:mEt,bound:gEt,draw:vQ(D8),pick:bQ(D8),isect:mQ(D8)};function vEt(e,t){e("d",nC(null,t))}function bEt(e,t){var n,r;return D1(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function zce(e,t){e.beginPath(),nC(e,t)}var xEt={type:"rect",tag:"path",nested:!1,attr:vEt,bound:bEt,draw:vQ(zce),pick:bQ(zce),isect:uAe};function _Et(e,t){e("transform",dAe(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function wEt(e,t){var n,r;return D1(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function gAe(e,t,n){var r,i,s,o;return t.stroke&&US(e,t,n)?(r=t.x||0,i=t.y||0,s=t.x2!=null?t.x2:r,o=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(s,o),!0):!1}function EEt(e,t,n){R0(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&gAe(e,r,i)&&(jS(e,r),e.stroke())}})}function SEt(e,t,n,r){return e.isPointInStroke?gAe(e,t,1)&&e.isPointInStroke(n,r):!1}var TEt={type:"rule",tag:"line",nested:!1,attr:_Et,bound:wEt,draw:EEt,pick:KM(SEt),isect:lAe},CEt=_Q("shape",D2t),AEt=_Q("symbol",O2t,gQ);const Vce=eTe();var eh={height:Ag,measureWidth:CQ,estimateWidth:MD,width:MD,canvas:yAe};yAe(!0);function yAe(e){eh.width=e&&rb?CQ:MD}function MD(e,t){return vAe(Sb(e,t),Ag(e))}function vAe(e,t){return~~(.8*e.length*t)}function CQ(e,t){return Ag(e)<=0||!(t=Sb(e,t))?0:bAe(t,JM(e))}function bAe(e,t){const n=`(${t}) ${e}`;let r=Vce.get(n);return r===void 0&&(rb.font=t,r=rb.measureText(e).width,Vce.set(n,r)),r}function Ag(e){return e.fontSize!=null?+e.fontSize||0:11}function Eb(e){return e.lineHeight!=null?e.lineHeight:Ag(e)+2}function kEt(e){return xt(e)?e.length>1?e:e[0]:e}function nI(e){return kEt(e.lineBreak&&e.text&&!xt(e.text)?e.text.split(e.lineBreak):e.text)}function AQ(e){const t=nI(e);return(xt(t)?t.length-1:0)*Eb(e)}function Sb(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?IEt(e,n):n}function REt(e){if(eh.width===CQ){const t=JM(e);return n=>bAe(n,t)}else if(eh.width===MD){const t=Ag(e);return n=>vAe(n,t)}else return t=>eh.width(e,t)}function IEt(e,t){var n=+e.limit,r=REt(e);if(r(t)<n)return t;var i=e.ellipsis||"",s=e.dir==="rtl",o=0,a=t.length,u;if(n-=r(i),s){for(;o<a;)u=o+a>>>1,r(t.slice(u))>n?o=u+1:a=u;return i+t.slice(o)}else{for(;o<a;)u=1+(o+a>>>1),r(t.slice(0,u))<n?o=u:a=u-1;return t.slice(0,o)+i}}function rI(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function JM(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+Ag(e)+"px "+rI(e,t)}function kQ(e){var t=e.baseline,n=Ag(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*Eb(e):t==="line-bottom"?.29*n-.5*Eb(e):0)}const PEt={left:"start",center:"middle",right:"end"},Rk=new qa;function ZM(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-m_,t+=r*Math.cos(i),n+=r*Math.sin(i)),Rk.x1=t,Rk.y1=n,Rk}function NEt(e,t){var n=t.dx||0,r=(t.dy||0)+kQ(t),i=ZM(t),s=i.x1,o=i.y1,a=t.angle||0,u;e("text-anchor",PEt[t.align]||"start"),a?(u=F_(s,o)+" "+xQ(a),(n||r)&&(u+=" "+F_(n,r))):u=F_(s+n,o+r),e("transform",u)}function RQ(e,t,n){var r=eh.height(t),i=t.align,s=ZM(t),o=s.x1,a=s.y1,u=t.dx||0,l=(t.dy||0)+kQ(t)-Math.round(.8*r),c=nI(t),f;if(xt(c)?(r+=Eb(t)*(c.length-1),f=c.reduce((d,h)=>Math.max(d,eh.width(t,h)),0)):f=eh.width(t,c),i==="center"?u-=f/2:i==="right"&&(u-=f),e.set(u+=o,l+=a,u+f,l+r),t.angle&&!n)e.rotate(t.angle*wb,o,a);else if(n===2)return e.rotatedPoints(t.angle*wb,o,a);return e}function DEt(e,t,n){R0(t,r=>{var i=r.opacity==null?1:r.opacity,s,o,a,u,l,c,f;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=JM(r),e.textAlign=r.align||"left",s=ZM(r),o=s.x1,a=s.y1,r.angle&&(e.save(),e.translate(o,a),e.rotate(r.angle*wb),o=a=0),o+=r.dx||0,a+=(r.dy||0)+kQ(r),c=nI(r),jS(e,r),xt(c))for(l=Eb(r),u=0;u<c.length;++u)f=Sb(r,c[u]),r.fill&&DD(e,r,i)&&e.fillText(f,o,a),r.stroke&&US(e,r,i)&&e.strokeText(f,o,a),a+=l;else f=Sb(r,c),r.fill&&DD(e,r,i)&&e.fillText(f,o,a),r.stroke&&US(e,r,i)&&e.strokeText(f,o,a);r.angle&&e.restore()}})}function OEt(e,t,n,r,i,s){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=ZM(t),a=o.x1,u=o.y1,l=RQ(Rk,t,1),c=-t.angle*wb,f=Math.cos(c),d=Math.sin(c),h=f*i-d*s+(a-f*a+d*u),p=d*i+f*s+(u-d*a-f*u);return l.contains(h,p)}function MEt(e,t){const n=RQ(Rk,e,2);return NE(t,n[0],n[1],n[2],n[3])||NE(t,n[0],n[1],n[4],n[5])||NE(t,n[4],n[5],n[6],n[7])||NE(t,n[2],n[3],n[6],n[7])}var LEt={type:"text",tag:"text",nested:!1,attr:NEt,bound:RQ,draw:DEt,pick:KM(OEt),isect:MEt},FEt=wQ("trail",M2t,K2t),ch={arc:W2t,area:X2t,group:lEt,image:hEt,line:pEt,path:yEt,rect:xEt,rule:TEt,shape:CEt,symbol:AEt,text:LEt,trail:FEt};function TV(e,t,n){var r=ch[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new qa),e,n)}var Hce={mark:null};function xAe(e,t,n){var r=ch[e.marktype],i=r.bound,s=e.items,o=s&&s.length,a,u,l,c;if(r.nested)return o?l=s[0]:(Hce.mark=e,l=Hce),c=TV(l,i,n),t=t&&t.union(c)||c,t;if(t=t||e.bounds&&e.bounds.clear()||new qa,o)for(a=0,u=s.length;a<u;++a)t.union(TV(s[a],i,n));return e.bounds=t}const $Et=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function _Ae(e,t){return JSON.stringify(e,$Et,t)}function wAe(e){const t=typeof e=="string"?JSON.parse(e):e;return EAe(t)}function EAe(e){var t=e.marktype,n=e.items,r,i,s;if(n)for(i=0,s=n.length;i<s;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&EAe(n[i]);return t&&xAe(e),e}class SAe{constructor(t){arguments.length?this.root=wAe(t):(this.root=qce({marktype:"group",name:"root",role:"frame"}),this.root.items=[new GM(this.root)])}toJSON(t){return _Ae(this.root,t||0)}mark(t,n,r){n=n||this.root.items[0];const i=qce(t,n);return n.items[r]=i,i.zindex&&(i.group.zdirty=!0),i}}function qce(e,t){const n={bounds:new qa,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function jv(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function IQ(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function cu(e,t,n,r){var i=e.childNodes[t],s;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(s=i||null,i=jv(e.ownerDocument,n,r),e.insertBefore(i,s)),i}function Vh(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function TAe(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function eL(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function BEt(e,t,n,r){var i=e&&e.mark,s,o;if(i&&(s=ch[i.marktype]).tip){for(o=eL(t,n),o[0]-=r[0],o[1]-=r[1];e=e.mark.group;)o[0]-=e.x||0,o[1]-=e.y||0;e=s.tip(i.items,o)}return e}let PQ=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||RM(),this._tooltip=n||jEt}initialize(t,n,r){return this._el=t,this._obj=r||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,r){for(let i=t?t.length:0;--i>=0;)if(t[i].type===n&&(!r||t[i].handler===r))return i;return-1}handlers(t){const n=this._handlers,r=[];if(t)r.push(...n[this.eventName(t)]);else for(const i in n)r.push(...n[i]);return r}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,r){this._loader.sanitize(r,{context:"href"}).then(i=>{const s=new MouseEvent(t.type,t),o=jv(null,"a");for(const a in i)o.setAttribute(a,i[a]);o.dispatchEvent(s)}).catch(()=>{})}handleTooltip(t,n,r){if(n&&n.tooltip!=null){n=BEt(n,t,this.canvas(),this._origin);const i=r&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,i)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const r=n.getBoundingClientRect(),i=this._origin,s=t.bounds,o=s.width(),a=s.height();let u=s.x1+i[0]+r.left,l=s.y1+i[1]+r.top;for(;t.mark&&(t=t.mark.group);)u+=t.x||0,l+=t.y||0;return{x:u,y:l,width:o,height:a,left:u,top:l,right:u+o,bottom:l+a}}};function jEt(e,t,n,r){e.element().setAttribute("title",r||"")}class iI{constructor(t){this._el=null,this._bgcolor=null,this._loader=new aAe(t)}initialize(t,n,r,i,s){return this._el=t,this.resize(n,r,i,s)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,r,i){return this._width=t,this._height=n,this._origin=r||[0,0],this._scale=i||1,this}dirty(){}render(t,n){const r=this;return r._call=function(){r._render(t,n)},r._call(),r._call=null,r}_render(){}renderAsync(t,n){const r=this.render(t,n);return this._ready?this._ready.then(()=>r):Promise.resolve(r)}_load(t,n){var r=this,i=r._loader[t](n);if(!r._ready){const s=r._call;r._ready=r._loader.ready().then(o=>{o&&s(),r._ready=null})}return i}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const UEt="keydown",zEt="keypress",VEt="keyup",CAe="dragenter",O8="dragleave",AAe="dragover",CV="pointerdown",HEt="pointerup",LD="pointermove",M8="pointerout",kAe="pointerover",AV="mousedown",qEt="mouseup",RAe="mousemove",FD="mouseout",IAe="mouseover",$D="click",WEt="dblclick",GEt="wheel",PAe="mousewheel",BD="touchstart",jD="touchmove",UD="touchend",YEt=[UEt,zEt,VEt,CAe,O8,AAe,CV,HEt,LD,M8,kAe,AV,qEt,RAe,FD,IAe,$D,WEt,GEt,PAe,BD,jD,UD],kV=LD,Ik=FD,RV=$D;class sI extends PQ{constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=YEt,this.pointermove=Gce([LD,RAe],[kAe,IAe],[M8,FD]),this.dragover=Gce([AAe],[CAe],[O8]),this.pointerout=Yce([M8,FD]),this.dragleave=Yce([O8])}initialize(t,n,r){return this._canvas=t&&IQ(t,"canvas"),[$D,AV,CV,LD,M8,O8].forEach(i=>Wce(this,i)),super.initialize(t,n,r)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(PAe,t)}pointerdown(t){this._down=this._active,this.fire(CV,t)}mousedown(t){this._down=this._active,this.fire(AV,t)}click(t){this._down===this._active&&(this.fire($D,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(BD,t,!0)}touchmove(t){this.fire(jD,t,!0)}touchend(t){this.fire(UD,t,!0),this._touch=null}fire(t,n,r){const i=r?this._touch:this._active,s=this._handlers[t];if(n.vegaType=t,t===RV&&i&&i.href?this.handleHref(n,i,i.href):(t===kV||t===Ik)&&this.handleTooltip(n,i,t!==Ik),s)for(let o=0,a=s.length;o<a;++o)s[o].handler.call(this._obj,n,i)}on(t,n){const r=this.eventName(t),i=this._handlers;return this._handlerIndex(i[r],t,n)<0&&(Wce(this,t),(i[r]||(i[r]=[])).push({type:t,handler:n})),this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&i.splice(s,1),this}pickEvent(t){const n=eL(t,this._canvas),r=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-r[0],n[1]-r[1])}pick(t,n,r,i,s){const o=this.context();return ch[t.marktype].pick.call(this,o,t,n,r,i,s)}}const KEt=e=>e===BD||e===jD||e===UD?[BD,jD,UD]:[e];function Wce(e,t){KEt(t).forEach(n=>XEt(e,n))}function XEt(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function K3(e,t,n){t.forEach(r=>e.fire(r,n))}function Gce(e,t,n){return function(r){const i=this._active,s=this.pickEvent(r);s===i?K3(this,e,r):((!i||!i.exit)&&K3(this,n,r),this._active=s,K3(this,t,r),K3(this,e,r))}}function Yce(e){return function(t){K3(this,e,t),this._active=null}}function QEt(){return typeof window<"u"&&window.devicePixelRatio||1}function JEt(e,t,n,r,i,s){const o=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,a=e.getContext("2d"),u=o?QEt():i;e.width=t*u,e.height=n*u;for(const l in s)a[l]=s[l];return o&&u!==1&&(e.style.width=t+"px",e.style.height=n+"px"),a.pixelRatio=u,a.setTransform(u,0,0,u,u*r[0],u*r[1]),e}class zD extends iI{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new qa,this._tempb=new qa}initialize(t,n,r,i,s,o){return this._options=o||{},this._canvas=this._options.externalContext?null:nb(1,1,this._options.type),t&&this._canvas&&(Vh(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,r,i,s)}resize(t,n,r,i){if(super.resize(t,n,r,i),this._canvas)JEt(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const s=this._options.externalContext;s||vt("CanvasRenderer is missing a valid canvas or context"),s.scale(this._scale,this._scale),s.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let r=t.mark.group;for(;r;)n.translate(r.x||0,r.y||0),r=r.mark.group;this._dirty.union(n)}_render(t,n){const r=this.context(),i=this._origin,s=this._width,o=this._height,a=this._dirty,u=ZEt(i,s,o);r.save();const l=this._redraw||a.empty()?(this._redraw=!1,u.expand(1)):eSt(r,u.intersect(a),i);return this.clear(-i[0],-i[1],s,o),this.draw(r,t,l,n),r.restore(),a.clear(),this}draw(t,n,r,i){if(n.marktype!=="group"&&i!=null&&!i.includes(n.marktype))return;const s=ch[n.marktype];n.clip&&Q2t(t,n),s.draw.call(this,t,n,r,i),n.clip&&t.restore()}clear(t,n,r,i){const s=this._options,o=this.context();s.type!=="pdf"&&!s.externalContext&&o.clearRect(t,n,r,i),this._bgcolor!=null&&(o.fillStyle=this._bgcolor,o.fillRect(t,n,r,i))}}const ZEt=(e,t,n)=>new qa().set(0,0,t,n).translate(-e[0],-e[1]);function eSt(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class NAe extends PQ{constructor(t,n){super(t,n);const r=this;r._hrefHandler=SB(r,(i,s)=>{s&&s.href&&r.handleHref(i,s,s.href)}),r._tooltipHandler=SB(r,(i,s)=>{r.handleTooltip(i,s,i.type!==Ik)})}initialize(t,n,r){let i=this._svg;return i&&(i.removeEventListener(RV,this._hrefHandler),i.removeEventListener(kV,this._tooltipHandler),i.removeEventListener(Ik,this._tooltipHandler)),this._svg=i=t&&IQ(t,"svg"),i&&(i.addEventListener(RV,this._hrefHandler),i.addEventListener(kV,this._tooltipHandler),i.addEventListener(Ik,this._tooltipHandler)),super.initialize(t,n,r)}canvas(){return this._svg}on(t,n){const r=this.eventName(t),i=this._handlers;if(this._handlerIndex(i[r],t,n)<0){const o={type:t,handler:n,listener:SB(this,n)};(i[r]||(i[r]=[])).push(o),this._svg&&this._svg.addEventListener(r,o.listener)}return this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&(this._svg&&this._svg.removeEventListener(r,i[s].listener),i.splice(s,1)),this}}const SB=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)},DAe="aria-hidden",NQ="aria-label",DQ="role",OQ="aria-roledescription",OAe="graphics-object",MQ="graphics-symbol",MAe=(e,t,n)=>({[DQ]:e,[OQ]:t,[NQ]:n||void 0}),tSt=A0(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),Kce={axis:{desc:"axis",caption:iSt},legend:{desc:"legend",caption:sSt},"title-text":{desc:"title",caption:e=>`Title text '${Qce(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${Qce(e)}'`}},Xce={ariaRole:DQ,ariaRoleDescription:OQ,description:NQ};function LAe(e,t){const n=t.aria===!1;if(e(DAe,n||void 0),n||t.description==null)for(const r in Xce)e(Xce[r],void 0);else{const r=t.mark.marktype;e(NQ,t.description),e(DQ,t.ariaRole||(r==="group"?OAe:MQ)),e(OQ,t.ariaRoleDescription||`${r} mark`)}}function FAe(e){return e.aria===!1?{[DAe]:!0}:tSt[e.role]?null:Kce[e.role]?rSt(e,Kce[e.role]):nSt(e)}function nSt(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return MAe(n?OAe:MQ,`${t} mark container`,e.description)}function rSt(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return MAe(t.role||MQ,t.desc,n.description||r(n))}catch{return null}}function Qce(e){return ln(e.text).join(" ")}function iSt(e){const t=e.datum,n=e.orient,r=t.title?$Ae(e):null,i=e.context,s=i.scales[t.scale].value,o=i.dataflow.locale(),a=s.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${$S(a)?"discrete":a} scale with ${QCe(o,s,e)}`}function sSt(e){const t=e.datum,n=t.title?$Ae(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,s=Object.keys(i),o=e.context,a=o.scales[i[s[0]]].value,u=o.dataflow.locale();return aSt(r)+(n?` titled '${n}'`:"")+` for ${oSt(s)} with ${QCe(u,a,e)}`}function $Ae(e){try{return ln(pi(e.items).items[0].text).join(" ")}catch{return null}}function oSt(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+pi(e)}function aSt(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const BAe=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),uSt=e=>BAe(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function LQ(){let e="",t="",n="";const r=[],i=()=>t=n="",s=u=>{t&&(e+=`${t}>${n}`,i()),r.push(u)},o=(u,l)=>(l!=null&&(t+=` ${u}="${uSt(l)}"`),a),a={open(u){s(u),t="<"+u;for(var l=arguments.length,c=new Array(l>1?l-1:0),f=1;f<l;f++)c[f-1]=arguments[f];for(const d of c)for(const h in d)o(h,d[h]);return a},close(){const u=r.pop();return t?e+=t+(n?`>${n}</${u}>`:"/>"):e+=`</${u}>`,i(),a},attr:o,text:u=>(n+=BAe(u),a),toString:()=>e};return a}const jAe=e=>UAe(LQ(),e)+"";function UAe(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const r of n)r.nodeType===3?e.text(r.nodeValue):UAe(e,r)}return e.close()}const VD={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},HD={blend:"mix-blend-mode"},zAe={fill:"none","stroke-miterlimit":10},t3=0,Jce="http://www.w3.org/2000/xmlns/",lu=P4.xmlns;class FQ extends iI{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,r,i,s){return this._defs={},this._clearDefs(),t&&(this._svg=cu(t,0,"svg",lu),this._svg.setAttributeNS(Jce,"xmlns",lu),this._svg.setAttributeNS(Jce,"xmlns:xlink",P4["xmlns:xlink"]),this._svg.setAttribute("version",P4.version),this._svg.setAttribute("class","marks"),Vh(t,1),this._root=cu(this._svg,t3,"g",lu),Uv(this._root,zAe),Vh(this._svg,t3+1)),this.background(this._bgcolor),super.initialize(t,n,r,i,s)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svg&&(Uv(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let r;n&&(t.removeAttribute("style"),r=cu(t,t3,"rect",lu),Uv(r,{width:this._width,height:this._height,fill:n}));const i=jAe(t);return n&&(t.removeChild(r),this._svg.style.setProperty("background-color",n)),i}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),Vh(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let r,i,s,o,a,u,l;for(a=0,u=t.length;a<u;++a)if(r=t[a],i=r.mark,i.marktype!==s&&(s=i.marktype,o=ch[s]),i.zdirty&&i.dirty!==n&&(this._dirtyAll=!1,Zce(r,n),i.items.forEach(c=>{c.dirty=n})),!i.zdirty){if(r.exit){o.nested&&i.items.length?(l=i.items[0],l._svg&&this._update(o,l._svg,l)):r._svg&&(l=r._svg.parentNode,l&&l.removeChild(r._svg)),r._svg=null;continue}r=o.nested?i.items[0]:r,r._update!==n&&(!r._svg||!r._svg.ownerSVGElement?(this._dirtyAll=!1,Zce(r,n)):this._update(o,r._svg,r),r._update=n)}return!this._dirtyAll}mark(t,n,r,i){if(!this.isDirty(n))return n._svg;const s=this._svg,o=n.marktype,a=ch[o],u=n.interactive===!1?"none":null,l=a.tag==="g",c=efe(n,t,r,"g",s);if(o!=="group"&&i!=null&&!i.includes(o))return Vh(c,0),n._svg;c.setAttribute("class",TAe(n));const f=FAe(n);for(const m in f)Wc(c,m,f[m]);l||Wc(c,"pointer-events",u),Wc(c,"clip-path",n.clip?pQ(this,n,n.group):null);let d=null,h=0;const p=m=>{const g=this.isDirty(m),b=efe(m,c,d,a.tag,s);g&&(this._update(a,b,m),l&&fSt(this,b,m,i)),d=b,++h};return a.nested?n.items.length&&p(n.items[0]):R0(n,p),Vh(c,h),c}_update(t,n,r){Hy=n,Xl=n.__values__,LAe(Pk,r),t.attr(Pk,r,this);const i=hSt[t.type];i&&i.call(this,t,n,r),Hy&&this.style(Hy,r)}style(t,n){if(n!=null){for(const r in VD){let i=r==="font"?rI(n):n[r];if(i===Xl[r])continue;const s=VD[r];i==null?t.removeAttribute(s):(fQ(i)&&(i=ZCe(i,this._defs.gradient,VAe())),t.setAttribute(s,i+"")),Xl[r]=i}for(const r in HD)L8(t,HD[r],n[r])}}defs(){const t=this._svg,n=this._defs;let r=n.el,i=0;for(const s in n.gradient)r||(n.el=r=cu(t,t3+1,"defs",lu)),i=lSt(r,n.gradient[s],i);for(const s in n.clipping)r||(n.el=r=cu(t,t3+1,"defs",lu)),i=cSt(r,n.clipping[s],i);r&&(i===0?(t.removeChild(r),n.el=null):Vh(r,i))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function Zce(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function lSt(e,t,n){let r,i,s;if(t.gradient==="radial"){let o=cu(e,n++,"pattern",lu);Uv(o,{id:ND+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),o=cu(o,0,"rect",lu),Uv(o,{width:1,height:1,fill:`url(${VAe()}#${t.id})`}),e=cu(e,n++,"radialGradient",lu),Uv(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=cu(e,n++,"linearGradient",lu),Uv(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)s=cu(e,r,"stop",lu),s.setAttribute("offset",t.stops[r].offset),s.setAttribute("stop-color",t.stops[r].color);return Vh(e,r),n}function cSt(e,t,n){let r;return e=cu(e,n,"clipPath",lu),e.setAttribute("id",t.id),t.path?(r=cu(e,0,"path",lu),r.setAttribute("d",t.path)):(r=cu(e,0,"rect",lu),Uv(r,{x:0,y:0,width:t.width,height:t.height})),Vh(e,1),n+1}function fSt(e,t,n,r){t=t.lastChild.previousSibling;let i,s=0;R0(n,o=>{i=e.mark(t,o,i,r),++s}),Vh(t,1+s)}function efe(e,t,n,r,i){let s=e._svg,o;if(!s&&(o=t.ownerDocument,s=jv(o,r,lu),e._svg=s,e.mark&&(s.__data__=e,s.__values__={fill:"default"},r==="g"))){const a=jv(o,"path",lu);s.appendChild(a),a.__data__=e;const u=jv(o,"g",lu);s.appendChild(u),u.__data__=e;const l=jv(o,"path",lu);s.appendChild(l),l.__data__=e,l.__values__={fill:"default"}}return(s.ownerSVGElement!==i||dSt(s,n))&&t.insertBefore(s,n?n.nextSibling:t.firstChild),s}function dSt(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let Hy=null,Xl=null;const hSt={group(e,t,n){const r=Hy=t.childNodes[2];Xl=r.__values__,e.foreground(Pk,n,this),Xl=t.__values__,Hy=t.childNodes[1],e.content(Pk,n,this);const i=Hy=t.childNodes[0];e.background(Pk,n,this);const s=n.mark.interactive===!1?"none":null;if(s!==Xl.events&&(Wc(r,"pointer-events",s),Wc(i,"pointer-events",s),Xl.events=s),n.strokeForeground&&n.stroke){const o=n.fill;Wc(r,"display",null),this.style(i,n),Wc(i,"stroke",null),o&&(n.fill=null),Xl=r.__values__,this.style(r,n),o&&(n.fill=o),Hy=null}else Wc(r,"display","none")},image(e,t,n){n.smooth===!1?(L8(t,"image-rendering","optimizeSpeed"),L8(t,"image-rendering","pixelated")):L8(t,"image-rendering",null)},text(e,t,n){const r=nI(n);let i,s,o,a;xt(r)?(s=r.map(u=>Sb(n,u)),i=s.join(`
`),i!==Xl.text&&(Vh(t,0),o=t.ownerDocument,a=Eb(n),s.forEach((u,l)=>{const c=jv(o,"tspan",lu);c.__data__=n,c.textContent=u,l&&(c.setAttribute("x",0),c.setAttribute("dy",a)),t.appendChild(c)}),Xl.text=i)):(s=Sb(n,r),s!==Xl.text&&(t.textContent=s,Xl.text=s)),Wc(t,"font-family",rI(n)),Wc(t,"font-size",Ag(n)+"px"),Wc(t,"font-style",n.fontStyle),Wc(t,"font-variant",n.fontVariant),Wc(t,"font-weight",n.fontWeight)}};function Pk(e,t,n){t!==Xl[e]&&(n?pSt(Hy,e,t,n):Wc(Hy,e,t),Xl[e]=t)}function L8(e,t,n){n!==Xl[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),Xl[t]=n)}function Uv(e,t){for(const n in t)Wc(e,n,t[n])}function Wc(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function pSt(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function VAe(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class HAe extends iI{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=LQ();n.open("svg",kr({},P4,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const r=this._bgcolor;return r&&r!=="transparent"&&r!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:r}).close(),n.open("g",zAe,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const r=ch[n.marktype],i=r.tag,s=[LAe,r.attr];t.open("g",{class:TAe(n),"clip-path":n.clip?pQ(this,n,n.group):null},FAe(n),{"pointer-events":i!=="g"&&n.interactive===!1?"none":null});const o=a=>{const u=this.href(a);if(u&&t.open("a",u),t.open(i,this.attr(n,a,s,i!=="g"?i:null)),i==="text"){const l=nI(a);if(xt(l)){const c={x:0,dy:Eb(a)};for(let f=0;f<l.length;++f)t.open("tspan",f?c:null).text(Sb(a,l[f])).close()}else t.text(Sb(a,l))}else if(i==="g"){const l=a.strokeForeground,c=a.fill,f=a.stroke;l&&f&&(a.stroke=null),t.open("path",this.attr(n,a,r.background,"bgrect")).close(),t.open("g",this.attr(n,a,r.content)),R0(a,d=>this.mark(t,d)),t.close(),l&&f?(c&&(a.fill=null),a.stroke=f,t.open("path",this.attr(n,a,r.foreground,"bgrect")).close(),c&&(a.fill=c)):t.open("path",this.attr(n,a,r.foreground,"bgfore")).close()}t.close(),u&&t.close()};return r.nested?n.items&&n.items.length&&o(n.items[0]):R0(n,o),t.close()}href(t){const n=t.href;let r;if(n){if(r=this._hrefs&&this._hrefs[n])return r;this.sanitizeURL(n).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[n]=i})}return null}attr(t,n,r,i){const s={},o=(a,u,l,c)=>{s[c||a]=u};return Array.isArray(r)?r.forEach(a=>a(o,n,this)):r(o,n,this),i&&mSt(s,n,t,i,this._defs),s}defs(t){const n=this._defs.gradient,r=this._defs.clipping;if(Object.keys(n).length+Object.keys(r).length!==0){t.open("defs");for(const s in n){const o=n[s],a=o.stops;o.gradient==="radial"?(t.open("pattern",{id:ND+s,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+s+")"}).close(),t.close(),t.open("radialGradient",{id:s,fx:o.x1,fy:o.y1,fr:o.r1,cx:o.x2,cy:o.y2,r:o.r2})):t.open("linearGradient",{id:s,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2});for(let u=0;u<a.length;++u)t.open("stop",{offset:a[u].offset,"stop-color":a[u].color}).close();t.close()}for(const s in r){const o=r[s];t.open("clipPath",{id:s}),o.path?t.open("path",{d:o.path}).close():t.open("rect",{x:0,y:0,width:o.width,height:o.height}).close(),t.close()}t.close()}}}function mSt(e,t,n,r,i){let s;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(s=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=rI(t),e["font-size"]=Ag(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const o in VD){let a=t[o];const u=VD[o];a==="transparent"&&(u==="fill"||u==="stroke")||a!=null&&(fQ(a)&&(a=ZCe(a,i.gradient,"")),e[u]=a)}for(const o in HD){const a=t[o];a!=null&&(s=s||[],s.push(`${HD[o]}: ${a};`))}return s&&(e.style=s.join(" ")),e}const e0={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function gSt(e){e0.svgMarkTypes=e.svgMarkTypes??["text"],e0.svgOnTop=e.svgOnTop??!0,e0.debug=e.debug??!1}class IV extends iI{constructor(t){super(t),this._svgRenderer=new FQ(t),this._canvasRenderer=new zD(t)}initialize(t,n,r,i,s){this._root_el=cu(t,0,"div");const o=cu(this._root_el,0,"div"),a=cu(this._root_el,1,"div");return this._root_el.style.position="relative",e0.debug||(o.style.height="100%",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.width="100%"),this._svgEl=e0.svgOnTop?a:o,this._canvasEl=e0.svgOnTop?o:a,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,r,i,s),this._svgRenderer.initialize(this._svgEl,n,r,i,s),super.initialize(t,n,r,i,s)}dirty(t){return e0.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const i=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(s=>!e0.svgMarkTypes.includes(s));this._svgRenderer.render(t,e0.svgMarkTypes),this._canvasRenderer.render(t,i)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svgRenderer.resize(t,n,r,i),this._canvasRenderer.resize(t,n,r,i),this}background(t){return e0.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class qAe extends sI{constructor(t,n){super(t,n)}initialize(t,n,r){const i=cu(cu(t,0,"div"),e0.svgOnTop?0:1,"div");return super.initialize(i,n,r)}}const WAe="canvas",GAe="hybrid",YAe="png",KAe="svg",XAe="none",zv={Canvas:WAe,PNG:YAe,SVG:KAe,Hybrid:GAe,None:XAe},iw={};iw[WAe]=iw[YAe]={renderer:zD,headless:zD,handler:sI};iw[KAe]={renderer:FQ,headless:HAe,handler:NAe};iw[GAe]={renderer:IV,headless:IV,handler:qAe};iw[XAe]={};function tL(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(iw[e]=t,this):iw[e]}function QAe(e,t,n){const r=[],i=new qa().union(t),s=e.marktype;return s?JAe(e,i,n,r):s==="group"?ZAe(e,i,n,r):vt("Intersect scene must be mark node or group item.")}function JAe(e,t,n,r){if(ySt(e,t,n)){const i=e.items,s=e.marktype,o=i.length;let a=0;if(s==="group")for(;a<o;++a)ZAe(i[a],t,n,r);else for(const u=ch[s].isect;a<o;++a){const l=i[a];e3e(l,t,u)&&r.push(l)}}return r}function ySt(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function ZAe(e,t,n,r){n&&n(e.mark)&&e3e(e,t,ch.group.isect)&&r.push(e);const i=e.items,s=i&&i.length;if(s){const o=e.x||0,a=e.y||0;t.translate(-o,-a);for(let u=0;u<s;++u)JAe(i[u],t,n,r);t.translate(o,a)}return r}function e3e(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}const TB=new qa;function t3e(e){const t=e.clip;if(Rr(t))t(eI(TB.clear()));else if(t)TB.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(TB)}const vSt=1e-9;function $Q(e,t,n){return e===t?!0:n==="path"?n3e(e,t):e instanceof Date&&t instanceof Date?+e==+t:Ri(e)&&Ri(t)?Math.abs(e-t)<=vSt:!e||!t||!un(e)&&!un(t)?e==t:bSt(e,t)}function n3e(e,t){return $Q(BS(e),BS(t))}function bSt(e,t){var n=Object.keys(e),r=Object.keys(t),i,s;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),s=n.length-1;s>=0;s--)if(n[s]!=r[s])return!1;for(s=n.length-1;s>=0;s--)if(i=n[s],!$Q(e[i],t[i],i))return!1;return typeof e==typeof t}function xSt(){oAe(),Hwt()}const zS="top",u0="left",h0="right",Tb="bottom",_St="top-left",wSt="top-right",ESt="bottom-left",SSt="bottom-right",BQ="start",PV="middle",Yc="end",TSt="x",CSt="y",nL="group",jQ="axis",UQ="title",ASt="frame",kSt="scope",zQ="legend",r3e="row-header",i3e="row-footer",s3e="row-title",o3e="column-header",a3e="column-footer",u3e="column-title",RSt="padding",ISt="symbol",l3e="fit",c3e="fit-x",f3e="fit-y",PSt="pad",VQ="none",i5="all",NV="each",HQ="flush",Vv="column",Hv="row";function d3e(e){pt.call(this,null,e)}en(d3e,pt,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,s=ch[i],o=s.bound;let a=r.bounds,u;if(s.nested)r.items.length&&n.dirty(r.items[0]),a=s5(r,o),r.items.forEach(l=>{l.bounds.clear().union(a)});else if(i===nL||e.modified())switch(t.visit(t.MOD,l=>n.dirty(l)),a.clear(),r.items.forEach(l=>a.union(s5(l,o))),r.role){case jQ:case zQ:case UQ:t.reflow()}else u=t.changed(t.REM),t.visit(t.ADD,l=>{a.union(s5(l,o))}),t.visit(t.MOD,l=>{u=u||a.alignsWith(l.bounds),n.dirty(l),a.union(s5(l,o))}),u&&(a.clear(),r.items.forEach(l=>a.union(l.bounds)));return t3e(r),t.modifies("bounds")}});function s5(e,t,n){return t(e.bounds.clear(),e,n)}const tfe=":vega_identifier:";function qQ(e){pt.call(this,0,e)}qQ.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};en(qQ,pt,{transform(e,t){const n=NSt(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,s=>s[r]=s[r]||++i),n.set(this.value=i),t}});function NSt(e){return e._signals[tfe]||(e._signals[tfe]=e.add(0))}function h3e(e){pt.call(this,null,e)}en(h3e,pt,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,DSt(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===nL?GM:WM;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function DSt(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function p3e(e){pt.call(this,null,e)}const nfe={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!m3e(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},m3e=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),rfe=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,s;n<r;i=s,++n)if(m3e(i,s=e[n].bounds,t))return!0},OSt=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},MSt=(e,t,n)=>{var r=e.range(),i=new qa;return t===zS||t===Tb?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),s=>i.encloses(s.bounds)},ife=e=>(e.forEach(t=>t.opacity=1),e),sfe=(e,t)=>e.reflow(t.modified()).modifies("opacity");en(p3e,pt,{transform(e,t){const n=nfe[e.method]||nfe.parity,r=e.separation||0;let i=t.materialize(t.SOURCE).source,s,o;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(ife(i),t=sfe(t,e)),t;if(i=i.filter(OSt),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),s=ife(i),t=sfe(t,e),s.length>=3&&rfe(s,r)){do s=n(s,r);while(s.length>=3&&rfe(s,r));s.length<3&&!pi(i).opacity&&(s.length>1&&(pi(s).opacity=0),pi(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(o=MSt(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(u=>{o(u)||(u.opacity=0)}));const a=s[0].mark.bounds.clear();return i.forEach(u=>{u.opacity&&a.union(u.bounds)}),t}});function g3e(e){pt.call(this,null,e)}en(g3e,pt,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const Yl=new qa;function DE(e,t,n){return e[t]===n?0:(e[t]=n,1)}function LSt(e){var t=e.items[0].orient;return t===u0||t===h0}function FSt(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function $St(e,t,n,r){var i=t.items[0],s=i.datum,o=i.translate!=null?i.translate:.5,a=i.orient,u=FSt(s),l=i.range,c=i.offset,f=i.position,d=i.minExtent,h=i.maxExtent,p=s.title&&i.items[u[2]].items[0],m=i.titlePadding,g=i.bounds,b=p&&AQ(p),y=0,x=0,w,T;switch(Yl.clear().union(g),g.clear(),(w=u[0])>-1&&g.union(i.items[w].bounds),(w=u[1])>-1&&g.union(i.items[w].bounds),a){case zS:y=f||0,x=-c,T=Math.max(d,Math.min(h,-g.y1)),g.add(0,-T).add(l,0),p&&o5(e,p,T,m,b,0,-1,g);break;case u0:y=-c,x=f||0,T=Math.max(d,Math.min(h,-g.x1)),g.add(-T,0).add(0,l),p&&o5(e,p,T,m,b,1,-1,g);break;case h0:y=n+c,x=f||0,T=Math.max(d,Math.min(h,g.x2)),g.add(0,0).add(T,l),p&&o5(e,p,T,m,b,1,1,g);break;case Tb:y=f||0,x=r+c,T=Math.max(d,Math.min(h,g.y2)),g.add(0,0).add(l,T),p&&o5(e,p,T,m,0,0,1,g);break;default:y=i.x,x=i.y}return D1(g.translate(y,x),i),DE(i,"x",y+o)|DE(i,"y",x+o)&&(i.bounds=Yl,e.dirty(i),i.bounds=g,e.dirty(i)),i.mark.bounds.clear().union(g)}function o5(e,t,n,r,i,s,o,a){const u=t.bounds;if(t.auto){const l=o*(n+i+r);let c=0,f=0;e.dirty(t),s?c=(t.x||0)-(t.x=l):f=(t.y||0)-(t.y=l),t.mark.bounds.clear().union(u.translate(-c,-f)),e.dirty(t)}a.union(u)}const ofe=(e,t)=>Math.floor(Math.min(e,t)),afe=(e,t)=>Math.ceil(Math.max(e,t));function BSt(e){var t=e.items,n=t.length,r=0,i,s;const o={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],s=i.items,i.marktype===nL)switch(i.role){case jQ:case zQ:case UQ:break;case r3e:o.rowheaders.push(...s);break;case i3e:o.rowfooters.push(...s);break;case o3e:o.colheaders.push(...s);break;case a3e:o.colfooters.push(...s);break;case s3e:o.rowtitle=s[0];break;case u3e:o.coltitle=s[0];break;default:o.marks.push(...s)}return o}function jSt(e){return new qa().set(0,0,e.width||0,e.height||0)}function USt(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function ao(e,t,n){const r=un(e)?e[t]:e;return r??(n!==void 0?n:0)}function ufe(e){return e<0?Math.ceil(-e):0}function y3e(e,t,n){var r=!n.nodirty,i=n.bounds===HQ?jSt:USt,s=Yl.set(0,0,0,0),o=ao(n.align,Vv),a=ao(n.align,Hv),u=ao(n.padding,Vv),l=ao(n.padding,Hv),c=n.columns||t.length,f=c<=0?1:Math.ceil(t.length/c),d=t.length,h=Array(d),p=Array(c),m=0,g=Array(d),b=Array(f),y=0,x=Array(d),w=Array(d),T=Array(d),A,k,I,O,M,L,H,D,B,U,G;for(k=0;k<c;++k)p[k]=0;for(k=0;k<f;++k)b[k]=0;for(k=0;k<d;++k)L=t[k],M=T[k]=i(L),L.x=L.x||0,x[k]=0,L.y=L.y||0,w[k]=0,I=k%c,O=~~(k/c),m=Math.max(m,H=Math.ceil(M.x2)),y=Math.max(y,D=Math.ceil(M.y2)),p[I]=Math.max(p[I],H),b[O]=Math.max(b[O],D),h[k]=u+ufe(M.x1),g[k]=l+ufe(M.y1),r&&e.dirty(t[k]);for(k=0;k<d;++k)k%c===0&&(h[k]=0),k<c&&(g[k]=0);if(o===NV)for(I=1;I<c;++I){for(G=0,k=I;k<d;k+=c)G<h[k]&&(G=h[k]);for(k=I;k<d;k+=c)h[k]=G+p[I-1]}else if(o===i5){for(G=0,k=0;k<d;++k)k%c&&G<h[k]&&(G=h[k]);for(k=0;k<d;++k)k%c&&(h[k]=G+m)}else for(o=!1,I=1;I<c;++I)for(k=I;k<d;k+=c)h[k]+=p[I-1];if(a===NV)for(O=1;O<f;++O){for(G=0,k=O*c,A=k+c;k<A;++k)G<g[k]&&(G=g[k]);for(k=O*c;k<A;++k)g[k]=G+b[O-1]}else if(a===i5){for(G=0,k=c;k<d;++k)G<g[k]&&(G=g[k]);for(k=c;k<d;++k)g[k]=G+y}else for(a=!1,O=1;O<f;++O)for(k=O*c,A=k+c;k<A;++k)g[k]+=b[O-1];for(B=0,k=0;k<d;++k)B=h[k]+(k%c?B:0),x[k]+=B-t[k].x;for(I=0;I<c;++I)for(U=0,k=I;k<d;k+=c)U+=g[k],w[k]+=U-t[k].y;if(o&&ao(n.center,Vv)&&f>1)for(k=0;k<d;++k)M=o===i5?m:p[k%c],B=M-T[k].x2-t[k].x-x[k],B>0&&(x[k]+=B/2);if(a&&ao(n.center,Hv)&&c!==1)for(k=0;k<d;++k)M=a===i5?y:b[~~(k/c)],U=M-T[k].y2-t[k].y-w[k],U>0&&(w[k]+=U/2);for(k=0;k<d;++k)s.union(T[k].translate(x[k],w[k]));switch(B=ao(n.anchor,TSt),U=ao(n.anchor,CSt),ao(n.anchor,Vv)){case Yc:B-=s.width();break;case PV:B-=s.width()/2}switch(ao(n.anchor,Hv)){case Yc:U-=s.height();break;case PV:U-=s.height()/2}for(B=Math.round(B),U=Math.round(U),s.clear(),k=0;k<d;++k)t[k].mark.bounds.clear();for(k=0;k<d;++k)L=t[k],L.x+=x[k]+=B,L.y+=w[k]+=U,s.union(L.mark.bounds.union(L.bounds.translate(x[k],w[k]))),r&&e.dirty(L);return s}function zSt(e,t,n){var r=BSt(t),i=r.marks,s=n.bounds===HQ?VSt:HSt,o=n.offset,a=n.columns||i.length,u=a<=0?1:Math.ceil(i.length/a),l=u*a,c,f,d,h,p,m,g;const b=y3e(e,i,n);b.empty()&&b.set(0,0,0,0),r.rowheaders&&(m=ao(n.headerBand,Hv,null),c=a5(e,r.rowheaders,i,a,u,-ao(o,"rowHeader"),ofe,0,s,"x1",0,a,1,m)),r.colheaders&&(m=ao(n.headerBand,Vv,null),f=a5(e,r.colheaders,i,a,a,-ao(o,"columnHeader"),ofe,1,s,"y1",0,1,a,m)),r.rowfooters&&(m=ao(n.footerBand,Hv,null),d=a5(e,r.rowfooters,i,a,u,ao(o,"rowFooter"),afe,0,s,"x2",a-1,a,1,m)),r.colfooters&&(m=ao(n.footerBand,Vv,null),h=a5(e,r.colfooters,i,a,a,ao(o,"columnFooter"),afe,1,s,"y2",l-a,1,a,m)),r.rowtitle&&(p=ao(n.titleAnchor,Hv),g=ao(o,"rowTitle"),g=p===Yc?d+g:c-g,m=ao(n.titleBand,Hv,.5),lfe(e,r.rowtitle,g,0,b,m)),r.coltitle&&(p=ao(n.titleAnchor,Vv),g=ao(o,"columnTitle"),g=p===Yc?h+g:f-g,m=ao(n.titleBand,Vv,.5),lfe(e,r.coltitle,g,1,b,m))}function VSt(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function HSt(e,t){return e.bounds[t]}function a5(e,t,n,r,i,s,o,a,u,l,c,f,d,h){var p=n.length,m=0,g=0,b,y,x,w,T,A,k,I,O;if(!p)return m;for(b=c;b<p;b+=f)n[b]&&(m=o(m,u(n[b],l)));if(!t.length)return m;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),m+=s,y=0,w=t.length;y<w;++y)e.dirty(t[y]),t[y].mark.bounds.clear();for(b=c,y=0,w=t.length;y<w;++y,b+=f){for(A=t[y],T=A.mark.bounds,x=b;x>=0&&(k=n[x])==null;x-=d);a?(I=h==null?k.x:Math.round(k.bounds.x1+h*k.bounds.width()),O=m):(I=m,O=h==null?k.y:Math.round(k.bounds.y1+h*k.bounds.height())),T.union(A.bounds.translate(I-(A.x||0),O-(A.y||0))),A.x=I,A.y=O,e.dirty(A),g=o(g,T[l])}return g}function lfe(e,t,n,r,i,s){if(t){e.dirty(t);var o=n,a=n;r?o=Math.round(i.x1+s*i.width()):a=Math.round(i.y1+s*i.height()),t.bounds.translate(o-(t.x||0),a-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=o,t.y=a,e.dirty(t)}}function qSt(e,t){const n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function WSt(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function GSt(e,t,n,r,i,s,o){const a=qSt(n,t),u=WSt(e,a("offset",0)),l=a("anchor",BQ),c=l===Yc?1:l===PV?.5:0,f={align:NV,bounds:a("bounds",HQ),columns:a("direction")==="vertical"?1:e.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(t){case u0:f.anchor={x:Math.floor(r.x1)-u,column:Yc,y:c*(o||r.height()+2*r.y1),row:l};break;case h0:f.anchor={x:Math.ceil(r.x2)+u,y:c*(o||r.height()+2*r.y1),row:l};break;case zS:f.anchor={y:Math.floor(i.y1)-u,row:Yc,x:c*(s||i.width()+2*i.x1),column:l};break;case Tb:f.anchor={y:Math.ceil(i.y2)+u,x:c*(s||i.width()+2*i.x1),column:l};break;case _St:f.anchor={x:u,y:u};break;case wSt:f.anchor={x:s-u,y:u,column:Yc};break;case ESt:f.anchor={x:u,y:o-u,row:Yc};break;case SSt:f.anchor={x:s-u,y:o-u,column:Yc,row:Yc};break}return f}function YSt(e,t){var n=t.items[0],r=n.datum,i=n.orient,s=n.bounds,o=n.x,a=n.y,u,l;return n._bounds?n._bounds.clear().union(s):n._bounds=s.clone(),s.clear(),XSt(e,n,n.items[0].items[0]),s=KSt(n,s),u=2*n.padding,l=2*n.padding,s.empty()||(u=Math.ceil(s.width()+u),l=Math.ceil(s.height()+l)),r.type===ISt&&QSt(n.items[0].items[0].items[0].items),i!==VQ&&(n.x=o=0,n.y=a=0),n.width=u,n.height=l,D1(s.set(o,a,o+u,a+l),n),n.mark.bounds.clear().union(s),n}function KSt(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function XSt(e,t,n){var r=t.padding,i=r-n.x,s=r-n.y;if(!t.datum.title)(i||s)&&n3(e,n,i,s);else{var o=t.items[1].items[0],a=o.anchor,u=t.titlePadding||0,l=r-o.x,c=r-o.y;switch(o.orient){case u0:i+=Math.ceil(o.bounds.width())+u;break;case h0:case Tb:break;default:s+=o.bounds.height()+u}switch((i||s)&&n3(e,n,i,s),o.orient){case u0:c+=tE(t,n,o,a,1,1);break;case h0:l+=tE(t,n,o,Yc,0,0)+u,c+=tE(t,n,o,a,1,1);break;case Tb:l+=tE(t,n,o,a,0,0),c+=tE(t,n,o,Yc,-1,0,1)+u;break;default:l+=tE(t,n,o,a,0,0)}(l||c)&&n3(e,o,l,c),(l=Math.round(o.bounds.x1-r))<0&&(n3(e,n,-l,0),n3(e,o,-l,0))}}function tE(e,t,n,r,i,s,o){const a=e.datum.type!=="symbol",u=n.datum.vgrad,l=a&&(s||!u)&&!o?t.items[0]:t,c=l.bounds[i?"y2":"x2"]-e.padding,f=u&&s?c:0,d=u&&s?0:c,h=i<=0?0:AQ(n);return Math.round(r===BQ?f:r===Yc?d-h:.5*(c-h))}function n3(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function QSt(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function JSt(e,t,n,r,i){var s=t.items[0],o=s.frame,a=s.orient,u=s.anchor,l=s.offset,c=s.padding,f=s.items[0].items[0],d=s.items[1]&&s.items[1].items[0],h=a===u0||a===h0?r:n,p=0,m=0,g=0,b=0,y=0,x;if(o!==nL?a===u0?(p=i.y2,h=i.y1):a===h0?(p=i.y1,h=i.y2):(p=i.x1,h=i.x2):a===u0&&(p=r,h=0),x=u===BQ?p:u===Yc?h:(p+h)/2,d&&d.text){switch(a){case zS:case Tb:y=f.bounds.height()+c;break;case u0:b=f.bounds.width()+c;break;case h0:b=-f.bounds.width()-c;break}Yl.clear().union(d.bounds),Yl.translate(b-(d.x||0),y-(d.y||0)),DE(d,"x",b)|DE(d,"y",y)&&(e.dirty(d),d.bounds.clear().union(Yl),d.mark.bounds.clear().union(Yl),e.dirty(d)),Yl.clear().union(d.bounds)}else Yl.clear();switch(Yl.union(f.bounds),a){case zS:m=x,g=i.y1-Yl.height()-l;break;case u0:m=i.x1-Yl.width()-l,g=x;break;case h0:m=i.x2+Yl.width()+l,g=x;break;case Tb:m=x,g=i.y2+l;break;default:m=s.x,g=s.y}return DE(s,"x",m)|DE(s,"y",g)&&(Yl.translate(m,g),e.dirty(s),s.bounds.clear().union(Yl),t.bounds.clear().union(Yl),e.dirty(s)),s.bounds}function v3e(e){pt.call(this,null,e)}en(v3e,pt,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&zSt(n,r,e.layout),eTt(n,r,e)}),ZSt(e.mark.group)?t.reflow():t}});function ZSt(e){return e&&e.mark.role!=="legend-entry"}function eTt(e,t,n){var r=t.items,i=Math.max(0,t.width||0),s=Math.max(0,t.height||0),o=new qa().set(0,0,i,s),a=o.clone(),u=o.clone(),l=[],c,f,d,h,p,m;for(p=0,m=r.length;p<m;++p)switch(f=r[p],f.role){case jQ:h=LSt(f)?a:u,h.union($St(e,f,i,s));break;case UQ:c=f;break;case zQ:l.push(YSt(e,f));break;case ASt:case kSt:case r3e:case i3e:case s3e:case o3e:case a3e:case u3e:a.union(f.bounds),u.union(f.bounds);break;default:o.union(f.bounds)}if(l.length){const g={};l.forEach(b=>{d=b.orient||h0,d!==VQ&&(g[d]||(g[d]=[])).push(b)});for(const b in g){const y=g[b];y3e(e,y,GSt(y,b,n.legends,a,u,i,s))}l.forEach(b=>{const y=b.bounds;if(y.equals(b._bounds)||(b.bounds=b._bounds,e.dirty(b),b.bounds=y,e.dirty(b)),n.autosize&&(n.autosize.type===l3e||n.autosize.type===c3e||n.autosize.type===f3e))switch(b.orient){case u0:case h0:o.add(y.x1,0).add(y.x2,0);break;case zS:case Tb:o.add(0,y.y1).add(0,y.y2)}else o.union(y)})}o.union(a).union(u),c&&o.union(JSt(e,c,i,s,o)),t.clip&&o.set(0,0,t.width||0,t.height||0),tTt(e,t,o,n)}function tTt(e,t,n,r){const i=r.autosize||{},s=i.type;if(e._autosize<1||!s)return;let o=e._width,a=e._height,u=Math.max(0,t.width||0),l=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1));const d=Math.max(0,Math.ceil(n.x2-u)),h=Math.max(0,Math.ceil(n.y2-c));if(i.contains===RSt){const p=e.padding();o-=p.left+p.right,a-=p.top+p.bottom}s===VQ?(l=0,f=0,u=o,c=a):s===l3e?(u=Math.max(0,o-l-d),c=Math.max(0,a-f-h)):s===c3e?(u=Math.max(0,o-l-d),a=c+f+h):s===f3e?(o=u+l+d,c=Math.max(0,a-f-h)):s===PSt&&(o=u+l+d,a=c+f+h),e._resizeView(o,a,u,c,[l,f],i.resize)}const nTt=Object.freeze(Object.defineProperty({__proto__:null,bound:d3e,identifier:qQ,mark:h3e,overlap:p3e,render:g3e,viewlayout:v3e},Symbol.toStringTag,{value:"Module"}));function b3e(e){pt.call(this,null,e)}en(b3e,pt,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.scale,o=e.count==null?e.values?e.values.length:10:e.count,a=lQ(s,o,e.minstep),u=e.format||WCe(n,s,a,e.formatSpecifier,e.formatType,!!e.values),l=e.values?qCe(s,e.values,a):cQ(s,a);return i&&(r.rem=i),i=l.map((c,f)=>Vi({index:f/(l.length-1||1),value:c,label:u(c)})),e.extra&&i.length&&i.push(Vi({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function x3e(e){pt.call(this,null,e)}function rTt(){return Vi({})}function iTt(e){const t=QT().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}en(x3e,pt,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||rTt,s=e.key||Ln,o=this.value;return xt(r.encode)&&(r.encode=null),o&&(e.modified("key")||t.modified(s))&&vt("DataJoin does not support modified key function or fields."),o||(t=t.addAll(),this.value=o=iTt(s)),t.visit(t.ADD,a=>{const u=s(a);let l=o.get(u);l?l.exit?(o.empty--,r.add.push(l)):r.mod.push(l):(l=i(a),o.set(u,l),r.add.push(l)),l.datum=a,l.exit=!1}),t.visit(t.MOD,a=>{const u=s(a),l=o.get(u);l&&(l.datum=a,r.mod.push(l))}),t.visit(t.REM,a=>{const u=s(a),l=o.get(u);a===l.datum&&!l.exit&&(r.rem.push(l),l.exit=!0,++o.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&o.empty>n.cleanThreshold)&&n.runAfter(o.clean),r}});function _3e(e){pt.call(this,null,e)}en(_3e,pt,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,s=t.encode;if(xt(s))if(n.changed()||s.every(f=>i[f]))s=s[0],n.encode=null;else return t.StopPropagation;var o=s==="enter",a=i.update||xv,u=i.enter||xv,l=i.exit||xv,c=(s&&!o?i[s]:a)||xv;if(t.changed(t.ADD)&&(t.visit(t.ADD,f=>{u(f,e),a(f,e)}),n.modifies(u.output),n.modifies(a.output),c!==xv&&c!==a&&(t.visit(t.ADD,f=>{c(f,e)}),n.modifies(c.output))),t.changed(t.REM)&&l!==xv&&(t.visit(t.REM,f=>{l(f,e)}),n.modifies(l.output)),o||c!==xv){const f=t.MOD|(e.modified()?t.REFLOW:0);o?(t.visit(f,d=>{const h=u(d,e)||r;(c(d,e)||h)&&n.mod.push(d)}),n.mod.length&&n.modifies(u.output)):t.visit(f,d=>{(c(d,e)||r)&&n.mod.push(d)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}});function w3e(e){pt.call(this,[],e)}en(w3e,pt,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.type||k8,o=e.scale,a=+e.limit,u=lQ(o,e.count==null?5:e.count,e.minstep),l=!!e.values||s===k8,c=e.format||XCe(n,o,u,s,e.formatSpecifier,e.formatType,l),f=e.values||KCe(o,u),d,h,p,m,g;return i&&(r.rem=i),s===k8?(a&&f.length>a?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=f.slice(0,a-1),g=!0):i=f,Rr(p=e.size)?(!e.values&&o(i[0])===0&&(i=i.slice(1)),m=i.reduce((b,y)=>Math.max(b,p(y,e)),0)):p=dc(m=p||8),i=i.map((b,y)=>Vi({index:y,label:c(b,y,i),value:b,offset:m,size:p(b,e)})),g&&(g=f[i.length],i.push(Vi({index:i.length,label:`${f.length-i.length} entries`,value:g,offset:m,size:p(g,e)})))):s===Pwt?(d=o.domain(),h=zCe(o,d[0],pi(d)),f.length<3&&!e.values&&d[0]!==pi(d)&&(f=[d[0],pi(d)]),i=f.map((b,y)=>Vi({index:y,label:c(b,y,f),value:b,perc:h(b)}))):(p=f.length-1,h=zwt(o),i=f.map((b,y)=>Vi({index:y,label:c(b,y,f),value:b,perc:y?h(b):0,perc2:y===p?1:h(f[y+1])}))),r.source=i,r.add=i,this.value=i,r}});const sTt=e=>e.source.x,oTt=e=>e.source.y,aTt=e=>e.target.x,uTt=e=>e.target.y;function WQ(e){pt.call(this,{},e)}WQ.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};en(WQ,pt,{transform(e,t){var n=e.sourceX||sTt,r=e.sourceY||oTt,i=e.targetX||aTt,s=e.targetY||uTt,o=e.as||"path",a=e.orient||"vertical",u=e.shape||"line",l=cfe.get(u+"-"+a)||cfe.get(u);return l||vt("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,c=>{c[o]=l(n(c),r(c),i(c),s(c))}),t.reflow(e.modified()).modifies(o)}});const E3e=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,lTt=(e,t,n,r)=>E3e(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),S3e=(e,t,n,r)=>{var i=n-e,s=r-t,o=Math.hypot(i,s)/2,a=180*Math.atan2(s,i)/Math.PI;return"M"+e+","+t+"A"+o+","+o+" "+a+" 0 1 "+n+","+r},cTt=(e,t,n,r)=>S3e(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),T3e=(e,t,n,r)=>{const i=n-e,s=r-t,o=.2*(i+s),a=.2*(s-i);return"M"+e+","+t+"C"+(e+o)+","+(t+a)+" "+(n+a)+","+(r-o)+" "+n+","+r},fTt=(e,t,n,r)=>T3e(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),dTt=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,hTt=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,pTt=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*s+"A"+t+","+t+" 0 0,"+(u?1:0)+" "+t*o+","+t*a+"L"+r*o+","+r*a},mTt=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},gTt=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},yTt=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=(t+r)/2;return"M"+t*i+","+t*s+"C"+u*i+","+u*s+" "+u*o+","+u*a+" "+r*o+","+r*a},cfe=QT({line:E3e,"line-radial":lTt,arc:S3e,"arc-radial":cTt,curve:T3e,"curve-radial":fTt,"orthogonal-horizontal":dTt,"orthogonal-vertical":hTt,"orthogonal-radial":pTt,"diagonal-horizontal":mTt,"diagonal-vertical":gTt,"diagonal-radial":yTt});function GQ(e){pt.call(this,null,e)}GQ.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};en(GQ,pt,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],s=e.field||YT,o=e.startAngle||0,a=e.endAngle!=null?e.endAngle:2*Math.PI,u=t.source,l=u.map(s),c=l.length,f=o,d=(a-o)/Pwe(l),h=Gd(c),p,m,g;for(e.sort&&h.sort((b,y)=>l[b]-l[y]),p=0;p<c;++p)g=l[h[p]],m=u[h[p]],m[r]=f,m[i]=f+=g*d;return this.value=l,t.reflow(e.modified()).modifies(n)}});const vTt=5;function bTt(e){const t=e.type;return!e.bins&&(t===LS||t===GR||t===YR)}function C3e(e){return oQ(e)&&e!==Wm}const xTt=A0(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function A3e(e){pt.call(this,null,e),this.modified(!0)}en(A3e,pt,{transform(e,t){var n=t.dataflow,r=this.value,i=_Tt(e);(!r||i!==r.type)&&(this.value=r=Ii(i)());for(i in e)if(!xTt[i]){if(i==="padding"&&C3e(r.type))continue;Rr(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return ATt(r,e,CTt(r,e,ETt(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function _Tt(e){var t=e.type,n="",r;return t===Wm?Wm+"-"+LS:(wTt(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?Wm+"-":r===3?tC+"-":""),(n+t||LS).toLowerCase())}function wTt(e){const t=e.type;return oQ(t)&&t!==nw&&t!==rw&&(e.scheme||e.range&&e.range.length&&e.range.every(cn))}function ETt(e,t,n){const r=STt(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,s=e.type,o=t.zero||t.zero===void 0&&bTt(e),a,u;if(!i)return 0;if((o||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(a=(i=i.slice()).length-1||1,o&&(i[0]>0&&(i[0]=0),i[a]<0&&(i[a]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[a]=t.domainMax),t.domainMid!=null)){u=t.domainMid;const l=u>i[a]?a+1:u<i[0]?0:a;l!==a&&n.warn("Scale domainMid exceeds domain min or max.",u),i.splice(l,0,u)}return C3e(s)&&t.padding&&i[0]!==pi(i)&&(i=TTt(s,i,t.range,t.padding,t.exponent,t.constant)),e.domain(k3e(s,i,n)),s===nQ&&e.unknown(t.domainImplicit?Jz:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&lQ(e,t.nice)||null),i.length}function STt(e,t,n){return t?(e.domain(k3e(e.type,t,n)),t.length):-1}function TTt(e,t,n,r,i,s){var o=Math.abs(pi(n)-n[0]),a=o/(o-2*r),u=e===_1?KK(t,null,a):e===YR?kD(t,null,a,.5):e===GR?kD(t,null,a,i||1):e===UM?XK(t,null,a,s||1):YK(t,null,a);return t=t.slice(),t[0]=u[0],t[t.length-1]=u[1],t}function k3e(e,t,n){if(FCe(e)){var r=Math.abs(t.reduce((i,s)=>i+(s<0?-1:s>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+Jt(t))}return t}function CTt(e,t,n){let r=t.bins;if(r&&!xt(r)){const i=e.domain(),s=i[0],o=pi(i),a=r.step;let u=r.start==null?s:r.start,l=r.stop==null?o:r.stop;a||vt("Scale bins parameter missing step property."),u<s&&(u=a*Math.ceil(s/a)),l>o&&(l=a*Math.floor(o/a)),r=Gd(u,l+a/2,a)}return r?e.bins=r:e.bins&&delete e.bins,e.type===rQ&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function ATt(e,t,n){var r=e.type,i=t.round||!1,s=t.range;if(t.rangeStep!=null)s=kTt(r,t,n);else if(t.scheme&&(s=RTt(r,t,n),Rr(s))){if(e.interpolator)return e.interpolator(s);vt(`Scale type ${r} does not support interpolating color schemes.`)}if(s&&$Ce(r))return e.interpolator(HM(DV(s,t.reverse),t.interpolate,t.interpolateGamma));s&&t.interpolate&&e.interpolate?e.interpolate(aQ(t.interpolate,t.interpolateGamma)):Rr(e.round)?e.round(i):Rr(e.rangeRound)&&e.interpolate(i?LR:Qb),s&&e.range(DV(s,t.reverse))}function kTt(e,t,n){e!==PCe&&e!==vV&&vt("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===vV?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*tQ(n,i,r)]}function RTt(e,t,n){var r=t.schemeExtent,i,s;return xt(t.scheme)?s=HM(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),s=uQ(i),s||vt(`Unrecognized scheme name: ${t.scheme}`)),n=e===VM?n+1:e===rQ?n-1:e===FS||e===zM?+t.schemeCount||vTt:n,$Ce(e)?ffe(s,r,t.reverse):Rr(s)?UCe(ffe(s,r),n):e===nQ?s:s.slice(0,n)}function ffe(e,t,n){return Rr(e)&&(t||n)?jCe(e,DV(t||[0,1],n)):e}function DV(e,t){return t?e.slice().reverse():e}function R3e(e){pt.call(this,null,e)}en(R3e,pt,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(Ww(e.sort)),this.modified(n),t}});const dfe="zero",I3e="center",P3e="normalize",N3e=["y0","y1"];function YQ(e){pt.call(this,null,e)}YQ.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:dfe,values:[dfe,I3e,P3e]},{name:"as",type:"string",array:!0,length:2,default:N3e}]};en(YQ,pt,{transform(e,t){var n=e.as||N3e,r=n[0],i=n[1],s=Ww(e.sort),o=e.field||YT,a=e.offset===I3e?ITt:e.offset===P3e?PTt:NTt,u,l,c,f;for(u=DTt(t.source,e.groupby,s,o),l=0,c=u.length,f=u.max;l<c;++l)a(u[l],f,o,r,i);return t.reflow(e.modified()).modifies(n)}});function ITt(e,t,n,r,i){for(var s=(t-e.sum)/2,o=e.length,a=0,u;a<o;++a)u=e[a],u[r]=s,u[i]=s+=Math.abs(n(u))}function PTt(e,t,n,r,i){for(var s=1/e.sum,o=0,a=e.length,u=0,l=0,c;u<a;++u)c=e[u],c[r]=o,c[i]=o=s*(l+=Math.abs(n(c)))}function NTt(e,t,n,r,i){for(var s=0,o=0,a=e.length,u=0,l,c;u<a;++u)c=e[u],l=+n(c),l<0?(c[r]=o,c[i]=o+=l):(c[r]=s,c[i]=s+=l)}function DTt(e,t,n,r){var i=[],s=m=>m(c),o,a,u,l,c,f,d,h,p;if(t==null)i.push(e.slice());else for(o={},a=0,u=e.length;a<u;++a)c=e[a],f=t.map(s),d=o[f],d||(o[f]=d=[],i.push(d)),d.push(c);for(f=0,p=0,l=i.length;f<l;++f){for(d=i[f],a=0,h=0,u=d.length;a<u;++a)h+=Math.abs(r(d[a]));d.sum=h,h>p&&(p=h),n&&d.sort(n)}return i.max=p,i}const OTt=Object.freeze(Object.defineProperty({__proto__:null,axisticks:b3e,datajoin:x3e,encode:_3e,legendentries:w3e,linkpath:WQ,pie:GQ,scale:A3e,sortitems:R3e,stack:YQ},Symbol.toStringTag,{value:"Module"}));var MTt=Math.abs,OV=Math.cos,qD=Math.sin,LTt=1e-6,D3e=Math.PI,MV=D3e/2,hfe=FTt(2);function pfe(e){return e>1?MV:e<-1?-MV:Math.asin(e)}function FTt(e){return e>0?Math.sqrt(e):0}function $Tt(e,t){var n=e*qD(t),r=30,i;do t-=i=(t+qD(t)-n)/(1+OV(t));while(MTt(i)>LTt&&--r>0);return t/2}function BTt(e,t,n){function r(i,s){return[e*i*OV(s=$Tt(n,s)),t*qD(s)]}return r.invert=function(i,s){return s=pfe(s/t),[i/(e*OV(s)),pfe((2*s+qD(2*s))/n)]},r}var jTt=BTt(hfe/MV,hfe,D3e);function UTt(){return Eg(jTt).scale(169.529)}const zTt=sEe(),LV=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function VTt(e,t){return function n(){const r=t();return r.type=e,r.path=sEe().projection(r),r.copy=r.copy||function(){const i=n();return LV.forEach(s=>{r[s]&&i[s](r[s]())}),i.path.pointRadius(r.path.pointRadius()),i},MCe(r)}}function KQ(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(WD[e]=VTt(e,t),this):WD[e]||null}function O3e(e){return e&&e.path||zTt}const WD={albers:aEe,albersusa:c0t,azimuthalequalarea:f0t,azimuthalequidistant:d0t,conicconformal:m0t,conicequalarea:mD,conicequidistant:v0t,equalEarth:x0t,equirectangular:g0t,gnomonic:_0t,identity:w0t,mercator:h0t,mollweide:UTt,naturalEarth1:E0t,orthographic:S0t,stereographic:T0t,transversemercator:C0t};for(const e in WD)KQ(e,WD[e]);function HTt(){}const xy=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function M3e(){var e=1,t=1,n=a;function r(u,l){return l.map(c=>i(u,c))}function i(u,l){var c=[],f=[];return s(u,l,d=>{n(d,u,l),qTt(d)>0?c.push([d]):f.push(d)}),f.forEach(d=>{for(var h=0,p=c.length,m;h<p;++h)if(WTt((m=c[h])[0],d)!==-1){m.push(d);return}}),{type:"MultiPolygon",value:l,coordinates:c}}function s(u,l,c){var f=[],d=[],h,p,m,g,b,y;for(h=p=-1,g=u[0]>=l,xy[g<<1].forEach(x);++h<e-1;)m=g,g=u[h+1]>=l,xy[m|g<<1].forEach(x);for(xy[g<<0].forEach(x);++p<t-1;){for(h=-1,g=u[p*e+e]>=l,b=u[p*e]>=l,xy[g<<1|b<<2].forEach(x);++h<e-1;)m=g,g=u[p*e+e+h+1]>=l,y=b,b=u[p*e+h+1]>=l,xy[m|g<<1|b<<2|y<<3].forEach(x);xy[g|b<<3].forEach(x)}for(h=-1,b=u[p*e]>=l,xy[b<<2].forEach(x);++h<e-1;)y=b,b=u[p*e+h+1]>=l,xy[b<<2|y<<3].forEach(x);xy[b<<3].forEach(x);function x(w){var T=[w[0][0]+h,w[0][1]+p],A=[w[1][0]+h,w[1][1]+p],k=o(T),I=o(A),O,M;(O=d[k])?(M=f[I])?(delete d[O.end],delete f[M.start],O===M?(O.ring.push(A),c(O.ring)):f[O.start]=d[M.end]={start:O.start,end:M.end,ring:O.ring.concat(M.ring)}):(delete d[O.end],O.ring.push(A),d[O.end=I]=O):(O=f[I])?(M=d[k])?(delete f[O.start],delete d[M.end],O===M?(O.ring.push(A),c(O.ring)):f[M.start]=d[O.end]={start:M.start,end:O.end,ring:M.ring.concat(O.ring)}):(delete f[O.start],O.ring.unshift(T),f[O.start=k]=O):f[k]=d[I]={start:k,end:I,ring:[T,A]}}}function o(u){return u[0]*2+u[1]*(e+1)*4}function a(u,l,c){u.forEach(f=>{var d=f[0],h=f[1],p=d|0,m=h|0,g,b=l[m*e+p];d>0&&d<e&&p===d&&(g=l[m*e+p-1],f[0]=d+(c-g)/(b-g)-.5),h>0&&h<t&&m===h&&(g=l[(m-1)*e+p],f[1]=h+(c-g)/(b-g)-.5)})}return r.contour=i,r.size=function(u){if(!arguments.length)return[e,t];var l=Math.floor(u[0]),c=Math.floor(u[1]);return l>=0&&c>=0||vt("invalid size"),e=l,t=c,r},r.smooth=function(u){return arguments.length?(n=u?a:HTt,r):n===a},r}function qTt(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function WTt(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=GTt(e,t[n]))return i;return 0}function GTt(e,t){for(var n=t[0],r=t[1],i=-1,s=0,o=e.length,a=o-1;s<o;a=s++){var u=e[s],l=u[0],c=u[1],f=e[a],d=f[0],h=f[1];if(YTt(u,f,t))return 0;c>r!=h>r&&n<(d-l)*(r-c)/(h-c)+l&&(i=-i)}return i}function YTt(e,t,n){var r;return KTt(e,t,n)&&XTt(e[r=+(e[0]===t[0])],n[r],t[r])}function KTt(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function XTt(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function L3e(e,t,n){return function(r){var i=fg(r),s=n?Math.min(i[0],0):i[0],o=i[1],a=o-s,u=t?vb(s,o,e):a/(e+1);return Gd(s+u,o,u)}}function XQ(e){pt.call(this,null,e)}XQ.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};en(XQ,pt,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||fc,s=M3e().smooth(e.smooth!==!1),o=e.thresholds||QTt(r,i,e),a=e.as===null?null:e.as||"contour",u=[];return r.forEach(l=>{const c=i(l),f=s.size([c.width,c.height])(c.values,xt(o)?o:o(c.values));JTt(f,c,l,e),f.forEach(d=>{u.push(NM(l,Vi(a!=null?{[a]:d}:d)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function QTt(e,t,n){const r=L3e(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>N_(t(i).values)))}function JTt(e,t,n,r){let i=r.scale||t.scale,s=r.translate||t.translate;if(Rr(i)&&(i=i(n,r)),Rr(s)&&(s=s(n,r)),(i===1||i==null)&&!s)return;const o=(Ri(i)?i:i[0])||1,a=(Ri(i)?i:i[1])||1,u=s&&s[0]||0,l=s&&s[1]||0;e.forEach(F3e(t,o,a,u,l))}function F3e(e,t,n,r,i){const s=e.x1||0,o=e.y1||0,a=t*n<0;function u(f){f.forEach(l)}function l(f){a&&f.reverse(),f.forEach(c)}function c(f){f[0]=(f[0]-s)*t+r,f[1]=(f[1]-o)*n+i}return function(f){return f.coordinates.forEach(u),f}}function mfe(e,t,n){const r=e>=0?e:mX(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function CB(e){return Rr(e)?e:dc(+e)}function $3e(){var e=u=>u[0],t=u=>u[1],n=YT,r=[-1,-1],i=960,s=500,o=2;function a(u,l){const c=mfe(r[0],u,e)>>o,f=mfe(r[1],u,t)>>o,d=c?c+2:0,h=f?f+2:0,p=2*d+(i>>o),m=2*h+(s>>o),g=new Float32Array(p*m),b=new Float32Array(p*m);let y=g;u.forEach(w=>{const T=d+(+e(w)>>o),A=h+(+t(w)>>o);T>=0&&T<p&&A>=0&&A<m&&(g[T+A*p]+=+n(w))}),c>0&&f>0?(nE(p,m,g,b,c),rE(p,m,b,g,f),nE(p,m,g,b,c),rE(p,m,b,g,f),nE(p,m,g,b,c),rE(p,m,b,g,f)):c>0?(nE(p,m,g,b,c),nE(p,m,b,g,c),nE(p,m,g,b,c),y=b):f>0&&(rE(p,m,g,b,f),rE(p,m,b,g,f),rE(p,m,g,b,f),y=b);const x=l?Math.pow(2,-2*o):1/Pwe(y);for(let w=0,T=p*m;w<T;++w)y[w]*=x;return{values:y,scale:1<<o,width:p,height:m,x1:d,y1:h,x2:d+(i>>o),y2:h+(s>>o)}}return a.x=function(u){return arguments.length?(e=CB(u),a):e},a.y=function(u){return arguments.length?(t=CB(u),a):t},a.weight=function(u){return arguments.length?(n=CB(u),a):n},a.size=function(u){if(!arguments.length)return[i,s];var l=+u[0],c=+u[1];return l>=0&&c>=0||vt("invalid size"),i=l,s=c,a},a.cellSize=function(u){return arguments.length?((u=+u)>=1||vt("invalid cell size"),o=Math.floor(Math.log(u)/Math.LN2),a):1<<o},a.bandwidth=function(u){return arguments.length?(u=ln(u),u.length===1&&(u=[+u[0],+u[0]]),u.length!==2&&vt("invalid bandwidth"),r=u,a):r},a}function nE(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<t;++o)for(let a=0,u=0;a<e+i;++a)a<e&&(u+=n[a+o*e]),a>=i&&(a>=s&&(u-=n[a-s+o*e]),r[a-i+o*e]=u/Math.min(a+1,e-1+s-a,s))}function rE(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<e;++o)for(let a=0,u=0;a<t+i;++a)a<t&&(u+=n[o+a*e]),a>=i&&(a>=s&&(u-=n[o+(a-s)*e]),r[o+(a-i)*e]=u/Math.min(a+1,t-1+s-a,s))}function QQ(e){pt.call(this,null,e)}QQ.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const ZTt=["x","y","weight","size","cellSize","bandwidth"];function B3e(e,t){return ZTt.forEach(n=>t[n]!=null?e[n](t[n]):0),e}en(QQ,pt,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=eCt(r,e.groupby),s=(e.groupby||[]).map(Wo),o=B3e($3e(),e),a=e.as||"grid",u=[];function l(c,f){for(let d=0;d<s.length;++d)c[s[d]]=f[d];return c}return u=i.map(c=>Vi(l({[a]:o(c,e.counts)},c.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function eCt(e,t){var n=[],r=c=>c(a),i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function JQ(e){pt.call(this,null,e)}JQ.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};en(JQ,pt,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=M3e().smooth(e.smooth!==!1),i=e.values,s=e.thresholds||L3e(e.count||10,e.nice,!!i),o=e.size,a,u;return i||(i=t.materialize(t.SOURCE).source,a=B3e($3e(),e)(i,!0),u=F3e(a,a.scale||1,a.scale||1,0,0),o=[a.width,a.height],i=a.values),s=xt(s)?s:s(i),i=r.size(o)(i,s),u&&i.forEach(u),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(Vi),n}});const FV="Feature",ZQ="FeatureCollection",tCt="MultiPoint";function eJ(e){pt.call(this,null,e)}eJ.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};en(eJ,pt,{transform(e,t){var n=this._features,r=this._points,i=e.fields,s=i&&i[0],o=i&&i[1],a=e.geojson||!i&&fc,u=t.ADD,l;l=e.modified()||t.changed(t.REM)||t.modified(sc(a))||s&&t.modified(sc(s))||o&&t.modified(sc(o)),(!this.value||l)&&(u=t.SOURCE,this._features=n=[],this._points=r=[]),a&&t.visit(u,c=>n.push(a(c))),s&&o&&(t.visit(u,c=>{var f=s(c),d=o(c);f!=null&&d!=null&&(f=+f)===f&&(d=+d)===d&&r.push([f,d])}),n=n.concat({type:FV,geometry:{type:tCt,coordinates:r}})),this.value={type:ZQ,features:n}}});function tJ(e){pt.call(this,null,e)}tJ.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};en(tJ,pt,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||fc,s=e.as||"path",o=n.SOURCE;!r||e.modified()?(this.value=r=O3e(e.projection),n.materialize().reflow()):o=i===fc||t.modified(i.fields)?n.ADD_MOD:n.ADD;const a=nCt(r,e.pointRadius);return n.visit(o,u=>u[s]=r(i(u))),r.pointRadius(a),n.modifies(s)}});function nCt(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function nJ(e){pt.call(this,null,e)}nJ.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};en(nJ,pt,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],s=e.as||["x","y"],o=s[0],a=s[1],u;function l(c){const f=n([r(c),i(c)]);f?(c[o]=f[0],c[a]=f[1]):(c[o]=void 0,c[a]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,l):(u=t.modified(r.fields)||t.modified(i.fields),t.visit(u?t.ADD_MOD:t.ADD,l)),t.modifies(s)}});function rJ(e){pt.call(this,null,e)}rJ.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};en(rJ,pt,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",s=n.ADD;return(!r||e.modified())&&(this.value=r=rCt(O3e(e.projection),e.field||Zh("datum"),e.pointRadius),n.materialize().reflow(),s=n.SOURCE),n.visit(s,o=>o[i]=r),n.modifies(i)}});function rCt(e,t,n){const r=n==null?i=>e(t(i)):i=>{var s=e.pointRadius(),o=e.pointRadius(n)(t(i));return e.pointRadius(s),o};return r.context=i=>(e.context(i),r),r}function iJ(e){pt.call(this,[],e),this.generator=Vpt()}iJ.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};en(iJ,pt,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(const s in e)Rr(r[s])&&r[s](e[s]);return i=r(),n.length?t.mod.push(BTe(n[0],i)):t.add.push(Vi(i)),n[0]=i,t}});function sJ(e){pt.call(this,null,e)}sJ.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};en(sJ,pt,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||fc,s=sCt(e.opacity,e),o=iCt(e.color,e),a=e.as||"image",u={$x:0,$y:0,$value:0,$max:r?N_(n.map(l=>N_(i(l).values))):0};return n.forEach(l=>{const c=i(l),f=kr({},l,u);r||(f.$max=N_(c.values||[])),l[a]=oCt(c,f,o.dep?o:dc(o(f)),s.dep?s:dc(s(f)))}),t.reflow(!0).modifies(a)}});function iCt(e,t){let n;return Rr(e)?(n=r=>bb(e(r,t)),n.dep=j3e(e)):n=dc(bb(e||"#888")),n}function sCt(e,t){let n;return Rr(e)?(n=r=>e(r,t),n.dep=j3e(e)):e?n=dc(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function j3e(e){if(!Rr(e))return!1;const t=A0(sc(e));return t.$x||t.$y||t.$value||t.$max}function oCt(e,t,n,r){const i=e.width,s=e.height,o=e.x1||0,a=e.y1||0,u=e.x2||i,l=e.y2||s,c=e.values,f=c?g=>c[g]:Mv,d=nb(u-o,l-a),h=d.getContext("2d"),p=h.getImageData(0,0,u-o,l-a),m=p.data;for(let g=a,b=0;g<l;++g){t.$y=g-a;for(let y=o,x=g*i;y<u;++y,b+=4){t.$x=y-o,t.$value=f(y+x);const w=n(t);m[b+0]=w.r,m[b+1]=w.g,m[b+2]=w.b,m[b+3]=~~(255*r(t))}}return h.putImageData(p,0,0),d}function U3e(e){pt.call(this,null,e),this.modified(!0)}en(U3e,pt,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=uCt(e.type),LV.forEach(r=>{e[r]!=null&&gfe(n,r,e[r])})):LV.forEach(r=>{e.modified(r)&&gfe(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&aCt(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function aCt(e,t){const n=lCt(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function uCt(e){const t=KQ((e||"mercator").toLowerCase());return t||vt("Unrecognized projection type: "+e),t()}function gfe(e,t,n){Rr(e[t])&&e[t](n)}function lCt(e){return e=ln(e),e.length===1?e[0]:{type:ZQ,features:e.reduce((t,n)=>t.concat(cCt(n)),[])}}function cCt(e){return e.type===ZQ?e.features:ln(e).filter(t=>t!=null).map(t=>t.type===FV?t:{type:FV,geometry:t})}const fCt=Object.freeze(Object.defineProperty({__proto__:null,contour:JQ,geojson:eJ,geopath:tJ,geopoint:nJ,geoshape:rJ,graticule:iJ,heatmap:sJ,isocontour:XQ,kde2d:QQ,projection:U3e},Symbol.toStringTag,{value:"Module"})),yfe={center:Dht,collide:Jht,nbody:lpt,link:ept,x:cpt,y:fpt},X3="forces",$V=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],dCt=["static","iterations"],z3e=["x","y","vx","vy"];function oJ(e){pt.call(this,null,e)}oJ.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:z3e}]};en(oJ,pt,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified($V),s=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&V3e(n,e,0,t)):(this.value=n=pCt(t.source,e),n.on("tick",hCt(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(dCt)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/s)),e.static)for(n.stop();--s>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let a=this._argops,u=0,l=a.length,c;u<l;++u)if(c=a[u],!(c.name!==X3||c.op._argval.force!=="link")){for(var r=c.op._argops,i=0,s=r.length,o;i<s;++i)if(r[i].name==="links"&&(o=r[i].op.source)){n.pulse(o,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(z3e)}});function hCt(e,t){return()=>e.touch(t).run()}function pCt(e,t){const n=upt(e),r=n.stop,i=n.restart;let s=!1;return n.stopped=()=>s,n.restart=()=>(s=!1,i()),n.stop=()=>(s=!0,r()),V3e(n,t,!0).on("end",()=>s=!0)}function V3e(e,t,n,r){var i=ln(t.forces),s,o,a,u;for(s=0,o=$V.length;s<o;++s)a=$V[s],a!==X3&&t.modified(a)&&e[a](t[a]);for(s=0,o=i.length;s<o;++s)u=X3+s,a=n||t.modified(X3,s)?gCt(i[s]):r&&mCt(i[s],r)?e.force(u):null,a&&e.force(u,a);for(o=e.numForces||0;s<o;++s)e.force(X3+s,null);return e.numForces=i.length,e}function mCt(e,t){var n,r;for(n in e)if(Rr(r=e[n])&&t.modified(sc(r)))return 1;return 0}function gCt(e){var t,n;gn(yfe,e.force)||vt("Unrecognized force: "+e.force),t=yfe[e.force]();for(n in e)Rr(t[n])&&yCt(t[n],e[n],e);return t}function yCt(e,t,n){e(Rr(t)?r=>t(r,n):t)}const vCt=Object.freeze(Object.defineProperty({__proto__:null,force:oJ},Symbol.toStringTag,{value:"Module"}));function BV(e,t,n){const r={};return e.each(i=>{const s=i.data;n(s)&&(r[t(s)]=i)}),e.lookup=r,e}function aJ(e){pt.call(this,null,e)}aJ.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const bCt=e=>e.values;en(aJ,pt,{transform(e,t){t.source||vt("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),s=this.value;return(!s||r||t.changed())&&(s&&s.each(o=>{o.children&&PM(o.data)&&i.rem.push(o.data)}),this.value=s=vK({values:ln(e.keys).reduce((o,a)=>(o.key(a),o),xCt()).entries(i.source)},bCt),n&&s.each(o=>{o.children&&(o=Vi(o.data),i.add.push(o),i.source.push(o))}),BV(s,Ln,Ln)),i.source.root=s,i}});function xCt(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,s){if(s>=e.length)return i;const o=i.length,a=e[s++],u={},l={};let c=-1,f,d,h;for(;++c<o;)f=a(d=i[c])+"",(h=u[f])?h.push(d):u[f]=[d];for(f in u)l[f]=n(u[f],s);return l}function r(i,s){if(++s>e.length)return i;const o=[];for(const a in i)o.push({key:a,values:r(i[a],s)});return o}return t}function O1(e){pt.call(this,null,e)}const _Ct=(e,t)=>e.parent===t.parent?1:2;en(O1,pt,{transform(e,t){(!t.source||!t.source.root)&&vt(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,s=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(Ww(e.sort,o=>o.data)),wCt(n,this.params,e),n.separation&&n.separation(e.separation!==!1?_Ct:YT);try{this.value=n(i)}catch(o){vt(o)}return i.each(o=>ECt(o,r,s)),t.reflow(e.modified()).modifies(s).modifies("leaf")}});function wCt(e,t,n){for(let r,i=0,s=t.length;i<s;++i)r=t[i],r in n&&e[r](n[r])}function ECt(e,t,n){const r=e.data,i=t.length-1;for(let s=0;s<i;++s)r[n[s]]=e[t[s]];r[n[i]]=e.children?e.children.length:0}const jV=["x","y","r","depth","children"];function uJ(e){O1.call(this,e)}uJ.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:jV.length,default:jV}]};en(uJ,O1,{layout:fmt,params:["radius","size","padding"],fields:jV});const UV=["x0","y0","x1","y1","depth","children"];function lJ(e){O1.call(this,e)}lJ.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:UV.length,default:UV}]};en(lJ,O1,{layout:dmt,params:["size","round","padding"],fields:UV});function cJ(e){pt.call(this,null,e)}cJ.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};en(cJ,pt,{transform(e,t){t.source||vt("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),s=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),s&&(n=i.source.length?BV(aue().id(e.key).parentId(e.parentKey)(i.source),e.key,ep):BV(aue()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const vfe={tidy:wmt,cluster:O0t},zV=["x","y","depth","children"];function fJ(e){O1.call(this,e)}fJ.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:zV.length,default:zV}]};en(fJ,O1,{layout(e){const t=e||"tidy";if(gn(vfe,t))return vfe[t]();vt("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:zV});function dJ(e){pt.call(this,[],e)}dJ.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};en(dJ,pt,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),s={};return r||vt("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,o=>s[Ln(o)]=1),r.each(o=>{const a=o.data,u=o.parent&&o.parent.data;u&&s[Ln(a)]&&s[Ln(u)]&&i.add.push(Vi({source:u,target:a}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,o=>s[Ln(o)]=1),n.forEach(o=>{(s[Ln(o.source)]||s[Ln(o.target)])&&i.mod.push(o)})),i}});const bfe={binary:Smt,dice:jR,slice:lM,slicedice:Tmt,squarify:TEe,resquarify:Cmt},VV=["x0","y0","x1","y1","depth","children"];function hJ(e){O1.call(this,e)}hJ.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:VV.length,default:VV}]};en(hJ,O1,{layout(){const e=Emt();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{gn(bfe,t)?e.tile(bfe[t]):vt("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:VV});const SCt=Object.freeze(Object.defineProperty({__proto__:null,nest:aJ,pack:uJ,partition:lJ,stratify:cJ,tree:fJ,treelinks:dJ,treemap:hJ},Symbol.toStringTag,{value:"Module"})),AB=4278190080;function TCt(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function CCt(e,t,n,r,i){const s=e.width,o=e.height,a=r||i,u=nb(s,o).getContext("2d"),l=nb(s,o).getContext("2d"),c=a&&nb(s,o).getContext("2d");n.forEach(I=>F8(u,I,!1)),F8(l,t,!1),a&&F8(c,t,!0);const f=kB(u,s,o),d=kB(l,s,o),h=a&&kB(c,s,o),p=e.bitmap(),m=a&&e.bitmap();let g,b,y,x,w,T,A,k;for(b=0;b<o;++b)for(g=0;g<s;++g)w=b*s+g,T=f[w]&AB,k=d[w]&AB,A=a&&h[w]&AB,(T||A||k)&&(y=e(g),x=e(b),!i&&(T||k)&&p.set(y,x),a&&(T||A)&&m.set(y,x));return[p,m]}function kB(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function F8(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(s=>F8(e,s.items,n))}):ch[r].draw(e,{items:n?t.map(ACt):t})}function ACt(e){const t=NM(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const _y=5,Hc=31,N4=32,Av=new Uint32Array(N4+1),i0=new Uint32Array(N4+1);i0[0]=0;Av[0]=~i0[0];for(let e=1;e<=N4;++e)i0[e]=i0[e-1]<<1|1,Av[e]=~i0[e];function kCt(e,t){const n=new Uint32Array(~~((e*t+N4)/N4));function r(s,o){n[s]|=o}function i(s,o){n[s]&=o}return{array:n,get:(s,o)=>{const a=o*e+s;return n[a>>>_y]&1<<(a&Hc)},set:(s,o)=>{const a=o*e+s;r(a>>>_y,1<<(a&Hc))},clear:(s,o)=>{const a=o*e+s;i(a>>>_y,~(1<<(a&Hc)))},getRange:(s,o,a,u)=>{let l=u,c,f,d,h;for(;l>=o;--l)if(c=l*e+s,f=l*e+a,d=c>>>_y,h=f>>>_y,d===h){if(n[d]&Av[c&Hc]&i0[(f&Hc)+1])return!0}else{if(n[d]&Av[c&Hc]||n[h]&i0[(f&Hc)+1])return!0;for(let p=d+1;p<h;++p)if(n[p])return!0}return!1},setRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>_y,d=c>>>_y,f===d)r(f,Av[l&Hc]&i0[(c&Hc)+1]);else for(r(f,Av[l&Hc]),r(d,i0[(c&Hc)+1]),h=f+1;h<d;++h)r(h,4294967295)},clearRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>_y,d=c>>>_y,f===d)i(f,i0[l&Hc]|Av[(c&Hc)+1]);else for(i(f,i0[l&Hc]),i(d,Av[(c&Hc)+1]),h=f+1;h<d;++h)i(h,0)},outOfBounds:(s,o,a,u)=>s<0||o<0||u>=t||a>=e}}function RCt(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),s=~~((t+2*n+r)/r),o=a=>~~((a+n)/r);return o.invert=a=>a*r-n,o.bitmap=()=>kCt(i,s),o.ratio=r,o.padding=n,o.width=e,o.height=t,o}function ICt(e,t,n,r){const i=e.width,s=e.height;return function(o){const a=o.datum.datum.items[r].items,u=a.length,l=o.datum.fontSize,c=eh.width(o.datum,o.datum.text);let f=0,d,h,p,m,g,b,y;for(let x=0;x<u;++x)d=a[x].x,p=a[x].y,h=a[x].x2===void 0?d:a[x].x2,m=a[x].y2===void 0?p:a[x].y2,g=(d+h)/2,b=(p+m)/2,y=Math.abs(h-d+m-p),y>=f&&(f=y,o.x=g,o.y=b);return g=c/2,b=l/2,d=o.x-g,h=o.x+g,p=o.y-b,m=o.y+b,o.align="center",d<0&&h<=i?o.align="left":0<=d&&i<h&&(o.align="right"),o.baseline="middle",p<0&&m<=s?o.baseline="top":0<=p&&s<m&&(o.baseline="bottom"),!0}}function GD(e,t,n,r,i,s){let o=n/2;return e-o<0||e+o>i||t-(o=r/2)<0||t+o>s}function qv(e,t,n,r,i,s,o,a){const u=i*s/(r*2),l=e(t-u),c=e(t+u),f=e(n-(s=s/2)),d=e(n+s);return o.outOfBounds(l,f,c,d)||o.getRange(l,f,c,d)||a&&a.getRange(l,f,c,d)}function PCt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1];function u(l,c,f,d,h){const p=e.invert(l),m=e.invert(c);let g=f,b=s,y;if(!GD(p,m,d,h,i,s)&&!qv(e,p,m,h,d,g,o,a)&&!qv(e,p,m,h,d,h,o,null)){for(;b-g>=1;)y=(g+b)/2,qv(e,p,m,h,d,y,o,a)?b=y:g=y;if(g>f)return[p,m,g,!0]}}return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=eh.width(l.datum,l.datum.text);let p=n?d:0,m=!1,g=!1,b=0,y,x,w,T,A,k,I,O,M,L,H,D,B,U,G,ee,ne;for(let ue=0;ue<f;++ue){for(y=c[ue].x,w=c[ue].y,x=c[ue].x2===void 0?y:c[ue].x2,T=c[ue].y2===void 0?w:c[ue].y2,y>x&&(ne=y,y=x,x=ne),w>T&&(ne=w,w=T,T=ne),M=e(y),H=e(x),L=~~((M+H)/2),D=e(w),U=e(T),B=~~((D+U)/2),I=L;I>=M;--I)for(O=B;O>=D;--O)ee=u(I,O,p,h,d),ee&&([l.x,l.y,p,m]=ee);for(I=L;I<=H;++I)for(O=B;O<=U;++O)ee=u(I,O,p,h,d),ee&&([l.x,l.y,p,m]=ee);!m&&!n&&(G=Math.abs(x-y+T-w),A=(y+x)/2,k=(w+T)/2,G>=b&&!GD(A,k,h,d,i,s)&&!qv(e,A,k,d,h,d,o,null)&&(b=G,l.x=A,l.y=k,g=!0))}return m||g?(A=h/2,k=d/2,o.setRange(e(l.x-A),e(l.y-k),e(l.x+A),e(l.y+k)),l.align="center",l.baseline="middle",!0):!1}}const NCt=[-1,-1,1,1],DCt=[-1,1,-1,1];function OCt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=e.bitmap();return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=eh.width(l.datum,l.datum.text),p=[];let m=n?d:0,g=!1,b=!1,y=0,x,w,T,A,k,I,O,M,L,H,D,B;for(let U=0;U<f;++U){for(x=c[U].x,T=c[U].y,w=c[U].x2===void 0?x:c[U].x2,A=c[U].y2===void 0?T:c[U].y2,p.push([e((x+w)/2),e((T+A)/2)]);p.length;)if([O,M]=p.pop(),!(o.get(O,M)||a.get(O,M)||u.get(O,M))){u.set(O,M);for(let G=0;G<4;++G)k=O+NCt[G],I=M+DCt[G],u.outOfBounds(k,I,k,I)||p.push([k,I]);if(k=e.invert(O),I=e.invert(M),L=m,H=s,!GD(k,I,h,d,i,s)&&!qv(e,k,I,d,h,L,o,a)&&!qv(e,k,I,d,h,d,o,null)){for(;H-L>=1;)D=(L+H)/2,qv(e,k,I,d,h,D,o,a)?H=D:L=D;L>m&&(l.x=k,l.y=I,m=L,g=!0)}}!g&&!n&&(B=Math.abs(w-x+A-T),k=(x+w)/2,I=(T+A)/2,B>=y&&!GD(k,I,h,d,i,s)&&!qv(e,k,I,d,h,d,o,null)&&(y=B,l.x=k,l.y=I,b=!0))}return g||b?(k=h/2,I=d/2,o.setRange(e(l.x-k),e(l.y-I),e(l.x+k),e(l.y+I)),l.align="center",l.baseline="middle",!0):!1}}const MCt=["right","center","left"],LCt=["bottom","middle","top"];function FCt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=r.length;return function(l){const c=l.boundary,f=l.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>i||c[3]>s)return!1;let d=l.textWidth??0,h,p,m,g,b,y,x,w,T,A,k,I,O,M,L;for(let H=0;H<u;++H){if(h=(n[H]&3)-1,p=(n[H]>>>2&3)-1,m=h===0&&p===0||r[H]<0,g=h&&p?Math.SQRT1_2:1,b=r[H]<0?-1:1,y=c[1+h]+r[H]*h*g,k=c[4+p]+b*f*p/2+r[H]*p*g,w=k-f/2,T=k+f/2,I=e(y),M=e(w),L=e(T),!d)if(xfe(I,I,M,L,o,a,y,y,w,T,c,m))d=eh.width(l.datum,l.datum.text);else continue;if(A=y+b*d*h/2,y=A-d/2,x=A+d/2,I=e(y),O=e(x),xfe(I,O,M,L,o,a,y,x,w,T,c,m))return l.x=h?h*b<0?x:y:A,l.y=p?p*b<0?T:w:k,l.align=MCt[h*b+1],l.baseline=LCt[p*b+1],o.setRange(I,M,O,L),!0}return!1}}function xfe(e,t,n,r,i,s,o,a,u,l,c,f){return!(i.outOfBounds(e,n,t,r)||(f&&s||i).getRange(e,n,t,r))}const RB=0,IB=4,PB=8,NB=0,DB=1,OB=2,$Ct={"top-left":RB+NB,top:RB+DB,"top-right":RB+OB,left:IB+NB,middle:IB+DB,right:IB+OB,"bottom-left":PB+NB,bottom:PB+DB,"bottom-right":PB+OB},BCt={naive:ICt,"reduced-search":PCt,floodfill:OCt};function jCt(e,t,n,r,i,s,o,a,u,l,c){if(!e.length)return e;const f=Math.max(r.length,i.length),d=UCt(r,f),h=zCt(i,f),p=VCt(e[0].datum),m=p==="group"&&e[0].datum.items[u].marktype,g=m==="area",b=HCt(p,m,a,u),y=l===null||l===1/0,x=g&&c==="naive";let w=-1,T=-1;const A=e.map(M=>{const L=y?eh.width(M,M.text):void 0;return w=Math.max(w,L),T=Math.max(T,M.fontSize),{datum:M,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:b(M),textWidth:L}});l=l===null||l===1/0?Math.max(w,T)+Math.max(...r):l;const k=RCt(t[0],t[1],l);let I;if(!x){n&&A.sort((H,D)=>n(H.datum,D.datum));let M=!1;for(let H=0;H<h.length&&!M;++H)M=h[H]===5||d[H]<0;const L=(p&&o||g)&&e.map(H=>H.datum);I=s.length||L?CCt(k,L||[],s,M,g):TCt(k,o&&A)}const O=g?BCt[c](k,I,o,u):FCt(k,I,h,d);return A.forEach(M=>M.opacity=+O(M)),A}function UCt(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function zCt(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=$Ct[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function VCt(e){return e&&e.mark&&e.mark.marktype}function HCt(e,t,n,r){const i=s=>[s.x,s.x,s.x,s.y,s.y,s.y];return e?e==="line"||e==="area"?s=>i(s.datum):t==="line"?s=>{const o=s.datum.items[r].items;return i(o.length?o[n==="start"?0:o.length-1]:{x:NaN,y:NaN})}:s=>{const o=s.datum.bounds;return[o.x1,(o.x1+o.x2)/2,o.x2,o.y1,(o.y1+o.y2)/2,o.y2]}:i}const HV=["x","y","opacity","align","baseline"],H3e=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function pJ(e){pt.call(this,null,e)}pJ.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:H3e},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:HV.length,default:HV}]};en(pJ,pt,{transform(e,t){function n(s){const o=e[s];return Rr(o)&&t.modified(o.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&vt("Size parameter should be specified as a [width, height] array.");const i=e.as||HV;return jCt(t.materialize(t.SOURCE).source||[],e.size,e.sort,ln(e.offset==null?1:e.offset),ln(e.anchor||H3e),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(s=>{const o=s.datum;o[i[0]]=s.x,o[i[1]]=s.y,o[i[2]]=s.opacity,o[i[3]]=s.align,o[i[4]]=s.baseline}),t.reflow(r).modifies(i)}});const qCt=Object.freeze(Object.defineProperty({__proto__:null,label:pJ},Symbol.toStringTag,{value:"Module"}));function q3e(e,t){var n=[],r=function(c){return c(a)},i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function mJ(e){pt.call(this,null,e)}mJ.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};en(mJ,pt,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=q3e(r,e.groupby),s=(e.groupby||[]).map(Wo),o=s.length,a=e.as||[Wo(e.x),Wo(e.y)],u=[];i.forEach(l=>{rCe(l,e.x,e.y,e.bandwidth||.3).forEach(c=>{const f={};for(let d=0;d<o;++d)f[s[d]]=l.dims[d];f[a[0]]=c[0],f[a[1]]=c[1],u.push(Vi(f))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});const qV={constant:AX,linear:kX,log:ZTe,exp:eCe,pow:tCe,quad:RX,poly:nCe},WCt=(e,t)=>e==="poly"?t:e==="quad"?2:1;function gJ(e){pt.call(this,null,e)}gJ.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(qV)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};en(gJ,pt,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=q3e(r,e.groupby),s=(e.groupby||[]).map(Wo),o=e.method||"linear",a=e.order==null?3:e.order,u=WCt(o,a),l=e.as||[Wo(e.x),Wo(e.y)],c=qV[o],f=[];let d=e.extent;gn(qV,o)||vt("Invalid regression method: "+o),d!=null&&o==="log"&&d[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),i.forEach(h=>{if(h.length<=u){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const m=c(h,e.x,e.y,a);if(e.params){f.push(Vi({keys:h.dims,coef:m.coef,rSquared:m.rSquared}));return}const g=d||fg(h,e.x),b=y=>{const x={};for(let w=0;w<s.length;++w)x[s[w]]=h.dims[w];x[l[0]]=y[0],x[l[1]]=y[1],f.push(Vi(x))};o==="linear"||o==="constant"?g.forEach(y=>b([y,m.predict(y)])):BM(m.predict,g,25,200).forEach(b)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});const GCt=Object.freeze(Object.defineProperty({__proto__:null,loess:mJ,regression:gJ},Symbol.toStringTag,{value:"Module"}));function yJ(e){pt.call(this,null,e)}yJ.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const YCt=[-1e5,-1e5,1e5,1e5];en(yJ,pt,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:YCt;const s=this.value=oK.from(r,e.x,e.y).voronoi(i);for(let o=0,a=r.length;o<a;++o){const u=s.cellPolygon(o);r[o][n]=u&&!XCt(u)?KCt(u):null}return t.reflow(e.modified()).modifies(n)}});function KCt(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function XCt(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const QCt=Object.freeze(Object.defineProperty({__proto__:null,voronoi:yJ},Symbol.toStringTag,{value:"Module"}));var MB=Math.PI/180,Q3=64,$8=2048;function JCt(){var e=[256,256],t,n,r,i,s,o,a,u=W3e,l=[],c=Math.random,f={};f.layout=function(){for(var p=d(nb()),m=iAt((e[0]>>5)*e[1]),g=null,b=l.length,y=-1,x=[],w=l.map(A=>({text:t(A),font:n(A),style:i(A),weight:s(A),rotate:o(A),size:~~(r(A)+1e-14),padding:a(A),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:A})).sort((A,k)=>k.size-A.size);++y<b;){var T=w[y];T.x=e[0]*(c()+.5)>>1,T.y=e[1]*(c()+.5)>>1,ZCt(p,T,w,y),T.hasText&&h(m,T,g)&&(x.push(T),g?tAt(g,T):g=[{x:T.x+T.x0,y:T.y+T.y0},{x:T.x+T.x1,y:T.y+T.y1}],T.x-=e[0]>>1,T.y-=e[1]>>1)}return x};function d(p){p.width=p.height=1;var m=Math.sqrt(p.getContext("2d").getImageData(0,0,1,1).data.length>>2);p.width=(Q3<<5)/m,p.height=$8/m;var g=p.getContext("2d");return g.fillStyle=g.strokeStyle="red",g.textAlign="center",{context:g,ratio:m}}function h(p,m,g){for(var b=m.x,y=m.y,x=Math.hypot(e[0],e[1]),w=u(e),T=c()<.5?1:-1,A=-T,k,I,O;(k=w(A+=T))&&(I=~~k[0],O=~~k[1],!(Math.min(Math.abs(I),Math.abs(O))>=x));)if(m.x=b+I,m.y=y+O,!(m.x+m.x0<0||m.y+m.y0<0||m.x+m.x1>e[0]||m.y+m.y1>e[1])&&(!g||!eAt(m,p,e[0]))&&(!g||nAt(m,g))){for(var M=m.sprite,L=m.width>>5,H=e[0]>>5,D=m.x-(L<<4),B=D&127,U=32-B,G=m.y1-m.y0,ee=(m.y+m.y0)*H+(D>>5),ne,ue=0;ue<G;ue++){ne=0;for(var X=0;X<=L;X++)p[ee+X]|=ne<<U|(X<L?(ne=M[ue*L+X])>>>B:0);ee+=H}return m.sprite=null,!0}return!1}return f.words=function(p){return arguments.length?(l=p,f):l},f.size=function(p){return arguments.length?(e=[+p[0],+p[1]],f):e},f.font=function(p){return arguments.length?(n=Ux(p),f):n},f.fontStyle=function(p){return arguments.length?(i=Ux(p),f):i},f.fontWeight=function(p){return arguments.length?(s=Ux(p),f):s},f.rotate=function(p){return arguments.length?(o=Ux(p),f):o},f.text=function(p){return arguments.length?(t=Ux(p),f):t},f.spiral=function(p){return arguments.length?(u=sAt[p]||p,f):u},f.fontSize=function(p){return arguments.length?(r=Ux(p),f):r},f.padding=function(p){return arguments.length?(a=Ux(p),f):a},f.random=function(p){return arguments.length?(c=p,f):c},f}function ZCt(e,t,n,r){if(!t.sprite){var i=e.context,s=e.ratio;i.clearRect(0,0,(Q3<<5)/s,$8/s);var o=0,a=0,u=0,l=n.length,c,f,d,h,p;for(--r;++r<l;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/s)+"px "+t.font,c=i.measureText(t.text+"m").width*s,d=t.size<<1,t.rotate){var m=Math.sin(t.rotate*MB),g=Math.cos(t.rotate*MB),b=c*g,y=c*m,x=d*g,w=d*m;c=Math.max(Math.abs(b+w),Math.abs(b-w))+31>>5<<5,d=~~Math.max(Math.abs(y+x),Math.abs(y-x))}else c=c+31>>5<<5;if(d>u&&(u=d),o+c>=Q3<<5&&(o=0,a+=u,u=0),a+d>=$8)break;i.translate((o+(c>>1))/s,(a+(d>>1))/s),t.rotate&&i.rotate(t.rotate*MB),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=c,t.height=d,t.xoff=o,t.yoff=a,t.x1=c>>1,t.y1=d>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,o+=c}for(var T=i.getImageData(0,0,(Q3<<5)/s,$8/s).data,A=[];--r>=0;)if(t=n[r],!!t.hasText){for(c=t.width,f=c>>5,d=t.y1-t.y0,h=0;h<d*f;h++)A[h]=0;if(o=t.xoff,o==null)return;a=t.yoff;var k=0,I=-1;for(p=0;p<d;p++){for(h=0;h<c;h++){var O=f*p+(h>>5),M=T[(a+p)*(Q3<<5)+(o+h)<<2]?1<<31-h%32:0;A[O]|=M,k|=M}k?I=p:(t.y0++,d--,p--,a++)}t.y1=t.y0+I,t.sprite=A.slice(0,(t.y1-t.y0)*f)}}}function eAt(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,s=e.x-(i<<4),o=s&127,a=32-o,u=e.y1-e.y0,l=(e.y+e.y0)*n+(s>>5),c,f=0;f<u;f++){c=0;for(var d=0;d<=i;d++)if((c<<a|(d<i?(c=r[f*i+d])>>>o:0))&t[l+d])return!0;l+=n}return!1}function tAt(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function nAt(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function W3e(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function rAt(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(s){var o=s<0?-1:1;switch(Math.sqrt(1+4*o*s)-o&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function iAt(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function Ux(e){return typeof e=="function"?e:function(){return e}}var sAt={archimedean:W3e,rectangular:rAt};const G3e=["x","y","font","fontSize","fontStyle","fontWeight","angle"],oAt=["text","font","rotate","fontSize","fontStyle","fontWeight"];function vJ(e){pt.call(this,JCt(),e)}vJ.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:G3e}]};en(vJ,pt,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&vt("Wordcloud size dimensions must be non-zero.");function n(p){const m=e[p];return Rr(m)&&t.modified(m.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||oAt.some(n)))return;const i=t.materialize(t.SOURCE).source,s=this.value,o=e.as||G3e;let a=e.fontSize||14,u;if(Rr(a)?u=e.fontSizeRange:a=dc(a),u){const p=a,m=Ii("sqrt")().domain(fg(i,p)).range(u);a=g=>m(p(g))}i.forEach(p=>{p[o[0]]=NaN,p[o[1]]=NaN,p[o[3]]=0});const l=s.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(a).random(np).layout(),c=s.size(),f=c[0]>>1,d=c[1]>>1,h=l.length;for(let p=0,m,g;p<h;++p)m=l[p],g=m.datum,g[o[0]]=m.x+f,g[o[1]]=m.y+d,g[o[2]]=m.font,g[o[3]]=m.size,g[o[4]]=m.style,g[o[5]]=m.weight,g[o[6]]=m.rotate;return t.reflow(r).modifies(o)}});const aAt=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:vJ},Symbol.toStringTag,{value:"Module"})),uAt=e=>new Uint8Array(e),lAt=e=>new Uint16Array(e),Nk=e=>new Uint32Array(e);function cAt(){let e=8,t=[],n=Nk(0),r=u5(0,e),i=u5(0,e);return{data:()=>t,seen:()=>n=fAt(n,t.length),add(s){for(let o=0,a=t.length,u=s.length,l;o<u;++o)l=s[o],l._index=a++,t.push(l)},remove(s,o){const a=t.length,u=Array(a-s),l=t;let c,f,d;for(f=0;!o[f]&&f<a;++f)u[f]=t[f],l[f]=f;for(d=f;f<a;++f)c=t[f],o[f]?l[f]=-1:(l[f]=d,r[d]=r[f],i[d]=i[f],u[d]=c,c._index=d++),r[f]=0;return t=u,l},size:()=>t.length,curr:()=>r,prev:()=>i,reset:s=>i[s]=r[s],all:()=>e<257?255:e<65537?65535:4294967295,set(s,o){r[s]|=o},clear(s,o){r[s]&=~o},resize(s,o){const a=r.length;(s>a||o>e)&&(e=Math.max(o,e),r=u5(s,e,r),i=u5(s,e))}}}function fAt(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function u5(e,t,n){const r=(t<257?uAt:t<65537?lAt:Nk)(e);return n&&r.set(n),r}function _fe(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,s){const o=this,a=o.bisect(o.range,i.value),u=i.index,l=a[0],c=a[1],f=u.length;let d;for(d=0;d<l;++d)s[u[d]]|=r;for(d=c;d<f;++d)s[u[d]]|=r;return o}}}function wfe(){let e=Nk(0),t=[],n=0;function r(a,u,l){if(!u.length)return[];const c=n,f=u.length,d=Nk(f);let h=Array(f),p,m,g;for(g=0;g<f;++g)h[g]=a(u[g]),d[g]=g;if(h=dAt(h,d),c)p=t,m=e,t=Array(c+f),e=Nk(c+f),hAt(l,p,m,c,h,d,f,t,e);else{if(l>0)for(g=0;g<f;++g)d[g]+=l;t=h,e=d}return n=c+f,{index:d,value:h}}function i(a,u){const l=n;let c,f,d;for(f=0;!u[e[f]]&&f<l;++f);for(d=f;f<l;++f)u[c=e[f]]||(e[d]=c,t[d]=t[f],++d);n=l-a}function s(a){for(let u=0,l=n;u<l;++u)e[u]=a[e[u]]}function o(a,u){let l;return u?l=u.length:(u=t,l=n),[plt(u,a[0],0,l),yb(u,a[1],0,l)]}return{insert:r,remove:i,bisect:o,reindex:s,index:()=>e,size:()=>n}}function dAt(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],s=e[r];return i<s?-1:i>s?1:0}),vlt(e,t)}function hAt(e,t,n,r,i,s,o,a,u){let l=0,c=0,f;for(f=0;l<r&&c<o;++f)t[l]<i[c]?(a[f]=t[l],u[f]=n[l++]):(a[f]=i[c],u[f]=s[c++]+e);for(;l<r;++l,++f)a[f]=t[l],u[f]=n[l];for(;c<o;++c,++f)a[f]=i[c],u[f]=s[c]+e}function bJ(e){pt.call(this,cAt(),e),this._indices=null,this._dims=null}bJ.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};en(bJ,pt,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},s=this._dims=[],o=r.length;let a=0,u,l;for(;a<o;++a)u=n[a].fname,l=i[u]||(i[u]=wfe()),s.push(_fe(l,a,r[a]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,s=this._indices,o=this._dims,a=this.value,u=a.curr(),l=a.prev(),c=a.all(),f=n.rem=n.add,d=n.mod,h=i.length,p={};let m,g,b,y,x,w,T,A,k;if(l.set(u),t.rem.length&&(x=this.remove(e,t,n)),t.add.length&&a.add(t.add),t.mod.length)for(w={},y=t.mod,T=0,A=y.length;T<A;++T)w[y[T]._index]=1;for(T=0;T<h;++T)k=r[T],(!o[T]||e.modified("fields",T)||t.modified(k.fields))&&(b=k.fname,(m=p[b])||(s[b]=g=wfe(),p[b]=m=g.insert(k,t.source,0)),o[T]=_fe(g,T,i[T]).onAdd(m,u));for(T=0,A=a.data().length;T<A;++T)x[T]||(l[T]!==u[T]?f.push(T):w[T]&&u[T]!==c&&d.push(T));return a.mask=(1<<h)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,s=this._dims,o=this._indices,a=e.fields,u={},l=n.add,c=i.size()+r.length,f=s.length;let d=i.size(),h,p,m;i.resize(c,f),i.add(r);const g=i.curr(),b=i.prev(),y=i.all();for(h=0;h<f;++h)p=a[h].fname,m=u[p]||(u[p]=o[p].insert(a[h],r,d)),s[h].onAdd(m,g);for(;d<c;++d)b[d]=y,g[d]!==y&&l.push(d)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),s=r.all(),o=e.mod;let a,u,l;for(a=0,u=o.length;a<u;++a)l=o[a]._index,i[l]!==s&&n.push(l)},remove(e,t,n){const r=this._indices,i=this.value,s=i.curr(),o=i.prev(),a=i.all(),u={},l=n.rem,c=t.rem;let f,d,h,p;for(f=0,d=c.length;f<d;++f)h=c[f]._index,u[h]=1,o[h]=p=s[h],s[h]=a,p!==a&&l.push(h);for(h in r)r[h].remove(d,u);return this.reindex(t,d,u),u},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const s=i.remove(t,n);for(const o in r)r[o].reindex(s)})},update(e,t,n){const r=this._dims,i=e.query,s=t.stamp,o=r.length;let a=0,u,l;for(n.filters=0,l=0;l<o;++l)e.modified("query",l)&&(u=l,++a);if(a===1)a=r[u].one,this.incrementOne(r[u],i[u],n.add,n.rem);else for(l=0,a=0;l<o;++l)e.modified("query",l)&&(a|=r[l].one,this.incrementAll(r[l],i[l],s,n.add),n.rem=n.add);return a},incrementAll(e,t,n,r){const i=this.value,s=i.seen(),o=i.curr(),a=i.prev(),u=e.index(),l=e.bisect(e.range),c=e.bisect(t),f=c[0],d=c[1],h=l[0],p=l[1],m=e.one;let g,b,y;if(f<h)for(g=f,b=Math.min(h,d);g<b;++g)y=u[g],s[y]!==n&&(a[y]=o[y],s[y]=n,r.push(y)),o[y]^=m;else if(f>h)for(g=h,b=Math.min(f,p);g<b;++g)y=u[g],s[y]!==n&&(a[y]=o[y],s[y]=n,r.push(y)),o[y]^=m;if(d>p)for(g=Math.max(f,p),b=d;g<b;++g)y=u[g],s[y]!==n&&(a[y]=o[y],s[y]=n,r.push(y)),o[y]^=m;else if(d<p)for(g=Math.max(h,d),b=p;g<b;++g)y=u[g],s[y]!==n&&(a[y]=o[y],s[y]=n,r.push(y)),o[y]^=m;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value,s=i.curr(),o=e.index(),a=e.bisect(e.range),u=e.bisect(t),l=u[0],c=u[1],f=a[0],d=a[1],h=e.one;let p,m,g;if(l<f)for(p=l,m=Math.min(f,c);p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(l>f)for(p=f,m=Math.min(l,d);p<m;++p)g=o[p],s[g]^=h,r.push(g);if(c>d)for(p=Math.max(l,d),m=c;p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(c<d)for(p=Math.max(f,c),m=d;p<m;++p)g=o[p],s[g]^=h,r.push(g);e.range=t.slice()}});function xJ(e){pt.call(this,null,e)}xJ.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};en(xJ,pt,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if(!(i&n))return t.StopPropagation;const s=t.fork(t.ALL),o=r.data(),a=r.curr(),u=r.prev(),l=c=>a[c]&n?null:o[c];return s.filter(s.MOD,l),i&i-1?(s.filter(s.ADD,c=>{const f=a[c]&n;return!f&&f^u[c]&n?o[c]:null}),s.filter(s.REM,c=>{const f=a[c]&n;return f&&!(f^(f^u[c]&n))?o[c]:null})):(s.filter(s.ADD,l),s.filter(s.REM,c=>(a[c]&n)===i?o[c]:null)),s.filter(s.SOURCE,c=>l(c._index))}});const pAt=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:bJ,resolvefilter:xJ},Symbol.toStringTag,{value:"Module"})),mAt="RawCode",VS="Literal",gAt="Property",yAt="Identifier",vAt="ArrayExpression",bAt="BinaryExpression",Y3e="CallExpression",xAt="ConditionalExpression",_At="LogicalExpression",wAt="MemberExpression",EAt="ObjectExpression",SAt="UnaryExpression";function B0(e){this.type=e}B0.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=TAt(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function TAt(e){switch(e.type){case vAt:return e.elements;case bAt:case _At:return[e.left,e.right];case Y3e:return[e.callee].concat(e.arguments);case xAt:return[e.test,e.consequent,e.alternate];case wAt:return[e.object,e.property];case EAt:return e.properties;case gAt:return[e.key,e.value];case SAt:return[e.argument];case yAt:case VS:case mAt:default:return[]}}var kg,Rn,gt,ac,os,rL=1,oI=2,sw=3,nx=4,iL=5,Kw=6,Hf=7,aI=8,CAt=9;kg={};kg[rL]="Boolean";kg[oI]="<end>";kg[sw]="Identifier";kg[nx]="Keyword";kg[iL]="Null";kg[Kw]="Numeric";kg[Hf]="Punctuator";kg[aI]="String";kg[CAt]="RegularExpression";var AAt="ArrayExpression",kAt="BinaryExpression",RAt="CallExpression",IAt="ConditionalExpression",K3e="Identifier",PAt="Literal",NAt="LogicalExpression",DAt="MemberExpression",OAt="ObjectExpression",MAt="Property",LAt="UnaryExpression",Mu="Unexpected token %0",FAt="Unexpected number",$At="Unexpected string",BAt="Unexpected identifier",jAt="Unexpected reserved word",UAt="Unexpected end of input",WV="Invalid regular expression",LB="Invalid regular expression: missing /",X3e="Octal literals are not allowed in strict mode.",zAt="Duplicate data property in object literal not allowed in strict mode",bl="ILLEGAL",D4="Disabled.",VAt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),HAt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function sL(e,t){if(!e)throw new Error("ASSERT: "+t)}function Iy(e){return e>=48&&e<=57}function _J(e){return"0123456789abcdefABCDEF".includes(e)}function Dk(e){return"01234567".includes(e)}function qAt(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e)}function O4(e){return e===10||e===13||e===8232||e===8233}function uI(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&VAt.test(String.fromCharCode(e))}function YD(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&HAt.test(String.fromCharCode(e))}const WAt={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function Q3e(){for(;gt<ac;){const e=Rn.charCodeAt(gt);if(qAt(e)||O4(e))++gt;else break}}function GV(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)gt<ac&&_J(Rn[gt])?(r=Rn[gt++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):Ci({},Mu,bl);return String.fromCharCode(i)}function GAt(){var e,t,n,r;for(e=Rn[gt],t=0,e==="}"&&Ci({},Mu,bl);gt<ac&&(e=Rn[gt++],!!_J(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&Ci({},Mu,bl),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function J3e(){var e,t;for(e=Rn.charCodeAt(gt++),t=String.fromCharCode(e),e===92&&(Rn.charCodeAt(gt)!==117&&Ci({},Mu,bl),++gt,e=GV("u"),(!e||e==="\\"||!uI(e.charCodeAt(0)))&&Ci({},Mu,bl),t=e);gt<ac&&(e=Rn.charCodeAt(gt),!!YD(e));)++gt,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),Rn.charCodeAt(gt)!==117&&Ci({},Mu,bl),++gt,e=GV("u"),(!e||e==="\\"||!YD(e.charCodeAt(0)))&&Ci({},Mu,bl),t+=e);return t}function YAt(){var e,t;for(e=gt++;gt<ac;){if(t=Rn.charCodeAt(gt),t===92)return gt=e,J3e();if(YD(t))++gt;else break}return Rn.slice(e,gt)}function KAt(){var e,t,n;return e=gt,t=Rn.charCodeAt(gt)===92?J3e():YAt(),t.length===1?n=sw:WAt.hasOwnProperty(t)?n=nx:t==="null"?n=iL:t==="true"||t==="false"?n=rL:n=sw,{type:n,value:t,start:e,end:gt}}function FB(){var e=gt,t=Rn.charCodeAt(gt),n,r=Rn[gt],i,s,o;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++gt,{type:Hf,value:String.fromCharCode(t),start:e,end:gt};default:if(n=Rn.charCodeAt(gt+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return gt+=2,{type:Hf,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:gt};case 33:case 61:return gt+=2,Rn.charCodeAt(gt)===61&&++gt,{type:Hf,value:Rn.slice(e,gt),start:e,end:gt}}}if(o=Rn.substr(gt,4),o===">>>=")return gt+=4,{type:Hf,value:o,start:e,end:gt};if(s=o.substr(0,3),s===">>>"||s==="<<="||s===">>=")return gt+=3,{type:Hf,value:s,start:e,end:gt};if(i=s.substr(0,2),r===i[1]&&"+-<>&|".includes(r)||i==="=>")return gt+=2,{type:Hf,value:i,start:e,end:gt};if(i==="//"&&Ci({},Mu,bl),"<>=!+-*%&|^/".includes(r))return++gt,{type:Hf,value:r,start:e,end:gt};Ci({},Mu,bl)}function XAt(e){let t="";for(;gt<ac&&_J(Rn[gt]);)t+=Rn[gt++];return t.length===0&&Ci({},Mu,bl),uI(Rn.charCodeAt(gt))&&Ci({},Mu,bl),{type:Kw,value:parseInt("0x"+t,16),start:e,end:gt}}function QAt(e){let t="0"+Rn[gt++];for(;gt<ac&&Dk(Rn[gt]);)t+=Rn[gt++];return(uI(Rn.charCodeAt(gt))||Iy(Rn.charCodeAt(gt)))&&Ci({},Mu,bl),{type:Kw,value:parseInt(t,8),octal:!0,start:e,end:gt}}function Efe(){var e,t,n;if(n=Rn[gt],sL(Iy(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=gt,e="",n!=="."){if(e=Rn[gt++],n=Rn[gt],e==="0"){if(n==="x"||n==="X")return++gt,XAt(t);if(Dk(n))return QAt(t);n&&Iy(n.charCodeAt(0))&&Ci({},Mu,bl)}for(;Iy(Rn.charCodeAt(gt));)e+=Rn[gt++];n=Rn[gt]}if(n==="."){for(e+=Rn[gt++];Iy(Rn.charCodeAt(gt));)e+=Rn[gt++];n=Rn[gt]}if(n==="e"||n==="E")if(e+=Rn[gt++],n=Rn[gt],(n==="+"||n==="-")&&(e+=Rn[gt++]),Iy(Rn.charCodeAt(gt)))for(;Iy(Rn.charCodeAt(gt));)e+=Rn[gt++];else Ci({},Mu,bl);return uI(Rn.charCodeAt(gt))&&Ci({},Mu,bl),{type:Kw,value:parseFloat(e),start:t,end:gt}}function JAt(){var e="",t,n,r,i,s=!1;for(t=Rn[gt],sL(t==="'"||t==='"',"String literal must starts with a quote"),n=gt,++gt;gt<ac;)if(r=Rn[gt++],r===t){t="";break}else if(r==="\\")if(r=Rn[gt++],!r||!O4(r.charCodeAt(0)))switch(r){case"u":case"x":Rn[gt]==="{"?(++gt,e+=GAt()):e+=GV(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:Dk(r)?(i="01234567".indexOf(r),i!==0&&(s=!0),gt<ac&&Dk(Rn[gt])&&(s=!0,i=i*8+"01234567".indexOf(Rn[gt++]),"0123".includes(r)&&gt<ac&&Dk(Rn[gt])&&(i=i*8+"01234567".indexOf(Rn[gt++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&Rn[gt]===`
`&&++gt;else{if(O4(r.charCodeAt(0)))break;e+=r}return t!==""&&Ci({},Mu,bl),{type:aI,value:e,octal:s,start:n,end:gt}}function ZAt(e,t){let n=e;t.includes("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";Ci({},WV)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{Ci({},WV)}try{return new RegExp(e,t)}catch{return null}}function e3t(){var e,t,n,r,i;for(e=Rn[gt],sL(e==="/","Regular expression literal must start with a slash"),t=Rn[gt++],n=!1,r=!1;gt<ac;)if(e=Rn[gt++],t+=e,e==="\\")e=Rn[gt++],O4(e.charCodeAt(0))&&Ci({},LB),t+=e;else if(O4(e.charCodeAt(0)))Ci({},LB);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||Ci({},LB),i=t.substr(1,t.length-2),{value:i,literal:t}}function t3t(){var e,t,n;for(t="",n="";gt<ac&&(e=Rn[gt],!!YD(e.charCodeAt(0)));)++gt,e==="\\"&&gt<ac?Ci({},Mu,bl):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&Ci({},WV,n),{value:n,literal:t}}function n3t(){var e,t,n,r;return os=null,Q3e(),e=gt,t=e3t(),n=t3t(),r=ZAt(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:gt}}function r3t(e){return e.type===sw||e.type===nx||e.type===rL||e.type===iL}function Z3e(){if(Q3e(),gt>=ac)return{type:oI,start:gt,end:gt};const e=Rn.charCodeAt(gt);return uI(e)?KAt():e===40||e===41||e===59?FB():e===39||e===34?JAt():e===46?Iy(Rn.charCodeAt(gt+1))?Efe():FB():Iy(e)?Efe():FB()}function Yf(){const e=os;return gt=e.end,os=Z3e(),gt=e.end,e}function eke(){const e=gt;os=Z3e(),gt=e}function i3t(e){const t=new B0(AAt);return t.elements=e,t}function Sfe(e,t,n){const r=new B0(e==="||"||e==="&&"?NAt:kAt);return r.operator=e,r.left=t,r.right=n,r}function s3t(e,t){const n=new B0(RAt);return n.callee=e,n.arguments=t,n}function o3t(e,t,n){const r=new B0(IAt);return r.test=e,r.consequent=t,r.alternate=n,r}function wJ(e){const t=new B0(K3e);return t.name=e,t}function J3(e){const t=new B0(PAt);return t.value=e.value,t.raw=Rn.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function Tfe(e,t,n){const r=new B0(DAt);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function a3t(e){const t=new B0(OAt);return t.properties=e,t}function Cfe(e,t,n){const r=new B0(MAt);return r.key=t,r.value=n,r.kind=e,r}function u3t(e,t){const n=new B0(LAt);return n.operator=e,n.argument=t,n.prefix=!0,n}function Ci(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(s,o)=>(sL(o<r.length,"Message reference must be in range"),r[o]));throw n=new Error(i),n.index=gt,n.description=i,n}function oL(e){e.type===oI&&Ci(e,UAt),e.type===Kw&&Ci(e,FAt),e.type===aI&&Ci(e,$At),e.type===sw&&Ci(e,BAt),e.type===nx&&Ci(e,jAt),Ci(e,Mu,e.value)}function uc(e){const t=Yf();(t.type!==Hf||t.value!==e)&&oL(t)}function Xs(e){return os.type===Hf&&os.value===e}function $B(e){return os.type===nx&&os.value===e}function l3t(){const e=[];for(gt=os.start,uc("[");!Xs("]");)Xs(",")?(Yf(),e.push(null)):(e.push(ow()),Xs("]")||uc(","));return Yf(),i3t(e)}function Afe(){gt=os.start;const e=Yf();return e.type===aI||e.type===Kw?(e.octal&&Ci(e,X3e),J3(e)):wJ(e.value)}function c3t(){var e,t,n,r;if(gt=os.start,e=os,e.type===sw)return n=Afe(),uc(":"),r=ow(),Cfe("init",n,r);if(e.type===oI||e.type===Hf)oL(e);else return t=Afe(),uc(":"),r=ow(),Cfe("init",t,r)}function f3t(){var e=[],t,n,r,i={},s=String;for(gt=os.start,uc("{");!Xs("}");)t=c3t(),t.key.type===K3e?n=t.key.name:n=s(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?Ci({},zAt):i[r]=!0,e.push(t),Xs("}")||uc(",");return uc("}"),a3t(e)}function d3t(){uc("(");const e=EJ();return uc(")"),e}const h3t={if:1};function p3t(){var e,t,n;if(Xs("("))return d3t();if(Xs("["))return l3t();if(Xs("{"))return f3t();if(e=os.type,gt=os.start,e===sw||h3t[os.value])n=wJ(Yf().value);else if(e===aI||e===Kw)os.octal&&Ci(os,X3e),n=J3(Yf());else{if(e===nx)throw new Error(D4);e===rL?(t=Yf(),t.value=t.value==="true",n=J3(t)):e===iL?(t=Yf(),t.value=null,n=J3(t)):Xs("/")||Xs("/=")?(n=J3(n3t()),eke()):oL(Yf())}return n}function m3t(){const e=[];if(uc("("),!Xs(")"))for(;gt<ac&&(e.push(ow()),!Xs(")"));)uc(",");return uc(")"),e}function g3t(){gt=os.start;const e=Yf();return r3t(e)||oL(e),wJ(e.value)}function y3t(){return uc("."),g3t()}function v3t(){uc("[");const e=EJ();return uc("]"),e}function b3t(){var e,t,n;for(e=p3t();;)if(Xs("."))n=y3t(),e=Tfe(".",e,n);else if(Xs("("))t=m3t(),e=s3t(e,t);else if(Xs("["))n=v3t(),e=Tfe("[",e,n);else break;return e}function kfe(){const e=b3t();if(os.type===Hf&&(Xs("++")||Xs("--")))throw new Error(D4);return e}function B8(){var e,t;if(os.type!==Hf&&os.type!==nx)t=kfe();else{if(Xs("++")||Xs("--"))throw new Error(D4);if(Xs("+")||Xs("-")||Xs("~")||Xs("!"))e=Yf(),t=B8(),t=u3t(e.value,t);else{if($B("delete")||$B("void")||$B("typeof"))throw new Error(D4);t=kfe()}}return t}function Rfe(e){let t=0;if(e.type!==Hf&&e.type!==nx)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function x3t(){var e,t,n,r,i,s,o,a,u,l;if(e=os,u=B8(),r=os,i=Rfe(r),i===0)return u;for(r.prec=i,Yf(),t=[e,os],o=B8(),s=[u,r,o];(i=Rfe(os))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)o=s.pop(),a=s.pop().value,u=s.pop(),t.pop(),n=Sfe(a,u,o),s.push(n);r=Yf(),r.prec=i,s.push(r),t.push(os),n=B8(),s.push(n)}for(l=s.length-1,n=s[l],t.pop();l>1;)t.pop(),n=Sfe(s[l-1].value,s[l-2],n),l-=2;return n}function ow(){var e,t,n;return e=x3t(),Xs("?")&&(Yf(),t=ow(),uc(":"),n=ow(),e=o3t(e,t,n)),e}function EJ(){const e=ow();if(Xs(","))throw new Error(D4);return e}function SJ(e){Rn=e,gt=0,ac=Rn.length,os=null,eke();const t=EJ();if(os.type!==oI)throw new Error("Unexpect token after expression.");return t}var tke={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function nke(e){function t(o,a,u,l){let c=e(a[0]);return u&&(c=u+"("+c+")",u.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+o+(l<0?"":l===0?"()":"("+a.slice(1).map(e).join(",")+")")}function n(o,a,u){return l=>t(o,l,a,u)}const r="new Date",i="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(o){o.length<3&&vt("Missing arguments to clamp function."),o.length>3&&vt("Too many arguments to clamp function.");const a=o.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:s,test:n("test",s),if:function(o){o.length<3&&vt("Missing arguments to if function."),o.length>3&&vt("Too many arguments to if function.");const a=o.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function _3t(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function rke(e){e=e||{};const t=e.allowed?A0(e.allowed):{},n=e.forbidden?A0(e.forbidden):{},r=e.constants||tke,i=(e.functions||nke)(f),s=e.globalvar,o=e.fieldvar,a=Rr(s)?s:p=>`${s}["${p}"]`;let u={},l={},c=0;function f(p){if(cn(p))return p;const m=d[p.type];return m==null&&vt("Unsupported type: "+p.type),m(p)}const d={Literal:p=>p.raw,Identifier:p=>{const m=p.name;return c>0?m:gn(n,m)?vt("Illegal identifier: "+m):gn(r,m)?r[m]:gn(t,m)?m:(u[m]=1,a(m))},MemberExpression:p=>{const m=!p.computed,g=f(p.object);m&&(c+=1);const b=f(p.property);return g===o&&(l[_3t(b)]=1),m&&(c-=1),g+(m?"."+b:"["+b+"]")},CallExpression:p=>{p.callee.type!=="Identifier"&&vt("Illegal callee type: "+p.callee.type);const m=p.callee.name,g=p.arguments,b=gn(i,m)&&i[m];return b||vt("Unrecognized function: "+m),Rr(b)?b(g):b+"("+g.map(f).join(",")+")"},ArrayExpression:p=>"["+p.elements.map(f).join(",")+"]",BinaryExpression:p=>"("+f(p.left)+" "+p.operator+" "+f(p.right)+")",UnaryExpression:p=>"("+p.operator+f(p.argument)+")",ConditionalExpression:p=>"("+f(p.test)+"?"+f(p.consequent)+":"+f(p.alternate)+")",LogicalExpression:p=>"("+f(p.left)+p.operator+f(p.right)+")",ObjectExpression:p=>"{"+p.properties.map(f).join(",")+"}",Property:p=>{c+=1;const m=f(p.key);return c-=1,m+":"+f(p.value)}};function h(p){const m={code:f(p),globals:Object.keys(u),fields:Object.keys(l)};return u={},l={},m}return h.functions=i,h.constants=r,h}const w3t="Literal";var Rg,E3t=1,S3t=2,T3t=3,C3t=4,A3t=5,k3t=6,R3t=7,I3t=8,P3t=9;Rg={};Rg[E3t]="Boolean";Rg[S3t]="<end>";Rg[T3t]="Identifier";Rg[C3t]="Keyword";Rg[A3t]="Null";Rg[k3t]="Numeric";Rg[R3t]="Punctuator";Rg[I3t]="String";Rg[P3t]="RegularExpression";const Ife=Symbol("vega_selection_getter");function ike(e){return(!e.getter||!e.getter[Ife])&&(e.getter=Zh(e.field),e.getter[Ife]=!0),e.getter}const TJ="intersect",Pfe="union",N3t="vlMulti",D3t="vlPoint",Nfe="or",O3t="and",Tm="_vgsid_",M4=Zh(Tm),M3t="E",L3t="R",F3t="R-E",$3t="R-LE",B3t="R-RE",KD="index:unit";function Dfe(e,t){for(var n=t.fields,r=t.values,i=n.length,s=0,o,a;s<i;++s)if(a=n[s],o=ike(a)(e),eb(o)&&(o=rc(o)),eb(r[s])&&(r[s]=rc(r[s])),xt(r[s])&&eb(r[s][0])&&(r[s]=r[s].map(rc)),a.type===M3t){if(xt(r[s])?r[s].indexOf(o)<0:o!==r[s])return!1}else if(a.type===L3t){if(!PE(o,r[s]))return!1}else if(a.type===B3t){if(!PE(o,r[s],!0,!1))return!1}else if(a.type===F3t){if(!PE(o,r[s],!1,!1))return!1}else if(a.type===$3t&&!PE(o,r[s],!1,!0))return!1;return!0}function j3t(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],s=r?r[KD]&&r[KD].value:void 0,o=n===TJ,a=i.length,u=0,l,c,f,d,h;u<a;++u)if(l=i[u],s&&o){if(c=c||{},f=c[d=l.unit]||0,f===-1)continue;if(h=Dfe(t,l),c[d]=h?-1:++f,h&&s.size===1)return!0;if(!h&&f===s.get(d).count)return!1}else if(h=Dfe(t,l),o^h)return h;return a&&o}const ske=zT(M4),U3t=ske.left,z3t=ske.right;function V3t(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],s=r?r[KD]&&r[KD].value:void 0,o=n===TJ,a=M4(t),u=U3t(i,a);if(u===i.length||M4(i[u])!==a)return!1;if(s&&o){if(s.size===1)return!0;if(z3t(i,a)-u<s.size)return!1}return!0}function H3t(e,t){return e.map(n=>kr(t.fields?{values:t.fields.map(r=>ike(r)(n.datum))}:{[Tm]:M4(n.datum)},t))}function q3t(e,t,n,r){for(var i=this.context.data[e],s=i?i.values.value:[],o={},a={},u={},l,c,f,d,h,p,m,g,b,y,x=s.length,w=0,T,A;w<x;++w)if(l=s[w],d=l.unit,c=l.fields,f=l.values,c&&f){for(T=0,A=c.length;T<A;++T)h=c[T],m=o[h.field]||(o[h.field]={}),g=m[d]||(m[d]=[]),u[h.field]=b=h.type.charAt(0),y=BB[`${b}_union`],m[d]=y(g,ln(f[T]));n&&(g=a[d]||(a[d]=[]),g.push(ln(f).reduce((k,I,O)=>(k[c[O].field]=I,k),{})))}else h=Tm,p=M4(l),m=o[h]||(o[h]={}),g=m[d]||(m[d]=[]),g.push(p),n&&(g=a[d]||(a[d]=[]),g.push({[Tm]:p}));if(t=t||Pfe,o[Tm]?o[Tm]=BB[`${Tm}_${t}`](...Object.values(o[Tm])):Object.keys(o).forEach(k=>{o[k]=Object.keys(o[k]).map(I=>o[k][I]).reduce((I,O)=>I===void 0?O:BB[`${u[k]}_${t}`](I,O))}),s=Object.keys(a),n&&s.length){const k=r?D3t:N3t;o[k]=t===Pfe?{[Nfe]:s.reduce((I,O)=>(I.push(...a[O]),I),[])}:{[O3t]:s.map(I=>({[Nfe]:a[I]}))}}return o}var BB={[`${Tm}_union`]:Alt,[`${Tm}_intersect`]:Tlt,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=rc(t[0]),r=rc(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=rc(t[0]),r=rc(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const W3t=":",G3t="@";function CJ(e,t,n,r){t[0].type!==w3t&&vt("First argument to selection functions must be a string literal.");const i=t[0].value,s=t.length>=2&&pi(t).value,o="unit",a=G3t+o,u=W3t+i;s===TJ&&!gn(r,a)&&(r[a]=n.getData(i).indataRef(n,o)),gn(r,u)||(r[u]=n.getData(i).tuplesRef())}function oke(e){const t=this.context.data[e];return t?t.values.value:[]}function Y3t(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function K3t(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(ep).insert(t)),1}function X3t(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const lI=e=>function(t,n){const r=this.context.dataflow.locale();return t===null?"null":r[e](n)(t)},Q3t=lI("format"),ake=lI("timeFormat"),J3t=lI("utcFormat"),Z3t=lI("timeParse"),ekt=lI("utcParse"),l5=new Date(2e3,0,1);function aL(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(l5.setYear(2e3),l5.setMonth(e),l5.setDate(t),ake.call(this,l5,n))}function tkt(e){return aL.call(this,e,1,"%B")}function nkt(e){return aL.call(this,e,1,"%b")}function rkt(e){return aL.call(this,0,2+e,"%A")}function ikt(e){return aL.call(this,0,2+e,"%a")}const skt=":",okt="@",YV="%",uke="$";function AJ(e,t,n,r){t[0].type!==VS&&vt("First argument to data functions must be a string literal.");const i=t[0].value,s=skt+i;if(!gn(s,r))try{r[s]=n.getData(i).tuplesRef()}catch{}}function akt(e,t,n,r){t[0].type!==VS&&vt("First argument to indata must be a string literal."),t[1].type!==VS&&vt("Second argument to indata must be a string literal.");const i=t[0].value,s=t[1].value,o=okt+s;gn(o,r)||(r[o]=n.getData(i).indataRef(n,s))}function sf(e,t,n,r){if(t[0].type===VS)Ofe(n,r,t[0].value);else for(e in n.scales)Ofe(n,r,e)}function Ofe(e,t,n){const r=YV+n;if(!gn(t,r))try{t[r]=e.scaleRef(n)}catch{}}function Ig(e,t){if(Rr(e))return e;if(cn(e)){const n=t.scales[e];return n&&Ewt(n.value)?n.value:void 0}}function ukt(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=sf,n._range=sf,n._scale=sf;const r=i=>"_["+(i.type===VS?Jt(YV+i.value):Jt(YV)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function kJ(e,t){return function(n,r,i){if(n){const s=Ig(n,(i||this).context);return s&&s.path[e](r)}else return t(r)}}const lkt=kJ("area",wpt),ckt=kJ("bounds",Cpt),fkt=kJ("centroid",Npt);function dkt(e,t){const n=Ig(e,(t||this).context);return n&&n.scale()}function hkt(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function RJ(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function pkt(){return RJ(this.context.dataflow,"warn",arguments)}function mkt(){return RJ(this.context.dataflow,"info",arguments)}function gkt(){return RJ(this.context.dataflow,"debug",arguments)}function jB(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function KV(e){const t=bb(e),n=jB(t.r),r=jB(t.g),i=jB(t.b);return .2126*n+.7152*r+.0722*i}function ykt(e,t){const n=KV(e),r=KV(t),i=Math.max(n,r),s=Math.min(n,r);return(i+.05)/(s+.05)}function vkt(){const e=[].slice.call(arguments);return e.unshift({}),kr(...e)}function lke(e,t){return e===t||e!==e&&t!==t?!0:xt(e)?xt(t)&&e.length===t.length?bkt(e,t):!1:un(e)&&un(t)?cke(e,t):!1}function bkt(e,t){for(let n=0,r=e.length;n<r;++n)if(!lke(e[n],t[n]))return!1;return!0}function cke(e,t){for(const n in e)if(!lke(e[n],t[n]))return!1;return!0}function Mfe(e){return t=>cke(e,t)}function xkt(e,t,n,r,i,s){const o=this.context.dataflow,a=this.context.data[e],u=a.input,l=o.stamp();let c=a.changes,f,d;if(o._trigger===!1||!(u.value.length||t||r))return 0;if((!c||c.stamp<l)&&(a.changes=c=o.changeset(),c.stamp=l,o.runAfter(()=>{a.modified=!0,o.pulse(u,c).run()},!0,1)),n&&(f=n===!0?ep:xt(n)||PM(n)?n:Mfe(n),c.remove(f)),t&&c.insert(t),r&&(f=Mfe(r),u.value.some(f)?c.remove(f):c.insert(r)),i)for(d in s)c.modify(i,d,s[d]);return 1}function _kt(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function wkt(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const Lfe={};function Ekt(e,t){const n=Lfe[t]||(Lfe[t]=Zh(t));return xt(e)?e.map(n):n(e)}function IJ(e){return xt(e)||ArrayBuffer.isView(e)?e:null}function PJ(e){return IJ(e)||(cn(e)?e:null)}function Skt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return IJ(e).join(...n)}function Tkt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return PJ(e).indexOf(...n)}function Ckt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return PJ(e).lastIndexOf(...n)}function Akt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return PJ(e).slice(...n)}function kkt(e,t,n){return Rr(n)&&vt("Function argument passed to replace."),String(e).replace(t,n)}function Rkt(e){return IJ(e).slice().reverse()}function Ikt(e,t,n){return tQ(e||0,t||0,n||0)}function Pkt(e,t){const n=Ig(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function Nkt(e,t){const n=Ig(e,(t||this).context);return n?n.copy():void 0}function Dkt(e,t){const n=Ig(e,(t||this).context);return n?n.domain():[]}function Okt(e,t,n){const r=Ig(e,(n||this).context);return r?xt(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function Mkt(e,t){const n=Ig(e,(t||this).context);return n&&n.range?n.range():[]}function Lkt(e,t,n){const r=Ig(e,(n||this).context);return r?r(t):void 0}function Fkt(e,t,n,r,i){e=Ig(e,(i||this).context);const s=eAe(t,n);let o=e.domain(),a=o[0],u=pi(o),l=fc;return u-a?l=zCe(e,a,u):e=(e.interpolator?Ii("sequential")().interpolator(e.interpolator()):Ii("linear")().interpolate(e.interpolate()).range(e.range())).domain([a=0,u=1]),e.ticks&&(o=e.ticks(+r||15),a!==o[0]&&o.unshift(a),u!==pi(o)&&o.push(u)),o.forEach(c=>s.stop(l(c),e(c))),s}function $kt(e,t,n){const r=Ig(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function Bkt(e){let t=null;return function(n){return n?R4(n,t=t||BS(e)):e}}const fke=e=>e.data;function dke(e,t){const n=oke.call(t,e);return n.root&&n.root.lookup||{}}function jkt(e,t,n){const r=dke(e,this),i=r[t],s=r[n];return i&&s?i.path(s).map(fke):void 0}function Ukt(e,t){const n=dke(e,this)[t];return n?n.ancestors().map(fke):void 0}const hke=()=>typeof window<"u"&&window||null;function zkt(){const e=hke();return e?e.screen:{}}function Vkt(){const e=hke();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function Hkt(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function pke(e,t,n){if(!e)return[];const[r,i]=e,s=new qa().set(r[0],r[1],i[0],i[1]),o=n||this.context.dataflow.scenegraph().root;return QAe(o,s,qkt(t))}function qkt(e){let t=null;if(e){const n=ln(e.marktype),r=ln(e.markname);t=i=>(!n.length||n.some(s=>i.marktype===s))&&(!r.length||r.some(s=>i.name===s))}return t}function Wkt(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=ln(e);const i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function Gkt(e){return ln(e).reduce((t,n,r)=>{let[i,s]=n;return t+=r==0?`M ${i},${s} `:r===e.length-1?" Z":`L ${i},${s} `},"")}function Ykt(e,t,n){const{x:r,y:i,mark:s}=n,o=new qa().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[u,l]of t)u<o.x1&&(o.x1=u),u>o.x2&&(o.x2=u),l<o.y1&&(o.y1=l),l>o.y2&&(o.y2=l);return o.translate(r,i),pke([[o.x1,o.y1],[o.x2,o.y2]],e,s).filter(u=>Kkt(u.x,u.y,t))}function Kkt(e,t,n){let r=0;for(let i=0,s=n.length-1;i<n.length;s=i++){const[o,a]=n[s],[u,l]=n[i];l>t!=a>t&&e<(o-u)*(t-l)/(a-l)+u&&r++}return r&1}const L4={random(){return np()},cumulativeNormal:LM,cumulativeLogNormal:_X,cumulativeUniform:TX,densityNormal:gX,densityLogNormal:xX,densityUniform:SX,quantileNormal:FM,quantileLogNormal:wX,quantileUniform:CX,sampleNormal:MM,sampleLogNormal:bX,sampleUniform:EX,isArray:xt,isBoolean:tx,isDate:eb,isDefined(e){return e!==void 0},isNumber:Ri,isObject:un,isRegExp:JSe,isString:cn,isTuple:PM,isValid(e){return e!=null&&e===e},toBoolean:eX,toDate(e){return tX(e)},toNumber:rc,toString:nX,indexof:Tkt,join:Skt,lastindexof:Ckt,replace:kkt,reverse:Rkt,slice:Akt,flush:XSe,lerp:ZSe,merge:vkt,pad:nTe,peek:pi,pluck:Ekt,span:VR,inrange:PE,truncate:rTe,rgb:bb,lab:VN,hcl:HN,hsl:UN,luminance:KV,contrast:ykt,sequence:Gd,format:Q3t,utcFormat:J3t,utcParse:ekt,utcOffset:yTe,utcSequence:xTe,timeFormat:ake,timeParse:Z3t,timeOffset:gTe,timeSequence:bTe,timeUnitSpecifier:sTe,monthFormat:tkt,monthAbbrevFormat:nkt,dayFormat:rkt,dayAbbrevFormat:ikt,quarter:WSe,utcquarter:GSe,week:aTe,utcweek:cTe,dayofyear:oTe,utcdayofyear:lTe,warn:pkt,info:mkt,debug:gkt,extent(e){return fg(e)},inScope:hkt,intersect:pke,clampRange:YSe,pinchDistance:_kt,pinchAngle:wkt,screen:zkt,containerSize:Hkt,windowSize:Vkt,bandspace:Ikt,setdata:K3t,pathShape:Bkt,panLinear:zSe,panLog:VSe,panPow:HSe,panSymlog:qSe,zoomLinear:YK,zoomLog:KK,zoomPow:kD,zoomSymlog:XK,encode:X3t,modify:xkt,lassoAppend:Wkt,lassoPath:Gkt,intersectLasso:Ykt},Xkt=["view","item","group","xy","x","y"],Qkt="event.vega.",mke="this.",NJ={},gke={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${Jt(uke+e)}]`,functions:Jkt,constants:tke,visitors:NJ},yke=rke(gke);function Jkt(e){const t=nke(e);Xkt.forEach(n=>t[n]=Qkt+n);for(const n in L4)t[n]=mke+n;return kr(t,ukt(e,L4,NJ)),t}function wa(e,t,n){return arguments.length===1?L4[e]:(L4[e]=t,n&&(NJ[e]=n),yke.functions[e]=mke+e,this)}wa("bandwidth",Pkt,sf);wa("copy",Nkt,sf);wa("domain",Dkt,sf);wa("range",Mkt,sf);wa("invert",Okt,sf);wa("scale",Lkt,sf);wa("gradient",Fkt,sf);wa("geoArea",lkt,sf);wa("geoBounds",ckt,sf);wa("geoCentroid",fkt,sf);wa("geoShape",$kt,sf);wa("geoScale",dkt,sf);wa("indata",Y3t,akt);wa("data",oke,AJ);wa("treePath",jkt,AJ);wa("treeAncestors",Ukt,AJ);wa("vlSelectionTest",j3t,CJ);wa("vlSelectionIdTest",V3t,CJ);wa("vlSelectionResolve",q3t,CJ);wa("vlSelectionTuples",H3t);function hg(e,t){const n={};let r;try{e=cn(e)?e:Jt(e)+"",r=SJ(e)}catch{vt("Expression parse error: "+e)}r.visit(s=>{if(s.type!==Y3e)return;const o=s.callee.name,a=gke.visitors[o];a&&a(o,s.arguments,t,n)});const i=yke(r);return i.globals.forEach(s=>{const o=uke+s;!gn(n,o)&&t.getSignal(s)&&(n[o]=t.signalRef(s))}),{$expr:kr({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function Zkt(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}const e4t=A0(["rule"]),Ffe=A0(["group","image","rect"]);function t4t(e,t){let n="";return e4t[t]||(e.x2&&(e.x?(Ffe[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(Ffe[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function DJ(e){return(e+"").toLowerCase()}function n4t(e){return DJ(e)==="operator"}function r4t(e){return DJ(e)==="collect"}function r3(e,t,n){n.endsWith(";")||(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function i4t(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var s4t={operator:(e,t)=>r3(e,["_"],t.code),parameter:(e,t)=>r3(e,["datum","_"],t.code),event:(e,t)=>r3(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return r3(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const s in r){const o="o["+Jt(s)+"]";i+=`$=${r[s].code};if(${o}!==$)${o}=$,m=1;`}return i+=t4t(r,n),i+="return m;",r3(e,["item","_"],i)},codegen:{get(e){const t=`[${e.map(Jt).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=(s,o)=>{const a=t[o];let u,l;return s.path?(u=`a${s.path}`,l=`b${s.path}`):((n=n||{})["f"+o]=s,u=`this.f${o}(a)`,l=`this.f${o}(b)`),i4t(u,l,-a,a)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function o4t(e){const t=this;n4t(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function a4t(e){const t=this;if(e.params){const n=t.get(e.id);n||vt("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function u4t(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=xt(i)?i.map(s=>$fe(s,n,t)):$fe(i,n,t)}return t}function $fe(e,t,n){if(!e||!un(e))return e;for(let r=0,i=Bfe.length,s;r<i;++r)if(s=Bfe[r],gn(e,s.key))return s.parse(e,t,n);return e}var Bfe=[{key:"$ref",parse:l4t},{key:"$key",parse:f4t},{key:"$expr",parse:c4t},{key:"$field",parse:d4t},{key:"$encode",parse:p4t},{key:"$compare",parse:h4t},{key:"$context",parse:m4t},{key:"$subflow",parse:g4t},{key:"$tupleid",parse:y4t}];function l4t(e,t){return t.get(e.$ref)||vt("Operator not defined: "+e.$ref)}function c4t(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=cd(t.parameterExpression(e.$expr),e.$fields))}function f4t(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=ZK(e.$key,e.$flat,t.expr.codegen))}function d4t(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=Zh(e.$field,e.$name,t.expr.codegen))}function h4t(e,t){const n="c:"+e.$compare+"_"+e.$order,r=ln(e.$compare).map(i=>i&&i.$tupleid?Ln:i);return t.fn[n]||(t.fn[n]=QK(r,e.$order,t.expr.codegen))}function p4t(e,t){const n=e.$encode,r={};for(const i in n){const s=n[i];r[i]=cd(t.encodeExpression(s.$expr),s.$fields),r[i].output=s.$output}return r}function m4t(e,t){return t}function g4t(e,t){const n=e.$subflow;return function(r,i,s){const o=t.fork().parse(n),a=o.get(n.operators[0].id),u=o.signals.parent;return u&&u.set(s),a.detachSubflow=()=>t.detach(o),a}}function y4t(){return Ln}function v4t(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(s=>t.get(s)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(s=>t.get(s)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&vt("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function b4t(e){var t=this,n=un(n=e.source)?n.$ref:n,r=t.get(n),i=null,s=e.update,o=void 0;r||vt("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),s&&s.$expr&&(s.$params&&(o=t.parseParameters(s.$params)),s=t.handlerExpression(s.$expr)),t.update(e,r,i,s,o)}const x4t={skip:!0};function _4t(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(s=>{const o=t.signals[s];e.signals(s,o)&&(r[s]=o.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(s=>{const o=t.data[s];e.data(s,o)&&(i[s]=o.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(s=>s.getState(e))),n}function w4t(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(s=>{n.update(t.signals[s],i[s],x4t)}),Object.keys(r||{}).forEach(s=>{n.pulse(t.data[s].input,n.changeset().remove(ep).insert(r[s]))}),(e.subcontext||[]).forEach((s,o)=>{const a=t.subcontext[o];a&&a.setState(s)})}function vke(e,t,n,r){return new bke(e,t,n,r)}function bke(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||s4t,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function jfe(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}bke.prototype=jfe.prototype={fork(){const e=new jfe(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),r4t(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let s=n.get(e.parent.$ref);s?(r.connect(s,[t]),t.targets().add(s)):(n.unresolved=n.unresolved||[]).push(()=>{s=n.get(e.parent.$ref),r.connect(s,[t]),t.targets().add(s)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const s in e.data){const o=n.data[s]||(n.data[s]={});e.data[s].forEach(a=>o[a]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[DJ(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:Zkt,parseOperator:o4t,parseOperatorParameters:a4t,parseParameters:u4t,parseStream:v4t,parseUpdate:b4t,getState:_4t,setState:w4t};function E4t(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),xke(t,e.description()))}function xke(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function S4t(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const UB="default";function T4t(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:UB,item:null}));e.on(e.events("view","pointermove"),t,(n,r)=>{const i=t.value,s=i?cn(i)?i:i.user:UB,o=r.item&&r.item.cursor||null;return i&&s===i.user&&o==i.item?i:{user:s,item:o}}),e.add(null,function(n){let r=n.cursor,i=this.value;return cn(r)||(i=r.item,r=r.user),XV(e,r&&r!==UB?r:i||r),i},{cursor:t})}function XV(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function XD(e,t){var n=e._runtime.data;return gn(n,t)||vt("Unrecognized data set: "+t),n[t]}function C4t(e,t){return arguments.length<2?XD(this,e).values.value:uL.call(this,e,Gw().remove(ep).insert(t))}function uL(e,t){jTe(t)||vt("Second argument to changes must be a changeset.");const n=XD(this,e);return n.modified=!0,this.pulse(n.input,t)}function A4t(e,t){return uL.call(this,e,Gw().insert(t))}function k4t(e,t){return uL.call(this,e,Gw().remove(t))}function _ke(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function wke(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function lL(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function R4t(e){var t=lL(e),n=_ke(e),r=wke(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(s){e.error(s)}})}function I4t(e,t,n){var r=e._renderer,i=r&&r.canvas(),s,o,a;return i&&(a=lL(e),o=t.changedTouches?t.changedTouches[0]:t,s=eL(o,i),s[0]-=a[0],s[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=P4t(e,n,s),t}function P4t(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(o){var a=r,u;if(o){for(u=t;u;u=u.mark.group)if(u.mark.name===o){a=u;break}}return a&&a.mark&&a.mark.interactive?a:{}}function s(o){if(!o)return n;cn(o)&&(o=i(o));const a=n.slice();for(;o;)a[0]-=o.x||0,a[1]-=o.y||0,o=o.mark&&o.mark.group;return a}return{view:dc(e),item:dc(t||{}),group:i,xy:s,x:o=>s(o)[0],y:o=>s(o)[1]}}const Ufe="view",N4t="timer",D4t="window",O4t={trap:!1};function M4t(e){const t=kr({defaults:{}},e),n=(r,i)=>{i.forEach(s=>{xt(r[s])&&(r[s]=A0(r[s]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function Eke(e,t,n,r){e._eventListeners.push({type:n,sources:ln(t),handler:r})}function L4t(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function c5(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||un(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function F4t(e,t,n){var r=this,i=new OM(n),s=function(l,c){r.runAsync(null,()=>{e===Ufe&&L4t(r,t)&&l.preventDefault(),i.receive(I4t(r,l,c))})},o;if(e===N4t)c5(r,"timer",t)&&r.timer(s,t);else if(e===Ufe)c5(r,"view",t)&&r.addEventListener(t,s,O4t);else if(e===D4t?c5(r,"window",t)&&typeof window<"u"&&(o=[window]):typeof document<"u"&&c5(r,"selector",t)&&(o=Array.from(document.querySelectorAll(e))),!o)r.warn("Can not resolve event source: "+e);else{for(var a=0,u=o.length;a<u;++a)o[a].addEventListener(t,s);Eke(r,o,t,s)}return i}function zfe(e){return e.item}function Vfe(e){return e.item.mark.source}function Hfe(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function $4t(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",zfe),Vfe,Hfe(e)),this.on(this.events("view","pointerout",zfe),Vfe,Hfe(t)),this}function B4t(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),r=this._eventListeners,i,s,o,a,u;for(i=t.length;--i>=0;)t[i].stop();for(i=r.length;--i>=0;)for(o=r[i],s=o.sources.length;--s>=0;)o.sources[s].removeEventListener(o.type,o.handler);for(e&&e.call(this,this._handler,null,null,null),i=n.length;--i>=0;)u=n[i].type,a=n[i].handler,this._handler.off(u,a);return this}function th(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}const j4t="vega-bind",U4t="vega-bind-name",z4t="vega-bind-radio";function V4t(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:o=>{o!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,o)})}},r.debounce&&(i.update=JK(r.debounce,i.update))),(r.input==null&&r.element?H4t:W4t)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function H4t(e,t,n,r){const i=n.event||"input",s=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,s),Eke(r,t,i,s),e.set=o=>{t.value=o,t.dispatchEvent(q4t(i))}}function q4t(e){return typeof Event<"u"?new Event(e):{type:e}}function W4t(e,t,n,r){const i=r.signal(n.signal),s=th("div",{class:j4t}),o=n.input==="radio"?s:s.appendChild(th("label"));o.appendChild(th("span",{class:U4t},n.name||n.signal)),t.appendChild(s);let a=G4t;switch(n.input){case"checkbox":a=Y4t;break;case"select":a=K4t;break;case"radio":a=X4t;break;case"range":a=Q4t;break}a(e,o,n,i)}function G4t(e,t,n,r){const i=th("input");for(const s in n)s!=="signal"&&s!=="element"&&i.setAttribute(s==="input"?"type":s,n[s]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=s=>i.value=s}function Y4t(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const s=th("input",i);t.appendChild(s),s.addEventListener("change",()=>e.update(s.checked)),e.elements=[s],e.set=o=>s.checked=!!o||null}function K4t(e,t,n,r){const i=th("select",{name:n.signal}),s=n.labels||[];n.options.forEach((o,a)=>{const u={value:o};QD(o,r)&&(u.selected=!0),i.appendChild(th("option",u,(s[a]||o)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=o=>{for(let a=0,u=n.options.length;a<u;++a)if(QD(n.options[a],o)){i.selectedIndex=a;return}}}function X4t(e,t,n,r){const i=th("span",{class:z4t}),s=n.labels||[];t.appendChild(i),e.elements=n.options.map((o,a)=>{const u={type:"radio",name:n.signal,value:o};QD(o,r)&&(u.checked=!0);const l=th("input",u);l.addEventListener("change",()=>e.update(o));const c=th("label",{},(s[a]||o)+"");return c.prepend(l),i.appendChild(c),l}),e.set=o=>{const a=e.elements,u=a.length;for(let l=0;l<u;++l)QD(a[l].value,o)&&(a[l].checked=!0)}}function Q4t(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,s=n.min||Math.min(0,i,+r)||0,o=n.step||vb(s,i,100),a=th("input",{type:"range",name:n.signal,min:s,max:i,step:o});a.value=r;const u=th("span",{},+r);t.appendChild(a),t.appendChild(u);const l=()=>{u.textContent=a.value,e.update(+a.value)};a.addEventListener("input",l),a.addEventListener("change",l),e.elements=[a],e.set=c=>{a.value=c,u.textContent=c}}function QD(e,t){return e===t||e+""==t+""}function Ske(e,t,n,r,i,s){return t=t||new r(e.loader()),t.initialize(n,_ke(e),wke(e),lL(e),i,s).background(e.background())}function OJ(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function J4t(e,t,n,r){const i=new r(e.loader(),OJ(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,lL(e),e);return t&&t.handlers().forEach(s=>{i.on(s.type,s.handler)}),i}function Z4t(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,s=tL(r);e=n._el=e?zB(n,e,!0):null,E4t(n),s||n.error("Unrecognized renderer type: "+r);const o=s.handler||sI,a=e?s.renderer:s.headless;return n._renderer=a?Ske(n,n._renderer,e,a):null,n._handler=J4t(n,n._handler,e,o),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=zB(n,t,!0):e.appendChild(th("form",{class:"vega-bindings"})),n._bind.forEach(u=>{u.param.element&&i!=="container"&&(u.element=zB(n,u.param.element,!!u.param.input))}),n._bind.forEach(u=>{V4t(n,u.element||t,u)})),n}function zB(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}const i3=e=>+e||0,eRt=e=>({top:e,bottom:e,left:e,right:e});function qfe(e){return un(e)?{top:i3(e.top),bottom:i3(e.bottom),left:i3(e.left),right:i3(e.right)}:eRt(i3(e))}async function MJ(e,t,n,r){const i=tL(t),s=i&&i.headless;return s||vt("Unrecognized renderer type: "+t),await e.runAsync(),Ske(e,null,null,s,n,r).renderAsync(e._scenegraph.root)}async function tRt(e,t){e!==zv.Canvas&&e!==zv.SVG&&e!==zv.PNG&&vt("Unrecognized image type: "+e);const n=await MJ(this,e,t);return e===zv.SVG?nRt(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function nRt(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function rRt(e,t){return(await MJ(this,zv.Canvas,e,t)).canvas()}async function iRt(e){return(await MJ(this,zv.SVG,e)).svg()}function sRt(e,t,n){return vke(e,MS,L4,n).parse(t)}function oRt(e){var t=this._runtime.scales;return gn(t,e)||vt("Unrecognized scale or projection: "+e),t[e].value}var Tke="width",Cke="height",LJ="padding",Wfe={skip:!0};function Ake(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===LJ?r.left+r.right:0)}function kke(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===LJ?r.top+r.bottom:0)}function aRt(e){var t=e._signals,n=t[Tke],r=t[Cke],i=t[LJ];function s(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,a=>{e._width=a.size,e._viewWidth=Ake(e,a.size),s()},{size:n}),e._resizeHeight=e.add(null,a=>{e._height=a.size,e._viewHeight=kke(e,a.size),s()},{size:r});const o=e.add(null,s,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,o.rank=i.rank+1}function uRt(e,t,n,r,i,s){this.runAfter(o=>{let a=0;o._autosize=0,o.width()!==n&&(a=1,o.signal(Tke,n,Wfe),o._resizeWidth.skip(!0)),o.height()!==r&&(a=1,o.signal(Cke,r,Wfe),o._resizeHeight.skip(!0)),o._viewWidth!==e&&(o._resize=1,o._viewWidth=e),o._viewHeight!==t&&(o._resize=1,o._viewHeight=t),(o._origin[0]!==i[0]||o._origin[1]!==i[1])&&(o._resize=1,o._origin=i),a&&o.run("enter"),s&&o.runAfter(u=>u.resize())},!1,1)}function lRt(e){return this._runtime.getState(e||{data:cRt,signals:fRt,recurse:!0})}function cRt(e,t){return t.modified&&xt(t.input.value)&&!e.startsWith("_:vega:_")}function fRt(e,t){return!(e==="parent"||t instanceof MS.proxy)}function dRt(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function hRt(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(Jft(n,t))}function pRt(e,t,n,r){const i=e.element();i&&i.setAttribute("title",mRt(r))}function mRt(e){return e==null?"":xt(e)?Rke(e):un(e)&&!eb(e)?gRt(e):e+""}function gRt(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(xt(n)?Rke(n):Ike(n))}).join(`
`)}function Rke(e){return"["+e.map(Ike).join(", ")+"]"}function Ike(e){return xt(e)?"[]":un(e)&&!eb(e)?"{}":e}function yRt(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e!=null&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function Pke(e,t){const n=this;if(t=t||{},KE.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const s=kr({},e.locale,t.locale);n.locale(ITe(s.number,s.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||zv.Canvas,n._scenegraph=new SAe;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||pRt,n._redraw=!0,n._handler=new sI().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=M4t(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=sRt(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(s=>({state:null,param:kr({},s)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=Ake(n,n._width),n._viewHeight=kke(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,aRt(n),S4t(n),T4t(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function f5(e,t){return gn(e._signals,t)?e._signals[t]:vt("Unrecognized signal name: "+Jt(t))}function Nke(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function Gfe(e,t,n,r){let i=Nke(n,r);return i||(i=OJ(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function Yfe(e,t,n){const r=Nke(t,n);return r&&t._targets.remove(r),e}en(Pke,KE,{async evaluate(e,t,n){if(await KE.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,R4t(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&C8(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&xke(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=f5(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",qfe(e)):qfe(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(tL(e)||vt("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(KE.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(f5(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:uRt,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=OJ(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,s;--r>=0;)if(s=n[r].type,i=n[r].handler,e===s&&(t===i||t===i.raw)){this._handler.off(s,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return Gfe(this,e,f5(this,e),t)},removeSignalListener(e,t){return Yfe(this,f5(this,e),t)},addDataListener(e,t){return Gfe(this,e,XD(this,e).values,t)},removeDataListener(e,t){return Yfe(this,XD(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=XV(this,null);this._globalCursor=!!e,t&&XV(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:hRt,events:F4t,finalize:B4t,hover:$4t,data:C4t,change:uL,insert:A4t,remove:k4t,scale:oRt,initialize:Z4t,toImageURL:tRt,toCanvas:rRt,toSVG:iRt,getState:lRt,setState:dRt,_watchPixelRatio:yRt});const vRt="view",JD="[",ZD="]",Dke="{",Oke="}",bRt=":",Mke=",",xRt="@",_Rt=">",wRt=/[[\]{}]/,ERt={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let Lke,Fke;function rx(e,t,n){return Lke=t||vRt,Fke=n||ERt,$ke(e.trim()).map(QV)}function SRt(e){return Fke[e]}function Ok(e,t,n,r,i){const s=e.length;let o=0,a;for(;t<s;++t){if(a=e[t],!o&&a===n)return t;i&&i.indexOf(a)>=0?--o:r&&r.indexOf(a)>=0&&++o}return t}function $ke(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=Ok(e,i,Mke,JD+Dke,ZD+Oke),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function QV(e){return e[0]==="["?TRt(e):CRt(e)}function TRt(e){const t=e.length;let n=1,r;if(n=Ok(e,n,ZD,JD,ZD),n===t)throw"Empty between selector: "+e;if(r=$ke(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==_Rt)throw"Expected '>' after between selector: "+e;r=r.map(QV);const i=QV(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function CRt(e){const t={source:Lke},n=[];let r=[0,0],i=0,s=0,o=e.length,a=0,u,l;if(e[o-1]===Oke){if(a=e.lastIndexOf(Dke),a>=0){try{r=ARt(e.substring(a+1,o-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,a).trim(),o=e.length}else throw"Unmatched right brace: "+e;a=0}if(!o)throw e;if(e[0]===xRt&&(i=++a),u=Ok(e,a,bRt),u<o&&(n.push(e.substring(s,u).trim()),s=a=++u),a=Ok(e,a,JD),a===o)n.push(e.substring(s,o).trim());else if(n.push(e.substring(s,a).trim()),l=[],s=++a,s===o)throw"Unmatched left bracket: "+e;for(;a<o;){if(a=Ok(e,a,ZD),a===o)throw"Unmatched left bracket: "+e;if(l.push(e.substring(s,a).trim()),a<o-1&&e[++a]!==JD)throw"Expected left bracket: "+e;s=++a}if(!(o=n.length)||wRt.test(n[o-1]))throw"Invalid event selector: "+e;return o>1?(t.type=n[1],i?t.markname=n[0].slice(1):SRt(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),l!=null&&(t.filter=l),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function ARt(e){const t=e.split(Mke);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}function kRt(e){return un(e)?e:{type:e||"pad"}}const s3=e=>+e||0,RRt=e=>({top:e,bottom:e,left:e,right:e});function IRt(e){return un(e)?e.signal?e:{top:s3(e.top),bottom:s3(e.bottom),left:s3(e.left),right:s3(e.right)}:RRt(s3(e))}const Lu=e=>un(e)&&!xt(e)?kr({},e):{value:e};function Kfe(e,t,n,r){return n!=null?(un(n)&&!xt(n)||xt(n)&&n.length&&un(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function Cl(e,t,n){for(const r in t)Kfe(e,r,t[r]);for(const r in n)Kfe(e,r,n[r],"update")}function rC(e,t,n){for(const r in t)n&&gn(n,r)||(e[r]=kr(e[r]||{},t[r]));return e}function EE(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const FJ="mark",$J="frame",BJ="scope",PRt="axis",NRt="axis-domain",DRt="axis-grid",ORt="axis-label",MRt="axis-tick",LRt="axis-title",FRt="legend",$Rt="legend-band",BRt="legend-entry",jRt="legend-gradient",Bke="legend-label",URt="legend-symbol",zRt="legend-title",VRt="title",HRt="title-text",qRt="title-subtitle";function WRt(e,t,n,r,i){const s={},o={};let a,u,l,c;u="lineBreak",t==="text"&&i[u]!=null&&!EE(u,e)&&VB(s,u,i[u]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),c=n===$J?i.group:n===FJ?kr({},i.mark,i[t]):null;for(u in c)l=EE(u,e)||(u==="fill"||u==="stroke")&&(EE("fill",e)||EE("stroke",e)),l||VB(s,u,c[u]);ln(r).forEach(f=>{const d=i.style&&i.style[f];for(const h in d)EE(h,e)||VB(s,h,d[h])}),e=kr({},e);for(u in s)c=s[u],c.signal?(a=a||{})[u]=c:o[u]=c;return e.enter=kr(o,e.enter),a&&(e.update=kr(a,e.update)),e}function VB(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const jke=e=>cn(e)?Jt(e):e.signal?`(${e.signal})`:Uke(e);function cL(e){if(e.gradient!=null)return YRt(e);let t=e.signal?`(${e.signal})`:e.color?GRt(e.color):e.field!=null?Uke(e.field):e.value!==void 0?Jt(e.value):void 0;return e.scale!=null&&(t=KRt(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${j8(e.exponent)})`),e.mult!=null&&(t+=`*${j8(e.mult)}`),e.offset!=null&&(t+=`+${j8(e.offset)}`),e.round&&(t=`round(${t})`),t}const d5=(e,t,n,r)=>`(${e}(${[t,n,r].map(cL).join(",")})+'')`;function GRt(e){return e.c?d5("hcl",e.h,e.c,e.l):e.h||e.s?d5("hsl",e.h,e.s,e.l):e.l||e.a?d5("lab",e.l,e.a,e.b):e.r||e.g||e.b?d5("rgb",e.r,e.g,e.b):null}function YRt(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:Jt(n));for(;t.length&&pi(t)==null;)t.pop();return t.unshift(jke(e.gradient)),`gradient(${t.join(",")})`}function j8(e){return un(e)?"("+cL(e)+")":e}function Uke(e){return zke(un(e)?e:{datum:e})}function zke(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):vt("Invalid field reference: "+Jt(e));return e.signal||(r=cn(r)?Cg(r).map(Jt).join("]["):zke(r)),t+"["+r+"]"}function KRt(e,t){const n=jke(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+j8(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function XRt(e){let t="";return e.forEach(n=>{const r=cL(n);t+=n.test?`(${n.test})?${r}:`:r}),pi(t)===":"&&(t+="null"),t}function Vke(e,t,n,r,i,s){const o={};s=s||{},s.encoders={$encode:o},e=WRt(e,t,n,r,i.config);for(const a in e)o[a]=QRt(e[a],t,s,i);return s}function QRt(e,t,n,r){const i={},s={};for(const o in e)e[o]!=null&&(i[o]=ZRt(JRt(e[o]),r,n,s));return{$expr:{marktype:t,channels:i},$fields:Object.keys(s),$output:Object.keys(e)}}function JRt(e){return xt(e)?XRt(e):cL(e)}function ZRt(e,t,n,r){const i=hg(e,t);return i.$fields.forEach(s=>r[s]=1),kr(n,i.$params),i.$expr}const eIt="outer",tIt=["value","update","init","react","bind"];function Xfe(e,t){vt(e+' for "outer" push: '+Jt(t))}function Hke(e,t){const n=e.name;if(e.push===eIt)t.signals[n]||Xfe("No prior signal definition",n),tIt.forEach(r=>{e[r]!==void 0&&Xfe("Invalid property ",r)});else{const r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function JV(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function fL(e,t,n,r){return new JV(e,t,n,r)}function eO(e,t){return fL("operator",e,t)}function Mn(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function F4(e,t){return t?{$field:e,$name:t}:{$field:e}}const ZV=F4("key");function Qfe(e,t){return{$compare:e,$order:t}}function nIt(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const rIt="ascending",iIt="descending";function sIt(e){return un(e)?(e.order===iIt?"-":"+")+dL(e.op,e.field):""}function dL(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const jJ="scope",eH="view";function gu(e){return e&&e.signal}function oIt(e){return e&&e.expr}function U8(e){if(gu(e))return!0;if(un(e)){for(const t in e)if(U8(e[t]))return!0}return!1}function t0(e,t){return e??t}function $_(e){return e&&e.signal||e}const Jfe="timer";function $4(e,t){return(e.merge?uIt:e.stream?lIt:e.type?cIt:vt("Invalid stream specification: "+Jt(e)))(e,t)}function aIt(e){return e===jJ?eH:e||eH}function uIt(e,t){const n=e.merge.map(i=>$4(i,t)),r=UJ({merge:n},e,t);return t.addStream(r).id}function lIt(e,t){const n=$4(e.stream,t),r=UJ({stream:n},e,t);return t.addStream(r).id}function cIt(e,t){let n;e.type===Jfe?(n=t.event(Jfe,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(aIt(e.source),e.type);const r=UJ({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function UJ(e,t,n){let r=t.between;return r&&(r.length!==2&&vt('Stream "between" parameter must have 2 entries: '+Jt(t)),e.between=[$4(r[0],n),$4(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(fIt(t.marktype,t.markname,t.markrole)),t.source===jJ&&r.push("inScope(event.item)"),r.length&&(e.filter=hg("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function fIt(e,t,n){const r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}const dIt={code:"_.$value",ast:{type:"Identifier",value:"value"}};function hIt(e,t,n){const r=e.encode,i={target:n};let s=e.events,o=e.update,a=[];s||vt("Signal update missing events specification."),cn(s)&&(s=rx(s,t.isSubscope()?jJ:eH)),s=ln(s).filter(u=>u.signal||u.scale?(a.push(u),0):1),a.length>1&&(a=[mIt(a)]),s.length&&a.push(s.length>1?{merge:s}:s[0]),r!=null&&(o&&vt("Signal encode and update are mutually exclusive."),o="encode(item(),"+Jt(r)+")"),i.update=cn(o)?hg(o,t):o.expr!=null?hg(o.expr,t):o.value!=null?o.value:o.signal!=null?{$expr:dIt,$params:{$value:t.signalRef(o.signal)}}:vt("Invalid signal update specification."),e.force&&(i.options={force:!0}),a.forEach(u=>t.addUpdate(kr(pIt(u,t),i)))}function pIt(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):$4(e,t)}}function mIt(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function gIt(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?vt("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=hg(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>hIt(i,t,n.id))}const vs=e=>(t,n,r)=>fL(e,n,t||void 0,r),qke=vs("aggregate"),yIt=vs("axisticks"),Wke=vs("bound"),j0=vs("collect"),Zfe=vs("compare"),vIt=vs("datajoin"),Gke=vs("encode"),bIt=vs("expression"),xIt=vs("facet"),_It=vs("field"),wIt=vs("key"),EIt=vs("legendentries"),SIt=vs("load"),TIt=vs("mark"),CIt=vs("multiextent"),AIt=vs("multivalues"),kIt=vs("overlap"),RIt=vs("params"),Yke=vs("prefacet"),IIt=vs("projection"),PIt=vs("proxy"),NIt=vs("relay"),Kke=vs("render"),DIt=vs("scale"),Xw=vs("sieve"),OIt=vs("sortitems"),Xke=vs("viewlayout"),MIt=vs("values");let LIt=0;const Qke={min:"min",max:"max",count:"sum"};function FIt(e,t){const n=e.type||"linear";LCe(n)||vt("Unrecognized scale type: "+Jt(n)),t.addScale(e.name,{type:n,domain:void 0})}function $It(e,t){const n=t.getScale(e.name).params;let r;n.domain=Jke(e.domain,e,t),e.range!=null&&(n.range=e4e(e,t,n)),e.interpolate!=null&&YIt(e.interpolate,n),e.nice!=null&&(n.nice=GIt(e.nice,t)),e.bins!=null&&(n.bins=WIt(e.bins,t));for(r in e)gn(n,r)||r==="name"||(n[r]=Gh(e[r],t))}function Gh(e,t){return un(e)?e.signal?t.signalRef(e.signal):vt("Unsupported object: "+Jt(e)):e}function z8(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>Gh(n,t))}function hL(e){vt("Can not find data set: "+Jt(e))}function Jke(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&vt("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(xt(e)?BIt:e.fields?UIt:jIt)(e,t,n)}function BIt(e,t,n){return e.map(r=>Gh(r,n))}function jIt(e,t,n){const r=n.getData(e.data);return r||hL(e.data),$S(t.type)?r.valuesRef(n,e.field,Zke(e.sort,!1)):BCe(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function UIt(e,t,n){const r=e.data,i=e.fields.reduce((s,o)=>(o=cn(o)?{data:r,field:o}:xt(o)||o.signal?zIt(o,n):o,s.push(o),s),[]);return($S(t.type)?VIt:BCe(t.type)?HIt:qIt)(e,n,i)}function zIt(e,t){const n="_:vega:_"+LIt++,r=j0({});if(xt(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+Jt(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,Xw({})]),{data:n,field:"data"}}function VIt(e,t,n){const r=Zke(e.sort,!0);let i,s;const o=n.map(l=>{const c=t.getData(l.data);return c||hL(l.data),c.countsRef(t,l.field,r)}),a={groupby:ZV,pulse:o};r&&(i=r.op||"count",s=r.field?dL(i,r.field):"count",a.ops=[Qke[i]],a.fields=[t.fieldRef(s)],a.as=[s]),i=t.add(qke(a));const u=t.add(j0({pulse:Mn(i)}));return s=t.add(MIt({field:ZV,sort:t.sortRef(r),pulse:Mn(u)})),Mn(s)}function Zke(e,t){return e&&(!e.field&&!e.op?un(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?vt("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!Qke[e.op]&&vt("Multiple domain scales can not be sorted using "+e.op)),e}function HIt(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||hL(i.data),s.domainRef(t,i.field)});return Mn(t.add(AIt({values:r})))}function qIt(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||hL(i.data),s.extentRef(t,i.field)});return Mn(t.add(CIt({extents:r})))}function WIt(e,t){return e.signal||xt(e)?z8(e,t):t.objectProperty(e)}function GIt(e,t){return e.signal?t.signalRef(e.signal):un(e)?{interval:Gh(e.interval),step:Gh(e.step)}:Gh(e)}function YIt(e,t){t.interpolate=Gh(e.type||e),e.gamma!=null&&(t.interpolateGamma=Gh(e.gamma))}function e4e(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(cn(i)){if(r&&gn(r,i))return e=kr({},e,{range:r[i]}),e4e(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=$S(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:vt("Unrecognized scale range value: "+Jt(i))}else if(i.scheme){n.scheme=xt(i.scheme)?z8(i.scheme,t):Gh(i.scheme,t),i.extent&&(n.schemeExtent=z8(i.extent,t)),i.count&&(n.schemeCount=Gh(i.count,t));return}else if(i.step){n.rangeStep=Gh(i.step,t);return}else{if($S(e.type)&&!xt(i))return Jke(i,e,t);xt(i)||vt("Unsupported range type: "+Jt(i))}return i.map(s=>(xt(s)?z8:Gh)(s,t))}function KIt(e,t){const n=t.config.projection||{},r={};for(const i in e)i!=="name"&&(r[i]=tH(e[i],i,t));for(const i in n)r[i]==null&&(r[i]=tH(n[i],i,t));t.addProjection(e.name,r)}function tH(e,t,n){return xt(e)?e.map(r=>tH(r,t,n)):un(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:vt("Unsupported parameter object: "+Jt(e)):e}const U0="top",iC="left",sC="right",Cb="bottom",t4e="center",XIt="vertical",QIt="start",JIt="middle",ZIt="end",nH="index",zJ="label",e6t="offset",HS="perc",t6t="perc2",Kh="value",cI="guide-label",VJ="guide-title",n6t="group-title",r6t="group-subtitle",ede="symbol",V8="gradient",rH="discrete",iH="size",i6t="shape",s6t="fill",o6t="stroke",a6t="strokeWidth",u6t="strokeDash",l6t="opacity",HJ=[iH,i6t,s6t,o6t,a6t,u6t,l6t],fI={name:1,style:1,interactive:1},wi={value:0},Xh={value:1},pL="group",n4e="rect",qJ="rule",c6t="symbol",Qw="text";function B4(e){return e.type=pL,e.interactive=e.interactive||!1,e}function fd(e,t){const n=(r,i)=>t0(e[r],t0(t[r],i));return n.isVertical=r=>XIt===t0(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>t0(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>t0(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>t0(e.columns,t0(t.columns,+n.isVertical(!0))),n}function r4e(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function f6t(e,t,n){const r=t.config.style[n];return r&&r[e]}function mL(e,t,n){return`item.anchor === '${QIt}' ? ${e} : item.anchor === '${ZIt}' ? ${t} : ${n}`}const WJ=mL(Jt(iC),Jt(sC),Jt(t4e));function d6t(e){const t=e("tickBand");let n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},un(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function i4e(e,t){return t?e?un(e)?Object.assign({},e,{offset:i4e(e.offset,t)}):{value:e,offset:t}:t:e}function fh(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=rC(e.encode,t,fI)):e.interactive=!1,e}function h6t(e,t,n,r){const i=fd(e,n),s=i.isVertical(),o=i.gradientThickness(),a=i.gradientLength();let u,l,c,f,d;s?(l=[0,1],c=[0,0],f=o,d=a):(l=[0,0],c=[1,0],f=a,d=o);const h={enter:u={opacity:wi,x:wi,y:wi,width:Lu(f),height:Lu(d)},update:kr({},u,{opacity:Xh,fill:{gradient:t,start:l,stop:c}}),exit:{opacity:wi}};return Cl(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),fh({type:n4e,role:jRt,encode:h},r)}function p6t(e,t,n,r,i){const s=fd(e,n),o=s.isVertical(),a=s.gradientThickness(),u=s.gradientLength();let l,c,f,d,h="";o?(l="y",f="y2",c="x",d="width",h="1-"):(l="x",f="x2",c="y",d="height");const p={opacity:wi,fill:{scale:t,field:Kh}};p[l]={signal:h+"datum."+HS,mult:u},p[c]=wi,p[f]={signal:h+"datum."+t6t,mult:u},p[d]=Lu(a);const m={enter:p,update:kr({},p,{opacity:Xh}),exit:{opacity:wi}};return Cl(m,{stroke:s("gradientStrokeColor"),strokeWidth:s("gradientStrokeWidth")},{opacity:s("gradientOpacity")}),fh({type:n4e,role:$Rt,key:Kh,from:i,encode:m},r)}const m6t=`datum.${HS}<=0?"${iC}":datum.${HS}>=1?"${sC}":"${t4e}"`,g6t=`datum.${HS}<=0?"${Cb}":datum.${HS}>=1?"${U0}":"${JIt}"`;function tde(e,t,n,r){const i=fd(e,t),s=i.isVertical(),o=Lu(i.gradientThickness()),a=i.gradientLength();let u=i("labelOverlap"),l,c,f,d,h="";const p={enter:l={opacity:wi},update:c={opacity:Xh,text:{field:zJ}},exit:{opacity:wi}};return Cl(p,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:t0(e.labelLimit,t.gradientLabelLimit)}),s?(l.align={value:"left"},l.baseline=c.baseline={signal:g6t},f="y",d="x",h="1-"):(l.align=c.align={signal:m6t},l.baseline={value:"top"},f="x",d="y"),l[f]=c[f]={signal:h+"datum."+HS,mult:a},l[d]=c[d]=o,o.offset=t0(e.labelOffset,t.gradientLabelOffset)||0,u=u?{separation:i("labelSeparation"),method:u,order:"datum."+nH}:void 0,fh({type:Qw,role:Bke,style:cI,key:Kh,from:r,encode:p,overlap:u},n)}function y6t(e,t,n,r,i){const s=fd(e,t),o=n.entries,a=!!(o&&o.interactive),u=o?o.name:void 0,l=s("clipHeight"),c=s("symbolOffset"),f={data:"value"},d=`(${i}) ? datum.${e6t} : datum.${iH}`,h=l?Lu(l):{field:iH},p=`datum.${nH}`,m=`max(1, ${i})`;let g,b,y,x,w;h.mult=.5,g={enter:b={opacity:wi,x:{signal:d,mult:.5,offset:c},y:h},update:y={opacity:Xh,x:b.x,y:b.y},exit:{opacity:wi}};let T=null,A=null;e.fill||(T=t.symbolBaseFillColor,A=t.symbolBaseStrokeColor),Cl(g,{fill:s("symbolFillColor",T),shape:s("symbolType"),size:s("symbolSize"),stroke:s("symbolStrokeColor",A),strokeDash:s("symbolDash"),strokeDashOffset:s("symbolDashOffset"),strokeWidth:s("symbolStrokeWidth")},{opacity:s("symbolOpacity")}),HJ.forEach(M=>{e[M]&&(y[M]=b[M]={scale:e[M],field:Kh})});const k=fh({type:c6t,role:URt,key:Kh,from:f,clip:l?!0:void 0,encode:g},n.symbols),I=Lu(c);I.offset=s("labelOffset"),g={enter:b={opacity:wi,x:{signal:d,offset:I},y:h},update:y={opacity:Xh,text:{field:zJ},x:b.x,y:b.y},exit:{opacity:wi}},Cl(g,{align:s("labelAlign"),baseline:s("labelBaseline"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontStyle:s("labelFontStyle"),fontWeight:s("labelFontWeight"),limit:s("labelLimit")});const O=fh({type:Qw,role:Bke,style:cI,key:Kh,from:f,encode:g},n.labels);return g={enter:{noBound:{value:!l},width:wi,height:l?Lu(l):wi,opacity:wi},exit:{opacity:wi},update:y={opacity:Xh,row:{signal:null},column:{signal:null}}},s.isVertical(!0)?(x=`ceil(item.mark.items.length / ${m})`,y.row.signal=`${p}%${x}`,y.column.signal=`floor(${p} / ${x})`,w={field:["row",p]}):(y.row.signal=`floor(${p} / ${m})`,y.column.signal=`${p} % ${m}`,w={field:p}),y.column.signal=`(${i})?${y.column.signal}:${p}`,r={facet:{data:r,name:"value",groupby:nH}},B4({role:BJ,from:r,encode:rC(g,o,fI),marks:[k,O],name:u,interactive:a,sort:w})}function v6t(e,t){const n=fd(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const GJ='item.orient === "left"',YJ='item.orient === "right"',gL=`(${GJ} || ${YJ})`,b6t=`datum.vgrad && ${gL}`,x6t=mL('"top"','"bottom"','"middle"'),_6t=mL('"right"','"left"','"center"'),w6t=`datum.vgrad && ${YJ} ? (${_6t}) : (${gL} && !(datum.vgrad && ${GJ})) ? "left" : ${WJ}`,E6t=`item._anchor || (${gL} ? "middle" : "start")`,S6t=`${b6t} ? (${GJ} ? -90 : 90) : 0`,T6t=`${gL} ? (datum.vgrad ? (${YJ} ? "bottom" : "top") : ${x6t}) : "top"`;function C6t(e,t,n,r){const i=fd(e,t),s={enter:{opacity:wi},update:{opacity:Xh,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:wi}};return Cl(s,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:E6t},angle:{signal:S6t},align:{signal:w6t},baseline:{signal:T6t},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),fh({type:Qw,role:zRt,style:VJ,from:r,encode:s},n)}function A6t(e,t){let n;return un(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+nde(e.path)+")":e.sphere&&(n="geoShape("+nde(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function nde(e){return un(e)&&e.signal?e.signal:Jt(e)}function s4e(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===pL?BJ:t||FJ}function k6t(e){return{marktype:e.type,name:e.name||void 0,role:e.role||s4e(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function R6t(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function KJ(e,t){const n=VTe(e.type);n||vt("Unrecognized transform type: "+Jt(e.type));const r=fL(n.type.toLowerCase(),null,o4e(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function o4e(e,t,n){const r={},i=e.params.length;for(let s=0;s<i;++s){const o=e.params[s];r[o.name]=I6t(o,t,n)}return r}function I6t(e,t,n){const r=e.type,i=t[e.name];if(r==="index")return P6t(e,t,n);if(i===void 0){e.required&&vt("Missing required "+Jt(t.type)+" parameter: "+Jt(e.name));return}else{if(r==="param")return N6t(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!gu(i)?i.map(s=>rde(e,s,n)):rde(e,i,n)}function rde(e,t,n){const r=e.type;if(gu(t))return sde(r)?vt("Expression references can not be signals."):HB(r)?n.fieldRef(t):ode(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||HB(r);return i&&D6t(t)?n.exprRef(t.expr,t.as):i&&O6t(t)?F4(t.field,t.as):sde(r)?hg(t,n):M6t(r)?Mn(n.getData(t).values):HB(r)?F4(t):ode(r)?n.compareRef(t):t}}function P6t(e,t,n){return cn(t.from)||vt('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function N6t(e,t,n){const r=t[e.name];return e.array?(xt(r)||vt("Expected an array of sub-parameters. Instead: "+Jt(r)),r.map(i=>ide(e,i,n))):ide(e,r,n)}function ide(e,t,n){const r=e.params.length;let i;for(let o=0;o<r;++o){i=e.params[o];for(const a in i.key)if(i.key[a]!==t[a]){i=null;break}if(i)break}i||vt("Unsupported parameter: "+Jt(t));const s=kr(o4e(i,t,n),i.key);return Mn(n.add(RIt(s)))}const D6t=e=>e&&e.expr,O6t=e=>e&&e.field,M6t=e=>e==="data",sde=e=>e==="expr",HB=e=>e==="field",ode=e=>e==="compare";function L6t(e,t,n){let r,i,s,o,a;return e?(r=e.facet)&&(t||vt("Only group marks can be faceted."),r.field!=null?o=a=H8(r,n):(e.data?a=Mn(n.getData(e.data).aggregate):(s=KJ(kr({type:"aggregate",groupby:ln(r.groupby)},r.aggregate),n),s.params.key=n.keyRef(r.groupby),s.params.pulse=H8(r,n),o=a=Mn(n.add(s))),i=n.keyRef(r.groupby,!0))):o=Mn(n.add(j0(null,[{}]))),o||(o=H8(e,n)),{key:i,pulse:o,parent:a}}function H8(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:Mn(t.getData(e.data).output)}function aw(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}aw.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let s=t[0],o=null,a=1;for(s&&s.type==="load"&&(s=t[1]),e.add(t[0]);a<n;++a)t[a].params.pulse=Mn(t[a-1]),e.add(t[a]),t[a].type==="aggregate"&&(o=t[a]);return new aw(e,s,i,r,o)};function a4e(e){return cn(e)?e:null}function ade(e,t,n){const r=dL(n.op,n.field);let i;if(t.ops){for(let s=0,o=t.as.length;s<o;++s)if(t.as[s]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function o3(e,t,n,r,i,s,o){const a=t[n]||(t[n]={}),u=sIt(s);let l=a4e(i),c,f;if(l!=null&&(e=t.scope,l=l+(u?"|"+u:""),c=a[l]),!c){const d=s?{field:ZV,pulse:t.countsRef(e,i,s)}:{field:e.fieldRef(i),pulse:Mn(t.output)};u&&(d.sort=e.sortRef(s)),f=e.add(fL(r,void 0,d)),o&&(t.index[i]=f),c=Mn(f),l!=null&&(a[l]=c)}return c}aw.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),s=a4e(t);let o,a,u;return s!=null&&(e=r.scope,o=i[s]),o?n&&n.field&&ade(e,o.agg.params,n):(u={groupby:e.fieldRef(t,"key"),pulse:Mn(r.output)},n&&n.field&&ade(e,u,n),a=e.add(qke(u)),o=e.add(j0({pulse:Mn(a)})),o={agg:a,ref:Mn(o)},s!=null&&(i[s]=o)),o.ref},tuplesRef(){return Mn(this.values)},extentRef(e,t){return o3(e,this,"extent","extent",t,!1)},domainRef(e,t){return o3(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return o3(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return o3(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return o3(e,this,"indata","tupleindex",t,!0,!0)}};function F6t(e,t,n){const r=e.from.facet,i=r.name,s=H8(r,t);let o;r.name||vt("Facet must have a name: "+Jt(r)),r.data||vt("Facet must reference a data set: "+Jt(r)),r.field?o=t.add(Yke({field:t.fieldRef(r.field),pulse:s})):r.groupby?o=t.add(xIt({key:t.keyRef(r.groupby),group:Mn(t.proxy(n.parent)),pulse:s})):vt("Facet must specify groupby or field: "+Jt(r));const a=t.fork(),u=a.add(j0()),l=a.add(Xw({pulse:Mn(u)}));a.addData(i,new aw(a,u,u,l)),a.addSignal("parent",null),o.params.subflow={$subflow:a.parse(e).toRuntime()}}function $6t(e,t,n){const r=t.add(Yke({pulse:n.pulse})),i=t.fork();i.add(Xw()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function u4e(e,t,n){const r=e.remove,i=e.insert,s=e.toggle,o=e.modify,a=e.values,u=t.add(eO()),l="if("+e.trigger+',modify("'+n+'",'+[i,r,s,o,a].map(f=>f??"null").join(",")+"),0)",c=hg(l,t);u.update=c.$expr,u.params=c.$params}function yL(e,t){const n=s4e(e),r=e.type===pL,i=e.from&&e.from.facet,s=e.overlap;let o=e.layout||n===BJ||n===$J,a,u,l,c,f,d,h;const p=n===FJ||o||i,m=L6t(e.from,r,t);u=t.add(vIt({key:m.key||(e.key?F4(e.key):void 0),pulse:m.pulse,clean:!r}));const g=Mn(u);u=l=t.add(j0({pulse:g})),u=t.add(TIt({markdef:k6t(e),interactive:R6t(e.interactive,t),clip:A6t(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:Mn(u)}));const b=Mn(u);u=c=t.add(Gke(Vke(e.encode,e.type,n,e.style,t,{mod:!1,pulse:b}))),u.params.parent=t.encode(),e.transform&&e.transform.forEach(A=>{const k=KJ(A,t),I=k.metadata;(I.generates||I.changes)&&vt("Mark transforms should not generate new data."),I.nomod||(c.params.mod=!0),k.params.pulse=Mn(u),t.add(u=k)}),e.sort&&(u=t.add(OIt({sort:t.compareRef(e.sort),pulse:Mn(u)})));const y=Mn(u);(i||o)&&(o=t.add(Xke({layout:t.objectProperty(e.layout),legends:t.legends,mark:b,pulse:y})),d=Mn(o));const x=t.add(Wke({mark:b,pulse:d||y}));h=Mn(x),r&&(p&&(a=t.operators,a.pop(),o&&a.pop()),t.pushState(y,d||h,g),i?F6t(e,t,m):p?$6t(e,t,m):t.parse(e),t.popState(),p&&(o&&a.push(o),a.push(x))),s&&(h=B6t(s,h,t));const w=t.add(Kke({pulse:h})),T=t.add(Xw({pulse:Mn(w)},void 0,t.parent()));e.name!=null&&(f=e.name,t.addData(f,new aw(t,l,w,T)),e.on&&e.on.forEach(A=>{(A.insert||A.remove||A.toggle)&&vt("Marks only support modify triggers."),u4e(A,t,f)}))}function B6t(e,t,n){const r=e.method,i=e.bound,s=e.separation,o={separation:gu(s)?n.signalRef(s.signal):s,method:gu(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(o.sort=n.compareRef({field:e.order})),i){const a=i.tolerance;o.boundTolerance=gu(a)?n.signalRef(a.signal):+a,o.boundScale=n.scaleRef(i.scale),o.boundOrient=i.orient}return Mn(n.add(kIt(o)))}function j6t(e,t){const n=t.config.legend,r=e.encode||{},i=fd(e,n),s=r.legend||{},o=s.name||void 0,a=s.interactive,u=s.style,l={};let c=0,f,d,h;HJ.forEach(x=>e[x]?(l[x]=e[x],c=c||e[x]):0),c||vt("Missing valid scale for legend.");const p=U6t(e,t.scaleType(c)),m={title:e.title!=null,scales:l,type:p,vgrad:p!=="symbol"&&i.isVertical()},g=Mn(t.add(j0(null,[m]))),b={enter:{x:{value:0},y:{value:0}}},y=Mn(t.add(EIt(d={type:p,scale:t.scaleRef(c),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return p===V8?(h=[h6t(e,c,n,r.gradient),tde(e,n,r.labels,y)],d.count=d.count||t.signalRef(`max(2,2*floor((${$_(i.gradientLength())})/100))`)):p===rH?h=[p6t(e,c,n,r.gradient,y),tde(e,n,r.labels,y)]:(f=v6t(e,n),h=[y6t(e,n,r,y,$_(f.columns))],d.size=H6t(e,t,h[0].marks)),h=[B4({role:BRt,from:g,encode:b,marks:h,layout:f,interactive:a})],m.title&&h.push(C6t(e,n,r.title,g)),yL(B4({role:FRt,from:g,encode:rC(V6t(i,e,n),s,fI),marks:h,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:o,interactive:a,style:u}),t)}function U6t(e,t){let n=e.type||ede;return!e.type&&z6t(e)===1&&(e.fill||e.stroke)&&(n=oQ(t)?V8:bV(t)?rH:ede),n!==V8?n:bV(t)?rH:V8}function z6t(e){return HJ.reduce((t,n)=>t+(e[n]?1:0),0)}function V6t(e,t,n){const r={enter:{},update:{}};return Cl(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function H6t(e,t,n){const r=$_(ude("size",e,n)),i=$_(ude("strokeWidth",e,n)),s=$_(q6t(n[1].encode,t,cI));return hg(`max(ceil(sqrt(${r})+${i}),${s})`,t)}function ude(e,t,n){return t[e]?`scale("${t[e]}",datum)`:r4e(e,n[0].encode)}function q6t(e,t,n){return r4e("fontSize",e)||f6t("fontSize",t,n)}const W6t=`item.orient==="${iC}"?-90:item.orient==="${sC}"?90:0`;function G6t(e,t){e=cn(e)?{text:e}:e;const n=fd(e,t.config.title),r=e.encode||{},i=r.group||{},s=i.name||void 0,o=i.interactive,a=i.style,u=[],l={},c=Mn(t.add(j0(null,[l])));return u.push(X6t(e,n,Y6t(e),c)),e.subtitle&&u.push(Q6t(e,n,r.subtitle,c)),yL(B4({role:VRt,from:c,encode:K6t(n,i),marks:u,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:s,interactive:o,style:a}),t)}function Y6t(e){const t=e.encode;return t&&t.title||kr({name:e.name,interactive:e.interactive,style:e.style},t)}function K6t(e,t){const n={enter:{},update:{}};return Cl(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:WJ},angle:{signal:W6t},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),rC(n,t,fI)}function X6t(e,t,n,r){const i={value:0},s=e.text,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Cl(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),fh({type:Qw,role:HRt,style:n6t,from:r,encode:o},n)}function Q6t(e,t,n,r){const i={value:0},s=e.subtitle,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Cl(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),fh({type:Qw,role:qRt,style:r6t,from:r,encode:o},n)}function J6t(e,t){const n=[];e.transform&&e.transform.forEach(r=>{n.push(KJ(r,t))}),e.on&&e.on.forEach(r=>{u4e(r,t,e.name)}),t.addDataPipeline(e.name,Z6t(e,t,n))}function Z6t(e,t,n){const r=[];let i=null,s=!1,o=!1,a,u,l,c,f;for(e.values?gu(e.values)||U8(e.format)?(r.push(lde(t,e)),r.push(i=zx())):r.push(i=zx({$ingest:e.values,$format:e.format})):e.url?U8(e.url)||U8(e.format)?(r.push(lde(t,e)),r.push(i=zx())):r.push(i=zx({$request:e.url,$format:e.format})):e.source&&(i=a=ln(e.source).map(d=>Mn(t.getData(d).output)),r.push(null)),u=0,l=n.length;u<l;++u)c=n[u],f=c.metadata,!i&&!f.source&&r.push(i=zx()),r.push(c),f.generates&&(o=!0),f.modifies&&!o&&(s=!0),f.source?i=c:f.changes&&(i=null);return a&&(l=a.length-1,r[0]=NIt({derive:s,pulse:l?a:a[0]}),(s||l)&&r.splice(1,0,zx())),i||r.push(zx()),r.push(Xw({})),r}function zx(e){const t=j0({},e);return t.metadata={source:!0},t}function lde(e,t){return SIt({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const l4e=e=>e===Cb||e===U0,vL=(e,t,n)=>gu(e)?r5t(e.signal,t,n):e===iC||e===U0?t:n,Fu=(e,t,n)=>gu(e)?t5t(e.signal,t,n):l4e(e)?t:n,x0=(e,t,n)=>gu(e)?n5t(e.signal,t,n):l4e(e)?n:t,c4e=(e,t,n)=>gu(e)?i5t(e.signal,t,n):e===U0?{value:t}:{value:n},e5t=(e,t,n)=>gu(e)?s5t(e.signal,t,n):e===sC?{value:t}:{value:n},t5t=(e,t,n)=>f4e(`${e} === '${U0}' || ${e} === '${Cb}'`,t,n),n5t=(e,t,n)=>f4e(`${e} !== '${U0}' && ${e} !== '${Cb}'`,t,n),r5t=(e,t,n)=>XJ(`${e} === '${iC}' || ${e} === '${U0}'`,t,n),i5t=(e,t,n)=>XJ(`${e} === '${U0}'`,t,n),s5t=(e,t,n)=>XJ(`${e} === '${sC}'`,t,n),f4e=(e,t,n)=>(t=t!=null?Lu(t):t,n=n!=null?Lu(n):n,cde(t)&&cde(n)?(t=t?t.signal||Jt(t.value):null,n=n?n.signal||Jt(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[kr({test:e},t)].concat(n||[])),cde=e=>e==null||Object.keys(e).length===1,XJ=(e,t,n)=>({signal:`${e} ? (${OE(t)}) : (${OE(n)})`}),o5t=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${iC}' ? (${OE(r)}) : `:"")+(n!=null?`${e} === '${Cb}' ? (${OE(n)}) : `:"")+(i!=null?`${e} === '${sC}' ? (${OE(i)}) : `:"")+(t!=null?`${e} === '${U0}' ? (${OE(t)}) : `:"")+"(null)"}),OE=e=>gu(e)?e.signal:e==null?null:Jt(e),a5t=(e,t)=>t===0?0:gu(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},XE=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function iE(e,t,n,r){let i;if(t&&gn(t,e))return t[e];if(gn(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[VJ][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[cI][i]}return null}function fde(e){const t={};for(const n of e)if(n)for(const r in n)t[r]=1;return Object.keys(t)}function u5t(e,t){var n=t.config,r=n.style,i=n.axis,s=t.scaleType(e.scale)==="band"&&n.axisBand,o=e.orient,a,u,l;if(gu(o)){const f=fde([n.axisX,n.axisY]),d=fde([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);a={};for(l of f)a[l]=Fu(o,iE(l,n.axisX,i,r),iE(l,n.axisY,i,r));u={};for(l of d)u[l]=o5t(o.signal,iE(l,n.axisTop,i,r),iE(l,n.axisBottom,i,r),iE(l,n.axisLeft,i,r),iE(l,n.axisRight,i,r))}else a=o===U0||o===Cb?n.axisX:n.axisY,u=n["axis"+o[0].toUpperCase()+o.slice(1)];return a||u||s?kr({},i,a,u,s):i}function l5t(e,t,n,r){const i=fd(e,t),s=e.orient;let o,a;const u={enter:o={opacity:wi},update:a={opacity:Xh},exit:{opacity:wi}};Cl(u,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const l=dde(e,0),c=dde(e,1);return o.x=a.x=Fu(s,l,wi),o.x2=a.x2=Fu(s,c),o.y=a.y=x0(s,l,wi),o.y2=a.y2=x0(s,c),fh({type:qJ,role:NRt,from:r,encode:u},n)}function dde(e,t){return{scale:e.scale,range:t}}function c5t(e,t,n,r,i){const s=fd(e,t),o=e.orient,a=e.gridScale,u=vL(o,1,-1),l=f5t(e.offset,u);let c,f,d;const h={enter:c={opacity:wi},update:d={opacity:Xh},exit:f={opacity:wi}};Cl(h,{stroke:s("gridColor"),strokeCap:s("gridCap"),strokeDash:s("gridDash"),strokeDashOffset:s("gridDashOffset"),strokeOpacity:s("gridOpacity"),strokeWidth:s("gridWidth")});const p={scale:e.scale,field:Kh,band:i.band,extra:i.extra,offset:i.offset,round:s("tickRound")},m=Fu(o,{signal:"height"},{signal:"width"}),g=a?{scale:a,range:0,mult:u,offset:l}:{value:0,offset:l},b=a?{scale:a,range:1,mult:u,offset:l}:kr(m,{mult:u,offset:l});return c.x=d.x=Fu(o,p,g),c.y=d.y=x0(o,p,g),c.x2=d.x2=x0(o,b),c.y2=d.y2=Fu(o,b),f.x=Fu(o,p),f.y=x0(o,p),fh({type:qJ,role:DRt,key:Kh,from:r,encode:h},n)}function f5t(e,t){if(t!==1)if(!un(e))e=gu(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=kr({},e);for(;n.mult!=null;)if(un(n.mult))n=n.mult=kr({},n.mult);else return n.mult=gu(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function d5t(e,t,n,r,i,s){const o=fd(e,t),a=e.orient,u=vL(a,-1,1);let l,c,f;const d={enter:l={opacity:wi},update:f={opacity:Xh},exit:c={opacity:wi}};Cl(d,{stroke:o("tickColor"),strokeCap:o("tickCap"),strokeDash:o("tickDash"),strokeDashOffset:o("tickDashOffset"),strokeOpacity:o("tickOpacity"),strokeWidth:o("tickWidth")});const h=Lu(i);h.mult=u;const p={scale:e.scale,field:Kh,band:s.band,extra:s.extra,offset:s.offset,round:o("tickRound")};return f.y=l.y=Fu(a,wi,p),f.y2=l.y2=Fu(a,h),c.x=Fu(a,p),f.x=l.x=x0(a,wi,p),f.x2=l.x2=x0(a,h),c.y=x0(a,p),fh({type:qJ,role:MRt,key:Kh,from:r,encode:d},n)}function qB(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function h5t(e,t,n,r,i,s){const o=fd(e,t),a=e.orient,u=e.scale,l=vL(a,-1,1),c=$_(o("labelFlush")),f=$_(o("labelFlushOffset")),d=o("labelAlign"),h=o("labelBaseline");let p=c===0||!!c,m;const g=Lu(i);g.mult=l,g.offset=Lu(o("labelPadding")||0),g.offset.mult=l;const b={scale:u,field:Kh,band:.5,offset:i4e(s.offset,o("labelOffset"))},y=Fu(a,p?qB(u,c,'"left"','"right"','"center"'):{value:"center"},e5t(a,"left","right")),x=Fu(a,c4e(a,"bottom","top"),p?qB(u,c,'"top"','"bottom"','"middle"'):{value:"middle"}),w=qB(u,c,`-(${f})`,f,0);p=p&&f;const T={opacity:wi,x:Fu(a,b,g),y:x0(a,b,g)},A={enter:T,update:m={opacity:Xh,text:{field:zJ},x:T.x,y:T.y,align:y,baseline:x},exit:{opacity:wi,x:T.x,y:T.y}};Cl(A,{dx:!d&&p?Fu(a,w):null,dy:!h&&p?x0(a,w):null}),Cl(A,{angle:o("labelAngle"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontWeight:o("labelFontWeight"),fontStyle:o("labelFontStyle"),limit:o("labelLimit"),lineHeight:o("labelLineHeight")},{align:d,baseline:h});const k=o("labelBound");let I=o("labelOverlap");return I=I||k?{separation:o("labelSeparation"),method:I,order:"datum.index",bound:k?{scale:u,orient:a,tolerance:k}:null}:void 0,m.align!==y&&(m.align=XE(m.align,y)),m.baseline!==x&&(m.baseline=XE(m.baseline,x)),fh({type:Qw,role:ORt,style:cI,key:Kh,from:r,encode:A,overlap:I},n)}function p5t(e,t,n,r){const i=fd(e,t),s=e.orient,o=vL(s,-1,1);let a,u;const l={enter:a={opacity:wi,anchor:Lu(i("titleAnchor",null)),align:{signal:WJ}},update:u=kr({},a,{opacity:Xh,text:Lu(e.title)}),exit:{opacity:wi}},c={signal:`lerp(range("${e.scale}"), ${mL(0,1,.5)})`};return u.x=Fu(s,c),u.y=x0(s,c),a.angle=Fu(s,wi,a5t(o,90)),a.baseline=Fu(s,c4e(s,Cb,U0),{value:Cb}),u.angle=a.angle,u.baseline=a.baseline,Cl(l,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),m5t(i,s,l,n),l.update.align=XE(l.update.align,a.align),l.update.angle=XE(l.update.angle,a.angle),l.update.baseline=XE(l.update.baseline,a.baseline),fh({type:Qw,role:LRt,style:VJ,from:r,encode:l},n)}function m5t(e,t,n,r){const i=(a,u)=>a!=null?(n.update[u]=XE(Lu(a),n.update[u]),!1):!EE(u,r),s=i(e("titleX"),"x"),o=i(e("titleY"),"y");n.enter.auto=o===s?Lu(o):Fu(t,Lu(o),Lu(s))}function g5t(e,t){const n=u5t(e,t),r=e.encode||{},i=r.axis||{},s=i.name||void 0,o=i.interactive,a=i.style,u=fd(e,n),l=d6t(u),c={scale:e.scale,ticks:!!u("ticks"),labels:!!u("labels"),grid:!!u("grid"),domain:!!u("domain"),title:e.title!=null},f=Mn(t.add(j0({},[c]))),d=Mn(t.add(yIt({scale:t.scaleRef(e.scale),extra:t.property(l.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let p;return c.grid&&h.push(c5t(e,n,r.grid,d,l)),c.ticks&&(p=u("tickSize"),h.push(d5t(e,n,r.ticks,d,p,l))),c.labels&&(p=c.ticks?p:0,h.push(h5t(e,n,r.labels,d,p,l))),c.domain&&h.push(l5t(e,n,r.domain,f)),c.title&&h.push(p5t(e,n,r.title,f)),yL(B4({role:PRt,from:f,encode:rC(y5t(u,e),i,fI),marks:h,aria:u("aria"),description:u("description"),zindex:u("zindex"),name:s,interactive:o,style:a}),t)}function y5t(e,t){const n={enter:{},update:{}};return Cl(n,{orient:e("orient"),offset:e("offset")||0,position:t0(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function d4e(e,t,n){const r=ln(e.signals),i=ln(e.scales);return n||r.forEach(s=>Hke(s,t)),ln(e.projections).forEach(s=>KIt(s,t)),i.forEach(s=>FIt(s,t)),ln(e.data).forEach(s=>J6t(s,t)),i.forEach(s=>$It(s,t)),(n||r).forEach(s=>gIt(s,t)),ln(e.axes).forEach(s=>g5t(s,t)),ln(e.marks).forEach(s=>yL(s,t)),ln(e.legends).forEach(s=>j6t(s,t)),e.title&&G6t(e.title,t),t.parseLambdas(),t}const v5t=e=>rC({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function b5t(e,t){const n=t.config,r=Mn(t.root=t.add(eO())),i=x5t(e,n);i.forEach(l=>Hke(l,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const s=t.add(j0()),o=t.add(Gke(Vke(v5t(e.encode),pL,$J,e.style,t,{pulse:Mn(s)}))),a=t.add(Xke({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:Mn(o)}));t.operators.pop(),t.pushState(Mn(o),Mn(a),null),d4e(e,t,i),t.operators.push(a);let u=t.add(Wke({mark:r,pulse:Mn(a)}));return u=t.add(Kke({pulse:Mn(u)})),u=t.add(Xw({pulse:Mn(u)})),t.addData("root",new aw(t,s,s,u)),t}function a3(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function x5t(e,t){const n=o=>t0(e[o],t[o]),r=[a3("background",n("background")),a3("autosize",kRt(n("autosize"))),a3("padding",IRt(n("padding"))),a3("width",n("width")||0),a3("height",n("height")||0)],i=r.reduce((o,a)=>(o[a.name]=a,o),{}),s={};return ln(e.signals).forEach(o=>{gn(i,o.name)?o=kr(i[o.name],o):r.push(o),s[o.name]=o}),ln(t.signals).forEach(o=>{!gn(s,o.name)&&!gn(i,o.name)&&r.push(o)}),r}function h4e(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function hde(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}h4e.prototype=hde.prototype={parse(e){return d4e(e,this)},fork(){return new hde(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof JV?Mn(e):e;return this.add(PIt({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,s){let o,a;r&&(o=r.data||(r.data={}),a=o[i]||(o[i]=[]),a.push(s))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push(Mn(this.add(Xw({pulse:e})))),this._parent.push(t),this._lookup.push(n?Mn(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return pi(this._parent)},encode(){return pi(this._encode)},lookup(){return pi(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(cn(e))return F4(e,t);e.signal||vt("Unsupported field reference: "+Jt(e));const n=e.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=Mn(this.add(_It(i)))}return r},compareRef(e){let t=!1;const n=s=>gu(s)?(t=!0,this.signalRef(s.signal)):oIt(s)?(t=!0,this.exprRef(s.expr)):s,r=ln(e.field).map(n),i=ln(e.order).map(n);return t?Mn(this.add(Zfe({fields:r,orders:i}))):Qfe(r,i)},keyRef(e,t){let n=!1;const r=s=>gu(s)?(n=!0,Mn(i[s.signal])):s,i=this.signals;return e=ln(e).map(r),n?Mn(this.add(wIt({fields:e,flat:t}))):nIt(e,t)},sortRef(e){if(!e)return e;const t=dL(e.op,e.field),n=e.order||rIt;return n.signal?Mn(this.add(Zfe({fields:t,orders:this.signalRef(n.signal)}))):Qfe(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return gn(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&vt("Duplicate signal name: "+Jt(e));const n=t instanceof JV?t:this.add(eO(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||vt("Unrecognized signal name: "+Jt(e)),this.signals[e]},signalRef(e){return this.signals[e]?Mn(this.signals[e]):(gn(this.lambdas,e)||(this.lambdas[e]=this.add(eO(null))),Mn(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const r=e[t],i=hg(r,this),s=this.lambdas[r];s.params=i.$params,s.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!un(e)?e:this.signalRef(e.signal||QJ(e))},exprRef(e,t){const n={expr:hg(e,this)};return t&&(n.expr.$name=t),Mn(this.add(bIt(n)))},addBinding(e,t){this.bindings||vt("Nested signals do not support binding: "+Jt(e)),this.bindings.push(kr({signal:e},t))},addScaleProj(e,t){gn(this.scales,e)&&vt("Duplicate scale or projection name: "+Jt(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,DIt(t))},addProjection(e,t){this.addScaleProj(e,IIt(t))},getScale(e){return this.scales[e]||vt("Unrecognized scale name: "+Jt(e)),this.scales[e]},scaleRef(e){return Mn(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return gn(this.data,e)&&vt("Duplicate data set name: "+Jt(e)),this.data[e]=t},getData(e){return this.data[e]||vt("Undefined data set name: "+Jt(e)),this.data[e]},addDataPipeline(e,t){return gn(this.data,e)&&vt("Duplicate data set name: "+Jt(e)),this.addData(e,aw.fromEntries(this,t))}};function QJ(e){return(xt(e)?_5t:w5t)(e)}function _5t(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const i=e[r];n+=(r>0?",":"")+(un(i)?i.signal||QJ(i):Jt(i))}return n+"]"}function w5t(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+Jt(r)+":"+(un(i)?i.signal||QJ(i):Jt(i));return t+"}"}function E5t(){const e="sans-serif",r="#4c78a8",i="#000",s="#888",o="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:o},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:s,grid:!1,gridWidth:1,gridColor:o,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:s,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:o,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:s,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function S5t(e,t,n){return un(e)||vt("Input Vega specification must be an object."),t=KT(E5t(),t,e.config),b5t(e,new h4e(t,n)).toRuntime()}var T5t="5.30.0";kr(MS,pwt,nTt,OTt,fCt,vCt,qCt,SCt,GCt,QCt,aAt,pAt);const C5t=Object.freeze(Object.defineProperty({__proto__:null,Bounds:qa,CanvasHandler:sI,CanvasRenderer:zD,DATE:sd,DAY:ec,DAYOFYEAR:dg,Dataflow:KE,Debug:FSe,Error:qK,EventStream:OM,Gradient:eAe,GroupItem:GM,HOURS:uh,Handler:PQ,HybridHandler:qAe,HybridRenderer:IV,Info:LSe,Item:WM,MILLISECONDS:k0,MINUTES:lh,MONTH:oc,Marks:ch,MultiPulse:fX,None:MSe,Operator:Ts,Parameters:DM,Pulse:tb,QUARTER:id,RenderType:zv,Renderer:iI,ResourceLoader:aAe,SECONDS:tp,SVGHandler:NAe,SVGRenderer:FQ,SVGStringRenderer:HAe,Scenegraph:SAe,TIME_UNITS:rX,Transform:pt,View:Pke,WEEK:fu,Warn:WK,YEAR:wl,accessor:cd,accessorFields:sc,accessorName:Wo,array:ln,ascending:AM,bandwidthNRD:mX,bin:WTe,bootstrapCI:GTe,boundClip:t3e,boundContext:eI,boundItem:TV,boundMark:xAe,boundStroke:D1,changeset:Gw,clampRange:YSe,codegenExpression:rke,compare:QK,constant:dc,cumulativeLogNormal:_X,cumulativeNormal:LM,cumulativeUniform:TX,dayofyear:oTe,debounce:JK,defaultLocale:oX,definition:VTe,densityLogNormal:xX,densityNormal:gX,densityUniform:SX,domChild:cu,domClear:Vh,domCreate:jv,domFind:IQ,dotbin:YTe,error:vt,expressionFunction:wa,extend:kr,extent:fg,extentIndex:KSe,falsy:xv,fastmap:QT,field:Zh,flush:XSe,font:JM,fontFamily:rI,fontSize:Ag,format:T8,formatLocale:RD,formats:lX,hasOwnProperty:gn,id:zR,identity:fc,inferType:NTe,inferTypes:DTe,ingest:Vi,inherits:en,inrange:PE,interpolate:aQ,interpolateColors:HM,interpolateRange:jCe,intersect:QAe,intersectBoxLine:NE,intersectPath:mQ,intersectPoint:gQ,intersectRule:lAe,isArray:xt,isBoolean:tx,isDate:eb,isFunction:Rr,isIterable:QSe,isNumber:Ri,isObject:un,isRegExp:JSe,isString:cn,isTuple:PM,key:ZK,lerp:ZSe,lineHeight:Eb,loader:RM,locale:ITe,logger:GK,lruCache:eTe,markup:LQ,merge:tTe,mergeConfig:KT,multiLineOffset:AQ,one:YT,pad:nTe,panLinear:zSe,panLog:VSe,panPow:HSe,panSymlog:qSe,parse:S5t,parseExpression:SJ,parseSelector:rx,path:iM,pathCurves:dQ,pathEqual:n3e,pathParse:BS,pathRectangle:rAe,pathRender:R4,pathSymbols:nAe,pathTrail:iAe,peek:pi,point:eL,projection:KQ,quantileLogNormal:wX,quantileNormal:FM,quantileUniform:CX,quantiles:hX,quantizeInterpolator:UCe,quarter:WSe,quartiles:pX,get random(){return np},randomInteger:v_t,randomKDE:vX,randomLCG:y_t,randomLogNormal:XTe,randomMixture:QTe,randomNormal:yX,randomUniform:JTe,read:LTe,regressionConstant:AX,regressionExp:eCe,regressionLinear:kX,regressionLoess:rCe,regressionLog:ZTe,regressionPoly:nCe,regressionPow:tCe,regressionQuad:RX,renderModule:tL,repeat:U3,resetDefaultLocale:pxt,resetSVGClipId:oAe,resetSVGDefIds:xSt,responseType:MTe,runtimeContext:vke,sampleCurve:BM,sampleLogNormal:bX,sampleNormal:MM,sampleUniform:EX,scale:Ii,sceneEqual:$Q,sceneFromJSON:wAe,scenePickVisit:OD,sceneToJSON:_Ae,sceneVisit:R0,sceneZOrder:yQ,scheme:uQ,serializeXML:jAe,setHybridRendererOptions:gSt,setRandom:m_t,span:VR,splitAccessPath:Cg,stringValue:Jt,textMetrics:eh,timeBin:ETe,timeFloor:hTe,timeFormatLocale:C4,timeInterval:JT,timeOffset:gTe,timeSequence:bTe,timeUnitSpecifier:sTe,timeUnits:iX,toBoolean:eX,toDate:tX,toNumber:rc,toSet:A0,toString:nX,transform:HTe,transforms:MS,truncate:rTe,truthy:ep,tupleid:Ln,typeParsers:gV,utcFloor:pTe,utcInterval:ZT,utcOffset:yTe,utcSequence:xTe,utcdayofyear:lTe,utcquarter:GSe,utcweek:cTe,version:T5t,visitArray:Tv,week:aTe,writeConfig:XT,zero:Mv,zoomLinear:YK,zoomLog:KK,zoomPow:kD,zoomSymlog:XK},Symbol.toStringTag,{value:"Module"}));function A5t(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var k5t={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},R5t={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},I5t={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const P5t=Array.prototype.slice,Vx=(e,t,n)=>{const r=n?n(t[0]):t[0];return r[e].apply(r,P5t.call(t,1))},N5t=(e,t,n,r,i,s,o)=>new Date(e,t||0,n??1,r||0,i||0,s||0,o||0);var D5t={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:N5t,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return Vx("join",arguments)},indexof:function(){return Vx("indexOf",arguments)},lastindexof:function(){return Vx("lastIndexOf",arguments)},slice:function(){return Vx("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return Vx("substring",arguments,String)},split:function(){return Vx("split",arguments,String)},replace:function(){return Vx("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const O5t=["view","item","group","xy","x","y"],sH=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&sH.add(setImmediate);const M5t={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:k5t[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);const i=e(t.property);if(n&&(e.memberDepth-=1),sH.has(r[i])){console.error(`Prevented interpretation of member "${i}" which could lead to insecure code execution`);return}return r[i]},CallExpression:(e,t)=>{const n=t.arguments;let r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||D5t[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>R5t[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>I5t[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,r)=>{e.memberDepth+=1;const i=e(r.key);return e.memberDepth-=1,sH.has(e(r.value))?console.error(`Prevented interpretation of property "${i}" which could lead to insecure code execution`):n[i]=e(r.value),n},{})};function u3(e,t,n,r,i,s){const o=a=>M5t[a.type](o,a);return o.memberDepth=0,o.fn=Object.create(t),o.params=n,o.datum=r,o.event=i,o.item=s,O5t.forEach(a=>o.fn[a]=function(){return i.vega[a](...arguments)}),o(e)}var L5t={operator(e,t){const n=t.ast,r=e.functions;return i=>u3(n,r,i)},parameter(e,t){const n=t.ast,r=e.functions;return(i,s)=>u3(n,r,s,i)},event(e,t){const n=t.ast,r=e.functions;return i=>u3(n,r,void 0,void 0,i)},handler(e,t){const n=t.ast,r=e.functions;return(i,s)=>{const o=s.item&&s.item.datum;return u3(n,r,i,o,s)}},encode(e,t){const{marktype:n,channels:r}=t,i=e.functions,s=n==="group"||n==="image"||n==="rect";return(o,a)=>{const u=o.datum;let l=0,c;for(const f in r)c=u3(r[f].ast,i,a,u,void 0,o),o[f]!==c&&(o[f]=c,l=1);return n!=="rule"&&A5t(o,r,s),l}}};const F5t="vega-lite",$5t='Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',B5t="5.23.0",j5t=["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],U5t="https://vega.github.io/vega-lite/",z5t="Vega-Lite is a concise high-level language for interactive visualization.",V5t=["vega","chart","visualization"],H5t="build/vega-lite.js",q5t="build/vega-lite.min.js",W5t="build/vega-lite.min.js",G5t="build/src/index",Y5t="build/src/index.d.ts",K5t={vl2pdf:"./bin/vl2pdf",vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},X5t=["bin","build","src","vega-lite*","tsconfig.json"],Q5t={changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.mjs","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json",data:"rsync -r node_modules/vega-datasets/data/* site/data","build-editor-preview":"scripts/build-editor-preview.sh",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"release-it"},J5t={type:"git",url:"https://github.com/vega/vega-lite.git"},Z5t="BSD-3-Clause",ePt={url:"https://github.com/vega/vega-lite/issues"},tPt={"@babel/core":"^7.26.0","@babel/preset-env":"^7.26.0","@babel/preset-typescript":"^7.26.0","@release-it/conventional-changelog":"^9.0.3","@rollup/plugin-alias":"^5.1.1","@rollup/plugin-babel":"^6.0.4","@rollup/plugin-commonjs":"^28.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.3.0","@rollup/plugin-terser":"^0.4.4","@types/d3":"^7.4.3","@types/jest":"^29.5.14","@types/pako":"^2.0.3","@typescript-eslint/eslint-plugin":"^7.17.0","@typescript-eslint/parser":"^7.17.0",ajv:"^8.17.1","ajv-formats":"^3.0.1",cheerio:"^1.0.0","conventional-changelog-cli":"^5.0.0",d3:"^7.9.0","del-cli":"^6.0.0",eslint:"^8.57.0","eslint-config-prettier":"^9.1.0","eslint-plugin-jest":"^27.9.0","eslint-plugin-prettier":"^5.2.1","fast-json-stable-stringify":"~2.1.0","highlight.js":"^11.10.0",jest:"^29.7.0","jest-dev-server":"^10.1.4",mkdirp:"^3.0.1",pako:"^2.1.0",prettier:"^3.3.3",puppeteer:"^15.0.0","release-it":"17.10.0",rollup:"^4.27.3","rollup-plugin-bundle-size":"^1.0.3",serve:"^14.2.4",terser:"^5.36.0","ts-jest":"^29.2.5","ts-json-schema-generator":"^2.3.0",typescript:"~5.7.2","vega-cli":"^5.30.0","vega-datasets":"^2.11.0","vega-embed":"^6.28.0","vega-tooltip":"^0.35.2","yaml-front-matter":"^4.1.1"},nPt={"json-stringify-pretty-compact":"~4.0.0",tslib:"~2.8.1","vega-event-selector":"~3.0.1","vega-expression":"~5.1.1","vega-util":"~1.17.2",yargs:"~17.7.2"},rPt={vega:"^5.24.0"},iPt={node:">=18"},sPt="yarn@1.22.22",oPt={name:F5t,author:$5t,version:B5t,collaborators:j5t,homepage:U5t,description:z5t,keywords:V5t,main:H5t,unpkg:q5t,jsdelivr:W5t,module:G5t,types:Y5t,bin:K5t,files:X5t,scripts:Q5t,repository:J5t,license:Z5t,bugs:ePt,devDependencies:tPt,dependencies:nPt,peerDependencies:rPt,engines:iPt,packageManager:sPt};function JJ(e){return zt(e,"or")}function ZJ(e){return zt(e,"and")}function eZ(e){return zt(e,"not")}function q8(e,t){if(eZ(e))q8(e.not,t);else if(ZJ(e))for(const n of e.and)q8(n,t);else if(JJ(e))for(const n of e.or)q8(n,t);else t(e)}function QE(e,t){return eZ(e)?{not:QE(e.not,t)}:ZJ(e)?{and:e.and.map(n=>QE(n,t))}:JJ(e)?{or:e.or.map(n=>QE(n,t))}:t(e)}const ur=structuredClone;function p4e(e){throw new Error(e)}function qS(e,t){const n={};for(const r of t)gn(e,r)&&(n[r]=e[r]);return n}function ed(e,t){const n={...e};for(const r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>gs(e)).join(",")})`};function ii(e){if(Ri(e))return e;const t=cn(e)?e:gs(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function oH(e){return e===!1||e===null}function Gr(e,t){return e.includes(t)}function WS(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function tZ(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function m4e(e,...t){for(const n of t)aPt(e,n??{});return e}function aPt(e,t){for(const n of $t(t))XT(e,n,t[n],!0)}function Fm(e,t){const n=[],r={};let i;for(const s of e)i=t(s),!(i in r)&&(r[i]=1,n.push(s));return n}function uPt(e,t){const n=$t(e),r=$t(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function g4e(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function nZ(e,t){for(const n of e)if(t.has(n))return!0;return!1}function aH(e){const t=new Set;for(const n of e){const i=Cg(n).map((o,a)=>a===0?o:`[${o}]`),s=i.map((o,a)=>i.slice(0,a+1).join(""));for(const o of s)t.add(o)}return t}function rZ(e,t){return e===void 0||t===void 0?!0:nZ(aH(e),aH(t))}function ms(e){return $t(e).length===0}const $t=Object.keys,El=Object.values,Ab=Object.entries;function j4(e){return e===!0||e===!1}function lo(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function Mk(e,t){return eZ(e)?`!(${Mk(e.not,t)})`:ZJ(e)?`(${e.and.map(n=>Mk(n,t)).join(") && (")})`:JJ(e)?`(${e.or.map(n=>Mk(n,t)).join(") || (")})`:t(e)}function tO(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&tO(e[n],t)&&delete e[n],ms(e)}function dI(e){return e.charAt(0).toUpperCase()+e.substr(1)}function iZ(e,t="datum"){const n=Cg(e),r=[];for(let i=1;i<=n.length;i++){const s=`[${n.slice(0,i).map(Jt).join("][")}]`;r.push(`${t}${s}`)}return r.join(" && ")}function y4e(e,t="datum"){return`${t}[${Jt(Cg(e).join("."))}]`}function ss(e){return`datum['${e.replaceAll("'","\\'")}']`}function lPt(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function rp(e){return`${Cg(e).map(lPt).join("\\.")}`}function uw(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function oC(e){return`${Cg(e).join(".")}`}function GS(e){return e?Cg(e).length:0}function ba(...e){return e.find(t=>t!==void 0)}let v4e=42;function b4e(e){const t=++v4e;return e?String(e)+t:t}function cPt(){v4e=42}function x4e(e){return _4e(e)?e:`__${e}`}function _4e(e){return e.startsWith("__")}function U4(e){if(e!==void 0)return(e%360+360)%360}function bL(e){return Ri(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const pde=Object.getPrototypeOf(structuredClone({}));function Kd(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!Kd(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const s of e.entries())if(!t.has(s[0]))return!1;for(const s of e.entries())if(!Kd(s[1],t.get(s[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const s of e.entries())if(!t.has(s[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==pde.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==pde.toString)return e.toString()===t.toString();const i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!Kd(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function gs(e){const t=[];return function n(r){if(r&&r.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON()),r===void 0)return;if(typeof r=="number")return isFinite(r)?""+r:"null";if(typeof r!="object")return JSON.stringify(r);let i,s;if(Array.isArray(r)){for(s="[",i=0;i<r.length;i++)i&&(s+=","),s+=n(r[i])||"null";return s+"]"}if(r===null)return"null";if(t.includes(r))throw new TypeError("Converting circular structure to JSON");const o=t.push(r)-1,a=Object.keys(r).sort();for(s="",i=0;i<a.length;i++){const u=a[i],l=n(r[u]);l&&(s&&(s+=","),s+=JSON.stringify(u)+":"+l)}return t.splice(o,1),`{${s}}`}(e)}function zt(e,t){return un(e)&&gn(e,t)&&e[t]!==void 0}const t1="row",n1="column",xL="facet",ho="x",qu="y",z0="x2",Pg="y2",ix="xOffset",aC="yOffset",V0="radius",M1="radius2",pp="theta",L1="theta2",H0="latitude",q0="longitude",W0="latitude2",ip="longitude2",sx="time",od="color",Ng="fill",Dg="stroke",ad="shape",F1="size",Jw="angle",$1="opacity",ox="fillOpacity",ax="strokeOpacity",ux="strokeWidth",lx="strokeDash",hI="text",YS="order",pI="detail",_L="key",lw="tooltip",wL="href",EL="url",SL="description",fPt={x:1,y:1,x2:1,y2:1},w4e={theta:1,theta2:1,radius:1,radius2:1};function E4e(e){return gn(w4e,e)}const sZ={longitude:1,longitude2:1,latitude:1,latitude2:1};function S4e(e){switch(e){case H0:return"y";case W0:return"y2";case q0:return"x";case ip:return"x2"}}function T4e(e){return gn(sZ,e)}const dPt=$t(sZ),oZ={...fPt,...w4e,...sZ,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,time:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function JE(e){return e===od||e===Ng||e===Dg}const C4e={row:1,column:1,facet:1},Yh=$t(C4e),aZ={...oZ,...C4e},hPt=$t(aZ),{order:dHt,detail:hHt,tooltip:pHt,...pPt}=aZ,{row:mHt,column:gHt,facet:yHt,...mPt}=pPt;function gPt(e){return gn(mPt,e)}function A4e(e){return gn(aZ,e)}const yPt=[z0,Pg,W0,ip,L1,M1];function k4e(e){return Zw(e)!==e}function Zw(e){switch(e){case z0:return ho;case Pg:return qu;case W0:return H0;case ip:return q0;case L1:return pp;case M1:return V0}return e}function kb(e){if(E4e(e))switch(e){case pp:return"startAngle";case L1:return"endAngle";case V0:return"outerRadius";case M1:return"innerRadius"}return e}function Og(e){switch(e){case ho:return z0;case qu:return Pg;case H0:return W0;case q0:return ip;case pp:return L1;case V0:return M1}}function ud(e){switch(e){case ho:case z0:return"width";case qu:case Pg:return"height"}}function R4e(e){switch(e){case ho:return"xOffset";case qu:return"yOffset";case z0:return"x2Offset";case Pg:return"y2Offset";case pp:return"thetaOffset";case V0:return"radiusOffset";case L1:return"theta2Offset";case M1:return"radius2Offset"}}function uZ(e){switch(e){case ho:return"xOffset";case qu:return"yOffset"}}function vPt(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const bPt=$t(oZ),{x:vHt,y:bHt,x2:xHt,y2:_Ht,xOffset:wHt,yOffset:EHt,latitude:SHt,longitude:THt,latitude2:CHt,longitude2:AHt,theta:kHt,theta2:RHt,radius:IHt,radius2:PHt,...lZ}=oZ,xPt=$t(lZ),cZ={x:1,y:1},B1=$t(cZ);function xa(e){return gn(cZ,e)}const fZ={theta:1,radius:1},_Pt=$t(fZ);function TL(e){return e==="width"?ho:qu}const I4e={xOffset:1,yOffset:1};function mI(e){return gn(I4e,e)}const wPt={time:1};function WB(e){return e in wPt}const{text:NHt,tooltip:DHt,href:OHt,url:MHt,description:LHt,detail:FHt,key:$Ht,order:BHt,...P4e}=lZ,EPt=$t(P4e);function SPt(e){return gn(lZ,e)}function TPt(e){switch(e){case od:case Ng:case Dg:case F1:case ad:case $1:case ux:case lx:return!0;case ox:case ax:case Jw:case sx:return!1}}const N4e={...cZ,...fZ,...I4e,...P4e},dZ=$t(N4e);function Mg(e){return gn(N4e,e)}function CPt(e,t){return kPt(e)[t]}const D4e={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:jHt,...APt}=D4e;function kPt(e){switch(e){case od:case Ng:case Dg:case SL:case pI:case _L:case lw:case wL:case YS:case $1:case ox:case ax:case ux:case xL:case t1:case n1:return D4e;case ho:case qu:case ix:case aC:case H0:case q0:case sx:return APt;case z0:case Pg:case W0:case ip:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case F1:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case lx:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case ad:return{point:"always",geoshape:"always"};case hI:return{text:"always"};case Jw:return{point:"always",square:"always",text:"always"};case EL:return{image:"always"};case pp:return{text:"always",arc:"always"};case V0:return{text:"always",arc:"always"};case L1:case M1:return{arc:"always"}}}function GB(e){switch(e){case ho:case qu:case pp:case V0:case ix:case aC:case F1:case Jw:case ux:case $1:case ox:case ax:case sx:case z0:case Pg:case L1:case M1:return;case xL:case t1:case n1:case ad:case lx:case hI:case lw:case wL:case EL:case SL:return"discrete";case od:case Ng:case Dg:return"flexible";case H0:case q0:case W0:case ip:case pI:case _L:case YS:return}}const RPt={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},IPt={count:1,min:1,max:1};function w1(e){return zt(e,"argmin")}function cx(e){return zt(e,"argmax")}function hZ(e){return cn(e)&&gn(RPt,e)}const PPt=new Set(["count","valid","missing","distinct"]);function CL(e){return cn(e)&&PPt.has(e)}function NPt(e){return cn(e)&&Gr(["min","max"],e)}const DPt=new Set(["count","sum","distinct","valid","missing"]),OPt=new Set(["mean","average","median","q1","q3","min","max"]);function O4e(e){return tx(e)&&(e=$L(e,void 0)),"bin"+$t(e).map(t=>AL(e[t])?lo(`_${t}_${Ab(e[t])}`):lo(`_${t}_${e[t]}`)).join("")}function Bs(e){return e===!0||e2(e)&&!e.binned}function dl(e){return e==="binned"||e2(e)&&e.binned===!0}function e2(e){return un(e)}function AL(e){return zt(e,"param")}function mde(e){switch(e){case t1:case n1:case F1:case od:case Ng:case Dg:case ux:case $1:case ox:case ax:case ad:return 6;case lx:return 4;default:return 10}}function gI(e){return zt(e,"expr")}function hl(e,{level:t}={level:0}){const n=$t(e||{}),r={};for(const i of n)r[i]=t===0?Vd(e[i]):hl(e[i],{level:t-1});return r}function M4e(e){const{anchor:t,frame:n,offset:r,orient:i,angle:s,limit:o,color:a,subtitleColor:u,subtitleFont:l,subtitleFontSize:c,subtitleFontStyle:f,subtitleFontWeight:d,subtitleLineHeight:h,subtitlePadding:p,...m}=e,g={...m,...a?{fill:a}:{}},b={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{},...s!==void 0?{angle:s}:{},...o!==void 0?{limit:o}:{}},y={...u?{subtitleColor:u}:{},...l?{subtitleFont:l}:{},...c?{subtitleFontSize:c}:{},...f?{subtitleFontStyle:f}:{},...d?{subtitleFontWeight:d}:{},...h?{subtitleLineHeight:h}:{},...p?{subtitlePadding:p}:{}},x=qS(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:g,subtitleMarkConfig:x,nonMarkTitleProperties:b,subtitle:y}}function kv(e){return cn(e)||xt(e)&&cn(e[0])}function In(e){return zt(e,"signal")}function t2(e){return zt(e,"step")}function MPt(e){return xt(e)?!1:zt(e,"fields")&&!zt(e,"data")}function LPt(e){return xt(e)?!1:zt(e,"fields")&&zt(e,"data")}function qy(e){return xt(e)?!1:zt(e,"field")&&zt(e,"data")}const FPt={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},$Pt=$t(FPt),BPt={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},uH=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function L4e(e){const t=xt(e.condition)?e.condition.map(gde):gde(e.condition);return{...Vd(e),condition:t}}function Vd(e){if(gI(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function gde(e){if(gI(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function Qs(e){if(gI(e)){const{expr:t,...n}=e;return{signal:t,...n}}return In(e)?e:e!==void 0?{value:e}:void 0}function jPt(e){return In(e)?e.signal:Jt(e)}function yde(e){return In(e)?e.signal:Jt(e.value)}function p0(e){return In(e)?e.signal:e==null?null:Jt(e)}function UPt(e,t,n){for(const r of n){const i=pg(r,t.markDef,t.config);i!==void 0&&(e[r]=Qs(i))}return e}function F4e(e){return[].concat(e.type,e.style??[])}function ps(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:s}=r;return i&&zt(t,i)?t[i]:t[e]!==void 0?t[e]:s&&(!i||i===e)?void 0:pg(e,t,n,r)}function pg(e,t,n,{vgChannel:r}={}){const i=lH(e,t,n.style);return ba(r?i:void 0,i,r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function lH(e,t,n){return $4e(e,F4e(t),n)}function $4e(e,t,n){t=ln(t);let r;for(const i of t){const s=n[i];zt(s,e)&&(r=s[e])}return r}function B4e(e,t){return ln(e).reduce((n,r)=>(n.field.push(tn(r,t)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function j4e(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if(Kd(i,r))return;n.push(r)}),n}function U4e(e,t){return Kd(e,t)||!t?e:e?[...ln(e),...ln(t)].join(", "):t}function z4e(e,t){const n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((kv(n)||In(n))&&(kv(r)||In(r)))return{explicit:e.explicit,value:U4e(n,r)};if(kv(n)||In(n))return{explicit:e.explicit,value:n};if(kv(r)||In(r))return{explicit:e.explicit,value:r};if(!kv(n)&&!In(n)&&!kv(r)&&!In(r))return{explicit:e.explicit,value:j4e(n,r)};throw new Error("It should never reach here")}function pZ(e){return`Invalid specification ${gs(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const zPt='Autosize "fit" only works for single views and layered views.';function vde(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function bde(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function xde(e){return e?`Dropping "fit-${e}" because spec has discrete ${ud(e)}.`:'Dropping "fit" because spec has discrete size.'}function mZ(e){return`Unknown field for ${e}. Cannot calculate view size.`}function _de(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function VPt(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function HPt(e){return`The "nearest" transform is not supported for ${e} marks.`}function V4e(e){return`Selection not supported for ${e} yet.`}function qPt(e){return`Cannot find a selection named "${e}".`}const WPt="Scale bindings are currently only supported for scales with unbinned, continuous domains.",GPt="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",YPt="Legend bindings are only supported for selections over an individual field or encoding channel.";function KPt(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function XPt(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const QPt="The same selection must be used to override scale domains in a layered view.",JPt='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function ZPt(e){return`Unknown repeated value "${e}".`}function wde(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const e8t="Multiple timer selections in one unit spec are not supported. Ignoring all but the first.",gZ="Animation involving facet, layer, or concat is currently unsupported.";function t8t(e){return`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${Jt(e)}.`}function n8t(e,t,n,r){return(e.length?"Multiple ":"No ")+`matching ${Jt(t)} encoding found for selection ${Jt(n.param)}. Using "field": ${Jt(r)}.`}const r8t="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function i8t(e){return`Unrecognized parse "${e}".`}function Ede(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const s8t="Attempt to add the same child twice.";function o8t(e){return`Ignoring an invalid transform: ${gs(e)}.`}const a8t='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function Sde(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function u8t(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${gs(t)} is overridden by a child projection ${gs(n)}.`}const l8t="Arc marks uses theta channel rather than angle, replacing angle with theta.";function c8t(e){return`${e}Offset dropped because ${e} is continuous`}function f8t(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${gs(n)}}.`}function H4e(e){return`Invalid field type "${e}".`}function d8t(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function h8t(e){return`Invalid aggregation operator "${e}".`}function q4e(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function p8t(e){return`Position range does not support relative band size for ${e}.`}function cH(e,t){return`Dropping ${gs(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const m8t="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function kL(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function g8t(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function y8t(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function v8t(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function b8t(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function YB(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function x8t(e){return`The ${e} for range marks cannot be an expression`}function _8t(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function w8t(e,t){return`Specified orient "${e}" overridden with "${t}".`}function E8t(e){return`Cannot use the scale property "${e}" with non-color channel.`}function S8t(e){return`Cannot use the relative band size with ${e} scale.`}function T8t(e){return`Using unaggregated domain with raw field has no effect (${gs(e)}).`}function C8t(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function A8t(e){return`Unaggregated domain is currently unsupported for log scale (${gs(e)}).`}function k8t(e){return`Cannot apply size to non-oriented mark "${e}".`}function R8t(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function I8t(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function W4e(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function G4e(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function P8t(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${gs(n)} and ${gs(r)}). Using ${gs(n)}.`}function N8t(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${gs(n)} and ${gs(r)}). Using the union of the two domains.`}function D8t(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function O8t(e){return`Dropping sort property ${gs(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const Tde="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",M8t="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",L8t="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",F8t="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function $8t(e){return`Cannot stack "${e}" if there is already "${e}2".`}function B8t(e){return`Stack is applied to a non-linear scale (${e}).`}function j8t(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function nO(e,t){return`Invalid ${e}: ${gs(t)}.`}function U8t(e){return`Dropping day from datetime ${gs(e)} as day cannot be combined with other units.`}function z8t(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function V8t(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function H8t(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function Cde(e){return`1D error band does not support ${e}.`}function Y4e(e){return`Channel ${e} is required for "binned" bin.`}function q8t(e){return`Channel ${e} should not be used with "binned" bin.`}function W8t(e){return`Domain for ${e} is required for threshold scale.`}const K4e=GK(WK);let cw=K4e;function G8t(e){return cw=e,cw}function Y8t(){return cw=K4e,cw}function yZ(...e){cw.error(...e)}function qt(...e){cw.warn(...e)}function K8t(...e){cw.debug(...e)}function n2(e){if(e&&un(e)){for(const t of bZ)if(zt(e,t))return!0}return!1}const X4e=["january","february","march","april","may","june","july","august","september","october","november","december"],X8t=X4e.map(e=>e.substr(0,3)),Q4e=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],Q8t=Q4e.map(e=>e.substr(0,3));function J8t(e){if(bL(e)&&(e=+e),Ri(e))return e>4&&qt(nO("quarter",e)),e-1;throw new Error(nO("quarter",e))}function Z8t(e){if(bL(e)&&(e=+e),Ri(e))return e-1;{const t=e.toLowerCase(),n=X4e.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=X8t.indexOf(r);if(i!==-1)return i;throw new Error(nO("month",e))}}function eNt(e){if(bL(e)&&(e=+e),Ri(e))return e%7;{const t=e.toLowerCase(),n=Q4e.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=Q8t.indexOf(r);if(i!==-1)return i;throw new Error(nO("day",e))}}function vZ(e,t){const n=[];if(t&&e.day!==void 0&&$t(e).length>1&&(qt(U8t(e)),e=ur(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const r=t?Z8t(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){const r=t?J8t(e.quarter):e.quarter;n.push(Ri(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const r=t?eNt(e.day):e.day;n.push(Ri(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i>"u"?0:i)}return n}function fw(e){const n=vZ(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function tNt(e){const n=vZ(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function nNt(e){const t=vZ(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const J4e={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},bZ=$t(J4e);function rNt(e){return gn(J4e,e)}function r2(e){return un(e)?e.binned:Z4e(e)}function Z4e(e){return e&&e.startsWith("binned")}function xZ(e){return e.startsWith("utc")}function iNt(e){return e.substring(3)}const sNt={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function RL(e){return bZ.filter(t=>tRe(e,t))}function eRe(e){const t=RL(e);return t[t.length-1]}function tRe(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function oNt(e,t,{end:n}={end:!1}){const r=iZ(t),i=xZ(e)?"utc":"";function s(u){return u==="quarter"?`(${i}quarter(${r})-1)`:`${i}${u}(${r})`}let o;const a={};for(const u of bZ)tRe(e,u)&&(a[u]=s(u),o=u);return n&&(a[o]+="+1"),tNt(a)}function nRe(e){if(!e)return;const t=RL(e);return`timeUnitSpecifier(${gs(t)}, ${gs(sNt)})`}function aNt(e,t,n){if(!e)return;const r=nRe(e);return`${n||xZ(e)?"utc":"time"}Format(${t}, ${r})`}function $u(e){if(!e)return;let t;return cn(e)?Z4e(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:un(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),xZ(t.unit)&&(t.utc=!0,t.unit=iNt(t.unit)),t}function uNt(e){const{utc:t,...n}=$u(e);return n.unit?(t?"utc":"")+$t(n).map(r=>lo(`${r==="unit"?"":`_${r}_`}${n[r]}`)).join(""):(t?"utc":"")+"timeunit"+$t(n).map(r=>lo(`_${r}_${n[r]}`)).join("")}function rRe(e,t=n=>n){const n=$u(e),r=eRe(n.unit);if(r&&r!=="day"){const i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:s,part:o}=iRe(r,n.step),a={...i,[o]:+i[o]+s};return`${t(fw(a))} - ${t(fw(i))}`}}const lNt={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function cNt(e){return gn(lNt,e)}function iRe(e,t=1){if(cNt(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function fNt(e){return zt(e,"param")}function _Z(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function wZ(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function EZ(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function SZ(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function TZ(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function CZ(e){if(e!=null&&e.field){if(xt(e.range)&&e.range.length===2)return!0;if(In(e.range))return!0}return!1}function AZ(e){return!!(e!=null&&e.field)&&(xt(e.oneOf)||xt(e.in))}function dNt(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function sRe(e){return AZ(e)||_Z(e)||CZ(e)||wZ(e)||SZ(e)||EZ(e)||TZ(e)}function vm(e,t){return BL(e,{timeUnit:t,wrapTime:!0})}function hNt(e,t){return e.map(n=>vm(n,t))}function oRe(e,t=!0){const{field:n}=e,r=$u(e.timeUnit),{unit:i,binned:s}=r||{},o=tn(e,{expr:"datum"}),a=i?`time(${s?o:oNt(i,n)})`:o;if(_Z(e))return`${a}===${vm(e.equal,i)}`;if(wZ(e)){const u=e.lt;return`${a}<${vm(u,i)}`}else if(SZ(e)){const u=e.gt;return`${a}>${vm(u,i)}`}else if(EZ(e)){const u=e.lte;return`${a}<=${vm(u,i)}`}else if(TZ(e)){const u=e.gte;return`${a}>=${vm(u,i)}`}else{if(AZ(e))return`indexof([${hNt(e.oneOf,i).join(",")}], ${a}) !== -1`;if(dNt(e))return IL(a,e.valid);if(CZ(e)){const{range:u}=hl(e),l=In(u)?{signal:`${u.signal}[0]`}:u[0],c=In(u)?{signal:`${u.signal}[1]`}:u[1];if(l!==null&&c!==null&&t)return"inrange("+a+", ["+vm(l,i)+", "+vm(c,i)+"])";const f=[];return l!==null&&f.push(`${a} >= ${vm(l,i)}`),c!==null&&f.push(`${a} <= ${vm(c,i)}`),f.length>0?f.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${gs(e)}`)}function IL(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function pNt(e){return sRe(e)&&e.timeUnit?{...e,timeUnit:$u(e.timeUnit)}:e}const yI={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function mNt(e){return e==="quantitative"||e==="temporal"}function aRe(e){return e==="ordinal"||e==="nominal"}const dw=yI.quantitative,kZ=yI.ordinal,KS=yI.temporal,RZ=yI.nominal,uC=yI.geojson;function gNt(e){if(e)switch(e=e.toLowerCase(),e){case"q":case dw:return"quantitative";case"t":case KS:return"temporal";case"o":case kZ:return"ordinal";case"n":case RZ:return"nominal";case uC:return"geojson"}}const pl={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},fH={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function yNt(e,t){const n=fH[e],r=fH[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const vNt={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function Ade(e){return vNt[e]}const uRe=new Set(["linear","log","pow","sqrt","symlog"]),lRe=new Set([...uRe,"time","utc"]);function cRe(e){return uRe.has(e)}const fRe=new Set(["quantile","quantize","threshold"]),bNt=new Set([...lRe,...fRe,"sequential","identity"]),xNt=new Set(["ordinal","bin-ordinal","point","band"]);function Uu(e){return xNt.has(e)}function I0(e){return bNt.has(e)}function $m(e){return lRe.has(e)}function XS(e){return fRe.has(e)}const _Nt={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,tickBandPaddingInner:.25,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:4,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0,framesPerSecond:2,animationDuration:5};function wNt(e){return!cn(e)&&zt(e,"name")}function dRe(e){return zt(e,"param")}function ENt(e){return zt(e,"unionWith")}function SNt(e){return un(e)&&"field"in e}const TNt={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:UHt,domain:zHt,range:VHt,rangeMax:HHt,rangeMin:qHt,scheme:WHt,...CNt}=TNt,ANt=$t(CNt);function dH(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return $m(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return $m(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return $m(e);case"nice":return $m(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return I0(e)&&!Gr(["log","time","utc","threshold","quantile"],e)}}function hRe(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return JE(e)?void 0:E8t(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function kNt(e,t){return Gr([kZ,RZ],t)?e===void 0||Uu(e):t===KS?Gr([pl.TIME,pl.UTC,void 0],e):t===dw?cRe(e)||XS(e)||e===void 0:!0}function RNt(e,t,n=!1){if(!Mg(e))return!1;switch(e){case ho:case qu:case ix:case aC:case pp:case V0:return $m(t)||t==="band"?!0:t==="point"?!n:!1;case sx:return Gr(["linear","band"],t);case F1:case ux:case $1:case ox:case ax:case Jw:return $m(t)||XS(t)||Gr(["band","point","ordinal"],t);case od:case Ng:case Dg:return t!=="band";case lx:case ad:return t==="ordinal"||XS(t)}}function INt(e){return un(e)&&"value"in e}const ff={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},pRe=ff.arc,PL=ff.area,NL=ff.bar,PNt=ff.image,DL=ff.line,OL=ff.point,NNt=ff.rect,rO=ff.rule,mRe=ff.text,IZ=ff.tick,DNt=ff.trail,PZ=ff.circle,NZ=ff.square,gRe=ff.geoshape;function fx(e){return["line","area","trail"].includes(e)}function z4(e){return["rect","bar","image","arc","tick"].includes(e)}const ONt=new Set($t(ff));function mg(e){return zt(e,"type")}const MNt=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],LNt=["fill","fillOpacity"],FNt=[...MNt,...LNt],$Nt={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},kde=$t($Nt),KB=["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],BNt={area:["line","point"],bar:KB,rect:KB,line:["point"],tick:["bandSize","thickness",...KB]},jNt={color:"#4c78a8",invalid:"break-paths-show-path-domains",timeUnitBandSize:1},UNt={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},yRe=$t(UNt);function hw(e){return zt(e,"band")}const zNt={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},VNt=5,DZ={binSpacing:0,continuousBandSize:VNt,minBandSize:.25,timeUnitBandPosition:.5},HNt={...DZ,binSpacing:1},qNt={...DZ,thickness:1};function WNt(e){return mg(e)?e.type:e}function vRe(e,{isPath:t}){return e===void 0||e==="break-paths-show-path-domains"?t?"break-paths-show-domains":"filter":e===null?"show":e}function OZ({markDef:e,config:t,scaleChannel:n,scaleType:r,isCountAggregate:i}){var a,u;if(!r||!I0(r)||i)return"always-valid";const s=vRe(ps("invalid",e,t),{isPath:fx(e.type)});return((u=(a=t.scale)==null?void 0:a.invalid)==null?void 0:u[n])!==void 0?"show":s}function GNt(e){return e==="break-paths-filter-domains"||e==="break-paths-show-domains"}function bRe({scaleName:e,scale:t,mode:n}){const r=`domain('${e}')`;if(!t||!e)return;const i=`${r}[0]`,s=`peek(${r})`,o=t.domainHasZero();return o==="definitely"?{scale:e,value:0}:o==="maybe"?{signal:`scale('${e}', inrange(0, ${r}) ? 0 : ${n==="zeroOrMin"?i:s})`}:{signal:`scale('${e}', ${n==="zeroOrMin"?i:s})`}}function xRe({scaleChannel:e,channelDef:t,scale:n,scaleName:r,markDef:i,config:s}){var c;const o=n==null?void 0:n.get("type"),a=N0(t),u=CL(a==null?void 0:a.aggregate),l=OZ({scaleChannel:e,markDef:i,config:s,scaleType:o,isCountAggregate:u});if(a&&l==="show"){const f=((c=s.scale.invalid)==null?void 0:c[e])??"zero-or-min";return{test:IL(tn(a,{expr:"datum"}),!1),...YNt(f,n,r)}}}function YNt(e,t,n){if(INt(e)){const{value:r}=e;return In(r)?{signal:r.signal}:{value:r}}return bRe({scale:t,scaleName:n,mode:"zeroOrMin"})}function MZ(e){const{channel:t,channelDef:n,markDef:r,scale:i,scaleName:s,config:o}=e,a=Zw(t),u=LZ(e),l=xRe({scaleChannel:a,channelDef:n,scale:i,scaleName:s,markDef:r,config:o});return l!==void 0?[l,u]:u}function KNt(e){const{datum:t}=e;return n2(t)?fw(t):`${gs(t)}`}function B_(e,t,n,r){const i={};if(t&&(i.scale=t),Lg(e)){const{datum:s}=e;n2(s)?i.signal=fw(s):In(s)?i.signal=s.signal:gI(s)?i.signal=s.expr:i.value=s}else i.field=tn(e,n);if(r){const{offset:s,band:o}=r;s&&(i.offset=s),o&&(i.band=o)}return i}function iO({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:s="end",bandPosition:o=.5}){const a=!In(o)&&0<o&&o<1?"datum":void 0,u=tn(t,{expr:a,suffix:i}),l=n!==void 0?tn(n,{expr:a}):tn(t,{suffix:s,expr:a}),c={};if(o===0||o===1){c.scale=e;const f=o===0?u:l;c.field=f}else{const f=In(o)?`(1-${o.signal}) * ${u} + ${o.signal} * ${l}`:`${1-o} * ${u} + ${o} * ${l}`;c.signal=`scale("${e}", ${f})`}return r&&(c.offset=r),c}function XNt({scaleName:e,fieldDef:t}){const n=tn(t,{expr:"datum"}),r=tn(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${r}) - scale("${e}", ${n}))`}function LZ({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l,bandPosition:c}){if(t){if(gr(t)){const f=o==null?void 0:o.get("type");if(uf(t)){c??(c=Rb({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:d,timeUnit:h,type:p}=t;if(Bs(d)||c&&h&&p===KS)return a!=null&&a.impute?B_(t,s,{binSuffix:"mid"},{offset:u}):c&&!Uu(f)?iO({scaleName:s,fieldOrDatumDef:t,bandPosition:c,offset:u}):B_(t,s,wI(t,e)?{binSuffix:"range"}:{},{offset:u});if(dl(d)){if(Kt(n))return iO({scaleName:s,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:u});qt(Y4e(e===ho?z0:Pg))}}return B_(t,s,Uu(f)?{binSuffix:"range"}:{},{offset:u,band:f==="band"?c??t.bandPosition??.5:void 0})}else if(P0(t)){const f=t.value,d=u?{offset:u}:{};return{...Lk(e,f),...d}}}return Rr(l)&&(l=l()),l&&{...l,...u?{offset:u}:{}}}function Lk(e,t){return Gr(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:Gr(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:Qs(t)}function pw(e){return e&&e!=="number"&&e!=="time"}function _Re(e,t,n){return`${e}(${t}${n?`, ${gs(n)}`:""})`}const QNt="  ";function FZ({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s}){var u,l;if(pw(n))return m0({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:s});const o=wRe(e,r,i),a=QS(e);if(t===void 0&&n===void 0&&s.customFormatTypes){if(a==="quantitative"){if(i&&s.normalizedNumberFormatType)return m0({fieldOrDatumDef:e,format:s.normalizedNumberFormat,formatType:s.normalizedNumberFormatType,expr:r,config:s});if(s.numberFormatType)return m0({fieldOrDatumDef:e,format:s.numberFormat,formatType:s.numberFormatType,expr:r,config:s})}if(a==="temporal"&&s.timeFormatType&&Kt(e)&&e.timeUnit===void 0)return m0({fieldOrDatumDef:e,format:s.timeFormat,formatType:s.timeFormatType,expr:r,config:s})}if(ZS(e)){const c=ZNt({field:o,timeUnit:Kt(e)?(u=$u(e.timeUnit))==null?void 0:u.unit:void 0,format:t,formatType:s.timeFormatType,rawTimeFormat:s.timeFormat,isUTCScale:i2(e)&&((l=e.scale)==null?void 0:l.type)===pl.UTC});return c?{signal:c}:void 0}if(t=hH({type:a,specifiedFormat:t,config:s,normalizeStack:i}),Kt(e)&&Bs(e.bin)){const c=tn(e,{expr:r,binSuffix:"end"});return{signal:vI(o,c,t,n,s)}}else return t||QS(e)==="quantitative"?{signal:`${TRe(o,t)}`}:{signal:`isValid(${o}) ? ${o} : ""+${o}`}}function wRe(e,t,n){return Kt(e)?n?`${tn(e,{expr:t,suffix:"end"})}-${tn(e,{expr:t,suffix:"start"})}`:tn(e,{expr:t}):KNt(e)}function m0({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s,field:o}){if(o??(o=wRe(e,r,i)),o!=="datum.value"&&Kt(e)&&Bs(e.bin)){const a=tn(e,{expr:r,binSuffix:"end"});return{signal:vI(o,a,t,n,s)}}return{signal:_Re(n,o,t)}}function ERe(e,t,n,r,i,s){var o;if(!(cn(r)&&pw(r))&&!(n===void 0&&r===void 0&&i.customFormatTypes&&QS(e)==="quantitative"&&(i.normalizedNumberFormatType&&JS(e)&&e.stack==="normalize"||i.numberFormatType))){if(JS(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return hH({type:"quantitative",config:i,normalizeStack:!0});if(ZS(e)){const a=Kt(e)?(o=$u(e.timeUnit))==null?void 0:o.unit:void 0;return a===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:JNt({specifiedFormat:n,timeUnit:a,config:i,omitTimeFormatConfig:s})}return hH({type:t,specifiedFormat:n,config:i})}}function SRe(e,t,n){var r;if(e&&(In(e)||e==="number"||e==="time"))return e;if(ZS(t)&&n!=="time"&&n!=="utc")return Kt(t)&&((r=$u(t==null?void 0:t.timeUnit))!=null&&r.utc)?"utc":"time"}function hH({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(cn(t))return t;if(e===dw)return r?n.normalizedNumberFormat:n.numberFormat}function JNt({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:nRe(t)}:r?void 0:n.timeFormat)}function TRe(e,t){return`format(${e}, "${t||""}")`}function Rde(e,t,n,r){return pw(n)?_Re(n,e,t):TRe(e,(cn(t)?t:void 0)??r.numberFormat)}function vI(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return vI(e,t,i.numberFormat,i.numberFormatType,i);const s=Rde(e,n,r,i),o=Rde(t,n,r,i);return`${IL(e,!1)} ? "null" : ${s} + "${QNt}" + ${o}`}function ZNt({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:s}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:(n=cn(n)?n:i,`${s?"utc":"time"}Format(${e}, '${n}')`):aNt(t,e,s)}const ML="min",eDt={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function Ide(e){return gn(eDt,e)}function tDt(e){return zt(e,"encoding")}function r1(e){return e&&(e.op==="count"||zt(e,"field"))}function CRe(e){return e&&xt(e)}function bI(e){return zt(e,"row")||zt(e,"column")}function $Z(e){return zt(e,"header")}function LL(e){return zt(e,"facet")}function nDt(e){return zt(e,"param")}function rDt(e){return!cn(e)&&zt(e,"repeat")}function Pde(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function BZ(e){return zt(e,"sort")}function Rb({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(gr(e)&&e.bandPosition!==void 0)return e.bandPosition;if(Kt(e)){const{timeUnit:i,bin:s}=e;if(i&&!t)return pg("timeUnitBandPosition",n,r);if(Bs(s))return .5}}function ARe({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:s,useVlSizeChannel:o}){var l,c,f;const a=ud(e),u=ps(o?"size":a,r,i,{vgChannel:a});if(u!==void 0)return u;if(Kt(t)){const{timeUnit:d,bin:h}=t;if(d&&!n)return{band:pg("timeUnitBandSize",r,i)};if(Bs(h)&&!Uu(s))return{band:1}}if(z4(r.type))return s?Uu(s)?((l=i[r.type])==null?void 0:l.discreteBandSize)||{band:1}:(c=i[r.type])==null?void 0:c.continuousBandSize:(f=i[r.type])==null?void 0:f.discreteBandSize}function kRe(e,t,n,r){return Bs(e.bin)||e.timeUnit&&uf(e)&&e.type==="temporal"?Rb({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function RRe(e){return zt(e,"sort")&&!zt(e,"field")}function xI(e){return zt(e,"condition")}function FL(e){const t=e==null?void 0:e.condition;return!!t&&!xt(t)&&Kt(t)}function _I(e){const t=e==null?void 0:e.condition;return!!t&&!xt(t)&&gr(t)}function iDt(e){const t=e==null?void 0:e.condition;return!!t&&(xt(t)||P0(t))}function Kt(e){return zt(e,"field")||(e==null?void 0:e.aggregate)==="count"}function QS(e){return e==null?void 0:e.type}function Lg(e){return zt(e,"datum")}function Wv(e){return uf(e)&&!oO(e)||sO(e)}function Nde(e){return uf(e)&&e.type==="quantitative"&&!e.bin||sO(e)}function sO(e){return Lg(e)&&Ri(e.datum)}function gr(e){return Kt(e)||Lg(e)}function uf(e){return e&&(zt(e,"field")||e.aggregate==="count")&&zt(e,"type")}function P0(e){return zt(e,"value")}function i2(e){return zt(e,"scale")||zt(e,"sort")}function JS(e){return zt(e,"axis")||zt(e,"stack")||zt(e,"impute")}function IRe(e){return zt(e,"legend")}function PRe(e){return zt(e,"format")||zt(e,"formatType")}function sDt(e){return ed(e,["legend","axis","header","scale"])}function oDt(e){return zt(e,"op")}function tn(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,s="";if(uDt(e))n=x4e("count");else{let o;if(!t.nofn)if(oDt(e))o=e.op;else{const{bin:a,aggregate:u,timeUnit:l}=e;Bs(a)?(o=O4e(a),i=(t.binSuffix??"")+(t.suffix??"")):u?cx(u)?(s=`["${n}"]`,n=`argmax_${u.argmax}`):w1(u)?(s=`["${n}"]`,n=`argmin_${u.argmin}`):o=String(u):l&&!r2(l)&&(o=uNt(l),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}o&&(n=n?`${o}_${n}`:o)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?oC(n):t.expr?y4e(n,t.expr)+s:rp(n)+s}function oO(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return Kt(e)&&!!e.bin;case"temporal":return!1}throw new Error(H4e(e.type))}function aDt(e){var t;return i2(e)&&XS((t=e.scale)==null?void 0:t.type)}function uDt(e){return e.aggregate==="count"}function lDt(e,t){var o;const{field:n,bin:r,timeUnit:i,aggregate:s}=e;if(s==="count")return t.countTitle;if(Bs(r))return`${n} (binned)`;if(i&&!r2(i)){const a=(o=$u(i))==null?void 0:o.unit;if(a)return`${n} (${RL(a).join("-")})`}else if(s)return cx(s)?`${n} for max ${s.argmax}`:w1(s)?`${n} for min ${s.argmin}`:`${dI(s)} of ${n}`;return n}function cDt(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(cx(t))return`${i} for argmax(${t.argmax})`;if(w1(t))return`${i} for argmin(${t.argmin})`;const s=r&&!r2(r)?$u(r):void 0,o=t||(s==null?void 0:s.unit)||(s==null?void 0:s.maxbins)&&"timeunit"||Bs(n)&&"bin";return o?`${o.toUpperCase()}(${i})`:i}const NRe=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return cDt(e);default:return lDt(e,t)}};let DRe=NRe;function ORe(e){DRe=e}function fDt(){ORe(NRe)}function ZE(e,t,{allowDisabling:n,includeDefault:r=!0}){var a;const i=(a=jZ(e))==null?void 0:a.title;if(!Kt(e))return i??e.title;const s=e,o=r?UZ(s,t):void 0;return n?ba(i,s.title,o):i??s.title??o}function jZ(e){if(JS(e)&&e.axis)return e.axis;if(IRe(e)&&e.legend)return e.legend;if($Z(e)&&e.header)return e.header}function UZ(e,t){return DRe(e,t)}function aO(e){if(PRe(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=jZ(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function dDt(e,t){var s;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(BZ(e)&&xt(e.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!cx(n)&&!w1(n))return"quantitative";if(i2(e)&&((s=e.scale)!=null&&s.type))switch(fH[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function N0(e){if(Kt(e))return e;if(FL(e))return e.condition}function du(e){if(gr(e))return e;if(_I(e))return e.condition}function MRe(e,t,n,r={}){if(cn(e)||Ri(e)||tx(e)){const i=cn(e)?"string":Ri(e)?"number":"boolean";return qt(f8t(t,i,e)),{value:e}}return gr(e)?uO(e,t,n,r):_I(e)?{...e,condition:uO(e.condition,t,n,r)}:e}function uO(e,t,n,r){if(PRe(e)){const{format:i,formatType:s,...o}=e;if(pw(s)&&!n.customFormatTypes)return qt(Sde(t)),uO(o,t,n,r)}else{const i=JS(e)?"axis":IRe(e)?"legend":$Z(e)?"header":null;if(i&&e[i]){const{format:s,formatType:o,...a}=e[i];if(pw(o)&&!n.customFormatTypes)return qt(Sde(t)),uO({...e,[i]:a},t,n,r)}}return Kt(e)?zZ(e,t,r):hDt(e)}function hDt(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=Ri(n)?"quantitative":cn(n)?"nominal":n2(n)?"temporal":void 0,{...e,type:t}}function zZ(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:s,field:o}=e,a={...e};if(!n&&r&&!hZ(r)&&!cx(r)&&!w1(r)&&(qt(h8t(r)),delete a.aggregate),i&&(a.timeUnit=$u(i)),o&&(a.field=`${o}`),Bs(s)&&(a.bin=$L(s,t)),dl(s)&&!xa(t)&&qt(q8t(t)),uf(a)){const{type:u}=a,l=gNt(u);u!==l&&(a.type=l),u!=="quantitative"&&CL(r)&&(qt(d8t(u,r)),a.type="quantitative")}else if(!k4e(t)){const u=dDt(a,t);a.type=u}if(uf(a)){const{compatible:u,warning:l}=pDt(a,t)||{};u===!1&&qt(l)}if(BZ(a)&&cn(a.sort)){const{sort:u}=a;if(Ide(u))return{...a,sort:{encoding:u}};const l=u.substring(1);if(u.charAt(0)==="-"&&Ide(l))return{...a,sort:{encoding:l,order:"descending"}}}if($Z(a)){const{header:u}=a;if(u){const{orient:l,...c}=u;if(l)return{...a,header:{...c,labelOrient:u.labelOrient||l,titleOrient:u.titleOrient||l}}}}return a}function $L(e,t){return tx(e)?{maxbins:mde(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:mde(t)}:e}const sE={compatible:!0};function pDt(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case t1:case n1:case xL:return oO(e)?sE:{compatible:!1,warning:y8t(t)};case ho:case qu:case ix:case aC:case od:case Ng:case Dg:case hI:case pI:case _L:case lw:case wL:case EL:case Jw:case pp:case V0:case SL:return sE;case q0:case ip:case H0:case W0:return n!==dw?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:sE;case $1:case ox:case ax:case ux:case F1:case L1:case M1:case z0:case Pg:case sx:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:sE;case ad:case lx:return!oO(e)&&!aDt(e)?{compatible:!1,warning:v8t(t)}:sE;case YS:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:sE}}function ZS(e){const{formatType:t}=aO(e);return t==="time"||!t&&mDt(e)}function mDt(e){return e&&(e.type==="temporal"||Kt(e)&&!!e.timeUnit)}function BL(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var u;const s=t&&((u=$u(t))==null?void 0:u.unit);let o=s||n==="temporal",a;return gI(e)?a=e.expr:In(e)?a=e.signal:n2(e)?(o=!0,a=fw(e)):(cn(e)||Ri(e))&&o&&(a=`datetime(${gs(e)})`,rNt(s)&&(Ri(e)&&e<1e4||cn(e)&&isNaN(Date.parse(e)))&&(a=fw({[s]:e}))),a?r&&o?`time(${a})`:a:i?void 0:gs(e)}function LRe(e,t){const{type:n}=e;return t.map(r=>{const i=Kt(e)&&!r2(e.timeUnit)?e.timeUnit:void 0,s=BL(r,{timeUnit:i,type:n,undefinedIfExprNotRequired:!0});return s!==void 0?{signal:s}:r})}function wI(e,t){return Bs(e.bin)?Mg(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const Dde={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function EI(e){return e==null?void 0:e.condition}const FRe=["domain","grid","labels","ticks","title"],gDt={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},$Re={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},yDt={...$Re,style:1,labelExpr:1,encoding:1};function Ode(e){return gn(yDt,e)}const vDt={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},BRe=$t(vDt);function j1(e){return zt(e,"mark")}class jL{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return j1(t)?WNt(t.mark)===this.name:!1}}function j_(e,t){const n=e&&e[t];return n?xt(n)?WS(n,r=>!!r.field):Kt(n)||FL(n):!1}function jRe(e,t){const n=e&&e[t];return n?xt(n)?WS(n,r=>!!r.field):Kt(n)||Lg(n)||_I(n):!1}function URe(e,t){if(xa(t)){const n=e[t];if((Kt(n)||Lg(n))&&(aRe(n.type)||Kt(n)&&n.timeUnit)){const r=uZ(t);return jRe(e,r)}}return!1}function zRe(e){return WS(hPt,t=>{if(j_(e,t)){const n=e[t];if(xt(n))return WS(n,r=>!!r.aggregate);{const r=N0(n);return r&&!!r.aggregate}}return!1})}function VRe(e,t){const n=[],r=[],i=[],s=[],o={};return VZ(e,(a,u)=>{if(Kt(a)){const{field:l,aggregate:c,bin:f,timeUnit:d,...h}=a;if(c||d||f){const p=jZ(a),m=p==null?void 0:p.title;let g=tn(a,{forAs:!0});const b={...m?[]:{title:ZE(a,t,{allowDisabling:!0})},...h,field:g};if(c){let y;if(cx(c)?(y="argmax",g=tn({op:"argmax",field:c.argmax},{forAs:!0}),b.field=`${g}.${l}`):w1(c)?(y="argmin",g=tn({op:"argmin",field:c.argmin},{forAs:!0}),b.field=`${g}.${l}`):c!=="boxplot"&&c!=="errorbar"&&c!=="errorband"&&(y=c),y){const x={op:y,as:g};l&&(x.field=l),s.push(x)}}else if(n.push(g),uf(a)&&Bs(f)){if(r.push({bin:f,field:l,as:g}),n.push(tn(a,{binSuffix:"end"})),wI(a,u)&&n.push(tn(a,{binSuffix:"range"})),xa(u)){const y={field:`${g}_end`};o[`${u}2`]=y}b.bin="binned",k4e(u)||(b.type=dw)}else if(d&&!r2(d)){i.push({timeUnit:d,field:l,as:g});const y=uf(a)&&a.type!==KS&&"time";y&&(u===hI||u===lw?b.formatType=y:SPt(u)?b.legend={formatType:y,...b.legend}:xa(u)&&(b.axis={formatType:y,...b.axis}))}o[u]=b}else n.push(l),o[u]=e[u]}else o[u]=e[u]}),{bins:r,timeUnits:i,aggregate:s,groupby:n,encoding:o}}function bDt(e,t,n){const r=CPt(t,n);if(r){if(r==="binned"){const i=e[t===z0?ho:qu];return!!(Kt(i)&&Kt(e[t])&&dl(i.bin))}}else return!1;return!0}function xDt(e,t,n,r){const i={};for(const s of $t(e))A4e(s)||qt(g8t(s));for(let s of bPt){if(!e[s])continue;const o=e[s];if(mI(s)){const a=vPt(s),u=i[a];if(Kt(u)&&mNt(u.type)&&Kt(o)&&!u.timeUnit){qt(c8t(a));continue}}if(s==="angle"&&t==="arc"&&!e.theta&&(qt(l8t),s=pp),!bDt(e,s,t)){qt(kL(s,t));continue}if(s===F1&&t==="line"){const a=N0(e[s]);if(a!=null&&a.aggregate){qt(m8t);continue}}if(s===od&&(n?"fill"in e:"stroke"in e)){qt(q4e("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(s===pI||s===YS&&!xt(o)&&!P0(o)||s===lw&&xt(o)){if(o){if(s===YS){const a=e[s];if(RRe(a)){i[s]=a;continue}}i[s]=ln(o).reduce((a,u)=>(Kt(u)?a.push(zZ(u,s)):qt(cH(u,s)),a),[])}}else{if(s===lw&&o===null)i[s]=null;else if(!Kt(o)&&!Lg(o)&&!P0(o)&&!xI(o)&&!In(o)){qt(cH(o,s));continue}i[s]=MRe(o,s,r)}}return i}function UL(e,t){const n={};for(const r of $t(e)){const i=MRe(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function _Dt(e){const t=[];for(const n of $t(e))if(j_(e,n)){const r=e[n],i=ln(r);for(const s of i)Kt(s)?t.push(s):FL(s)&&t.push(s.condition)}return t}function VZ(e,t,n){if(e)for(const r of $t(e)){const i=e[r];if(xt(i))for(const s of i)t.call(n,s,r);else t.call(n,i,r)}}function wDt(e,t,n,r){return e?$t(e).reduce((i,s)=>{const o=e[s];return xt(o)?o.reduce((a,u)=>t.call(r,a,u,s),i):t.call(r,i,o,s)},n):n}function HRe(e,t){return $t(t).reduce((n,r)=>{switch(r){case ho:case qu:case wL:case SL:case EL:case z0:case Pg:case ix:case aC:case pp:case L1:case V0:case M1:case sx:case H0:case q0:case W0:case ip:case hI:case ad:case Jw:case lw:return n;case YS:if(e==="line"||e==="trail")return n;case pI:case _L:{const i=t[r];if(xt(i)||Kt(i))for(const s of ln(i))s.aggregate||n.push(tn(s,{}));return n}case F1:if(e==="trail")return n;case od:case Ng:case Dg:case $1:case ox:case ax:case lx:case ux:{const i=N0(t[r]);return i&&!i.aggregate&&n.push(tn(i,{})),n}}},[])}function EDt(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(xt(t)){for(const s of t)s.aggregate?(r||(r=[]),r.push(s)):(i||(i=[]),i.push(s));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return xt(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function pH(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=e.map(({fieldPrefix:o,titlePrefix:a})=>{const u=r?` of ${HZ(t)}`:"";return{field:o+t.field,type:t.type,title:In(a)?{signal:`${a}"${escape(u)}"`}:a+u}}),s=_Dt(n).map(sDt);return{tooltip:[...i,...Fm(s,ii)]}}function HZ(e){const{title:t,field:n}=e;return ba(t,n)}function qZ(e,t,n,r,i){const{scale:s,axis:o}=n;return({partName:a,mark:u,positionPrefix:l,endPositionPrefix:c=void 0,extraEncoding:f={}})=>{const d=HZ(n);return qRe(e,a,i,{mark:u,encoding:{[t]:{field:`${l}_${n.field}`,type:n.type,...d!==void 0?{title:d}:{},...s!==void 0?{scale:s}:{},...o!==void 0?{axis:o}:{}},...cn(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{},...r,...f}})}}function qRe(e,t,n,r){const{clip:i,color:s,opacity:o}=e,a=e.type;return e[t]||e[t]===void 0&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...s?{color:s}:{},...o?{opacity:o}:{},...mg(r.mark)?r.mark:{type:r.mark},style:`${a}-${String(t)}`,...tx(e[t])?{}:e[t]}}]:[]}function WRe(e,t,n){const{encoding:r}=e,i=t==="vertical"?"y":"x",s=r[i],o=r[`${i}2`],a=r[`${i}Error`],u=r[`${i}Error2`];return{continuousAxisChannelDef:h5(s,n),continuousAxisChannelDef2:h5(o,n),continuousAxisChannelDefError:h5(a,n),continuousAxisChannelDefError2:h5(u,n),continuousAxis:i}}function h5(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...r}=e;return n!==t&&qt(H8t(n,t)),r}else return e}function GRe(e,t){const{mark:n,encoding:r}=e,{x:i,y:s}=r;if(mg(n)&&n.orient)return n.orient;if(Wv(i)){if(Wv(s)){const o=Kt(i)&&i.aggregate,a=Kt(s)&&s.aggregate;if(!o&&a===t)return"vertical";if(!a&&o===t)return"horizontal";if(o===t&&a===t)throw new Error("Both x and y cannot have aggregate");return ZS(s)&&!ZS(i)?"horizontal":"vertical"}return"horizontal"}else{if(Wv(s))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const lO="boxplot",SDt=["box","median","outliers","rule","ticks"],TDt=new jL(lO,KRe);function YRe(e){return Ri(e)?"tukey":e}function KRe(e,{config:t}){e={...e,encoding:UL(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:s,...o}=e,a=mg(n)?n:{type:n};i&&qt(V4e("boxplot"));const u=a.extent??t.boxplot.extent,l=ps("size",a,t),c=a.invalid,f=YRe(u),{bins:d,timeUnits:h,transform:p,continuousAxisChannelDef:m,continuousAxis:g,groupby:b,aggregate:y,encodingWithoutContinuousAxis:x,ticksOrient:w,boxOrient:T,customTooltipWithoutAggregatedField:A}=CDt(e,u,t),k=oC(m.field),{color:I,size:O,...M}=x,L=nt=>qZ(a,g,m,nt,t.boxplot),H=L(M),D=L(x),B=(un(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",U=L({...M,...O?{size:O}:{},color:{condition:{test:`${ss(`lower_box_${m.field}`)} >= ${ss(`upper_box_${m.field}`)}`,...I||{value:B}}}}),G=pH([{fieldPrefix:f==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:f==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],m,x),ee={type:"tick",color:"black",opacity:1,orient:w,invalid:c,aria:!1},ne=f==="min-max"?G:pH([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],m,x),ue=[...H({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:ne}),...H({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:ne}),...H({partName:"ticks",mark:ee,positionPrefix:"lower_whisker",extraEncoding:ne}),...H({partName:"ticks",mark:ee,positionPrefix:"upper_whisker",extraEncoding:ne})],X=[...f!=="tukey"?ue:[],...D({partName:"box",mark:{type:"bar",...l?{size:l}:{},orient:T,invalid:c,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:G}),...U({partName:"median",mark:{type:"tick",invalid:c,...un(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...l?{size:l}:{},orient:w,aria:!1},positionPrefix:"mid_box",extraEncoding:G})];if(f==="min-max")return{...o,transform:(o.transform??[]).concat(p),layer:X};const q=ss(`lower_box_${m.field}`),te=ss(`upper_box_${m.field}`),W=`(${te} - ${q})`,Z=`${q} - ${u} * ${W}`,oe=`${te} + ${u} * ${W}`,pe=ss(m.field),ce={joinaggregate:XRe(m.field),groupby:b},he={transform:[{filter:`(${Z} <= ${pe}) && (${pe} <= ${oe})`},{aggregate:[{op:"min",field:m.field,as:`lower_whisker_${k}`},{op:"max",field:m.field,as:`upper_whisker_${k}`},{op:"min",field:`lower_box_${m.field}`,as:`lower_box_${k}`},{op:"max",field:`upper_box_${m.field}`,as:`upper_box_${k}`},...y],groupby:b}],layer:ue},{tooltip:Ee,...Ae}=M,{scale:ge,axis:me}=m,Oe=HZ(m),Me=ed(me,["title"]),Ye=qRe(a,"outliers",t.boxplot,{transform:[{filter:`(${pe} < ${Z}) || (${pe} > ${oe})`}],mark:"point",encoding:{[g]:{field:m.field,type:m.type,...Oe!==void 0?{title:Oe}:{},...ge!==void 0?{scale:ge}:{},...ms(Me)?{}:{axis:Me}},...Ae,...I?{color:I}:{},...A?{tooltip:A}:{}}})[0];let lt;const We=[...d,...h,ce];return Ye?lt={transform:We,layer:[Ye,he]}:(lt=he,lt.transform.unshift(...We)),{...o,layer:[lt,{transform:p,layer:X}]}}function XRe(e){const t=oC(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function CDt(e,t,n){const r=GRe(e,lO),{continuousAxisChannelDef:i,continuousAxis:s}=WRe(e,r,lO),o=i.field,a=oC(o),u=YRe(t),l=[...XRe(o),{op:"median",field:o,as:`mid_box_${a}`},{op:"min",field:o,as:(u==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:o,as:(u==="min-max"?"upper_whisker_":"max_")+a}],c=u==="min-max"||u==="tukey"?[]:[{calculate:`${ss(`upper_box_${a}`)} - ${ss(`lower_box_${a}`)}`,as:`iqr_${a}`},{calculate:`min(${ss(`upper_box_${a}`)} + ${ss(`iqr_${a}`)} * ${t}, ${ss(`max_${a}`)})`,as:`upper_whisker_${a}`},{calculate:`max(${ss(`lower_box_${a}`)} - ${ss(`iqr_${a}`)} * ${t}, ${ss(`min_${a}`)})`,as:`lower_whisker_${a}`}],{[s]:f,...d}=e.encoding,{customTooltipWithoutAggregatedField:h,filteredEncoding:p}=EDt(d),{bins:m,timeUnits:g,aggregate:b,groupby:y,encoding:x}=VRe(p,n),w=r==="vertical"?"horizontal":"vertical",T=r,A=[...m,...g,{aggregate:[...b,...l],groupby:y},...c];return{bins:m,timeUnits:g,transform:A,groupby:y,aggregate:b,continuousAxisChannelDef:i,continuousAxis:s,encodingWithoutContinuousAxis:x,ticksOrient:w,boxOrient:T,customTooltipWithoutAggregatedField:h}}const WZ="errorbar",ADt=["ticks","rule"],kDt=new jL(WZ,QRe);function QRe(e,{config:t}){e={...e,encoding:UL(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,ticksOrient:o,markDef:a,outerSpec:u,tooltipEncoding:l}=JRe(e,WZ,t);delete s.size;const c=qZ(a,i,r,s,t.errorbar),f=a.thickness,d=a.size,h={type:"tick",orient:o,aria:!1,...f!==void 0?{thickness:f}:{},...d!==void 0?{size:d}:{}},p=[...c({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:l}),...c({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:l}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...f!==void 0?{size:f}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l})];return{...u,transform:n,...p.length>1?{layer:p}:{...p[0]}}}function RDt(e,t){const{encoding:n}=e;if(IDt(n))return{orient:GRe(e,t),inputType:"raw"};const r=PDt(n),i=NDt(n),s=n.x,o=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,u=n.y2;if(gr(a)&&gr(u))throw new Error(`${t} cannot have both x2 and y2`);if(gr(a)){if(Wv(s))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(gr(u)){if(Wv(o))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const a=n.xError,u=n.xError2,l=n.yError,c=n.yError2;if(gr(u)&&!gr(a))throw new Error(`${t} cannot have xError2 without xError`);if(gr(c)&&!gr(l))throw new Error(`${t} cannot have yError2 without yError`);if(gr(a)&&gr(l))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(gr(a)){if(Wv(s))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(gr(l)){if(Wv(o))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function IDt(e){return(gr(e.x)||gr(e.y))&&!gr(e.x2)&&!gr(e.y2)&&!gr(e.xError)&&!gr(e.xError2)&&!gr(e.yError)&&!gr(e.yError2)}function PDt(e){return gr(e.x2)||gr(e.y2)}function NDt(e){return gr(e.xError)||gr(e.xError2)||gr(e.yError)||gr(e.yError2)}function JRe(e,t,n){const{mark:r,encoding:i,params:s,projection:o,...a}=e,u=mg(r)?r:{type:r};s&&qt(V4e(t));const{orient:l,inputType:c}=RDt(e,t),{continuousAxisChannelDef:f,continuousAxisChannelDef2:d,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:p,continuousAxis:m}=WRe(e,l,t),{errorBarSpecificAggregate:g,postAggregateCalculates:b,tooltipSummary:y,tooltipTitleWithFieldName:x}=DDt(u,f,d,h,p,c,t,n),{[m]:w,[m==="x"?"x2":"y2"]:T,[m==="x"?"xError":"yError"]:A,[m==="x"?"xError2":"yError2"]:k,...I}=i,{bins:O,timeUnits:M,aggregate:L,groupby:H,encoding:D}=VRe(I,n),B=[...L,...g],U=c!=="raw"?[]:H,G=pH(y,f,D,x);return{transform:[...a.transform??[],...O,...M,...B.length===0?[]:[{aggregate:B,groupby:U}],...b],groupby:U,continuousAxisChannelDef:f,continuousAxis:m,encodingWithoutContinuousAxis:D,ticksOrient:l==="vertical"?"horizontal":"vertical",markDef:u,outerSpec:a,tooltipEncoding:G}}function DDt(e,t,n,r,i,s,o,a){let u=[],l=[];const c=t.field;let f,d=!1;if(s==="raw"){const h=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":a.errorbar.center,p=e.extent?e.extent:h==="mean"?"stderr":"iqr";if(h==="median"!=(p==="iqr")&&qt(V8t(h,p,o)),p==="stderr"||p==="stdev")u=[{op:p,field:c,as:`extent_${c}`},{op:h,field:c,as:`center_${c}`}],l=[{calculate:`${ss(`center_${c}`)} + ${ss(`extent_${c}`)}`,as:`upper_${c}`},{calculate:`${ss(`center_${c}`)} - ${ss(`extent_${c}`)}`,as:`lower_${c}`}],f=[{fieldPrefix:"center_",titlePrefix:dI(h)},{fieldPrefix:"upper_",titlePrefix:Mde(h,p,"+")},{fieldPrefix:"lower_",titlePrefix:Mde(h,p,"-")}],d=!0;else{let m,g,b;p==="ci"?(m="mean",g="ci0",b="ci1"):(m="median",g="q1",b="q3"),u=[{op:g,field:c,as:`lower_${c}`},{op:b,field:c,as:`upper_${c}`},{op:m,field:c,as:`center_${c}`}],f=[{fieldPrefix:"upper_",titlePrefix:ZE({field:c,aggregate:b,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:ZE({field:c,aggregate:g,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:ZE({field:c,aggregate:m,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&qt(z8t(e.center,e.extent)),s==="aggregated-upper-lower"?(f=[],l=[{calculate:ss(n.field),as:`upper_${c}`},{calculate:ss(c),as:`lower_${c}`}]):s==="aggregated-error"&&(f=[{fieldPrefix:"",titlePrefix:c}],l=[{calculate:`${ss(c)} + ${ss(r.field)}`,as:`upper_${c}`}],i?l.push({calculate:`${ss(c)} + ${ss(i.field)}`,as:`lower_${c}`}):l.push({calculate:`${ss(c)} - ${ss(r.field)}`,as:`lower_${c}`}));for(const h of l)f.push({fieldPrefix:h.as.substring(0,6),titlePrefix:uw(uw(h.calculate,"datum['",""),"']","")})}return{postAggregateCalculates:l,errorBarSpecificAggregate:u,tooltipSummary:f,tooltipTitleWithFieldName:d}}function Mde(e,t,n){return`${dI(e)} ${n} ${t}`}const GZ="errorband",ODt=["band","borders"],MDt=new jL(GZ,ZRe);function ZRe(e,{config:t}){e={...e,encoding:UL(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,markDef:o,outerSpec:a,tooltipEncoding:u}=JRe(e,GZ,t),l=o,c=qZ(l,i,r,s,t.errorband),f=e.encoding.x!==void 0&&e.encoding.y!==void 0;let d={type:f?"area":"rect"},h={type:f?"line":"rule"};const p={...l.interpolate?{interpolate:l.interpolate}:{},...l.tension&&l.interpolate?{tension:l.tension}:{}};return f?(d={...d,...p,ariaRoleDescription:"errorband"},h={...h,...p,aria:!1}):l.interpolate?qt(Cde("interpolate")):l.tension&&qt(Cde("tension")),{...a,transform:n,layer:[...c({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:u})]}}const eIe={};function YZ(e,t,n){const r=new jL(e,t);eIe[e]={normalizer:r,parts:n}}function LDt(){return $t(eIe)}YZ(lO,KRe,SDt);YZ(WZ,QRe,ADt);YZ(GZ,ZRe,ODt);const FDt=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],tIe={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},nIe={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},$Dt=$t(tIe),BDt=$t(nIe),jDt={header:1,headerRow:1,headerColumn:1,headerFacet:1},rIe=$t(jDt),iIe=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],UDt={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},zDt={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},D0="_vgsid_",VDt={point:{on:"click",fields:[D0],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function KZ(e){return e==="legend"||!!(e!=null&&e.legend)}function XB(e){return KZ(e)&&un(e)}function XZ(e){return!!(e!=null&&e.select)}function sIe(e){const t=[];for(const n of e||[]){if(XZ(n))continue;const{expr:r,bind:i,...s}=n;if(i&&r){const o={...s,bind:i,init:r};t.push(o)}else{const o={...s,...r?{update:r}:{},...i?{bind:i}:{}};t.push(o)}}return t}function HDt(e){return zL(e)||JZ(e)||QZ(e)}function QZ(e){return zt(e,"concat")}function zL(e){return zt(e,"vconcat")}function JZ(e){return zt(e,"hconcat")}function oIe({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function gg(e){return zt(e,"step")}function Lde(e){return zt(e,"view")||zt(e,"width")||zt(e,"height")}const Fde=20,qDt={align:1,bounds:1,center:1,columns:1,spacing:1},WDt=$t(qDt);function GDt(e,t,n){const r=n[t],i={},{spacing:s,columns:o}=r;s!==void 0&&(i.spacing=s),o!==void 0&&(LL(e)&&!bI(e.facet)||QZ(e))&&(i.columns=o),zL(e)&&(i.columns=1);for(const a of WDt)if(e[a]!==void 0)if(a==="spacing"){const u=e[a];i[a]=Ri(u)?u:{row:u.row??s,column:u.column??s}}else i[a]=e[a];return i}function mH(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function gH(e,t){const n=cO(e,t);return gg(n)?n.step:aIe}function cO(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return ba(n,{step:e.step})}const aIe=20,YDt={continuousWidth:200,continuousHeight:200,step:aIe},KDt={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:YDt,mark:jNt,arc:{},area:{},bar:HNt,circle:{},geoshape:{},image:{},line:{},point:{},rect:DZ,rule:{color:"black"},square:{},text:{color:"black"},tick:qNt,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:_Nt,projection:{},legend:UDt,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:VDt,style:{},title:{},facet:{spacing:Fde},concat:{spacing:Fde},normalizedNumberFormat:".0%"},wy=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],$de={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},Bde={blue:wy[0],orange:wy[1],red:wy[2],teal:wy[3],green:wy[4],yellow:wy[5],purple:wy[6],pink:wy[7],brown:wy[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function XDt(e={}){return{signals:[{name:"color",value:un(e)?{...Bde,...e}:Bde}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function QDt(e){return{signals:[{name:"fontSize",value:un(e)?{...$de,...e}:$de}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function JDt(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function uIe(e){const t=$t(e||{}),n={};for(const r of t){const i=e[r];n[r]=EI(i)?L4e(i):Vd(i)}return n}function ZDt(e){const t=$t(e),n={};for(const r of t)n[r]=uIe(e[r]);return n}const eOt=[...yRe,...BRe,...rIe,"background","padding","legend","lineBreak","scale","style","title","view"];function lIe(e={}){const{color:t,font:n,fontSize:r,selection:i,...s}=e,o=KT({},ur(KDt),n?JDt(n):{},t?XDt(t):{},r?QDt(r):{},s||{});i&&XT(o,"selection",i,!0);const a=ed(o,eOt);for(const u of["background","lineBreak","padding"])o[u]&&(a[u]=Vd(o[u]));for(const u of yRe)o[u]&&(a[u]=hl(o[u]));for(const u of BRe)o[u]&&(a[u]=uIe(o[u]));for(const u of rIe)o[u]&&(a[u]=hl(o[u]));if(o.legend&&(a.legend=hl(o.legend)),o.scale){const{invalid:u,...l}=o.scale,c=hl(u,{level:1});a.scale={...hl(l),...$t(c).length>0?{invalid:c}:{}}}return o.style&&(a.style=ZDt(o.style)),o.title&&(a.title=hl(o.title)),o.view&&(a.view=hl(o.view)),a}const tOt=new Set(["view",...ONt]),nOt=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],rOt={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...BNt};function iOt(e){e=ur(e);for(const t of nOt)delete e[t];if(e.axis)for(const t in e.axis)EI(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of FDt)delete e.legend[t];if(e.mark){for(const t of kde)delete e.mark[t];e.mark.tooltip&&un(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(sIe(e.params)),delete e.params);for(const t of tOt){for(const r of kde)delete e[t][r];const n=rOt[t];if(n)for(const r of n)delete e[t][r];oOt(e,t)}for(const t of LDt())delete e[t];sOt(e);for(const t in e)un(e[t])&&ms(e[t])&&delete e[t];return ms(e)?void 0:e}function sOt(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=M4e(e.title);ms(t)||(e.style["group-title"]={...e.style["group-title"],...t}),ms(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),ms(r)?delete e.title:e.title=r}function oOt(e,t,n,r){const i=e[t];t==="view"&&(n="cell");const s={...i,...e.style[n??t]};ms(s)||(e.style[n??t]=s),delete e[t]}function VL(e){return zt(e,"layer")}function aOt(e){return zt(e,"repeat")}function uOt(e){return!xt(e.repeat)&&zt(e.repeat,"layer")}class ZZ{map(t,n){return LL(t)?this.mapFacet(t,n):aOt(t)?this.mapRepeat(t,n):JZ(t)?this.mapHConcat(t,n):zL(t)?this.mapVConcat(t,n):QZ(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(VL(t))return this.mapLayer(t,n);if(j1(t))return this.mapUnit(t,n);throw new Error(pZ(t))}mapLayer(t,n){return{...t,layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(r=>this.map(r,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(r=>this.map(r,n))}}mapConcat(t,n){const{concat:r,...i}=t;return{...i,concat:r.map(s=>this.map(s,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const lOt={zero:1,center:1,normalize:1};function cOt(e){return gn(lOt,e)}const fOt=new Set([pRe,NL,PL,rO,OL,PZ,NZ,DL,mRe,IZ]),dOt=new Set([NL,PL,pRe]);function oE(e){return Kt(e)&&QS(e)==="quantitative"&&!e.bin}function jde(e,t,{orient:n,type:r}){const i=t==="x"?"y":"radius",s=t==="x"&&["bar","area"].includes(r),o=e[t],a=e[i];if(Kt(o)&&Kt(a))if(oE(o)&&oE(a)){if(o.stack)return t;if(a.stack)return i;const u=Kt(o)&&!!o.aggregate,l=Kt(a)&&!!a.aggregate;if(u!==l)return u?t:i;if(s){if(n==="vertical")return i;if(n==="horizontal")return t}}else{if(oE(o))return t;if(oE(a))return i}else{if(oE(o))return s&&n==="vertical"?void 0:t;if(oE(a))return s&&n==="horizontal"?void 0:i}}function hOt(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function cIe(e,t){var m,g;const n=mg(e)?e:{type:e},r=n.type;if(!fOt.has(r))return null;const i=jde(t,"x",n)||jde(t,"theta",n);if(!i)return null;const s=t[i],o=Kt(s)?tn(s,{}):void 0,a=hOt(i),u=[],l=new Set;if(t[a]){const b=t[a],y=Kt(b)?tn(b,{}):void 0;y&&y!==o&&(u.push(a),l.add(y))}const c=a==="x"?"xOffset":"yOffset",f=t[c],d=Kt(f)?tn(f,{}):void 0;d&&d!==o&&(u.push(c),l.add(d));const h=xPt.reduce((b,y)=>{if(y!=="tooltip"&&j_(t,y)){const x=t[y];for(const w of ln(x)){const T=N0(w);if(T.aggregate)continue;const A=tn(T,{});(!A||!l.has(A))&&b.push({channel:y,fieldDef:T})}}return b},[]);let p;return s.stack!==void 0?tx(s.stack)?p=s.stack?"zero":null:p=s.stack:dOt.has(r)&&(p="zero"),!p||!cOt(p)||zRe(t)&&h.length===0?null:((m=s==null?void 0:s.scale)!=null&&m.type&&((g=s==null?void 0:s.scale)==null?void 0:g.type)!==pl.LINEAR&&s!=null&&s.stack&&qt(B8t(s.scale.type)),gr(t[Og(i)])?(s.stack!==void 0&&qt($8t(i)),null):(Kt(s)&&s.aggregate&&!DPt.has(s.aggregate)&&qt(j8t(s.aggregate)),{groupbyChannels:u,groupbyFields:l,fieldChannel:i,impute:s.impute===null?!1:fx(r),stackBy:h,offset:p}))}function fIe(e,t,n){const r=hl(e),i=ps("orient",r,n);if(r.orient=yOt(r.type,t,i),i!==void 0&&i!==r.orient&&qt(w8t(r.orient,i)),r.type==="bar"&&r.orient){const u=ps("cornerRadiusEnd",r,n);if(u!==void 0){const l=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:zNt[r.orient];for(const c of l)r[c]=u;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}const s=ps("opacity",r,n),o=ps("fillOpacity",r,n);return s===void 0&&o===void 0&&(r.opacity=mOt(r.type,t)),ps("cursor",r,n)===void 0&&(r.cursor=pOt(r,t,n)),r}function pOt(e,t,n){return t.href||e.href||ps("href",e,n)?"pointer":e.cursor}function mOt(e,t){if(Gr([OL,IZ,PZ,NZ],e)&&!zRe(t))return .7}function gOt(e,t,{graticule:n}){if(n)return!1;const r=pg("filled",e,t),i=e.type;return ba(r,i!==OL&&i!==DL&&i!==rO)}function yOt(e,t,n){switch(e){case OL:case PZ:case NZ:case mRe:case NNt:case PNt:return}const{x:r,y:i,x2:s,y2:o}=t;switch(e){case NL:if(Kt(r)&&(dl(r.bin)||Kt(i)&&i.aggregate&&!r.aggregate))return"vertical";if(Kt(i)&&(dl(i.bin)||Kt(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(o||s){if(n)return n;if(!s)return(Kt(r)&&r.type===dw&&!Bs(r.bin)||sO(r))&&Kt(i)&&dl(i.bin)?"horizontal":"vertical";if(!o)return(Kt(i)&&i.type===dw&&!Bs(i.bin)||sO(i))&&Kt(r)&&dl(r.bin)?"vertical":"horizontal"}case rO:if(s&&!(Kt(r)&&dl(r.bin))&&o&&!(Kt(i)&&dl(i.bin)))return;case PL:if(o)return Kt(i)&&dl(i.bin)?"horizontal":"vertical";if(s)return Kt(r)&&dl(r.bin)?"vertical":"horizontal";if(e===rO){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case DL:case IZ:{const a=Nde(r),u=Nde(i);if(n)return n;if(a&&!u)return e!=="tick"?"horizontal":"vertical";if(!a&&u)return e!=="tick"?"vertical":"horizontal";if(a&&u)return"vertical";{const l=uf(r)&&r.type===KS,c=uf(i)&&i.type===KS;if(l&&!c)return"vertical";if(!l&&c)return"horizontal"}return}}return"vertical"}function vOt(e){const{point:t,line:n,...r}=e;return $t(r).length>1?r:r.type}function bOt(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:ed(e[t],["point","line"])});return e}function QB(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?un(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?un(t.point)?t.point:{}:void 0}function Ude(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class xOt{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(j1(t)){const{mark:r,encoding:i}=t,s=mg(r)?r:{type:r};switch(s.type){case"line":case"rule":case"trail":return!!QB(s,n[s.type],i);case"area":return!!QB(s,n[s.type],i)||!!Ude(s,n[s.type])}}return!1}run(t,n,r){const{config:i}=n,{params:s,projection:o,mark:a,name:u,encoding:l,...c}=t,f=UL(l,i),d=mg(a)?a:{type:a},h=QB(d,i[d.type],f),p=d.type==="area"&&Ude(d,i[d.type]),m=[{name:u,...s?{params:s}:{},mark:vOt({...d.type==="area"&&d.opacity===void 0&&d.fillOpacity===void 0?{opacity:.7}:{},...d}),encoding:ed(f,["shape"])}],g=cIe(fIe(d,f,i),f);let b=f;if(g){const{fieldChannel:y,offset:x}=g;b={...f,[y]:{...f[y],...x?{stack:x}:{}}}}return b=ed(b,["y2","x2"]),p&&m.push({...o?{projection:o}:{},mark:{type:"line",...qS(d,["clip","interpolate","tension","tooltip"]),...p},encoding:b}),h&&m.push({...o?{projection:o}:{},mark:{type:"point",opacity:1,filled:!0,...qS(d,["clip","tooltip"]),...h},encoding:b}),r({...c,layer:m},{...n,config:bOt(i)})}}function _Ot(e,t){return t?bI(e)?hIe(e,t):dIe(e,t):e}function JB(e,t){return t?hIe(e,t):e}function yH(e,t,n){const r=t[e];if(rDt(r)){if(r.repeat in n)return{...t,[e]:n[r.repeat]};qt(ZPt(r.repeat));return}return t}function dIe(e,t){if(e=yH("field",e,t),e!==void 0){if(e===null)return null;if(BZ(e)&&r1(e.sort)){const n=yH("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function zde(e,t){if(Kt(e))return dIe(e,t);{const n=yH("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function Vde(e,t){if(gr(e)){const n=zde(e,t);if(n)return n;if(xI(e))return{condition:e.condition}}else{if(_I(e)){const n=zde(e.condition,t);if(n)return{...e,condition:n};{const{condition:r,...i}=e;return i}}return e}}function hIe(e,t){const n={};for(const r in e)if(zt(e,r)){const i=e[r];if(xt(i))n[r]=i.map(s=>Vde(s,t)).filter(s=>s);else{const s=Vde(i,t);s!==void 0&&(n[r]=s)}}return n}class wOt{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(j1(t)){const{encoding:n,mark:r}=t;if(r==="line"||mg(r)&&r.type==="line")for(const i of yPt){const s=Zw(i),o=n[s];if(n[i]&&(Kt(o)&&!dl(o.bin)||Lg(o)))return!0}}return!1}run(t,n,r){const{encoding:i,mark:s}=t;return qt(_8t(!!i.x2,!!i.y2)),r({...t,mark:un(s)?{...s,type:"rule"}:"rule"},n)}}class EOt extends ZZ{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[TDt,kDt,MDt,new xOt,new wOt]}map(t,n){if(j1(t)){const r=j_(t.encoding,t1),i=j_(t.encoding,n1),s=j_(t.encoding,xL);if(r||i||s)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:r,parentProjection:i}=n,s=JB(t.encoding,n.repeater),o={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(u=>u).join("_")}:{},...s?{encoding:s}:{}};if(r||i)return this.mapUnitWithParentEncodingOrProjection(o,n);const a=this.mapLayerOrUnit.bind(this);for(const u of this.nonFacetUnitNormalizers)if(u.hasMatchingType(o,n.config))return u.run(o,n,a);return o}mapRepeat(t,n){return uOt(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:r,spec:i,...s}=t,{row:o,column:a,layer:u}=r,{repeater:l={},repeaterPrefix:c=""}=n;return o||a?this.mapRepeat({...t,repeat:{...o?{row:o}:{},...a?{column:a}:{}},spec:{repeat:{layer:u},spec:i}},n):{...s,layer:u.map(f=>{const d={...l,layer:f},h=`${(i.name?`${i.name}_`:"")+c}child__layer_${lo(f)}`,p=this.mapLayerOrUnit(i,{...n,repeater:d,repeaterPrefix:h});return p.name=h,p})}}mapNonLayerRepeat(t,n){const{repeat:r,spec:i,data:s,...o}=t;!xt(r)&&t.columns&&(t=ed(t,["columns"]),qt(wde("repeat")));const a=[],{repeater:u={},repeaterPrefix:l=""}=n,c=!xt(r)&&r.row||[u?u.row:null],f=!xt(r)&&r.column||[u?u.column:null],d=xt(r)&&r||[u?u.repeat:null];for(const p of d)for(const m of c)for(const g of f){const b={repeat:p,row:m,column:g,layer:u.layer},y=(i.name?`${i.name}_`:"")+l+"child__"+(xt(r)?`${lo(p)}`:(r.row?`row_${lo(m)}`:"")+(r.column?`column_${lo(g)}`:"")),x=this.map(i,{...n,repeater:b,repeaterPrefix:y});x.name=y,a.push(ed(x,["data"]))}const h=xt(r)?t.columns:r.column?r.column.length:1;return{data:i.data??s,align:"all",...o,columns:h,concat:a}}mapFacet(t,n){const{facet:r}=t;return bI(r)&&t.columns&&(t=ed(t,["columns"]),qt(wde("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:r,projection:i}=t,{parentEncoding:s,parentProjection:o,config:a}=n,u=qde({parentProjection:o,projection:i}),l=Hde({parentEncoding:s,encoding:JB(r,n.repeater)});return this.mapUnit({...t,...u?{projection:u}:{},...l?{encoding:l}:{}},{config:a})}mapFacetedUnit(t,n){const{row:r,column:i,facet:s,...o}=t.encoding,{mark:a,width:u,projection:l,height:c,view:f,params:d,encoding:h,...p}=t,{facetMapping:m,layout:g}=this.getFacetMappingAndLayout({row:r,column:i,facet:s},n),b=JB(o,n.repeater);return this.mapFacet({...p,...g,facet:m,spec:{...u?{width:u}:{},...c?{height:c}:{},...f?{view:f}:{},...l?{projection:l}:{},mark:a,encoding:b,...d?{params:d}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:r,column:i,facet:s}=t;if(r||i){s&&qt(b8t([...r?[t1]:[],...i?[n1]:[]]));const o={},a={};for(const u of[t1,n1]){const l=t[u];if(l){const{align:c,center:f,spacing:d,columns:h,...p}=l;o[u]=p;for(const m of["align","center","spacing"])l[m]!==void 0&&(a[m]??(a[m]={}),a[m][u]=l[m])}}return{facetMapping:o,layout:a}}else{const{align:o,center:a,spacing:u,columns:l,...c}=s;return{facetMapping:_Ot(c,n.repeater),layout:{...o?{align:o}:{},...a?{center:a}:{},...u?{spacing:u}:{},...l?{columns:l}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:r,...i}){const{encoding:s,projection:o,...a}=t,u={...i,parentEncoding:Hde({parentEncoding:n,encoding:s,layer:!0}),parentProjection:qde({parentProjection:r,projection:o})};return super.mapLayer({...a,...t.name?{name:[u.repeaterPrefix,t.name].filter(l=>l).join("_")}:{}},u)}}function Hde({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...$t(e),...$t(t)]);for(const s of i){const o=t[s],a=e[s];if(gr(o)){const u={...a,...o};r[s]=u}else _I(o)?r[s]={...o,condition:{...a,...o.condition}}:o||o===null?r[s]=o:(n||P0(a)||In(a)||gr(a)||xt(a))&&(r[s]=a)}}else r=t;return!r||ms(r)?void 0:r}function qde(e){const{parentProjection:t,projection:n}=e;return t&&n&&qt(u8t({parentProjection:t,projection:n})),n??t}function eee(e){return zt(e,"filter")}function SOt(e){return zt(e,"stop")}function pIe(e){return zt(e,"lookup")}function TOt(e){return zt(e,"data")}function COt(e){return zt(e,"param")}function AOt(e){return zt(e,"pivot")}function kOt(e){return zt(e,"density")}function ROt(e){return zt(e,"quantile")}function IOt(e){return zt(e,"regression")}function POt(e){return zt(e,"loess")}function NOt(e){return zt(e,"sample")}function DOt(e){return zt(e,"window")}function OOt(e){return zt(e,"joinaggregate")}function MOt(e){return zt(e,"flatten")}function LOt(e){return zt(e,"calculate")}function mIe(e){return zt(e,"bin")}function FOt(e){return zt(e,"impute")}function $Ot(e){return zt(e,"timeUnit")}function BOt(e){return zt(e,"aggregate")}function jOt(e){return zt(e,"stack")}function UOt(e){return zt(e,"fold")}function zOt(e){return zt(e,"extent")&&!zt(e,"density")&&!zt(e,"regression")}function VOt(e){return e.map(t=>eee(t)?{filter:QE(t.filter,pNt)}:t)}class HOt extends ZZ{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=Wde(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=Wde(t,n),t.encoding){const r={};for(const[i,s]of Ab(t.encoding))r[i]=gIe(s,n);t={...t,encoding:r}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:r,...i}=t;return r?{...i,params:Ab(r).map(([s,o])=>{const{init:a,bind:u,empty:l,...c}=o;c.type==="single"?(c.type="point",c.toggle=!1):c.type==="multi"&&(c.type="point"),n.emptySelections[s]=l!=="none";for(const f of El(n.selectionPredicates[s]??{}))f.empty=l!=="none";return{name:s,value:a,select:c,bind:u}})}:t}}function Wde(e,t){const{transform:n,...r}=e;if(n){const i=n.map(s=>{if(eee(s))return{filter:vH(s,t)};if(mIe(s)&&e2(s.bin))return{...s,bin:yIe(s.bin)};if(pIe(s)){const{selection:o,...a}=s.from;return o?{...s,from:{param:o,...a}}:s}return s});return{...r,transform:i}}return e}function gIe(e,t){var r,i;const n=ur(e);if(Kt(n)&&e2(n.bin)&&(n.bin=yIe(n.bin)),i2(n)&&((i=(r=n.scale)==null?void 0:r.domain)!=null&&i.selection)){const{selection:s,...o}=n.scale.domain;n.scale.domain={...o,...s?{param:s}:{}}}if(xI(n))if(xt(n.condition))n.condition=n.condition.map(s=>{const{selection:o,param:a,test:u,...l}=s;return a?s:{...l,test:vH(s,t)}});else{const{selection:s,param:o,test:a,...u}=gIe(n.condition,t);n.condition=o?n.condition:{...u,test:vH(n.condition,t)}}return n}function yIe(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function vH(e,t){const n=r=>QE(r,i=>{var s;const o=t.emptySelections[i]??!0,a={param:i,empty:o};return(s=t.selectionPredicates)[i]??(s[i]=[]),t.selectionPredicates[i].push(a),a});return e.selection?n(e.selection):QE(e.test||e.filter,r=>r.selection?n(r.selection):r)}class bH extends ZZ{map(t,n){const r=n.selections??[];if(t.params&&!j1(t)){const i=[];for(const s of t.params)XZ(s)?r.push(s):i.push(s);t.params=i}return n.selections=r,super.map(t,n)}mapUnit(t,n){const r=n.selections;if(!r||!r.length)return t;const i=(n.path??[]).concat(t.name),s=[];for(const o of r)if(!o.views||!o.views.length)s.push(o);else for(const a of o.views)(cn(a)&&(a===t.name||i.includes(a))||xt(a)&&a.map(u=>i.indexOf(u)).every((u,l,c)=>u!==-1&&(l===0||u>c[l-1])))&&s.push(o);return s.length&&(t.params=s),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=bH.prototype[e];bH.prototype[e]=function(n,r){return t.call(this,n,qOt(n,r))}}function qOt(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function vIe(e,t){t===void 0&&(t=lIe(e.config));const n=KOt(e,t),{width:r,height:i}=e,s=XOt(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...s?{autosize:s}:{}}}const WOt=new EOt,GOt=new HOt,YOt=new bH;function KOt(e,t={}){const n={config:t};return YOt.map(WOt.map(GOt.map(e,n),n),n)}function Gde(e){return cn(e)?{type:e}:e??{}}function XOt(e,t,n){let{width:r,height:i}=t;const s=j1(e)||VL(e),o={};s?r=="container"&&i=="container"?(o.type="fit",o.contains="padding"):r=="container"?(o.type="fit-x",o.contains="padding"):i=="container"&&(o.type="fit-y",o.contains="padding"):(r=="container"&&(qt(vde("width")),r=void 0),i=="container"&&(qt(vde("height")),i=void 0));const a={type:"pad",...o,...n?Gde(n.autosize):{},...Gde(e.autosize)};if(a.type==="fit"&&!s&&(qt(zPt),a.type="pad"),r=="container"&&!(a.type=="fit"||a.type=="fit-x")&&qt(bde("width")),i=="container"&&!(a.type=="fit"||a.type=="fit-y")&&qt(bde("height")),!Kd(a,{type:"pad"}))return a}function QOt(e){return["fit","fit-x","fit-y"].includes(e)}function JOt(e){return e?`fit-${TL(e)}`:"fit"}const ZOt=["background","padding"];function Yde(e,t){const n={};for(const r of ZOt)e&&e[r]!==void 0&&(n[r]=Vd(e[r]));return t&&(n.params=e.params),n}class U1{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new U1(ur(this.explicit),ur(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return ba(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of $t(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function Sm(e){return{explicit:!0,value:e}}function Bd(e){return{explicit:!1,value:e}}function bIe(e){return(t,n,r,i)=>{const s=e(t.value,n.value);return s>0?t:s<0?n:HL(t,n,r,i)}}function HL(e,t,n,r){return e.explicit&&t.explicit&&qt(P8t(n,r,e.value,t.value)),e}function Ib(e,t,n,r,i=HL){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:Kd(e.value,t.value)?e:i(e,t,n,r)}class e9t extends U1{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function eT(e){return zt(e,"url")}function V4(e){return zt(e,"values")}function xIe(e){return zt(e,"name")&&!eT(e)&&!V4(e)&&!ib(e)}function ib(e){return e&&(_Ie(e)||wIe(e)||tee(e))}function _Ie(e){return zt(e,"sequence")}function wIe(e){return zt(e,"sphere")}function tee(e){return zt(e,"graticule")}var So;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup",e[e.PreFilterInvalid=5]="PreFilterInvalid",e[e.PostFilterInvalid=6]="PostFilterInvalid"})(So||(So={}));function EIe({invalid:e,isPath:t}){switch(vRe(e,{isPath:t})){case"filter":return{marks:"exclude-invalid-values",scales:"exclude-invalid-values"};case"break-paths-show-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"include-invalid-values"};case"break-paths-filter-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"exclude-invalid-values"};case"show":return{marks:"include-invalid-values",scales:"include-invalid-values"}}}function t9t(e){const{marks:t,scales:n}=EIe(e);return t===n?So.Main:n==="include-invalid-values"?So.PreFilterInvalid:So.PostFilterInvalid}class us{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){qt(s8t);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const i of this._children)i.parent=t;this._children=[],t.removeChild(this);const r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}}class td extends us{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${b4e()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function ZB(e){return e.as!==void 0}function Kde(e){return`${e}_end`}class Gm extends us{clone(){return new Gm(null,ur(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{const{field:a,timeUnit:u}=s;if(u){let l;if(r2(u)){if(_o(n)){const{mark:c,markDef:f,config:d}=n,h=Rb({fieldDef:s,markDef:f,config:d});(z4(c)||h)&&(l={timeUnit:$u(u),field:a})}}else l={as:tn(s,{forAs:!0}),field:a,timeUnit:u};if(_o(n)){const{mark:c,markDef:f,config:d}=n,h=Rb({fieldDef:s,markDef:f,config:d});z4(c)&&xa(o)&&h!==.5&&(l.rectBandPosition=h)}l&&(i[ii(l)]=l)}return i},{});return ms(r)?null:new Gm(t,r)}static makeFromTransform(t,n){const{timeUnit:r,...i}={...n},s=$u(r),o={...i,timeUnit:s};return new Gm(t,{[ii(o)]:o})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[r,i]of Ab(this.timeUnits)){const s=ZB(i)?i.as:`${i.field}_end`;t.has(s)||(n[r]=i)}this.timeUnits=n}producedFields(){return new Set(El(this.timeUnits).map(t=>ZB(t)?t.as:Kde(t.field)))}dependentFields(){return new Set(El(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${ii(this.timeUnits)}`}assemble(){const t=[];for(const n of El(this.timeUnits)){const{rectBandPosition:r}=n,i=$u(n.timeUnit);if(ZB(n)){const{field:s,as:o}=n,{unit:a,utc:u,...l}=i,c=[o,`${o}_end`];t.push({field:rp(s),type:"timeunit",...a?{units:RL(a)}:{},...u?{timezone:"utc"}:{},...l,as:c}),t.push(...Xde(c,r,i))}else if(n){const{field:s}=n,o=s.replaceAll("\\.","."),a=SIe({timeUnit:i,field:o}),u=Kde(o);t.push({type:"formula",expr:a,as:u}),t.push(...Xde([o,u],r,i))}}return t}}const qL="offsetted_rect_start",WL="offsetted_rect_end";function SIe({timeUnit:e,field:t,reverse:n}){const{unit:r,utc:i}=e,s=eRe(r),{part:o,step:a}=iRe(s,e.step);return`${i?"utcOffset":"timeOffset"}('${o}', ${ss(t)}, ${n?-a:a})`}function Xde([e,t],n,r){if(n!==void 0&&n!==.5){const i=ss(e),s=ss(t);return[{type:"formula",expr:Qde([SIe({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${qL}`},{type:"formula",expr:Qde([i,s],n+.5),as:`${e}_${WL}`}]}return[]}function Qde([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const SI="_tuple_fields";class n9t{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const r9t={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??(t.project=new n9t),s={},o={},a=new Set,u=(p,m)=>{const g=m==="visual"?p.channel:p.field;let b=lo(`${r}_${g}`);for(let y=1;a.has(b);y++)b=lo(`${r}_${g}_${y}`);return a.add(b),{[m]:b}},l=t.type,c=e.config.selection[l],f=n.value!==void 0?ln(n.value):null;let{fields:d,encodings:h}=un(n.select)?n.select:{};if(!d&&!h&&f){for(const p of f)if(un(p))for(const m of $t(p))gPt(m)?(h||(h=[])).push(m):l==="interval"?(qt(JPt),h=c.encodings):(d??(d=[])).push(m)}!d&&!h&&(h=c.encodings,"fields"in c&&(d=c.fields));for(const p of h??[]){const m=e.fieldDef(p);if(m){let g=m.field;if(m.aggregate){qt(VPt(p,m.aggregate));continue}else if(!g){qt(_de(p));continue}if(m.timeUnit&&!r2(m.timeUnit)){g=e.vgField(p);const b={timeUnit:m.timeUnit,as:g,field:m.field};o[ii(b)]=b}if(!s[g]){const b=l==="interval"&&Mg(p)&&I0(e.getScaleComponent(p).get("type"))?"R":m.bin?"R-RE":"E",y={field:g,channel:p,type:b,index:i.items.length};y.signals={...u(y,"data"),...u(y,"visual")},i.items.push(s[g]=y),i.hasField[g]=s[g],i.hasSelectionId=i.hasSelectionId||g===D0,T4e(p)?(y.geoChannel=p,y.channel=S4e(p),i.hasChannel[y.channel]=s[g]):i.hasChannel[p]=s[g]}}else qt(_de(p))}for(const p of d??[]){if(i.hasField[p])continue;const m={type:"E",field:p,index:i.items.length};m.signals={...u(m,"data")},i.items.push(m),i.hasField[p]=m,i.hasSelectionId=i.hasSelectionId||p===D0}f&&(t.init=f.map(p=>i.items.map(m=>un(p)?p[m.geoChannel||m.channel]!==void 0?p[m.geoChannel||m.channel]:p[m.field]:p))),ms(o)||(i.timeUnit=new Gm(null,o))},signals:(e,t,n)=>{const r=t.name+SI;return n.filter(s=>s.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(kIe)})}},TIe="_curr",W8="anim_value",SE="anim_clock",xH="eased_anim_clock",CIe="min_extent",AIe="max_range_extent",ej="last_tick_at",tj="is_playing",i9t=1/60*1e3,s9t=(e,t)=>[{name:xH,update:SE},{name:`${e}_domain`,init:`domain('${t}')`},{name:CIe,init:`extent(${e}_domain)[0]`},{name:AIe,init:`extent(range('${t}'))[1]`},{name:W8,update:`invert('${t}', ${xH})`}],o9t={defined:e=>e.type==="point",topLevelSignals:(e,t,n)=>(Ym(t)&&(n=n.concat([{name:SE,init:"0",on:[{events:{type:"timer",throttle:i9t},update:`${tj} ? (${SE} + (now() - ${ej}) > ${AIe} ? 0 : ${SE} + (now() - ${ej})) : ${SE}`}]},{name:ej,init:"now()",on:[{events:[{signal:SE},{signal:tj}],update:"now()"}]},{name:tj,init:"true"}])),n),signals:(e,t,n)=>{const r=t.name,i=r+SI,s=t.project,o="(item().isVoronoi ? datum.datum : datum)",a=El(e.component.selection??{}).reduce((c,f)=>f.type==="interval"?c.concat(f.name+eS):c,[]).map(c=>`indexof(item().mark.name, '${c}') < 0`).join(" && "),u=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${a?` && ${a}`:""}`;let l=`unit: ${U_(e)}, `;if(t.project.hasSelectionId)l+=`${D0}: ${o}[${Jt(D0)}]`;else if(Ym(t))l+=`fields: ${i}, values: [${W8} ? ${W8} : ${CIe}]`;else{const c=s.items.map(f=>{const d=e.fieldDef(f.channel);return d!=null&&d.bin?`[${o}[${Jt(e.vgField(f.channel,{}))}], ${o}[${Jt(e.vgField(f.channel,{binSuffix:"end"}))}]]`:`${o}[${Jt(f.field)}]`}).join(", ");l+=`fields: ${i}, values: [${c}]`}if(Ym(t))return n.concat(s9t(t.name,e.scaleName(sx)),[{name:r+S1,on:[{events:[{signal:xH},{signal:W8}],update:`{${l}}`,force:!0}]}]);{const c=t.events;return n.concat([{name:r+S1,on:c?[{events:c,update:`${u} ? {${l}} : null`,force:!0}]:[]}])}}};function kIe(e){const{signals:t,hasLegend:n,index:r,...i}=e;return i.field=rp(i.field),i}function mw(e,t=!0,n=fc){if(xt(e)){const r=e.map(i=>mw(i,t,n));return t?`[${r.join(", ")}]`:r}else if(n2(e))return n(t?fw(e):nNt(e));return t?n(gs(e)):e}function a9t(e,t){for(const n of El(e.component.selection??{})){const r=n.name;let i=`${r}${S1}, ${n.resolve==="global"?"true":`{unit: ${U_(e)}}`}`;for(const s of YL)s.defined(n)&&(s.signals&&(t=s.signals(e,n,t)),s.modifyExpr&&(i=s.modifyExpr(e,n,i)));t.push({name:r+O9t,on:[{events:{signal:n.name+S1},update:`modify(${Jt(n.name+gw)}, ${i})`}]})}return nee(t)}function u9t(e,t){if(e.component.selection&&$t(e.component.selection).length){const n=Jt(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:rx("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return nee(t)}function l9t(e,t){let n=!1;for(const r of El(e.component.selection??{})){const i=r.name,s=Jt(i+gw);if(t.filter(a=>a.name===i).length===0){const a=r.resolve==="global"?"union":r.resolve,u=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${qIe}(${s}, ${Jt(a)}${u}`})}n=!0;for(const a of YL)a.defined(r)&&a.topLevelSignals&&(t=a.topLevelSignals(e,r,t))}return n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),nee(t)}function c9t(e,t){const n=[],r=[],i=U_(e,{escape:!1});for(const s of El(e.component.selection??{})){const o={name:s.name+gw};if(s.project.hasSelectionId&&(o.transform=[{type:"collect",sort:{field:D0}}]),s.init){const u=s.project.items.map(kIe);o.values=s.project.hasSelectionId?s.init.map(l=>({unit:i,[D0]:mw(l,!1)[0]})):s.init.map(l=>({unit:i,fields:u,values:mw(l,!1)}))}if([...n,...t].filter(u=>u.name===s.name+gw).length||n.push(o),Ym(s)&&t.length){const u=e.lookupDataSource(e.getDataName(So.Main)),l=t.find(f=>f.name===u),c=l.transform.find(f=>f.type==="filter"&&f.expr.includes("vlSelectionTest"));if(c){l.transform=l.transform.filter(d=>d!==c);const f={name:l.name+TIe,source:l.name,transform:[c]};r.push(f)}}}return n.concat(t,r)}function RIe(e,t){for(const n of El(e.component.selection??{}))for(const r of YL)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function f9t(e,t){for(const n of e.children)_o(n)&&(t=RIe(n,t));return t}function d9t(e,t,n,r){const i=XIe(e,t.param,t);return{signal:I0(n.get("type"))&&xt(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function nee(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}const i1={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!Mg(i))continue;const s=e.getScaleComponent(i),o=s?s.get("type"):void 0;if(o=="sequential"&&qt(GPt),!s||!I0(o)){qt(WPt);continue}s.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(o=>n.filter(a=>a.name===o.signals.data).length===0);if(!e.parent||wH(e)||r.length===0)return n;const i=n.find(o=>o.name===t.name);let s=i.update;if(s.includes(qIe))i.update=`{${r.map(o=>`${Jt(rp(o.field))}: ${o.signals.data}`).join(", ")}}`;else{for(const o of r){const a=`${Jt(rp(o.field))}: ${o.signals.data}`;s.includes(a)||(s=`${s.substring(0,s.length-1)}, ${a}}`)}i.update=s}return n.concat(r.map(o=>({name:o.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!wH(e))for(const r of t.scales){const i=n.find(s=>s.name===r.signals.data);i.push="outer",delete i.value,delete i.update}return n}};function _H(e,t){return`domain(${Jt(e.scaleName(t))})`}function wH(e){return e.parent&&hC(e.parent)&&(!e.parent.parent||wH(e.parent.parent))}const eS="_brush",IIe="_scale_trigger",l3="geo_interval_init_tick",PIe="_init",h9t="_center",p9t={defined:e=>e.type==="interval",parse:(e,t,n)=>{var r;if(e.hasProjection){const i={...un(n.select)?n.select:{}};i.fields=[D0],i.encodings||(i.encodings=n.value?$t(n.value):[q0,H0]),n.select={type:"interval",...i}}if(t.translate&&!i1.defined(t)){const i=`!event.item || event.item.mark.name !== ${Jt(t.name+eS)}`;for(const s of t.events){if(!s.between){qt(`${s} is not an ordered event stream for interval selections.`);continue}const o=ln((r=s.between[0]).filter??(r.filter=[]));o.includes(i)||o.push(i)}}},signals:(e,t,n)=>{const r=t.name,i=r+S1,s=El(t.project.hasChannel).filter(a=>a.channel===ho||a.channel===qu),o=t.init?t.init[0]:null;if(n.push(...s.reduce((a,u)=>a.concat(m9t(e,t,u,o&&o[u.index])),[])),e.hasProjection){const a=Jt(e.projectionName()),u=e.projectionName()+h9t,{x:l,y:c}=t.project.hasChannel,f=l&&l.signals.visual,d=c&&c.signals.visual,h=l?o&&o[l.index]:`${u}[0]`,p=c?o&&o[c.index]:`${u}[1]`,m=T=>e.getSizeSignalRef(T).signal,g=`[[${f?f+"[0]":"0"}, ${d?d+"[0]":"0"}],[${f?f+"[1]":m("width")}, ${d?d+"[1]":m("height")}]]`;o&&(n.unshift({name:r+PIe,init:`[scale(${a}, [${l?h[0]:h}, ${c?p[0]:p}]), scale(${a}, [${l?h[1]:h}, ${c?p[1]:p}])]`}),(!l||!c)&&(n.find(A=>A.name===u)||n.unshift({name:u,update:`invert(${a}, [${m("width")}/2, ${m("height")}/2])`})));const b=`intersect(${g}, {markname: ${Jt(e.getName("marks"))}}, unit.mark)`,y=`{unit: ${U_(e)}}`,x=`vlSelectionTuples(${b}, ${y})`,w=s.map(T=>T.signals.visual);return n.concat({name:i,on:[{events:[...w.length?[{signal:w.join(" || ")}]:[],...o?[{signal:l3}]:[]],update:x}]})}else{if(!i1.defined(t)){const l=r+IIe,c=s.map(f=>{const d=f.channel,{data:h,visual:p}=f.signals,m=Jt(e.scaleName(d)),g=e.getScaleComponent(d).get("type"),b=I0(g)?"+":"";return`(!isArray(${h}) || (${b}invert(${m}, ${p})[0] === ${b}${h}[0] && ${b}invert(${m}, ${p})[1] === ${b}${h}[1]))`});c.length&&n.push({name:l,value:{},on:[{events:s.map(f=>({scale:e.scaleName(f.channel)})),update:c.join(" && ")+` ? ${l} : {}`}]})}const a=s.map(l=>l.signals.data),u=`unit: ${U_(e)}, fields: ${r+SI}, values`;return n.concat({name:i,...o?{init:`{${u}: ${mw(o)}}`}:{},...a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${u}: [${a}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(_o(e)&&e.hasProjection&&t.init&&(n.filter(i=>i.name===l3).length||n.unshift({name:l3,value:null,on:[{events:"timer{1}",update:`${l3} === null ? {} : ${l3}`}]})),n),marks:(e,t,n)=>{const r=t.name,{x:i,y:s}=t.project.hasChannel,o=i==null?void 0:i.signals.visual,a=s==null?void 0:s.signals.visual,u=`data(${Jt(t.name+gw)})`;if(i1.defined(t)||!i&&!s)return n;const l={x:i!==void 0?{signal:`${o}[0]`}:{value:0},y:s!==void 0?{signal:`${a}[0]`}:{value:0},x2:i!==void 0?{signal:`${o}[1]`}:{field:{group:"width"}},y2:s!==void 0?{signal:`${a}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const g of $t(l))l[g]=[{test:`${u}.length && ${u}[0].unit === ${U_(e)}`,...l[g]},{value:0}];const{fill:c,fillOpacity:f,cursor:d,...h}=t.mark,p=$t(h).reduce((g,b)=>(g[b]=[{test:[i!==void 0&&`${o}[0] !== ${o}[1]`,s!==void 0&&`${a}[0] !== ${a}[1]`].filter(y=>y).join(" && "),value:h[b]},{value:null}],g),{}),m=d??(t.translate?"move":null);return[{name:`${r+eS}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:c},fillOpacity:{value:f}},update:l}},...n,{name:r+eS,type:"rect",clip:!0,encode:{enter:{...m?{cursor:{value:m}}:{},fill:{value:"transparent"}},update:{...l,...p}}}]}};function m9t(e,t,n,r){const i=!e.hasProjection,s=n.channel,o=n.signals.visual,a=Jt(i?e.scaleName(s):e.projectionName()),u=d=>`scale(${a}, ${d})`,l=e.getSizeSignalRef(s===ho?"width":"height").signal,c=`${s}(unit)`,f=t.events.reduce((d,h)=>[...d,{events:h.between[0],update:`[${c}, ${c}]`},{events:h,update:`[${o}[0], clamp(${c}, 0, ${l})]`}],[]);if(i){const d=n.signals.data,h=i1.defined(t),p=e.getScaleComponent(s),m=p?p.get("type"):void 0,g=r?{init:mw(r,!0,u)}:{value:[]};return f.push({events:{signal:t.name+IIe},update:I0(m)?`[${u(`${d}[0]`)}, ${u(`${d}[1]`)}]`:"[0, 0]"}),h?[{name:d,on:[]}]:[{name:o,...g,on:f},{name:d,...r?{init:mw(r)}:{},on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${a}, ${o})`}]}]}else{const d=s===ho?0:1,h=t.name+PIe,p=r?{init:`[${h}[0][${d}], ${h}[1][${d}]]`}:{value:[]};return[{name:o,...p,on:f}]}}function lC({model:e,channelDef:t,vgChannel:n,invalidValueRef:r,mainRefFn:i}){const s=xI(t)&&t.condition;let o=[];s&&(o=ln(s).map(l=>{const c=i(l);if(nDt(l)){const{param:f,empty:d}=l;return{test:KIe(e,{param:f,empty:d}),...c}}else return{test:hO(e,l.test),...c}})),r!==void 0&&o.push(r);const a=i(t);return a!==void 0&&o.push(a),o.length>1||o.length===1&&o[0].test?{[n]:o}:o.length===1?{[n]:o[0]}:{}}function ree(e,t="text"){const n=e.encoding[t];return lC({model:e,channelDef:n,vgChannel:t,mainRefFn:r=>GL(r,e.config),invalidValueRef:void 0})}function GL(e,t,n="datum"){if(e){if(P0(e))return Qs(e.value);if(gr(e)){const{format:r,formatType:i}=aO(e);return FZ({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function NIe(e,t={}){const{encoding:n,markDef:r,config:i,stack:s}=e,o=n.tooltip;if(xt(o))return{tooltip:Jde({tooltip:o},s,i,t)};{const a=t.reactiveGeom?"datum.datum":"datum";return lC({model:e,channelDef:o,vgChannel:"tooltip",mainRefFn:l=>{const c=GL(l,i,a);if(c)return c;if(l===null)return;let f=ps("tooltip",r,i);if(f===!0&&(f={content:"encoding"}),cn(f))return{value:f};if(un(f))return In(f)?f:f.content==="encoding"?Jde(n,s,i,t):{signal:a}},invalidValueRef:void 0})}}function DIe(e,t,n,{reactiveGeom:r}={}){const i={...n,...n.tooltipFormat},s=new Set,o=r?"datum.datum":"datum",a=[];function u(c,f){const d=Zw(f),h=uf(c)?c:{...c,type:e[d].type},p=h.title||UZ(h,i),m=ln(p).join(", ").replaceAll(/"/g,'\\"');let g;if(xa(f)){const b=f==="x"?"x2":"y2",y=N0(e[b]);if(dl(h.bin)&&y){const x=tn(h,{expr:o}),w=tn(y,{expr:o}),{format:T,formatType:A}=aO(h);g=vI(x,w,T,A,i),s.add(b)}}if((xa(f)||f===pp||f===V0)&&t&&t.fieldChannel===f&&t.offset==="normalize"){const{format:b,formatType:y}=aO(h);g=FZ({fieldOrDatumDef:h,format:b,formatType:y,expr:o,config:i,normalizeStack:!0}).signal}g??(g=GL(h,i,o).signal),a.push({channel:f,key:m,value:g})}VZ(e,(c,f)=>{Kt(c)?u(c,f):FL(c)&&u(c.condition,f)});const l={};for(const{channel:c,key:f,value:d}of a)!s.has(c)&&!l[f]&&(l[f]=d);return l}function Jde(e,t,n,{reactiveGeom:r}={}){const i=DIe(e,t,n,{reactiveGeom:r}),s=Ab(i).map(([o,a])=>`"${o}": ${a}`);return s.length>0?{signal:`{${s.join(", ")}}`}:void 0}function g9t(e){const{markDef:t,config:n}=e,r=ps("aria",t,n);return r===!1?{}:{...r?{aria:r}:{},...y9t(e),...v9t(e)}}function y9t(e){const{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};const i=ps("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:gn(BPt,t)?{}:{ariaRoleDescription:{value:t}}}function v9t(e){const{encoding:t,markDef:n,config:r,stack:i}=e,s=t.description;if(s)return lC({model:e,channelDef:s,vgChannel:"description",mainRefFn:u=>GL(u,e.config),invalidValueRef:void 0});const o=ps("description",n,r);if(o!=null)return{description:Qs(o)};if(r.aria===!1)return{};const a=DIe(t,i,r);if(!ms(a))return{description:{signal:Ab(a).map(([u,l],c)=>`"${c>0?"; ":""}${u}: " + (${l})`).join(" + ")}}}function yl(e,t,n={}){const{markDef:r,encoding:i,config:s}=t,{vgChannel:o}=n;let{defaultRef:a,defaultValue:u}=n;const l=i[e];a===void 0&&(u??(u=ps(e,r,s,{vgChannel:o,ignoreVgConfig:!xI(l)})),u!==void 0&&(a=Qs(u)));const c={markDef:r,config:s,scaleName:t.scaleName(e),scale:t.getScaleComponent(e)},f=xRe({...c,scaleChannel:e,channelDef:l});return lC({model:t,channelDef:l,vgChannel:o??e,invalidValueRef:f,mainRefFn:h=>LZ({...c,channel:e,channelDef:h,stack:null,defaultRef:a})})}function OIe(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:s}=n,o=t.filled??ps("filled",n,i),a=Gr(["bar","point","circle","square","geoshape"],s)?"transparent":void 0,u=ps(o===!0?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[o===!0&&"color"]??a,l=ps(o===!1?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[o===!1&&"color"],c=o?"fill":"stroke",f={...u?{fill:Qs(u)}:{},...l?{stroke:Qs(l)}:{}};return n.color&&(o?n.fill:n.stroke)&&qt(q4e("property",{fill:"fill"in n,stroke:"stroke"in n})),{...f,...yl("color",e,{vgChannel:c,defaultValue:o?u:l}),...yl("fill",e,{defaultValue:r.fill?u:void 0}),...yl("stroke",e,{defaultValue:r.stroke?l:void 0})}}function b9t(e){const{encoding:t,mark:n}=e,r=t.order;return!fx(n)&&P0(r)?lC({model:e,channelDef:r,vgChannel:"zindex",mainRefFn:i=>Qs(i.value),invalidValueRef:void 0}):{}}function tT({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const s=`${e}Offset`,o=t[s],a=n[s];if((s==="xOffset"||s==="yOffset")&&a)return{offsetType:"encoding",offset:LZ({channel:s,channelDef:a,markDef:t,config:r==null?void 0:r.config,scaleName:r.scaleName(s),scale:r.getScaleComponent(s),stack:null,defaultRef:Qs(o),bandPosition:i})};const u=t[s];return u?{offsetType:"visual",offset:u}:{}}function tf(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:s,config:o,stack:a}=t,u=i[e],l=i[Og(e)],c=t.scaleName(e),f=t.getScaleComponent(e),{offset:d,offsetType:h}=tT({channel:e,markDef:s,encoding:i,model:t,bandPosition:.5}),p=iee({model:t,defaultPos:n,channel:e,scaleName:c,scale:f}),m=!u&&xa(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:x9t({channel:e,channelDef:u,channel2Def:l,markDef:s,config:o,scaleName:c,scale:f,stack:a,offset:d,defaultRef:p,bandPosition:h==="encoding"?0:void 0});return m?{[r||e]:m}:void 0}function x9t(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:s,markDef:o}=e;if(gr(n)&&i&&t===i.fieldChannel){if(Kt(n)){let a=n.bandPosition;if(a===void 0&&o.type==="text"&&(t==="radius"||t==="theta")&&(a=.5),a!==void 0)return iO({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:a,offset:s})}return B_(n,r,{suffix:"end"},{offset:s})}return MZ(e)}function iee({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:s,config:o}=e;return()=>{const a=Zw(n),u=kb(n),l=ps(n,s,o,{vgChannel:u});if(l!==void 0)return Lk(n,l);switch(t){case"zeroOrMin":return Zde({scaleName:r,scale:i,mode:"zeroOrMin",mainChannel:a,config:o});case"zeroOrMax":return Zde({scaleName:r,scale:i,mode:{zeroOrMax:{widthSignal:e.width.signal,heightSignal:e.height.signal}},mainChannel:a,config:o});case"mid":return{...e[ud(n)],mult:.5}}}}function Zde({mainChannel:e,config:t,...n}){const r=bRe(n),{mode:i}=n;if(r)return r;switch(e){case"radius":{if(i==="zeroOrMin")return{value:0};const{widthSignal:s,heightSignal:o}=i.zeroOrMax;return{signal:`min(${s},${o})/2`}}case"theta":return i==="zeroOrMin"?{value:0}:{signal:"2*PI"};case"x":return i==="zeroOrMin"?{value:0}:{field:{group:"width"}};case"y":return i==="zeroOrMin"?{field:{group:"height"}}:{value:0}}}const _9t={left:"x",center:"xc",right:"x2"},w9t={top:"y",middle:"yc",bottom:"y2"};function MIe(e,t,n,r="middle"){if(e==="radius"||e==="theta")return kb(e);const i=e==="x"?"align":"baseline",s=ps(i,t,n);let o;return In(s)?(qt(x8t(i)),o=void 0):o=s,e==="x"?_9t[o||(r==="top"?"left":"center")]:w9t[o||r]}function fO(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?LIe(e,t,{defaultPos:n,defaultPos2:r}):tf(e,t,{defaultPos:n})}function LIe(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:s}=t,o=Og(e),a=ud(e),u=E9t(t,r,o),l=u[a]?MIe(e,i,s):kb(e);return{...tf(e,t,{defaultPos:n,vgChannel:l}),...u}}function E9t(e,t,n){const{encoding:r,mark:i,markDef:s,stack:o,config:a}=e,u=Zw(n),l=ud(n),c=kb(n),f=r[u],d=e.scaleName(u),h=e.getScaleComponent(u),{offset:p}=n in r||n in s?tT({channel:n,markDef:s,encoding:r,model:e}):tT({channel:u,markDef:s,encoding:r,model:e});if(!f&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){const g=ud(n),b=e.markDef[g];return b!=null?{[g]:{value:b}}:{[c]:{field:e.getName(n)}}}const m=S9t({channel:n,channelDef:f,channel2Def:r[n],markDef:s,config:a,scaleName:d,scale:h,stack:o,offset:p,defaultRef:void 0});return m!==void 0?{[c]:m}:p5(n,s)||p5(n,{[n]:lH(n,s,a.style),[l]:lH(l,s,a.style)})||p5(n,a[i])||p5(n,a.mark)||{[c]:iee({model:e,defaultPos:t,channel:n,scaleName:d,scale:h})()}}function S9t({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l}){return gr(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?B_(t,s,{suffix:"start"},{offset:u}):MZ({channel:e,channelDef:n,scaleName:s,scale:o,stack:a,markDef:r,config:i,offset:u,defaultRef:l})}function p5(e,t){const n=ud(e),r=kb(e);if(t[r]!==void 0)return{[r]:Lk(e,t[r])};if(t[e]!==void 0)return{[r]:Lk(e,t[e])};if(t[n]){const i=t[n];if(hw(i))qt(p8t(n));else return{[n]:Lk(e,i)}}}function E1(e,t){const{config:n,encoding:r,markDef:i}=e,s=i.type,o=Og(t),a=ud(t),u=r[t],l=r[o],c=e.getScaleComponent(t),f=c?c.get("type"):void 0,d=i.orient,h=r[a]??r.size??ps("size",i,n,{vgChannel:a}),p=R4e(t),m=s==="bar"&&(t==="x"?d==="vertical":d==="horizontal")||s==="tick"&&(t==="y"?d==="vertical":d==="horizontal");return Kt(u)&&(Bs(u.bin)||dl(u.bin)||u.timeUnit&&!l)&&!(h&&!hw(h))&&!r[p]&&!Uu(f)?A9t({fieldDef:u,fieldDef2:l,channel:t,model:e}):(gr(u)&&Uu(f)||m)&&!l?C9t(u,t,e):LIe(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function T9t(e,t,n,r,i,s,o){if(hw(i))if(n){const u=n.get("type");if(u==="band"){let l=`bandwidth('${t}')`;i.band!==1&&(l=`${i.band} * ${l}`);const c=pg("minBandSize",{type:o},r);return{signal:c?`max(${p0(c)}, ${l})`:l}}else i.band!==1&&(qt(S8t(u)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(In(i))return i;if(i)return{value:i}}if(n){const u=n.get("range");if(t2(u)&&Ri(u.step))return{value:u.step-2}}if(!s){const{bandPaddingInner:u,barBandPaddingInner:l,rectBandPaddingInner:c,tickBandPaddingInner:f}=r.scale,d=ba(u,o==="tick"?f:o==="bar"?l:c);if(In(d))return{signal:`(1 - (${d.signal})) * ${e}`};if(Ri(d))return{signal:`${1-d} * ${e}`}}return{value:gH(r.view,e)-2}}function C9t(e,t,n){var O,M;const{markDef:r,encoding:i,config:s,stack:o}=n,a=r.orient,u=n.scaleName(t),l=n.getScaleComponent(t),c=ud(t),f=Og(t),d=R4e(t),h=n.scaleName(d),p=n.getScaleComponent(uZ(t)),m=r.type==="tick"||a==="horizontal"&&t==="y"||a==="vertical"&&t==="x";let g;(i.size||r.size)&&(m?g=yl("size",n,{vgChannel:c,defaultRef:Qs(r.size)}):qt(k8t(r.type)));const b=!!g,y=ARe({channel:t,fieldDef:e,markDef:r,config:s,scaleType:(O=l||p)==null?void 0:O.get("type"),useVlSizeChannel:m});g=g||{[c]:T9t(c,h||u,p||l,s,y,!!e,r.type)};const x=((M=l||p)==null?void 0:M.get("type"))==="band"&&hw(y)&&!b?"top":"middle",w=MIe(t,r,s,x),T=w==="xc"||w==="yc",{offset:A,offsetType:k}=tT({channel:t,markDef:r,encoding:i,model:n,bandPosition:T?.5:0}),I=MZ({channel:t,channelDef:e,markDef:r,config:s,scaleName:u,scale:l,stack:o,offset:A,defaultRef:iee({model:n,defaultPos:"mid",channel:t,scaleName:u,scale:l}),bandPosition:T?k==="encoding"?0:.5:In(y)?{signal:`(1-${y})/2`}:hw(y)?(1-y.band)/2:0});if(c)return{[w]:I,...g};{const L=kb(f),H=g[c],D=A?{...H,offset:A}:H;return{[w]:I,[L]:xt(I)?[I[0],{...I[1],offset:D}]:{...I,offset:D}}}}function ehe(e,t,n,r,i,s,o){if(E4e(e))return 0;const a=e==="x"||e==="y2",u=a?-t/2:t/2;if(In(n)||In(i)||In(r)||s){const l=p0(n),c=p0(i),f=p0(r),d=p0(s),p=s?`(${o} < ${d} ? ${a?"":"-"}0.5 * (${d} - (${o})) : ${u})`:u,m=f?`${f} + `:"",g=l?`(${l} ? -1 : 1) * `:"",b=c?`(${c} + ${p})`:p;return{signal:m+g+b}}else return i=i||0,r+(n?-i-u:+i+u)}function A9t({fieldDef:e,fieldDef2:t,channel:n,model:r}){var M;const{config:i,markDef:s,encoding:o}=r,a=r.getScaleComponent(n),u=r.scaleName(n),l=a?a.get("type"):void 0,c=a.get("reverse"),f=ARe({channel:n,fieldDef:e,markDef:s,config:i,scaleType:l}),d=(M=r.component.axes[n])==null?void 0:M[0],h=(d==null?void 0:d.get("translate"))??.5,p=xa(n)?ps("binSpacing",s,i)??0:0,m=Og(n),g=kb(n),b=kb(m),y=pg("minBandSize",s,i),{offset:x}=tT({channel:n,markDef:s,encoding:o,model:r,bandPosition:0}),{offset:w}=tT({channel:m,markDef:s,encoding:o,model:r,bandPosition:0}),T=XNt({fieldDef:e,scaleName:u}),A=ehe(n,p,c,h,x,y,T),k=ehe(m,p,c,h,w??x,y,T),I=In(f)?{signal:`(1-${f.signal})/2`}:hw(f)?(1-f.band)/2:.5,O=Rb({fieldDef:e,fieldDef2:t,markDef:s,config:i});if(Bs(e.bin)||e.timeUnit){const L=e.timeUnit&&O!==.5;return{[b]:the({fieldDef:e,scaleName:u,bandPosition:I,offset:k,useRectOffsetField:L}),[g]:the({fieldDef:e,scaleName:u,bandPosition:In(I)?{signal:`1-${I.signal}`}:1-I,offset:A,useRectOffsetField:L})}}else if(dl(e.bin)){const L=B_(e,u,{},{offset:k});if(Kt(t))return{[b]:L,[g]:B_(t,u,{},{offset:A})};if(e2(e.bin)&&e.bin.step)return{[b]:L,[g]:{signal:`scale("${u}", ${tn(e,{expr:"datum"})} + ${e.bin.step})`,offset:A}}}qt(Y4e(m))}function the({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return iO({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r,...i?{startSuffix:qL,endSuffix:WL}:{}})}const k9t=new Set(["aria","width","height"]);function mp(e,t){const{fill:n=void 0,stroke:r=void 0}=t.color==="include"?OIe(e):{};return{...R9t(e.markDef,t),...nhe("fill",n),...nhe("stroke",r),...yl("opacity",e),...yl("fillOpacity",e),...yl("strokeOpacity",e),...yl("strokeWidth",e),...yl("strokeDash",e),...b9t(e),...NIe(e),...ree(e,"href"),...g9t(e)}}function nhe(e,t){return t?{[e]:t}:{}}function R9t(e,t){return $Pt.reduce((n,r)=>(!k9t.has(r)&&zt(e,r)&&t[r]!=="ignore"&&(n[r]=Qs(e[r])),n),{})}function see(e){const{config:t,markDef:n}=e,r=new Set;if(e.forEachFieldDef((i,s)=>{var l;let o;if(!Mg(s)||!(o=e.getScaleType(s)))return;const a=CL(i.aggregate),u=OZ({scaleChannel:s,markDef:n,config:t,scaleType:o,isCountAggregate:a});if(GNt(u)){const c=e.vgField(s,{expr:"datum",binSuffix:(l=e.stack)!=null&&l.impute?"mid":void 0});c&&r.add(c)}}),r.size>0)return{defined:{signal:[...r].map(s=>IL(s,!0)).join(" && ")}}}function rhe(e,t){if(t!==void 0)return{[e]:Qs(t)}}const nj="voronoi",FIe={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(nj)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,s=e.mark;if(fx(s))return qt(HPt(s)),n;const o={name:e.getName(nj),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...NIe(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let a=0,u=!1;return n.forEach((l,c)=>{const f=l.name??"";f===e.component.mark[0].name?a=c:f.includes(nj)&&(u=!0)}),u||n.splice(a+1,0,o),n}},$Ie={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!KZ(e.bind),parse:(e,t,n)=>WIe(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,s=t.bind,o=t.init&&t.init[0],a=FIe.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((u,l)=>{const c=lo(`${r}_${u.field}`);n.filter(d=>d.name===c).length||n.unshift({name:c,...o?{init:mw(o[l])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${Jt(u.field)}] : null`}]:[],bind:s[u.field]??s[u.channel]??s})}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.find(l=>l.name===r+S1),o=r+SI,a=i.items.map(l=>lo(`${r}_${l.field}`)),u=a.map(l=>`${l} !== null`).join(" && ");return a.length&&(s.update=`${u} ? {fields: ${o}, values: [${a.join(", ")}]} : null`),delete s.value,delete s.on,n}},dO="_toggle",BIe={defined:e=>e.type==="point"&&!Ym(e)&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+dO,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+S1,r=t.name+dO;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${U_(e)}}, `)+`${r} ? ${n} : null`}},I9t={defined:e=>e.clear!==void 0&&e.clear!==!1&&!Ym(e),parse:(e,t)=>{t.clear&&(t.clear=cn(t.clear)?rx(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if($Ie.defined(t))for(const r of t.project.items){const i=n.findIndex(s=>s.name===lo(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,s){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:s})}if(t.type==="interval")for(const i of t.project.items){const s=n.findIndex(o=>o.name===i.signals.visual);if(r(s,"[0, 0]"),s===-1){const o=n.findIndex(a=>a.name===i.signals.data);r(o,"null")}}else{let i=n.findIndex(s=>s.name===t.name+S1);r(i,"null"),BIe.defined(t)&&(i=n.findIndex(s=>s.name===t.name+dO),r(i,"false"))}return n}},jIe={defined:e=>{const t=e.resolve==="global"&&e.bind&&KZ(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==D0;return t&&!n&&qt(YPt),t&&n},parse:(e,t,n)=>{const r=ur(n);if(r.select=cn(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},WIe(t,r),un(n.select)&&(n.select.on||n.select.clear)){const o='event.item && indexof(event.item.mark.role, "legend") < 0';for(const a of t.events)a.filter=ln(a.filter??[]),a.filter.includes(o)||a.filter.push(o)}const i=XB(t.bind)?t.bind.legend:"click",s=cn(i)?rx(i,"view"):ln(i);t.bind={legend:{merge:s}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=XB(t.bind)&&t.bind.legend,s=o=>a=>{const u=ur(a);return u.markname=o,u};for(const o of t.project.items){if(!o.hasLegend)continue;const a=`${lo(o.field)}_legend`,u=`${r}_${a}`;if(n.filter(c=>c.name===u).length===0){const c=i.merge.map(s(`${a}_symbols`)).concat(i.merge.map(s(`${a}_labels`))).concat(i.merge.map(s(`${a}_entries`)));n.unshift({name:u,...t.init?{}:{value:null},on:[{events:c,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${u}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.find(d=>d.name===r+S1),o=r+SI,a=i.items.filter(d=>d.hasLegend).map(d=>lo(`${r}_${lo(d.field)}_legend`)),l=`${a.map(d=>`${d} !== null`).join(" && ")} ? {fields: ${o}, values: [${a.join(", ")}]} : null`;t.events&&a.length>0?s.on.push({events:a.map(d=>({signal:d})),update:l}):a.length>0&&(s.update=l,delete s.value,delete s.on);const c=n.find(d=>d.name===r+dO),f=XB(t.bind)&&t.bind.legend;return c&&(t.events?c.on.push({...c.on[0],events:f}):c.on[0].events=f),n}};function P9t(e,t,n){var i;const r=(i=e.fieldDef(t))==null?void 0:i.field;for(const s of El(e.component.selection??{})){const o=s.project.hasField[r]??s.project.hasChannel[t];if(o&&jIe.defined(s)){const a=n.get("selections")??[];a.push(s.name),n.set("selections",a,!1),o.hasLegend=!0}}}const UIe="_translate_anchor",zIe="_translate_delta",N9t={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const r=t.name,i=i1.defined(t),s=r+UIe,{x:o,y:a}=t.project.hasChannel;let u=rx(t.translate,"scope");return i||(u=u.map(l=>(l.between[0].markname=r+eS,l))),n.push({name:s,value:{},on:[{events:u.map(l=>l.between[0]),update:"{x: x(unit), y: y(unit)"+(o!==void 0?`, extent_x: ${i?_H(e,ho):`slice(${o.signals.visual})`}`:"")+(a!==void 0?`, extent_y: ${i?_H(e,qu):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:r+zIe,value:{},on:[{events:u,update:`{x: ${s}.x - x(unit), y: ${s}.y - y(unit)}`}]}),o!==void 0&&ihe(e,t,o,"width",n),a!==void 0&&ihe(e,t,a,"height",n),n}};function ihe(e,t,n,r,i){const s=t.name,o=s+UIe,a=s+zIe,u=n.channel,l=i1.defined(t),c=i.find(T=>T.name===n.signals[l?"data":"visual"]),f=e.getSizeSignalRef(r).signal,d=e.getScaleComponent(u),h=d&&d.get("type"),p=d&&d.get("reverse"),m=l?u===ho?p?"":"-":p?"-":"":"",g=`${o}.extent_${u}`,b=`${m}${a}.${u} / ${l?`${f}`:`span(${g})`}`,y=!l||!d?"panLinear":h==="log"?"panLog":h==="symlog"?"panSymlog":h==="pow"?"panPow":"panLinear",x=l?h==="pow"?`, ${d.get("exponent")??1}`:h==="symlog"?`, ${d.get("constant")??1}`:"":"",w=`${y}(${g}, ${b}${x})`;c.on.push({events:{signal:a},update:l?w:`clampRange(${w}, 0, ${f})`})}const VIe="_zoom_anchor",HIe="_zoom_delta",D9t={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=i1.defined(t),s=r+HIe,{x:o,y:a}=t.project.hasChannel,u=Jt(e.scaleName(ho)),l=Jt(e.scaleName(qu));let c=rx(t.zoom,"scope");return i||(c=c.map(f=>(f.markname=r+eS,f))),n.push({name:r+VIe,on:[{events:c,update:i?"{"+[u?`x: invert(${u}, x(unit))`:"",l?`y: invert(${l}, y(unit))`:""].filter(f=>f).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:s,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),o!==void 0&&she(e,t,o,"width",n),a!==void 0&&she(e,t,a,"height",n),n}};function she(e,t,n,r,i){const s=t.name,o=n.channel,a=i1.defined(t),u=i.find(y=>y.name===n.signals[a?"data":"visual"]),l=e.getSizeSignalRef(r).signal,c=e.getScaleComponent(o),f=c&&c.get("type"),d=a?_H(e,o):u.name,h=s+HIe,p=`${s}${VIe}.${o}`,m=!a||!c?"zoomLinear":f==="log"?"zoomLog":f==="symlog"?"zoomSymlog":f==="pow"?"zoomPow":"zoomLinear",g=a?f==="pow"?`, ${c.get("exponent")??1}`:f==="symlog"?`, ${c.get("constant")??1}`:"":"",b=`${m}(${d}, ${p}, ${h}${g})`;u.on.push({events:{signal:h},update:a?b:`clampRange(${b}, 0, ${l})`})}const gw="_store",S1="_tuple",O9t="_modify",qIe="vlSelectionResolve",YL=[o9t,p9t,r9t,BIe,$Ie,i1,jIe,I9t,N9t,D9t,FIe];function M9t(e){let t=e.parent;for(;t&&!nh(t);)t=t.parent;return t}function U_(e,{escape:t}={escape:!0}){let n=t?Jt(e.name):e.name;const r=M9t(e);if(r){const{facet:i}=r;for(const s of Yh)i[s]&&(n+=` + '__facet_${s}_' + (facet[${Jt(r.vgField(s))}])`)}return n}function oee(e){return El(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function WIe(e,t){(cn(t.select)||!t.select.on)&&delete e.events,(cn(t.select)||!t.select.clear)&&delete e.clear,(cn(t.select)||!t.select.toggle)&&delete e.toggle}function Ym(e){var t;return(t=e.events)==null?void 0:t.find(n=>"type"in n&&n.type==="timer")}function EH(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...EH(e.object)),t.push(...EH(e.property))),t)}function GIe(e){return e.object.type==="MemberExpression"?GIe(e.object):e.object.name==="datum"}function YIe(e){const t=SJ(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&GIe(r)&&n.add(EH(r).slice(1).join("."))}),n}class cC extends us{clone(){return new cC(null,this.model,ur(this.filter))}constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=hO(this.model,this.filter,this),this._dependentFields=YIe(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function L9t(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;let i=0;for(const s of t){const o=lo(s.name),a=s.select,u=cn(a)?a:a.type,l=un(a)?ur(a):{type:u},c=r[u];for(const h in c)h==="fields"||h==="encodings"||(h==="mark"&&(l.mark={...c.mark,...l.mark}),(l[h]===void 0||l[h]===!0)&&(l[h]=ur(c[h]??l[h])));const f=n[o]={...l,name:o,type:u,init:s.value,bind:s.bind,events:cn(l.on)?rx(l.on,"scope"):ln(ur(l.on))};if(Ym(f)&&(i++,i>1)){delete n[o];continue}const d=ur(s);for(const h of YL)h.defined(f)&&h.parse&&h.parse(e,f,d)}return i>1&&qt(e8t),n}function KIe(e,t,n,r="datum"){const i=cn(t)?t:t.param,s=lo(i),o=Jt(s+gw);let a;try{a=e.getSelectionComponent(s,i)}catch{return`!!${s}`}if(a.project.timeUnit){const d=n??e.component.data.raw,h=a.project.timeUnit.clone();d.parent?h.insertAsParentOf(d):d.parent=h}const u=a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",l=a.resolve==="global"?")":`, ${Jt(a.resolve)})`,c=`${u}${o}, ${r}${l}`,f=`length(data(${o}))`;return t.empty===!1?`${f} && ${c}`:`!${f} || ${c}`}function XIe(e,t,n){const r=lo(t),i=n.encoding;let s=n.field,o;try{o=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!s)s=o.project.items[0].field,o.project.items.length>1&&qt(t8t(s));else if(i&&!s){const a=o.project.items.filter(u=>u.channel===i);!a.length||a.length>1?(s=o.project.items[0].field,qt(n8t(a,i,n,s))):s=a[0].field}return`${o.name}[${Jt(rp(s))}]`}function F9t(e,t){for(const[n,r]of Ab(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new td(new cC(t,e,{param:n}),i,So.Lookup,e.component.data.outputNodeRefCounts)}}function hO(e,t,n){return Mk(t,r=>cn(r)?r:fNt(r)?KIe(e,r,n):oRe(r))}function $9t(e,t){if(e)return xt(e)&&!kv(e)?e.map(n=>UZ(n,t)).join(", "):e}function rj(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function Z3(e,t,n,r={header:!1}){var f,d;const{disable:i,orient:s,scale:o,labelExpr:a,title:u,zindex:l,...c}=e.combine();if(!i){for(const h in c){const p=h,m=gDt[p],g=c[p];if(m&&m!==t&&m!=="both")delete c[p];else if(EI(g)){const{condition:b,...y}=g,x=ln(b),w=Dde[p];if(w){const{vgProp:T,part:A}=w,k=[...x.map(I=>{const{test:O,...M}=I;return{test:hO(null,O),...M}}),y];rj(c,A,T,k),delete c[p]}else if(w===null){const T={signal:x.map(A=>{const{test:k,...I}=A;return`${hO(null,k)} ? ${yde(I)} : `}).join("")+yde(y)};c[p]=T}}else if(In(g)){const b=Dde[p];if(b){const{vgProp:y,part:x}=b;rj(c,x,y,g),delete c[p]}}Gr(["labelAlign","labelBaseline"],p)&&c[p]===null&&delete c[p]}if(t==="grid"){if(!c.grid)return;if(c.encode){const{grid:h}=c.encode;c.encode={...h?{grid:h}:{}},ms(c.encode)&&delete c.encode}return{scale:o,orient:s,...c,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:ba(l,0)}}else{if(!r.header&&e.mainExtracted)return;if(a!==void 0){let p=a;(d=(f=c.encode)==null?void 0:f.labels)!=null&&d.update&&In(c.encode.labels.update.text)&&(p=uw(a,"datum.label",c.encode.labels.update.text.signal)),rj(c,"labels","text",{signal:p})}if(c.labelAlign===null&&delete c.labelAlign,c.encode){for(const p of FRe)e.hasAxisPart(p)||delete c.encode[p];ms(c.encode)&&delete c.encode}const h=$9t(u,n);return{scale:o,orient:s,grid:!1,...h?{title:h}:{},...c,...n.aria===!1?{aria:!1}:{},zindex:ba(l,0)}}}}function QIe(e){const{axes:t}=e.component,n=[];for(const r of B1)if(t[r]){for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const s=r==="x"?"height":"width",o=e.getSizeSignalRef(s).signal;s!==o&&n.push({name:s,update:o})}}return n}function B9t(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>Z3(i,"grid",t)),...r.map(i=>Z3(i,"grid",t)),...n.map(i=>Z3(i,"main",t)),...r.map(i=>Z3(i,"main",t))].filter(i=>i)}function ohe(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){const s=n==="x"?"bottom":"left",o=t[n==="x"?"axisBottom":"axisLeft"]||{},a=t[n==="x"?"axisTop":"axisRight"]||{},u=new Set([...$t(o),...$t(a)]),l={};for(const c of u.values())l[c]={signal:`${r.signal} === "${s}" ? ${p0(o[c])} : ${p0(a[c])}`};return l}return t[i]})])}function j9t(e,t,n,r){const i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:cRe(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],s=e==="x"?"axisX":"axisY",o=In(n)?"axisOrient":`axis${dI(n)}`,a=[...i,...i.map(l=>s+l.substr(4))],u=["axis",o,s];return{vlOnlyAxisConfig:ohe(a,r,e,n),vgAxisConfig:ohe(u,r,e,n),axisConfigStyle:U9t([...u,...a],r)}}function U9t(e,t){var r;const n=[{}];for(const i of e){let s=(r=t[i])==null?void 0:r.style;if(s){s=ln(s);for(const o of s)n.push(t.style[o])}}return Object.assign.apply(null,n)}function SH(e,t,n,r={}){var s;const i=$4e(e,n,t);if(i!==void 0)return{configFrom:"style",configValue:i};for(const o of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((s=r[o])==null?void 0:s[e])!==void 0)return{configFrom:o,configValue:r[o][e]};return{}}const ahe={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??z9t(n,e),gridScale:({model:e,channel:t})=>V9t(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||ZIe(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||JIe(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??q9t(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??W9t(t.type,n,Kt(t)&&!!t.timeUnit,Kt(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const s=e==="x"?"width":e==="y"?"height":void 0,o=s?t.getSizeSignalRef(s):void 0;return n.tickCount??Y9t({fieldOrDatumDef:r,scaleType:i,size:o,values:n.values})},tickMinStep:K9t,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const r=e6e(t,n);if(r!==void 0)return r;const i=t.typedFieldDef(n),s=n==="x"?"x2":"y2",o=t.fieldDef(s);return j4e(i?[Pde(i)]:[],Kt(o)?[Pde(o)]:[])},values:({axis:e,fieldOrDatumDef:t})=>X9t(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??Q9t(n,t)};function z9t(e,t){return!Uu(e)&&Kt(t)&&!Bs(t==null?void 0:t.bin)&&!dl(t==null?void 0:t.bin)}function V9t(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function H9t(e,t,n,r,i){const s=t==null?void 0:t.labelAngle;if(s!==void 0)return In(s)?s:U4(s);{const{configValue:o}=SH("labelAngle",r,t==null?void 0:t.style,i);return o!==void 0?U4(o):n===ho&&Gr([RZ,kZ],e.type)&&!(Kt(e)&&e.timeUnit)?270:void 0}}function TH(e){return`(((${e.signal} % 360) + 360) % 360)`}function JIe(e,t,n,r){if(e!==void 0)if(n==="x"){if(In(e)){const i=TH(e),s=In(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${s} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(In(t)){const i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(In(e)){const i=TH(e),s=In(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${s} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(In(t)){const i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function ZIe(e,t,n){if(e===void 0)return;const r=n==="x",i=r?0:90,s=r?"bottom":"left";if(In(e)){const o=TH(e),a=In(t)?`(${t.signal} === "${s}")`:t===s;return{signal:`(${i?`(${o} + 90)`:o} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${o} && ${o} < ${180+i}) === ${a} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(In(t)){const o=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${o} "${s}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===s)?"left":"right"}function q9t(e,t){if(t==="x"&&Gr(["quantitative","temporal"],e))return!0}function W9t(e,t,n,r){if(n&&!un(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function G9t(e){return e==="x"?"bottom":"left"}function Y9t({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){var i;if(!r&&!Uu(t)&&t!=="log"){if(Kt(e)){if(Bs(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&Gr(["month","hours","day","quarter"],(i=$u(e.timeUnit))==null?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function K9t({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(Kt(t)){const{timeUnit:n}=t;if(n){const r=rRe(n);if(r)return{signal:r}}}}function e6e(e,t){const n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),s=r?r.title:void 0,o=i?i.title:void 0;if(s&&o)return U4e(s,o);if(s)return s;if(o)return o;if(s!==void 0)return s;if(o!==void 0)return o}function X9t(e,t){const n=e.values;if(xt(n))return LRe(t,n);if(In(n))return n}function Q9t(e,t){return e==="rect"&&oO(t)?1:0}class nT extends us{clone(){return new nT(null,ur(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=YIe(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(i2(r)&&CRe(r.sort)){const{field:s,timeUnit:o}=r,a=r.sort,u=a.map((l,c)=>`${oRe({field:s,timeUnit:o,equal:l})} ? ${c} : `).join("")+a.length;t=new nT(t,{calculate:u,as:rT(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${ii(this.transform)}`}}function rT(e,t,n){return tn(e,{prefix:t,suffix:"sort_index",...n})}function KL(e,t){return Gr(["top","bottom"],t)?"column":Gr(["left","right"],t)||e==="row"?"row":"column"}function iT(e,t,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return ba((t||{})[e],i[e],n.header[e])}function XL(e,t,n,r){const i={};for(const s of e){const o=iT(s,t||{},n,r);o!==void 0&&(i[s]=o)}return i}const aee=["row","column"],uee=["header","footer"];function J9t(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:s,titleAngle:o,titleOrient:a}=XL(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),u=KL(t,a),l=U4(o);return{name:`${t}-title`,type:"group",role:`${u}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...n6e(l,u),...t6e(u,l,s),...r6e(r,i,t,$Dt,tIe)}}}function t6e(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=ZIe(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function n6e(e,t){const n=JIe(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function Z9t(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of uee)if(n[i])for(const s of n[i]){const o=tMt(e,t,i,n,s);o!=null&&r.push(o)}return r}function eMt(e,t){const{sort:n}=e;return r1(n)?{field:tn(n,{expr:"datum"}),order:n.order??"ascending"}:xt(n)?{field:rT(e,t,{expr:"datum"}),order:"ascending"}:{field:tn(e,{expr:"datum"}),order:n??"ascending"}}function CH(e,t,n){const{format:r,formatType:i,labelAngle:s,labelAnchor:o,labelOrient:a,labelExpr:u}=XL(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),l=FZ({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,c=KL(t,a);return{text:{signal:u?uw(uw(u,"datum.label",l),"datum.value",tn(e,{expr:"parent"})):l},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...n6e(s,c),...t6e(c,s,o),...r6e(n,e,t,BDt,nIe)}}function tMt(e,t,n,r,i){if(i){let s=null;const{facetFieldDef:o}=r,a=e.config?e.config:void 0;if(o&&i.labels){const{labelOrient:f}=XL(["labelOrient"],o.header,a,t);(t==="row"&&!Gr(["top","bottom"],f)||t==="column"&&!Gr(["left","right"],f))&&(s=CH(o,t,a))}const u=nh(e)&&!bI(e.facet),l=i.axes,c=(l==null?void 0:l.length)>0;if(s||c){const f=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:eMt(o,t)}:{},...c&&u?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...s?{title:s}:{},...i.sizeSignal?{encode:{update:{[f]:i.sizeSignal}}}:{},...c?{axes:l}:{}}}}return null}const nMt={column:{start:0,end:1},row:{start:1,end:0}};function rMt(e,t){return nMt[t][e]}function iMt(e,t){const n={};for(const r of Yh){const i=e[r];if(i!=null&&i.facetFieldDef){const{titleAnchor:s,titleOrient:o}=XL(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),a=KL(r,o),u=rMt(s,a);u!==void 0&&(n[a]=u)}}return ms(n)?void 0:n}function r6e(e,t,n,r,i){const s={};for(const o of r){if(!i[o])continue;const a=iT(o,t==null?void 0:t.header,e,n);a!==void 0&&(s[i[o]]=a)}return s}function lee(e){return[...m5(e,"width"),...m5(e,"height"),...m5(e,"childWidth"),...m5(e,"childHeight")]}function m5(e,t){const n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];const i=e.getSizeSignalRef(t).signal;if(r==="step"){const s=e.getScaleComponent(n);if(s){const o=s.get("type"),a=s.get("range");if(Uu(o)&&t2(a)){const u=e.scaleName(n);return nh(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[uhe(u,a)]:[uhe(u,a),{name:i,update:i6e(u,s,`domain('${u}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const s=i.endsWith("width"),o=s?"containerSize()[0]":"containerSize()[1]",a=mH(e.config.view,s?"width":"height"),u=`isFinite(${o}) ? ${o} : ${a}`;return[{name:i,init:u,on:[{update:u,events:"window:resize"}]}]}else return[{name:i,value:r}]}function uhe(e,t){const n=`${e}_step`;return In(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function i6e(e,t,n){const r=t.get("type"),i=t.get("padding"),s=ba(t.get("paddingOuter"),i);let o=t.get("paddingInner");return o=r==="band"?o!==void 0?o:i:1,`bandspace(${n}, ${p0(o)}, ${p0(s)}) * ${e}_step`}function s6e(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function o6e(e,t){return $t(e).reduce((n,r)=>({...n,...lC({model:t,channelDef:e[r],vgChannel:r,mainRefFn:i=>Qs(i.value),invalidValueRef:void 0})}),{})}function a6e(e,t){if(nh(t))return e==="theta"?"independent":"shared";if(hC(t))return"shared";if(gee(t))return xa(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function cee(e,t){const n=e.scale[t],r=xa(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&qt(D8t(t)),"independent"):e[r][t]||"shared"}const sMt={...zDt,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},u6e=$t(sMt);class oMt extends U1{}const lhe={symbols:aMt,gradient:uMt,labels:lMt,entries:cMt};function aMt(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:s}){if(s!=="symbol")return;const{markDef:o,encoding:a,config:u,mark:l}=n,c=o.filled&&l!=="trail";let f={...UPt({},n,FNt),...OIe(n,{filled:c})};const d=i.get("symbolOpacity")??u.legend.symbolOpacity,h=i.get("symbolFillColor")??u.legend.symbolFillColor,p=i.get("symbolStrokeColor")??u.legend.symbolStrokeColor,m=d===void 0?l6e(a.opacity)??o.opacity:void 0;if(f.fill){if(r==="fill"||c&&r===od)delete f.fill;else if(zt(f.fill,"field"))h?delete f.fill:(f.fill=Qs(u.legend.symbolBaseFillColor??"black"),f.fillOpacity=Qs(m??1));else if(xt(f.fill)){const g=AH(a.fill??a.color)??o.fill??(c&&o.color);g&&(f.fill=Qs(g))}}if(f.stroke){if(r==="stroke"||!c&&r===od)delete f.stroke;else if(zt(f.stroke,"field")||p)delete f.stroke;else if(xt(f.stroke)){const g=ba(AH(a.stroke||a.color),o.stroke,c?o.color:void 0);g&&(f.stroke={value:g})}}if(r!==$1){const g=Kt(t)&&f6e(n,i,t);g?f.opacity=[{test:g,...Qs(m??1)},Qs(u.legend.unselectedOpacity)]:m&&(f.opacity=Qs(m))}return f={...f,...e},ms(f)?void 0:f}function uMt(e,{model:t,legendType:n,legendCmpt:r}){if(n!=="gradient")return;const{config:i,markDef:s,encoding:o}=t;let a={};const l=(r.get("gradientOpacity")??i.legend.gradientOpacity)===void 0?l6e(o.opacity)||s.opacity:void 0;return l&&(a.opacity=Qs(l)),a={...a,...e},ms(a)?void 0:a}function lMt(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const s=n.legend(r)||{},o=n.config,a=Kt(t)?f6e(n,i,t):void 0,u=a?[{test:a,value:1},{value:o.legend.unselectedOpacity}]:void 0,{format:l,formatType:c}=s;let f;pw(c)?f=m0({fieldOrDatumDef:t,field:"datum.value",format:l,formatType:c,config:o}):l===void 0&&c===void 0&&o.customFormatTypes&&(t.type==="quantitative"&&o.numberFormatType?f=m0({fieldOrDatumDef:t,field:"datum.value",format:o.numberFormat,formatType:o.numberFormatType,config:o}):t.type==="temporal"&&o.timeFormatType&&Kt(t)&&t.timeUnit===void 0&&(f=m0({fieldOrDatumDef:t,field:"datum.value",format:o.timeFormat,formatType:o.timeFormatType,config:o})));const d={...u?{opacity:u}:{},...f?{text:f}:{},...e};return ms(d)?void 0:d}function cMt(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function l6e(e){return c6e(e,(t,n)=>Math.max(t,n.value))}function AH(e){return c6e(e,(t,n)=>ba(t,n.value))}function c6e(e,t){if(iDt(e))return ln(e.condition).reduce(t,e.value);if(P0(e))return e.value}function f6e(e,t,n){const r=t.get("selections");if(!(r!=null&&r.length))return;const i=Jt(n.field);return r.map(s=>`(!length(data(${Jt(lo(s)+gw)})) || (${s}[${i}] && indexof(${s}[${i}], datum.value) >= 0))`).join(" || ")}const che={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return ERe(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return SRe(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??yMt(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??vMt(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??dMt(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>ZE(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(JE(n)&&$m(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>fMt(t,e)};function fMt(e,t){const n=e.values;if(xt(n))return LRe(t,n);if(In(n))return n}function dMt(e,t,n,r){if(t!=="shape"){const i=AH(n)??r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function hMt(e){const{legend:t}=e;return ba(t.type,pMt(e))}function pMt({channel:e,timeUnit:t,scaleType:n}){if(JE(e)){if(Gr(["quarter","month","day"],t))return"symbol";if($m(n))return"gradient"}return"symbol"}function mMt({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??gMt(n,t)}function gMt(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function yMt({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:s,gradientHorizontalMinLength:o,gradientVerticalMaxLength:a,gradientVerticalMinLength:u}=e;if($m(i))return n==="horizontal"?r==="top"||r==="bottom"?fhe(t,"width",o,s):o:fhe(t,"height",u,a)}function fhe(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function vMt(e){if(Gr(["quantile","threshold","log","symlog"],e))return"greedy"}function d6e(e){const t=_o(e)?bMt(e):EMt(e);return e.component.legends=t,t}function bMt(e){const{encoding:t}=e,n={};for(const r of[od,...iIe]){const i=du(t[r]);!i||!e.getScaleComponent(r)||r===ad&&Kt(i)&&i.type===uC||(n[r]=wMt(e,r))}return n}function xMt(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function _Mt(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(r==null?void 0:r.title))return!0}return e===(n||{})[t]}function wMt(e,t){var w;let n=e.legend(t);const{markDef:r,encoding:i,config:s}=e,o=s.legend,a=new oMt({},xMt(e,t));P9t(e,t,a);const u=n!==void 0?!n:o.disable;if(a.set("disable",u,n!==void 0),u)return a;n=n||{};const l=e.getScaleComponent(t).get("type"),c=du(i[t]),f=Kt(c)?(w=$u(c.timeUnit))==null?void 0:w.unit:void 0,d=n.orient||s.legend.orient||"right",h=hMt({legend:n,channel:t,timeUnit:f,scaleType:l}),p=mMt({legend:n,legendType:h,orient:d,legendConfig:o}),m={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:c,legendConfig:o,config:s,scaleType:l,orient:d,legendType:h,direction:p};for(const T of u6e){if(h==="gradient"&&T.startsWith("symbol")||h==="symbol"&&T.startsWith("gradient"))continue;const A=T in che?che[T](m):n[T];if(A!==void 0){const k=_Mt(A,T,n,e.fieldDef(t));(k||s.legend[T]===void 0)&&a.set(T,A,k)}}const g=(n==null?void 0:n.encoding)??{},b=a.get("selections"),y={},x={fieldOrDatumDef:c,model:e,channel:t,legendCmpt:a,legendType:h};for(const T of["labels","legend","title","symbols","gradient","entries"]){const A=o6e(g[T]??{},e),k=T in lhe?lhe[T](A,x):A;k!==void 0&&!ms(k)&&(y[T]={...b!=null&&b.length&&Kt(c)?{name:`${lo(c.field)}_legend_${T}`}:{},...b!=null&&b.length?{interactive:!!b}:{},update:k})}return ms(y)||a.set("encode",y,!!(n!=null&&n.encoding)),a}function EMt(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){d6e(r);for(const i of $t(r.component.legends))n.legend[i]=cee(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=h6e(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of $t(t))for(const i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function h6e(e,t){var s,o,a,u;if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const l of u6e){const c=Ib(e.getWithExplicit(l),t.getWithExplicit(l),l,"legend",(f,d)=>{switch(l){case"symbolType":return SMt(f,d);case"title":return z4e(f,d);case"type":return i=!0,Bd("symbol")}return HL(f,d,l,"legend")});e.setWithExplicit(l,c)}return i&&((o=(s=e.implicit)==null?void 0:s.encode)!=null&&o.gradient&&tO(e.implicit,["encode","gradient"]),(u=(a=e.explicit)==null?void 0:a.encode)!=null&&u.gradient&&tO(e.explicit,["encode","gradient"])),e}function SMt(e,t){return t.value==="circle"?t:e}function TMt(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function p6e(e){const t=e.component.legends,n={};for(const i of $t(t)){const s=e.getScaleComponent(i),o=gs(s.get("domains"));if(n[o])for(const a of n[o])h6e(a,t[i])||n[o].push(t[i]);else n[o]=[t[i].clone()]}return El(n).flat().map(i=>CMt(i,e.config)).filter(i=>i!==void 0)}function CMt(e,t){var o,a,u;const{disable:n,labelExpr:r,selections:i,...s}=e.combine();if(!n){if(t.aria===!1&&s.aria==null&&(s.aria=!1),(o=s.encode)!=null&&o.symbols){const l=s.encode.symbols.update;l.fill&&l.fill.value!=="transparent"&&!l.stroke&&!s.stroke&&(l.stroke={value:"transparent"});for(const c of iIe)s[c]&&delete l[c]}if(s.title||delete s.title,r!==void 0){let l=r;(u=(a=s.encode)==null?void 0:a.labels)!=null&&u.update&&In(s.encode.labels.update.text)&&(l=uw(r,"datum.label",s.encode.labels.update.text.signal)),TMt(s,"labels","text",{signal:l})}return s}}function AMt(e){return hC(e)||gee(e)?kMt(e):m6e(e)}function kMt(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),m6e(e))}function m6e(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(o=>o.signal).join(", ")}]`},s=t.data.reduce((o,a)=>{const u=In(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return Gr(o,u)||o.push(u),o},[]);if(s.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:s.length>1?`[${s.join(", ")}]`:s[0]},...n}]}else return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const RMt=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class g6e extends U1{constructor(t,n,r,i){super({...n},{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}}function y6e(e){e.component.projection=_o(e)?IMt(e):DMt(e)}function IMt(e){if(e.hasProjection){const t=hl(e.specifiedProjection),n=!(t.scale!=null||t.translate!=null),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?PMt(e):void 0,s=new g6e(e.projectionName(!0),{...hl(e.config.projection),...t},r,i);return s.get("type")||s.set("type","equalEarth",!1),s}}function PMt(e){const t=[],{encoding:n}=e;for(const r of[[q0,H0],[ip,W0]])(du(n[r[0]])||du(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(ad)&&e.typedFieldDef(ad).type===uC&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(So.Main)),t}function NMt(e,t){const n=tZ(RMt,i=>!!(!gn(e.explicit,i)&&!gn(t.explicit,i)||gn(e.explicit,i)&&gn(t.explicit,i)&&Kd(e.get(i),t.get(i))));if(Kd(e.size,t.size)){if(n)return e;if(Kd(e.explicit,{}))return t;if(Kd(t.explicit,{}))return e}return null}function DMt(e){if(e.children.length===0)return;let t;for(const r of e.children)y6e(r);const n=tZ(e.children,r=>{const i=r.component.projection;if(i)if(t){const s=NMt(t,i);return s&&(t=s),!!s}else return t=i,!0;else return!0});if(t&&n){const r=e.projectionName(!0),i=new g6e(r,t.specifiedProjection,t.size,ur(t.data));for(const s of e.children){const o=s.component.projection;o&&(o.isFit&&i.data.push(...s.component.projection.data),s.renameProjection(o.get("name"),r),o.merged=!0)}return i}}function OMt(e,t,n,r){if(wI(t,n)){const i=_o(e)?e.axis(n)??e.legend(n)??{}:{},s=tn(t,{expr:"datum"}),o=tn(t,{expr:"datum",binSuffix:"end"});return{formulaAs:tn(t,{binSuffix:"range",forAs:!0}),formula:vI(s,o,i.format,i.formatType,r)}}return{}}function v6e(e,t){return`${O4e(e)}_${t}`}function MMt(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function fee(e,t,n){const r=$L(n,void 0)??{},i=v6e(r,t);return e.getName(`${i}_bins`)}function LMt(e){return"as"in e}function dhe(e,t,n){let r,i;LMt(e)?r=cn(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[tn(e,{forAs:!0}),tn(e,{binSuffix:"end",forAs:!0})];const s={...$L(t,void 0)},o=v6e(s,e.field),{signal:a,extentSignal:u}=MMt(n,o);if(AL(s.extent)){const c=s.extent;i=XIe(n,c.param,c),delete s.extent}const l={bin:s,field:e.field,as:[r],...a?{signal:a}:{},...u?{extentSignal:u}:{},...i?{span:i}:{}};return{key:o,binComponent:l}}class Km extends us{clone(){return new Km(null,ur(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{if(uf(s)&&Bs(s.bin)){const{key:a,binComponent:u}=dhe(s,s.bin,n);i[a]={...u,...i[a],...OMt(n,s,o,n.config)}}return i},{});return ms(r)?null:new Km(t,r)}static makeFromTransform(t,n,r){const{key:i,binComponent:s}=dhe(n,n.bin,r);return new Km(t,{[i]:s})}merge(t,n){for(const r of $t(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=Fm([...this.bins[r].as,...t.bins[r].as],ii)):this.bins[r]=t.bins[r];for(const r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(El(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(El(this.bins).map(t=>t.field))}hash(){return`Bin ${ii(this.bins)}`}assemble(){return El(this.bins).flatMap(t=>{const n=[],[r,...i]=t.as,{extent:s,...o}=t.bin,a={type:"bin",field:rp(t.field),as:r,signal:t.signal,...AL(s)?{extent:null}:{extent:s},...t.span?{span:{signal:`span(${t.span})`}}:{},...o};!s&&t.extentSignal&&(n.push({type:"extent",field:rp(t.field),signal:t.extentSignal}),a.extent={signal:t.extentSignal}),n.push(a);for(const u of i)for(let l=0;l<2;l++)n.push({type:"formula",expr:tn({field:r[l]},{expr:"datum"}),as:u[l]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function FMt(e,t,n,r){var s;const i=_o(r)?r.encoding[Og(t)]:void 0;if(uf(n)&&_o(r)&&kRe(n,i,r.markDef,r.config)){e.add(tn(n,{})),e.add(tn(n,{suffix:"end"}));const{mark:o,markDef:a,config:u}=r,l=Rb({fieldDef:n,markDef:a,config:u});z4(o)&&l!==.5&&xa(t)&&(e.add(tn(n,{suffix:qL})),e.add(tn(n,{suffix:WL}))),n.bin&&wI(n,t)&&e.add(tn(n,{binSuffix:"range"}))}else if(T4e(t)){const o=S4e(t);e.add(r.getName(o))}else e.add(tn(n));return i2(n)&&SNt((s=n.scale)==null?void 0:s.range)&&e.add(n.scale.range.field),e}function $Mt(e,t){for(const n of $t(t)){const r=t[n];for(const i of $t(r))n in e?e[n][i]=new Set([...e[n][i]??[],...r[i]]):e[n]={[i]:r[i]}}}class _0 extends us{clone(){return new _0(null,new Set(this.dimensions),ur(this.measures))}constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(o=>{o.aggregate&&(r=!0)});const i={},s=new Set;return!r||(n.forEachFieldDef((o,a)=>{const{aggregate:u,field:l}=o;if(u)if(u==="count")i["*"]??(i["*"]={}),i["*"].count=new Set([tn(o,{forAs:!0})]);else{if(w1(u)||cx(u)){const c=w1(u)?"argmin":"argmax",f=u[c];i[f]??(i[f]={}),i[f][c]=new Set([tn({op:c,field:f},{forAs:!0})])}else i[l]??(i[l]={}),i[l][u]=new Set([tn(o,{forAs:!0})]);Mg(a)&&n.scaleDomain(a)==="unaggregated"&&(i[l]??(i[l]={}),i[l].min=new Set([tn({field:l,aggregate:"min"},{forAs:!0})]),i[l].max=new Set([tn({field:l,aggregate:"max"},{forAs:!0})]))}else FMt(s,a,o,n)}),s.size+$t(i).length===0)?null:new _0(t,s,i)}static makeFromTransform(t,n){var r;const i=new Set,s={};for(const o of n.aggregate){const{op:a,field:u,as:l}=o;a&&(a==="count"?(s["*"]??(s["*"]={}),s["*"].count=new Set([l||tn(o,{forAs:!0})])):(s[u]??(s[u]={}),(r=s[u])[a]??(r[a]=new Set),s[u][a].add(l||tn(o,{forAs:!0}))))}for(const o of n.groupby??[])i.add(o);return i.size+$t(s).length===0?null:new _0(t,i,s)}merge(t){return g4e(this.dimensions,t.dimensions)?($Mt(this.measures,t.measures),!0):(K8t("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...$t(this.measures)])}producedFields(){const t=new Set;for(const n of $t(this.measures))for(const r of $t(this.measures[n])){const i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${ii({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],r=[];for(const s of $t(this.measures))for(const o of $t(this.measures[s]))for(const a of this.measures[s][o])r.push(a),t.push(o),n.push(s==="*"?null:rp(s));return{type:"aggregate",groupby:[...this.dimensions].map(rp),ops:t,fields:n,as:r}}}class fC extends us{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(const s of Yh){const o=n.facet[s];if(o){const{bin:a,sort:u}=o;this[s]={name:n.getName(`${s}_domain`),fields:[tn(o),...Bs(a)?[tn(o,{binSuffix:"end"})]:[]],...r1(u)?{sortField:u}:xt(u)?{sortIndexField:rT(o,s)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of Yh)this[n]&&(t+=` ${n.charAt(0)}:${ii(this[n])}`);return t}get fields(){var n;const t=[];for(const r of Yh)(n=this[r])!=null&&n.fields&&t.push(...this[r].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of Yh)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of B1){const r=this.childModel.component.scales[n];if(r&&!r.merged){const i=r.get("type"),s=r.get("range");if(Uu(i)&&t2(s)){const o=QL(this.childModel,n),a=mee(o);a?t[n]=a:qt(mZ(n))}}}return t}assembleRowColumnHeaderData(t,n,r){const i={row:"y",column:"x",facet:void 0}[t],s=[],o=[],a=[];i&&r&&r[i]&&(n?(s.push(`distinct_${r[i]}`),o.push("max")):(s.push(r[i]),o.push("distinct")),a.push(`distinct_${r[i]}`));const{sortField:u,sortIndexField:l}=this[t];if(u){const{op:c=ML,field:f}=u;s.push(f),o.push(c),a.push(tn(u,{forAs:!0}))}else l&&(s.push(l),o.push("max"),a.push(l));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...s.length?{fields:s,ops:o,as:a}:{}}]}}assembleFacetHeaderData(t){var u;const{columns:n}=this.model.layout,{layoutHeaders:r}=this.model.component,i=[],s={};for(const l of aee){for(const c of uee){const f=(r[l]&&r[l][c])??[];for(const d of f)if(((u=d.axes)==null?void 0:u.length)>0){s[l]=!0;break}}if(s[l]){const c=`length(data("${this.facet.name}"))`,f=l==="row"?n?{signal:`ceil(${c} / ${n})`}:1:n?{signal:`min(${c}, ${n})`}:{signal:c};i.push({name:`${this.facet.name}_${l}`,transform:[{type:"sequence",start:0,stop:f}]})}}const{row:o,column:a}=s;return(o||a)&&i.unshift(this.assembleRowColumnHeaderData("facet",null,t)),i}assemble(){const t=[];let n=null;const r=this.getChildIndependentFieldsWithStep(),{column:i,row:s,facet:o}=this;if(i&&s&&(r.x||r.y)){n=`cross_${this.column.name}_${this.row.name}`;const a=[].concat(r.x??[],r.y??[]),u=a.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:a,ops:u}]})}for(const a of[n1,t1])this[a]&&t.push(this.assembleRowColumnHeaderData(a,n,r));if(o){const a=this.assembleFacetHeaderData(r);a&&t.push(...a)}return t}}function hhe(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function BMt(e,t){const n=iZ(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const r=hhe(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){const r=hhe(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return qt(i8t(t)),null}function jMt(e){const t={};return q8(e.filter,n=>{if(sRe(n)){let r=null;_Z(n)?r=Vd(n.equal):EZ(n)?r=Vd(n.lte):wZ(n)?r=Vd(n.lt):SZ(n)?r=Vd(n.gt):TZ(n)?r=Vd(n.gte):CZ(n)?r=n.range[0]:AZ(n)&&(r=(n.oneOf??n.in)[0]),r&&(n2(r)?t[n.field]="date":Ri(r)?t[n.field]="number":cn(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function UMt(e){const t={};function n(r){ZS(r)?t[r.field]="date":r.type==="quantitative"&&NPt(r.aggregate)?t[r.field]="number":GS(r.field)>1?r.field in t||(t[r.field]="flatten"):i2(r)&&r1(r.sort)&&GS(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((_o(e)||nh(e))&&e.forEachFieldDef((r,i)=>{if(uf(r))n(r);else{const s=Zw(i),o=e.fieldDef(s);n({...r,type:o.type})}}),_o(e)){const{mark:r,markDef:i,encoding:s}=e;if(fx(r)&&!e.encoding.order){const o=i.orient==="horizontal"?"y":"x",a=s[o];Kt(a)&&a.type==="quantitative"&&!(a.field in t)&&(t[a.field]="number")}}return t}function zMt(e){const t={};if(_o(e)&&e.component.selection)for(const n of $t(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&GS(i.field)>1&&(t[i.field]="flatten")}return t}class ic extends us{clone(){return new ic(null,ur(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${ii(this._parse)}`}static makeExplicit(t,n,r){var o;let i={};const s=n.data;return!ib(s)&&((o=s==null?void 0:s.format)!=null&&o.parse)&&(i=s.format.parse),this.makeWithAncestors(t,i,{},r)}static makeWithAncestors(t,n,r,i){for(const a of $t(r)){const u=i.getWithExplicit(a);u.value!==void 0&&(u.explicit||u.value===r[a]||u.value==="derived"||r[a]==="flatten"?delete r[a]:qt(Ede(a,r[a],u.value)))}for(const a of $t(n)){const u=i.get(a);u!==void 0&&(u===n[a]?delete n[a]:qt(Ede(a,n[a],u)))}const s=new U1(n,r);i.copyAll(s);const o={};for(const a of $t(s.combine())){const u=s.get(a);u!==null&&(o[a]=u)}return $t(o).length===0||i.parseNothing?null:new ic(t,o)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of $t(this._parse)){const r=this._parse[n];GS(n)===1&&(t[n]=r)}return t}producedFields(){return new Set($t(this._parse))}dependentFields(){return new Set($t(this._parse))}assembleTransforms(t=!1){return $t(this._parse).filter(n=>t?GS(n)>1:!0).map(n=>{const r=BMt(n,this._parse[n]);return r?{type:"formula",expr:r,as:oC(n)}:null}).filter(n=>n!==null)}}class Pb extends us{clone(){return new Pb(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([D0])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:D0}}}class TI extends us{clone(){return new TI(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${ii(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class CI extends us{clone(){return new CI(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${ii(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class yw extends us{constructor(t){super(null),t??(t={name:"source"});let n;if(ib(t)||(n=t.format?{...ed(t.format,["parse"])}:{}),V4(t))this._data={values:t.values};else if(eT(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];Gr(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else wIe(t)?this._data={values:[{type:"Sphere"}]}:(xIe(t)||ib(t))&&(this._data={});this._generator=ib(t),t.name&&(this._name=t.name),n&&!ms(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var phe=function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},VMt=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},ek;function dee(e){return e instanceof yw||e instanceof TI||e instanceof CI}class hee{constructor(){ek.set(this,void 0),phe(this,ek,!1,"f")}setModified(){phe(this,ek,!0,"f")}get modifiedFlag(){return VMt(this,ek,"f")}}ek=new WeakMap;class s2 extends hee{getNodeDepths(t,n,r){r.set(t,n);for(const i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){const r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,s)=>s[1]-i[1]);for(const i of r)this.run(i[0]);return this.modifiedFlag}}class pee extends hee{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class HMt extends pee{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of $t(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}}class qMt extends pee{constructor(t){super(),this.requiresSelectionId=t&&oee(t)}run(t){t instanceof Pb&&(this.requiresSelectionId&&(dee(t.parent)||t.parent instanceof _0||t.parent instanceof ic)||(this.setModified(),t.remove()))}}class WMt extends hee{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof Gm&&(r=t.producedFields(),nZ(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const i of t.children)this.run(i,new Set([...n,...r]))}}class GMt extends pee{constructor(){super()}run(t){t instanceof td&&!t.isRequired()&&(this.setModified(),t.remove())}}class YMt extends s2{run(t){if(!dee(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof ic)if(t instanceof ic)this.setModified(),t.merge(n);else{if(rZ(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class KMt extends s2{run(t){const n=[...t.children],r=t.children.filter(i=>i instanceof ic);if(t.numChildren()>1&&r.length>=1){const i={},s=new Set;for(const o of r){const a=o.parse;for(const u of $t(a))u in i?i[u]!==a[u]&&s.add(u):i[u]=a[u]}for(const o of s)delete i[o];if(!ms(i)){this.setModified();const o=new ic(t,i);for(const a of n){if(a instanceof ic)for(const u of $t(i))delete a.parse[u];t.removeChild(a),a.parent=o,a instanceof ic&&$t(a.parse).length===0&&a.remove()}}}}}class XMt extends s2{run(t){t instanceof td||t.numChildren()>0||t instanceof fC||t instanceof yw||(this.setModified(),t.remove())}}class QMt extends s2{run(t){const n=t.children.filter(i=>i instanceof Gm),r=n.pop();for(const i of n)this.setModified(),r.merge(i)}}class JMt extends s2{run(t){const n=t.children.filter(i=>i instanceof _0),r={};for(const i of n){const s=ii(i.groupBy);s in r||(r[s]=[]),r[s].push(i)}for(const i of $t(r)){const s=r[i];if(s.length>1){const o=s.pop();for(const a of s)o.merge(a)&&(t.removeChild(a),a.parent=o,a.remove(),this.setModified())}}}}class ZMt extends s2{constructor(t){super(),this.model=t}run(t){const n=!(dee(t)||t instanceof cC||t instanceof ic||t instanceof Pb),r=[],i=[];for(const s of t.children)s instanceof Km&&(n&&!rZ(t.producedFields(),s.dependentFields())?r.push(s):i.push(s));if(r.length>0){const s=r.pop();for(const o of r)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof Km?t.merge(s,this.model.renameSignal.bind(this.model)):s.swapWithParent()}if(i.length>1){const s=i.pop();for(const o of i)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified()}}}class eLt extends s2{run(t){const n=[...t.children];if(!WS(n,o=>o instanceof td)||t.numChildren()<=1)return;const i=[];let s;for(const o of n)if(o instanceof td){let a=o;for(;a.numChildren()===1;){const[u]=a.children;if(u instanceof td)a=u;else break}i.push(...a.children),s?(t.removeChild(o),o.parent=s.parent,s.parent.removeChild(s),s.parent=a,this.setModified()):s=a}else i.push(o);if(i.length){this.setModified();for(const o of i)o.parent.removeChild(o),o.parent=s}}}class o2 extends us{clone(){return new o2(null,ur(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Fm(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??tn(t)}hash(){return`JoinAggregateTransform ${ii(this.transform)}`}assemble(){const t=[],n=[],r=[];for(const s of this.transform.joinaggregate)n.push(s.op),r.push(this.getDefaultName(s)),t.push(s.field===void 0?null:s.field);const i=this.transform.groupby;return{type:"joinaggregate",as:r,ops:n,fields:t,...i!==void 0?{groupby:i}:{}}}}class sT extends us{clone(){return new sT(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n,r){const{config:i,markDef:s}=n,{marks:o,scales:a}=r;if(o==="include-invalid-values"&&a==="include-invalid-values")return null;const u=n.reduceFieldDef((l,c,f)=>{const d=Mg(f)&&n.getScaleComponent(f);if(d){const h=d.get("type"),{aggregate:p}=c,m=OZ({scaleChannel:f,markDef:s,config:i,scaleType:h,isCountAggregate:CL(p)});m!=="show"&&m!=="always-valid"&&(l[c.field]=c)}return l},{});return $t(u).length?new sT(t,u):null}dependentFields(){return new Set($t(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${ii(this.filter)}`}assemble(){const t=$t(this.filter).reduce((n,r)=>{const i=this.filter[r],s=tn(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${s}) || (${kH(s)}))`):i.type==="quantitative"&&n.push(kH(s))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}function kH(e){return`isValid(${e}) && isFinite(+${e})`}function tLt(e){return e.stack.stackBy.reduce((t,n)=>{const r=n.fieldDef,i=tn(r);return i&&t.push(i),t},[])}function nLt(e){return xt(e)&&e.every(t=>cn(t))&&e.length>1}class s1 extends us{clone(){return new s1(null,ur(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:r,groupby:i,as:s,offset:o="zero"}=n,a=[],u=[];if(n.sort!==void 0)for(const f of n.sort)a.push(f.field),u.push(ba(f.order,"ascending"));const l={field:a,order:u};let c;return nLt(s)?c=s:cn(s)?c=[s,`${s}_end`]:c=[`${n.stack}_start`,`${n.stack}_end`],new s1(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:o,sort:l,facetby:[],as:c})}static makeFromEncoding(t,n){const r=n.stack,{encoding:i}=n;if(!r)return null;const{groupbyChannels:s,fieldChannel:o,offset:a,impute:u}=r,l=s.map(h=>{const p=i[h];return N0(p)}).filter(h=>!!h),c=tLt(n),f=n.encoding.order;let d;if(xt(f)||Kt(f))d=B4e(f);else{const h=RRe(f)?f.sort:o==="y"?"descending":"ascending";d=c.reduce((p,m)=>(p.field.includes(m)||(p.field.push(m),p.order.push(h)),p),{field:[],order:[]})}return new s1(t,{dimensionFieldDefs:l,stackField:n.vgField(o),facetby:[],stackby:c,sort:d,offset:a,impute:u,as:[n.vgField(o,{suffix:"start",forAs:!0}),n.vgField(o,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${ii(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:r}=this._stack;return t.length>0?t.map(i=>i.bin?n?[tn(i,{binSuffix:"mid"})]:[tn(i,{}),tn(i,{binSuffix:"end"})]:[tn(i)]).flat():r??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:s,sort:o,offset:a,impute:u,as:l}=this._stack;if(u)for(const c of r){const{bandPosition:f=.5,bin:d}=c;if(d){const h=tn(c,{expr:"datum"}),p=tn(c,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${kH(h)} ? ${f}*${h}+${1-f}*${p} : ${h}`,as:tn(c,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[...s,...n],key:tn(c,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:o,as:l,offset:a}),t}}class dC extends us{clone(){return new dC(null,ur(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Fm(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??tn(t)}hash(){return`WindowTransform ${ii(this.transform)}`}assemble(){const t=[],n=[],r=[],i=[];for(const f of this.transform.window)n.push(f.op),r.push(this.getDefaultName(f)),i.push(f.param===void 0?null:f.param),t.push(f.field===void 0?null:f.field);const s=this.transform.frame,o=this.transform.groupby;if(s&&s[0]===null&&s[1]===null&&n.every(f=>hZ(f)))return{type:"joinaggregate",as:r,ops:n,fields:t,...o!==void 0?{groupby:o}:{}};const a=[],u=[];if(this.transform.sort!==void 0)for(const f of this.transform.sort)a.push(f.field),u.push(f.order??"ascending");const l={field:a,order:u},c=this.transform.ignorePeers;return{type:"window",params:i,as:r,ops:n,fields:t,sort:l,...c!==void 0?{ignorePeers:c}:{},...o!==void 0?{groupby:o}:{},...s!==void 0?{frame:s}:{}}}}function rLt(e){function t(n){if(!(n instanceof fC)){const r=n.clone();if(r instanceof td){const i=IH+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof _0||r instanceof s1||r instanceof dC||r instanceof o2)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function RH(e){if(e instanceof fC)if(e.numChildren()===1&&!(e.children[0]instanceof td)){const t=e.children[0];(t instanceof _0||t instanceof s1||t instanceof dC||t instanceof o2)&&t.addDimensions(e.fields),t.swapWithParent(),RH(e)}else{const t=e.model.component.data.main;b6e(t);const n=rLt(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else e.children.map(RH)}function b6e(e){if(e instanceof td&&e.type===So.Main&&e.numChildren()===1){const t=e.children[0];t instanceof fC||(t.swapWithParent(),b6e(e))}}const IH="scale_",g5=5;function PH(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!PH(t.children))return!1}return!0}function Yp(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function mhe(e,t,n){let r=e.sources,i=!1;return i=Yp(new GMt,r)||i,i=Yp(new qMt(t),r)||i,r=r.filter(s=>s.numChildren()>0),i=Yp(new XMt,r)||i,r=r.filter(s=>s.numChildren()>0),n||(i=Yp(new YMt,r)||i,i=Yp(new ZMt(t),r)||i,i=Yp(new WMt,r)||i,i=Yp(new KMt,r)||i,i=Yp(new JMt,r)||i,i=Yp(new QMt,r)||i,i=Yp(new HMt,r)||i,i=Yp(new eLt,r)||i),e.sources=r,i}function iLt(e,t){PH(e.sources);let n=0,r=0;for(let i=0;i<g5&&mhe(e,t,!0);i++)n++;e.sources.map(RH);for(let i=0;i<g5&&mhe(e,t,!1);i++)r++;PH(e.sources),Math.max(n,r)===g5&&qt(`Maximum optimization runs(${g5}) reached.`)}class Pu{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new Pu(()=>t(n))}}function x6e(e){_o(e)?sLt(e):oLt(e)}function sLt(e){const t=e.component.scales;for(const n of $t(t)){const r=uLt(e,n);if(t[n].setWithExplicit("domains",r),cLt(e,n),e.component.data.isFaceted){let s=e;for(;!nh(s)&&s.parent;)s=s.parent;if(s.component.resolve.scale[n]==="shared")for(const a of r.value)qy(a)&&(a.data=IH+a.data.replace(IH,""))}}}function oLt(e){for(const n of e.children)x6e(n);const t=e.component.scales;for(const n of $t(t)){let r,i=null;for(const s of e.children){const o=s.component.scales[n];if(o){r===void 0?r=o.getWithExplicit("domains"):r=Ib(r,o.getWithExplicit("domains"),"domains","scale",NH);const a=o.get("selectionExtent");i&&a&&i.param!==a.param&&qt(QPt),i=a}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function aLt(e,t,n,r){if(e==="unaggregated"){const{valid:i,reason:s}=ghe(t,n);if(!i){qt(s);return}}else if(e===void 0&&r.useUnaggregatedDomain){const{valid:i}=ghe(t,n);if(i)return"unaggregated"}return e}function uLt(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=aLt(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),t==="x"&&du(r.x2)?du(r.x)?Ib(wv(n,i,e,"x"),wv(n,i,e,"x2"),"domain","scale",NH):wv(n,i,e,"x2"):t==="y"&&du(r.y2)?du(r.y)?Ib(wv(n,i,e,"y"),wv(n,i,e,"y2"),"domain","scale",NH):wv(n,i,e,"y2"):wv(n,i,e,t)}function lLt(e,t,n){return e.map(r=>({signal:`{data: ${BL(r,{timeUnit:n,type:t})}}`}))}function ij(e,t,n){var i;const r=(i=$u(n))==null?void 0:i.unit;return t==="temporal"||r?lLt(e,t,r):[e]}function wv(e,t,n,r){const{encoding:i,markDef:s,mark:o,config:a,stack:u}=n,l=du(i[r]),{type:c}=l,f=l.timeUnit,d=t9t({invalid:pg("invalid",s,a),isPath:fx(o)});if(ENt(t)){const m=wv(e,void 0,n,r),g=ij(t.unionWith,c,f);return Sm([...g,...m.value])}else{if(In(t))return Sm([t]);if(t&&t!=="unaggregated"&&!dRe(t))return Sm(ij(t,c,f))}if(u&&r===u.fieldChannel){if(u.offset==="normalize")return Bd([[0,1]]);const m=n.requestDataName(d);return Bd([{data:m,field:n.vgField(r,{suffix:"start"})},{data:m,field:n.vgField(r,{suffix:"end"})}])}const h=Mg(r)&&Kt(l)?fLt(n,r,e):void 0;if(Lg(l)){const m=ij([l.datum],c,f);return Bd(m)}const p=l;if(t==="unaggregated"){const{field:m}=l;return Bd([{data:n.requestDataName(d),field:tn({field:m,aggregate:"min"})},{data:n.requestDataName(d),field:tn({field:m,aggregate:"max"})}])}else if(Bs(p.bin)){if(Uu(e))return Bd(e==="bin-ordinal"?[]:[{data:j4(h)?n.requestDataName(d):n.requestDataName(So.Raw),field:n.vgField(r,wI(p,r)?{binSuffix:"range"}:{}),sort:h===!0||!un(h)?{field:n.vgField(r,{}),op:"min"}:h}]);{const{bin:m}=p;if(Bs(m)){const g=fee(n,p.field,m);return Bd([new Pu(()=>{const b=n.getSignalName(g);return`[${b}.start, ${b}.stop]`})])}else return Bd([{data:n.requestDataName(d),field:n.vgField(r,{})}])}}else if(p.timeUnit&&Gr(["time","utc"],e)){const m=i[Og(r)];if(kRe(p,m,s,a)){const g=n.requestDataName(d),b=Rb({fieldDef:p,fieldDef2:m,markDef:s,config:a}),y=z4(o)&&b!==.5&&xa(r);return Bd([{data:g,field:n.vgField(r,y?{suffix:qL}:{})},{data:g,field:n.vgField(r,{suffix:y?WL:"end"})}])}}return Bd(h?[{data:j4(h)?n.requestDataName(d):n.requestDataName(So.Raw),field:n.vgField(r),sort:h}]:[{data:n.requestDataName(d),field:n.vgField(r)}])}function sj(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":ML),...r?{field:rp(r)}:{},...i?{order:i}:{}}}function cLt(e,t){var a;const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=(a=e.fieldDef(t))==null?void 0:a.bin,s=dRe(r)?r:void 0,o=e2(i)&&AL(i.extent)?i.extent:void 0;(s||o)&&n.set("selectionExtent",s??o,!0)}function fLt(e,t,n){if(!Uu(n))return;const r=e.fieldDef(t),i=r.sort;if(CRe(i))return{op:"min",field:rT(r,t),order:"ascending"};const{stack:s}=e,o=s?new Set([...s.groupbyFields,...s.stackBy.map(a=>a.fieldDef.field)]):void 0;if(r1(i)){const a=s&&!o.has(i.field);return sj(i,a)}else if(tDt(i)){const{encoding:a,order:u}=i,l=e.fieldDef(a),{aggregate:c,field:f}=l,d=s&&!o.has(f);if(w1(c)||cx(c))return sj({field:tn(l),order:u},d);if(hZ(c)||!c)return sj({op:c,field:f,order:u},d)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(Gr(["ascending",void 0],i))return!0}}function ghe(e,t){const{aggregate:n,type:r}=e;return n?cn(n)&&!OPt.has(n)?{valid:!1,reason:C8t(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:A8t(e)}:{valid:!0}:{valid:!1,reason:T8t(e)}}function NH(e,t,n,r){return e.explicit&&t.explicit&&qt(N8t(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function dLt(e){const t=Fm(e.map(o=>{if(qy(o)){const{sort:a,...u}=o;return u}return o}),ii),n=Fm(e.map(o=>{if(qy(o)){const a=o.sort;return a!==void 0&&!j4(a)&&("op"in a&&a.op==="count"&&delete a.field,a.order==="ascending"&&delete a.order),a}}).filter(o=>o!==void 0),ii);if(t.length===0)return;if(t.length===1){const o=e[0];if(qy(o)&&n.length>0){let a=n[0];if(n.length>1){qt(Tde);const u=n.filter(l=>un(l)&&"op"in l&&l.op!=="min");n.every(l=>un(l)&&"op"in l)&&u.length===1?a=u[0]:a=!0}else if(un(a)&&"field"in a){const u=a.field;o.field===u&&(a=a.order?{order:a.order}:!0)}return{...o,sort:a}}return o}const r=Fm(n.map(o=>j4(o)||!("op"in o)||cn(o.op)&&gn(IPt,o.op)?o:(qt(O8t(o)),!0)),ii);let i;r.length===1?i=r[0]:r.length>1&&(qt(Tde),i=!0);const s=Fm(e.map(o=>qy(o)?o.data:null),o=>o);return s.length===1&&s[0]!==null?{data:s[0],fields:t.map(a=>a.field),...i?{sort:i}:{}}:{fields:t,...i?{sort:i}:{}}}function mee(e){if(qy(e)&&cn(e.field))return e.field;if(MPt(e)){let t;for(const n of e.fields)if(qy(n)&&cn(n.field)){if(!t)t=n.field;else if(t!==n.field)return qt(M8t),t}return qt(L8t),t}else if(LPt(e)){qt(F8t);const t=e.fields[0];return cn(t)?t:void 0}}function QL(e,t){const r=e.component.scales[t].get("domains").map(i=>(qy(i)&&(i.data=e.lookupDataSource(i.data)),i));return dLt(r)}function _6e(e){return hC(e)||gee(e)?e.children.reduce((t,n)=>t.concat(_6e(n)),yhe(e)):yhe(e)}function yhe(e){return $t(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:s,type:o,selectionExtent:a,domains:u,range:l,reverse:c,...f}=i,d=hLt(i.range,s,n,e),h=QL(e,n),p=a?d9t(e,a,r,h):null;return t.push({name:s,type:o,...h?{domain:h}:{},...p?{domainRaw:p}:{},range:d,...c!==void 0?{reverse:c}:{},...f}),t},[])}function hLt(e,t,n,r){if(xa(n)){if(t2(e))return{step:{signal:`${t}_step`}}}else if(un(e)&&qy(e))return{...e,data:r.lookupDataSource(e.data)};return e}class w6e extends U1{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainHasZero(){const t=this.get("type");if(Gr([pl.LOG,pl.TIME,pl.UTC],t))return"definitely-not";const n=this.get("zero");if(n===!0||n===void 0&&Gr([pl.LINEAR,pl.SQRT,pl.POW],t))return"definitely";const r=this.get("domains");if(r.length>0){let i=!1,s=!1,o=!1;for(const a of r){if(xt(a)){const u=a[0],l=a[a.length-1];if(Ri(u)&&Ri(l))if(u<=0&&l>=0){i=!0;continue}else{s=!0;continue}}o=!0}if(i)return"definitely";if(s&&!o)return"definitely-not"}return"maybe"}}const pLt=["range","scheme"];function mLt(e){const t=e.component.scales;for(const n of dZ){const r=t[n];if(!r)continue;const i=gLt(n,e);r.setWithExplicit("range",i)}}function vhe(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:r,field:i}=n,s=ud(t),o=e.getName(s);if(un(r)&&r.binned&&r.step!==void 0)return new Pu(()=>{const a=e.scaleName(t),u=`(domain("${a}")[1] - domain("${a}")[0]) / ${r.step}`;return`${e.getSignalName(o)} / (${u})`});if(Bs(r)){const a=fee(e,i,r);return new Pu(()=>{const u=e.getSignalName(a),l=`(${u}.stop - ${u}.start) / ${u}.step`;return`${e.getSignalName(o)} / (${l})`})}}}function gLt(e,t){const n=t.specifiedScales[e],{size:r}=t,s=t.getScaleComponent(e).get("type");for(const f of pLt)if(n[f]!==void 0){const d=dH(s,f),h=hRe(e,f);if(!d)qt(W4e(s,f,e));else if(h)qt(h);else switch(f){case"range":{const p=n.range;if(xt(p)){if(xa(e))return Sm(p.map(m=>{if(m==="width"||m==="height"){const g=t.getName(m),b=t.getSignalName.bind(t);return Pu.fromName(b,g)}return m}))}else if(un(p))return Sm({data:t.requestDataName(So.Main),field:p.field,sort:{op:"min",field:t.vgField(e)}});return Sm(p)}case"scheme":return Sm(yLt(n[f]))}}const o=e===ho||e==="xOffset"?"width":"height",a=r[o];if(gg(a)){if(xa(e))if(Uu(s)){const f=S6e(a,t,e);if(f)return Sm({step:f})}else qt(G4e(o));else if(mI(e)){const f=e===ix?"x":"y";if(t.getScaleComponent(f).get("type")==="band"){const p=T6e(a,s);if(p)return Sm(p)}}}const{rangeMin:u,rangeMax:l}=n,c=vLt(e,t);return(u!==void 0||l!==void 0)&&dH(s,"rangeMin")&&xt(c)&&c.length===2?Sm([u??c[0],l??c[1]]):Bd(c)}function yLt(e){return wNt(e)?{scheme:e.name,...ed(e,["name"])}:{scheme:e}}function E6e(e,t,n,{center:r}={}){const i=ud(e),s=t.getName(i),o=t.getSignalName.bind(t);return e===qu&&I0(n)?r?[Pu.fromName(a=>`${o(a)}/2`,s),Pu.fromName(a=>`-${o(a)}/2`,s)]:[Pu.fromName(o,s),0]:r?[Pu.fromName(a=>`-${o(a)}/2`,s),Pu.fromName(a=>`${o(a)}/2`,s)]:[0,Pu.fromName(o,s)]}function vLt(e,t){const{size:n,config:r,mark:i,encoding:s}=t,{type:o}=du(s[e]),u=t.getScaleComponent(e).get("type"),{domain:l,domainMid:c}=t.specifiedScales[e];switch(e){case ho:case qu:{if(Gr(["point","band"],u)){const f=C6e(e,n,r.view);if(gg(f))return{step:S6e(f,t,e)}}return E6e(e,t,u)}case ix:case aC:return bLt(e,t,u);case F1:{const f=wLt(i,r),d=ELt(i,n,t,r);return XS(u)?_Lt(f,d,xLt(u,r,l,e)):[f,d]}case pp:return[0,Math.PI*2];case Jw:return[0,360];case V0:return[0,new Pu(()=>{const f=t.getSignalName(nh(t.parent)?"child_width":"width"),d=t.getSignalName(nh(t.parent)?"child_height":"height");return`min(${f},${d})/2`})];case sx:return{step:1e3/r.scale.framesPerSecond};case ux:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case lx:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case ad:return"symbol";case od:case Ng:case Dg:return u==="ordinal"?o==="nominal"?"category":"ordinal":c!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case $1:case ox:case ax:return[r.scale.minOpacity,r.scale.maxOpacity]}}function S6e(e,t,n){const{encoding:r}=t,i=t.getScaleComponent(n),s=uZ(n),o=r[s];if(oIe({step:e,offsetIsDiscrete:gr(o)&&aRe(o.type)})==="offset"&&jRe(r,s)){const u=t.getScaleComponent(s);let c=`domain('${t.scaleName(s)}').length`;if(u.get("type")==="band"){const d=u.get("paddingInner")??u.get("padding")??0,h=u.get("paddingOuter")??u.get("padding")??0;c=`bandspace(${c}, ${d}, ${h})`}const f=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${c} / (1-${jPt(f)})`}}else return e.step}function T6e(e,t){if(oIe({step:e,offsetIsDiscrete:Uu(t)})==="offset")return{step:e.step}}function bLt(e,t,n){const r=e===ix?"x":"y",i=t.getScaleComponent(r);if(!i)return E6e(r,t,n,{center:!0});const s=i.get("type"),o=t.scaleName(r),{markDef:a,config:u}=t;if(s==="band"){const l=C6e(r,t.size,t.config.view);if(gg(l)){const c=T6e(l,n);if(c)return c}return[0,{signal:`bandwidth('${o}')`}]}else{const l=t.encoding[r];if(Kt(l)&&l.timeUnit){const c=rRe(l.timeUnit,p=>`scale('${o}', ${p})`),f=t.config.scale.bandWithNestedOffsetPaddingInner,d=Rb({fieldDef:l,markDef:a,config:u})-.5,h=d!==0?` + ${d}`:"";if(f){const p=In(f)?`${f.signal}/2`+h:`${f/2+d}`,m=In(f)?`(1 - ${f.signal}/2)`+h:`${1-f/2+d}`;return[{signal:`${p} * (${c})`},{signal:`${m} * (${c})`}]}return[0,{signal:c}]}return p4e(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}function C6e(e,t,n){const r=e===ho?"width":"height",i=t[r];return i||cO(n,r)}function xLt(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&xt(n)?n.length+1:(qt(W8t(r)),3)}}function _Lt(e,t,n){const r=()=>{const i=p0(t),s=p0(e),o=`(${i} - ${s}) / (${n} - 1)`;return`sequence(${s}, ${i} + ${o}, ${o})`};return In(t)?new Pu(r):{signal:r()}}function wLt(e,t){switch(e){case"bar":case"tick":return t.scale.minBandSize;case"line":case"trail":case"rule":return t.scale.minStrokeWidth;case"text":return t.scale.minFontSize;case"point":case"square":case"circle":return t.scale.minSize}throw new Error(kL("size",e))}const bhe=.95;function ELt(e,t,n,r){const i={x:vhe(n,"x"),y:vhe(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const s=xhe(t,i,r.view);return Ri(s)?s-1:new Pu(()=>`${s.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const s=xhe(t,i,r.view);return Ri(s)?Math.pow(bhe*s,2):new Pu(()=>`pow(${bhe} * ${s.signal}, 2)`)}}throw new Error(kL("size",e))}function xhe(e,t,n){const r=gg(e.width)?e.width.step:gH(n,"width"),i=gg(e.height)?e.height.step:gH(n,"height");return t.x||t.y?new Pu(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function A6e(e,t){_o(e)?SLt(e,t):R6e(e,t)}function SLt(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:s,specifiedScales:o}=e;for(const a of $t(n)){const u=o[a],l=n[a],c=e.getScaleComponent(a),f=du(i[a]),d=u[t],h=c.get("type"),p=c.get("padding"),m=c.get("paddingInner"),g=dH(h,t),b=hRe(a,t);if(d!==void 0&&(g?b&&qt(b):qt(W4e(h,t,a))),g&&b===void 0)if(d!==void 0){const y=f.timeUnit,x=f.type;switch(t){case"domainMax":case"domainMin":n2(u[t])||x==="temporal"||y?l.set(t,{signal:BL(u[t],{type:x,timeUnit:y})},!0):l.set(t,u[t],!0);break;default:l.copyKeyFromObject(t,u)}}else{const y=zt(_he,t)?_he[t]({model:e,channel:a,fieldOrDatumDef:f,scaleType:h,scalePadding:p,scalePaddingInner:m,domain:u.domain,domainMin:u.domainMin,domainMax:u.domainMax,markDef:s,config:r,hasNestedOffsetScale:URe(i,a),hasSecondaryRangeChannel:!!i[Og(a)]}):r.scale[t];y!==void 0&&l.set(t,y,!1)}}}const _he={bins:({model:e,fieldOrDatumDef:t})=>Kt(t)?TLt(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>CLt(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:s})=>ALt(e,t,n,r,i,s),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>kLt(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:s})=>RLt(e,t,n.type,r,i.scale,s),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:s})=>ILt(e,t,n,r,i.scale,s),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{const i=Kt(e)?e.sort:void 0;return PLt(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:s,hasSecondaryRangeChannel:o})=>NLt(e,t,n,r,i,s.scale,o)};function k6e(e){_o(e)?mLt(e):R6e(e,"range")}function R6e(e,t){const n=e.component.scales;for(const r of e.children)t==="range"?k6e(r):A6e(r,t);for(const r of $t(n)){let i;for(const s of e.children){const o=s.component.scales[r];if(o){const a=o.getWithExplicit(t);i=Ib(i,a,t,"scale",bIe((u,l)=>{switch(t){case"range":return u.step&&l.step?u.step-l.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function TLt(e,t){const n=t.bin;if(Bs(n)){const r=fee(e,t.field,n);return new Pu(()=>e.getSignalName(r))}else if(dl(n)&&e2(n)&&n.step!==void 0)return{step:n.step}}function CLt(e,t){if(Gr([od,Ng,Dg],e)&&t!=="nominal")return"hcl"}function ALt(e,t,n,r,i,s){var o;if(!((o=N0(s))!=null&&o.bin||xt(n)||i!=null||r!=null||Gr([pl.TIME,pl.UTC],e)))return xa(t)?!0:void 0}function kLt(e,t,n,r,i,s){if(xa(e)){if($m(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:o,orient:a}=i;if(o==="bar"&&!(Kt(r)&&(r.bin||r.timeUnit))&&(a==="vertical"&&e==="x"||a==="horizontal"&&e==="y"))return s.continuousBandSize}if(t===pl.POINT)return n.pointPadding}}function RLt(e,t,n,r,i,s=!1){if(e===void 0){if(xa(t)){const{bandPaddingInner:o,barBandPaddingInner:a,rectBandPaddingInner:u,tickBandPaddingInner:l,bandWithNestedOffsetPaddingInner:c}=i;return s?c:ba(o,n==="bar"?a:n==="tick"?l:u)}else if(mI(t)&&r===pl.BAND)return i.offsetBandPaddingInner}}function ILt(e,t,n,r,i,s=!1){if(e===void 0){if(xa(t)){const{bandPaddingOuter:o,bandWithNestedOffsetPaddingOuter:a}=i;if(s)return a;if(n===pl.BAND)return ba(o,In(r)?{signal:`${r.signal}/2`}:r/2)}else if(mI(t)){if(n===pl.POINT)return .5;if(n===pl.BAND)return i.offsetBandPaddingOuter}}}function PLt(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return I0(e)&&t==="descending"?In(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(I0(e)&&t==="descending")return!0}function NLt(e,t,n,r,i,s,o){if(!!n&&n!=="unaggregated"&&I0(i)){if(xt(n)){const u=n[0],l=n[n.length-1];if(Ri(u)&&u<=0&&Ri(l)&&l>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!XS(i))return!0;if(!(Kt(t)&&t.bin)&&Gr([...B1,..._Pt],e)){const{orient:u,type:l}=r;return Gr(["bar","area","line","trail"],l)&&(u==="horizontal"&&e==="y"||u==="vertical"&&e==="x")?!1:Gr(["bar","area"],l)&&!o?!0:s==null?void 0:s.zero}return!1}function DLt(e,t,n,r,i=!1){const s=OLt(t,n,r,i),{type:o}=e;return Mg(t)?o!==void 0?RNt(t,o)?Kt(n)&&!kNt(o,n.type)?(qt(I8t(o,s)),s):o:(qt(R8t(t,o,s)),s):s:null}function OLt(e,t,n,r){var i;switch(t.type){case"nominal":case"ordinal":{if(JE(e)||GB(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&qt(YB(e,"ordinal")),"ordinal";if(WB(e))return"band";if(xa(e)||mI(e)){if(Gr(["rect","bar","image","rule","tick"],n.type)||r)return"band"}else if(n.type==="arc"&&e in fZ)return"band";const s=n[ud(e)];return hw(s)||JS(t)&&((i=t.axis)!=null&&i.tickBand)?"band":"point"}case"temporal":return JE(e)?"time":GB(e)==="discrete"?(qt(YB(e,"temporal")),"ordinal"):Kt(t)&&t.timeUnit&&$u(t.timeUnit).utc?"utc":WB(e)?"band":"time";case"quantitative":return JE(e)?Kt(t)&&Bs(t.bin)?"bin-ordinal":"linear":GB(e)==="discrete"?(qt(YB(e,"quantitative")),"ordinal"):WB(e)?"band":"linear";case"geojson":return}throw new Error(H4e(t.type))}function MLt(e,{ignoreRange:t}={}){I6e(e),x6e(e);for(const n of ANt)A6e(e,n);t||k6e(e)}function I6e(e){_o(e)?e.component.scales=LLt(e):e.component.scales=$Lt(e)}function LLt(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const s of dZ){const o=du(t[s]);if(o&&n===gRe&&s===ad&&o.type===uC)continue;let a=o&&o.scale;if(o&&a!==null&&a!==!1){a??(a={});const u=URe(t,s),l=DLt(a,s,o,r,u);i[s]=new w6e(e.scaleName(`${s}`,!0),{value:l,explicit:a.type===l})}}return i}const FLt=bIe((e,t)=>Ade(e)-Ade(t));function $Lt(e){var t;const n=e.component.scales={},r={},i=e.component.resolve;for(const s of e.children){I6e(s);for(const o of $t(s.component.scales))if((t=i.scale)[o]??(t[o]=a6e(o,e)),i.scale[o]==="shared"){const a=r[o],u=s.component.scales[o].getWithExplicit("type");a?yNt(a.value,u.value)?r[o]=Ib(a,u,"type","scale",FLt):(i.scale[o]="independent",delete r[o]):r[o]=u}}for(const s of $t(r)){const o=e.scaleName(s,!0),a=r[s];n[s]=new w6e(o,a);for(const u of e.children){const l=u.component.scales[s];l&&(u.renameScale(l.get("name"),o),l.merged=!0)}}return n}class oj{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function _o(e){return(e==null?void 0:e.type)==="unit"}function nh(e){return(e==null?void 0:e.type)==="facet"}function gee(e){return(e==null?void 0:e.type)==="concat"}function hC(e){return(e==null?void 0:e.type)==="layer"}class yee{constructor(t,n,r,i,s,o,a){this.type=n,this.parent=r,this.config=s,this.parent=r,this.config=s,this.view=hl(a),this.name=t.name??i,this.title=kv(t.title)?{text:t.title}:t.title?hl(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new oj,this.projectionNameMap=r?r.projectionNameMap:new oj,this.signalNameMap=r?r.signalNameMap:new oj,this.data=t.data,this.description=t.description,this.transforms=VOt(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:GDt(t,n,s),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:LL(t)||(r==null?void 0:r.component.data.isFaceted)&&t.data===void 0},layoutSize:new U1,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...o?ur(o):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){MLt(this)}parseProjection(){y6e(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){d6e(this)}assembleEncodeFromView(t){const{style:n,...r}=t,i={};for(const s of $t(r)){const o=r[s];o!==void 0&&(i[s]=Qs(o))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=Qs(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:ms(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:r,config:i}=this,s=iMt(r.layoutHeaders,i);return{padding:t,...this.assembleDefaultLayout(),...n,...s?{titleBand:s}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of Yh)t[r].title&&n.push(J9t(this,r));for(const r of aee)n=n.concat(Z9t(this,r));return n}assembleAxes(){return B9t(this.component.axes,this.config)}assembleLegends(){return p6e(this)}assembleProjections(){return AMt(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},r={...M4e(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(r.text)return Gr(["unit","layer"],this.type)?Gr(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),ms(r)?void 0:r}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||nh(this.parent)?_6e(this):[];i.length>0&&(n.scales=i);const s=this.assembleAxes();s.length>0&&(n.axes=s);const o=this.assembleLegends();return o.length>0&&(n.legends=o),n}getName(t){return lo((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(So[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if(nh(this.parent)){const n=s6e(t),r=TL(n),i=this.component.scales[r];if(i&&!i.merged){const s=i.get("type"),o=i.get("range");if(Uu(s)&&t2(o)){const a=i.get("name"),u=QL(this,r),l=mee(u);if(l){const c=tn({aggregate:"distinct",field:l},{expr:"datum"});return{signal:i6e(a,i,c)}}else return qt(mZ(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(A4e(t)&&Mg(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getScaleType(t){const n=this.getScaleComponent(t);return n?n.get("type"):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(qPt(n));return r}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(r=>r.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(r=>r.hasOrientSignalRef()))}}class P6e extends yee{vgField(t,n={}){const r=this.fieldDef(t);if(r)return tn(r,n)}reduceFieldDef(t,n){return wDt(this.getMapping(),(r,i,s)=>{const o=N0(i);return o?t(r,o,s):r},n)}forEachFieldDef(t,n){VZ(this.getMapping(),(r,i)=>{const s=N0(r);s&&t(s,i)},n)}}class JL extends us{clone(){return new JL(null,ur(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=ur(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"];const i=this.transform.resolve??"shared";this.transform.resolve=i}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${ii(this.transform)}`}assemble(){const{density:t,...n}=this.transform,r={type:"kde",field:t,...n};return r.resolve=this.transform.resolve,r}}class ZL extends us{clone(){return new ZL(null,ur(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=ur(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${ii(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class e7 extends us{clone(){return new e7(this.parent,ur(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=ur(n);const{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((s,o)=>i[o]??s)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${ii(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class t7 extends us{clone(){return new t7(null,ur(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=ur(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${ii(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class tS extends us{clone(){return new tS(null,ur(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(const i of[[q0,H0],[ip,W0]]){const s=i.map(o=>{const a=du(n.encoding[o]);return Kt(a)?a.field:Lg(a)?{expr:`${a.datum}`}:P0(a)?{expr:`${a.value}`}:void 0});(s[0]||s[1])&&(t=new tS(t,s,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(ad)){const i=n.typedFieldDef(ad);i.type===uC&&(t=new tS(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}dependentFields(){const t=(this.fields??[]).filter(cn);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${ii(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class H4 extends us{clone(){return new H4(null,this.projection,ur(this.fields),ur(this.as))}constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}static parseAll(t,n){if(!n.projectionName())return t;for(const r of[[q0,H0],[ip,W0]]){const i=r.map(o=>{const a=du(n.encoding[o]);return Kt(a)?a.field:Lg(a)?{expr:`${a.datum}`}:P0(a)?{expr:`${a.value}`}:void 0}),s=r[0]===ip?"2":"";(i[0]||i[1])&&(t=new H4(t,n.projectionName(),i,[n.getName(`x${s}`),n.getName(`y${s}`)]))}return t}dependentFields(){return new Set(this.fields.filter(cn))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${ii(this.fields)} ${ii(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class z_ extends us{clone(){return new z_(null,ur(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new z_(t,n)}static makeFromEncoding(t,n){const r=n.encoding,i=r.x,s=r.y;if(Kt(i)&&Kt(s)){const o=i.impute?i:s.impute?s:void 0;if(o===void 0)return;const a=i.impute?s:s.impute?i:void 0,{method:u,value:l,frame:c,keyvals:f}=o.impute,d=HRe(n.mark,r);return new z_(t,{impute:o.field,key:a.field,...u?{method:u}:{},...l!==void 0?{value:l}:{},...c?{frame:c}:{},...f!==void 0?{keyvals:f}:{},...d.length?{groupby:d}:{}})}return null}hash(){return`Impute ${ii(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:r,method:i,groupby:s,value:o,frame:a=[null,null]}=this.transform,u={type:"impute",field:t,key:n,...r?{keyvals:SOt(r)?this.processSequence(r):r}:{},method:"value",...s?{groupby:s}:{},value:!i||i==="value"?o:null};if(i&&i!=="value"){const l={type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:a,ignorePeers:!1,...s?{groupby:s}:{}},c={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[u,l,c]}else return[u]}}class n7 extends us{clone(){return new n7(null,ur(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=ur(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${ii(this.transform)}`}assemble(){const{loess:t,on:n,...r}=this.transform;return{type:"loess",x:n,y:t,...r}}}class q4 extends us{clone(){return new q4(null,ur(this.transform),this.secondary)}constructor(t,n,r){super(t),this.transform=n,this.secondary=r}static make(t,n,r,i){const s=n.component.data.sources,{from:o}=r;let a=null;if(TOt(o)){let u=O6e(o.data,s);u||(u=new yw(o.data),s.push(u));const l=n.getName(`lookup_${i}`);a=new td(u,l,So.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[l]=a}else if(COt(o)){const u=o.param;r={as:u,...r};let l;try{l=n.getSelectionComponent(lo(u),u)}catch{throw new Error(KPt(u))}if(a=l.materialized,!a)throw new Error(XPt(u))}return new q4(t,r,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?ln(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${ii({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:ln(this.transform.as)}:{}};else{let n=this.transform.as;cn(n)||(qt(a8t),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class r7 extends us{clone(){return new r7(null,ur(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=ur(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${ii(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class i7 extends us{clone(){return new i7(null,ur(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=ur(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${ii(this.transform)}`}assemble(){const{regression:t,on:n,...r}=this.transform;return{type:"regression",x:n,y:t,...r}}}class s7 extends us{clone(){return new s7(null,ur(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Fm((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${ii(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:r,limit:i,op:s}=this.transform;return{type:"pivot",field:t,value:n,...i!==void 0?{limit:i}:{},...s!==void 0?{op:s}:{},...r!==void 0?{groupby:r}:{}}}}class o7 extends us{clone(){return new o7(null,ur(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${ii(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function N6e(e){let t=0;function n(r,i){if(r instanceof yw&&!r.isGenerator&&!eT(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof ic&&(r.parent instanceof yw&&!i.source?(i.format={...i.format,parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof fC){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof TI||r instanceof CI||r instanceof sT||r instanceof cC||r instanceof nT||r instanceof H4||r instanceof _0||r instanceof q4||r instanceof dC||r instanceof o2||r instanceof t7||r instanceof e7||r instanceof JL||r instanceof n7||r instanceof r7||r instanceof i7||r instanceof Pb||r instanceof o7||r instanceof s7||r instanceof ZL)&&i.transform.push(r.assemble()),(r instanceof Km||r instanceof Gm||r instanceof z_||r instanceof s1||r instanceof tS)&&i.transform.push(...r.assemble()),r instanceof td&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof td?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof td&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let s=i.name;!i.source||i.transform.length>0?e.push(i):s=i.source;for(const o of r.children)n(o,{name:null,source:s,transform:[]});break}}}return n}function BLt(e){const t=[],n=N6e(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function jLt(e,t){const n=[],r=N6e(n);let i=0;for(const o of e.sources){o.hasName()||(o.dataName=`source_${i++}`);const a=o.assemble();r(o,a)}for(const o of n)o.transform.length===0&&delete o.transform;let s=0;for(const[o,a]of n.entries())(a.transform??[]).length===0&&!a.source&&n.splice(s++,0,n.splice(o,1)[0]);for(const o of n)for(const a of o.transform??[])a.type==="lookup"&&(a.from=e.outputNodes[a.from].getSource());for(const o of n)o.name in t&&(o.values=t[o.name]);return n}function ULt(e){return e==="top"||e==="left"||In(e)?"header":"footer"}function zLt(e){for(const t of Yh)VLt(e,t);whe(e,"x"),whe(e,"y")}function VLt(e,t){var o;const{facet:n,config:r,child:i,component:s}=e;if(e.channelHasField(t)){const a=n[t],u=iT("title",null,r,t);let l=ZE(a,r,{allowDisabling:!0,includeDefault:u===void 0||!!u});i.component.layoutHeaders[t].title&&(l=xt(l)?l.join(", "):l,l+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);const c=iT("labelOrient",a.header,r,t),f=a.header!==null?ba((o=a.header)==null?void 0:o.labels,r.header.labels,!0):!1,d=Gr(["bottom","right"],c)?"footer":"header";s.layoutHeaders[t]={title:a.header!==null?l:null,facetFieldDef:a,[d]:t==="facet"?[]:[D6e(e,t,f)]}}}function D6e(e,t,n){const r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function whe(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=cee(i,t),i.axis[t]==="shared"){const s=t==="x"?"column":"row",o=r[s];for(const a of n.component.axes[t]){const u=ULt(a.get("orient"));o[u]??(o[u]=[D6e(e,s,!1)]);const l=Z3(a,"main",e.config,{header:!0});l&&o[u][0].axes.push(l),a.mainExtracted=!0}}}}function HLt(e){vee(e),pO(e,"width"),pO(e,"height")}function qLt(e){vee(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";pO(e,t),pO(e,n)}function vee(e){for(const t of e.children)t.parseLayoutSize()}function pO(e,t){const n=s6e(t),r=TL(n),i=e.component.resolve,s=e.component.layoutSize;let o;for(const a of e.children){const u=a.component.layoutSize.getWithExplicit(n),l=i.scale[r]??a6e(r,e);if(l==="independent"&&u.value==="step"){o=void 0;break}if(o){if(l==="independent"&&o.value!==u.value){o=void 0;break}o=Ib(o,u,n,"")}else o=u}if(o){for(const a of e.children)e.renameSignal(a.getName(n),e.getName(t)),a.component.layoutSize.set(n,"merged",!1);s.setWithExplicit(t,o)}else s.setWithExplicit(t,{explicit:!1,value:void 0})}function WLt(e){const{size:t,component:n}=e;for(const r of B1){const i=ud(r);if(t[i]){const s=t[i];n.layoutSize.set(i,gg(s)?"step":s,!0)}else{const s=GLt(e,i);n.layoutSize.set(i,s,!1)}}}function GLt(e,t){const n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const s=i.get("type"),o=i.get("range");if(Uu(s)){const a=cO(r.view,t);return t2(o)||gg(a)?"step":a}else return mH(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return mH(r.view,t);{const s=cO(r.view,t);return gg(s)?s.step:s}}}function DH(e,t,n){return tn(t,{suffix:`by_${tn(e)}`,...n})}class Fk extends P6e{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=Eee(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!bI(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=$t(t),r={};for(const i of n){if(![t1,n1].includes(i)){qt(kL(i,"facet"));break}const s=t[i];if(s.field===void 0){qt(cH(s,i));break}r[i]=this.initFacetFieldDef(s,i)}return r}initFacetFieldDef(t,n){const r=zZ(t,n);return r.header?r.header=hl(r.header):r.header===null&&(r.header=null),r}channelHasField(t){return zt(this.facet,t)}fieldDef(t){return this.facet[t]}parseData(){this.component.data=a7(this),this.child.parseData()}parseLayoutSize(){vee(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection,Object.values(this.component.selection).some(t=>Ym(t))&&yZ(gZ)}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),zLt(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of Yh)for(const r of uee){const i=this.component.layoutHeaders[n],s=i[r],{facetFieldDef:o}=i;if(o){const a=iT("titleOrient",o.header,this.config,n);if(["right","bottom"].includes(a)){const u=KL(n,a);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[u]="end"}}if(s!=null&&s[0]){const a=n==="row"?"height":"width",u=r==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(a)&&(t[u]??(t[u]={}),t[u][n]=.5),i.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0;let i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),{...this.getHeaderLayoutMixins(),...r?{columns:r}:{},bounds:"full",align:i}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof Fk))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof Fk?{...this.channelHasField("column")?{encode:{update:{columns:{field:tn(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],r=[];if(this.child instanceof Fk){if(this.child.channelHasField("column")){const i=tn(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(const i of B1){const s=this.child.component.scales[i];if(s&&!s.merged){const o=s.get("type"),a=s.get("range");if(Uu(o)&&t2(a)){const u=QL(this.child,i),l=mee(u);l?(t.push(l),n.push("distinct"),r.push(`distinct_${l}`)):qt(mZ(i))}}}return{fields:t,ops:n,as:r}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:s,ops:o,as:a}=this.getCardinalityAggregateForChild(),u=[];for(const c of Yh){const f=this.facet[c];if(f){u.push(tn(f));const{bin:d,sort:h}=f;if(Bs(d)&&u.push(tn(f,{binSuffix:"end"})),r1(h)){const{field:p,op:m=ML}=h,g=DH(f,h);r&&i?(s.push(g),o.push("max"),a.push(g)):(s.push(p),o.push(m),a.push(g))}else if(xt(h)){const p=rT(f,c);s.push(p),o.push("max"),a.push(p)}}}const l=!!r&&!!i;return{name:t,data:n,groupby:u,...l||s.length>0?{aggregate:{...l?{cross:l}:{},...s.length?{fields:s,ops:o,as:a}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,r=n[t];return r?r1(r.sort)?[DH(r,r.sort,{expr:"datum"})]:xt(r.sort)?[rT(r,t,{expr:"datum"})]:[tn(r,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,r=n[t];if(r){const{sort:i}=r;return[(r1(i)?i.order:!xt(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){var i;const{facet:t,config:n}=this;if(t.facet)return CH(t.facet,"facet",n);const r={row:["top","bottom"],column:["left","right"]};for(const s of aee)if(t[s]){const o=iT("labelOrient",(i=t[s])==null?void 0:i.header,n,s);if(r[s].includes(o))return CH(t[s],s,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,r=BLt(n),i=t.assembleGroupEncodeEntry(!1),s=this.assembleLabelTitle()||t.assembleTitle(),o=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...s?{title:s}:{},...o?{style:o}:{},from:{facet:this.assembleFacet()},sort:{field:Yh.map(u=>this.facetSortFields(u)).flat(),order:Yh.map(u=>this.facetSortOrder(u)).flat()},...r.length>0?{data:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup(u9t(this,[]))}]}getMapping(){return this.facet}}function YLt(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const s of[n,r])if(r1(s.sort)){const{field:o,op:a=ML}=s.sort;e=i=new o2(e,{joinaggregate:[{op:a,field:o,as:DH(s,s.sort,{forAs:!0})}],groupby:[tn(s)]})}return i}return null}function O6e(e,t){var n,r,i,s;for(const o of t){const a=o.data;if(e.name&&o.hasName()&&e.name!==o.dataName)continue;const u=(n=e.format)==null?void 0:n.mesh,l=(r=a.format)==null?void 0:r.feature;if(u&&l)continue;const c=(i=e.format)==null?void 0:i.feature;if((c||l)&&c!==l)continue;const f=(s=a.format)==null?void 0:s.mesh;if(!((u||f)&&u!==f)){if(V4(e)&&V4(a)){if(Kd(e.values,a.values))return o}else if(eT(e)&&eT(a)){if(e.url===a.url)return o}else if(xIe(e)&&e.name===o.dataName)return o}}return null}function KLt(e,t){if(e.data||!e.parent){if(e.data===null){const r=new yw({values:[]});return t.push(r),r}const n=O6e(e.data,t);if(n)return ib(e.data)||(n.data.format=m4e({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new yw(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function XLt(e,t,n){let r=0;for(const i of t.transforms){let s,o;if(LOt(i))o=e=new nT(e,i),s="derived";else if(eee(i)){const a=jMt(i);o=e=ic.makeWithAncestors(e,{},a,n)??e,e=new cC(e,t,i.filter)}else if(mIe(i))o=e=Km.makeFromTransform(e,i,t),s="number";else if($Ot(i))s="date",n.getWithExplicit(i.field).value===void 0&&(e=new ic(e,{[i.field]:s}),n.set(i.field,s,!1)),o=e=Gm.makeFromTransform(e,i);else if(BOt(i))o=e=_0.makeFromTransform(e,i),s="number",oee(t)&&(e=new Pb(e));else if(pIe(i))o=e=q4.make(e,t,i,r++),s="derived";else if(DOt(i))o=e=new dC(e,i),s="number";else if(OOt(i))o=e=new o2(e,i),s="number";else if(jOt(i))o=e=s1.makeFromTransform(e,i),s="derived";else if(UOt(i))o=e=new t7(e,i),s="derived";else if(zOt(i))o=e=new ZL(e,i),s="derived";else if(MOt(i))o=e=new e7(e,i),s="derived";else if(AOt(i))o=e=new s7(e,i),s="derived";else if(NOt(i))e=new o7(e,i);else if(FOt(i))o=e=z_.makeFromTransform(e,i),s="derived";else if(kOt(i))o=e=new JL(e,i),s="derived";else if(ROt(i))o=e=new r7(e,i),s="derived";else if(IOt(i))o=e=new i7(e,i),s="derived";else if(POt(i))o=e=new n7(e,i),s="derived";else{qt(o8t(i));continue}if(o&&s!==void 0)for(const a of o.producedFields()??[])n.set(a,s,!1)}return e}function a7(e){var g;let t=KLt(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,o=!(i&&(ib(i)||eT(i)||V4(i)))&&e.parent?e.parent.component.data.ancestorParse.clone():new e9t;ib(i)?(_Ie(i)?t=new CI(t,i.sequence):tee(i)&&(t=new TI(t,i.graticule)),o.parseNothing=!0):((g=i==null?void 0:i.format)==null?void 0:g.parse)===null&&(o.parseNothing=!0),t=ic.makeExplicit(t,e,o)??t,t=new Pb(t);const a=e.parent&&hC(e.parent);(_o(e)||nh(e))&&a&&(t=Km.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=XLt(t,e,o));const u=zMt(e),l=UMt(e);t=ic.makeWithAncestors(t,{},{...u,...l},o)??t,_o(e)&&(t=tS.parseAll(t,e),t=H4.parseAll(t,e)),(_o(e)||nh(e))&&(a||(t=Km.makeFromEncoding(t,e)??t),t=Gm.makeFromEncoding(t,e)??t,t=nT.parseAllForSortIndex(t,e));const c=t=y5(So.Raw,e,t);if(_o(e)){const b=_0.makeFromEncoding(t,e);b&&(t=b,oee(e)&&(t=new Pb(t))),t=z_.makeFromEncoding(t,e)??t,t=s1.makeFromEncoding(t,e)??t}let f,d;if(_o(e)){const{markDef:b,mark:y,config:x}=e,w=ps("invalid",b,x),{marks:T,scales:A}=d=EIe({invalid:w,isPath:fx(y)});T!==A&&A==="include-invalid-values"&&(f=t=y5(So.PreFilterInvalid,e,t)),T==="exclude-invalid-values"&&(t=sT.make(t,e,d)??t)}const h=t=y5(So.Main,e,t);let p;if(_o(e)&&d){const{marks:b,scales:y}=d;b==="include-invalid-values"&&y==="exclude-invalid-values"&&(t=sT.make(t,e,d)??t,p=t=y5(So.PostFilterInvalid,e,t))}_o(e)&&F9t(e,h);let m=null;if(nh(e)){const b=e.getName("facet");t=YLt(t,e.facet)??t,m=new fC(t,e,b,h.getSource()),n[b]=m}return{...e.component.data,outputNodes:n,outputNodeRefCounts:r,raw:c,main:h,facetRoot:m,ancestorParse:o,preFilterInvalid:f,postFilterInvalid:p}}function y5(e,t,n){const{outputNodes:r,outputNodeRefCounts:i}=t.component.data,s=t.getDataName(e),o=new td(n,s,e,i);return r[s]=o,o}class QLt extends yee{constructor(t,n,r,i){var s,o,a,u;super(t,"concat",n,r,i,t.resolve),(((o=(s=t.resolve)==null?void 0:s.axis)==null?void 0:o.x)==="shared"||((u=(a=t.resolve)==null?void 0:a.axis)==null?void 0:u.y)==="shared")&&qt(r8t),this.children=this.getChildren(t).map((l,c)=>Eee(l,this,this.getName(`concat_${c}`),void 0,i))}parseData(){this.component.data=a7(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of $t(t.component.selection))this.component.selection[n]=t.component.selection[n]}Object.values(this.component.selection).some(t=>Ym(t))&&yZ(gZ)}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return zL(t)?t.vconcat:JZ(t)?t.hconcat:t.concat}parseLayoutSize(){qLt(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=lee(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...r?{style:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function JLt(e){return e===!1||e===null}const ZLt={disable:1,gridScale:1,scale:1,...$Re,labelExpr:1,encode:1},M6e=$t(ZLt);class bee extends U1{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new bee(ur(this.explicit),ur(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!JLt(this.get(t))}hasOrientSignalRef(){return In(this.explicit.orient)}}function e7t(e,t,n){const{encoding:r,config:i}=e,s=du(r[t])??du(r[Og(t)]),o=e.axis(t)||{},{format:a,formatType:u}=o;if(pw(u))return{text:m0({fieldOrDatumDef:s,field:"datum.value",format:a,formatType:u,config:i}),...n};if(a===void 0&&u===void 0&&i.customFormatTypes){if(QS(s)==="quantitative"){if(JS(s)&&s.stack==="normalize"&&i.normalizedNumberFormatType)return{text:m0({fieldOrDatumDef:s,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i}),...n};if(i.numberFormatType)return{text:m0({fieldOrDatumDef:s,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i}),...n}}if(QS(s)==="temporal"&&i.timeFormatType&&Kt(s)&&!s.timeUnit)return{text:m0({fieldOrDatumDef:s,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i}),...n}}return n}function t7t(e){return B1.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[u7t(n,e)]),t),{})}const n7t={bottom:"top",top:"bottom",left:"right",right:"left"};function r7t(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const i of e.children){i.parseAxesAndHeaders();for(const s of $t(i.component.axes))n.axis[s]=cee(e.component.resolve,s),n.axis[s]==="shared"&&(t[s]=i7t(t[s],i.component.axes[s]),t[s]||(n.axis[s]="independent",delete t[s]))}for(const i of B1){for(const s of e.children)if(s.component.axes[i]){if(n.axis[i]==="independent"){t[i]=(t[i]??[]).concat(s.component.axes[i]);for(const o of s.component.axes[i]){const{value:a,explicit:u}=o.getWithExplicit("orient");if(!In(a)){if(r[a]>0&&!u){const l=n7t[a];r[a]>r[l]&&o.set("orient",l,!1)}r[a]++}}}delete s.component.axes[i]}if(n.axis[i]==="independent"&&t[i]&&t[i].length>1)for(const[s,o]of(t[i]||[]).entries())s>0&&o.get("grid")&&!o.explicit.grid&&(o.implicit.grid=!1)}}function i7t(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],s=t[r];if(!!i!=!!s)return;if(i&&s){const o=i.getWithExplicit("orient"),a=s.getWithExplicit("orient");if(o.explicit&&a.explicit&&o.value!==a.value)return;e[r]=s7t(i,s)}}}else return t.map(n=>n.clone());return e}function s7t(e,t){for(const n of M6e){const r=Ib(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,s)=>{switch(n){case"title":return z4e(i,s);case"gridScale":return{explicit:i.explicit,value:ba(i.value,s.value)}}return HL(i,s,n,"axis")});e.setWithExplicit(n,r)}return e}function o7t(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(In(n.labelAngle)?n.labelAngle:U4(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===e6e(r,i))return!0}return e===n[t]}const a7t=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function u7t(e,t){var b,y;let n=t.axis(e);const r=new bee,i=du(t.encoding[e]),{mark:s,config:o}=t,a=(n==null?void 0:n.orient)||((b=o[e==="x"?"axisX":"axisY"])==null?void 0:b.orient)||((y=o.axis)==null?void 0:y.orient)||G9t(e),u=t.getScaleComponent(e).get("type"),l=j9t(e,u,a,t.config),c=n!==void 0?!n:SH("disable",o.style,n==null?void 0:n.style,l).configValue;if(r.set("disable",c,n!==void 0),c)return r;n=n||{};const f=H9t(i,n,e,o.style,l),d=SRe(n.formatType,i,u),h=ERe(i,i.type,n.format,n.formatType,o,!0),p={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:u,orient:a,labelAngle:f,format:h,formatType:d,mark:s,config:o};for(const x of M6e){const w=x in ahe?ahe[x](p):Ode(x)?n[x]:void 0,T=w!==void 0,A=o7t(w,x,n,t,e);if(T&&A)r.set(x,w,A);else{const{configValue:k=void 0,configFrom:I=void 0}=Ode(x)&&x!=="values"?SH(x,o.style,n.style,l):{},O=k!==void 0;T&&!O?r.set(x,w,A):(I!=="vgAxisConfig"||a7t.has(x)&&O||EI(k)||In(k))&&r.set(x,k,!1)}}const m=n.encoding??{},g=FRe.reduce((x,w)=>{if(!r.hasAxisPart(w))return x;const T=o6e(m[w]??{},t),A=w==="labels"?e7t(t,e,T):T;return A!==void 0&&!ms(A)&&(x[w]={update:A}),x},{});return ms(g)||r.set("encode",g,!!n.encoding||n.labelAngle!==void 0),r}function l7t({encoding:e,size:t}){for(const n of B1){const r=ud(n);gg(t[r])&&Wv(e[n])&&(delete t[r],qt(G4e(r)))}return t}const c7t={vgMark:"arc",encodeEntry:e=>({...mp(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...tf("x",e,{defaultPos:"mid"}),...tf("y",e,{defaultPos:"mid"}),...E1(e,"radius"),...E1(e,"theta")})},f7t={vgMark:"area",encodeEntry:e=>({...mp(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...fO("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...fO("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...see(e)})},d7t={vgMark:"rect",encodeEntry:e=>({...mp(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...E1(e,"x"),...E1(e,"y")})},h7t={vgMark:"shape",encodeEntry:e=>({...mp(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&Kt(n)&&n.type===uC?{field:tn(n,{expr:"datum"})}:{}}]}},p7t={vgMark:"image",encodeEntry:e=>({...mp(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...E1(e,"x"),...E1(e,"y"),...ree(e,"url")})},m7t={vgMark:"line",encodeEntry:e=>({...mp(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...tf("x",e,{defaultPos:"mid"}),...tf("y",e,{defaultPos:"mid"}),...yl("size",e,{vgChannel:"strokeWidth"}),...see(e)})},g7t={vgMark:"trail",encodeEntry:e=>({...mp(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...tf("x",e,{defaultPos:"mid"}),...tf("y",e,{defaultPos:"mid"}),...yl("size",e),...see(e)})};function xee(e,t){const{config:n}=e;return{...mp(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...tf("x",e,{defaultPos:"mid"}),...tf("y",e,{defaultPos:"mid"}),...yl("size",e),...yl("angle",e),...y7t(e,n,t)}}function y7t(e,t,n){return n?{shape:{value:n}}:yl("shape",e)}const v7t={vgMark:"symbol",encodeEntry:e=>xee(e)},b7t={vgMark:"symbol",encodeEntry:e=>xee(e,"circle")},x7t={vgMark:"symbol",encodeEntry:e=>xee(e,"square")},_7t={vgMark:"rect",encodeEntry:e=>({...mp(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...E1(e,"x"),...E1(e,"y")})},w7t={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...mp(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...fO("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...fO("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...yl("size",e,{vgChannel:"strokeWidth"})}}},E7t={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...mp(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...tf("x",e,{defaultPos:"mid"}),...tf("y",e,{defaultPos:"mid"}),...ree(e),...yl("size",e,{vgChannel:"fontSize"}),...yl("angle",e),...rhe("align",S7t(e.markDef,n,t)),...rhe("baseline",T7t(e.markDef,n,t)),...tf("radius",e,{defaultPos:null}),...tf("theta",e,{defaultPos:null})}}};function S7t(e,t,n){if(ps("align",e,n)===void 0)return"center"}function T7t(e,t,n){if(ps("baseline",e,n)===void 0)return"middle"}const C7t={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"x":"y",s=r==="horizontal"?"y":"x",o=r==="horizontal"?"height":"width";return{...mp(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...E1(e,i),...tf(s,e,{defaultPos:"mid",vgChannel:s==="y"?"yc":"xc"}),[o]:Qs(ps("thickness",n,t))}}},v5={arc:c7t,area:f7t,bar:d7t,circle:b7t,geoshape:h7t,image:p7t,line:m7t,point:v7t,rect:_7t,rule:w7t,square:x7t,text:E7t,tick:C7t,trail:g7t};function A7t(e){if(Gr([DL,PL,DNt],e.mark)){const t=HRe(e.mark,e.encoding);if(t.length>0)return k7t(e,t)}else if(e.mark===NL){const t=uH.some(n=>ps(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return R7t(e)}return _ee(e)}const Ehe="faceted_path_";function k7t(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:Ehe+e.requestDataName(So.Main),data:e.requestDataName(So.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:_ee(e,{fromPrefix:Ehe})}]}const She="stack_group_";function R7t(e){var l;const[t]=_ee(e,{fromPrefix:She}),n=e.scaleName(e.stack.fieldChannel),r=(c={})=>e.vgField(e.stack.fieldChannel,c),i=(c,f)=>{const d=[r({prefix:"min",suffix:"start",expr:f}),r({prefix:"max",suffix:"start",expr:f}),r({prefix:"min",suffix:"end",expr:f}),r({prefix:"max",suffix:"end",expr:f})];return`${c}(${d.map(h=>`scale('${n}',${h})`).join(",")})`};let s,o;e.stack.fieldChannel==="x"?(s={...qS(t.encode.update,["y","yc","y2","height",...uH]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},o={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...ed(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(s={...qS(t.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},o={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...ed(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const c of uH){const f=pg(c,e.markDef,e.config);t.encode.update[c]?(s[c]=t.encode.update[c],delete t.encode.update[c]):f&&(s[c]=Qs(f)),f&&(t.encode.update[c]={value:0})}const a=[];if(((l=e.stack.groupbyChannels)==null?void 0:l.length)>0)for(const c of e.stack.groupbyChannels){const f=e.fieldDef(c),d=tn(f);d&&a.push(d),(f!=null&&f.bin||f!=null&&f.timeUnit)&&a.push(tn(f,{binSuffix:"end"}))}return s=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((c,f)=>{if(t.encode.update[f])return{...c,[f]:t.encode.update[f]};{const d=pg(f,e.markDef,e.config);return d!==void 0?{...c,[f]:Qs(d)}:c}},s),s.stroke&&(s.strokeForeground={value:!0},s.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(So.Main),name:She+e.requestDataName(So.Main),groupby:a,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:s},marks:[{type:"group",encode:{update:o},marks:[t]}]}]}function I7t(e){const{encoding:t,stack:n,mark:r,markDef:i,config:s}=e,o=t.order;if(!(!xt(o)&&P0(o)&&oH(o.value)||!o&&oH(ps("order",i,s)))){if((xt(o)||Kt(o))&&!n)return B4e(o,{expr:"datum"});if(fx(r)){const a=i.orient==="horizontal"?"y":"x",u=t[a];if(Kt(u))return{field:a}}}}function _ee(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:s}=e,o=ba(r.clip,P7t(e),N7t(e)),a=F4e(r),u=i.key,l=I7t(e),c=D7t(e),f=ps("aria",r,s),d=v5[n].postEncodingTransform?v5[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:v5[n].vgMark,...o?{clip:o}:{},style:a,...u?{key:u.field}:{},...l?{sort:l}:{},...c||{},...f===!1?{aria:f}:{},from:{data:t.fromPrefix+e.requestDataName(So.Main)},encode:{update:v5[n].encodeEntry(e)},...d?{transform:d}:{}}]}function P7t(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function N7t(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function D7t(e){if(!e.component.selection)return null;const t=$t(e.component.selection).length;let n=t,r=e.parent;for(;r&&n===0;)n=$t(r.component.selection).length,r=r.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class L6e extends P6e{constructor(t,n,r,i={},s){super(t,"unit",n,r,s,void 0,Lde(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[],this.correctDataNames=l=>{var c,f,d;return(c=l.from)!=null&&c.data&&(l.from.data=this.lookupDataSource(l.from.data),"time"in this.encoding&&(l.from.data=l.from.data+TIe)),(d=(f=l.from)==null?void 0:f.facet)!=null&&d.data&&(l.from.facet.data=this.lookupDataSource(l.from.facet.data)),l};const o=mg(t.mark)?{...t.mark}:{type:t.mark},a=o.type;o.filled===void 0&&(o.filled=gOt(o,s,{graticule:t.data&&tee(t.data)}));const u=this.encoding=xDt(t.encoding||{},a,o.filled,s);this.markDef=fIe(o,u,s),this.size=l7t({encoding:u,size:Lde(t)?{...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:i}),this.stack=cIe(this.markDef,u),this.specifiedScales=this.initScales(a,u),this.specifiedAxes=this.initAxes(u),this.specifiedLegends=this.initLegends(u),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(l=>XZ(l))}get hasProjection(){const{encoding:t}=this,n=this.mark===gRe,r=t&&dPt.some(i=>gr(t[i]));return n||r}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return dZ.reduce((r,i)=>{const s=du(n[i]);return s&&(r[i]=this.initScale(s.scale??{})),r},{})}initScale(t){const{domain:n,range:r}=t,i=hl(t);return xt(n)&&(i.domain=n.map(Vd)),xt(r)&&(i.range=r.map(Vd)),i}initAxes(t){return B1.reduce((n,r)=>{const i=t[r];if(gr(i)||r===ho&&gr(t.x2)||r===qu&&gr(t.y2)){const s=gr(i)?i.axis:void 0;n[r]=s&&this.initAxis({...s})}return n},{})}initAxis(t){const n=$t(t),r={};for(const i of n){const s=t[i];r[i]=EI(s)?L4e(s):Vd(s)}return r}initLegends(t){return EPt.reduce((n,r)=>{const i=du(t[r]);if(i&&TPt(r)){const s=i.legend;n[r]=s&&hl(s)}return n},{})}parseData(){this.component.data=a7(this)}parseLayoutSize(){WLt(this)}parseSelections(){this.component.selection=L9t(this,this.selection)}parseMarkGroup(){this.component.mark=A7t(this)}parseAxesAndHeaders(){this.component.axes=t7t(this)}assembleSelectionTopLevelSignals(t){return l9t(this,t)}assembleSignals(){return[...QIe(this),...a9t(this,[])]}assembleSelectionData(t){return c9t(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return lee(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!hC(this.parent))&&(t=RIe(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return j_(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return N0(n)}typedFieldDef(t){const n=this.fieldDef(t);return uf(n)?n:null}}class wee extends yee{constructor(t,n,r,i,s){super(t,"layer",n,r,s,t.resolve,t.view);const o={...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((a,u)=>{if(VL(a))return new wee(a,this,this.getName(`layer_${u}`),o,s);if(j1(a))return new L6e(a,this,this.getName(`layer_${u}`),o,s);throw new Error(pZ(a))})}parseData(){this.component.data=a7(this);for(const t of this.children)t.parseData()}parseLayoutSize(){HLt(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of $t(t.component.selection))this.component.selection[n]=t.component.selection[n]}Object.values(this.component.selection).some(t=>Ym(t))&&yZ(gZ)}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){r7t(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),QIe(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),lee(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const r of this.children)for(const i of ln(r.assembleGroupStyle()))t.add(i);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return f9t(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),p6e(this))}}function Eee(e,t,n,r,i){if(LL(e))return new Fk(e,t,n,i);if(VL(e))return new wee(e,t,n,r,i);if(j1(e))return new L6e(e,t,n,r,i);if(HDt(e))return new QLt(e,t,n,i);throw new Error(pZ(e))}function O7t(e,t={}){t.logger&&G8t(t.logger),t.fieldTitle&&ORe(t.fieldTitle);try{const n=lIe(KT(t.config,e.config)),r=vIe(e,n),i=Eee(r,null,"",void 0,n);return i.parse(),iLt(i.component.data,i),{spec:L7t(i,M7t(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&Y8t(),t.fieldTitle&&fDt()}}function M7t(e,t,n,r){const i=r.component.layoutSize.get("width"),s=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):cn(t)&&(t={type:t}),i&&s&&QOt(t.type)){if(i==="step"&&s==="step")qt(xde()),t.type="pad";else if(i==="step"||s==="step"){const o=i==="step"?"width":"height";qt(xde(TL(o)));const a=o==="width"?"height":"width";t.type=JOt(a)}}return{...$t(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...Yde(n,!1),...Yde(e,!0)}}function L7t(e,t,n={},r){const i=e.config?iOt(e.config):void 0,s=jLt(e.component.data,n),o=e.assembleSelectionData(s),a=e.assembleProjections(),u=e.assembleTitle(),l=e.assembleGroupStyle(),c=e.assembleGroupEncodeEntry(!0);let f=e.assembleLayoutSignals();f=f.filter(p=>(p.name==="width"||p.name==="height")&&p.value!==void 0?(t[p.name]=+p.value,!1):!0);const{params:d,...h}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...h,...u?{title:u}:{},...l?{style:l}:{},...c?{encode:{update:c}}:{},data:o,...a.length>0?{projections:a}:{},...e.assembleGroup([...f,...e.assembleSelectionTopLevelSignals([]),...sIe(d)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}const F7t=oPt.version,$7t=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:GS,accessPathWithDatum:iZ,accessWithDatumToUnescapedPath:ss,compile:O7t,contains:Gr,deepEqual:Kd,deleteNestedProperty:tO,duplicate:ur,entries:Ab,every:tZ,fieldIntersection:rZ,flatAccessWithDatum:y4e,getFirstDefined:ba,hasIntersection:nZ,hasProperty:zt,hash:ii,internalField:x4e,isBoolean:j4,isEmpty:ms,isEqual:uPt,isInternalField:_4e,isNullOrFalse:oH,isNumeric:bL,keys:$t,logicalExpr:Mk,mergeDeep:m4e,never:p4e,normalize:vIe,normalizeAngle:U4,omit:ed,pick:qS,prefixGenerator:aH,removePathFromField:oC,replaceAll:uw,replacePathInField:rp,resetIdCounter:cPt,setEqual:g4e,some:WS,stringify:gs,titleCase:dI,unique:Fm,uniqueId:b4e,vals:El,varName:lo,version:F7t},Symbol.toStringTag,{value:"Module"}));function F6e(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var B7t="vega-themes",j7t="2.15.0",U7t="Themes for stylized Vega and Vega-Lite visualizations.",z7t=["vega","vega-lite","themes","style"],V7t="BSD-3-Clause",H7t={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},q7t=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],W7t="build/vega-themes.js",See="build/vega-themes.module.js",G7t="build/vega-themes.min.js",Y7t="build/vega-themes.min.js",K7t="build/vega-themes.module.d.ts",X7t={type:"git",url:"https://github.com/vega/vega-themes.git"},Q7t=["src","build"],J7t={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},Z7t={"@babel/core":"^7.24.6","@babel/plugin-transform-runtime":"^7.24.6","@babel/preset-env":"^7.24.6","@babel/preset-typescript":"^7.24.6","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@typescript-eslint/eslint-plugin":"^7.11.0","@typescript-eslint/parser":"^7.11.0","browser-sync":"^3.0.2",concurrently:"^8.2.2",eslint:"^8.45.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.1.3","gh-pages":"^6.1.1",prettier:"^3.2.5","release-it":"^17.3.0",rollup:"^4.18.0","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.5",typescript:"^5.4.5",vega:"^5.25.0","vega-lite":"^5.9.3"},eFt={vega:"*","vega-lite":"*"},tFt={},nFt={name:B7t,version:j7t,description:U7t,keywords:z7t,license:V7t,author:H7t,contributors:q7t,main:W7t,module:See,unpkg:G7t,jsdelivr:Y7t,types:K7t,repository:X7t,files:Q7t,scripts:J7t,devDependencies:Z7t,peerDependencies:eFt,dependencies:tFt};const aE="#fff",The="#888",rFt={background:"#333",view:{stroke:The},title:{color:aE,subtitleColor:aE},style:{"guide-label":{fill:aE},"guide-title":{fill:aE}},axis:{domainColor:aE,gridColor:The,tickColor:aE}},Hx="#4572a7",iFt={background:"#fff",arc:{fill:Hx},area:{fill:Hx},line:{stroke:Hx,strokeWidth:2},path:{stroke:Hx},rect:{fill:Hx},shape:{stroke:Hx},symbol:{fill:Hx,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},qx="#30a2da",aj="#cbcbcb",sFt="#999",oFt="#333",Che="#f0f0f0",Ahe="#333",aFt={arc:{fill:qx},area:{fill:qx},axis:{domainColor:aj,grid:!0,gridColor:aj,gridWidth:1,labelColor:sFt,labelFontSize:10,titleColor:oFt,tickColor:aj,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:Che,group:{fill:Che},legend:{labelColor:Ahe,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:Ahe,titleFontSize:14,titlePadding:10},line:{stroke:qx,strokeWidth:2},path:{stroke:qx,strokeWidth:.5},rect:{fill:qx},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:qx},bar:{binSpacing:2,fill:qx,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},Wx="#000",uFt={group:{fill:"#e5e5e5"},arc:{fill:Wx},area:{fill:Wx},line:{stroke:Wx},path:{stroke:Wx},rect:{fill:Wx},shape:{stroke:Wx},symbol:{fill:Wx,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},lFt=22,cFt="normal",khe="Benton Gothic, sans-serif",Rhe=11.5,fFt="normal",Gx="#82c6df",uj="Benton Gothic Bold, sans-serif",Ihe="normal",Phe=13,c3={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},dFt={background:"#ffffff",title:{anchor:"start",color:"#000000",font:uj,fontSize:lFt,fontWeight:cFt},arc:{fill:Gx},area:{fill:Gx},line:{stroke:Gx,strokeWidth:2},path:{stroke:Gx},rect:{fill:Gx},shape:{stroke:Gx},symbol:{fill:Gx,size:30},axis:{labelFont:khe,labelFontSize:Rhe,labelFontWeight:fFt,titleFont:uj,titleFontSize:Phe,titleFontWeight:Ihe},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:khe,labelFontSize:Rhe,symbolType:"square",titleFont:uj,titleFontSize:Phe,titleFontWeight:Ihe},range:{category:c3["category-6"],diverging:c3["fireandice-6"],heatmap:c3["fire-7"],ordinal:c3["fire-7"],ramp:c3["fire-7"]}},Yx="#ab5787",b5="#979797",hFt={background:"#f9f9f9",arc:{fill:Yx},area:{fill:Yx},line:{stroke:Yx},path:{stroke:Yx},rect:{fill:Yx},shape:{stroke:Yx},symbol:{fill:Yx,size:30},axis:{domainColor:b5,domainWidth:.5,gridWidth:.2,labelColor:b5,tickColor:b5,tickWidth:.2,titleColor:b5},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},Kx="#3e5c69",pFt={background:"#fff",arc:{fill:Kx},area:{fill:Kx},line:{stroke:Kx},path:{stroke:Kx},rect:{fill:Kx},shape:{stroke:Kx},symbol:{fill:Kx},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},jh="#1696d2",Nhe="#000000",mFt="#FFFFFF",x5="Lato",lj="Lato",gFt="Lato",yFt="#DEDDDD",vFt=18,f3={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},bFt={background:mFt,title:{anchor:"start",fontSize:vFt,font:x5},axisX:{domain:!0,domainColor:Nhe,domainWidth:1,grid:!1,labelFontSize:12,labelFont:lj,labelAngle:0,tickColor:Nhe,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:x5},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:yFt,gridWidth:1,labelFontSize:12,labelFont:lj,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:x5,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:lj,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:x5,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:f3["six-groups-cat-1"],diverging:f3["diverging-colors"],heatmap:f3["diverging-colors"],ordinal:f3["six-groups-seq"],ramp:f3["shades-blue"]},area:{fill:jh},rect:{fill:jh},line:{color:jh,stroke:jh,strokeWidth:5},trail:{color:jh,stroke:jh,strokeWidth:0,size:1},path:{stroke:jh,strokeWidth:.5},point:{filled:!0},text:{font:gFt,color:jh,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:jh,stroke:null}},arc:{fill:jh},shape:{stroke:jh},symbol:{fill:jh,size:30}},Xx="#3366CC",Dhe="#ccc",_5="Arial, sans-serif",xFt={arc:{fill:Xx},area:{fill:Xx},path:{stroke:Xx},rect:{fill:Xx},shape:{stroke:Xx},symbol:{stroke:Xx},circle:{fill:Xx},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:_5,fontSize:12},"guide-title":{font:_5,fontSize:12},"group-title":{font:_5,fontSize:12}},title:{font:_5,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:Dhe,tickColor:Dhe,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},Tee=e=>e*(1/3+1),Ohe=Tee(9),Mhe=Tee(10),Lhe=Tee(12),d3="Segoe UI",Fhe="wf_standard-font, helvetica, arial, sans-serif",$he="#252423",h3="#605E5C",Bhe="transparent",_Ft="#C8C6C4",Qp="#118DFF",wFt="#12239E",EFt="#E66C37",SFt="#6B007B",TFt="#E044A7",CFt="#744EC2",AFt="#D9B300",kFt="#D64550",$6e=Qp,B6e="#DEEFFF",jhe=[B6e,$6e],RFt=[B6e,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",$6e],IFt={view:{stroke:Bhe},background:Bhe,font:d3,header:{titleFont:Fhe,titleFontSize:Lhe,titleColor:$he,labelFont:d3,labelFontSize:Mhe,labelColor:h3},axis:{ticks:!1,grid:!1,domain:!1,labelColor:h3,labelFontSize:Ohe,titleFont:Fhe,titleColor:$he,titleFontSize:Lhe,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:_Ft,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:Qp},line:{stroke:Qp,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:d3,fontSize:Ohe,fill:h3},arc:{fill:Qp},area:{fill:Qp,line:!0,opacity:.6},path:{stroke:Qp},rect:{fill:Qp},point:{fill:Qp,filled:!0,size:75},shape:{stroke:Qp},symbol:{fill:Qp,strokeWidth:1.5,size:50},legend:{titleFont:d3,titleFontWeight:"bold",titleColor:h3,labelFont:d3,labelFontSize:Mhe,labelColor:h3,symbolType:"circle",symbolSize:75},range:{category:[Qp,wFt,EFt,SFt,TFt,CFt,AFt,kFt],diverging:jhe,heatmap:jhe,ordinal:RFt}},cj='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',PFt='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',fj=400,w5={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},NFt=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],DFt=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function u7({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",r=w5.gridBg[e],i=w5.textPrimary[e],s=w5.textSecondary[e],o=n==="dark"?NFt:DFt,a=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:a},area:{fill:a},path:{stroke:a},rect:{fill:a},shape:{stroke:a},symbol:{stroke:a},circle:{fill:a},view:{fill:r,stroke:r},group:{fill:r},title:{color:i,anchor:"start",dy:-15,fontSize:16,font:cj,fontWeight:600},axis:{labelColor:s,labelFontSize:12,labelFont:PFt,labelFontWeight:fj,titleColor:i,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:w5.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:cj,fill:s,fontWeight:fj},"guide-title":{font:cj,fill:s,fontWeight:fj}},range:{category:o,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const OFt=u7({theme:"white",background:"#ffffff"}),MFt=u7({theme:"g10",background:"#f4f4f4"}),LFt=u7({theme:"g90",background:"#262626"}),FFt=u7({theme:"g100",background:"#161616"}),$Ft=nFt.version,BFt=Object.freeze(Object.defineProperty({__proto__:null,carbong10:MFt,carbong100:FFt,carbong90:LFt,carbonwhite:OFt,dark:rFt,excel:iFt,fivethirtyeight:aFt,ggplot2:uFt,googlecharts:xFt,latimes:dFt,powerbi:IFt,quartz:hFt,urbaninstitute:bFt,version:$Ft,vox:pFt},Symbol.toStringTag,{value:"Module"}));function jFt(e,t,n,r){if(xt(e))return`[${e.map(i=>t(cn(i)?i:Uhe(i,n))).join(", ")}]`;if(un(e)){let i="";const{title:s,image:o,...a}=e;s&&(i+=`<h2>${t(s)}</h2>`),o&&(i+=`<img src="${new URL(t(o),r||location.href).href}">`);const u=Object.keys(a);if(u.length>0){i+="<table>";for(const l of u){let c=a[l];c!==void 0&&(un(c)&&(c=Uhe(c,n)),i+=`<tr><td class="key">${t(l)}</td><td class="value">${t(c)}</td></tr>`)}i+="</table>"}return i||"{}"}return t(e)}function UFt(e){const t=[];return function(n,r){if(typeof r!="object"||r===null)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function Uhe(e,t){return JSON.stringify(e,UFt(t))}var zFt=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const j6e="vg-tooltip-element",VFt={offsetX:10,offsetY:10,id:j6e,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:HFt,maxDepth:2,formatTooltip:jFt,baseURL:""};function HFt(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function qFt(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return zFt.toString().replace(j6e,e)}function WFt(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let s=e.clientY+r;return s+t.height>window.innerHeight&&(s=+e.clientY-r-t.height),{x:i,y:s}}class GFt{constructor(t){this.options={...VFt,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=qFt(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:s,y:o}=WFt(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${o}px`,this.el.style.left=`${s}px`}}var dj={};function YFt(e){return e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var hj,zhe;function KFt(){return zhe||(zhe=1,hj=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),hj}var XFt=Pi;Pi.Node=vw;Pi.create=Pi;function Pi(e){var t=this;if(t instanceof Pi||(t=new Pi),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(i){t.push(i)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)t.push(arguments[n]);return t}Pi.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t};Pi.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};Pi.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};Pi.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)JFt(this,arguments[e]);return this.length};Pi.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)ZFt(this,arguments[e]);return this.length};Pi.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};Pi.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};Pi.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;n!==null;r++)e.call(t,n.value,r,this),n=n.next};Pi.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;n!==null;r--)e.call(t,n.value,r,this),n=n.prev};Pi.prototype.get=function(e){for(var t=0,n=this.head;n!==null&&t<e;t++)n=n.next;if(t===e&&n!==null)return n.value};Pi.prototype.getReverse=function(e){for(var t=0,n=this.tail;n!==null&&t<e;t++)n=n.prev;if(t===e&&n!==null)return n.value};Pi.prototype.map=function(e,t){t=t||this;for(var n=new Pi,r=this.head;r!==null;)n.push(e.call(t,r.value,this)),r=r.next;return n};Pi.prototype.mapReverse=function(e,t){t=t||this;for(var n=new Pi,r=this.tail;r!==null;)n.push(e.call(t,r.value,this)),r=r.prev;return n};Pi.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;r!==null;i++)n=e(n,r.value,i),r=r.next;return n};Pi.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;r!==null;i--)n=e(n,r.value,i),r=r.prev;return n};Pi.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;n!==null;t++)e[t]=n.value,n=n.next;return e};Pi.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;n!==null;t++)e[t]=n.value,n=n.prev;return e};Pi.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new Pi;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(;i!==null&&r<t;r++,i=i.next)n.push(i.value);return n};Pi.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new Pi;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,i=this.tail;i!==null&&r>t;r--)i=i.prev;for(;i!==null&&r>e;r--,i=i.prev)n.push(i.value);return n};Pi.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(var s=[],r=0;i&&r<t;r++)s.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var r=0;r<n.length;r++)i=QFt(this,i,n[r]);return s};Pi.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};function QFt(e,t,n){var r=t===e.head?new vw(n,null,t,e):new vw(n,t,t.next,e);return r.next===null&&(e.tail=r),r.prev===null&&(e.head=r),e.length++,r}function JFt(e,t){e.tail=new vw(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function ZFt(e,t){e.head=new vw(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function vw(e,t,n,r){if(!(this instanceof vw))return new vw(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{KFt()(Pi)}catch{}const e$t=XFt,v_=Symbol("max"),Py=Symbol("length"),uE=Symbol("lengthCalculator"),$k=Symbol("allowStale"),k_=Symbol("maxAge"),ky=Symbol("dispose"),Vhe=Symbol("noDisposeOnSet"),Ru=Symbol("lruList"),Jp=Symbol("cache"),U6e=Symbol("updateAgeOnGet"),pj=()=>1;class t$t{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[v_]=t.max||1/0;const n=t.length||pj;if(this[uE]=typeof n!="function"?pj:n,this[$k]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[k_]=t.maxAge||0,this[ky]=t.dispose,this[Vhe]=t.noDisposeOnSet||!1,this[U6e]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[v_]=t||1/0,p3(this)}get max(){return this[v_]}set allowStale(t){this[$k]=!!t}get allowStale(){return this[$k]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[k_]=t,p3(this)}get maxAge(){return this[k_]}set lengthCalculator(t){typeof t!="function"&&(t=pj),t!==this[uE]&&(this[uE]=t,this[Py]=0,this[Ru].forEach(n=>{n.length=this[uE](n.value,n.key),this[Py]+=n.length})),p3(this)}get lengthCalculator(){return this[uE]}get length(){return this[Py]}get itemCount(){return this[Ru].length}rforEach(t,n){n=n||this;for(let r=this[Ru].tail;r!==null;){const i=r.prev;Hhe(this,t,r,n),r=i}}forEach(t,n){n=n||this;for(let r=this[Ru].head;r!==null;){const i=r.next;Hhe(this,t,r,n),r=i}}keys(){return this[Ru].toArray().map(t=>t.key)}values(){return this[Ru].toArray().map(t=>t.value)}reset(){this[ky]&&this[Ru]&&this[Ru].length&&this[Ru].forEach(t=>this[ky](t.key,t.value)),this[Jp]=new Map,this[Ru]=new e$t,this[Py]=0}dump(){return this[Ru].map(t=>mO(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[Ru]}set(t,n,r){if(r=r||this[k_],r&&typeof r!="number")throw new TypeError("maxAge must be a number");const i=r?Date.now():0,s=this[uE](n,t);if(this[Jp].has(t)){if(s>this[v_])return nS(this,this[Jp].get(t)),!1;const u=this[Jp].get(t).value;return this[ky]&&(this[Vhe]||this[ky](t,u.value)),u.now=i,u.maxAge=r,u.value=n,this[Py]+=s-u.length,u.length=s,this.get(t),p3(this),!0}const o=new n$t(t,n,s,i,r);return o.length>this[v_]?(this[ky]&&this[ky](t,n),!1):(this[Py]+=o.length,this[Ru].unshift(o),this[Jp].set(t,this[Ru].head),p3(this),!0)}has(t){if(!this[Jp].has(t))return!1;const n=this[Jp].get(t).value;return!mO(this,n)}get(t){return mj(this,t,!0)}peek(t){return mj(this,t,!1)}pop(){const t=this[Ru].tail;return t?(nS(this,t),t.value):null}del(t){nS(this,this[Jp].get(t))}load(t){this.reset();const n=Date.now();for(let r=t.length-1;r>=0;r--){const i=t[r],s=i.e||0;if(s===0)this.set(i.k,i.v);else{const o=s-n;o>0&&this.set(i.k,i.v,o)}}}prune(){this[Jp].forEach((t,n)=>mj(this,n,!1))}}const mj=(e,t,n)=>{const r=e[Jp].get(t);if(r){const i=r.value;if(mO(e,i)){if(nS(e,r),!e[$k])return}else n&&(e[U6e]&&(r.value.now=Date.now()),e[Ru].unshiftNode(r));return i.value}},mO=(e,t)=>{if(!t||!t.maxAge&&!e[k_])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[k_]&&n>e[k_]},p3=e=>{if(e[Py]>e[v_])for(let t=e[Ru].tail;e[Py]>e[v_]&&t!==null;){const n=t.prev;nS(e,t),t=n}},nS=(e,t)=>{if(t){const n=t.value;e[ky]&&e[ky](n.key,n.value),e[Py]-=n.length,e[Jp].delete(n.key),e[Ru].removeNode(t)}};class n$t{constructor(t,n,r,i,s){this.key=t,this.value=n,this.length=r,this.now=i,this.maxAge=s||0}}const Hhe=(e,t,n,r)=>{let i=n.value;mO(e,i)&&(nS(e,n),e[$k]||(i=void 0)),i&&t.call(r,i.value,i.key,e)};var r$t=t$t;const i$t=Object.freeze({loose:!0}),s$t=Object.freeze({}),o$t=e=>e?typeof e!="object"?i$t:e:s$t;var Cee=o$t,OH={exports:{}};const a$t="2.0.0",z6e=256,u$t=Number.MAX_SAFE_INTEGER||9007199254740991,l$t=16,c$t=z6e-6,f$t=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var Aee={MAX_LENGTH:z6e,MAX_SAFE_COMPONENT_LENGTH:l$t,MAX_SAFE_BUILD_LENGTH:c$t,MAX_SAFE_INTEGER:u$t,RELEASE_TYPES:f$t,SEMVER_SPEC_VERSION:a$t,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const d$t=typeof process=="object"&&dj&&dj.NODE_DEBUG&&/\bsemver\b/i.test(dj.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var l7=d$t;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=Aee,s=l7;t=e.exports={};const o=t.re=[],a=t.safeRe=[],u=t.src=[],l=t.t={};let c=0;const f="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",i],[f,r]],h=m=>{for(const[g,b]of d)m=m.split(`${g}*`).join(`${g}{0,${b}}`).split(`${g}+`).join(`${g}{1,${b}}`);return m},p=(m,g,b)=>{const y=h(g),x=c++;s(m,x,g),l[m]=x,u[x]=g,o[x]=new RegExp(g,b?"g":void 0),a[x]=new RegExp(y,b?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),p("MAINVERSION",`(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${u[l.NUMERICIDENTIFIER]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${u[l.NUMERICIDENTIFIERLOOSE]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${u[l.PRERELEASEIDENTIFIER]}(?:\\.${u[l.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${u[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[l.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${f}+`),p("BUILD",`(?:\\+(${u[l.BUILDIDENTIFIER]}(?:\\.${u[l.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${u[l.MAINVERSION]}${u[l.PRERELEASE]}?${u[l.BUILD]}?`),p("FULL",`^${u[l.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${u[l.MAINVERSIONLOOSE]}${u[l.PRERELEASELOOSE]}?${u[l.BUILD]}?`),p("LOOSE",`^${u[l.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${u[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${u[l.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:${u[l.PRERELEASE]})?${u[l.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:${u[l.PRERELEASELOOSE]})?${u[l.BUILD]}?)?)?`),p("XRANGE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAINLOOSE]}$`),p("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),p("COERCE",`${u[l.COERCEPLAIN]}(?:$|[^\\d])`),p("COERCEFULL",u[l.COERCEPLAIN]+`(?:${u[l.PRERELEASE]})?(?:${u[l.BUILD]})?(?:$|[^\\d])`),p("COERCERTL",u[l.COERCE],!0),p("COERCERTLFULL",u[l.COERCEFULL],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${u[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${u[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${u[l.LONECARET]}${u[l.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${u[l.LONECARET]}${u[l.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${u[l.GTLT]}\\s*(${u[l.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]}|${u[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${u[l.XRANGEPLAIN]})\\s+-\\s+(${u[l.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${u[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[l.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(OH,OH.exports);var kee=OH.exports;const qhe=/^[0-9]+$/,V6e=(e,t)=>{const n=qhe.test(e),r=qhe.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},h$t=(e,t)=>V6e(t,e);var p$t={compareIdentifiers:V6e,rcompareIdentifiers:h$t};const E5=l7,{MAX_LENGTH:Whe,MAX_SAFE_INTEGER:S5}=Aee,{safeRe:Ghe,t:Yhe}=kee,m$t=Cee,{compareIdentifiers:lE}=p$t;let g$t=class bm{constructor(t,n){if(n=m$t(n),t instanceof bm){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>Whe)throw new TypeError(`version is longer than ${Whe} characters`);E5("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=t.trim().match(n.loose?Ghe[Yhe.LOOSE]:Ghe[Yhe.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>S5||this.major<0)throw new TypeError("Invalid major version");if(this.minor>S5||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>S5||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const s=+i;if(s>=0&&s<S5)return s}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(E5("SemVer.compare",this.version,this.options,t),!(t instanceof bm)){if(typeof t=="string"&&t===this.version)return 0;t=new bm(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof bm||(t=new bm(t,this.options)),lE(this.major,t.major)||lE(this.minor,t.minor)||lE(this.patch,t.patch)}comparePre(t){if(t instanceof bm||(t=new bm(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const r=this.prerelease[n],i=t.prerelease[n];if(E5("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return lE(r,i)}while(++n)}compareBuild(t){t instanceof bm||(t=new bm(t,this.options));let n=0;do{const r=this.build[n],i=t.build[n];if(E5("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return lE(r,i)}while(++n)}inc(t,n,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(r)?1:0;if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let s=[n,i];r===!1&&(s=[n]),lE(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var Ree=g$t;const Khe=Ree,y$t=(e,t,n)=>new Khe(e,n).compare(new Khe(t,n));var pC=y$t;const v$t=pC,b$t=(e,t,n)=>v$t(e,t,n)===0;var x$t=b$t;const _$t=pC,w$t=(e,t,n)=>_$t(e,t,n)!==0;var E$t=w$t;const S$t=pC,T$t=(e,t,n)=>S$t(e,t,n)>0;var C$t=T$t;const A$t=pC,k$t=(e,t,n)=>A$t(e,t,n)>=0;var R$t=k$t;const I$t=pC,P$t=(e,t,n)=>I$t(e,t,n)<0;var N$t=P$t;const D$t=pC,O$t=(e,t,n)=>D$t(e,t,n)<=0;var M$t=O$t;const L$t=x$t,F$t=E$t,$$t=C$t,B$t=R$t,j$t=N$t,U$t=M$t,z$t=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return L$t(e,n,r);case"!=":return F$t(e,n,r);case">":return $$t(e,n,r);case">=":return B$t(e,n,r);case"<":return j$t(e,n,r);case"<=":return U$t(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};var V$t=z$t,gj,Xhe;function H$t(){if(Xhe)return gj;Xhe=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,f){if(f=n(f),c instanceof t){if(c.loose===!!f.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),o("comparator",c,f),this.options=f,this.loose=!!f.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(c){const f=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],d=c.match(f);if(!d)throw new TypeError(`Invalid comparator: ${c}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new a(d[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(o("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new a(c,this.options)}catch{return!1}return s(c,this.operator,this.semver,this.options)}intersects(c,f){if(!(c instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new u(c.value,f).test(this.value):c.operator===""?c.value===""?!0:new u(this.value,f).test(c.semver):(f=n(f),f.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||s(this.semver,"<",c.semver,f)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||s(this.semver,">",c.semver,f)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}gj=t;const n=Cee,{safeRe:r,t:i}=kee,s=V$t,o=l7,a=Ree,u=H6e();return gj}var yj,Qhe;function H6e(){if(Qhe)return yj;Qhe=1;class e{constructor(B,U){if(U=r(U),B instanceof e)return B.loose===!!U.loose&&B.includePrerelease===!!U.includePrerelease?B:new e(B.raw,U);if(B instanceof i)return this.raw=B.value,this.set=[[B]],this.format(),this;if(this.options=U,this.loose=!!U.loose,this.includePrerelease=!!U.includePrerelease,this.raw=B.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(G=>this.parseRange(G.trim())).filter(G=>G.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const G=this.set[0];if(this.set=this.set.filter(ee=>!p(ee[0])),this.set.length===0)this.set=[G];else if(this.set.length>1){for(const ee of this.set)if(ee.length===1&&m(ee[0])){this.set=[ee];break}}}this.format()}format(){return this.range=this.set.map(B=>B.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(B){const G=((this.options.includePrerelease&&d)|(this.options.loose&&h))+":"+B,ee=n.get(G);if(ee)return ee;const ne=this.options.loose,ue=ne?a[u.HYPHENRANGELOOSE]:a[u.HYPHENRANGE];B=B.replace(ue,L(this.options.includePrerelease)),s("hyphen replace",B),B=B.replace(a[u.COMPARATORTRIM],l),s("comparator trim",B),B=B.replace(a[u.TILDETRIM],c),s("tilde trim",B),B=B.replace(a[u.CARETTRIM],f),s("caret trim",B);let X=B.split(" ").map(Z=>b(Z,this.options)).join(" ").split(/\s+/).map(Z=>M(Z,this.options));ne&&(X=X.filter(Z=>(s("loose invalid filter",Z,this.options),!!Z.match(a[u.COMPARATORLOOSE])))),s("range list",X);const q=new Map,te=X.map(Z=>new i(Z,this.options));for(const Z of te){if(p(Z))return[Z];q.set(Z.value,Z)}q.size>1&&q.has("")&&q.delete("");const W=[...q.values()];return n.set(G,W),W}intersects(B,U){if(!(B instanceof e))throw new TypeError("a Range is required");return this.set.some(G=>g(G,U)&&B.set.some(ee=>g(ee,U)&&G.every(ne=>ee.every(ue=>ne.intersects(ue,U)))))}test(B){if(!B)return!1;if(typeof B=="string")try{B=new o(B,this.options)}catch{return!1}for(let U=0;U<this.set.length;U++)if(H(this.set[U],B,this.options))return!0;return!1}}yj=e;const t=r$t,n=new t({max:1e3}),r=Cee,i=H$t(),s=l7,o=Ree,{safeRe:a,t:u,comparatorTrimReplace:l,tildeTrimReplace:c,caretTrimReplace:f}=kee,{FLAG_INCLUDE_PRERELEASE:d,FLAG_LOOSE:h}=Aee,p=D=>D.value==="<0.0.0-0",m=D=>D.value==="",g=(D,B)=>{let U=!0;const G=D.slice();let ee=G.pop();for(;U&&G.length;)U=G.every(ne=>ee.intersects(ne,B)),ee=G.pop();return U},b=(D,B)=>(s("comp",D,B),D=T(D,B),s("caret",D),D=x(D,B),s("tildes",D),D=k(D,B),s("xrange",D),D=O(D,B),s("stars",D),D),y=D=>!D||D.toLowerCase()==="x"||D==="*",x=(D,B)=>D.trim().split(/\s+/).map(U=>w(U,B)).join(" "),w=(D,B)=>{const U=B.loose?a[u.TILDELOOSE]:a[u.TILDE];return D.replace(U,(G,ee,ne,ue,X)=>{s("tilde",D,G,ee,ne,ue,X);let q;return y(ee)?q="":y(ne)?q=`>=${ee}.0.0 <${+ee+1}.0.0-0`:y(ue)?q=`>=${ee}.${ne}.0 <${ee}.${+ne+1}.0-0`:X?(s("replaceTilde pr",X),q=`>=${ee}.${ne}.${ue}-${X} <${ee}.${+ne+1}.0-0`):q=`>=${ee}.${ne}.${ue} <${ee}.${+ne+1}.0-0`,s("tilde return",q),q})},T=(D,B)=>D.trim().split(/\s+/).map(U=>A(U,B)).join(" "),A=(D,B)=>{s("caret",D,B);const U=B.loose?a[u.CARETLOOSE]:a[u.CARET],G=B.includePrerelease?"-0":"";return D.replace(U,(ee,ne,ue,X,q)=>{s("caret",D,ee,ne,ue,X,q);let te;return y(ne)?te="":y(ue)?te=`>=${ne}.0.0${G} <${+ne+1}.0.0-0`:y(X)?ne==="0"?te=`>=${ne}.${ue}.0${G} <${ne}.${+ue+1}.0-0`:te=`>=${ne}.${ue}.0${G} <${+ne+1}.0.0-0`:q?(s("replaceCaret pr",q),ne==="0"?ue==="0"?te=`>=${ne}.${ue}.${X}-${q} <${ne}.${ue}.${+X+1}-0`:te=`>=${ne}.${ue}.${X}-${q} <${ne}.${+ue+1}.0-0`:te=`>=${ne}.${ue}.${X}-${q} <${+ne+1}.0.0-0`):(s("no pr"),ne==="0"?ue==="0"?te=`>=${ne}.${ue}.${X}${G} <${ne}.${ue}.${+X+1}-0`:te=`>=${ne}.${ue}.${X}${G} <${ne}.${+ue+1}.0-0`:te=`>=${ne}.${ue}.${X} <${+ne+1}.0.0-0`),s("caret return",te),te})},k=(D,B)=>(s("replaceXRanges",D,B),D.split(/\s+/).map(U=>I(U,B)).join(" ")),I=(D,B)=>{D=D.trim();const U=B.loose?a[u.XRANGELOOSE]:a[u.XRANGE];return D.replace(U,(G,ee,ne,ue,X,q)=>{s("xRange",D,G,ee,ne,ue,X,q);const te=y(ne),W=te||y(ue),Z=W||y(X),oe=Z;return ee==="="&&oe&&(ee=""),q=B.includePrerelease?"-0":"",te?ee===">"||ee==="<"?G="<0.0.0-0":G="*":ee&&oe?(W&&(ue=0),X=0,ee===">"?(ee=">=",W?(ne=+ne+1,ue=0,X=0):(ue=+ue+1,X=0)):ee==="<="&&(ee="<",W?ne=+ne+1:ue=+ue+1),ee==="<"&&(q="-0"),G=`${ee+ne}.${ue}.${X}${q}`):W?G=`>=${ne}.0.0${q} <${+ne+1}.0.0-0`:Z&&(G=`>=${ne}.${ue}.0${q} <${ne}.${+ue+1}.0-0`),s("xRange return",G),G})},O=(D,B)=>(s("replaceStars",D,B),D.trim().replace(a[u.STAR],"")),M=(D,B)=>(s("replaceGTE0",D,B),D.trim().replace(a[B.includePrerelease?u.GTE0PRE:u.GTE0],"")),L=D=>(B,U,G,ee,ne,ue,X,q,te,W,Z,oe,pe)=>(y(G)?U="":y(ee)?U=`>=${G}.0.0${D?"-0":""}`:y(ne)?U=`>=${G}.${ee}.0${D?"-0":""}`:ue?U=`>=${U}`:U=`>=${U}${D?"-0":""}`,y(te)?q="":y(W)?q=`<${+te+1}.0.0-0`:y(Z)?q=`<${te}.${+W+1}.0-0`:oe?q=`<=${te}.${W}.${Z}-${oe}`:D?q=`<${te}.${W}.${+Z+1}-0`:q=`<=${q}`,`${U} ${q}`.trim()),H=(D,B,U)=>{for(let G=0;G<D.length;G++)if(!D[G].test(B))return!1;if(B.prerelease.length&&!U.includePrerelease){for(let G=0;G<D.length;G++)if(s(D[G].semver),D[G].semver!==i.ANY&&D[G].semver.prerelease.length>0){const ee=D[G].semver;if(ee.major===B.major&&ee.minor===B.minor&&ee.patch===B.patch)return!0}return!1}return!0};return yj}const q$t=H6e(),W$t=(e,t,n)=>{try{t=new q$t(t,n)}catch{return!1}return t.test(e)};var G$t=W$t,q6e=YFt(G$t);function Y$t(e,t,n){const r=e.open(t),i=250,{origin:s}=new URL(t);let o=40;function a(l){l.source===r&&(o=0,e.removeEventListener("message",a,!1))}e.addEventListener("message",a,!1);function u(){o<=0||(r.postMessage(n,s),setTimeout(u,i),o-=1)}setTimeout(u,i)}var K$t=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function W6e(e,...t){for(const n of t)X$t(e,n);return e}function X$t(e,t){for(const n of Object.keys(t))XT(e,n,t[n],!0)}const Zp=C5t;let W4=$7t;const T5=typeof window<"u"?window:void 0;var ame;W4===void 0&&((ame=T5==null?void 0:T5.vl)!=null&&ame.compile)&&(W4=T5.vl);const Q$t={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},J$t={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},tk={vega:"Vega","vega-lite":"Vega-Lite"},gO={vega:Zp.version,"vega-lite":W4?W4.version:"not available"},Z$t={vega:e=>e,"vega-lite":(e,t)=>W4.compile(e,{config:t}).spec},eBt=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,tBt="chart-wrapper";function nBt(e){return typeof e=="function"}function Jhe(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,s=`</code></pre>${n}</body></html>`,o=window.open("");o.document.write(i+e+s),o.document.title=`${tk[r]} JSON Source`}function rBt(e,t){if(e.$schema){const n=F6e(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${tk[n.library]}, but mode argument sets ${tk[t]??t}.`);const r=n.library;return q6e(gO[r],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${tk[r]} ${n.version}, but the current version of ${tk[r]} is v${gO[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function G6e(e){return!!(e&&"load"in e)}function Zhe(e){return G6e(e)?e:Zp.loader(e)}function iBt(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return cn(t.defaultStyle)&&(t.defaultStyle=!1),t}async function sBt(e,t,n={}){let r,i;cn(t)?(i=Zhe(n.loader),r=JSON.parse(await i.load(t))):r=t;const s=iBt(r),o=s.loader;(!i||o)&&(i=Zhe(n.loader??o));const a=await epe(s,i),u=await epe(n,i),l={...W6e(u,a),config:KT(u.config??{},a.config??{})};return await aBt(e,r,l,i)}async function epe(e,t){const n=cn(e.config)?JSON.parse(await t.load(e.config)):e.config??{},r=cn(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...r?{patch:r}:{},...n?{config:n}:{}}}function oBt(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function aBt(e,t,n={},r){const i=n.theme?KT(BFt[n.theme],n.config??{}):n.config,s=tx(n.actions)?n.actions:W6e({},Q$t,n.actions??{}),o={...J$t,...n.i18n},a=n.renderer??"canvas",u=n.logLevel??Zp.Warn,l=n.downloadFileName??"visualization",c=typeof e=="string"?document.querySelector(e):e;if(!c)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const T="vega-embed-style",{root:A,rootContainer:k}=oBt(c);if(!A.getElementById(T)){const I=document.createElement("style");I.id=T,I.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?K$t.toString():n.defaultStyle,k.appendChild(I)}}const f=rBt(t,n.mode);let d=Z$t[f](t,i);if(f==="vega-lite"&&d.$schema){const T=F6e(d.$schema);q6e(gO.vega,`^${T.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${T.version}, but current version is v${gO.vega}.`)}c.classList.add("vega-embed"),s&&c.classList.add("has-actions"),c.innerHTML="";let h=c;if(s){const T=document.createElement("div");T.classList.add(tBt),c.appendChild(T),h=T}const p=n.patch;if(p&&(d=p instanceof Function?p(d):SM(d,p,!0,!1).newDocument),n.formatLocale&&Zp.formatLocale(n.formatLocale),n.timeFormatLocale&&Zp.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const T in n.expressionFunctions){const A=n.expressionFunctions[T];"fn"in A?Zp.expressionFunction(T,A.fn,A.visitor):A instanceof Function&&Zp.expressionFunction(T,A)}const{ast:m}=n,g=Zp.parse(d,f==="vega-lite"?{}:i,{ast:m}),b=new(n.viewClass||Zp.View)(g,{loader:r,logLevel:u,renderer:a,...m?{expr:Zp.expressionInterpreter??n.expr??L5t}:{}});if(b.addSignalListener("autosize",(T,A)=>{const{type:k}=A;k=="fit-x"?(h.classList.add("fit-x"),h.classList.remove("fit-y")):k=="fit-y"?(h.classList.remove("fit-x"),h.classList.add("fit-y")):k=="fit"?h.classList.add("fit-x","fit-y"):h.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:T,tooltip:A}=n,k=T&&!G6e(T)?T==null?void 0:T.baseURL:void 0,I=nBt(A)?A:new GFt({baseURL:k,...A===!0?{}:A}).call;b.tooltip(I)}let{hover:y}=n;if(y===void 0&&(y=f==="vega"),y){const{hoverSet:T,updateSet:A}=typeof y=="boolean"?{}:y;b.hover(T,A)}n&&(n.width!=null&&b.width(n.width),n.height!=null&&b.height(n.height),n.padding!=null&&b.padding(n.padding)),await b.initialize(h,n.bind).runAsync();let x;if(s!==!1){let T=c;if(n.defaultStyle!==!1||n.forceActionsMenu){const k=document.createElement("details");k.title=o.CLICK_TO_VIEW_ACTIONS,c.append(k),T=k;const I=document.createElement("summary");I.innerHTML=eBt,k.append(I),x=O=>{k.contains(O.target)||k.removeAttribute("open")},document.addEventListener("click",x)}const A=document.createElement("div");if(T.append(A),A.classList.add("vega-actions"),s===!0||s.export!==!1){for(const k of["svg","png"])if(s===!0||s.export===!0||s.export[k]){const I=o[`${k.toUpperCase()}_ACTION`],O=document.createElement("a"),M=un(n.scaleFactor)?n.scaleFactor[k]:n.scaleFactor;O.text=I,O.href="#",O.target="_blank",O.download=`${l}.${k}`,O.addEventListener("mousedown",async function(L){L.preventDefault();const H=await b.toImageURL(k,M);this.href=H}),A.append(O)}}if(s===!0||s.source!==!1){const k=document.createElement("a");k.text=o.SOURCE_ACTION,k.href="#",k.addEventListener("click",function(I){Jhe(pB(t),n.sourceHeader??"",n.sourceFooter??"",f),I.preventDefault()}),A.append(k)}if(f==="vega-lite"&&(s===!0||s.compiled!==!1)){const k=document.createElement("a");k.text=o.COMPILED_ACTION,k.href="#",k.addEventListener("click",function(I){Jhe(pB(d),n.sourceHeader??"",n.sourceFooter??"","vega"),I.preventDefault()}),A.append(k)}if(s===!0||s.editor!==!1){const k=n.editorUrl??"https://vega.github.io/editor/",I=document.createElement("a");I.text=o.EDITOR_ACTION,I.href="#",I.addEventListener("click",function(O){Y$t(window,k,{config:i,mode:f,renderer:a,spec:pB(t)}),O.preventDefault()}),A.append(I)}}function w(){x&&document.removeEventListener("click",x),b.finalize()}return{view:b,spec:t,vgSpec:d,finalize:w,embedOptions:n}}function uBt(e){return!!e&&{}.toString.call(e)==="[object Function]"}function lBt(e,t,n){n&&(uBt(n)?n(e.data(t)):e.change(t,Zp.changeset().remove(()=>!0).insert(n)))}function cBt(e,t){Object.keys(t).forEach(n=>{lBt(e,n,t[n])})}function Y6e(e){const t=new Set;return e.forEach(n=>{Object.keys(n).forEach(r=>{t.add(r)})}),t}const K6e=()=>{};function vj(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.addSignalListener(r,t[r])}catch(i){console.warn("Cannot add invalid signal listener.",i)}}),n.length>0}function fBt(e,t){if(e===t)return!1;const n={width:!1,height:!1,isExpensive:!1},r=Y6e([e,t]);return r.has("width")&&(!("width"in e)||!("width"in t)||e.width!==t.width)&&("width"in e&&typeof e.width=="number"?n.width=e.width:n.isExpensive=!0),r.has("height")&&(!("height"in e)||!("height"in t)||e.height!==t.height)&&("height"in e&&typeof e.height=="number"?n.height=e.height:n.isExpensive=!0),r.delete("width"),r.delete("height"),[...r].some(i=>!(i in e)||!(i in t)||!R3(e[i],t[i]))&&(n.isExpensive=!0),n.width!==!1||n.height!==!1||n.isExpensive?n:!1}function tpe(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.removeSignalListener(r,t[r])}catch(i){console.warn("Cannot remove invalid signal listener.",i)}}),n.length>0}function bj(e){const{spec:t,width:n,height:r}=e;return typeof n<"u"&&typeof r<"u"?{...t,width:n,height:r}:typeof n<"u"?{...t,width:n}:typeof r<"u"?{...t,height:r}:t}function nk(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class X6e extends sr.PureComponent{constructor(){super(...arguments),nk(this,"containerRef",sr.createRef()),nk(this,"resultPromise",void 0),nk(this,"handleError",t=>{const{onError:n=K6e}=this.props;n(t,this.containerRef.current),console.warn(t)}),nk(this,"modifyView",t=>{this.resultPromise&&this.resultPromise.then(n=>(n&&t(n.view),!0)).catch(this.handleError)})}componentDidMount(){this.createView()}componentDidUpdate(t){const n=Y6e([this.props,t]);if(n.delete("className"),n.delete("signalListeners"),n.delete("spec"),n.delete("style"),n.delete("width"),n.delete("height"),Array.from(n).some(r=>this.props[r]!==t[r]))this.clearView(),this.createView();else{const r=fBt(bj(this.props),bj(t)),{signalListeners:i}=this.props,{signalListeners:s}=t;if(r)if(r.isExpensive)this.clearView(),this.createView();else{const o=!nV(i,s);this.modifyView(a=>{r.width!==!1&&a.width(r.width),r.height!==!1&&a.height(r.height),o&&(s&&tpe(a,s),i&&vj(a,i)),a.run()})}else nV(i,s)||this.modifyView(o=>{s&&tpe(o,s),i&&vj(o,i),o.run()})}}componentWillUnmount(){this.clearView()}createView(){const{spec:t,onNewView:n,signalListeners:r={},width:i,height:s,...o}=this.props;if(this.containerRef.current){const a=bj(this.props);this.resultPromise=sBt(this.containerRef.current,a,o).then(u=>{if(u){const{view:l}=u;vj(l,r)&&l.run()}return u}).catch(this.handleError),n&&this.modifyView(n)}}clearView(){return this.resultPromise&&this.resultPromise.then(t=>{t&&t.finalize()}).catch(this.handleError),this.resultPromise=void 0,this}render(){const{className:t,style:n}=this.props;return sr.createElement("div",{ref:this.containerRef,className:t,style:n})}}nk(X6e,"propTypes",{className:jne.string,onError:jne.func});function MH(){return MH=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},MH.apply(this,arguments)}function LH(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const dBt={};class Iee extends sr.PureComponent{constructor(){super(...arguments),LH(this,"vegaEmbed",sr.createRef()),LH(this,"handleNewView",t=>{this.update();const{onNewView:n=K6e}=this.props;n(t)})}componentDidMount(){this.update()}componentDidUpdate(t){nV(this.props.data,t.data)||this.update()}update(){const{data:t}=this.props;this.vegaEmbed.current&&t&&Object.keys(t).length>0&&this.vegaEmbed.current.modifyView(n=>{cBt(n,t),n.resize().run()})}render(){const{data:t,...n}=this.props;return sr.createElement(X6e,MH({ref:this.vegaEmbed},n,{onNewView:this.handleNewView}))}}LH(Iee,"defaultProps",{data:dBt});function FH(){return FH=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},FH.apply(this,arguments)}function npe(e){return sr.createElement(Iee,FH({},e,{mode:"vega-lite"}))}function l0(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Nb(e){return!!e&&!!e[uo]}function T1(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===_Bt}(e)||Array.isArray(e)||!!e[lpe]||!!(!((t=e.constructor)===null||t===void 0)&&t[lpe])||Pee(e)||Nee(e))}function bw(e,t,n){n===void 0&&(n=!1),mC(e)===0?(n?Object.keys:iS)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function mC(e){var t=e[uo];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:Pee(e)?2:Nee(e)?3:0}function rS(e,t){return mC(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function hBt(e,t){return mC(e)===2?e.get(t):e[t]}function Q6e(e,t,n){var r=mC(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function J6e(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function Pee(e){return bBt&&e instanceof Map}function Nee(e){return xBt&&e instanceof Set}function u_(e){return e.o||e.t}function Dee(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=e5e(e);delete t[uo];for(var n=iS(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function Oee(e,t){return t===void 0&&(t=!1),Mee(e)||Nb(e)||!T1(e)||(mC(e)>1&&(e.set=e.add=e.clear=e.delete=pBt),Object.freeze(e),t&&bw(e,function(n,r){return Oee(r,!0)},!0)),e}function pBt(){l0(2)}function Mee(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function Xm(e){var t=UH[e];return t||l0(18,e),t}function mBt(e,t){UH[e]||(UH[e]=t)}function $H(){return G4}function xj(e,t){t&&(Xm("Patches"),e.u=[],e.s=[],e.v=t)}function yO(e){BH(e),e.p.forEach(gBt),e.p=null}function BH(e){e===G4&&(G4=e.l)}function rpe(e){return G4={p:[],l:G4,h:e,m:!0,_:0}}function gBt(e){var t=e[uo];t.i===0||t.i===1?t.j():t.g=!0}function _j(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.O||Xm("ES5").S(t,e,r),r?(n[uo].P&&(yO(t),l0(4)),T1(e)&&(e=vO(t,e),t.l||bO(t,e)),t.u&&Xm("Patches").M(n[uo].t,e,t.u,t.s)):e=vO(t,n,[]),yO(t),t.u&&t.v(t.u,t.s),e!==Z6e?e:void 0}function vO(e,t,n){if(Mee(t))return t;var r=t[uo];if(!r)return bw(t,function(a,u){return ipe(e,r,t,a,u,n)},!0),t;if(r.A!==e)return t;if(!r.P)return bO(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=Dee(r.k):r.o,s=i,o=!1;r.i===3&&(s=new Set(i),i.clear(),o=!0),bw(s,function(a,u){return ipe(e,r,i,a,u,n,o)}),bO(e,i,!1),n&&e.u&&Xm("Patches").N(r,n,e.u,e.s)}return r.o}function ipe(e,t,n,r,i,s,o){if(Nb(i)){var a=vO(e,i,s&&t&&t.i!==3&&!rS(t.R,r)?s.concat(r):void 0);if(Q6e(n,r,a),!Nb(a))return;e.m=!1}else o&&n.add(i);if(T1(i)&&!Mee(i)){if(!e.h.D&&e._<1)return;vO(e,i),t&&t.A.l||bO(e,i)}}function bO(e,t,n){n===void 0&&(n=!1),!e.l&&e.h.D&&e.m&&Oee(t,n)}function wj(e,t){var n=e[uo];return(n?u_(n):e)[t]}function spe(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function Lv(e){e.P||(e.P=!0,e.l&&Lv(e.l))}function Ej(e){e.o||(e.o=Dee(e.t))}function jH(e,t,n){var r=Pee(t)?Xm("MapSet").F(t,n):Nee(t)?Xm("MapSet").T(t,n):e.O?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:$H(),P:!1,I:!1,R:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=Y4;o&&(u=[a],l=rk);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):Xm("ES5").J(t,n);return(n?n.A:$H()).p.push(r),r}function yBt(e){return Nb(e)||l0(22,e),function t(n){if(!T1(n))return n;var r,i=n[uo],s=mC(n);if(i){if(!i.P&&(i.i<4||!Xm("ES5").K(i)))return i.t;i.I=!0,r=ope(n,s),i.I=!1}else r=ope(n,s);return bw(r,function(o,a){i&&hBt(i.t,o)===a||Q6e(r,o,t(a))}),s===3?new Set(r):r}(e)}function ope(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return Dee(e)}function vBt(){function e(s,o){var a=i[s];return a?a.enumerable=o:i[s]=a={configurable:!0,enumerable:o,get:function(){var u=this[uo];return Y4.get(u,s)},set:function(u){var l=this[uo];Y4.set(l,s,u)}},a}function t(s){for(var o=s.length-1;o>=0;o--){var a=s[o][uo];if(!a.P)switch(a.i){case 5:r(a)&&Lv(a);break;case 4:n(a)&&Lv(a)}}}function n(s){for(var o=s.t,a=s.k,u=iS(a),l=u.length-1;l>=0;l--){var c=u[l];if(c!==uo){var f=o[c];if(f===void 0&&!rS(o,c))return!0;var d=a[c],h=d&&d[uo];if(h?h.t!==f:!J6e(d,f))return!0}}var p=!!o[uo];return u.length!==iS(o).length+(p?0:1)}function r(s){var o=s.k;if(o.length!==s.t.length)return!0;var a=Object.getOwnPropertyDescriptor(o,o.length-1);if(a&&!a.get)return!0;for(var u=0;u<o.length;u++)if(!o.hasOwnProperty(u))return!0;return!1}var i={};mBt("ES5",{J:function(s,o){var a=Array.isArray(s),u=function(c,f){if(c){for(var d=Array(f.length),h=0;h<f.length;h++)Object.defineProperty(d,""+h,e(h,!0));return d}var p=e5e(f);delete p[uo];for(var m=iS(p),g=0;g<m.length;g++){var b=m[g];p[b]=e(b,c||!!p[b].enumerable)}return Object.create(Object.getPrototypeOf(f),p)}(a,s),l={i:a?5:4,A:o?o.A:$H(),P:!1,I:!1,R:{},l:o,t:s,k:u,o:null,g:!1,C:!1};return Object.defineProperty(u,uo,{value:l,writable:!0}),u},S:function(s,o,a){a?Nb(o)&&o[uo].A===s&&t(s.p):(s.u&&function u(l){if(l&&typeof l=="object"){var c=l[uo];if(c){var f=c.t,d=c.k,h=c.R,p=c.i;if(p===4)bw(d,function(x){x!==uo&&(f[x]!==void 0||rS(f,x)?h[x]||u(d[x]):(h[x]=!0,Lv(c)))}),bw(f,function(x){d[x]!==void 0||rS(d,x)||(h[x]=!1,Lv(c))});else if(p===5){if(r(c)&&(Lv(c),h.length=!0),d.length<f.length)for(var m=d.length;m<f.length;m++)h[m]=!1;else for(var g=f.length;g<d.length;g++)h[g]=!0;for(var b=Math.min(d.length,f.length),y=0;y<b;y++)d.hasOwnProperty(y)||(h[y]=!0),h[y]===void 0&&u(d[y])}}}}(s.p[0]),t(s.p))},K:function(s){return s.i===4?n(s):r(s)}})}var ape,G4,Lee=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",bBt=typeof Map<"u",xBt=typeof Set<"u",upe=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",Z6e=Lee?Symbol.for("immer-nothing"):((ape={})["immer-nothing"]=!0,ape),lpe=Lee?Symbol.for("immer-draftable"):"__$immer_draftable",uo=Lee?Symbol.for("immer-state"):"__$immer_state",_Bt=""+Object.prototype.constructor,iS=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,e5e=Object.getOwnPropertyDescriptors||function(e){var t={};return iS(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},UH={},Y4={get:function(e,t){if(t===uo)return e;var n=u_(e);if(!rS(n,t))return function(i,s,o){var a,u=spe(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!T1(r)?r:r===wj(e.t,t)?(Ej(e),e.o[t]=jH(e.A.h,r,e)):r},has:function(e,t){return t in u_(e)},ownKeys:function(e){return Reflect.ownKeys(u_(e))},set:function(e,t,n){var r=spe(u_(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=wj(u_(e),t),s=i==null?void 0:i[uo];if(s&&s.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(J6e(n,i)&&(n!==void 0||rS(e.t,t)))return!0;Ej(e),Lv(e)}return e.o[t]===n&&(n!==void 0||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return wj(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,Ej(e),Lv(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=u_(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){l0(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){l0(12)}},rk={};bw(Y4,function(e,t){rk[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),rk.deleteProperty=function(e,t){return rk.set.call(this,e,t,void 0)},rk.set=function(e,t,n){return Y4.set.call(this,e[0],t,n,e[0])};var wBt=function(){function e(n){var r=this;this.O=upe,this.D=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var b=arguments.length,y=Array(b>1?b-1:0),x=1;x<b;x++)y[x-1]=arguments[x];return u.produce(m,function(w){var T;return(T=s).call.apply(T,[g,w].concat(y))})}}var l;if(typeof s!="function"&&l0(6),o!==void 0&&typeof o!="function"&&l0(7),T1(i)){var c=rpe(r),f=jH(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?yO(c):BH(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return xj(c,o),_j(m,c)},function(m){throw yO(c),m}):(xj(c,o),_j(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===Z6e&&(l=void 0),r.D&&Oee(l,!0),o){var h=[],p=[];Xm("Patches").M(i,l,h,p),o(h,p)}return l}l0(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){T1(n)||l0(8),Nb(n)&&(n=yBt(n));var r=rpe(this),i=jH(this,n,void 0);return i[uo].C=!0,BH(r),i},t.finishDraft=function(n,r){var i=n&&n[uo],s=i.A;return xj(s,r),_j(void 0,s)},t.setAutoFreeze=function(n){this.D=n},t.setUseProxies=function(n){n&&!upe&&l0(20),this.O=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=Xm("Patches").$;return Nb(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),dh=new wBt,t5e=dh.produce;dh.produceWithPatches.bind(dh);dh.setAutoFreeze.bind(dh);dh.setUseProxies.bind(dh);dh.applyPatches.bind(dh);dh.createDraft.bind(dh);dh.finishDraft.bind(dh);function K4(e){"@babel/helpers - typeof";return K4=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},K4(e)}function EBt(e,t){if(K4(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(K4(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function SBt(e){var t=EBt(e,"string");return K4(t)=="symbol"?t:t+""}function TBt(e,t,n){return(t=SBt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cpe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function fpe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cpe(Object(n),!0).forEach(function(r){TBt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cpe(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Kl(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var dpe=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),Sj=function(){return Math.random().toString(36).substring(7).split("").join(".")},xO={INIT:"@@redux/INIT"+Sj(),REPLACE:"@@redux/REPLACE"+Sj(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Sj()}};function CBt(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function n5e(e,t,n){var r;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Kl(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Kl(1));return n(n5e)(e,t)}if(typeof e!="function")throw new Error(Kl(2));var i=e,s=t,o=[],a=o,u=!1;function l(){a===o&&(a=o.slice())}function c(){if(u)throw new Error(Kl(3));return s}function f(m){if(typeof m!="function")throw new Error(Kl(4));if(u)throw new Error(Kl(5));var g=!0;return l(),a.push(m),function(){if(g){if(u)throw new Error(Kl(6));g=!1,l();var y=a.indexOf(m);a.splice(y,1),o=null}}}function d(m){if(!CBt(m))throw new Error(Kl(7));if(typeof m.type>"u")throw new Error(Kl(8));if(u)throw new Error(Kl(9));try{u=!0,s=i(s,m)}finally{u=!1}for(var g=o=a,b=0;b<g.length;b++){var y=g[b];y()}return m}function h(m){if(typeof m!="function")throw new Error(Kl(10));i=m,d({type:xO.REPLACE})}function p(){var m,g=f;return m={subscribe:function(y){if(typeof y!="object"||y===null)throw new Error(Kl(11));function x(){y.next&&y.next(c())}x();var w=g(x);return{unsubscribe:w}}},m[dpe]=function(){return this},m}return d({type:xO.INIT}),r={dispatch:d,subscribe:f,getState:c,replaceReducer:h},r[dpe]=p,r}function ABt(e){Object.keys(e).forEach(function(t){var n=e[t],r=n(void 0,{type:xO.INIT});if(typeof r>"u")throw new Error(Kl(12));if(typeof n(void 0,{type:xO.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Kl(13))})}function kBt(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];typeof e[i]=="function"&&(n[i]=e[i])}var s=Object.keys(n),o;try{ABt(n)}catch(a){o=a}return function(u,l){if(u===void 0&&(u={}),o)throw o;for(var c=!1,f={},d=0;d<s.length;d++){var h=s[d],p=n[h],m=u[h],g=p(m,l);if(typeof g>"u")throw l&&l.type,new Error(Kl(14));f[h]=g,c=c||g!==m}return c=c||s.length!==Object.keys(u).length,c?f:u}}function _O(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(r){return r}:t.length===1?t[0]:t.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function RBt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),s=function(){throw new Error(Kl(15))},o={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},a=t.map(function(u){return u(o)});return s=_O.apply(void 0,a)(i.dispatch),fpe(fpe({},i),{},{dispatch:s})}}}function r5e(e){var t=function(r){var i=r.dispatch,s=r.getState;return function(o){return function(a){return typeof a=="function"?a(i,s,e):o(a)}}};return t}var zH=r5e();zH.withExtraArgument=r5e;var i5e=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),AI=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(c){return u([l,c])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){n.label=l[1];break}if(l[0]===6&&n.label<s[1]){n.label=s[1],s=l;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(l);break}s[2]&&n.ops.pop(),n.trys.pop();continue}l=t.call(e,n)}catch(c){l=[6,c],i=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},xw=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},IBt=Object.defineProperty,PBt=Object.defineProperties,NBt=Object.getOwnPropertyDescriptors,hpe=Object.getOwnPropertySymbols,DBt=Object.prototype.hasOwnProperty,OBt=Object.prototype.propertyIsEnumerable,ppe=function(e,t,n){return t in e?IBt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},sb=function(e,t){for(var n in t||(t={}))DBt.call(t,n)&&ppe(e,n,t[n]);if(hpe)for(var r=0,i=hpe(t);r<i.length;r++){var n=i[r];OBt.call(t,n)&&ppe(e,n,t[n])}return e},Tj=function(e,t){return PBt(e,NBt(t))},kI=function(e,t,n){return new Promise(function(r,i){var s=function(u){try{a(n.next(u))}catch(l){i(l)}},o=function(u){try{a(n.throw(u))}catch(l){i(l)}},a=function(u){return u.done?r(u.value):Promise.resolve(u.value).then(s,o)};a((n=n.apply(e,t)).next())})},MBt=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?_O:_O.apply(null,arguments)};function s5e(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var n=t;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return t===n}var LBt=function(e){return e&&typeof e.match=="function"};function Qm(e,t){function n(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(t){var s=t.apply(void 0,r);if(!s)throw new Error("prepareAction did not return an object");return sb(sb({type:e,payload:s.payload},"meta"in s&&{meta:s.meta}),"error"in s&&{error:s.error})}return{type:e,payload:r[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(r){return r.type===e},n}function FBt(e){return s5e(e)&&"type"in e}var $Bt=function(e){i5e(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,xw([void 0],n[0].concat(this)))):new(t.bind.apply(t,xw([void 0],n.concat(this))))},t}(Array),BBt=function(e){i5e(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,xw([void 0],n[0].concat(this)))):new(t.bind.apply(t,xw([void 0],n.concat(this))))},t}(Array);function VH(e){return T1(e)?t5e(e,function(){}):e}function jBt(e){return typeof e=="boolean"}function UBt(){return function(t){return zBt(t)}}function zBt(e){e===void 0&&(e={});var t=e.thunk,n=t===void 0?!0:t;e.immutableCheck,e.serializableCheck,e.actionCreatorCheck;var r=new $Bt;return n&&(jBt(n)?r.push(zH):r.push(zH.withExtraArgument(n.extraArgument))),r}function VBt(e){var t=UBt(),n=e,r=n.reducer,i=r===void 0?void 0:r,s=n.middleware,o=s===void 0?t():s,a=n.devTools,u=a===void 0?!0:a,l=n.preloadedState,c=l===void 0?void 0:l,f=n.enhancers,d=f===void 0?void 0:f,h;if(typeof i=="function")h=i;else if(s5e(i))h=kBt(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var p=o;typeof p=="function"&&(p=p(t));var m=RBt.apply(void 0,p),g=_O;u&&(g=MBt(sb({trace:!1},typeof u=="object"&&u)));var b=new BBt(m),y=b;Array.isArray(d)?y=xw([m],d):typeof d=="function"&&(y=d(b));var x=g.apply(void 0,y);return n5e(h,c,x)}function o5e(e){var t={},n=[],r,i={addCase:function(s,o){var a=typeof s=="string"?s:s.type;if(!a)throw new Error("`builder.addCase` cannot be called with an empty action type");if(a in t)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return t[a]=o,i},addMatcher:function(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase:function(s){return r=s,i}};return e(i),[t,n,r]}function HBt(e){return typeof e=="function"}function qBt(e,t,n,r){n===void 0&&(n=[]);var i=typeof t=="function"?o5e(t):[t,n,r],s=i[0],o=i[1],a=i[2],u;if(HBt(e))u=function(){return VH(e())};else{var l=VH(e);u=function(){return l}}function c(f,d){f===void 0&&(f=u());var h=xw([s[d.type]],o.filter(function(p){var m=p.matcher;return m(d)}).map(function(p){var m=p.reducer;return m}));return h.filter(function(p){return!!p}).length===0&&(h=[a]),h.reduce(function(p,m){if(m)if(Nb(p)){var g=p,b=m(g,d);return b===void 0?p:b}else{if(T1(p))return t5e(p,function(y){return m(y,d)});var b=m(p,d);if(b===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return b}return p},f)}return c.getInitialState=u,c}function WBt(e,t){return e+"/"+t}function GBt(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");var n=typeof e.initialState=="function"?e.initialState:VH(e.initialState),r=e.reducers||{},i=Object.keys(r),s={},o={},a={};i.forEach(function(c){var f=r[c],d=WBt(t,c),h,p;"reducer"in f?(h=f.reducer,p=f.prepare):h=f,s[c]=h,o[d]=h,a[c]=p?Qm(d,p):Qm(d)});function u(){var c=typeof e.extraReducers=="function"?o5e(e.extraReducers):[e.extraReducers],f=c[0],d=f===void 0?{}:f,h=c[1],p=h===void 0?[]:h,m=c[2],g=m===void 0?void 0:m,b=sb(sb({},d),o);return qBt(n,function(y){for(var x in b)y.addCase(x,b[x]);for(var w=0,T=p;w<T.length;w++){var A=T[w];y.addMatcher(A.matcher,A.reducer)}g&&y.addDefaultCase(g)})}var l;return{name:t,reducer:function(c,f){return l||(l=u()),l(c,f)},actions:a,caseReducers:s,getInitialState:function(){return l||(l=u()),l.getInitialState()}}}var YBt="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",a5e=function(e){e===void 0&&(e=21);for(var t="",n=e;n--;)t+=YBt[Math.random()*64|0];return t},KBt=["name","message","stack","code"],Cj=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),mpe=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),XBt=function(e){if(typeof e=="object"&&e!==null){for(var t={},n=0,r=KBt;n<r.length;n++){var i=r[n];typeof e[i]=="string"&&(t[i]=e[i])}return t}return{message:String(e)}};(function(){function e(t,n,r){var i=Qm(t+"/fulfilled",function(l,c,f,d){return{payload:l,meta:Tj(sb({},d||{}),{arg:f,requestId:c,requestStatus:"fulfilled"})}}),s=Qm(t+"/pending",function(l,c,f){return{payload:void 0,meta:Tj(sb({},f||{}),{arg:c,requestId:l,requestStatus:"pending"})}}),o=Qm(t+"/rejected",function(l,c,f,d,h){return{payload:d,error:(r&&r.serializeError||XBt)(l||"Rejected"),meta:Tj(sb({},h||{}),{arg:f,requestId:c,rejectedWithValue:!!d,requestStatus:"rejected",aborted:(l==null?void 0:l.name)==="AbortError",condition:(l==null?void 0:l.name)==="ConditionError"})}}),a=typeof AbortController<"u"?AbortController:function(){function l(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return l.prototype.abort=function(){},l}();function u(l){return function(c,f,d){var h=r!=null&&r.idGenerator?r.idGenerator(l):a5e(),p=new a,m;function g(y){m=y,p.abort()}var b=function(){return kI(this,null,function(){var y,x,w,T,A,k,I;return AI(this,function(O){switch(O.label){case 0:return O.trys.push([0,4,,5]),T=(y=r==null?void 0:r.condition)==null?void 0:y.call(r,l,{getState:f,extra:d}),JBt(T)?[4,T]:[3,2];case 1:T=O.sent(),O.label=2;case 2:if(T===!1||p.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return A=new Promise(function(M,L){return p.signal.addEventListener("abort",function(){return L({name:"AbortError",message:m||"Aborted"})})}),c(s(h,l,(x=r==null?void 0:r.getPendingMeta)==null?void 0:x.call(r,{requestId:h,arg:l},{getState:f,extra:d}))),[4,Promise.race([A,Promise.resolve(n(l,{dispatch:c,getState:f,extra:d,requestId:h,signal:p.signal,abort:g,rejectWithValue:function(M,L){return new Cj(M,L)},fulfillWithValue:function(M,L){return new mpe(M,L)}})).then(function(M){if(M instanceof Cj)throw M;return M instanceof mpe?i(M.payload,h,l,M.meta):i(M,h,l)})])];case 3:return w=O.sent(),[3,5];case 4:return k=O.sent(),w=k instanceof Cj?o(null,h,l,k.payload,k.meta):o(k,h,l),[3,5];case 5:return I=r&&!r.dispatchConditionRejection&&o.match(w)&&w.meta.condition,I||c(w),[2,w]}})})}();return Object.assign(b,{abort:g,requestId:h,arg:l,unwrap:function(){return b.then(QBt)}})}}return Object.assign(u,{pending:s,rejected:o,fulfilled:i,typePrefix:t})}return e.withTypes=function(){return e},e})();function QBt(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function JBt(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var ZBt=function(e,t){return LBt(e)?e.match(t):e(t)};function gpe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(n){return e.some(function(r){return ZBt(r,n)})}}var Fee=function(e,t){if(typeof e!="function")throw new TypeError(t+" is not a function")},HH=function(){},u5e=function(e,t){return t===void 0&&(t=HH),e.catch(t),e},l5e=function(e,t){return e.addEventListener("abort",t,{once:!0}),function(){return e.removeEventListener("abort",t)}},sS=function(e,t){var n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},ejt="task",c5e="listener",f5e="completed",$ee="cancelled",tjt="task-"+$ee,njt="task-"+f5e,d5e=c5e+"-"+$ee,rjt=c5e+"-"+f5e,c7=function(){function e(t){this.code=t,this.name="TaskAbortError",this.message=ejt+" "+$ee+" (reason: "+t+")"}return e}(),oS=function(e){if(e.aborted)throw new c7(e.reason)};function h5e(e,t){var n=HH;return new Promise(function(r,i){var s=function(){return i(new c7(e.reason))};if(e.aborted){s();return}n=l5e(e,s),t.finally(function(){return n()}).then(r,i)}).finally(function(){n=HH})}var ijt=function(e,t){return kI(void 0,null,function(){var n,r;return AI(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,4,5]),[4,Promise.resolve()];case 1:return i.sent(),[4,e()];case 2:return n=i.sent(),[2,{status:"ok",value:n}];case 3:return r=i.sent(),[2,{status:r instanceof c7?"cancelled":"rejected",error:r}];case 4:return t==null||t(),[7];case 5:return[2]}})})},wO=function(e){return function(t){return u5e(h5e(e,t).then(function(n){return oS(e),n}))}},p5e=function(e){var t=wO(e);return function(n){return t(new Promise(function(r){return setTimeout(r,n)}))}},sjt=Object.assign,ype={},RI="listenerMiddleware",ojt=function(e,t){var n=function(r){return l5e(e,function(){return sS(r,e.reason)})};return function(r,i){Fee(r,"taskExecutor");var s=new AbortController;n(s);var o=ijt(function(){return kI(void 0,null,function(){var a;return AI(this,function(u){switch(u.label){case 0:return oS(e),oS(s.signal),[4,r({pause:wO(s.signal),delay:p5e(s.signal),signal:s.signal})];case 1:return a=u.sent(),oS(s.signal),[2,a]}})})},function(){return sS(s,njt)});return i!=null&&i.autoJoin&&t.push(o),{result:wO(e)(o),cancel:function(){sS(s,tjt)}}}},ajt=function(e,t){var n=function(r,i){return kI(void 0,null,function(){var s,o,a,u;return AI(this,function(l){switch(l.label){case 0:oS(t),s=function(){},o=new Promise(function(c,f){var d=e({predicate:r,effect:function(h,p){p.unsubscribe(),c([h,p.getState(),p.getOriginalState()])}});s=function(){d(),f()}}),a=[o],i!=null&&a.push(new Promise(function(c){return setTimeout(c,i,null)})),l.label=1;case 1:return l.trys.push([1,,3,4]),[4,h5e(t,Promise.race(a))];case 2:return u=l.sent(),oS(t),[2,u];case 3:return s(),[7];case 4:return[2]}})})};return function(r,i){return u5e(n(r,i))}},m5e=function(e){var t=e.type,n=e.actionCreator,r=e.matcher,i=e.predicate,s=e.effect;if(t)i=Qm(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error("Creating or removing a listener requires one of the known fields for matching an action");return Fee(s,"options.listener"),{predicate:i,type:t,effect:s}},ujt=function(e){var t=m5e(e),n=t.type,r=t.predicate,i=t.effect,s=a5e(),o={id:s,effect:i,type:n,predicate:r,pending:new Set,unsubscribe:function(){throw new Error("Unsubscribe not initialized")}};return o},qH=function(e){e.pending.forEach(function(t){sS(t,d5e)})},ljt=function(e){return function(){e.forEach(qH),e.clear()}},vpe=function(e,t,n){try{e(t,n)}catch(r){setTimeout(function(){throw r},0)}},cjt=Qm(RI+"/add"),fjt=Qm(RI+"/removeAll"),djt=Qm(RI+"/remove"),hjt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,xw([RI+"/error"],e))};function pjt(e){var t=this;e===void 0&&(e={});var n=new Map,r=e.extra,i=e.onError,s=i===void 0?hjt:i;Fee(s,"onError");var o=function(h){return h.unsubscribe=function(){return n.delete(h.id)},n.set(h.id,h),function(p){h.unsubscribe(),p!=null&&p.cancelActive&&qH(h)}},a=function(h){for(var p=0,m=Array.from(n.values());p<m.length;p++){var g=m[p];if(h(g))return g}},u=function(h){var p=a(function(m){return m.effect===h.effect});return p||(p=ujt(h)),o(p)},l=function(h){var p=m5e(h),m=p.type,g=p.effect,b=p.predicate,y=a(function(x){var w=typeof m=="string"?x.type===m:x.predicate===b;return w&&x.effect===g});return y&&(y.unsubscribe(),h.cancelActive&&qH(y)),!!y},c=function(h,p,m,g){return kI(t,null,function(){var b,y,x,w;return AI(this,function(T){switch(T.label){case 0:b=new AbortController,y=ajt(u,b.signal),x=[],T.label=1;case 1:return T.trys.push([1,3,4,6]),h.pending.add(b),[4,Promise.resolve(h.effect(p,sjt({},m,{getOriginalState:g,condition:function(A,k){return y(A,k).then(Boolean)},take:y,delay:p5e(b.signal),pause:wO(b.signal),extra:r,signal:b.signal,fork:ojt(b.signal,x),unsubscribe:h.unsubscribe,subscribe:function(){n.set(h.id,h)},cancelActiveListeners:function(){h.pending.forEach(function(A,k,I){A!==b&&(sS(A,d5e),I.delete(A))})}})))];case 2:return T.sent(),[3,6];case 3:return w=T.sent(),w instanceof c7||vpe(s,w,{raisedBy:"effect"}),[3,6];case 4:return[4,Promise.allSettled(x)];case 5:return T.sent(),sS(b,rjt),h.pending.delete(b),[7];case 6:return[2]}})})},f=ljt(n),d=function(h){return function(p){return function(m){if(!FBt(m))return p(m);if(cjt.match(m))return u(m.payload);if(fjt.match(m)){f();return}if(djt.match(m))return l(m.payload);var g=h.getState(),b=function(){if(g===ype)throw new Error(RI+": getOriginalState can only be called synchronously");return g},y;try{if(y=p(m),n.size>0)for(var x=h.getState(),w=Array.from(n.values()),T=0,A=w;T<A.length;T++){var k=A[T],I=!1;try{I=k.predicate(m,x,g)}catch(O){I=!1,vpe(s,O,{raisedBy:"predicate"})}I&&c(k,m,h,b)}}finally{g=ype}return y}}};return{middleware:d,startListening:u,stopListening:l,clearListeners:f}}var bpe;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);vBt();function mjt(){const e=new Map;return{listen(t,n){return e.has(t)||e.set(t,[]),e.get(t).push(n),()=>{e.set(t,(e.get(t)||[]).filter(r=>r!==n))}},fire(t,n){const r=e.get(t);r&&r.forEach(i=>i(n))}}}let C5;const gjt=new Uint8Array(16);function yjt(){if(!C5&&(C5=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!C5))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return C5(gjt)}const ll=[];for(let e=0;e<256;++e)ll.push((e+256).toString(16).slice(1));function vjt(e,t=0){return(ll[e[t+0]]+ll[e[t+1]]+ll[e[t+2]]+ll[e[t+3]]+"-"+ll[e[t+4]]+ll[e[t+5]]+"-"+ll[e[t+6]]+ll[e[t+7]]+"-"+ll[e[t+8]]+ll[e[t+9]]+"-"+ll[e[t+10]]+ll[e[t+11]]+ll[e[t+12]]+ll[e[t+13]]+ll[e[t+14]]+ll[e[t+15]]).toLowerCase()}const bjt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),xpe={randomUUID:bjt};function _pe(e,t,n){if(xpe.randomUUID&&!e)return xpe.randomUUID();e=e||{};const r=e.random||(e.rng||yjt)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,vjt(r)}class Jm{static get(){let t=_pe();for(;this.ids.has(t);)t=_pe();return this.ids.set(t,!0),t}}Jm.ids=new Map;function w0(e){return"parent"in e}function xjt(e){return!w0(e)}function _jt(e){const{label:t=void 0,state:n,initialArtifact:r,initialMetadata:i}=e,s={annotation:[],bookmark:[]},o=Object.keys(i||{}).reduce((u,l)=>(u[l]=[],i&&i[l]&&u[l].push({type:l,id:Jm.get(),val:i[l],createdOn:Date.now()}),u),s),a=r?[{id:Jm.get(),createdOn:Date.now(),val:r}]:[];return{id:Jm.get(),label:t||"Root",event:"Root",children:[],level:0,createdOn:Date.now(),meta:o,artifacts:a,state:{type:"checkpoint",val:n}}}function wjt({parent:e,state:t,label:n,sideEffects:r={do:[],undo:[]},initialMetadata:i,initialArtifact:s,event:o}){const a={annotation:[],bookmark:[]},u=Object.keys(i||{}).reduce((c,f)=>(c[f]=[],i&&i[f]&&c[f].push({type:f,id:Jm.get(),val:i[f],createdOn:Date.now()}),c),a),l=s?[{id:Jm.get(),createdOn:Date.now(),val:s}]:[];return{id:Jm.get(),label:n,event:o,children:[],parent:e.id,createdOn:Date.now(),meta:u,artifacts:l,sideEffects:r,state:t,level:e.level+1}}function Ho(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if({}.NODE_ENV!=="production"){var i=Pjt[e],s=i?typeof i=="function"?i.apply(null,n):i:"unknown error nr: "+e;throw Error("[Immer] "+s)}throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(o){return"'"+o+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function _w(e){return!!e&&!!e[hh]}function Db(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===Njt}(e)||Array.isArray(e)||!!e[Bk]||!!(!((t=e.constructor)===null||t===void 0)&&t[Bk])||f7(e)||d7(e))}function oT(e,t,n){n===void 0&&(n=!1),Ob(e)===0?(n?Object.keys:Hee)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function Ob(e){var t=e[hh];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:f7(e)?2:d7(e)?3:0}function X4(e,t){return Ob(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function G8(e,t){return Ob(e)===2?e.get(t):e[t]}function g5e(e,t,n){var r=Ob(e);r===2?e.set(t,n):r===3?(e.delete(t),e.add(n)):e[t]=n}function Ejt(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function f7(e){return Rjt&&e instanceof Map}function d7(e){return Ijt&&e instanceof Set}function l_(e){return e.o||e.t}function Bee(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=Djt(e);delete t[hh];for(var n=Hee(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function jee(e,t){return t===void 0&&(t=!1),Uee(e)||_w(e)||!Db(e)||(Ob(e)>1&&(e.set=e.add=e.clear=e.delete=Sjt),Object.freeze(e),t&&oT(e,function(n,r){return jee(r,!0)},!0)),e}function Sjt(){Ho(2)}function Uee(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function Zm(e){var t=KH[e];return t||Ho(18,e),t}function Tjt(e,t){KH[e]||(KH[e]=t)}function wpe(){return{}.NODE_ENV==="production"||aT||Ho(0),aT}function Aj(e,t){t&&(Zm("Patches"),e.u=[],e.s=[],e.v=t)}function EO(e){WH(e),e.p.forEach(Cjt),e.p=null}function WH(e){e===aT&&(aT=e.l)}function Epe(e){return aT={p:[],l:aT,h:e,m:!0,_:0}}function Cjt(e){var t=e[hh];t.i===0||t.i===1?t.j():t.O=!0}function kj(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.g||Zm("ES5").S(t,e,r),r?(n[hh].P&&(EO(t),Ho(4)),Db(e)&&(e=SO(t,e),t.l||TO(t,e)),t.u&&Zm("Patches").M(n[hh].t,e,t.u,t.s)):e=SO(t,n,[]),EO(t),t.u&&t.v(t.u,t.s),e!==Vee?e:void 0}function SO(e,t,n){if(Uee(t))return t;var r=t[hh];if(!r)return oT(t,function(s,o){return Spe(e,r,t,s,o,n)},!0),t;if(r.A!==e)return t;if(!r.P)return TO(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=Bee(r.k):r.o;oT(r.i===3?new Set(i):i,function(s,o){return Spe(e,r,i,s,o,n)}),TO(e,i,!1),n&&e.u&&Zm("Patches").R(r,n,e.u,e.s)}return r.o}function Spe(e,t,n,r,i,s){if({}.NODE_ENV!=="production"&&i===n&&Ho(5),_w(i)){var o=SO(e,i,s&&t&&t.i!==3&&!X4(t.D,r)?s.concat(r):void 0);if(g5e(n,r,o),!_w(o))return;e.m=!1}if(Db(i)&&!Uee(i)){if(!e.h.F&&e._<1)return;SO(e,i),t&&t.A.l||TO(e,i)}}function TO(e,t,n){n===void 0&&(n=!1),e.h.F&&e.m&&jee(t,n)}function Rj(e,t){var n=e[hh];return(n?l_(n):e)[t]}function Tpe(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function GH(e){e.P||(e.P=!0,e.l&&GH(e.l))}function Ij(e){e.o||(e.o=Bee(e.t))}function YH(e,t,n){var r=f7(t)?Zm("MapSet").N(t,n):d7(t)?Zm("MapSet").T(t,n):e.g?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:wpe(),P:!1,I:!1,D:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=XH;o&&(u=[a],l=ik);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):Zm("ES5").J(t,n);return(n?n.A:wpe()).p.push(r),r}function Ajt(e){return _w(e)||Ho(22,e),function t(n){if(!Db(n))return n;var r,i=n[hh],s=Ob(n);if(i){if(!i.P&&(i.i<4||!Zm("ES5").K(i)))return i.t;i.I=!0,r=Cpe(n,s),i.I=!1}else r=Cpe(n,s);return oT(r,function(o,a){i&&G8(i.t,o)===a||g5e(r,o,t(a))}),s===3?new Set(r):r}(e)}function Cpe(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return Bee(e)}function kjt(){function e(r){if(!Db(r))return r;if(Array.isArray(r))return r.map(e);if(f7(r))return new Map(Array.from(r.entries()).map(function(o){return[o[0],e(o[1])]}));if(d7(r))return new Set(Array.from(r).map(e));var i=Object.create(Object.getPrototypeOf(r));for(var s in r)i[s]=e(r[s]);return X4(r,Bk)&&(i[Bk]=r[Bk]),i}function t(r){return _w(r)?e(r):r}var n="add";Tjt("Patches",{$:function(r,i){return i.forEach(function(s){for(var o=s.path,a=s.op,u=r,l=0;l<o.length-1;l++){var c=Ob(u),f=""+o[l];c!==0&&c!==1||f!=="__proto__"&&f!=="constructor"||Ho(24),typeof u=="function"&&f==="prototype"&&Ho(24),typeof(u=G8(u,f))!="object"&&Ho(15,o.join("/"))}var d=Ob(u),h=e(s.value),p=o[o.length-1];switch(a){case"replace":switch(d){case 2:return u.set(p,h);case 3:Ho(16);default:return u[p]=h}case n:switch(d){case 1:return p==="-"?u.push(h):u.splice(p,0,h);case 2:return u.set(p,h);case 3:return u.add(h);default:return u[p]=h}case"remove":switch(d){case 1:return u.splice(p,1);case 2:return u.delete(p);case 3:return u.delete(s.value);default:return delete u[p]}default:Ho(17,a)}}),r},R:function(r,i,s,o){switch(r.i){case 0:case 4:case 2:return function(a,u,l,c){var f=a.t,d=a.o;oT(a.D,function(h,p){var m=G8(f,h),g=G8(d,h),b=p?X4(f,h)?"replace":n:"remove";if(m!==g||b!=="replace"){var y=u.concat(h);l.push(b==="remove"?{op:b,path:y}:{op:b,path:y,value:g}),c.push(b===n?{op:"remove",path:y}:b==="remove"?{op:n,path:y,value:t(m)}:{op:"replace",path:y,value:t(m)})}})}(r,i,s,o);case 5:case 1:return function(a,u,l,c){var f=a.t,d=a.D,h=a.o;if(h.length<f.length){var p=[h,f];f=p[0],h=p[1];var m=[c,l];l=m[0],c=m[1]}for(var g=0;g<f.length;g++)if(d[g]&&h[g]!==f[g]){var b=u.concat([g]);l.push({op:"replace",path:b,value:t(h[g])}),c.push({op:"replace",path:b,value:t(f[g])})}for(var y=f.length;y<h.length;y++){var x=u.concat([y]);l.push({op:n,path:x,value:t(h[y])})}f.length<h.length&&c.push({op:"replace",path:u.concat(["length"]),value:f.length})}(r,i,s,o);case 3:return function(a,u,l,c){var f=a.t,d=a.o,h=0;f.forEach(function(p){if(!d.has(p)){var m=u.concat([h]);l.push({op:"remove",path:m,value:p}),c.unshift({op:n,path:m,value:p})}h++}),h=0,d.forEach(function(p){if(!f.has(p)){var m=u.concat([h]);l.push({op:n,path:m,value:p}),c.unshift({op:"remove",path:m,value:p})}h++})}(r,i,s,o)}},M:function(r,i,s,o){s.push({op:"replace",path:[],value:i===Vee?void 0:i}),o.push({op:"replace",path:[],value:r})}})}var Ape,aT,zee=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",Rjt=typeof Map<"u",Ijt=typeof Set<"u",kpe=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",Vee=zee?Symbol.for("immer-nothing"):((Ape={})["immer-nothing"]=!0,Ape),Bk=zee?Symbol.for("immer-draftable"):"__$immer_draftable",hh=zee?Symbol.for("immer-state"):"__$immer_state",Pjt={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(e){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+e},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(e){return"Cannot apply patch, path doesn't resolve: "+e},16:'Sets cannot have "replace" patches.',17:function(e){return"Unsupported patch operation: "+e},18:function(e){return"The plugin for '"+e+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+e+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(e){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+e+"'"},22:function(e){return"'current' expects a draft, got: "+e},23:function(e){return"'original' expects a draft, got: "+e},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},Njt=""+Object.prototype.constructor,Hee=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,Djt=Object.getOwnPropertyDescriptors||function(e){var t={};return Hee(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},KH={},XH={get:function(e,t){if(t===hh)return e;var n=l_(e);if(!X4(n,t))return function(i,s,o){var a,u=Tpe(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!Db(r)?r:r===Rj(e.t,t)?(Ij(e),e.o[t]=YH(e.A.h,r,e)):r},has:function(e,t){return t in l_(e)},ownKeys:function(e){return Reflect.ownKeys(l_(e))},set:function(e,t,n){var r=Tpe(l_(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=Rj(l_(e),t),s=i==null?void 0:i[hh];if(s&&s.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(Ejt(n,i)&&(n!==void 0||X4(e.t,t)))return!0;Ij(e),GH(e)}return e.o[t]===n&&typeof n!="number"&&(n!==void 0||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return Rj(e.t,t)!==void 0||t in e.t?(e.D[t]=!1,Ij(e),GH(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=l_(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){Ho(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Ho(12)}},ik={};oT(XH,function(e,t){ik[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),ik.deleteProperty=function(e,t){return{}.NODE_ENV!=="production"&&isNaN(parseInt(t))&&Ho(13),ik.set.call(this,e,t,void 0)},ik.set=function(e,t,n){return{}.NODE_ENV!=="production"&&t!=="length"&&isNaN(parseInt(t))&&Ho(14),XH.set.call(this,e[0],t,n,e[0])};var Ojt=function(){function e(n){var r=this;this.g=kpe,this.F=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var b=arguments.length,y=Array(b>1?b-1:0),x=1;x<b;x++)y[x-1]=arguments[x];return u.produce(m,function(w){var T;return(T=s).call.apply(T,[g,w].concat(y))})}}var l;if(typeof s!="function"&&Ho(6),o!==void 0&&typeof o!="function"&&Ho(7),Db(i)){var c=Epe(r),f=YH(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?EO(c):WH(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return Aj(c,o),kj(m,c)},function(m){throw EO(c),m}):(Aj(c,o),kj(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===Vee&&(l=void 0),r.F&&jee(l,!0),o){var h=[],p=[];Zm("Patches").M(i,l,h,p),o(h,p)}return l}Ho(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){Db(n)||Ho(8),_w(n)&&(n=Ajt(n));var r=Epe(this),i=YH(this,n,void 0);return i[hh].C=!0,WH(r),i},t.finishDraft=function(n,r){var i=n&&n[hh];({}).NODE_ENV!=="production"&&(i&&i.C||Ho(9),i.I&&Ho(10));var s=i.A;return Aj(s,r),kj(void 0,s)},t.setAutoFreeze=function(n){this.F=n},t.setUseProxies=function(n){n&&!kpe&&Ho(20),this.g=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=Zm("Patches").$;return _w(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),ph=new Ojt,Mjt=ph.produce;ph.produceWithPatches.bind(ph);ph.setAutoFreeze.bind(ph);ph.setUseProxies.bind(ph);ph.applyPatches.bind(ph);ph.createDraft.bind(ph);ph.finishDraft.bind(ph);function Ljt(e,t={}){const{artifact:n=void 0,metadata:r=void 0,rootLabel:i="Root"}=t,s=_jt({state:e,label:i,initialArtifact:n,initialMetadata:r}),o={nodes:{[s.id]:s},root:s.id,current:s.id};return GBt({name:"provenance-graph",initialState:o,reducers:{addMetadata(a,u){const{id:l,meta:c}=u.payload,f=a.nodes[l].meta,d=Object.keys(c).reduce((h,p)=>(h[p]||(h[p]=[]),h[p].push({type:p,id:Jm.get(),val:c[p],createdOn:Date.now()}),h),f);a.nodes[u.payload.id].meta=d},addArtifact(a,u){a.nodes[u.payload.id].artifacts.push({id:Jm.get(),createdOn:Date.now(),val:u.payload.artifact})},changeCurrent(a,u){a.current=u.payload},addNode(a,{payload:u}){a.nodes[u.id]=u,a.nodes[u.parent].children.push(u.id),a.current=u.id},load(a,{payload:u}){return u}}})}function Fjt(e){const t=new Map,{reducer:n,actions:r,getInitialState:i}=Ljt(e),s=pjt();s.startListening({matcher:gpe(r.changeCurrent,r.addNode),effect:(a,u)=>{u.cancelActiveListeners(),t.forEach(l=>{const c=gpe(r.addNode)(a),{skipOnNew:f}=l.config;f&&c||l.func(c?"new":"traversal")})}});const o=VBt({reducer:n,middleware:a=>a().prepend(s.middleware)});return{initialState:i(),get backend(){return o.getState()},get current(){return o.getState().nodes[o.getState().current]},get root(){return o.getState().nodes[o.getState().root]},currentChange(a,u){const l={id:Jm.get(),func:a,config:u};return t.set(l.id,l),()=>t.delete(l.id)},update:o.dispatch,...r}}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var $jt=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Bjt=Object.prototype.hasOwnProperty;function QH(e,t){return Bjt.call(e,t)}function JH(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)QH(e,i)&&r.push(i);return r}function Qf(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function ZH(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function c_(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function y5e(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function eq(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(eq(e[t]))return!0}else if(typeof e=="object"){for(var r=JH(e),i=r.length,s=0;s<i;s++)if(eq(e[r[s]]))return!0}}return!1}function Rpe(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var v5e=function(e){$jt(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,Rpe(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=Rpe(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),Vo=v5e,jjt=Qf,ME={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=CO(n,this.path);r&&(r=Qf(r));var i=V_(n,{op:"remove",path:this.from}).removed;return V_(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=CO(n,this.from);return V_(n,{op:"add",path:this.path,value:Qf(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:Q4(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},Ujt={add:function(e,t,n){return ZH(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:ME.move,copy:ME.copy,test:ME.test,_get:ME._get};function CO(e,t){if(t=="")return e;var n={op:"_get",path:t};return V_(e,n),n.value}function V_(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):AO(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=CO(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=Q4(e,t.value),o.test===!1)throw new Vo("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new Vo("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=Qf(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=AO;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=y5e(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!ZH(h))throw new Vo("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);ZH(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new Vo("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=Ujt[t.op].call(t,l,h,e);if(o.test===!1)throw new Vo("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=ME[t.op].call(t,l,h,e);if(o.test===!1)throw new Vo("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new Vo("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function h7(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new Vo("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Qf(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=V_(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function zjt(e,t,n){var r=V_(e,t);if(r.test===!1)throw new Vo("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function AO(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new Vo("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(ME[e.op]){if(typeof e.path!="string")throw new Vo("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Vo('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Vo("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Vo("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&eq(e.value))throw new Vo("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new Vo("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new Vo("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=b5e([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new Vo("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Vo("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function b5e(e,t,n){try{if(!Array.isArray(e))throw new Vo("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)h7(Qf(t),Qf(e),n||!0);else{n=n||AO;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof Vo)return i;throw i}}function Q4(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!Q4(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!Q4(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const Vjt=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Vo,_areEquals:Q4,applyOperation:V_,applyPatch:h7,applyReducer:zjt,deepClone:jjt,getValueByPointer:CO,validate:b5e,validator:AO},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var qee=new WeakMap,Hjt=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),qjt=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function Wjt(e){return qee.get(e)}function Gjt(e,t){return e.observers.get(t)}function Yjt(e,t){e.observers.delete(t.callback)}function Kjt(e,t){t.unobserve()}function Xjt(e,t){var n=[],r,i=Wjt(e);if(!i)i=new Hjt(e),qee.set(e,i);else{var s=Gjt(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=Qf(e),t){r.callback=t,r.next=null;var o=function(){tq(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){tq(r),clearTimeout(r.next),Yjt(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new qjt(t,r)),r}function tq(e,t){t===void 0&&(t=!1);var n=qee.get(e.object);Wee(n.value,e.object,e.patches,"",t),e.patches.length&&h7(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function Wee(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=JH(t),o=JH(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(QH(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?Wee(c,f,n,r+"/"+c_(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+c_(l),value:Qf(c)}),n.push({op:"replace",path:r+"/"+c_(l),value:Qf(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+c_(l),value:Qf(c)}),n.push({op:"remove",path:r+"/"+c_(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!QH(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+c_(l),value:Qf(t[l])})}}}function x5e(e,t,n){n===void 0&&(n=!1);var r=[];return Wee(e,t,r,"",n),r}const Qjt=Object.freeze(Object.defineProperty({__proto__:null,compare:x5e,generate:tq,observe:Xjt,unobserve:Kjt},Symbol.toStringTag,{value:"Module"}));Object.assign({},Vjt,Qjt,{JsonPatchError:v5e,deepClone:Qf,escapePathComponent:c_,unescapePathComponent:y5e});var sk=(e=>(e.TRAVERSAL_START="Traversal_Start",e.TRAVERSAL_END="Traversal_End",e))(sk||{});function Y8(e,t){const n=e.state;if(n.type==="checkpoint")return n.val;const{checkpointRef:r}=n,i=t[r],s=w5e(i,e,t);s.shift();const o=s.map(u=>t[u]).map(u=>u.state.val).reduce((u,l)=>[...u,...l],[]),a=Y8(i,t);return h7(a,Qf(o),!0,!1).newDocument}function Jjt(e,t){const n=Object.keys(e).length;return new Set(t.map(r=>r.path.split("/")[0])).size<n/2?"patch":"checkpoint"}function _5e({registry:e,initialState:t}){let n=!1;const r=mjt(),i=Fjt(t);function s(c){return i.backend.nodes[c]}r.listen(sk.TRAVERSAL_START,()=>{n=!0}),r.listen(sk.TRAVERSAL_END,()=>{n=!1});const o={add(c,f=i.current.id){i.update(i.addMetadata({id:f,meta:c}))},latestOfType(c,f=i.current.id){var d;return(d=i.backend.nodes[f].meta[c])==null?void 0:d.at(-1)},allOfType(c,f=i.current.id){return i.backend.nodes[f].meta[c]},latest(c=i.current.id){const f=i.backend.nodes[c].meta,d=Object.keys(f).reduce((h,p)=>{const m=f[p].at(-1);return m&&(h[p]=m),h},{});return Object.keys(d).length>0?d:void 0},all(c=i.current.id){return i.backend.nodes[c].meta},types(c=i.current.id){return Object.keys(i.backend.nodes[c].meta)}},a={add(c,f=i.current.id){i.update(i.addArtifact({id:f,artifact:c}))},latest(c=i.current.id){return i.backend.nodes[c].artifacts.at(-1)},all(c=i.current.id){return i.backend.nodes[c].artifacts}},u={add(c,f=i.current.id){o.add({annotation:c},f)},latest(c=i.current.id){var f;return(f=o.latestOfType("annotation",c))==null?void 0:f.val},all(c=i.current.id){var f;return(f=o.allOfType("annotation",c))==null?void 0:f.map(d=>d.val)}},l={add(c=i.current.id){o.add({bookmark:!0},c)},remove(c=i.current.id){o.add({bookmark:!1},c)},is(c=i.current.id){var f;return!!((f=o.latestOfType("bookmark",c))!=null&&f.val)},toggle(c=i.current.id){l.is(c)?l.remove(c):l.add(c)}};return{registry:e,get isTraversing(){return n},getState(c=i.current){return Y8(c,i.backend.nodes)},graph:i,get current(){return i.current},get root(){return i.root},record({label:c,state:f,sideEffects:d,eventType:h,onlySideEffects:p=!1}){let m=null,g=null;const b=Y8(this.current,this.graph.backend.nodes);if(p)g={type:"checkpoint",val:f};else{const y=x5e(b,f);if(Jjt(f,y)==="checkpoint")g={type:"checkpoint",val:f};else{const x=this.current.state.type==="checkpoint"?this.current.id:this.current.state.checkpointRef;g={type:"patch",val:y,checkpointRef:x}}}if(!g)throw new Error(`Could not calculate new state. Previous state is: ${JSON.stringify(this.current.state,null,2)}`);if(m=wjt({label:c,state:g,parent:this.current,sideEffects:d,event:h}),!m)throw new Error("State Node creation failed!");i.update(i.addNode(m))},async apply(c,f){const d=e.get(f.type),h=Y8(this.current,this.graph.backend.nodes);if(d.config.hasSideEffects){const{do:p=f,undo:m}=d.func(f.payload);this.record({label:c,state:h,sideEffects:{do:[p],undo:[m]},eventType:d.config.eventType})}else{const p=d.func(h,f.payload);this.record({label:c,state:p,sideEffects:{do:[],undo:[]},eventType:d.config.eventType})}},async to(c){r.fire(sk.TRAVERSAL_START);const f=w5e(i.current,i.backend.nodes[c],i.backend.nodes),d=[];for(let h=0;h<f.length-1;++h){const p=s(f[h]),m=s(f[h+1]);eUt(p,m)?w0(p)&&d.push(...p.sideEffects.undo):w0(m)&&d.push(...m.sideEffects.do)}for(const h of d){const p=e.get(h.type).func;await p(h.payload)}i.update(i.changeCurrent(c)),r.fire(sk.TRAVERSAL_END)},undo(){const{current:c}=i;return w0(c)?this.to(c.parent):Promise.resolve(console.warn("Already at root!"))},redo(c="latest"){const{current:f}=i;return f.children.length>0?this.to(f.children[c==="oldest"?0:f.children.length-1]):Promise.resolve(console.warn("Already at latest in this branch!"))},currentChange(c,f=!1){return i.currentChange(c,{skipOnNew:f})},done(){console.log("Setup later for URL sharing.")},tree(){return E5e(i.root,i.backend.nodes)},on(c,f){r.listen(c,f)},export(){return JSON.stringify(i.backend)},exportObject(){return JSON.parse(JSON.stringify(i.backend))},import(c){const f=JSON.parse(c),d=f.current;f.current=f.root,i.update(i.load(f)),this.to(d)},importObject(c){const f=c.current;c.current=c.root,i.update(i.load(c)),this.to(f)},metadata:o,artifact:a,annotations:u,bookmarks:l}}function Zjt(e,t,n){let[r,i]=[e,t];r.level>i.level&&([r,i]=[i,r]);let s=i.level-r.level;for(;w0(i)&&s!==0;)i=n[i.parent],s-=1;if(r.id===i.id)return r.id;for(;r.id!==i.id;)w0(r)&&(r=n[r.parent]),w0(i)&&(i=n[i.parent]);return r.id}function w5e(e,t,n){const r=Zjt(e,t,n),i=n[r],s=[],o=[];let[a,u]=[e,t];for(;a.id!==i.id;)s.push(a),w0(a)&&(a=n[a.parent]);for(s.push(a);u.id!==i.id;)o.push(u),w0(u)&&(u=n[u.parent]);const l=o.reverse();return[...s,...l].map(c=>c.id)}function eUt(e,t){if(w0(e)&&e.parent===t.id)return!0;if(w0(t)&&t.parent===e.id)return!1;throw new Error("Incorrect use of function. Nodes are not connected to each other.")}function E5e(e,t){return{...e,children:e.children.map(n=>E5e(t[n],t)),name:`${e.label}`}}kjt();function tUt(e){return e.length===2?Mjt(e):e}class p7{static create(){return new p7}constructor(){this.registry=new Map}has(t){return this.registry.has(t)}register(t,n,r){const i=n.length===2;if(n.length>2)throw new Error("Incorrect action function signature. Action function can only have two arguments at most!");if(this.has(t))throw new Error(`Already registered: ${t}`);const{label:s=t,eventType:o=t}=r||{};return this.registry.set(t,{func:tUt(n),config:{hasSideEffects:!i,label:typeof s=="string"?()=>s:s,eventType:o}}),Qm(t)}get(t){const n=this.registry.get(t);if(!n)throw new Error(`Not registered: ${t}`);return n}}function nUt({currentConfig:e,provState:t}){const n=dp(),r=F0(),i=gc(),[s,o]=z.useState(null),[a,u]=z.useState(!0),{updateResponseBlockValidation:l,setreactiveAnswers:c}=Tl(),[f,d]=z.useState(),{actions:h,trrack:p}=z.useMemo(()=>{const x=p7.create(),w=x.register("signal",(A,k)=>(A.event=k,A)),T=_5e({registry:x,initialState:{event:{}}});return{actions:{signalAction:w},trrack:T}},[]),m=z.useCallback(({status:x,provenanceGraph:w,answers:T})=>{i(l({location:"sidebar",identifier:`${r}_${n}`,status:x,values:T,provenanceGraph:w})),i(c(T))},[r,n,i,c,l]),g=z.useCallback((x,w)=>{p.apply(x,h.signalAction({key:x,value:w}))},[h,p]),b=z.useCallback((x,w)=>{const{responseId:T,response:A}=w;m({status:!0,provenanceGraph:p.graph.backend,answers:{[T]:A}})},[m,p.graph.backend]),y=z.useMemo(()=>{var w;const x=(w=s==null?void 0:s.config)==null?void 0:w.signals;return x?x.reduce((T,A)=>(A.name==="revisitAnswer"?T[A.name]=b:T[A.name]=g,T),{}):{}},[b,g,s]);return z.useEffect(()=>{async function x(){u(!0);let w;"path"in e?w=await ult(e.path):w=e.config,w!==void 0&&o(w),u(!1)}e&&x()},[e]),z.useEffect(()=>{f&&t&&t.event&&t.event.key&&f.signal(t.event.key,t.event.value).run()},[f,t]),a?R.jsx("div",{children:"Loading..."}):"path"in e&&!s?R.jsx(gb,{path:e.path}):s?R.jsx(Iee,{spec:structuredClone(s),signalListeners:y,onNewView:x=>d(x)}):R.jsx("div",{children:"Failed to load vega config"})}function rUt(){const e=y1(),t=dp(),n=F0()||"Notfound",r=e.components[n],{storageEngine:i}=Yo(),s=z.useRef(null),[o,a]=z.useState(null),{setIsRecording:u}=Tl(),l=Ai(O=>O.analysisProvState),c=UT(),f=HY(),d=Ai(O=>O.sequence),[h]=N1(),p=Ai(O=>O.participantId),m=z.useMemo(()=>h.get("participantId"),[h]);kSe();const g=gc(),{setAlertModal:b}=Tl();z.useEffect(()=>{(i==null?void 0:i.getEngine())!=="localStorage"&&g(b({show:!0,message:"There was an issue connecting to the localStorage database. This could be caused by a network issue or your adblocker. If you are using an adblocker, please disable it for this website and refresh."}))},[b,i,g]),z.useEffect(()=>{!e||!e.uiConfig.recordStudyAudio||!i||i.getEngine()!=="firebase"||f&&f.endTime>0||c||(s.current&&o&&i.saveAudio(s.current,o),s.current&&(s.current.stream.getTracks().forEach(O=>{var M;O.stop(),(M=s.current)==null||M.stream.removeTrack(O)}),s.current.stream.getAudioTracks().forEach(O=>{var M;O.stop(),(M=s.current)==null||M.stream.removeTrack(O)}),s.current.stop(),s.current=null),r&&r.recordAudio!==void 0&&!r.recordAudio||n==="end"?(a(null),g(u(!1))):navigator.mediaDevices.getUserMedia({audio:!0}).then(O=>{const M=new MediaRecorder(O);s.current=M,s.current.start(),g(u(!0)),a(`${n}_${t}`)}))},[n,t]);const[y,x]=z.useState([]),w=z.useRef([]);z.useEffect(()=>{async function O(){var H;const L=((H=$Y(d,t))==null?void 0:H.map(D=>D.currentBlock.id).filter(D=>D!==void 0))||[];x(L)}async function M(){const L=w.current;JSON.stringify(L)!==JSON.stringify(y)&&y.length>0&&i&&await i.addParticipantTags(y),w.current=y}O().then(M)},[t,i,d]);const T=z.useMemo(()=>{var O;return n!=="end"&&!n.startsWith("__")&&GT(r)&&e.baseComponents?VY({},(O=e.baseComponents)==null?void 0:O[r.baseComponent],r):r},[r,e]);if(n==="end")return R.jsx(pbt,{});if(n==="__trainingFailed")return R.jsx(mbt,{});if(n==="__timedOut")return R.jsx(gbt,{});if(n==="Notfound")return R.jsx(gb,{email:e.uiConfig.contactEmail});if(m&&p!==m)return R.jsx(u1,{style:{height:"80vh"},children:R.jsx(bg,{})});const A=T.instruction||"",{instructionLocation:k}=T,I=e.uiConfig.sidebar&&(k==="sidebar"||k===void 0);return R.jsxs(R.Fragment,{children:[k==="aboveStimulus"&&R.jsx(lc,{text:A}),R.jsx(LN,{status:f,config:T,location:"aboveStimulus"},`${t}-above-response-block`),R.jsxs(z.Suspense,{fallback:R.jsx("div",{children:"Loading..."}),children:[T.type==="markdown"&&R.jsx(rbt,{currentConfig:T}),T.type==="website"&&R.jsx(alt,{currentConfig:T}),T.type==="image"&&R.jsx(clt,{currentConfig:T}),T.type==="react-component"&&R.jsx(nbt,{currentConfig:T,provState:l}),T.type==="vega"&&R.jsx(nUt,{currentConfig:T,provState:l})]},`${t}-stimulus`),(k==="belowStimulus"||k===void 0&&!I)&&R.jsx(lc,{text:A}),R.jsx(LN,{status:f,config:T,location:"belowStimulus"},`${t}-below-response-block`)]})}function S5e(e){const[t]=N1();return R.jsx(nG,{...e,to:{pathname:e.to,search:t.toString()}})}var Pj,Ipe;function iUt(){if(Ipe)return Pj;Ipe=1;var e="Expected a function",t=NaN,n="[object Symbol]",r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt,u=typeof ya=="object"&&ya&&ya.Object===Object&&ya,l=typeof self=="object"&&self&&self.Object===Object&&self,c=u||l||Function("return this")(),f=Object.prototype,d=f.toString,h=Math.max,p=Math.min,m=function(){return c.Date.now()};function g(T,A,k){var I,O,M,L,H,D,B=0,U=!1,G=!1,ee=!0;if(typeof T!="function")throw new TypeError(e);A=w(A)||0,b(k)&&(U=!!k.leading,G="maxWait"in k,M=G?h(w(k.maxWait)||0,A):M,ee="trailing"in k?!!k.trailing:ee);function ne(ce){var he=I,Ee=O;return I=O=void 0,B=ce,L=T.apply(Ee,he),L}function ue(ce){return B=ce,H=setTimeout(te,A),U?ne(ce):L}function X(ce){var he=ce-D,Ee=ce-B,Ae=A-he;return G?p(Ae,M-Ee):Ae}function q(ce){var he=ce-D,Ee=ce-B;return D===void 0||he>=A||he<0||G&&Ee>=M}function te(){var ce=m();if(q(ce))return W(ce);H=setTimeout(te,X(ce))}function W(ce){return H=void 0,ee&&I?ne(ce):(I=O=void 0,L)}function Z(){H!==void 0&&clearTimeout(H),B=0,I=D=O=H=void 0}function oe(){return H===void 0?L:W(m())}function pe(){var ce=m(),he=q(ce);if(I=arguments,O=this,D=ce,he){if(H===void 0)return ue(D);if(G)return H=setTimeout(te,A),ne(D)}return H===void 0&&(H=setTimeout(te,A)),L}return pe.cancel=Z,pe.flush=oe,pe}function b(T){var A=typeof T;return!!T&&(A=="object"||A=="function")}function y(T){return!!T&&typeof T=="object"}function x(T){return typeof T=="symbol"||y(T)&&d.call(T)==n}function w(T){if(typeof T=="number")return T;if(x(T))return t;if(b(T)){var A=typeof T.valueOf=="function"?T.valueOf():T;T=b(A)?A+"":A}if(typeof T!="string")return T===0?T:+T;T=T.replace(r,"");var k=s.test(T);return k||o.test(T)?a(T.slice(2),k?2:8):i.test(T)?t:+T}return Pj=g,Pj}var sUt=iUt();const Ey=hc(sUt);function T5e(e,t,n,r){let i=0;for(let s=0;s<e.components.length;s+=1){const o=e.components[s];if(typeof o=="string"){if(r===e.orderPath&&o===t&&s>=n)break;i+=1}else if(i+=T5e(o,t,n,r),r.includes(o.orderPath))break}return i}function C5e(e,t){let n=0;return t.components.forEach(r=>{var i;if(typeof r=="string"&&((i=e.interruptions)!=null&&i.flatMap(s=>s.components).includes(r)))n+=1;else if(typeof r!="string"){const s=e.components.find(o=>typeof o!="string"&&o.orderPath===r.orderPath);n+=C5e(s,r)}}),n}function oUt(e,t){const n=[];return t.forEach(r=>{const i=e.findIndex(s=>typeof s=="string"?s===r:typeof r!="string"&&s.orderPath===r.orderPath);i!==-1&&(n.push(e[i]),e.splice(i,1)),i===-1&&typeof r=="string"&&n.push(r)}),n.push(...e),n}function aUt({step:e,disabled:t,fullSequence:n,startIndex:r,interruption:i,participantView:s,studyConfig:o,subSequence:a,analysisNavigation:u}){const l=Uw(),c=M0(),f=dp(),[d,{close:h,open:p}]=uq(!1),m=e in o.components&&o.components[e],g=a&&a.components.slice(r).includes(e)?T5e(n,e,r,a.orderPath):-1,{trialId:b}=rg(),[y]=N1(),x=z.useMemo(()=>y.get("participantId"),[y]),w=b===e,T=s?f===g:f===`reviewer-${e}`,A=u?w:T,k=z.useCallback(()=>c(b?`./../${e}`:`./${e}`),[c,e,b]),O=u?k:()=>c(s?x?`/${l}/${o0(g)}?participantId=${x}`:`/${l}/${o0(g)}`:`/${l}/reviewer-${e}`),M=e.includes(".co.")?".co.":e.includes(".components.")?".components.":!1,L=e.includes("$")&&M&&e.includes(M)?e.split(M).at(-1):e;return R.jsxs(_l,{withinPortal:!0,position:"left",withArrow:!0,arrowSize:10,shadow:"md",opened:d,offset:20,children:[R.jsx(_l.Target,{children:R.jsx(He,{onMouseEnter:p,onMouseLeave:h,children:R.jsx(r9,{active:A,style:{lineHeight:"32px",height:"32px"},label:R.jsxs(He,{children:[i&&R.jsx(Fze,{size:16,style:{marginRight:4,marginBottom:-2},color:"orange"}),e!==L&&R.jsx(Qze,{size:16,style:{marginRight:4,marginBottom:-2},color:"var(--mantine-color-blue-outline)"}),R.jsx(Nt,{size:"sm",span:A,fw:A?"700":void 0,display:"inline",children:L})]}),onClick:O,disabled:t})})}),m&&(m.description||m.meta)&&R.jsx(_l.Dropdown,{onMouseLeave:h,children:R.jsxs(He,{children:[m.description&&R.jsxs(He,{children:[R.jsx(Nt,{fw:900,display:"inline-block",mr:2,children:"Description:"}),R.jsx(Nt,{fw:400,component:"span",children:m.description})]}),m.meta&&R.jsxs(He,{children:[R.jsx(Nt,{fw:"900",component:"span",children:"Task Meta: "}),R.jsx(Nt,{component:"pre",style:{margin:0,padding:0},children:`${JSON.stringify(m.meta,null,2)}`})]})]})})]})}function kO({configSequence:e,fullSequence:t,participantSequence:n,participantView:r,studyConfig:i,analysisNavigation:s}){var a;let o=Qy(e.components);return n&&r&&(o=oUt(Qy(e.components),Qy(n.components))),r||(o=[...((a=e.interruptions)==null?void 0:a.flatMap(u=>u.components))||[],...o]),R.jsx(R.Fragment,{children:o.map((u,l)=>{if(typeof u=="string")return R.jsx(aUt,{step:u,disabled:r&&(n==null?void 0:n.components[l])!==u,fullSequence:t,startIndex:l,interruption:e.interruptions&&e.interruptions.findIndex(h=>h.components.includes(u))>-1||!1,participantView:r,studyConfig:i,subSequence:n,analysisNavigation:s},l);const c=n==null?void 0:n.components.find(h=>typeof h!="string"&&h.orderPath===u.orderPath),f=c?C0(c).length-C5e(u,c):0,d=C0(u);return R.jsx(r9,{label:R.jsxs(He,{style:{opacity:f>0?1:.5},children:[R.jsx(Nt,{size:"sm",display:"inline",fw:700,children:u.id?u.id:u.order}),u.order==="random"||u.order==="latinSquare"?R.jsx(Ys,{label:u.order,position:"right",withArrow:!0,children:R.jsx(Mze,{size:"15",opacity:.5,style:{marginLeft:"5px",verticalAlign:"middle"}})}):null,r&&R.jsxs(g0,{ml:5,variant:"light",children:[f,"/",d.length]}),r&&u.interruptions&&R.jsx(g0,{ml:5,color:"orange",variant:"light",children:(c==null?void 0:c.components.filter(h=>{var p;return typeof h=="string"&&((p=u.interruptions)==null?void 0:p.flatMap(m=>m.components).includes(h))}).length)||0})]}),defaultOpened:!0,childrenOffset:32,style:{lineHeight:"32px",height:"32px"},children:R.jsx(He,{style:{borderLeft:"1px solid #e9ecef"},children:R.jsx(kO,{configSequence:u,participantSequence:c,fullSequence:t,participantView:r,studyConfig:i,analysisNavigation:s})})},l)})})}function A5e(e,t,n,r){e==null||e.nextParticipant().then(()=>{window.location.href=r}).catch(i=>{console.error(i)})}function Ppe({text:e}){return R.jsx(Ys,{label:e,multiline:!0,w:200,style:{whiteSpace:"normal"},withinPortal:!0,position:"bottom",children:R.jsx(aG,{size:16,style:{marginBottom:-3,marginLeft:4}})})}function uUt(){const e=Ai(h=>h.sequence),t=Ai(h=>h.metadata),{toggleStudyBrowser:n}=Tl(),r=y1(),i=gc(),s=Uw(),o=ZW(`/${s}`),{storageEngine:a}=Yo(),u=UT(),l=z.useMemo(()=>{let h=Qy(r.sequence);return h=BY(h,"root"),h.components.push("end"),h},[r.sequence]),[c,f]=z.useState("participant"),d=z.useMemo(()=>c==="allTrials"||u,[c,u]);return R.jsxs(hs.Aside,{p:"0",children:[R.jsx(hs.Section,{p:"md",children:R.jsxs(An,{direction:"row",justify:"space-between",children:[R.jsx(Nt,{size:"md",fw:700,pt:3,children:"Study Browser"}),R.jsx(Ys,{label:"Go to the sequence of the next participant in the experiment. Sequences can be different between participants due to randomization, etc.",w:280,multiline:!0,disabled:d,children:R.jsx(Bn,{variant:"light",leftSection:R.jsx(uG,{size:14}),onClick:()=>A5e(a,r,t,o),size:"xs",disabled:d,children:"Next Participant"})}),R.jsx(zb,{onClick:()=>i(n()),mt:1})]})}),R.jsx(hs.Section,{grow:!0,component:o1,p:"md",children:R.jsxs(ci,{value:c,onChange:f,children:[R.jsx(He,{style:{position:"sticky",top:0,backgroundColor:"white",zIndex:1},children:R.jsxs(ci.List,{grow:!0,children:[R.jsxs(ci.Tab,{value:"participant",children:["Participant View",R.jsx(Ppe,{text:"The Participants View shows items just as a participants would see them, considering randomization, omissions, etc. You can navigate between multiple participants using the next participant button."})]}),R.jsxs(ci.Tab,{value:"allTrials",disabled:u,children:["All Trials View",R.jsx(Ppe,{text:"The All Trials View shows all items in the order defined in the config."})]})]})}),R.jsx(ci.Panel,{value:"participant",children:R.jsx(kO,{configSequence:l,participantSequence:e,fullSequence:e,participantView:!0,studyConfig:r})}),R.jsx(ci.Panel,{value:"allTrials",children:R.jsx(kO,{configSequence:l,participantSequence:e,fullSequence:e,participantView:!1,studyConfig:r})})]})})]})}const lUt=z.createContext(null);function tc(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(l){try{u(r.next(l))}catch(c){s(c)}}function a(l){try{u(r.throw(l))}catch(c){s(c)}}function u(l){var c;l.done?i(l.value):(c=l.value,c instanceof n?c:new n(function(f){f(c)})).then(o,a)}u((r=r.apply(e,t||[])).next())})}let II=class{constructor(){this.listeners={}}on(t,n,r){if(this.listeners[t]||(this.listeners[t]=new Set),this.listeners[t].add(n),r==null?void 0:r.once){const i=()=>{this.un(t,i),this.un(t,n)};return this.on(t,i),i}return()=>this.un(t,n)}un(t,n){var r;(r=this.listeners[t])===null||r===void 0||r.delete(n)}once(t,n){return this.on(t,n,{once:!0})}unAll(){this.listeners={}}emit(t,...n){this.listeners[t]&&this.listeners[t].forEach(r=>r(...n))}};const A5={decode:function(e,t){return tc(this,void 0,void 0,function*(){const n=new AudioContext({sampleRate:t});return n.decodeAudioData(e).finally(()=>n.close())})},createBuffer:function(e,t){return typeof e[0]=="number"&&(e=[e]),function(n){const r=n[0];if(r.some(i=>i>1||i<-1)){const i=r.length;let s=0;for(let o=0;o<i;o++){const a=Math.abs(r[o]);a>s&&(s=a)}for(const o of n)for(let a=0;a<i;a++)o[a]/=s}}(e),{duration:t,length:e[0].length,sampleRate:e[0].length/t,numberOfChannels:e.length,getChannelData:n=>e==null?void 0:e[n],copyFromChannel:AudioBuffer.prototype.copyFromChannel,copyToChannel:AudioBuffer.prototype.copyToChannel}}};function k5e(e,t){const n=t.xmlns?document.createElementNS(t.xmlns,e):document.createElement(e);for(const[r,i]of Object.entries(t))if(r==="children")for(const[s,o]of Object.entries(t))typeof o=="string"?n.appendChild(document.createTextNode(o)):n.appendChild(k5e(s,o));else r==="style"?Object.assign(n.style,i):r==="textContent"?n.textContent=i:n.setAttribute(r,i.toString());return n}function Npe(e,t,n){const r=k5e(e,t||{});return n==null||n.appendChild(r),r}var cUt=Object.freeze({__proto__:null,createElement:Npe,default:Npe});const fUt={fetchBlob:function(e,t,n){return tc(this,void 0,void 0,function*(){const r=yield fetch(e,n);if(r.status>=400)throw new Error(`Failed to fetch ${e}: ${r.status} (${r.statusText})`);return function(i,s){tc(this,void 0,void 0,function*(){if(!i.body||!i.headers)return;const o=i.body.getReader(),a=Number(i.headers.get("Content-Length"))||0;let u=0;const l=f=>tc(this,void 0,void 0,function*(){u+=(f==null?void 0:f.length)||0;const d=Math.round(u/a*100);s(d)}),c=()=>tc(this,void 0,void 0,function*(){let f;try{f=yield o.read()}catch{return}f.done||(l(f.value),yield c())});c()})}(r.clone(),t),r.blob()})}};class dUt extends II{constructor(t){super(),this.isExternalMedia=!1,t.media?(this.media=t.media,this.isExternalMedia=!0):this.media=document.createElement("audio"),t.mediaControls&&(this.media.controls=!0),t.autoplay&&(this.media.autoplay=!0),t.playbackRate!=null&&this.onMediaEvent("canplay",()=>{t.playbackRate!=null&&(this.media.playbackRate=t.playbackRate)},{once:!0})}onMediaEvent(t,n,r){return this.media.addEventListener(t,n,r),()=>this.media.removeEventListener(t,n,r)}getSrc(){return this.media.currentSrc||this.media.src||""}revokeSrc(){const t=this.getSrc();t.startsWith("blob:")&&URL.revokeObjectURL(t)}canPlayType(t){return this.media.canPlayType(t)!==""}setSrc(t,n){const r=this.getSrc();if(t&&r===t)return;this.revokeSrc();const i=n instanceof Blob&&(this.canPlayType(n.type)||!t)?URL.createObjectURL(n):t;try{this.media.src=i}catch{this.media.src=t}}destroy(){this.media.pause(),this.isExternalMedia||(this.media.remove(),this.revokeSrc(),this.media.src="",this.media.load())}setMediaElement(t){this.media=t}play(){return tc(this,void 0,void 0,function*(){return this.media.play()})}pause(){this.media.pause()}isPlaying(){return!this.media.paused&&!this.media.ended}setTime(t){this.media.currentTime=t}getDuration(){return this.media.duration}getCurrentTime(){return this.media.currentTime}getVolume(){return this.media.volume}setVolume(t){this.media.volume=t}getMuted(){return this.media.muted}setMuted(t){this.media.muted=t}getPlaybackRate(){return this.media.playbackRate}isSeeking(){return this.media.seeking}setPlaybackRate(t,n){n!=null&&(this.media.preservesPitch=n),this.media.playbackRate=t}getMediaElement(){return this.media}setSinkId(t){return this.media.setSinkId(t)}}class uT extends II{constructor(t,n){super(),this.timeouts=[],this.isScrollable=!1,this.audioData=null,this.resizeObserver=null,this.lastContainerWidth=0,this.isDragging=!1,this.subscriptions=[],this.unsubscribeOnScroll=[],this.subscriptions=[],this.options=t;const r=this.parentFromOptionsContainer(t.container);this.parent=r;const[i,s]=this.initHtml();r.appendChild(i),this.container=i,this.scrollContainer=s.querySelector(".scroll"),this.wrapper=s.querySelector(".wrapper"),this.canvasWrapper=s.querySelector(".canvases"),this.progressWrapper=s.querySelector(".progress"),this.cursor=s.querySelector(".cursor"),n&&s.appendChild(n),this.initEvents()}parentFromOptionsContainer(t){let n;if(typeof t=="string"?n=document.querySelector(t):t instanceof HTMLElement&&(n=t),!n)throw new Error("Container not found");return n}initEvents(){const t=n=>{const r=this.wrapper.getBoundingClientRect(),i=n.clientX-r.left,s=n.clientY-r.top;return[i/r.width,s/r.height]};if(this.wrapper.addEventListener("click",n=>{const[r,i]=t(n);this.emit("click",r,i)}),this.wrapper.addEventListener("dblclick",n=>{const[r,i]=t(n);this.emit("dblclick",r,i)}),this.options.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.scrollContainer.addEventListener("scroll",()=>{const{scrollLeft:n,scrollWidth:r,clientWidth:i}=this.scrollContainer,s=n/r,o=(n+i)/r;this.emit("scroll",s,o,n,n+i)}),typeof ResizeObserver=="function"){const n=this.createDelay(100);this.resizeObserver=new ResizeObserver(()=>{n().then(()=>this.onContainerResize()).catch(()=>{})}),this.resizeObserver.observe(this.scrollContainer)}}onContainerResize(){const t=this.parent.clientWidth;t===this.lastContainerWidth&&this.options.height!=="auto"||(this.lastContainerWidth=t,this.reRender())}initDrag(){this.subscriptions.push(function(t,n,r,i,s=3,o=0,a=100){if(!t)return()=>{};const u=matchMedia("(pointer: coarse)").matches;let l=()=>{};const c=f=>{if(f.button!==o)return;f.preventDefault(),f.stopPropagation();let d=f.clientX,h=f.clientY,p=!1;const m=Date.now(),g=T=>{if(T.preventDefault(),T.stopPropagation(),u&&Date.now()-m<a)return;const A=T.clientX,k=T.clientY,I=A-d,O=k-h;if(p||Math.abs(I)>s||Math.abs(O)>s){const M=t.getBoundingClientRect(),{left:L,top:H}=M;p||(r==null||r(d-L,h-H),p=!0),n(I,O,A-L,k-H),d=A,h=k}},b=T=>{if(p){const A=T.clientX,k=T.clientY,I=t.getBoundingClientRect(),{left:O,top:M}=I;i==null||i(A-O,k-M)}l()},y=T=>{T.relatedTarget&&T.relatedTarget!==document.documentElement||b(T)},x=T=>{p&&(T.stopPropagation(),T.preventDefault())},w=T=>{p&&T.preventDefault()};document.addEventListener("pointermove",g),document.addEventListener("pointerup",b),document.addEventListener("pointerout",y),document.addEventListener("pointercancel",y),document.addEventListener("touchmove",w,{passive:!1}),document.addEventListener("click",x,{capture:!0}),l=()=>{document.removeEventListener("pointermove",g),document.removeEventListener("pointerup",b),document.removeEventListener("pointerout",y),document.removeEventListener("pointercancel",y),document.removeEventListener("touchmove",w),setTimeout(()=>{document.removeEventListener("click",x,{capture:!0})},10)}};return t.addEventListener("pointerdown",c),()=>{l(),t.removeEventListener("pointerdown",c)}}(this.wrapper,(t,n,r)=>{this.emit("drag",Math.max(0,Math.min(1,r/this.wrapper.getBoundingClientRect().width)))},t=>{this.isDragging=!0,this.emit("dragstart",Math.max(0,Math.min(1,t/this.wrapper.getBoundingClientRect().width)))},t=>{this.isDragging=!1,this.emit("dragend",Math.max(0,Math.min(1,t/this.wrapper.getBoundingClientRect().width)))}))}getHeight(t,n){var r;const i=((r=this.audioData)===null||r===void 0?void 0:r.numberOfChannels)||1;if(t==null)return 128;if(!isNaN(Number(t)))return Number(t);if(t==="auto"){const s=this.parent.clientHeight||128;return n!=null&&n.every(o=>!o.overlay)?s/i:s}return 128}initHtml(){const t=document.createElement("div"),n=t.attachShadow({mode:"open"}),r=this.options.cspNonce&&typeof this.options.cspNonce=="string"?this.options.cspNonce.replace(/"/g,""):"";return n.innerHTML=`
      <style${r?` nonce="${r}"`:""}>
        :host {
          user-select: none;
          min-width: 1px;
        }
        :host audio {
          display: block;
          width: 100%;
        }
        :host .scroll {
          overflow-x: auto;
          overflow-y: hidden;
          width: 100%;
          position: relative;
        }
        :host .noScrollbar {
          scrollbar-color: transparent;
          scrollbar-width: none;
        }
        :host .noScrollbar::-webkit-scrollbar {
          display: none;
          -webkit-appearance: none;
        }
        :host .wrapper {
          position: relative;
          overflow: visible;
          z-index: 2;
        }
        :host .canvases {
          min-height: ${this.getHeight(this.options.height,this.options.splitChannels)}px;
        }
        :host .canvases > div {
          position: relative;
        }
        :host canvas {
          display: block;
          position: absolute;
          top: 0;
          image-rendering: pixelated;
        }
        :host .progress {
          pointer-events: none;
          position: absolute;
          z-index: 2;
          top: 0;
          left: 0;
          width: 0;
          height: 100%;
          overflow: hidden;
        }
        :host .progress > div {
          position: relative;
        }
        :host .cursor {
          pointer-events: none;
          position: absolute;
          z-index: 5;
          top: 0;
          left: 0;
          height: 100%;
          border-radius: 2px;
        }
      </style>

      <div class="scroll" part="scroll">
        <div class="wrapper" part="wrapper">
          <div class="canvases" part="canvases"></div>
          <div class="progress" part="progress"></div>
          <div class="cursor" part="cursor"></div>
        </div>
      </div>
    `,[t,n]}setOptions(t){if(this.options.container!==t.container){const n=this.parentFromOptionsContainer(t.container);n.appendChild(this.container),this.parent=n}t.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.options=t,this.reRender()}getWrapper(){return this.wrapper}getWidth(){return this.scrollContainer.clientWidth}getScroll(){return this.scrollContainer.scrollLeft}setScroll(t){this.scrollContainer.scrollLeft=t}setScrollPercentage(t){const{scrollWidth:n}=this.scrollContainer,r=n*t;this.setScroll(r)}destroy(){var t,n;this.subscriptions.forEach(r=>r()),this.container.remove(),(t=this.resizeObserver)===null||t===void 0||t.disconnect(),(n=this.unsubscribeOnScroll)===null||n===void 0||n.forEach(r=>r()),this.unsubscribeOnScroll=[]}createDelay(t=10){let n,r;const i=()=>{n&&clearTimeout(n),r&&r()};return this.timeouts.push(i),()=>new Promise((s,o)=>{i(),r=o,n=setTimeout(()=>{n=void 0,r=void 0,s()},t)})}convertColorValues(t){if(!Array.isArray(t))return t||"";if(t.length<2)return t[0]||"";const n=document.createElement("canvas"),r=n.getContext("2d"),i=n.height*(window.devicePixelRatio||1),s=r.createLinearGradient(0,0,0,i),o=1/(t.length-1);return t.forEach((a,u)=>{const l=u*o;s.addColorStop(l,a)}),s}getPixelRatio(){return Math.max(1,window.devicePixelRatio||1)}renderBarWaveform(t,n,r,i){const s=t[0],o=t[1]||t[0],a=s.length,{width:u,height:l}=r.canvas,c=l/2,f=this.getPixelRatio(),d=n.barWidth?n.barWidth*f:1,h=n.barGap?n.barGap*f:n.barWidth?d/2:0,p=n.barRadius||0,m=u/(d+h)/a,g=p&&"roundRect"in r?"roundRect":"rect";r.beginPath();let b=0,y=0,x=0;for(let w=0;w<=a;w++){const T=Math.round(w*m);if(T>b){const I=Math.round(y*c*i),O=I+Math.round(x*c*i)||1;let M=c-I;n.barAlign==="top"?M=0:n.barAlign==="bottom"&&(M=l-O),r[g](b*(d+h),M,d,O,p),b=T,y=0,x=0}const A=Math.abs(s[w]||0),k=Math.abs(o[w]||0);A>y&&(y=A),k>x&&(x=k)}r.fill(),r.closePath()}renderLineWaveform(t,n,r,i){const s=o=>{const a=t[o]||t[0],u=a.length,{height:l}=r.canvas,c=l/2,f=r.canvas.width/u;r.moveTo(0,c);let d=0,h=0;for(let p=0;p<=u;p++){const m=Math.round(p*f);if(m>d){const b=c+(Math.round(h*c*i)||1)*(o===0?-1:1);r.lineTo(d,b),d=m,h=0}const g=Math.abs(a[p]||0);g>h&&(h=g)}r.lineTo(d,c)};r.beginPath(),s(0),s(1),r.fill(),r.closePath()}renderWaveform(t,n,r){if(r.fillStyle=this.convertColorValues(n.waveColor),n.renderFunction)return void n.renderFunction(t,r);let i=n.barHeight||1;if(n.normalize){const s=Array.from(t[0]).reduce((o,a)=>Math.max(o,Math.abs(a)),0);i=s?1/s:1}n.barWidth||n.barGap||n.barAlign?this.renderBarWaveform(t,n,r,i):this.renderLineWaveform(t,n,r,i)}renderSingleCanvas(t,n,r,i,s,o,a){const u=this.getPixelRatio(),l=document.createElement("canvas");l.width=Math.round(r*u),l.height=Math.round(i*u),l.style.width=`${r}px`,l.style.height=`${i}px`,l.style.left=`${Math.round(s)}px`,o.appendChild(l);const c=l.getContext("2d");if(this.renderWaveform(t,n,c),l.width>0&&l.height>0){const f=l.cloneNode(),d=f.getContext("2d");d.drawImage(l,0,0),d.globalCompositeOperation="source-in",d.fillStyle=this.convertColorValues(n.progressColor),d.fillRect(0,0,l.width,l.height),a.appendChild(f)}}renderMultiCanvas(t,n,r,i,s,o){const a=this.getPixelRatio(),{clientWidth:u}=this.scrollContainer,l=r/a;let c=Math.min(uT.MAX_CANVAS_WIDTH,u,l),f={};if(c===0)return;if(n.barWidth||n.barGap){const g=n.barWidth||.5,b=g+(n.barGap||g/2);c%b!=0&&(c=Math.floor(c/b)*b)}const d=g=>{if(g<0||g>=h||f[g])return;f[g]=!0;const b=g*c,y=Math.min(l-b,c);if(y<=0)return;const x=t.map(w=>{const T=Math.floor(b/l*w.length),A=Math.floor((b+y)/l*w.length);return w.slice(T,A)});this.renderSingleCanvas(x,n,y,i,b,s,o)},h=Math.ceil(l/c);if(!this.isScrollable){for(let g=0;g<h;g++)d(g);return}const p=this.scrollContainer.scrollLeft/l,m=Math.floor(p*h);if(d(m-1),d(m),d(m+1),h>1){const g=this.on("scroll",()=>{const{scrollLeft:b}=this.scrollContainer,y=Math.floor(b/l*h);Object.keys(f).length>uT.MAX_NODES&&(s.innerHTML="",o.innerHTML="",f={}),d(y-1),d(y),d(y+1)});this.unsubscribeOnScroll.push(g)}}renderChannel(t,n,r,i){var{overlay:s}=n,o=function(c,f){var d={};for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&f.indexOf(h)<0&&(d[h]=c[h]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function"){var p=0;for(h=Object.getOwnPropertySymbols(c);p<h.length;p++)f.indexOf(h[p])<0&&Object.prototype.propertyIsEnumerable.call(c,h[p])&&(d[h[p]]=c[h[p]])}return d}(n,["overlay"]);const a=document.createElement("div"),u=this.getHeight(o.height,o.splitChannels);a.style.height=`${u}px`,s&&i>0&&(a.style.marginTop=`-${u}px`),this.canvasWrapper.style.minHeight=`${u}px`,this.canvasWrapper.appendChild(a);const l=a.cloneNode();this.progressWrapper.appendChild(l),this.renderMultiCanvas(t,o,r,u,a,l)}render(t){return tc(this,void 0,void 0,function*(){var n;this.timeouts.forEach(u=>u()),this.timeouts=[],this.canvasWrapper.innerHTML="",this.progressWrapper.innerHTML="",this.options.width!=null&&(this.scrollContainer.style.width=typeof this.options.width=="number"?`${this.options.width}px`:this.options.width);const r=this.getPixelRatio(),i=this.scrollContainer.clientWidth,s=Math.ceil(t.duration*(this.options.minPxPerSec||0));this.isScrollable=s>i;const o=this.options.fillParent&&!this.isScrollable,a=(o?i:s)*r;if(this.wrapper.style.width=o?"100%":`${s}px`,this.scrollContainer.style.overflowX=this.isScrollable?"auto":"hidden",this.scrollContainer.classList.toggle("noScrollbar",!!this.options.hideScrollbar),this.cursor.style.backgroundColor=`${this.options.cursorColor||this.options.progressColor}`,this.cursor.style.width=`${this.options.cursorWidth}px`,this.audioData=t,this.emit("render"),this.options.splitChannels)for(let u=0;u<t.numberOfChannels;u++){const l=Object.assign(Object.assign({},this.options),(n=this.options.splitChannels)===null||n===void 0?void 0:n[u]);this.renderChannel([t.getChannelData(u)],l,a,u)}else{const u=[t.getChannelData(0)];t.numberOfChannels>1&&u.push(t.getChannelData(1)),this.renderChannel(u,this.options,a,0)}Promise.resolve().then(()=>this.emit("rendered"))})}reRender(){if(this.unsubscribeOnScroll.forEach(r=>r()),this.unsubscribeOnScroll=[],!this.audioData)return;const{scrollWidth:t}=this.scrollContainer,{right:n}=this.progressWrapper.getBoundingClientRect();if(this.render(this.audioData),this.isScrollable&&t!==this.scrollContainer.scrollWidth){const{right:r}=this.progressWrapper.getBoundingClientRect();let i=r-n;i*=2,i=i<0?Math.floor(i):Math.ceil(i),i/=2,this.scrollContainer.scrollLeft+=i}}zoom(t){this.options.minPxPerSec=t,this.reRender()}scrollIntoView(t,n=!1){const{scrollLeft:r,scrollWidth:i,clientWidth:s}=this.scrollContainer,o=t*i,a=r,u=r+s,l=s/2;if(this.isDragging)o+30>u?this.scrollContainer.scrollLeft+=30:o-30<a&&(this.scrollContainer.scrollLeft-=30);else{(o<a||o>u)&&(this.scrollContainer.scrollLeft=o-(this.options.autoCenter?l:0));const c=o-r-l;n&&this.options.autoCenter&&c>0&&(this.scrollContainer.scrollLeft+=Math.min(c,10))}{const c=this.scrollContainer.scrollLeft,f=c/i,d=(c+s)/i;this.emit("scroll",f,d,c,c+s)}}renderProgress(t,n){if(isNaN(t))return;const r=100*t;this.canvasWrapper.style.clipPath=`polygon(${r}% 0, 100% 0, 100% 100%, ${r}% 100%)`,this.progressWrapper.style.width=`${r}%`,this.cursor.style.left=`${r}%`,this.cursor.style.transform=`translateX(-${Math.round(r)===100?this.options.cursorWidth:0}px)`,this.isScrollable&&this.options.autoScroll&&this.scrollIntoView(t,n)}exportImage(t,n,r){return tc(this,void 0,void 0,function*(){const i=this.canvasWrapper.querySelectorAll("canvas");if(!i.length)throw new Error("No waveform data");if(r==="dataURL"){const s=Array.from(i).map(o=>o.toDataURL(t,n));return Promise.resolve(s)}return Promise.all(Array.from(i).map(s=>new Promise((o,a)=>{s.toBlob(u=>{u?o(u):a(new Error("Could not export image"))},t,n)})))})}}uT.MAX_CANVAS_WIDTH=8e3,uT.MAX_NODES=10;class hUt extends II{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",()=>{requestAnimationFrame(()=>{this.emit("tick")})}),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}}class Dpe extends II{constructor(t=new AudioContext){super(),this.bufferNode=null,this.playStartTime=0,this.playedDuration=0,this._muted=!1,this._playbackRate=1,this._duration=void 0,this.buffer=null,this.currentSrc="",this.paused=!0,this.crossOrigin=null,this.seeking=!1,this.autoplay=!1,this.addEventListener=this.on,this.removeEventListener=this.un,this.audioContext=t,this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination)}load(){return tc(this,void 0,void 0,function*(){})}get src(){return this.currentSrc}set src(t){if(this.currentSrc=t,this._duration=void 0,!t)return this.buffer=null,void this.emit("emptied");fetch(t).then(n=>{if(n.status>=400)throw new Error(`Failed to fetch ${t}: ${n.status} (${n.statusText})`);return n.arrayBuffer()}).then(n=>this.currentSrc!==t?null:this.audioContext.decodeAudioData(n)).then(n=>{this.currentSrc===t&&(this.buffer=n,this.emit("loadedmetadata"),this.emit("canplay"),this.autoplay&&this.play())})}_play(){var t;if(!this.paused)return;this.paused=!1,(t=this.bufferNode)===null||t===void 0||t.disconnect(),this.bufferNode=this.audioContext.createBufferSource(),this.buffer&&(this.bufferNode.buffer=this.buffer),this.bufferNode.playbackRate.value=this._playbackRate,this.bufferNode.connect(this.gainNode);let n=this.playedDuration*this._playbackRate;n>=this.duration&&(n=0,this.playedDuration=0),this.bufferNode.start(this.audioContext.currentTime,n),this.playStartTime=this.audioContext.currentTime,this.bufferNode.onended=()=>{this.currentTime>=this.duration&&(this.pause(),this.emit("ended"))}}_pause(){var t;this.paused=!0,(t=this.bufferNode)===null||t===void 0||t.stop(),this.playedDuration+=this.audioContext.currentTime-this.playStartTime}play(){return tc(this,void 0,void 0,function*(){this.paused&&(this._play(),this.emit("play"))})}pause(){this.paused||(this._pause(),this.emit("pause"))}stopAt(t){var n,r;const i=t-this.currentTime;(n=this.bufferNode)===null||n===void 0||n.stop(this.audioContext.currentTime+i),(r=this.bufferNode)===null||r===void 0||r.addEventListener("ended",()=>{this.bufferNode=null,this.pause()},{once:!0})}setSinkId(t){return tc(this,void 0,void 0,function*(){return this.audioContext.setSinkId(t)})}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this.bufferNode&&(this.bufferNode.playbackRate.value=t)}get currentTime(){return(this.paused?this.playedDuration:this.playedDuration+(this.audioContext.currentTime-this.playStartTime))*this._playbackRate}set currentTime(t){const n=!this.paused;n&&this._pause(),this.playedDuration=t/this._playbackRate,n&&this._play(),this.emit("seeking"),this.emit("timeupdate")}get duration(){var t,n;return(t=this._duration)!==null&&t!==void 0?t:((n=this.buffer)===null||n===void 0?void 0:n.duration)||0}set duration(t){this._duration=t}get volume(){return this.gainNode.gain.value}set volume(t){this.gainNode.gain.value=t,this.emit("volumechange")}get muted(){return this._muted}set muted(t){this._muted!==t&&(this._muted=t,this._muted?this.gainNode.disconnect():this.gainNode.connect(this.audioContext.destination))}canPlayType(t){return/^(audio|video)\//.test(t)}getGainNode(){return this.gainNode}getChannelData(){const t=[];if(!this.buffer)return t;const n=this.buffer.numberOfChannels;for(let r=0;r<n;r++)t.push(this.buffer.getChannelData(r));return t}}const pUt={waveColor:"#999",progressColor:"#555",cursorWidth:1,minPxPerSec:0,fillParent:!0,interact:!0,dragToSeek:!1,autoScroll:!0,autoCenter:!0,sampleRate:8e3};class J4 extends dUt{static create(t){return new J4(t)}constructor(t){const n=t.media||(t.backend==="WebAudio"?new Dpe:void 0);super({media:n,mediaControls:t.mediaControls,autoplay:t.autoplay,playbackRate:t.audioRate}),this.plugins=[],this.decodedData=null,this.subscriptions=[],this.mediaSubscriptions=[],this.abortController=null,this.options=Object.assign({},pUt,t),this.timer=new hUt;const r=n?void 0:this.getMediaElement();this.renderer=new uT(this.options,r),this.initPlayerEvents(),this.initRendererEvents(),this.initTimerEvents(),this.initPlugins();const i=this.options.url||this.getSrc()||"";Promise.resolve().then(()=>{this.emit("init");const{peaks:s,duration:o}=this.options;(i||s&&o)&&this.load(i,s,o).catch(()=>null)})}updateProgress(t=this.getCurrentTime()){return this.renderer.renderProgress(t/this.getDuration(),this.isPlaying()),t}initTimerEvents(){this.subscriptions.push(this.timer.on("tick",()=>{if(!this.isSeeking()){const t=this.updateProgress();this.emit("timeupdate",t),this.emit("audioprocess",t)}}))}initPlayerEvents(){this.isPlaying()&&(this.emit("play"),this.timer.start()),this.mediaSubscriptions.push(this.onMediaEvent("timeupdate",()=>{const t=this.updateProgress();this.emit("timeupdate",t)}),this.onMediaEvent("play",()=>{this.emit("play"),this.timer.start()}),this.onMediaEvent("pause",()=>{this.emit("pause"),this.timer.stop()}),this.onMediaEvent("emptied",()=>{this.timer.stop()}),this.onMediaEvent("ended",()=>{this.emit("timeupdate",this.getDuration()),this.emit("finish")}),this.onMediaEvent("seeking",()=>{this.emit("seeking",this.getCurrentTime())}),this.onMediaEvent("error",t=>{var n;this.emit("error",(n=this.getMediaElement().error)!==null&&n!==void 0?n:new Error("Media error"))}))}initRendererEvents(){this.subscriptions.push(this.renderer.on("click",(t,n)=>{this.options.interact&&(this.seekTo(t),this.emit("interaction",t*this.getDuration()),this.emit("click",t,n))}),this.renderer.on("dblclick",(t,n)=>{this.emit("dblclick",t,n)}),this.renderer.on("scroll",(t,n,r,i)=>{const s=this.getDuration();this.emit("scroll",t*s,n*s,r,i)}),this.renderer.on("render",()=>{this.emit("redraw")}),this.renderer.on("rendered",()=>{this.emit("redrawcomplete")}),this.renderer.on("dragstart",t=>{this.emit("dragstart",t)}),this.renderer.on("dragend",t=>{this.emit("dragend",t)}));{let t;this.subscriptions.push(this.renderer.on("drag",n=>{if(!this.options.interact)return;let r;this.renderer.renderProgress(n),clearTimeout(t),this.isPlaying()?r=0:this.options.dragToSeek===!0?r=200:typeof this.options.dragToSeek=="object"&&this.options.dragToSeek!==void 0&&(r=this.options.dragToSeek.debounceTime),t=setTimeout(()=>{this.seekTo(n)},r),this.emit("interaction",n*this.getDuration()),this.emit("drag",n)}))}}initPlugins(){var t;!((t=this.options.plugins)===null||t===void 0)&&t.length&&this.options.plugins.forEach(n=>{this.registerPlugin(n)})}unsubscribePlayerEvents(){this.mediaSubscriptions.forEach(t=>t()),this.mediaSubscriptions=[]}setOptions(t){this.options=Object.assign({},this.options,t),t.duration&&!t.peaks&&(this.decodedData=A5.createBuffer(this.exportPeaks(),t.duration)),t.peaks&&t.duration&&(this.decodedData=A5.createBuffer(t.peaks,t.duration)),this.renderer.setOptions(this.options),t.audioRate&&this.setPlaybackRate(t.audioRate),t.mediaControls!=null&&(this.getMediaElement().controls=t.mediaControls)}registerPlugin(t){return t._init(this),this.plugins.push(t),this.subscriptions.push(t.once("destroy",()=>{this.plugins=this.plugins.filter(n=>n!==t)})),t}getWrapper(){return this.renderer.getWrapper()}getWidth(){return this.renderer.getWidth()}getScroll(){return this.renderer.getScroll()}setScroll(t){return this.renderer.setScroll(t)}setScrollTime(t){const n=t/this.getDuration();this.renderer.setScrollPercentage(n)}getActivePlugins(){return this.plugins}loadAudio(t,n,r,i){return tc(this,void 0,void 0,function*(){var s;if(this.emit("load",t),!this.options.media&&this.isPlaying()&&this.pause(),this.decodedData=null,!n&&!r){const a=this.options.fetchParams||{};window.AbortController&&!a.signal&&(this.abortController=new AbortController,a.signal=(s=this.abortController)===null||s===void 0?void 0:s.signal);const u=c=>this.emit("loading",c);n=yield fUt.fetchBlob(t,u,a);const l=this.options.blobMimeType;l&&(n=new Blob([n],{type:l}))}this.setSrc(t,n);const o=yield new Promise(a=>{const u=i||this.getDuration();u?a(u):this.mediaSubscriptions.push(this.onMediaEvent("loadedmetadata",()=>a(this.getDuration()),{once:!0}))});if(!t&&!n){const a=this.getMediaElement();a instanceof Dpe&&(a.duration=o)}if(r)this.decodedData=A5.createBuffer(r,o||0);else if(n){const a=yield n.arrayBuffer();this.decodedData=yield A5.decode(a,this.options.sampleRate)}this.decodedData&&(this.emit("decode",this.getDuration()),this.renderer.render(this.decodedData)),this.emit("ready",this.getDuration())})}load(t,n,r){return tc(this,void 0,void 0,function*(){try{return yield this.loadAudio(t,void 0,n,r)}catch(i){throw this.emit("error",i),i}})}loadBlob(t,n,r){return tc(this,void 0,void 0,function*(){try{return yield this.loadAudio("",t,n,r)}catch(i){throw this.emit("error",i),i}})}zoom(t){if(!this.decodedData)throw new Error("No audio loaded");this.renderer.zoom(t),this.emit("zoom",t)}getDecodedData(){return this.decodedData}exportPeaks({channels:t=2,maxLength:n=8e3,precision:r=1e4}={}){if(!this.decodedData)throw new Error("The audio has not been decoded yet");const i=Math.min(t,this.decodedData.numberOfChannels),s=[];for(let o=0;o<i;o++){const a=this.decodedData.getChannelData(o),u=[],l=a.length/n;for(let c=0;c<n;c++){const f=a.slice(Math.floor(c*l),Math.ceil((c+1)*l));let d=0;for(let h=0;h<f.length;h++){const p=f[h];Math.abs(p)>Math.abs(d)&&(d=p)}u.push(Math.round(d*r)/r)}s.push(u)}return s}getDuration(){let t=super.getDuration()||0;return t!==0&&t!==1/0||!this.decodedData||(t=this.decodedData.duration),t}toggleInteraction(t){this.options.interact=t}setTime(t){super.setTime(t),this.updateProgress(t),this.emit("timeupdate",t)}seekTo(t){const n=this.getDuration()*t;this.setTime(n)}playPause(){return tc(this,void 0,void 0,function*(){return this.isPlaying()?this.pause():this.play()})}stop(){this.pause(),this.setTime(0)}skip(t){this.setTime(this.getCurrentTime()+t)}empty(){this.load("",[[0]],.001)}setMediaElement(t){this.unsubscribePlayerEvents(),super.setMediaElement(t),this.initPlayerEvents()}exportImage(){return tc(this,arguments,void 0,function*(t="image/png",n=1,r="dataURL"){return this.renderer.exportImage(t,n,r)})}destroy(){var t;this.emit("destroy"),(t=this.abortController)===null||t===void 0||t.abort(),this.plugins.forEach(n=>n.destroy()),this.subscriptions.forEach(n=>n()),this.unsubscribePlayerEvents(),this.timer.destroy(),this.renderer.destroy(),super.destroy()}}J4.BasePlugin=class extends II{constructor(e){super(),this.subscriptions=[],this.options=e}onInit(){}_init(e){this.wavesurfer=e,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(e=>e())}},J4.dom=cUt;function mUt(e){return J4.create(e)}function gUt(e){const{plugin:t,options:n,creator:r="create"}=e,i=t[r];if(!t)throw new Error("Please pass a valid plugin in plugin list");if(!r)throw new Error("Please pass the creator function name in 'creator' property.");if(typeof i!="function")throw new Error(`"${r}" is not callable on given plugin. Please pass a valid 'creator' in plugins list.`);return i(n)}const Ope=e=>e.reduce((t,n)=>(t[n[0]]=n[1],t),{}),yUt=(e,t)=>{const n=Object.entries(e),r=Object.entries(t),i=n.filter(([o])=>r.findIndex(([a])=>a===o)===-1),s=r.filter(([o])=>n.findIndex(([a])=>a===o)===-1);return{disabled:Ope(i),enabled:Ope(s)}};function Mpe(e,t){const n={},r=[...t];for(;r.length>=1;){const i=r.shift();!!e[i.key]?n[i.key]=e[i.key]:n[i.key]=gUt(i)}return n}function vUt({container:e,plugins:t=[],onMount:n,...r}){const i=z.useRef(!1),[s,o]=z.useState({}),a=z.useRef([]),[u,l]=z.useState(null);return z.useEffect(()=>{if(!e)return;const c=e;if(i.current)return;i.current=!0;const f=Mpe(s,t);a.current=Object.keys(f);const d=mUt({container:e,...r,plugins:Object.values(f)});return n==null||n(d),o(f),l(d),()=>{c!==e&&d.destroy()}},[e]),z.useEffect(()=>{if(u){const c=Mpe(s,t),{disabled:f,enabled:d}=yUt(s,c);Object.keys(f).forEach(h=>{f[h].destroy()}),Object.keys(d).forEach(h=>{a.current.includes(h)||(console.log("register plugin",h,d[h]),u==null||u.registerPlugin(d[h]))}),a.current=Object.keys(d),o(c)}},[t]),[u,s,Object.values(s)]}function R5e({children:e,plugins:t=[],onMount:n,...r}){const i=vUt({plugins:t,onMount:n,...r});return sr.createElement(lUt.Provider,{value:i},e)}const I5e=({id:e="waveform",children:t})=>sr.createElement("div",{id:e},t);function Nj(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(l){try{u(r.next(l))}catch(c){s(c)}}function a(l){try{u(r.throw(l))}catch(c){s(c)}}function u(l){var c;l.done?i(l.value):(c=l.value,c instanceof n?c:new n(function(f){f(c)})).then(o,a)}u((r=r.apply(e,[])).next())})}class P5e{constructor(){this.listeners={}}on(t,n,r){if(this.listeners[t]||(this.listeners[t]=new Set),this.listeners[t].add(n),r==null?void 0:r.once){const i=()=>{this.un(t,i),this.un(t,n)};return this.on(t,i),i}return()=>this.un(t,n)}un(t,n){var r;(r=this.listeners[t])===null||r===void 0||r.delete(n)}once(t,n){return this.on(t,n,{once:!0})}unAll(){this.listeners={}}emit(t,...n){this.listeners[t]&&this.listeners[t].forEach(r=>r(...n))}}class bUt extends P5e{constructor(t){super(),this.subscriptions=[],this.options=t}onInit(){}_init(t){this.wavesurfer=t,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(t=>t())}}class xUt extends P5e{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",()=>{requestAnimationFrame(()=>{this.emit("tick")})}),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}}const _Ut=["audio/webm","audio/wav","audio/mpeg","audio/mp4","audio/mp3"];class Gee extends bUt{constructor(t){var n,r,i,s,o,a;super(Object.assign(Object.assign({},t),{audioBitsPerSecond:(n=t.audioBitsPerSecond)!==null&&n!==void 0?n:128e3,scrollingWaveform:(r=t.scrollingWaveform)!==null&&r!==void 0&&r,scrollingWaveformWindow:(i=t.scrollingWaveformWindow)!==null&&i!==void 0?i:5,continuousWaveform:(s=t.continuousWaveform)!==null&&s!==void 0&&s,renderRecordedAudio:(o=t.renderRecordedAudio)===null||o===void 0||o,mediaRecorderTimeslice:(a=t.mediaRecorderTimeslice)!==null&&a!==void 0?a:void 0})),this.stream=null,this.mediaRecorder=null,this.dataWindow=null,this.isWaveformPaused=!1,this.lastStartTime=0,this.lastDuration=0,this.duration=0,this.timer=new xUt,this.subscriptions.push(this.timer.on("tick",()=>{const u=performance.now()-this.lastStartTime;this.duration=this.isPaused()?this.duration:this.lastDuration+u,this.emit("record-progress",this.duration)}))}static create(t){return new Gee(t||{})}renderMicStream(t){var n;const r=new AudioContext,i=r.createMediaStreamSource(t),s=r.createAnalyser();i.connect(s),this.options.continuousWaveform&&(s.fftSize=32);const o=s.frequencyBinCount,a=new Float32Array(o);let u=0;this.wavesurfer&&((n=this.originalOptions)!==null&&n!==void 0||(this.originalOptions=Object.assign({},this.wavesurfer.options)),this.wavesurfer.options.interact=!1,this.options.scrollingWaveform&&(this.wavesurfer.options.cursorWidth=0));const l=setInterval(()=>{var c,f,d,h;if(!this.isWaveformPaused){if(s.getFloatTimeDomainData(a),this.options.scrollingWaveform){const p=Math.floor((this.options.scrollingWaveformWindow||0)*r.sampleRate),m=Math.min(p,this.dataWindow?this.dataWindow.length+o:o),g=new Float32Array(p);if(this.dataWindow){const b=Math.max(0,p-this.dataWindow.length);g.set(this.dataWindow.slice(-m+o),b)}g.set(a,p-o),this.dataWindow=g}else if(this.options.continuousWaveform){if(!this.dataWindow){const m=this.options.continuousWaveformDuration?Math.round(100*this.options.continuousWaveformDuration):((f=(c=this.wavesurfer)===null||c===void 0?void 0:c.getWidth())!==null&&f!==void 0?f:0)*window.devicePixelRatio;this.dataWindow=new Float32Array(m)}let p=0;for(let m=0;m<o;m++){const g=Math.abs(a[m]);g>p&&(p=g)}if(u+1>this.dataWindow.length){const m=new Float32Array(2*this.dataWindow.length);m.set(this.dataWindow,0),this.dataWindow=m}this.dataWindow[u]=p,u++}else this.dataWindow=a;if(this.wavesurfer){const p=((h=(d=this.dataWindow)===null||d===void 0?void 0:d.length)!==null&&h!==void 0?h:0)/100;this.wavesurfer.load("",[this.dataWindow],this.options.scrollingWaveform?this.options.scrollingWaveformWindow:p).then(()=>{this.wavesurfer&&this.options.continuousWaveform&&(this.wavesurfer.setTime(this.getDuration()/1e3),this.wavesurfer.options.minPxPerSec||this.wavesurfer.setOptions({minPxPerSec:this.wavesurfer.getWidth()/this.wavesurfer.getDuration()}))}).catch(m=>{console.error("Error rendering real-time recording data:",m)})}}},10);return{onDestroy:()=>{clearInterval(l),i==null||i.disconnect(),r==null||r.close()},onEnd:()=>{this.isWaveformPaused=!0,clearInterval(l),this.stopMic()}}}startMic(t){return Nj(this,void 0,void 0,function*(){let n;try{n=yield navigator.mediaDevices.getUserMedia({audio:!(t!=null&&t.deviceId)||{deviceId:t.deviceId}})}catch(s){throw new Error("Error accessing the microphone: "+s.message)}const{onDestroy:r,onEnd:i}=this.renderMicStream(n);return this.subscriptions.push(this.once("destroy",r)),this.subscriptions.push(this.once("record-end",i)),this.stream=n,n})}stopMic(){this.stream&&(this.stream.getTracks().forEach(t=>t.stop()),this.stream=null,this.mediaRecorder=null)}startRecording(t){return Nj(this,void 0,void 0,function*(){const n=this.stream||(yield this.startMic(t));this.dataWindow=null;const r=this.mediaRecorder||new MediaRecorder(n,{mimeType:this.options.mimeType||_Ut.find(o=>MediaRecorder.isTypeSupported(o)),audioBitsPerSecond:this.options.audioBitsPerSecond});this.mediaRecorder=r,this.stopRecording();const i=[];r.ondataavailable=o=>{o.data.size>0&&i.push(o.data),this.emit("record-data-available",o.data)};const s=o=>{var a;const u=new Blob(i,{type:r.mimeType});this.emit(o,u),this.options.renderRecordedAudio&&(this.applyOriginalOptionsIfNeeded(),(a=this.wavesurfer)===null||a===void 0||a.load(URL.createObjectURL(u)))};r.onpause=()=>s("record-pause"),r.onstop=()=>s("record-end"),r.start(this.options.mediaRecorderTimeslice),this.lastStartTime=performance.now(),this.lastDuration=0,this.duration=0,this.isWaveformPaused=!1,this.timer.start(),this.emit("record-start")})}getDuration(){return this.duration}isRecording(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)==="recording"}isPaused(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)==="paused"}isActive(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)!=="inactive"}stopRecording(){var t;this.isActive()&&((t=this.mediaRecorder)===null||t===void 0||t.stop(),this.timer.stop())}pauseRecording(){var t,n;this.isRecording()&&(this.isWaveformPaused=!0,(t=this.mediaRecorder)===null||t===void 0||t.requestData(),(n=this.mediaRecorder)===null||n===void 0||n.pause(),this.timer.stop(),this.lastDuration=this.duration)}resumeRecording(){var t;this.isPaused()&&(this.isWaveformPaused=!1,(t=this.mediaRecorder)===null||t===void 0||t.resume(),this.timer.start(),this.lastStartTime=performance.now(),this.emit("record-resume"))}static getAvailableAudioDevices(){return Nj(this,void 0,void 0,function*(){return navigator.mediaDevices.enumerateDevices().then(t=>t.filter(n=>n.kind==="audioinput"))})}destroy(){this.applyOriginalOptionsIfNeeded(),super.destroy(),this.stopRecording(),this.stopMic()}applyOriginalOptionsIfNeeded(){this.wavesurfer&&this.originalOptions&&(this.wavesurfer.setOptions(this.originalOptions),delete this.originalOptions)}}function wUt({width:e=70,height:t=36}){const n=z.useRef(null),r=z.useRef(null),[i,s]=z.useState(!1);z.useEffect(()=>{if(i&&n.current){const a=n.current.registerPlugin(Gee.create({scrollingWaveform:!0,renderRecordedAudio:!1}));r.current=a,navigator.userAgent.includes("Firefox")||a.startRecording(),n.current.setOptions({height:t,waveColor:"#FA5252"})}return()=>{var a,u;i&&n.current&&((a=r.current)==null||a.stopRecording(),(u=r.current)==null||u.destroy(),n.current.destroy())}},[i]);const o=z.useCallback(a=>{n.current=a,s(!0)},[]);return R.jsx(He,{id:"waveformDiv",style:{width:`${e}px`,height:`${t}px`},children:R.jsx(R5e,{onMount:o,plugins:[],container:"#waveformDiv",height:t,children:R.jsx(I5e,{id:"waveform",height:t})})})}function EUt({studyNavigatorEnabled:e,dataCollectionEnabled:t}){const n=Ai(I=>I.config),r=Ai(I=>I.metadata),i=jY(),s=gc(),{toggleShowHelpText:o,toggleStudyBrowser:a,incrementHelpCounter:u}=Tl(),{storageEngine:l}=Yo(),c=F0(),f=dp(),d=i.length-1,h=typeof f=="number"?f/d*100:0,[p,m]=z.useState(!1),g=n==null?void 0:n.uiConfig.logoPath,b=n==null?void 0:n.uiConfig.withProgressBar,y=Uw(),x=ZW(`/${y}`),w=z.useRef(null),[T,A]=z.useState(!1),k=Ai(I=>I.isRecording);return z.useEffect(()=>{const I=w.current;I&&A(I.scrollWidth>I.offsetWidth)},[n]),R.jsx(hs.Header,{p:"md",children:R.jsxs(Dm,{mt:-7,align:"center",children:[R.jsx(Dm.Col,{span:4,children:R.jsxs(An,{align:"center",children:[R.jsx(Hb,{w:40,src:`${ju}${g}`,alt:"Study Logo"}),R.jsx(Jd,{w:"md"}),R.jsx(wo,{ref:w,order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},title:T?n==null?void 0:n.studyMetadata.title:void 0,children:n==null?void 0:n.studyMetadata.title})]})}),R.jsx(Dm.Col,{span:4,children:b&&R.jsx(_T,{radius:"md",size:"lg",value:h})}),R.jsx(Dm.Col,{span:4,children:R.jsxs(co,{wrap:"nowrap",justify:"right",children:[k?R.jsxs(co,{ml:"xl",gap:20,wrap:"nowrap",children:[R.jsx(Nt,{color:"red",children:"Recording audio"}),R.jsx(wUt,{})]}):null,!t&&R.jsx(Ys,{multiline:!0,withArrow:!0,arrowSize:6,w:300,label:"This is a demo version of the study, were not collecting any data.",children:R.jsx(g0,{size:"lg",color:"orange",children:"Demo Mode"})}),(n==null?void 0:n.uiConfig.helpTextPath)!==void 0&&R.jsx(Bn,{variant:"outline",onClick:()=>{s(o()),s(u({identifier:`${c}_${f}`}))},children:"Help"}),R.jsxs(Gc,{shadow:"md",width:200,withinPortal:!0,opened:p,onChange:m,children:[R.jsx(Gc.Target,{children:R.jsx(Ub,{size:"lg",className:"studyBrowserMenuDropdown",variant:"subtle",color:"gray",children:R.jsx(Hze,{})})}),R.jsxs(Gc.Dropdown,{children:[e&&R.jsx(Gc.Item,{leftSection:R.jsx(nVe,{size:14}),onClick:()=>s(a()),children:"Study Browser"}),R.jsx(Gc.Item,{component:"a",href:n!==null?`mailto:${n.uiConfig.contactEmail}`:void 0,leftSection:R.jsx(Kze,{size:14}),children:"Contact"}),e&&R.jsx(Gc.Item,{leftSection:R.jsx(uG,{size:14}),onClick:()=>A5e(l,n,r,x),children:"Next Participant"}),e&&R.jsx(Gc.Item,{leftSection:R.jsx(S1e,{size:14}),component:"a",href:`${ju}analysis/stats/${y}`,children:"Analyze & Manage"})]})]})]})})]})})}function N5e(e,t){var n;return GT(e)&&t.baseComponents?VY({},(n=t.baseComponents)==null?void 0:n[e.baseComponent],e):e}function SUt(){var u;const e=(u=y1())==null?void 0:u.uiConfig.sidebar,t=y1(),n=F0(),r=t.components[n],i=z.useMemo(()=>r?N5e(r,t):null,[r,t]),s=HY(),o=(i==null?void 0:i.instruction)||"",a=(i==null?void 0:i.instructionLocation)==="sidebar"||(i==null?void 0:i.instructionLocation)===void 0;return e&&i?R.jsxs(hs.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:[a&&o!==""&&R.jsxs(hs.Section,{bg:"gray.3",p:"md",children:[R.jsx(Nt,{span:!0,c:"orange.8",fw:700,inherit:!0,children:"Task:"}),R.jsx(lc,{text:o})]}),R.jsx(hs.Section,{p:"md",children:R.jsx(LN,{status:s,config:i,location:"sidebar"},`${n}-sidebar-response-block`)})]}):R.jsx(hs.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:R.jsx(LN,{status:s,config:i,location:"sidebar",style:{display:"hidden"}},`${n}-sidebar-response-block`)})}function TUt(){const e=Ai(u=>u.showHelpText),t=Ai(u=>u.config),n=gc(),{toggleShowHelpText:r}=Tl(),[i,s]=z.useState(""),[o,a]=z.useState(!0);return z.useEffect(()=>{async function u(){if(!t.uiConfig.helpTextPath){a(!1);return}const l=await WY(t.uiConfig.helpTextPath);l!==void 0&&s(l),a(!1)}u()},[t.uiConfig.helpTextPath]),R.jsx(Eo,{size:"70%",opened:e,withCloseButton:!1,onClose:()=>n(r()),children:o||i?R.jsx(lc,{text:i}):R.jsx(gb,{path:t.uiConfig.helpTextPath})})}function CUt(){const e=Ai(o=>o.alertModal),{setAlertModal:t}=Tl(),n=gc(),[r,i]=z.useState(e.show),s=z.useCallback(()=>n(t({...e,show:!1})),[e,t,n]);return z.useEffect(()=>i(e.show),[e.show]),R.jsx(Eo,{opened:r,centered:!0,size:"lg",withCloseButton:!1,onClose:s,children:R.jsxs(Gy,{color:"red",radius:"xs",title:"Alert",icon:R.jsx(Oze,{}),onClose:s,styles:{root:{backgroundColor:"unset"}},children:[R.jsx(Nt,{my:"md",children:e.message}),R.jsx(co,{w:"100%",justify:"end",children:R.jsx(Bn,{onClick:s,color:"red",variant:"filled",m:"xs",children:"Continue Study"})})]})})}const Lpe=15,Fpe=3;function AUt({xScale:e,answer:t,height:n,currentNode:r,setCurrentNode:i,taskName:s}){const o=["var(--mantine-color-yellow-8)","var(--mantine-color-green-8)","var(--mantine-color-indigo-8)","var(--mantine-color-violet-8)","var(--mantine-color-cyan-8)","var(--mantine-color-orange-3)","var(--mantine-color-lime-3)","var(--mantine-color-teal-3)","var(--mantine-color-pink-3)"],a=new Map;if(a.set("Root","var(--mantine-color-grape-3)"),t.provenanceGraph){let u=0;Object.entries(t.provenanceGraph.nodes).forEach(l=>{const[,c]=l;a.has(c.label)||(a.set(c.label,o[u]),u=(u+1)%o.length)})}return R.jsxs("g",{style:{cursor:"pointer"},children:[t.provenanceGraph?Object.entries(t.provenanceGraph.nodes).map(u=>{const[l,c]=u;return R.jsx("g",{onClick:()=>i(l,c.createdOn,s),children:R.jsx("rect",{fill:l===r?"#e15759":a.get(c.label),x:e(c.createdOn)-Fpe/2,y:n/2-Lpe/2,width:Fpe,height:Lpe})},l)}):null,r&&t.provenanceGraph&&t.provenanceGraph.nodes[r]?R.jsx("rect",{fill:"var(--mantine-color-blue-filled)",cx:e(t.provenanceGraph.nodes[r].createdOn),cy:n/2,r:5}):null,R.jsx(Hq,{position:{bottom:10,left:10},children:R.jsxs(_l,{width:200,position:"bottom",withArrow:!0,shadow:"md",children:[R.jsx(_l.Target,{children:R.jsx(Bn,{children:"Show Legend"})}),R.jsx(_l.Dropdown,{children:R.jsx(Jf,{children:Array.from(a.keys()).map(u=>R.jsxs(co,{children:[R.jsx(gW,{color:a.get(u)}),R.jsx("span",{children:u})]},u))})})]})})]})}const $pe={left:5,top:0,right:5,bottom:0};function kUt({xScale:e,participantData:t,width:n,height:r,currentNode:i,setCurrentNode:s,setPlayTime:o,trialName:a}){const u=z.useMemo(()=>e.domain()[1]-e.domain()[0],[e]),l=z.useCallback((f,d)=>{o(d,(d-e.domain()[0])/u),s(f)},[s,o,u,e]),c=z.useMemo(()=>Object.entries(t.answers).filter(f=>a?a===f[0]:!0).map(f=>{const[d,h]=f;return R.jsx(AUt,{taskName:d,answer:h,height:r,currentNode:i,setCurrentNode:l,xScale:e},d)}),[i,l,r,t.answers,a,e]);return R.jsxs("svg",{style:{width:n,height:r},children:[R.jsx("line",{stroke:"black",strokeWidth:1,x1:$pe.left,x2:n+$pe.left,y1:r/2,y2:r/2}),c]})}function RUt(e){const t=z.useRef(()=>{throw new Error("Cannot call an event handler while rendering.")});return z.useLayoutEffect(()=>{t.current=e}),z.useCallback((...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function IUt({width:e,height:t,updateTimer:n,duration:r,isPlaying:i,xScale:s,startTime:o}){const a=z.useRef(0),u=z.useRef(Date.now()),[l,c]=z.useState(0);z.useEffect(()=>{o&&(a.current=0,n(o,0))},[o,n]);const f=RUt(()=>{if(a.current>=r)return;const h=Date.now();a.current=h-u.current,n(o+a.current,void 0),c(l+1)});z.useEffect(()=>{i&&a.current>=r&&(n(o,0),u.current=Date.now()-a.current,a.current=0)},[o,i,r,n]),z.useEffect(()=>{let h=null;return i&&a.current<r&&(u.current=Date.now()-a.current,h=setInterval(()=>{i&&f()},30)),()=>{h&&clearInterval(h)}},[r,f,i]);const d=z.useCallback(h=>{a.current=s.invert(h.clientX-10)-s.domain()[0],u.current=Date.now()-a.current,c(l+1),n(o+a.current,a.current/r)},[r,l,o,n,s]);return R.jsx("svg",{onClick:d,style:{width:e,height:t,position:"absolute",zIndex:1e4},children:R.jsx("line",{stroke:"#e15759",strokeWidth:3,y1:0,y2:t,x1:s(o+a.current),x2:s(o+a.current)})})}function nq(e){const t=Math.floor(e/1e3/60/60),n=Math.floor((e/1e3/60/60-t)*60),r=Math.floor(((e/1e3/60/60-t)*60-n)*60),i=r<10?`0${r}`:`${r}`,s=n<10?`0${n}`:`${n}`,o=t<10?`0${t}`:`${t}`;return`${t>0?`${o}h`:""} ${n>0?`${s}m`:""} ${i}s`}const Dj={left:0,top:0,right:0,bottom:0};function PUt(e,t){return t?t.getParticipantData(e):null}function NUt({setTimeString:e}){const[t]=N1(),n=z.useMemo(()=>t.get("participantId")||void 0,[t]),{storageEngine:r}=Yo(),i=Ai(te=>te.analysisIsPlaying),s=Ai(te=>te.analysisHasAudio),o=Ai(te=>te.analysisHasProvenance),{saveAnalysisState:a,setAnalysisHasAudio:u,setAnalysisHasProvenance:l,setAnalysisIsPlaying:c}=Tl(),f=gc(),d=F0(),h=dp();z.useEffect(()=>{f(a(null))},[h,a,f]);const[p,{width:m}]=eR(),[g,b]=z.useState(0),[y,x]=z.useState(null),[w,T]=z.useState(0),{value:A,status:k}=SD(PUt,[n,r]),[I,O]=KDe(0,100),M=z.useRef(null),[L,H]=z.useState(!0),D=z.useRef(null),B=z.useMemo(()=>`${d}_${h}`,[d,h]);z.useEffect(()=>{f(c(!1))},[n,d,h,f,c]),z.useEffect(()=>{var te;if(B&&A&&((te=A.answers[B])!=null&&te.provenanceGraph)){const W=p7.create(),Z=_5e({registry:W,initialState:{}});A.answers[B].provenanceGraph&&(Z.importObject(Qy(A.answers[B].provenanceGraph)),f(l(!0)),D.current=Z)}else f(l(!1))},[A,B,f,l]);const U=z.useCallback(te=>{var W;te&&(B&&A&&D.current&&(f(a(D.current.getState((W=A.answers[B].provenanceGraph)==null?void 0:W.nodes[te]))),D.current.to(te)),x(te))},[A,a,f,B]);z.useEffect(()=>{var Z;if(!B||!A||!D.current||!((Z=A.answers[B])!=null&&Z.provenanceGraph))return;const te=A.answers[B].provenanceGraph;if(!te)return;if(!y||!te.nodes[y]){U(te.root);return}let W=te.nodes[y];for(;;)if(I<W.createdOn){if(xjt(W))break;{const oe=W.parent;W=te.nodes[oe]}}else if(W.children.length>0){const oe=W.children[0];if(I>te.nodes[oe].createdOn)W=te.nodes[oe];else break}else break;W.id!==y&&U(W.id)},[U,y,A,n,I,B]);const G=z.useMemo(()=>(A==null?void 0:A.answers[B].startTime)||0,[A,B]);z.useEffect(()=>{w===0?e(""):I!==0&&e(`${nq(I-G)} / ${nq(w*1e3)}`)},[B,A,I,e,G,w]),z.useEffect(()=>{if(!s&&o&&A){const te=A.answers[B].endTime-A.answers[B].startTime;T(te>-1?te/1e3:0)}},[s,o,B,A]);const ee=UT(),ne=z.useRef(null),ue=z.useCallback(async te=>{if(ne.current=te,te&&A&&ee&&B&&r)try{const W=await r.getAudio(B,n);await te.load(W),H(!1),f(u(!0)),T(te.getDuration()),b(te.getWidth()),te.seekTo(0),te.on("redrawcomplete",()=>b(te.getWidth()))}catch(W){throw f(u(!1)),new Error(W)}else f(u(!1)),T(0)},[A,ee,B,r,n,f,u]),X=z.useCallback((te,W)=>{if(te>w*1e3+G){f(c(!1)),O(te);return}O(te),ne.current&&W!==void 0&&setTimeout(()=>{var Z;(Z=ne.current)==null||Z.seekTo(W)})},[c,O,G,f,w]);z.useEffect(()=>{ne.current&&(i?ne.current.play():ne.current.pause())},[ne,i,w,G,O]);const q=z.useMemo(()=>{var Z,oe;if(!A||!((Z=A.answers[B])!=null&&Z.startTime)||!((oe=A.answers[B])!=null&&oe.endTime))return null;const te=w>0?A.answers[B].startTime+w*1e3:A.answers[B].endTime;return fM([Dj.left,m+Dj.left+Dj.right]).domain([A.answers[B].startTime,te]).clamp(!0)},[A,B,m,w]);return z.useEffect(()=>{ue(ne.current)},[X,ue,A,n,ne]),R.jsx(co,{wrap:"nowrap",gap:10,mx:10,children:R.jsxs(Jf,{ref:p,style:{width:"100%"},gap:0,children:[R.jsx(u1,{}),A!==null&&B?R.jsxs(He,{ref:M,style:{overflow:"hidden",width:"100%",pointerEvents:"none"},display:s?"block":"none",id:"waveformDiv",children:[R.jsx(R5e,{onMount:ue,plugins:[],container:"#waveformDiv",height:50,waveColor:"#484848",progressColor:"#e15759",barHeight:0,cursorColor:"rgba(0, 0, 0, 0)",children:R.jsx(I5e,{id:"waveform",height:50})}),L?R.jsx(bg,{}):null]}):null,k==="success"&&A&&q&&B&&A.answers[B].provenanceGraph?R.jsx(kUt,{xScale:q,trialName:B,setPlayTime:X,currentNode:y,setCurrentNode:U,participantData:A,width:g||m,height:25}):null,q&&A&&(s||o)?R.jsx(IUt,{duration:w*1e3,height:(s?50:0)+(o?25:0),isPlaying:i,startTime:G,width:m,xScale:q,updateTimer:X}):null]})})}function DUt(e,t){return t?t.getParticipantData(e):null}function OUt(e){return e?e.getAllParticipantsData():null}function MUt(){const[e]=N1(),t=z.useMemo(()=>e.get("participantId")||void 0,[e]),n=F0(),r=dp(),i=M0(),{setAnalysisIsPlaying:s}=Tl(),o=gc(),a=Ai(b=>b.analysisIsPlaying),{storageEngine:u}=Yo(),{value:l,status:c}=SD(DUt,[t,u]),{value:f}=SD(OUt,[u]),[d,h]=z.useMemo(()=>{if(f&&l&&t&&n){const b=f.filter(T=>T.participantConfigHash===l.participantConfigHash),y=b.findIndex(T=>T.participantId===t),x=y<b.length-1?b[y+1]:b[0],w=y>0?b[y-1]:b[b.length-1];return[[x.participantId,C0(x.sequence).indexOf(n)],[w.participantId,C0(w.sequence).indexOf(n)]]}return[["",0],["",0]]},[f,n,l,t]),p=z.useMemo(()=>{const b={};return f==null||f.forEach(y=>{b[y.participantConfigHash]||(b[y.participantConfigHash]=new Set),b[y.participantConfigHash].add(y.participantId)}),Object.keys(b).sort((y,x)=>y===(l==null?void 0:l.participantConfigHash)?-1:x===(l==null?void 0:l.participantConfigHash)?1:0).map(y=>({group:`Config version: ${y}`,items:[...b[y]].map(x=>({value:x,label:x,disabled:y!==(l==null?void 0:l.participantConfigHash)}))}))},[f,l==null?void 0:l.participantConfigHash]),[m,g]=z.useState("");return R.jsx(hs.Footer,{zIndex:101,withBorder:!1,children:R.jsxs(He,{style:{backgroundColor:"var(--mantine-color-blue-1)",height:"150px"},children:[R.jsx(ih,{visible:c!=="success",overlayProps:{backgroundOpacity:.4}}),R.jsx(NUt,{setTimeString:g}),R.jsx(u1,{children:R.jsxs(co,{gap:"xs",style:{height:"50px"},children:[R.jsx(Nt,{size:"sm",ff:"monospace",children:m}),R.jsx(Ub,{variant:"filled",size:30,onClick:()=>o(s(!a)),children:a?R.jsx(uVe,{}):R.jsx(lVe,{})}),R.jsx(Nt,{mx:"0",children:"Participant:"}),R.jsx(wT,{style:{width:"300px"},value:(l==null?void 0:l.participantId)||"",onChange:b=>{i(`./../${o0(0)}?participantId=${b}`)},data:p}),R.jsx(Bn,{onClick:()=>i(`../${o0(+r-1)}?participantId=${t}`,{relative:"path"}),children:R.jsx(Qne,{})}),R.jsx(Bn,{onClick:()=>i(`../${o0(+r+1)}?participantId=${t}`,{relative:"path"}),children:R.jsx(Jne,{})}),R.jsxs(Bn,{px:"xs",disabled:!l||d[0]===l.participantId,onClick:()=>i(`./../${o0(h[1])}?participantId=${h[0]}`),children:[R.jsx(Qne,{}),R.jsx(Zne,{})]}),R.jsxs(Bn,{px:"xs",disabled:!l||d[0]===l.participantId,onClick:()=>i(`./../${o0(d[1])}?participantId=${d[0]}`),children:[R.jsx(Zne,{}),R.jsx(Jne,{})]})]})})]})})}function LUt(){const e=z.useRef([]),t=y1(),n=t.uiConfig.windowEventDebounceTime??100,r=Ai(d=>d.showStudyBrowser),i=Ai(d=>d.analysisHasAudio),s=Ai(d=>d.analysisHasProvenance),o=Ai(d=>d.modes);z.useEffect(()=>{const d=Ey(T=>{e.current.push([Date.now(),"focus",T.target instanceof HTMLElement?T.target.tagName:""])},n,{maxWait:n}),h=Ey(T=>{e.current.push([Date.now(),"input",T.data??""])},n,{maxWait:n}),p=Ey(T=>{e.current.push([Date.now(),"keypress",T.key])},n,{maxWait:n}),m=Ey(T=>{e.current.push([Date.now(),"mousedown",[T.clientX,T.clientY]])},n,{maxWait:n}),g=Ey(T=>{e.current.push([Date.now(),"mouseup",[T.clientX,T.clientY]])},n,{maxWait:n}),b=Ey(()=>{e.current.push([Date.now(),"resize",[window.innerWidth,window.innerHeight]])},n,{maxWait:n}),y=Ey(T=>{e.current.push([Date.now(),"mousemove",[T.clientX,T.clientY]])},n,{maxWait:n}),x=Ey(()=>{e.current.push([Date.now(),"scroll",[window.scrollX,window.scrollY]])},n,{maxWait:n}),w=Ey(()=>{e.current.push([Date.now(),"visibility",document.visibilityState])},n,{maxWait:n});return window.addEventListener("focus",d,!0),window.addEventListener("input",h),window.addEventListener("keypress",p),window.addEventListener("mousedown",m),window.addEventListener("mouseup",g),window.addEventListener("resize",b),window.addEventListener("mousemove",y),window.addEventListener("scroll",x),document.addEventListener("visibilitychange",w),()=>{window.removeEventListener("focus",d,!0),window.removeEventListener("input",h),window.removeEventListener("keypress",p),window.addEventListener("mousedown",m),window.addEventListener("mouseup",g),window.removeEventListener("resize",b),window.removeEventListener("mousemove",y),window.removeEventListener("scroll",x),document.removeEventListener("visibilitychange",w)}},[]);const a=t.uiConfig.sidebarWidth??300,{studyNavigatorEnabled:u,dataCollectionEnabled:l}=z.useMemo(()=>o,[o]),c=z.useMemo(()=>u&&r,[u,r]),f=UT();return R.jsx(mwe.Provider,{value:e,children:R.jsxs(hs,{padding:"md",header:{height:70},navbar:{width:a,breakpoint:"xs",collapsed:{desktop:!t.uiConfig.sidebar,mobile:!t.uiConfig.sidebar}},aside:{width:360,breakpoint:"xs",collapsed:{desktop:!c,mobile:!c}},footer:{height:(f?50:0)+(i?50:0)+(s?25:0)},children:[R.jsx(SUt,{}),R.jsx(uUt,{}),R.jsx(EUt,{studyNavigatorEnabled:u,dataCollectionEnabled:l}),R.jsx(TUt,{}),R.jsx(CUt,{}),R.jsx(hs.Main,{children:R.jsx(VUe,{})}),f&&R.jsx(MUt,{})]})})}function FUt(e,t=!1){return typeof e=="number"?Bpe(e,t):Bpe(e.length,t).map(r=>r.map(i=>e[i]))}function Bpe(e,t){if(e<0)throw new Error("Latin square size must be > 0");if(e==0)return[];if(e==1)return[[0]];let n=new Array(e);for(let s=0;s<e;s++)s<2?n[s]=s:s%2==0?n[s]=e-s/2:n[s]=Math.floor(s/2)+1;let r=[n],i=n;for(let s=1;s<e;s+=1){let o=i.map(a=>(a+1)%e);r.push(o),i=o}if(t&&e%2>0)for(let s=0;s<e;s+=1)r.push(r[s].slice().reverse());return r}function D5e(e,t,n){let r=e.components;e.order==="random"?r=e.components.sort(()=>.5-Math.random()):e.order==="latinSquare"&&t&&(r=t[n].pop().map(i=>i.startsWith("_componentBlock")?e.components[+i.slice(15)]:i)),r=r.slice(0,e.numSamples);for(let i=0;i<r.length;i+=1){const s=r[i];if(typeof s!="string"&&!Array.isArray(s)){const o=e.components.indexOf(s);r[i]=D5e(s,t,`${n}-${o}`)}}return e.interruptions&&e.interruptions.forEach(i=>{const s=[];if(i.spacing!=="random")for(let o=0;o<r.length;o+=1)(o===i.firstLocation||o>i.firstLocation&&o%i.spacing===0)&&s.push(i.components),s.push(r[o]);if(i.spacing==="random"){const o=new Set;if(i.numInterruptions>r.length-1)throw new Error("Number of interruptions cannot be greater than the number of components");for(;o.size<i.numInterruptions;){const l=Math.floor(Math.random()*r.length-1)+1;o.add(l)}const a=Array.from(o).sort((l,c)=>l-c);let u=0;for(let l=0;l<r.length;l+=1)l===a[u]&&(s.push(i.components),u+=1),s.push(r[l])}r=s}),{id:e.id,orderPath:n,components:r.flat(),skip:e.skip}}function $Ut(e,t){const n=Qy(e);return D5e(n,t,"root")}function O5e(e,t,n,r=0){const i=n.length>0?`${n}-${r}`:"root";e.order==="latinSquare"&&t.push(i),e.components.forEach((s,o)=>{typeof s!="string"&&O5e(s,t,i,o)})}function BUt(e){const t=[];return O5e(e,t,"",0),t}function jpe(e,t){const n=t.split("-");let r={};n.forEach(o=>{o==="root"?r=e.sequence:r=r.components[+o]});const i=r.components.map((o,a)=>typeof o=="string"?o:`_componentBlock${a}`);return FUt(i.sort(()=>.5-Math.random()),!0)}function Upe(e){const n=BUt(e.sequence).map(s=>({[s]:jpe(e,s)})).reduce((s,o)=>({...s,...o}),{}),r=e.uiConfig.numSequences||1e3,i=[];return Array.from({length:r}).forEach(()=>{const s=$Ut(e.sequence,n);s.components.push("end"),i.push(s),Object.entries(n).forEach(([o,a])=>{a.length===0&&(n[o]=jpe(e,o))})}),i}var k5={exports:{}},Oj={},Sy={},Qx={},Mj={},Lj={},Fj={},zpe;function RO(){return zpe||(zpe=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends t{constructor(y){if(super(),!e.IDENTIFIER.test(y))throw new Error("CodeGen: name must be a valid identifier");this.str=y}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=n;class r extends t{constructor(y){super(),this._items=typeof y=="string"?[y]:y}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const y=this._items[0];return y===""||y==='""'}get str(){var y;return(y=this._str)!==null&&y!==void 0?y:this._str=this._items.reduce((x,w)=>`${x}${w}`,"")}get names(){var y;return(y=this._names)!==null&&y!==void 0?y:this._names=this._items.reduce((x,w)=>(w instanceof n&&(x[w.str]=(x[w.str]||0)+1),x),{})}}e._Code=r,e.nil=new r("");function i(b,...y){const x=[b[0]];let w=0;for(;w<y.length;)a(x,y[w]),x.push(b[++w]);return new r(x)}e._=i;const s=new r("+");function o(b,...y){const x=[h(b[0])];let w=0;for(;w<y.length;)x.push(s),a(x,y[w]),x.push(s,h(b[++w]));return u(x),new r(x)}e.str=o;function a(b,y){y instanceof r?b.push(...y._items):y instanceof n?b.push(y):b.push(f(y))}e.addCodeArg=a;function u(b){let y=1;for(;y<b.length-1;){if(b[y]===s){const x=l(b[y-1],b[y+1]);if(x!==void 0){b.splice(y-1,3,x);continue}b[y++]="+"}y++}}function l(b,y){if(y==='""')return b;if(b==='""')return y;if(typeof b=="string")return y instanceof n||b[b.length-1]!=='"'?void 0:typeof y!="string"?`${b.slice(0,-1)}${y}"`:y[0]==='"'?b.slice(0,-1)+y.slice(1):void 0;if(typeof y=="string"&&y[0]==='"'&&!(b instanceof n))return`"${b}${y.slice(1)}`}function c(b,y){return y.emptyStr()?b:b.emptyStr()?y:o`${b}${y}`}e.strConcat=c;function f(b){return typeof b=="number"||typeof b=="boolean"||b===null?b:h(Array.isArray(b)?b.join(","):b)}function d(b){return new r(h(b))}e.stringify=d;function h(b){return JSON.stringify(b).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=h;function p(b){return typeof b=="string"&&e.IDENTIFIER.test(b)?new r(`.${b}`):i`[${b}]`}e.getProperty=p;function m(b){if(typeof b=="string"&&e.IDENTIFIER.test(b))return new r(`${b}`);throw new Error(`CodeGen: invalid export name: ${b}, use explicit $id name mapping`)}e.getEsmExportName=m;function g(b){return new r(b.toString())}e.regexpCode=g}(Fj)),Fj}var $j={},Vpe;function Hpe(){return Vpe||(Vpe=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=RO();class n extends Error{constructor(l){super(`CodeGen: "code" for ${l} not defined`),this.value=l.value}}var r;(function(u){u[u.Started=0]="Started",u[u.Completed=1]="Completed"})(r||(e.UsedValueState=r={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class i{constructor({prefixes:l,parent:c}={}){this._names={},this._prefixes=l,this._parent=c}toName(l){return l instanceof t.Name?l:this.name(l)}name(l){return new t.Name(this._newName(l))}_newName(l){const c=this._names[l]||this._nameGroup(l);return`${l}${c.index++}`}_nameGroup(l){var c,f;if(!((f=(c=this._parent)===null||c===void 0?void 0:c._prefixes)===null||f===void 0)&&f.has(l)||this._prefixes&&!this._prefixes.has(l))throw new Error(`CodeGen: prefix "${l}" is not allowed in this scope`);return this._names[l]={prefix:l,index:0}}}e.Scope=i;class s extends t.Name{constructor(l,c){super(c),this.prefix=l}setValue(l,{property:c,itemIndex:f}){this.value=l,this.scopePath=(0,t._)`.${new t.Name(c)}[${f}]`}}e.ValueScopeName=s;const o=(0,t._)`\n`;class a extends i{constructor(l){super(l),this._values={},this._scope=l.scope,this.opts={...l,_n:l.lines?o:t.nil}}get(){return this._scope}name(l){return new s(l,this._newName(l))}value(l,c){var f;if(c.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const d=this.toName(l),{prefix:h}=d,p=(f=c.key)!==null&&f!==void 0?f:c.ref;let m=this._values[h];if(m){const y=m.get(p);if(y)return y}else m=this._values[h]=new Map;m.set(p,d);const g=this._scope[h]||(this._scope[h]=[]),b=g.length;return g[b]=c.ref,d.setValue(c,{property:h,itemIndex:b}),d}getValue(l,c){const f=this._values[l];if(f)return f.get(c)}scopeRefs(l,c=this._values){return this._reduceValues(c,f=>{if(f.scopePath===void 0)throw new Error(`CodeGen: name "${f}" has no value`);return(0,t._)`${l}${f.scopePath}`})}scopeCode(l=this._values,c,f){return this._reduceValues(l,d=>{if(d.value===void 0)throw new Error(`CodeGen: name "${d}" has no value`);return d.value.code},c,f)}_reduceValues(l,c,f={},d){let h=t.nil;for(const p in l){const m=l[p];if(!m)continue;const g=f[p]=f[p]||new Map;m.forEach(b=>{if(g.has(b))return;g.set(b,r.Started);let y=c(b);if(y){const x=this.opts.es5?e.varKinds.var:e.varKinds.const;h=(0,t._)`${h}${x} ${b} = ${y};${this.opts._n}`}else if(y=d==null?void 0:d(b))h=(0,t._)`${h}${y}${this.opts._n}`;else throw new n(b);g.set(b,r.Completed)})}return h}}e.ValueScope=a}($j)),$j}var qpe;function Jr(){return qpe||(qpe=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=RO(),n=Hpe();var r=RO();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}});var i=Hpe();Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class s{optimizeNodes(){return this}optimizeNames(Z,oe){return this}}class o extends s{constructor(Z,oe,pe){super(),this.varKind=Z,this.name=oe,this.rhs=pe}render({es5:Z,_n:oe}){const pe=Z?n.varKinds.var:this.varKind,ce=this.rhs===void 0?"":` = ${this.rhs}`;return`${pe} ${this.name}${ce};`+oe}optimizeNames(Z,oe){if(Z[this.name.str])return this.rhs&&(this.rhs=B(this.rhs,Z,oe)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class a extends s{constructor(Z,oe,pe){super(),this.lhs=Z,this.rhs=oe,this.sideEffects=pe}render({_n:Z}){return`${this.lhs} = ${this.rhs};`+Z}optimizeNames(Z,oe){if(!(this.lhs instanceof t.Name&&!Z[this.lhs.str]&&!this.sideEffects))return this.rhs=B(this.rhs,Z,oe),this}get names(){const Z=this.lhs instanceof t.Name?{}:{...this.lhs.names};return D(Z,this.rhs)}}class u extends a{constructor(Z,oe,pe,ce){super(Z,pe,ce),this.op=oe}render({_n:Z}){return`${this.lhs} ${this.op}= ${this.rhs};`+Z}}class l extends s{constructor(Z){super(),this.label=Z,this.names={}}render({_n:Z}){return`${this.label}:`+Z}}class c extends s{constructor(Z){super(),this.label=Z,this.names={}}render({_n:Z}){return`break${this.label?` ${this.label}`:""};`+Z}}class f extends s{constructor(Z){super(),this.error=Z}render({_n:Z}){return`throw ${this.error};`+Z}get names(){return this.error.names}}class d extends s{constructor(Z){super(),this.code=Z}render({_n:Z}){return`${this.code};`+Z}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(Z,oe){return this.code=B(this.code,Z,oe),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class h extends s{constructor(Z=[]){super(),this.nodes=Z}render(Z){return this.nodes.reduce((oe,pe)=>oe+pe.render(Z),"")}optimizeNodes(){const{nodes:Z}=this;let oe=Z.length;for(;oe--;){const pe=Z[oe].optimizeNodes();Array.isArray(pe)?Z.splice(oe,1,...pe):pe?Z[oe]=pe:Z.splice(oe,1)}return Z.length>0?this:void 0}optimizeNames(Z,oe){const{nodes:pe}=this;let ce=pe.length;for(;ce--;){const he=pe[ce];he.optimizeNames(Z,oe)||(U(Z,he.names),pe.splice(ce,1))}return pe.length>0?this:void 0}get names(){return this.nodes.reduce((Z,oe)=>H(Z,oe.names),{})}}class p extends h{render(Z){return"{"+Z._n+super.render(Z)+"}"+Z._n}}class m extends h{}class g extends p{}g.kind="else";class b extends p{constructor(Z,oe){super(oe),this.condition=Z}render(Z){let oe=`if(${this.condition})`+super.render(Z);return this.else&&(oe+="else "+this.else.render(Z)),oe}optimizeNodes(){super.optimizeNodes();const Z=this.condition;if(Z===!0)return this.nodes;let oe=this.else;if(oe){const pe=oe.optimizeNodes();oe=this.else=Array.isArray(pe)?new g(pe):pe}if(oe)return Z===!1?oe instanceof b?oe:oe.nodes:this.nodes.length?this:new b(G(Z),oe instanceof b?[oe]:oe.nodes);if(!(Z===!1||!this.nodes.length))return this}optimizeNames(Z,oe){var pe;if(this.else=(pe=this.else)===null||pe===void 0?void 0:pe.optimizeNames(Z,oe),!!(super.optimizeNames(Z,oe)||this.else))return this.condition=B(this.condition,Z,oe),this}get names(){const Z=super.names;return D(Z,this.condition),this.else&&H(Z,this.else.names),Z}}b.kind="if";class y extends p{}y.kind="for";class x extends y{constructor(Z){super(),this.iteration=Z}render(Z){return`for(${this.iteration})`+super.render(Z)}optimizeNames(Z,oe){if(super.optimizeNames(Z,oe))return this.iteration=B(this.iteration,Z,oe),this}get names(){return H(super.names,this.iteration.names)}}class w extends y{constructor(Z,oe,pe,ce){super(),this.varKind=Z,this.name=oe,this.from=pe,this.to=ce}render(Z){const oe=Z.es5?n.varKinds.var:this.varKind,{name:pe,from:ce,to:he}=this;return`for(${oe} ${pe}=${ce}; ${pe}<${he}; ${pe}++)`+super.render(Z)}get names(){const Z=D(super.names,this.from);return D(Z,this.to)}}class T extends y{constructor(Z,oe,pe,ce){super(),this.loop=Z,this.varKind=oe,this.name=pe,this.iterable=ce}render(Z){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(Z)}optimizeNames(Z,oe){if(super.optimizeNames(Z,oe))return this.iterable=B(this.iterable,Z,oe),this}get names(){return H(super.names,this.iterable.names)}}class A extends p{constructor(Z,oe,pe){super(),this.name=Z,this.args=oe,this.async=pe}render(Z){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(Z)}}A.kind="func";class k extends h{render(Z){return"return "+super.render(Z)}}k.kind="return";class I extends p{render(Z){let oe="try"+super.render(Z);return this.catch&&(oe+=this.catch.render(Z)),this.finally&&(oe+=this.finally.render(Z)),oe}optimizeNodes(){var Z,oe;return super.optimizeNodes(),(Z=this.catch)===null||Z===void 0||Z.optimizeNodes(),(oe=this.finally)===null||oe===void 0||oe.optimizeNodes(),this}optimizeNames(Z,oe){var pe,ce;return super.optimizeNames(Z,oe),(pe=this.catch)===null||pe===void 0||pe.optimizeNames(Z,oe),(ce=this.finally)===null||ce===void 0||ce.optimizeNames(Z,oe),this}get names(){const Z=super.names;return this.catch&&H(Z,this.catch.names),this.finally&&H(Z,this.finally.names),Z}}class O extends p{constructor(Z){super(),this.error=Z}render(Z){return`catch(${this.error})`+super.render(Z)}}O.kind="catch";class M extends p{render(Z){return"finally"+super.render(Z)}}M.kind="finally";class L{constructor(Z,oe={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...oe,_n:oe.lines?`
`:""},this._extScope=Z,this._scope=new n.Scope({parent:Z}),this._nodes=[new m]}toString(){return this._root.render(this.opts)}name(Z){return this._scope.name(Z)}scopeName(Z){return this._extScope.name(Z)}scopeValue(Z,oe){const pe=this._extScope.value(Z,oe);return(this._values[pe.prefix]||(this._values[pe.prefix]=new Set)).add(pe),pe}getScopeValue(Z,oe){return this._extScope.getValue(Z,oe)}scopeRefs(Z){return this._extScope.scopeRefs(Z,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(Z,oe,pe,ce){const he=this._scope.toName(oe);return pe!==void 0&&ce&&(this._constants[he.str]=pe),this._leafNode(new o(Z,he,pe)),he}const(Z,oe,pe){return this._def(n.varKinds.const,Z,oe,pe)}let(Z,oe,pe){return this._def(n.varKinds.let,Z,oe,pe)}var(Z,oe,pe){return this._def(n.varKinds.var,Z,oe,pe)}assign(Z,oe,pe){return this._leafNode(new a(Z,oe,pe))}add(Z,oe){return this._leafNode(new u(Z,e.operators.ADD,oe))}code(Z){return typeof Z=="function"?Z():Z!==t.nil&&this._leafNode(new d(Z)),this}object(...Z){const oe=["{"];for(const[pe,ce]of Z)oe.length>1&&oe.push(","),oe.push(pe),(pe!==ce||this.opts.es5)&&(oe.push(":"),(0,t.addCodeArg)(oe,ce));return oe.push("}"),new t._Code(oe)}if(Z,oe,pe){if(this._blockNode(new b(Z)),oe&&pe)this.code(oe).else().code(pe).endIf();else if(oe)this.code(oe).endIf();else if(pe)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(Z){return this._elseNode(new b(Z))}else(){return this._elseNode(new g)}endIf(){return this._endBlockNode(b,g)}_for(Z,oe){return this._blockNode(Z),oe&&this.code(oe).endFor(),this}for(Z,oe){return this._for(new x(Z),oe)}forRange(Z,oe,pe,ce,he=this.opts.es5?n.varKinds.var:n.varKinds.let){const Ee=this._scope.toName(Z);return this._for(new w(he,Ee,oe,pe),()=>ce(Ee))}forOf(Z,oe,pe,ce=n.varKinds.const){const he=this._scope.toName(Z);if(this.opts.es5){const Ee=oe instanceof t.Name?oe:this.var("_arr",oe);return this.forRange("_i",0,(0,t._)`${Ee}.length`,Ae=>{this.var(he,(0,t._)`${Ee}[${Ae}]`),pe(he)})}return this._for(new T("of",ce,he,oe),()=>pe(he))}forIn(Z,oe,pe,ce=this.opts.es5?n.varKinds.var:n.varKinds.const){if(this.opts.ownProperties)return this.forOf(Z,(0,t._)`Object.keys(${oe})`,pe);const he=this._scope.toName(Z);return this._for(new T("in",ce,he,oe),()=>pe(he))}endFor(){return this._endBlockNode(y)}label(Z){return this._leafNode(new l(Z))}break(Z){return this._leafNode(new c(Z))}return(Z){const oe=new k;if(this._blockNode(oe),this.code(Z),oe.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(k)}try(Z,oe,pe){if(!oe&&!pe)throw new Error('CodeGen: "try" without "catch" and "finally"');const ce=new I;if(this._blockNode(ce),this.code(Z),oe){const he=this.name("e");this._currNode=ce.catch=new O(he),oe(he)}return pe&&(this._currNode=ce.finally=new M,this.code(pe)),this._endBlockNode(O,M)}throw(Z){return this._leafNode(new f(Z))}block(Z,oe){return this._blockStarts.push(this._nodes.length),Z&&this.code(Z).endBlock(oe),this}endBlock(Z){const oe=this._blockStarts.pop();if(oe===void 0)throw new Error("CodeGen: not in self-balancing block");const pe=this._nodes.length-oe;if(pe<0||Z!==void 0&&pe!==Z)throw new Error(`CodeGen: wrong number of nodes: ${pe} vs ${Z} expected`);return this._nodes.length=oe,this}func(Z,oe=t.nil,pe,ce){return this._blockNode(new A(Z,oe,pe)),ce&&this.code(ce).endFunc(),this}endFunc(){return this._endBlockNode(A)}optimize(Z=1){for(;Z-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(Z){return this._currNode.nodes.push(Z),this}_blockNode(Z){this._currNode.nodes.push(Z),this._nodes.push(Z)}_endBlockNode(Z,oe){const pe=this._currNode;if(pe instanceof Z||oe&&pe instanceof oe)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${oe?`${Z.kind}/${oe.kind}`:Z.kind}"`)}_elseNode(Z){const oe=this._currNode;if(!(oe instanceof b))throw new Error('CodeGen: "else" without "if"');return this._currNode=oe.else=Z,this}get _root(){return this._nodes[0]}get _currNode(){const Z=this._nodes;return Z[Z.length-1]}set _currNode(Z){const oe=this._nodes;oe[oe.length-1]=Z}}e.CodeGen=L;function H(W,Z){for(const oe in Z)W[oe]=(W[oe]||0)+(Z[oe]||0);return W}function D(W,Z){return Z instanceof t._CodeOrName?H(W,Z.names):W}function B(W,Z,oe){if(W instanceof t.Name)return pe(W);if(!ce(W))return W;return new t._Code(W._items.reduce((he,Ee)=>(Ee instanceof t.Name&&(Ee=pe(Ee)),Ee instanceof t._Code?he.push(...Ee._items):he.push(Ee),he),[]));function pe(he){const Ee=oe[he.str];return Ee===void 0||Z[he.str]!==1?he:(delete Z[he.str],Ee)}function ce(he){return he instanceof t._Code&&he._items.some(Ee=>Ee instanceof t.Name&&Z[Ee.str]===1&&oe[Ee.str]!==void 0)}}function U(W,Z){for(const oe in Z)W[oe]=(W[oe]||0)-(Z[oe]||0)}function G(W){return typeof W=="boolean"||typeof W=="number"||W===null?!W:(0,t._)`!${te(W)}`}e.not=G;const ee=q(e.operators.AND);function ne(...W){return W.reduce(ee)}e.and=ne;const ue=q(e.operators.OR);function X(...W){return W.reduce(ue)}e.or=X;function q(W){return(Z,oe)=>Z===t.nil?oe:oe===t.nil?Z:(0,t._)`${te(Z)} ${W} ${te(oe)}`}function te(W){return W instanceof t.Name?W:(0,t._)`(${W})`}}(Lj)),Lj}var jr={},Wpe;function Ni(){if(Wpe)return jr;Wpe=1,Object.defineProperty(jr,"__esModule",{value:!0}),jr.checkStrictMode=jr.getErrorPath=jr.Type=jr.useFunc=jr.setEvaluated=jr.evaluatedPropsToName=jr.mergeEvaluated=jr.eachItem=jr.unescapeJsonPointer=jr.escapeJsonPointer=jr.escapeFragment=jr.unescapeFragment=jr.schemaRefOrVal=jr.schemaHasRulesButRef=jr.schemaHasRules=jr.checkUnknownRules=jr.alwaysValidSchema=jr.toHash=void 0;const e=Jr(),t=RO();function n(T){const A={};for(const k of T)A[k]=!0;return A}jr.toHash=n;function r(T,A){return typeof A=="boolean"?A:Object.keys(A).length===0?!0:(i(T,A),!s(A,T.self.RULES.all))}jr.alwaysValidSchema=r;function i(T,A=T.schema){const{opts:k,self:I}=T;if(!k.strictSchema||typeof A=="boolean")return;const O=I.RULES.keywords;for(const M in A)O[M]||w(T,`unknown keyword: "${M}"`)}jr.checkUnknownRules=i;function s(T,A){if(typeof T=="boolean")return!T;for(const k in T)if(A[k])return!0;return!1}jr.schemaHasRules=s;function o(T,A){if(typeof T=="boolean")return!T;for(const k in T)if(k!=="$ref"&&A.all[k])return!0;return!1}jr.schemaHasRulesButRef=o;function a({topSchemaRef:T,schemaPath:A},k,I,O){if(!O){if(typeof k=="number"||typeof k=="boolean")return k;if(typeof k=="string")return(0,e._)`${k}`}return(0,e._)`${T}${A}${(0,e.getProperty)(I)}`}jr.schemaRefOrVal=a;function u(T){return f(decodeURIComponent(T))}jr.unescapeFragment=u;function l(T){return encodeURIComponent(c(T))}jr.escapeFragment=l;function c(T){return typeof T=="number"?`${T}`:T.replace(/~/g,"~0").replace(/\//g,"~1")}jr.escapeJsonPointer=c;function f(T){return T.replace(/~1/g,"/").replace(/~0/g,"~")}jr.unescapeJsonPointer=f;function d(T,A){if(Array.isArray(T))for(const k of T)A(k);else A(T)}jr.eachItem=d;function h({mergeNames:T,mergeToName:A,mergeValues:k,resultToName:I}){return(O,M,L,H)=>{const D=L===void 0?M:L instanceof e.Name?(M instanceof e.Name?T(O,M,L):A(O,M,L),L):M instanceof e.Name?(A(O,L,M),M):k(M,L);return H===e.Name&&!(D instanceof e.Name)?I(O,D):D}}jr.mergeEvaluated={props:h({mergeNames:(T,A,k)=>T.if((0,e._)`${k} !== true && ${A} !== undefined`,()=>{T.if((0,e._)`${A} === true`,()=>T.assign(k,!0),()=>T.assign(k,(0,e._)`${k} || {}`).code((0,e._)`Object.assign(${k}, ${A})`))}),mergeToName:(T,A,k)=>T.if((0,e._)`${k} !== true`,()=>{A===!0?T.assign(k,!0):(T.assign(k,(0,e._)`${k} || {}`),m(T,k,A))}),mergeValues:(T,A)=>T===!0?!0:{...T,...A},resultToName:p}),items:h({mergeNames:(T,A,k)=>T.if((0,e._)`${k} !== true && ${A} !== undefined`,()=>T.assign(k,(0,e._)`${A} === true ? true : ${k} > ${A} ? ${k} : ${A}`)),mergeToName:(T,A,k)=>T.if((0,e._)`${k} !== true`,()=>T.assign(k,A===!0?!0:(0,e._)`${k} > ${A} ? ${k} : ${A}`)),mergeValues:(T,A)=>T===!0?!0:Math.max(T,A),resultToName:(T,A)=>T.var("items",A)})};function p(T,A){if(A===!0)return T.var("props",!0);const k=T.var("props",(0,e._)`{}`);return A!==void 0&&m(T,k,A),k}jr.evaluatedPropsToName=p;function m(T,A,k){Object.keys(k).forEach(I=>T.assign((0,e._)`${A}${(0,e.getProperty)(I)}`,!0))}jr.setEvaluated=m;const g={};function b(T,A){return T.scopeValue("func",{ref:A,code:g[A.code]||(g[A.code]=new t._Code(A.code))})}jr.useFunc=b;var y;(function(T){T[T.Num=0]="Num",T[T.Str=1]="Str"})(y||(jr.Type=y={}));function x(T,A,k){if(T instanceof e.Name){const I=A===y.Num;return k?I?(0,e._)`"[" + ${T} + "]"`:(0,e._)`"['" + ${T} + "']"`:I?(0,e._)`"/" + ${T}`:(0,e._)`"/" + ${T}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return k?(0,e.getProperty)(T).toString():"/"+c(T)}jr.getErrorPath=x;function w(T,A,k=T.opts.strictSchema){if(k){if(A=`strict mode: ${A}`,k===!0)throw new Error(A);T.self.logger.warn(A)}}return jr.checkStrictMode=w,jr}var R5={},Gpe;function dx(){if(Gpe)return R5;Gpe=1,Object.defineProperty(R5,"__esModule",{value:!0});const e=Jr(),t={data:new e.Name("data"),valCxt:new e.Name("valCxt"),instancePath:new e.Name("instancePath"),parentData:new e.Name("parentData"),parentDataProperty:new e.Name("parentDataProperty"),rootData:new e.Name("rootData"),dynamicAnchors:new e.Name("dynamicAnchors"),vErrors:new e.Name("vErrors"),errors:new e.Name("errors"),this:new e.Name("this"),self:new e.Name("self"),scope:new e.Name("scope"),json:new e.Name("json"),jsonPos:new e.Name("jsonPos"),jsonLen:new e.Name("jsonLen"),jsonPart:new e.Name("jsonPart")};return R5.default=t,R5}var Ype;function m7(){return Ype||(Ype=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=Jr(),n=Ni(),r=dx();e.keywordError={message:({keyword:g})=>(0,t.str)`must pass "${g}" keyword validation`},e.keyword$DataError={message:({keyword:g,schemaType:b})=>b?(0,t.str)`"${g}" keyword must be ${b} ($data)`:(0,t.str)`"${g}" keyword is invalid ($data)`};function i(g,b=e.keywordError,y,x){const{it:w}=g,{gen:T,compositeRule:A,allErrors:k}=w,I=f(g,b,y);x??(A||k)?u(T,I):l(w,(0,t._)`[${I}]`)}e.reportError=i;function s(g,b=e.keywordError,y){const{it:x}=g,{gen:w,compositeRule:T,allErrors:A}=x,k=f(g,b,y);u(w,k),T||A||l(x,r.default.vErrors)}e.reportExtraError=s;function o(g,b){g.assign(r.default.errors,b),g.if((0,t._)`${r.default.vErrors} !== null`,()=>g.if(b,()=>g.assign((0,t._)`${r.default.vErrors}.length`,b),()=>g.assign(r.default.vErrors,null)))}e.resetErrorsCount=o;function a({gen:g,keyword:b,schemaValue:y,data:x,errsCount:w,it:T}){if(w===void 0)throw new Error("ajv implementation error");const A=g.name("err");g.forRange("i",w,r.default.errors,k=>{g.const(A,(0,t._)`${r.default.vErrors}[${k}]`),g.if((0,t._)`${A}.instancePath === undefined`,()=>g.assign((0,t._)`${A}.instancePath`,(0,t.strConcat)(r.default.instancePath,T.errorPath))),g.assign((0,t._)`${A}.schemaPath`,(0,t.str)`${T.errSchemaPath}/${b}`),T.opts.verbose&&(g.assign((0,t._)`${A}.schema`,y),g.assign((0,t._)`${A}.data`,x))})}e.extendErrors=a;function u(g,b){const y=g.const("err",b);g.if((0,t._)`${r.default.vErrors} === null`,()=>g.assign(r.default.vErrors,(0,t._)`[${y}]`),(0,t._)`${r.default.vErrors}.push(${y})`),g.code((0,t._)`${r.default.errors}++`)}function l(g,b){const{gen:y,validateName:x,schemaEnv:w}=g;w.$async?y.throw((0,t._)`new ${g.ValidationError}(${b})`):(y.assign((0,t._)`${x}.errors`,b),y.return(!1))}const c={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function f(g,b,y){const{createErrors:x}=g.it;return x===!1?(0,t._)`{}`:d(g,b,y)}function d(g,b,y={}){const{gen:x,it:w}=g,T=[h(w,y),p(g,y)];return m(g,b,T),x.object(...T)}function h({errorPath:g},{instancePath:b}){const y=b?(0,t.str)`${g}${(0,n.getErrorPath)(b,n.Type.Str)}`:g;return[r.default.instancePath,(0,t.strConcat)(r.default.instancePath,y)]}function p({keyword:g,it:{errSchemaPath:b}},{schemaPath:y,parentSchema:x}){let w=x?b:(0,t.str)`${b}/${g}`;return y&&(w=(0,t.str)`${w}${(0,n.getErrorPath)(y,n.Type.Str)}`),[c.schemaPath,w]}function m(g,{params:b,message:y},x){const{keyword:w,data:T,schemaValue:A,it:k}=g,{opts:I,propertyName:O,topSchemaRef:M,schemaPath:L}=k;x.push([c.keyword,w],[c.params,typeof b=="function"?b(g):b||(0,t._)`{}`]),I.messages&&x.push([c.message,typeof y=="function"?y(g):y]),I.verbose&&x.push([c.schema,A],[c.parentSchema,(0,t._)`${M}${L}`],[r.default.data,T]),O&&x.push([c.propertyName,O])}}(Mj)),Mj}var Kpe;function jUt(){if(Kpe)return Qx;Kpe=1,Object.defineProperty(Qx,"__esModule",{value:!0}),Qx.boolOrEmptySchema=Qx.topBoolOrEmptySchema=void 0;const e=m7(),t=Jr(),n=dx(),r={message:"boolean schema is false"};function i(a){const{gen:u,schema:l,validateName:c}=a;l===!1?o(a,!1):typeof l=="object"&&l.$async===!0?u.return(n.default.data):(u.assign((0,t._)`${c}.errors`,null),u.return(!0))}Qx.topBoolOrEmptySchema=i;function s(a,u){const{gen:l,schema:c}=a;c===!1?(l.var(u,!1),o(a)):l.var(u,!0)}Qx.boolOrEmptySchema=s;function o(a,u){const{gen:l,data:c}=a,f={gen:l,keyword:"false schema",data:c,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:a};(0,e.reportError)(f,r,void 0,u)}return Qx}var al={},Jx={},Xpe;function M5e(){if(Xpe)return Jx;Xpe=1,Object.defineProperty(Jx,"__esModule",{value:!0}),Jx.getRules=Jx.isJSONType=void 0;const e=["string","number","integer","boolean","null","object","array"],t=new Set(e);function n(i){return typeof i=="string"&&t.has(i)}Jx.isJSONType=n;function r(){const i={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...i,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},i.number,i.string,i.array,i.object],post:{rules:[]},all:{},keywords:{}}}return Jx.getRules=r,Jx}var Ty={},Qpe;function L5e(){if(Qpe)return Ty;Qpe=1,Object.defineProperty(Ty,"__esModule",{value:!0}),Ty.shouldUseRule=Ty.shouldUseGroup=Ty.schemaHasRulesForType=void 0;function e({schema:r,self:i},s){const o=i.RULES.types[s];return o&&o!==!0&&t(r,o)}Ty.schemaHasRulesForType=e;function t(r,i){return i.rules.some(s=>n(r,s))}Ty.shouldUseGroup=t;function n(r,i){var s;return r[i.keyword]!==void 0||((s=i.definition.implements)===null||s===void 0?void 0:s.some(o=>r[o]!==void 0))}return Ty.shouldUseRule=n,Ty}var Jpe;function IO(){if(Jpe)return al;Jpe=1,Object.defineProperty(al,"__esModule",{value:!0}),al.reportTypeError=al.checkDataTypes=al.checkDataType=al.coerceAndCheckDataType=al.getJSONTypes=al.getSchemaTypes=al.DataType=void 0;const e=M5e(),t=L5e(),n=m7(),r=Jr(),i=Ni();var s;(function(y){y[y.Correct=0]="Correct",y[y.Wrong=1]="Wrong"})(s||(al.DataType=s={}));function o(y){const x=a(y.type);if(x.includes("null")){if(y.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!x.length&&y.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');y.nullable===!0&&x.push("null")}return x}al.getSchemaTypes=o;function a(y){const x=Array.isArray(y)?y:y?[y]:[];if(x.every(e.isJSONType))return x;throw new Error("type must be JSONType or JSONType[]: "+x.join(","))}al.getJSONTypes=a;function u(y,x){const{gen:w,data:T,opts:A}=y,k=c(x,A.coerceTypes),I=x.length>0&&!(k.length===0&&x.length===1&&(0,t.schemaHasRulesForType)(y,x[0]));if(I){const O=p(x,T,A.strictNumbers,s.Wrong);w.if(O,()=>{k.length?f(y,x,k):g(y)})}return I}al.coerceAndCheckDataType=u;const l=new Set(["string","number","integer","boolean","null"]);function c(y,x){return x?y.filter(w=>l.has(w)||x==="array"&&w==="array"):[]}function f(y,x,w){const{gen:T,data:A,opts:k}=y,I=T.let("dataType",(0,r._)`typeof ${A}`),O=T.let("coerced",(0,r._)`undefined`);k.coerceTypes==="array"&&T.if((0,r._)`${I} == 'object' && Array.isArray(${A}) && ${A}.length == 1`,()=>T.assign(A,(0,r._)`${A}[0]`).assign(I,(0,r._)`typeof ${A}`).if(p(x,A,k.strictNumbers),()=>T.assign(O,A))),T.if((0,r._)`${O} !== undefined`);for(const L of w)(l.has(L)||L==="array"&&k.coerceTypes==="array")&&M(L);T.else(),g(y),T.endIf(),T.if((0,r._)`${O} !== undefined`,()=>{T.assign(A,O),d(y,O)});function M(L){switch(L){case"string":T.elseIf((0,r._)`${I} == "number" || ${I} == "boolean"`).assign(O,(0,r._)`"" + ${A}`).elseIf((0,r._)`${A} === null`).assign(O,(0,r._)`""`);return;case"number":T.elseIf((0,r._)`${I} == "boolean" || ${A} === null
              || (${I} == "string" && ${A} && ${A} == +${A})`).assign(O,(0,r._)`+${A}`);return;case"integer":T.elseIf((0,r._)`${I} === "boolean" || ${A} === null
              || (${I} === "string" && ${A} && ${A} == +${A} && !(${A} % 1))`).assign(O,(0,r._)`+${A}`);return;case"boolean":T.elseIf((0,r._)`${A} === "false" || ${A} === 0 || ${A} === null`).assign(O,!1).elseIf((0,r._)`${A} === "true" || ${A} === 1`).assign(O,!0);return;case"null":T.elseIf((0,r._)`${A} === "" || ${A} === 0 || ${A} === false`),T.assign(O,null);return;case"array":T.elseIf((0,r._)`${I} === "string" || ${I} === "number"
              || ${I} === "boolean" || ${A} === null`).assign(O,(0,r._)`[${A}]`)}}}function d({gen:y,parentData:x,parentDataProperty:w},T){y.if((0,r._)`${x} !== undefined`,()=>y.assign((0,r._)`${x}[${w}]`,T))}function h(y,x,w,T=s.Correct){const A=T===s.Correct?r.operators.EQ:r.operators.NEQ;let k;switch(y){case"null":return(0,r._)`${x} ${A} null`;case"array":k=(0,r._)`Array.isArray(${x})`;break;case"object":k=(0,r._)`${x} && typeof ${x} == "object" && !Array.isArray(${x})`;break;case"integer":k=I((0,r._)`!(${x} % 1) && !isNaN(${x})`);break;case"number":k=I();break;default:return(0,r._)`typeof ${x} ${A} ${y}`}return T===s.Correct?k:(0,r.not)(k);function I(O=r.nil){return(0,r.and)((0,r._)`typeof ${x} == "number"`,O,w?(0,r._)`isFinite(${x})`:r.nil)}}al.checkDataType=h;function p(y,x,w,T){if(y.length===1)return h(y[0],x,w,T);let A;const k=(0,i.toHash)(y);if(k.array&&k.object){const I=(0,r._)`typeof ${x} != "object"`;A=k.null?I:(0,r._)`!${x} || ${I}`,delete k.null,delete k.array,delete k.object}else A=r.nil;k.number&&delete k.integer;for(const I in k)A=(0,r.and)(A,h(I,x,w,T));return A}al.checkDataTypes=p;const m={message:({schema:y})=>`must be ${y}`,params:({schema:y,schemaValue:x})=>typeof y=="string"?(0,r._)`{type: ${y}}`:(0,r._)`{type: ${x}}`};function g(y){const x=b(y);(0,n.reportError)(x,m)}al.reportTypeError=g;function b(y){const{gen:x,data:w,schema:T}=y,A=(0,i.schemaRefOrVal)(y,T,"type");return{gen:x,keyword:"type",data:w,schema:T.type,schemaCode:A,schemaValue:A,parentSchema:T,params:{},it:y}}return al}var m3={},Zpe;function UUt(){if(Zpe)return m3;Zpe=1,Object.defineProperty(m3,"__esModule",{value:!0}),m3.assignDefaults=void 0;const e=Jr(),t=Ni();function n(i,s){const{properties:o,items:a}=i.schema;if(s==="object"&&o)for(const u in o)r(i,u,o[u].default);else s==="array"&&Array.isArray(a)&&a.forEach((u,l)=>r(i,l,u.default))}m3.assignDefaults=n;function r(i,s,o){const{gen:a,compositeRule:u,data:l,opts:c}=i;if(o===void 0)return;const f=(0,e._)`${l}${(0,e.getProperty)(s)}`;if(u){(0,t.checkStrictMode)(i,`default is ignored for: ${f}`);return}let d=(0,e._)`${f} === undefined`;c.useDefaults==="empty"&&(d=(0,e._)`${d} || ${f} === null || ${f} === ""`),a.if(d,(0,e._)`${f} = ${(0,e.stringify)(o)}`)}return m3}var Kp={},is={},e0e;function G0(){if(e0e)return is;e0e=1,Object.defineProperty(is,"__esModule",{value:!0}),is.validateUnion=is.validateArray=is.usePattern=is.callValidateCode=is.schemaProperties=is.allSchemaProperties=is.noPropertyInData=is.propertyInData=is.isOwnProperty=is.hasPropFunc=is.reportMissingProp=is.checkMissingProp=is.checkReportMissingProp=void 0;const e=Jr(),t=Ni(),n=dx(),r=Ni();function i(y,x){const{gen:w,data:T,it:A}=y;w.if(c(w,T,x,A.opts.ownProperties),()=>{y.setParams({missingProperty:(0,e._)`${x}`},!0),y.error()})}is.checkReportMissingProp=i;function s({gen:y,data:x,it:{opts:w}},T,A){return(0,e.or)(...T.map(k=>(0,e.and)(c(y,x,k,w.ownProperties),(0,e._)`${A} = ${k}`)))}is.checkMissingProp=s;function o(y,x){y.setParams({missingProperty:x},!0),y.error()}is.reportMissingProp=o;function a(y){return y.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,e._)`Object.prototype.hasOwnProperty`})}is.hasPropFunc=a;function u(y,x,w){return(0,e._)`${a(y)}.call(${x}, ${w})`}is.isOwnProperty=u;function l(y,x,w,T){const A=(0,e._)`${x}${(0,e.getProperty)(w)} !== undefined`;return T?(0,e._)`${A} && ${u(y,x,w)}`:A}is.propertyInData=l;function c(y,x,w,T){const A=(0,e._)`${x}${(0,e.getProperty)(w)} === undefined`;return T?(0,e.or)(A,(0,e.not)(u(y,x,w))):A}is.noPropertyInData=c;function f(y){return y?Object.keys(y).filter(x=>x!=="__proto__"):[]}is.allSchemaProperties=f;function d(y,x){return f(x).filter(w=>!(0,t.alwaysValidSchema)(y,x[w]))}is.schemaProperties=d;function h({schemaCode:y,data:x,it:{gen:w,topSchemaRef:T,schemaPath:A,errorPath:k},it:I},O,M,L){const H=L?(0,e._)`${y}, ${x}, ${T}${A}`:x,D=[[n.default.instancePath,(0,e.strConcat)(n.default.instancePath,k)],[n.default.parentData,I.parentData],[n.default.parentDataProperty,I.parentDataProperty],[n.default.rootData,n.default.rootData]];I.opts.dynamicRef&&D.push([n.default.dynamicAnchors,n.default.dynamicAnchors]);const B=(0,e._)`${H}, ${w.object(...D)}`;return M!==e.nil?(0,e._)`${O}.call(${M}, ${B})`:(0,e._)`${O}(${B})`}is.callValidateCode=h;const p=(0,e._)`new RegExp`;function m({gen:y,it:{opts:x}},w){const T=x.unicodeRegExp?"u":"",{regExp:A}=x.code,k=A(w,T);return y.scopeValue("pattern",{key:k.toString(),ref:k,code:(0,e._)`${A.code==="new RegExp"?p:(0,r.useFunc)(y,A)}(${w}, ${T})`})}is.usePattern=m;function g(y){const{gen:x,data:w,keyword:T,it:A}=y,k=x.name("valid");if(A.allErrors){const O=x.let("valid",!0);return I(()=>x.assign(O,!1)),O}return x.var(k,!0),I(()=>x.break()),k;function I(O){const M=x.const("len",(0,e._)`${w}.length`);x.forRange("i",0,M,L=>{y.subschema({keyword:T,dataProp:L,dataPropType:t.Type.Num},k),x.if((0,e.not)(k),O)})}}is.validateArray=g;function b(y){const{gen:x,schema:w,keyword:T,it:A}=y;if(!Array.isArray(w))throw new Error("ajv implementation error");if(w.some(M=>(0,t.alwaysValidSchema)(A,M))&&!A.opts.unevaluated)return;const I=x.let("valid",!1),O=x.name("_valid");x.block(()=>w.forEach((M,L)=>{const H=y.subschema({keyword:T,schemaProp:L,compositeRule:!0},O);x.assign(I,(0,e._)`${I} || ${O}`),y.mergeValidEvaluated(H,O)||x.if((0,e.not)(I))})),y.result(I,()=>y.reset(),()=>y.error(!0))}return is.validateUnion=b,is}var t0e;function zUt(){if(t0e)return Kp;t0e=1,Object.defineProperty(Kp,"__esModule",{value:!0}),Kp.validateKeywordUsage=Kp.validSchemaType=Kp.funcKeywordCode=Kp.macroKeywordCode=void 0;const e=Jr(),t=dx(),n=G0(),r=m7();function i(d,h){const{gen:p,keyword:m,schema:g,parentSchema:b,it:y}=d,x=h.macro.call(y.self,g,b,y),w=l(p,m,x);y.opts.validateSchema!==!1&&y.self.validateSchema(x,!0);const T=p.name("valid");d.subschema({schema:x,schemaPath:e.nil,errSchemaPath:`${y.errSchemaPath}/${m}`,topSchemaRef:w,compositeRule:!0},T),d.pass(T,()=>d.error(!0))}Kp.macroKeywordCode=i;function s(d,h){var p;const{gen:m,keyword:g,schema:b,parentSchema:y,$data:x,it:w}=d;u(w,h);const T=!x&&h.compile?h.compile.call(w.self,b,y,w):h.validate,A=l(m,g,T),k=m.let("valid");d.block$data(k,I),d.ok((p=h.valid)!==null&&p!==void 0?p:k);function I(){if(h.errors===!1)L(),h.modifying&&o(d),H(()=>d.error());else{const D=h.async?O():M();h.modifying&&o(d),H(()=>a(d,D))}}function O(){const D=m.let("ruleErrs",null);return m.try(()=>L((0,e._)`await `),B=>m.assign(k,!1).if((0,e._)`${B} instanceof ${w.ValidationError}`,()=>m.assign(D,(0,e._)`${B}.errors`),()=>m.throw(B))),D}function M(){const D=(0,e._)`${A}.errors`;return m.assign(D,null),L(e.nil),D}function L(D=h.async?(0,e._)`await `:e.nil){const B=w.opts.passContext?t.default.this:t.default.self,U=!("compile"in h&&!x||h.schema===!1);m.assign(k,(0,e._)`${D}${(0,n.callValidateCode)(d,A,B,U)}`,h.modifying)}function H(D){var B;m.if((0,e.not)((B=h.valid)!==null&&B!==void 0?B:k),D)}}Kp.funcKeywordCode=s;function o(d){const{gen:h,data:p,it:m}=d;h.if(m.parentData,()=>h.assign(p,(0,e._)`${m.parentData}[${m.parentDataProperty}]`))}function a(d,h){const{gen:p}=d;p.if((0,e._)`Array.isArray(${h})`,()=>{p.assign(t.default.vErrors,(0,e._)`${t.default.vErrors} === null ? ${h} : ${t.default.vErrors}.concat(${h})`).assign(t.default.errors,(0,e._)`${t.default.vErrors}.length`),(0,r.extendErrors)(d)},()=>d.error())}function u({schemaEnv:d},h){if(h.async&&!d.$async)throw new Error("async keyword in sync schema")}function l(d,h,p){if(p===void 0)throw new Error(`keyword "${h}" failed to compile`);return d.scopeValue("keyword",typeof p=="function"?{ref:p}:{ref:p,code:(0,e.stringify)(p)})}function c(d,h,p=!1){return!h.length||h.some(m=>m==="array"?Array.isArray(d):m==="object"?d&&typeof d=="object"&&!Array.isArray(d):typeof d==m||p&&typeof d>"u")}Kp.validSchemaType=c;function f({schema:d,opts:h,self:p,errSchemaPath:m},g,b){if(Array.isArray(g.keyword)?!g.keyword.includes(b):g.keyword!==b)throw new Error("ajv implementation error");const y=g.dependencies;if(y!=null&&y.some(x=>!Object.prototype.hasOwnProperty.call(d,x)))throw new Error(`parent schema must have dependencies of ${b}: ${y.join(",")}`);if(g.validateSchema&&!g.validateSchema(d[b])){const w=`keyword "${b}" value is invalid at path "${m}": `+p.errorsText(g.validateSchema.errors);if(h.validateSchema==="log")p.logger.error(w);else throw new Error(w)}}return Kp.validateKeywordUsage=f,Kp}var Cy={},n0e;function VUt(){if(n0e)return Cy;n0e=1,Object.defineProperty(Cy,"__esModule",{value:!0}),Cy.extendSubschemaMode=Cy.extendSubschemaData=Cy.getSubschema=void 0;const e=Jr(),t=Ni();function n(s,{keyword:o,schemaProp:a,schema:u,schemaPath:l,errSchemaPath:c,topSchemaRef:f}){if(o!==void 0&&u!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(o!==void 0){const d=s.schema[o];return a===void 0?{schema:d,schemaPath:(0,e._)`${s.schemaPath}${(0,e.getProperty)(o)}`,errSchemaPath:`${s.errSchemaPath}/${o}`}:{schema:d[a],schemaPath:(0,e._)`${s.schemaPath}${(0,e.getProperty)(o)}${(0,e.getProperty)(a)}`,errSchemaPath:`${s.errSchemaPath}/${o}/${(0,t.escapeFragment)(a)}`}}if(u!==void 0){if(l===void 0||c===void 0||f===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:u,schemaPath:l,topSchemaRef:f,errSchemaPath:c}}throw new Error('either "keyword" or "schema" must be passed')}Cy.getSubschema=n;function r(s,o,{dataProp:a,dataPropType:u,data:l,dataTypes:c,propertyName:f}){if(l!==void 0&&a!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:d}=o;if(a!==void 0){const{errorPath:p,dataPathArr:m,opts:g}=o,b=d.let("data",(0,e._)`${o.data}${(0,e.getProperty)(a)}`,!0);h(b),s.errorPath=(0,e.str)`${p}${(0,t.getErrorPath)(a,u,g.jsPropertySyntax)}`,s.parentDataProperty=(0,e._)`${a}`,s.dataPathArr=[...m,s.parentDataProperty]}if(l!==void 0){const p=l instanceof e.Name?l:d.let("data",l,!0);h(p),f!==void 0&&(s.propertyName=f)}c&&(s.dataTypes=c);function h(p){s.data=p,s.dataLevel=o.dataLevel+1,s.dataTypes=[],o.definedProperties=new Set,s.parentData=o.data,s.dataNames=[...o.dataNames,p]}}Cy.extendSubschemaData=r;function i(s,{jtdDiscriminator:o,jtdMetadata:a,compositeRule:u,createErrors:l,allErrors:c}){u!==void 0&&(s.compositeRule=u),l!==void 0&&(s.createErrors=l),c!==void 0&&(s.allErrors=c),s.jtdDiscriminator=o,s.jtdMetadata=a}return Cy.extendSubschemaMode=i,Cy}var qc={},Bj={exports:{}},r0e;function HUt(){if(r0e)return Bj.exports;r0e=1;var e=Bj.exports=function(r,i,s){typeof i=="function"&&(s=i,i={}),s=i.cb||s;var o=typeof s=="function"?s:s.pre||function(){},a=s.post||function(){};t(i,o,a,r,"",r)};e.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},e.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},e.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},e.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function t(r,i,s,o,a,u,l,c,f,d){if(o&&typeof o=="object"&&!Array.isArray(o)){i(o,a,u,l,c,f,d);for(var h in o){var p=o[h];if(Array.isArray(p)){if(h in e.arrayKeywords)for(var m=0;m<p.length;m++)t(r,i,s,p[m],a+"/"+h+"/"+m,u,a,h,o,m)}else if(h in e.propsKeywords){if(p&&typeof p=="object")for(var g in p)t(r,i,s,p[g],a+"/"+h+"/"+n(g),u,a,h,o,g)}else(h in e.keywords||r.allKeys&&!(h in e.skipKeywords))&&t(r,i,s,p,a+"/"+h,u,a,h,o)}s(o,a,u,l,c,f,d)}}function n(r){return r.replace(/~/g,"~0").replace(/\//g,"~1")}return Bj.exports}var i0e;function g7(){if(i0e)return qc;i0e=1,Object.defineProperty(qc,"__esModule",{value:!0}),qc.getSchemaRefs=qc.resolveUrl=qc.normalizeId=qc._getFullPath=qc.getFullPath=qc.inlineRef=void 0;const e=Ni(),t=qY(),n=HUt(),r=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function i(m,g=!0){return typeof m=="boolean"?!0:g===!0?!o(m):g?a(m)<=g:!1}qc.inlineRef=i;const s=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function o(m){for(const g in m){if(s.has(g))return!0;const b=m[g];if(Array.isArray(b)&&b.some(o)||typeof b=="object"&&o(b))return!0}return!1}function a(m){let g=0;for(const b in m){if(b==="$ref")return 1/0;if(g++,!r.has(b)&&(typeof m[b]=="object"&&(0,e.eachItem)(m[b],y=>g+=a(y)),g===1/0))return 1/0}return g}function u(m,g="",b){b!==!1&&(g=f(g));const y=m.parse(g);return l(m,y)}qc.getFullPath=u;function l(m,g){return m.serialize(g).split("#")[0]+"#"}qc._getFullPath=l;const c=/#\/?$/;function f(m){return m?m.replace(c,""):""}qc.normalizeId=f;function d(m,g,b){return b=f(b),m.resolve(g,b)}qc.resolveUrl=d;const h=/^[a-z_][-a-z0-9._]*$/i;function p(m,g){if(typeof m=="boolean")return{};const{schemaId:b,uriResolver:y}=this.opts,x=f(m[b]||g),w={"":x},T=u(y,x,!1),A={},k=new Set;return n(m,{allKeys:!0},(M,L,H,D)=>{if(D===void 0)return;const B=T+L;let U=w[D];typeof M[b]=="string"&&(U=G.call(this,M[b])),ee.call(this,M.$anchor),ee.call(this,M.$dynamicAnchor),w[L]=U;function G(ne){const ue=this.opts.uriResolver.resolve;if(ne=f(U?ue(U,ne):ne),k.has(ne))throw O(ne);k.add(ne);let X=this.refs[ne];return typeof X=="string"&&(X=this.refs[X]),typeof X=="object"?I(M,X.schema,ne):ne!==f(B)&&(ne[0]==="#"?(I(M,A[ne],ne),A[ne]=M):this.refs[ne]=B),ne}function ee(ne){if(typeof ne=="string"){if(!h.test(ne))throw new Error(`invalid anchor "${ne}"`);G.call(this,`#${ne}`)}}}),A;function I(M,L,H){if(L!==void 0&&!t(M,L))throw O(H)}function O(M){return new Error(`reference "${M}" resolves to more than one schema`)}}return qc.getSchemaRefs=p,qc}var s0e;function y7(){if(s0e)return Sy;s0e=1,Object.defineProperty(Sy,"__esModule",{value:!0}),Sy.getData=Sy.KeywordCxt=Sy.validateFunctionCode=void 0;const e=jUt(),t=IO(),n=L5e(),r=IO(),i=UUt(),s=zUt(),o=VUt(),a=Jr(),u=dx(),l=g7(),c=Ni(),f=m7();function d(ge){if(T(ge)&&(k(ge),w(ge))){g(ge);return}h(ge,()=>(0,e.topBoolOrEmptySchema)(ge))}Sy.validateFunctionCode=d;function h({gen:ge,validateName:me,schema:Oe,schemaEnv:Me,opts:Ye},lt){Ye.code.es5?ge.func(me,(0,a._)`${u.default.data}, ${u.default.valCxt}`,Me.$async,()=>{ge.code((0,a._)`"use strict"; ${y(Oe,Ye)}`),m(ge,Ye),ge.code(lt)}):ge.func(me,(0,a._)`${u.default.data}, ${p(Ye)}`,Me.$async,()=>ge.code(y(Oe,Ye)).code(lt))}function p(ge){return(0,a._)`{${u.default.instancePath}="", ${u.default.parentData}, ${u.default.parentDataProperty}, ${u.default.rootData}=${u.default.data}${ge.dynamicRef?(0,a._)`, ${u.default.dynamicAnchors}={}`:a.nil}}={}`}function m(ge,me){ge.if(u.default.valCxt,()=>{ge.var(u.default.instancePath,(0,a._)`${u.default.valCxt}.${u.default.instancePath}`),ge.var(u.default.parentData,(0,a._)`${u.default.valCxt}.${u.default.parentData}`),ge.var(u.default.parentDataProperty,(0,a._)`${u.default.valCxt}.${u.default.parentDataProperty}`),ge.var(u.default.rootData,(0,a._)`${u.default.valCxt}.${u.default.rootData}`),me.dynamicRef&&ge.var(u.default.dynamicAnchors,(0,a._)`${u.default.valCxt}.${u.default.dynamicAnchors}`)},()=>{ge.var(u.default.instancePath,(0,a._)`""`),ge.var(u.default.parentData,(0,a._)`undefined`),ge.var(u.default.parentDataProperty,(0,a._)`undefined`),ge.var(u.default.rootData,u.default.data),me.dynamicRef&&ge.var(u.default.dynamicAnchors,(0,a._)`{}`)})}function g(ge){const{schema:me,opts:Oe,gen:Me}=ge;h(ge,()=>{Oe.$comment&&me.$comment&&D(ge),M(ge),Me.let(u.default.vErrors,null),Me.let(u.default.errors,0),Oe.unevaluated&&b(ge),I(ge),B(ge)})}function b(ge){const{gen:me,validateName:Oe}=ge;ge.evaluated=me.const("evaluated",(0,a._)`${Oe}.evaluated`),me.if((0,a._)`${ge.evaluated}.dynamicProps`,()=>me.assign((0,a._)`${ge.evaluated}.props`,(0,a._)`undefined`)),me.if((0,a._)`${ge.evaluated}.dynamicItems`,()=>me.assign((0,a._)`${ge.evaluated}.items`,(0,a._)`undefined`))}function y(ge,me){const Oe=typeof ge=="object"&&ge[me.schemaId];return Oe&&(me.code.source||me.code.process)?(0,a._)`/*# sourceURL=${Oe} */`:a.nil}function x(ge,me){if(T(ge)&&(k(ge),w(ge))){A(ge,me);return}(0,e.boolOrEmptySchema)(ge,me)}function w({schema:ge,self:me}){if(typeof ge=="boolean")return!ge;for(const Oe in ge)if(me.RULES.all[Oe])return!0;return!1}function T(ge){return typeof ge.schema!="boolean"}function A(ge,me){const{schema:Oe,gen:Me,opts:Ye}=ge;Ye.$comment&&Oe.$comment&&D(ge),L(ge),H(ge);const lt=Me.const("_errs",u.default.errors);I(ge,lt),Me.var(me,(0,a._)`${lt} === ${u.default.errors}`)}function k(ge){(0,c.checkUnknownRules)(ge),O(ge)}function I(ge,me){if(ge.opts.jtd)return G(ge,[],!1,me);const Oe=(0,t.getSchemaTypes)(ge.schema),Me=(0,t.coerceAndCheckDataType)(ge,Oe);G(ge,Oe,!Me,me)}function O(ge){const{schema:me,errSchemaPath:Oe,opts:Me,self:Ye}=ge;me.$ref&&Me.ignoreKeywordsWithRef&&(0,c.schemaHasRulesButRef)(me,Ye.RULES)&&Ye.logger.warn(`$ref: keywords ignored in schema at path "${Oe}"`)}function M(ge){const{schema:me,opts:Oe}=ge;me.default!==void 0&&Oe.useDefaults&&Oe.strictSchema&&(0,c.checkStrictMode)(ge,"default is ignored in the schema root")}function L(ge){const me=ge.schema[ge.opts.schemaId];me&&(ge.baseId=(0,l.resolveUrl)(ge.opts.uriResolver,ge.baseId,me))}function H(ge){if(ge.schema.$async&&!ge.schemaEnv.$async)throw new Error("async schema in sync schema")}function D({gen:ge,schemaEnv:me,schema:Oe,errSchemaPath:Me,opts:Ye}){const lt=Oe.$comment;if(Ye.$comment===!0)ge.code((0,a._)`${u.default.self}.logger.log(${lt})`);else if(typeof Ye.$comment=="function"){const We=(0,a.str)`${Me}/$comment`,nt=ge.scopeValue("root",{ref:me.root});ge.code((0,a._)`${u.default.self}.opts.$comment(${lt}, ${We}, ${nt}.schema)`)}}function B(ge){const{gen:me,schemaEnv:Oe,validateName:Me,ValidationError:Ye,opts:lt}=ge;Oe.$async?me.if((0,a._)`${u.default.errors} === 0`,()=>me.return(u.default.data),()=>me.throw((0,a._)`new ${Ye}(${u.default.vErrors})`)):(me.assign((0,a._)`${Me}.errors`,u.default.vErrors),lt.unevaluated&&U(ge),me.return((0,a._)`${u.default.errors} === 0`))}function U({gen:ge,evaluated:me,props:Oe,items:Me}){Oe instanceof a.Name&&ge.assign((0,a._)`${me}.props`,Oe),Me instanceof a.Name&&ge.assign((0,a._)`${me}.items`,Me)}function G(ge,me,Oe,Me){const{gen:Ye,schema:lt,data:We,allErrors:nt,opts:yt,self:_t}=ge,{RULES:Rt}=_t;if(lt.$ref&&(yt.ignoreKeywordsWithRef||!(0,c.schemaHasRulesButRef)(lt,Rt))){Ye.block(()=>ce(ge,"$ref",Rt.all.$ref.definition));return}yt.jtd||ne(ge,me),Ye.block(()=>{for(const Ke of Rt.rules)Et(Ke);Et(Rt.post)});function Et(Ke){(0,n.shouldUseGroup)(lt,Ke)&&(Ke.type?(Ye.if((0,r.checkDataType)(Ke.type,We,yt.strictNumbers)),ee(ge,Ke),me.length===1&&me[0]===Ke.type&&Oe&&(Ye.else(),(0,r.reportTypeError)(ge)),Ye.endIf()):ee(ge,Ke),nt||Ye.if((0,a._)`${u.default.errors} === ${Me||0}`))}}function ee(ge,me){const{gen:Oe,schema:Me,opts:{useDefaults:Ye}}=ge;Ye&&(0,i.assignDefaults)(ge,me.type),Oe.block(()=>{for(const lt of me.rules)(0,n.shouldUseRule)(Me,lt)&&ce(ge,lt.keyword,lt.definition,me.type)})}function ne(ge,me){ge.schemaEnv.meta||!ge.opts.strictTypes||(ue(ge,me),ge.opts.allowUnionTypes||X(ge,me),q(ge,ge.dataTypes))}function ue(ge,me){if(me.length){if(!ge.dataTypes.length){ge.dataTypes=me;return}me.forEach(Oe=>{W(ge.dataTypes,Oe)||oe(ge,`type "${Oe}" not allowed by context "${ge.dataTypes.join(",")}"`)}),Z(ge,me)}}function X(ge,me){me.length>1&&!(me.length===2&&me.includes("null"))&&oe(ge,"use allowUnionTypes to allow union type keyword")}function q(ge,me){const Oe=ge.self.RULES.all;for(const Me in Oe){const Ye=Oe[Me];if(typeof Ye=="object"&&(0,n.shouldUseRule)(ge.schema,Ye)){const{type:lt}=Ye.definition;lt.length&&!lt.some(We=>te(me,We))&&oe(ge,`missing type "${lt.join(",")}" for keyword "${Me}"`)}}}function te(ge,me){return ge.includes(me)||me==="number"&&ge.includes("integer")}function W(ge,me){return ge.includes(me)||me==="integer"&&ge.includes("number")}function Z(ge,me){const Oe=[];for(const Me of ge.dataTypes)W(me,Me)?Oe.push(Me):me.includes("integer")&&Me==="number"&&Oe.push("integer");ge.dataTypes=Oe}function oe(ge,me){const Oe=ge.schemaEnv.baseId+ge.errSchemaPath;me+=` at "${Oe}" (strictTypes)`,(0,c.checkStrictMode)(ge,me,ge.opts.strictTypes)}class pe{constructor(me,Oe,Me){if((0,s.validateKeywordUsage)(me,Oe,Me),this.gen=me.gen,this.allErrors=me.allErrors,this.keyword=Me,this.data=me.data,this.schema=me.schema[Me],this.$data=Oe.$data&&me.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,c.schemaRefOrVal)(me,this.schema,Me,this.$data),this.schemaType=Oe.schemaType,this.parentSchema=me.schema,this.params={},this.it=me,this.def=Oe,this.$data)this.schemaCode=me.gen.const("vSchema",Ae(this.$data,me));else if(this.schemaCode=this.schemaValue,!(0,s.validSchemaType)(this.schema,Oe.schemaType,Oe.allowUndefined))throw new Error(`${Me} value must be ${JSON.stringify(Oe.schemaType)}`);("code"in Oe?Oe.trackErrors:Oe.errors!==!1)&&(this.errsCount=me.gen.const("_errs",u.default.errors))}result(me,Oe,Me){this.failResult((0,a.not)(me),Oe,Me)}failResult(me,Oe,Me){this.gen.if(me),Me?Me():this.error(),Oe?(this.gen.else(),Oe(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(me,Oe){this.failResult((0,a.not)(me),void 0,Oe)}fail(me){if(me===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(me),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(me){if(!this.$data)return this.fail(me);const{schemaCode:Oe}=this;this.fail((0,a._)`${Oe} !== undefined && (${(0,a.or)(this.invalid$data(),me)})`)}error(me,Oe,Me){if(Oe){this.setParams(Oe),this._error(me,Me),this.setParams({});return}this._error(me,Me)}_error(me,Oe){(me?f.reportExtraError:f.reportError)(this,this.def.error,Oe)}$dataError(){(0,f.reportError)(this,this.def.$dataError||f.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,f.resetErrorsCount)(this.gen,this.errsCount)}ok(me){this.allErrors||this.gen.if(me)}setParams(me,Oe){Oe?Object.assign(this.params,me):this.params=me}block$data(me,Oe,Me=a.nil){this.gen.block(()=>{this.check$data(me,Me),Oe()})}check$data(me=a.nil,Oe=a.nil){if(!this.$data)return;const{gen:Me,schemaCode:Ye,schemaType:lt,def:We}=this;Me.if((0,a.or)((0,a._)`${Ye} === undefined`,Oe)),me!==a.nil&&Me.assign(me,!0),(lt.length||We.validateSchema)&&(Me.elseIf(this.invalid$data()),this.$dataError(),me!==a.nil&&Me.assign(me,!1)),Me.else()}invalid$data(){const{gen:me,schemaCode:Oe,schemaType:Me,def:Ye,it:lt}=this;return(0,a.or)(We(),nt());function We(){if(Me.length){if(!(Oe instanceof a.Name))throw new Error("ajv implementation error");const yt=Array.isArray(Me)?Me:[Me];return(0,a._)`${(0,r.checkDataTypes)(yt,Oe,lt.opts.strictNumbers,r.DataType.Wrong)}`}return a.nil}function nt(){if(Ye.validateSchema){const yt=me.scopeValue("validate$data",{ref:Ye.validateSchema});return(0,a._)`!${yt}(${Oe})`}return a.nil}}subschema(me,Oe){const Me=(0,o.getSubschema)(this.it,me);(0,o.extendSubschemaData)(Me,this.it,me),(0,o.extendSubschemaMode)(Me,me);const Ye={...this.it,...Me,items:void 0,props:void 0};return x(Ye,Oe),Ye}mergeEvaluated(me,Oe){const{it:Me,gen:Ye}=this;Me.opts.unevaluated&&(Me.props!==!0&&me.props!==void 0&&(Me.props=c.mergeEvaluated.props(Ye,me.props,Me.props,Oe)),Me.items!==!0&&me.items!==void 0&&(Me.items=c.mergeEvaluated.items(Ye,me.items,Me.items,Oe)))}mergeValidEvaluated(me,Oe){const{it:Me,gen:Ye}=this;if(Me.opts.unevaluated&&(Me.props!==!0||Me.items!==!0))return Ye.if(Oe,()=>this.mergeEvaluated(me,a.Name)),!0}}Sy.KeywordCxt=pe;function ce(ge,me,Oe,Me){const Ye=new pe(ge,Oe,me);"code"in Oe?Oe.code(Ye,Me):Ye.$data&&Oe.validate?(0,s.funcKeywordCode)(Ye,Oe):"macro"in Oe?(0,s.macroKeywordCode)(Ye,Oe):(Oe.compile||Oe.validate)&&(0,s.funcKeywordCode)(Ye,Oe)}const he=/^\/(?:[^~]|~0|~1)*$/,Ee=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function Ae(ge,{dataLevel:me,dataNames:Oe,dataPathArr:Me}){let Ye,lt;if(ge==="")return u.default.rootData;if(ge[0]==="/"){if(!he.test(ge))throw new Error(`Invalid JSON-pointer: ${ge}`);Ye=ge,lt=u.default.rootData}else{const _t=Ee.exec(ge);if(!_t)throw new Error(`Invalid JSON-pointer: ${ge}`);const Rt=+_t[1];if(Ye=_t[2],Ye==="#"){if(Rt>=me)throw new Error(yt("property/index",Rt));return Me[me-Rt]}if(Rt>me)throw new Error(yt("data",Rt));if(lt=Oe[me-Rt],!Ye)return lt}let We=lt;const nt=Ye.split("/");for(const _t of nt)_t&&(lt=(0,a._)`${lt}${(0,a.getProperty)((0,c.unescapeJsonPointer)(_t))}`,We=(0,a._)`${We} && ${lt}`);return We;function yt(_t,Rt){return`Cannot access ${_t} ${Rt} levels up, current level is ${me}`}}return Sy.getData=Ae,Sy}var I5={},o0e;function Yee(){if(o0e)return I5;o0e=1,Object.defineProperty(I5,"__esModule",{value:!0});class e extends Error{constructor(n){super("validation failed"),this.errors=n,this.ajv=this.validation=!0}}return I5.default=e,I5}var P5={},a0e;function v7(){if(a0e)return P5;a0e=1,Object.defineProperty(P5,"__esModule",{value:!0});const e=g7();class t extends Error{constructor(r,i,s,o){super(o||`can't resolve reference ${s} from id ${i}`),this.missingRef=(0,e.resolveUrl)(r,i,s),this.missingSchema=(0,e.normalizeId)((0,e.getFullPath)(r,this.missingRef))}}return P5.default=t,P5}var Fd={},u0e;function Kee(){if(u0e)return Fd;u0e=1,Object.defineProperty(Fd,"__esModule",{value:!0}),Fd.resolveSchema=Fd.getCompilingSchema=Fd.resolveRef=Fd.compileSchema=Fd.SchemaEnv=void 0;const e=Jr(),t=Yee(),n=dx(),r=g7(),i=Ni(),s=y7();class o{constructor(b){var y;this.refs={},this.dynamicAnchors={};let x;typeof b.schema=="object"&&(x=b.schema),this.schema=b.schema,this.schemaId=b.schemaId,this.root=b.root||this,this.baseId=(y=b.baseId)!==null&&y!==void 0?y:(0,r.normalizeId)(x==null?void 0:x[b.schemaId||"$id"]),this.schemaPath=b.schemaPath,this.localRefs=b.localRefs,this.meta=b.meta,this.$async=x==null?void 0:x.$async,this.refs={}}}Fd.SchemaEnv=o;function a(g){const b=c.call(this,g);if(b)return b;const y=(0,r.getFullPath)(this.opts.uriResolver,g.root.baseId),{es5:x,lines:w}=this.opts.code,{ownProperties:T}=this.opts,A=new e.CodeGen(this.scope,{es5:x,lines:w,ownProperties:T});let k;g.$async&&(k=A.scopeValue("Error",{ref:t.default,code:(0,e._)`require("ajv/dist/runtime/validation_error").default`}));const I=A.scopeName("validate");g.validateName=I;const O={gen:A,allErrors:this.opts.allErrors,data:n.default.data,parentData:n.default.parentData,parentDataProperty:n.default.parentDataProperty,dataNames:[n.default.data],dataPathArr:[e.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:A.scopeValue("schema",this.opts.code.source===!0?{ref:g.schema,code:(0,e.stringify)(g.schema)}:{ref:g.schema}),validateName:I,ValidationError:k,schema:g.schema,schemaEnv:g,rootId:y,baseId:g.baseId||y,schemaPath:e.nil,errSchemaPath:g.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,e._)`""`,opts:this.opts,self:this};let M;try{this._compilations.add(g),(0,s.validateFunctionCode)(O),A.optimize(this.opts.code.optimize);const L=A.toString();M=`${A.scopeRefs(n.default.scope)}return ${L}`,this.opts.code.process&&(M=this.opts.code.process(M,g));const D=new Function(`${n.default.self}`,`${n.default.scope}`,M)(this,this.scope.get());if(this.scope.value(I,{ref:D}),D.errors=null,D.schema=g.schema,D.schemaEnv=g,g.$async&&(D.$async=!0),this.opts.code.source===!0&&(D.source={validateName:I,validateCode:L,scopeValues:A._values}),this.opts.unevaluated){const{props:B,items:U}=O;D.evaluated={props:B instanceof e.Name?void 0:B,items:U instanceof e.Name?void 0:U,dynamicProps:B instanceof e.Name,dynamicItems:U instanceof e.Name},D.source&&(D.source.evaluated=(0,e.stringify)(D.evaluated))}return g.validate=D,g}catch(L){throw delete g.validate,delete g.validateName,M&&this.logger.error("Error compiling schema, function code:",M),L}finally{this._compilations.delete(g)}}Fd.compileSchema=a;function u(g,b,y){var x;y=(0,r.resolveUrl)(this.opts.uriResolver,b,y);const w=g.refs[y];if(w)return w;let T=d.call(this,g,y);if(T===void 0){const A=(x=g.localRefs)===null||x===void 0?void 0:x[y],{schemaId:k}=this.opts;A&&(T=new o({schema:A,schemaId:k,root:g,baseId:b}))}if(T!==void 0)return g.refs[y]=l.call(this,T)}Fd.resolveRef=u;function l(g){return(0,r.inlineRef)(g.schema,this.opts.inlineRefs)?g.schema:g.validate?g:a.call(this,g)}function c(g){for(const b of this._compilations)if(f(b,g))return b}Fd.getCompilingSchema=c;function f(g,b){return g.schema===b.schema&&g.root===b.root&&g.baseId===b.baseId}function d(g,b){let y;for(;typeof(y=this.refs[b])=="string";)b=y;return y||this.schemas[b]||h.call(this,g,b)}function h(g,b){const y=this.opts.uriResolver.parse(b),x=(0,r._getFullPath)(this.opts.uriResolver,y);let w=(0,r.getFullPath)(this.opts.uriResolver,g.baseId,void 0);if(Object.keys(g.schema).length>0&&x===w)return m.call(this,y,g);const T=(0,r.normalizeId)(x),A=this.refs[T]||this.schemas[T];if(typeof A=="string"){const k=h.call(this,g,A);return typeof(k==null?void 0:k.schema)!="object"?void 0:m.call(this,y,k)}if(typeof(A==null?void 0:A.schema)=="object"){if(A.validate||a.call(this,A),T===(0,r.normalizeId)(b)){const{schema:k}=A,{schemaId:I}=this.opts,O=k[I];return O&&(w=(0,r.resolveUrl)(this.opts.uriResolver,w,O)),new o({schema:k,schemaId:I,root:g,baseId:w})}return m.call(this,y,A)}}Fd.resolveSchema=h;const p=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function m(g,{baseId:b,schema:y,root:x}){var w;if(((w=g.fragment)===null||w===void 0?void 0:w[0])!=="/")return;for(const k of g.fragment.slice(1).split("/")){if(typeof y=="boolean")return;const I=y[(0,i.unescapeFragment)(k)];if(I===void 0)return;y=I;const O=typeof y=="object"&&y[this.opts.schemaId];!p.has(k)&&O&&(b=(0,r.resolveUrl)(this.opts.uriResolver,b,O))}let T;if(typeof y!="boolean"&&y.$ref&&!(0,i.schemaHasRulesButRef)(y,this.RULES)){const k=(0,r.resolveUrl)(this.opts.uriResolver,b,y.$ref);T=h.call(this,x,k)}const{schemaId:A}=this.opts;if(T=T||new o({schema:y,schemaId:A,root:x,baseId:b}),T.schema!==T.root.schema)return T}return Fd}const qUt="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",WUt="Meta-schema for $data reference (JSON AnySchema extension proposal)",GUt="object",YUt=["$data"],KUt={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},XUt=!1,QUt={$id:qUt,description:WUt,type:GUt,required:YUt,properties:KUt,additionalProperties:XUt};var N5={},g3={exports:{}},jj,l0e;function JUt(){return l0e||(l0e=1,jj={HEX:{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15}}),jj}var Uj,c0e;function ZUt(){if(c0e)return Uj;c0e=1;const{HEX:e}=JUt(),t=/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u;function n(m){if(a(m,".")<3)return{host:m,isIPV4:!1};const g=m.match(t)||[],[b]=g;return b?{host:o(b,"."),isIPV4:!0}:{host:m,isIPV4:!1}}function r(m,g=!1){let b="",y=!0;for(const x of m){if(e[x]===void 0)return;x!=="0"&&y===!0&&(y=!1),y||(b+=x)}return g&&b.length===0&&(b="0"),b}function i(m){let g=0;const b={error:!1,address:"",zone:""},y=[],x=[];let w=!1,T=!1,A=!1;function k(){if(x.length){if(w===!1){const I=r(x);if(I!==void 0)y.push(I);else return b.error=!0,!1}x.length=0}return!0}for(let I=0;I<m.length;I++){const O=m[I];if(!(O==="["||O==="]"))if(O===":"){if(T===!0&&(A=!0),!k())break;if(g++,y.push(":"),g>7){b.error=!0;break}I-1>=0&&m[I-1]===":"&&(T=!0);continue}else if(O==="%"){if(!k())break;w=!0}else{x.push(O);continue}}return x.length&&(w?b.zone=x.join(""):A?y.push(x.join("")):y.push(r(x))),b.address=y.join(""),b}function s(m){if(a(m,":")<2)return{host:m,isIPV6:!1};const g=i(m);if(g.error)return{host:m,isIPV6:!1};{let b=g.address,y=g.address;return g.zone&&(b+="%"+g.zone,y+="%25"+g.zone),{host:b,escapedHost:y,isIPV6:!0}}}function o(m,g){let b="",y=!0;const x=m.length;for(let w=0;w<x;w++){const T=m[w];T==="0"&&y?(w+1<=x&&m[w+1]===g||w+1===x)&&(b+=T,y=!1):(T===g?y=!0:y=!1,b+=T)}return b}function a(m,g){let b=0;for(let y=0;y<m.length;y++)m[y]===g&&b++;return b}const u=/^\.\.?\//u,l=/^\/\.(?:\/|$)/u,c=/^\/\.\.(?:\/|$)/u,f=/^\/?(?:.|\n)*?(?=\/|$)/u;function d(m){const g=[];for(;m.length;)if(m.match(u))m=m.replace(u,"");else if(m.match(l))m=m.replace(l,"/");else if(m.match(c))m=m.replace(c,"/"),g.pop();else if(m==="."||m==="..")m="";else{const b=m.match(f);if(b){const y=b[0];m=m.slice(y.length),g.push(y)}else throw new Error("Unexpected dot segment condition")}return g.join("")}function h(m,g){const b=g!==!0?escape:unescape;return m.scheme!==void 0&&(m.scheme=b(m.scheme)),m.userinfo!==void 0&&(m.userinfo=b(m.userinfo)),m.host!==void 0&&(m.host=b(m.host)),m.path!==void 0&&(m.path=b(m.path)),m.query!==void 0&&(m.query=b(m.query)),m.fragment!==void 0&&(m.fragment=b(m.fragment)),m}function p(m){const g=[];if(m.userinfo!==void 0&&(g.push(m.userinfo),g.push("@")),m.host!==void 0){let b=unescape(m.host);const y=n(b);if(y.isIPV4)b=y.host;else{const x=s(y.host);x.isIPV6===!0?b=`[${x.escapedHost}]`:b=m.host}g.push(b)}return(typeof m.port=="number"||typeof m.port=="string")&&(g.push(":"),g.push(String(m.port))),g.length?g.join(""):void 0}return Uj={recomposeAuthority:p,normalizeComponentEncoding:h,removeDotSegments:d,normalizeIPv4:n,normalizeIPv6:s,stringArrayToHexStripped:r},Uj}var zj,f0e;function ezt(){if(f0e)return zj;f0e=1;const e=/^[\da-f]{8}\b-[\da-f]{4}\b-[\da-f]{4}\b-[\da-f]{4}\b-[\da-f]{12}$/iu,t=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu;function n(y){return typeof y.secure=="boolean"?y.secure:String(y.scheme).toLowerCase()==="wss"}function r(y){return y.host||(y.error=y.error||"HTTP URIs must have a host."),y}function i(y){const x=String(y.scheme).toLowerCase()==="https";return(y.port===(x?443:80)||y.port==="")&&(y.port=void 0),y.path||(y.path="/"),y}function s(y){return y.secure=n(y),y.resourceName=(y.path||"/")+(y.query?"?"+y.query:""),y.path=void 0,y.query=void 0,y}function o(y){if((y.port===(n(y)?443:80)||y.port==="")&&(y.port=void 0),typeof y.secure=="boolean"&&(y.scheme=y.secure?"wss":"ws",y.secure=void 0),y.resourceName){const[x,w]=y.resourceName.split("?");y.path=x&&x!=="/"?x:void 0,y.query=w,y.resourceName=void 0}return y.fragment=void 0,y}function a(y,x){if(!y.path)return y.error="URN can not be parsed",y;const w=y.path.match(t);if(w){const T=x.scheme||y.scheme||"urn";y.nid=w[1].toLowerCase(),y.nss=w[2];const A=`${T}:${x.nid||y.nid}`,k=b[A];y.path=void 0,k&&(y=k.parse(y,x))}else y.error=y.error||"URN can not be parsed.";return y}function u(y,x){const w=x.scheme||y.scheme||"urn",T=y.nid.toLowerCase(),A=`${w}:${x.nid||T}`,k=b[A];k&&(y=k.serialize(y,x));const I=y,O=y.nss;return I.path=`${T||x.nid}:${O}`,x.skipEscape=!0,I}function l(y,x){const w=y;return w.uuid=w.nss,w.nss=void 0,!x.tolerant&&(!w.uuid||!e.test(w.uuid))&&(w.error=w.error||"UUID is not valid."),w}function c(y){const x=y;return x.nss=(y.uuid||"").toLowerCase(),x}const f={scheme:"http",domainHost:!0,parse:r,serialize:i},d={scheme:"https",domainHost:f.domainHost,parse:r,serialize:i},h={scheme:"ws",domainHost:!0,parse:s,serialize:o},p={scheme:"wss",domainHost:h.domainHost,parse:h.parse,serialize:h.serialize},b={http:f,https:d,ws:h,wss:p,urn:{scheme:"urn",parse:a,serialize:u,skipNormalize:!0},"urn:uuid":{scheme:"urn:uuid",parse:l,serialize:c,skipNormalize:!0}};return zj=b,zj}var d0e;function tzt(){if(d0e)return g3.exports;d0e=1;const{normalizeIPv6:e,normalizeIPv4:t,removeDotSegments:n,recomposeAuthority:r,normalizeComponentEncoding:i}=ZUt(),s=ezt();function o(g,b){return typeof g=="string"?g=c(p(g,b),b):typeof g=="object"&&(g=p(c(g,b),b)),g}function a(g,b,y){const x=Object.assign({scheme:"null"},y),w=u(p(g,x),p(b,x),x,!0);return c(w,{...x,skipEscape:!0})}function u(g,b,y,x){const w={};return x||(g=p(c(g,y),y),b=p(c(b,y),y)),y=y||{},!y.tolerant&&b.scheme?(w.scheme=b.scheme,w.userinfo=b.userinfo,w.host=b.host,w.port=b.port,w.path=n(b.path||""),w.query=b.query):(b.userinfo!==void 0||b.host!==void 0||b.port!==void 0?(w.userinfo=b.userinfo,w.host=b.host,w.port=b.port,w.path=n(b.path||""),w.query=b.query):(b.path?(b.path.charAt(0)==="/"?w.path=n(b.path):((g.userinfo!==void 0||g.host!==void 0||g.port!==void 0)&&!g.path?w.path="/"+b.path:g.path?w.path=g.path.slice(0,g.path.lastIndexOf("/")+1)+b.path:w.path=b.path,w.path=n(w.path)),w.query=b.query):(w.path=g.path,b.query!==void 0?w.query=b.query:w.query=g.query),w.userinfo=g.userinfo,w.host=g.host,w.port=g.port),w.scheme=g.scheme),w.fragment=b.fragment,w}function l(g,b,y){return typeof g=="string"?(g=unescape(g),g=c(i(p(g,y),!0),{...y,skipEscape:!0})):typeof g=="object"&&(g=c(i(g,!0),{...y,skipEscape:!0})),typeof b=="string"?(b=unescape(b),b=c(i(p(b,y),!0),{...y,skipEscape:!0})):typeof b=="object"&&(b=c(i(b,!0),{...y,skipEscape:!0})),g.toLowerCase()===b.toLowerCase()}function c(g,b){const y={host:g.host,scheme:g.scheme,userinfo:g.userinfo,port:g.port,path:g.path,query:g.query,nid:g.nid,nss:g.nss,uuid:g.uuid,fragment:g.fragment,reference:g.reference,resourceName:g.resourceName,secure:g.secure,error:""},x=Object.assign({},b),w=[],T=s[(x.scheme||y.scheme||"").toLowerCase()];T&&T.serialize&&T.serialize(y,x),y.path!==void 0&&(x.skipEscape?y.path=unescape(y.path):(y.path=escape(y.path),y.scheme!==void 0&&(y.path=y.path.split("%3A").join(":")))),x.reference!=="suffix"&&y.scheme&&w.push(y.scheme,":");const A=r(y);if(A!==void 0&&(x.reference!=="suffix"&&w.push("//"),w.push(A),y.path&&y.path.charAt(0)!=="/"&&w.push("/")),y.path!==void 0){let k=y.path;!x.absolutePath&&(!T||!T.absolutePath)&&(k=n(k)),A===void 0&&(k=k.replace(/^\/\//u,"/%2F")),w.push(k)}return y.query!==void 0&&w.push("?",y.query),y.fragment!==void 0&&w.push("#",y.fragment),w.join("")}const f=Array.from({length:127},(g,b)=>/[^!"$&'()*+,\-.;=_`a-z{}~]/u.test(String.fromCharCode(b)));function d(g){let b=0;for(let y=0,x=g.length;y<x;++y)if(b=g.charCodeAt(y),b>126||f[b])return!0;return!1}const h=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function p(g,b){const y=Object.assign({},b),x={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},w=g.indexOf("%")!==-1;let T=!1;y.reference==="suffix"&&(g=(y.scheme?y.scheme+":":"")+"//"+g);const A=g.match(h);if(A){if(x.scheme=A[1],x.userinfo=A[3],x.host=A[4],x.port=parseInt(A[5],10),x.path=A[6]||"",x.query=A[7],x.fragment=A[8],isNaN(x.port)&&(x.port=A[5]),x.host){const I=t(x.host);if(I.isIPV4===!1){const O=e(I.host);x.host=O.host.toLowerCase(),T=O.isIPV6}else x.host=I.host,T=!0}x.scheme===void 0&&x.userinfo===void 0&&x.host===void 0&&x.port===void 0&&!x.path&&x.query===void 0?x.reference="same-document":x.scheme===void 0?x.reference="relative":x.fragment===void 0?x.reference="absolute":x.reference="uri",y.reference&&y.reference!=="suffix"&&y.reference!==x.reference&&(x.error=x.error||"URI is not a "+y.reference+" reference.");const k=s[(y.scheme||x.scheme||"").toLowerCase()];if(!y.unicodeSupport&&(!k||!k.unicodeSupport)&&x.host&&(y.domainHost||k&&k.domainHost)&&T===!1&&d(x.host))try{x.host=URL.domainToASCII(x.host.toLowerCase())}catch(I){x.error=x.error||"Host's domain name can not be converted to ASCII: "+I}(!k||k&&!k.skipNormalize)&&(w&&x.scheme!==void 0&&(x.scheme=unescape(x.scheme)),w&&x.host!==void 0&&(x.host=unescape(x.host)),x.path&&x.path.length&&(x.path=escape(unescape(x.path))),x.fragment&&x.fragment.length&&(x.fragment=encodeURI(decodeURIComponent(x.fragment)))),k&&k.parse&&k.parse(x,y)}else x.error=x.error||"URI can not be parsed.";return x}const m={SCHEMES:s,normalize:o,resolve:a,resolveComponents:u,equal:l,serialize:c,parse:p};return g3.exports=m,g3.exports.default=m,g3.exports.fastUri=m,g3.exports}var h0e;function nzt(){if(h0e)return N5;h0e=1,Object.defineProperty(N5,"__esModule",{value:!0});const e=tzt();return e.code='require("ajv/dist/runtime/uri").default',N5.default=e,N5}var p0e;function rzt(){return p0e||(p0e=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=y7();Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var n=Jr();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});const r=Yee(),i=v7(),s=M5e(),o=Kee(),a=Jr(),u=g7(),l=IO(),c=Ni(),f=QUt,d=nzt(),h=(X,q)=>new RegExp(X,q);h.code="new RegExp";const p=["removeAdditional","useDefaults","coerceTypes"],m=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),g={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},b={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},y=200;function x(X){var q,te,W,Z,oe,pe,ce,he,Ee,Ae,ge,me,Oe,Me,Ye,lt,We,nt,yt,_t,Rt,Et,Ke,Lt,sn;const Fe=X.strict,Qe=(q=X.code)===null||q===void 0?void 0:q.optimize,wt=Qe===!0||Qe===void 0?1:Qe||0,Vt=(W=(te=X.code)===null||te===void 0?void 0:te.regExp)!==null&&W!==void 0?W:h,Wt=(Z=X.uriResolver)!==null&&Z!==void 0?Z:d.default;return{strictSchema:(pe=(oe=X.strictSchema)!==null&&oe!==void 0?oe:Fe)!==null&&pe!==void 0?pe:!0,strictNumbers:(he=(ce=X.strictNumbers)!==null&&ce!==void 0?ce:Fe)!==null&&he!==void 0?he:!0,strictTypes:(Ae=(Ee=X.strictTypes)!==null&&Ee!==void 0?Ee:Fe)!==null&&Ae!==void 0?Ae:"log",strictTuples:(me=(ge=X.strictTuples)!==null&&ge!==void 0?ge:Fe)!==null&&me!==void 0?me:"log",strictRequired:(Me=(Oe=X.strictRequired)!==null&&Oe!==void 0?Oe:Fe)!==null&&Me!==void 0?Me:!1,code:X.code?{...X.code,optimize:wt,regExp:Vt}:{optimize:wt,regExp:Vt},loopRequired:(Ye=X.loopRequired)!==null&&Ye!==void 0?Ye:y,loopEnum:(lt=X.loopEnum)!==null&&lt!==void 0?lt:y,meta:(We=X.meta)!==null&&We!==void 0?We:!0,messages:(nt=X.messages)!==null&&nt!==void 0?nt:!0,inlineRefs:(yt=X.inlineRefs)!==null&&yt!==void 0?yt:!0,schemaId:(_t=X.schemaId)!==null&&_t!==void 0?_t:"$id",addUsedSchema:(Rt=X.addUsedSchema)!==null&&Rt!==void 0?Rt:!0,validateSchema:(Et=X.validateSchema)!==null&&Et!==void 0?Et:!0,validateFormats:(Ke=X.validateFormats)!==null&&Ke!==void 0?Ke:!0,unicodeRegExp:(Lt=X.unicodeRegExp)!==null&&Lt!==void 0?Lt:!0,int32range:(sn=X.int32range)!==null&&sn!==void 0?sn:!0,uriResolver:Wt}}class w{constructor(q={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,q=this.opts={...q,...x(q)};const{es5:te,lines:W}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:m,es5:te,lines:W}),this.logger=H(q.logger);const Z=q.validateFormats;q.validateFormats=!1,this.RULES=(0,s.getRules)(),T.call(this,g,q,"NOT SUPPORTED"),T.call(this,b,q,"DEPRECATED","warn"),this._metaOpts=M.call(this),q.formats&&I.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),q.keywords&&O.call(this,q.keywords),typeof q.meta=="object"&&this.addMetaSchema(q.meta),k.call(this),q.validateFormats=Z}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:q,meta:te,schemaId:W}=this.opts;let Z=f;W==="id"&&(Z={...f},Z.id=Z.$id,delete Z.$id),te&&q&&this.addMetaSchema(Z,Z[W],!1)}defaultMeta(){const{meta:q,schemaId:te}=this.opts;return this.opts.defaultMeta=typeof q=="object"?q[te]||q:void 0}validate(q,te){let W;if(typeof q=="string"){if(W=this.getSchema(q),!W)throw new Error(`no schema with key or ref "${q}"`)}else W=this.compile(q);const Z=W(te);return"$async"in W||(this.errors=W.errors),Z}compile(q,te){const W=this._addSchema(q,te);return W.validate||this._compileSchemaEnv(W)}compileAsync(q,te){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:W}=this.opts;return Z.call(this,q,te);async function Z(Ae,ge){await oe.call(this,Ae.$schema);const me=this._addSchema(Ae,ge);return me.validate||pe.call(this,me)}async function oe(Ae){Ae&&!this.getSchema(Ae)&&await Z.call(this,{$ref:Ae},!0)}async function pe(Ae){try{return this._compileSchemaEnv(Ae)}catch(ge){if(!(ge instanceof i.default))throw ge;return ce.call(this,ge),await he.call(this,ge.missingSchema),pe.call(this,Ae)}}function ce({missingSchema:Ae,missingRef:ge}){if(this.refs[Ae])throw new Error(`AnySchema ${Ae} is loaded but ${ge} cannot be resolved`)}async function he(Ae){const ge=await Ee.call(this,Ae);this.refs[Ae]||await oe.call(this,ge.$schema),this.refs[Ae]||this.addSchema(ge,Ae,te)}async function Ee(Ae){const ge=this._loading[Ae];if(ge)return ge;try{return await(this._loading[Ae]=W(Ae))}finally{delete this._loading[Ae]}}}addSchema(q,te,W,Z=this.opts.validateSchema){if(Array.isArray(q)){for(const pe of q)this.addSchema(pe,void 0,W,Z);return this}let oe;if(typeof q=="object"){const{schemaId:pe}=this.opts;if(oe=q[pe],oe!==void 0&&typeof oe!="string")throw new Error(`schema ${pe} must be string`)}return te=(0,u.normalizeId)(te||oe),this._checkUnique(te),this.schemas[te]=this._addSchema(q,W,te,Z,!0),this}addMetaSchema(q,te,W=this.opts.validateSchema){return this.addSchema(q,te,!0,W),this}validateSchema(q,te){if(typeof q=="boolean")return!0;let W;if(W=q.$schema,W!==void 0&&typeof W!="string")throw new Error("$schema must be a string");if(W=W||this.opts.defaultMeta||this.defaultMeta(),!W)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const Z=this.validate(W,q);if(!Z&&te){const oe="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(oe);else throw new Error(oe)}return Z}getSchema(q){let te;for(;typeof(te=A.call(this,q))=="string";)q=te;if(te===void 0){const{schemaId:W}=this.opts,Z=new o.SchemaEnv({schema:{},schemaId:W});if(te=o.resolveSchema.call(this,Z,q),!te)return;this.refs[q]=te}return te.validate||this._compileSchemaEnv(te)}removeSchema(q){if(q instanceof RegExp)return this._removeAllSchemas(this.schemas,q),this._removeAllSchemas(this.refs,q),this;switch(typeof q){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const te=A.call(this,q);return typeof te=="object"&&this._cache.delete(te.schema),delete this.schemas[q],delete this.refs[q],this}case"object":{const te=q;this._cache.delete(te);let W=q[this.opts.schemaId];return W&&(W=(0,u.normalizeId)(W),delete this.schemas[W],delete this.refs[W]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(q){for(const te of q)this.addKeyword(te);return this}addKeyword(q,te){let W;if(typeof q=="string")W=q,typeof te=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),te.keyword=W);else if(typeof q=="object"&&te===void 0){if(te=q,W=te.keyword,Array.isArray(W)&&!W.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(B.call(this,W,te),!te)return(0,c.eachItem)(W,oe=>U.call(this,oe)),this;ee.call(this,te);const Z={...te,type:(0,l.getJSONTypes)(te.type),schemaType:(0,l.getJSONTypes)(te.schemaType)};return(0,c.eachItem)(W,Z.type.length===0?oe=>U.call(this,oe,Z):oe=>Z.type.forEach(pe=>U.call(this,oe,Z,pe))),this}getKeyword(q){const te=this.RULES.all[q];return typeof te=="object"?te.definition:!!te}removeKeyword(q){const{RULES:te}=this;delete te.keywords[q],delete te.all[q];for(const W of te.rules){const Z=W.rules.findIndex(oe=>oe.keyword===q);Z>=0&&W.rules.splice(Z,1)}return this}addFormat(q,te){return typeof te=="string"&&(te=new RegExp(te)),this.formats[q]=te,this}errorsText(q=this.errors,{separator:te=", ",dataVar:W="data"}={}){return!q||q.length===0?"No errors":q.map(Z=>`${W}${Z.instancePath} ${Z.message}`).reduce((Z,oe)=>Z+te+oe)}$dataMetaSchema(q,te){const W=this.RULES.all;q=JSON.parse(JSON.stringify(q));for(const Z of te){const oe=Z.split("/").slice(1);let pe=q;for(const ce of oe)pe=pe[ce];for(const ce in W){const he=W[ce];if(typeof he!="object")continue;const{$data:Ee}=he.definition,Ae=pe[ce];Ee&&Ae&&(pe[ce]=ue(Ae))}}return q}_removeAllSchemas(q,te){for(const W in q){const Z=q[W];(!te||te.test(W))&&(typeof Z=="string"?delete q[W]:Z&&!Z.meta&&(this._cache.delete(Z.schema),delete q[W]))}}_addSchema(q,te,W,Z=this.opts.validateSchema,oe=this.opts.addUsedSchema){let pe;const{schemaId:ce}=this.opts;if(typeof q=="object")pe=q[ce];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof q!="boolean")throw new Error("schema must be object or boolean")}let he=this._cache.get(q);if(he!==void 0)return he;W=(0,u.normalizeId)(pe||W);const Ee=u.getSchemaRefs.call(this,q,W);return he=new o.SchemaEnv({schema:q,schemaId:ce,meta:te,baseId:W,localRefs:Ee}),this._cache.set(he.schema,he),oe&&!W.startsWith("#")&&(W&&this._checkUnique(W),this.refs[W]=he),Z&&this.validateSchema(q,!0),he}_checkUnique(q){if(this.schemas[q]||this.refs[q])throw new Error(`schema with key or id "${q}" already exists`)}_compileSchemaEnv(q){if(q.meta?this._compileMetaSchema(q):o.compileSchema.call(this,q),!q.validate)throw new Error("ajv implementation error");return q.validate}_compileMetaSchema(q){const te=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,q)}finally{this.opts=te}}}w.ValidationError=r.default,w.MissingRefError=i.default,e.default=w;function T(X,q,te,W="error"){for(const Z in X){const oe=Z;oe in q&&this.logger[W](`${te}: option ${Z}. ${X[oe]}`)}}function A(X){return X=(0,u.normalizeId)(X),this.schemas[X]||this.refs[X]}function k(){const X=this.opts.schemas;if(X)if(Array.isArray(X))this.addSchema(X);else for(const q in X)this.addSchema(X[q],q)}function I(){for(const X in this.opts.formats){const q=this.opts.formats[X];q&&this.addFormat(X,q)}}function O(X){if(Array.isArray(X)){this.addVocabulary(X);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const q in X){const te=X[q];te.keyword||(te.keyword=q),this.addKeyword(te)}}function M(){const X={...this.opts};for(const q of p)delete X[q];return X}const L={log(){},warn(){},error(){}};function H(X){if(X===!1)return L;if(X===void 0)return console;if(X.log&&X.warn&&X.error)return X;throw new Error("logger must implement log, warn and error methods")}const D=/^[a-z_$][a-z0-9_$:-]*$/i;function B(X,q){const{RULES:te}=this;if((0,c.eachItem)(X,W=>{if(te.keywords[W])throw new Error(`Keyword ${W} is already defined`);if(!D.test(W))throw new Error(`Keyword ${W} has invalid name`)}),!!q&&q.$data&&!("code"in q||"validate"in q))throw new Error('$data keyword must have "code" or "validate" function')}function U(X,q,te){var W;const Z=q==null?void 0:q.post;if(te&&Z)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:oe}=this;let pe=Z?oe.post:oe.rules.find(({type:he})=>he===te);if(pe||(pe={type:te,rules:[]},oe.rules.push(pe)),oe.keywords[X]=!0,!q)return;const ce={keyword:X,definition:{...q,type:(0,l.getJSONTypes)(q.type),schemaType:(0,l.getJSONTypes)(q.schemaType)}};q.before?G.call(this,pe,ce,q.before):pe.rules.push(ce),oe.all[X]=ce,(W=q.implements)===null||W===void 0||W.forEach(he=>this.addKeyword(he))}function G(X,q,te){const W=X.rules.findIndex(Z=>Z.keyword===te);W>=0?X.rules.splice(W,0,q):(X.rules.push(q),this.logger.warn(`rule ${te} is not defined`))}function ee(X){let{metaSchema:q}=X;q!==void 0&&(X.$data&&this.opts.$data&&(q=ue(q)),X.validateSchema=this.compile(q,!0))}const ne={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function ue(X){return{anyOf:[X,ne]}}}(Oj)),Oj}var D5={},O5={},M5={},m0e;function izt(){if(m0e)return M5;m0e=1,Object.defineProperty(M5,"__esModule",{value:!0});const e={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};return M5.default=e,M5}var yv={},g0e;function szt(){if(g0e)return yv;g0e=1,Object.defineProperty(yv,"__esModule",{value:!0}),yv.callRef=yv.getValidate=void 0;const e=v7(),t=G0(),n=Jr(),r=dx(),i=Kee(),s=Ni(),o={keyword:"$ref",schemaType:"string",code(l){const{gen:c,schema:f,it:d}=l,{baseId:h,schemaEnv:p,validateName:m,opts:g,self:b}=d,{root:y}=p;if((f==="#"||f==="#/")&&h===y.baseId)return w();const x=i.resolveRef.call(b,y,h,f);if(x===void 0)throw new e.default(d.opts.uriResolver,h,f);if(x instanceof i.SchemaEnv)return T(x);return A(x);function w(){if(p===y)return u(l,m,p,p.$async);const k=c.scopeValue("root",{ref:y});return u(l,(0,n._)`${k}.validate`,y,y.$async)}function T(k){const I=a(l,k);u(l,I,k,k.$async)}function A(k){const I=c.scopeValue("schema",g.code.source===!0?{ref:k,code:(0,n.stringify)(k)}:{ref:k}),O=c.name("valid"),M=l.subschema({schema:k,dataTypes:[],schemaPath:n.nil,topSchemaRef:I,errSchemaPath:f},O);l.mergeEvaluated(M),l.ok(O)}}};function a(l,c){const{gen:f}=l;return c.validate?f.scopeValue("validate",{ref:c.validate}):(0,n._)`${f.scopeValue("wrapper",{ref:c})}.validate`}yv.getValidate=a;function u(l,c,f,d){const{gen:h,it:p}=l,{allErrors:m,schemaEnv:g,opts:b}=p,y=b.passContext?r.default.this:n.nil;d?x():w();function x(){if(!g.$async)throw new Error("async schema referenced by sync schema");const k=h.let("valid");h.try(()=>{h.code((0,n._)`await ${(0,t.callValidateCode)(l,c,y)}`),A(c),m||h.assign(k,!0)},I=>{h.if((0,n._)`!(${I} instanceof ${p.ValidationError})`,()=>h.throw(I)),T(I),m||h.assign(k,!1)}),l.ok(k)}function w(){l.result((0,t.callValidateCode)(l,c,y),()=>A(c),()=>T(c))}function T(k){const I=(0,n._)`${k}.errors`;h.assign(r.default.vErrors,(0,n._)`${r.default.vErrors} === null ? ${I} : ${r.default.vErrors}.concat(${I})`),h.assign(r.default.errors,(0,n._)`${r.default.vErrors}.length`)}function A(k){var I;if(!p.opts.unevaluated)return;const O=(I=f==null?void 0:f.validate)===null||I===void 0?void 0:I.evaluated;if(p.props!==!0)if(O&&!O.dynamicProps)O.props!==void 0&&(p.props=s.mergeEvaluated.props(h,O.props,p.props));else{const M=h.var("props",(0,n._)`${k}.evaluated.props`);p.props=s.mergeEvaluated.props(h,M,p.props,n.Name)}if(p.items!==!0)if(O&&!O.dynamicItems)O.items!==void 0&&(p.items=s.mergeEvaluated.items(h,O.items,p.items));else{const M=h.var("items",(0,n._)`${k}.evaluated.items`);p.items=s.mergeEvaluated.items(h,M,p.items,n.Name)}}}return yv.callRef=u,yv.default=o,yv}var y0e;function ozt(){if(y0e)return O5;y0e=1,Object.defineProperty(O5,"__esModule",{value:!0});const e=izt(),t=szt(),n=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",e.default,t.default];return O5.default=n,O5}var L5={},F5={},v0e;function azt(){if(v0e)return F5;v0e=1,Object.defineProperty(F5,"__esModule",{value:!0});const e=Jr(),t=e.operators,n={maximum:{okStr:"<=",ok:t.LTE,fail:t.GT},minimum:{okStr:">=",ok:t.GTE,fail:t.LT},exclusiveMaximum:{okStr:"<",ok:t.LT,fail:t.GTE},exclusiveMinimum:{okStr:">",ok:t.GT,fail:t.LTE}},r={message:({keyword:s,schemaCode:o})=>(0,e.str)`must be ${n[s].okStr} ${o}`,params:({keyword:s,schemaCode:o})=>(0,e._)`{comparison: ${n[s].okStr}, limit: ${o}}`},i={keyword:Object.keys(n),type:"number",schemaType:"number",$data:!0,error:r,code(s){const{keyword:o,data:a,schemaCode:u}=s;s.fail$data((0,e._)`${a} ${n[o].fail} ${u} || isNaN(${a})`)}};return F5.default=i,F5}var $5={},b0e;function uzt(){if(b0e)return $5;b0e=1,Object.defineProperty($5,"__esModule",{value:!0});const e=Jr(),n={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:r})=>(0,e.str)`must be multiple of ${r}`,params:({schemaCode:r})=>(0,e._)`{multipleOf: ${r}}`},code(r){const{gen:i,data:s,schemaCode:o,it:a}=r,u=a.opts.multipleOfPrecision,l=i.let("res"),c=u?(0,e._)`Math.abs(Math.round(${l}) - ${l}) > 1e-${u}`:(0,e._)`${l} !== parseInt(${l})`;r.fail$data((0,e._)`(${o} === 0 || (${l} = ${s}/${o}, ${c}))`)}};return $5.default=n,$5}var B5={},j5={},x0e;function lzt(){if(x0e)return j5;x0e=1,Object.defineProperty(j5,"__esModule",{value:!0});function e(t){const n=t.length;let r=0,i=0,s;for(;i<n;)r++,s=t.charCodeAt(i++),s>=55296&&s<=56319&&i<n&&(s=t.charCodeAt(i),(s&64512)===56320&&i++);return r}return j5.default=e,e.code='require("ajv/dist/runtime/ucs2length").default',j5}var _0e;function czt(){if(_0e)return B5;_0e=1,Object.defineProperty(B5,"__esModule",{value:!0});const e=Jr(),t=Ni(),n=lzt(),i={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message({keyword:s,schemaCode:o}){const a=s==="maxLength"?"more":"fewer";return(0,e.str)`must NOT have ${a} than ${o} characters`},params:({schemaCode:s})=>(0,e._)`{limit: ${s}}`},code(s){const{keyword:o,data:a,schemaCode:u,it:l}=s,c=o==="maxLength"?e.operators.GT:e.operators.LT,f=l.opts.unicode===!1?(0,e._)`${a}.length`:(0,e._)`${(0,t.useFunc)(s.gen,n.default)}(${a})`;s.fail$data((0,e._)`${f} ${c} ${u}`)}};return B5.default=i,B5}var U5={},w0e;function fzt(){if(w0e)return U5;w0e=1,Object.defineProperty(U5,"__esModule",{value:!0});const e=G0(),t=Jr(),r={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:i})=>(0,t.str)`must match pattern "${i}"`,params:({schemaCode:i})=>(0,t._)`{pattern: ${i}}`},code(i){const{data:s,$data:o,schema:a,schemaCode:u,it:l}=i,c=l.opts.unicodeRegExp?"u":"",f=o?(0,t._)`(new RegExp(${u}, ${c}))`:(0,e.usePattern)(i,a);i.fail$data((0,t._)`!${f}.test(${s})`)}};return U5.default=r,U5}var z5={},E0e;function dzt(){if(E0e)return z5;E0e=1,Object.defineProperty(z5,"__esModule",{value:!0});const e=Jr(),n={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message({keyword:r,schemaCode:i}){const s=r==="maxProperties"?"more":"fewer";return(0,e.str)`must NOT have ${s} than ${i} properties`},params:({schemaCode:r})=>(0,e._)`{limit: ${r}}`},code(r){const{keyword:i,data:s,schemaCode:o}=r,a=i==="maxProperties"?e.operators.GT:e.operators.LT;r.fail$data((0,e._)`Object.keys(${s}).length ${a} ${o}`)}};return z5.default=n,z5}var V5={},S0e;function hzt(){if(S0e)return V5;S0e=1,Object.defineProperty(V5,"__esModule",{value:!0});const e=G0(),t=Jr(),n=Ni(),i={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:s}})=>(0,t.str)`must have required property '${s}'`,params:({params:{missingProperty:s}})=>(0,t._)`{missingProperty: ${s}}`},code(s){const{gen:o,schema:a,schemaCode:u,data:l,$data:c,it:f}=s,{opts:d}=f;if(!c&&a.length===0)return;const h=a.length>=d.loopRequired;if(f.allErrors?p():m(),d.strictRequired){const y=s.parentSchema.properties,{definedProperties:x}=s.it;for(const w of a)if((y==null?void 0:y[w])===void 0&&!x.has(w)){const T=f.schemaEnv.baseId+f.errSchemaPath,A=`required property "${w}" is not defined at "${T}" (strictRequired)`;(0,n.checkStrictMode)(f,A,f.opts.strictRequired)}}function p(){if(h||c)s.block$data(t.nil,g);else for(const y of a)(0,e.checkReportMissingProp)(s,y)}function m(){const y=o.let("missing");if(h||c){const x=o.let("valid",!0);s.block$data(x,()=>b(y,x)),s.ok(x)}else o.if((0,e.checkMissingProp)(s,a,y)),(0,e.reportMissingProp)(s,y),o.else()}function g(){o.forOf("prop",u,y=>{s.setParams({missingProperty:y}),o.if((0,e.noPropertyInData)(o,l,y,d.ownProperties),()=>s.error())})}function b(y,x){s.setParams({missingProperty:y}),o.forOf(y,u,()=>{o.assign(x,(0,e.propertyInData)(o,l,y,d.ownProperties)),o.if((0,t.not)(x),()=>{s.error(),o.break()})},t.nil)}}};return V5.default=i,V5}var H5={},T0e;function pzt(){if(T0e)return H5;T0e=1,Object.defineProperty(H5,"__esModule",{value:!0});const e=Jr(),n={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message({keyword:r,schemaCode:i}){const s=r==="maxItems"?"more":"fewer";return(0,e.str)`must NOT have ${s} than ${i} items`},params:({schemaCode:r})=>(0,e._)`{limit: ${r}}`},code(r){const{keyword:i,data:s,schemaCode:o}=r,a=i==="maxItems"?e.operators.GT:e.operators.LT;r.fail$data((0,e._)`${s}.length ${a} ${o}`)}};return H5.default=n,H5}var q5={},W5={},C0e;function Xee(){if(C0e)return W5;C0e=1,Object.defineProperty(W5,"__esModule",{value:!0});const e=qY();return e.code='require("ajv/dist/runtime/equal").default',W5.default=e,W5}var A0e;function mzt(){if(A0e)return q5;A0e=1,Object.defineProperty(q5,"__esModule",{value:!0});const e=IO(),t=Jr(),n=Ni(),r=Xee(),s={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:o,j:a}})=>(0,t.str)`must NOT have duplicate items (items ## ${a} and ${o} are identical)`,params:({params:{i:o,j:a}})=>(0,t._)`{i: ${o}, j: ${a}}`},code(o){const{gen:a,data:u,$data:l,schema:c,parentSchema:f,schemaCode:d,it:h}=o;if(!l&&!c)return;const p=a.let("valid"),m=f.items?(0,e.getSchemaTypes)(f.items):[];o.block$data(p,g,(0,t._)`${d} === false`),o.ok(p);function g(){const w=a.let("i",(0,t._)`${u}.length`),T=a.let("j");o.setParams({i:w,j:T}),a.assign(p,!0),a.if((0,t._)`${w} > 1`,()=>(b()?y:x)(w,T))}function b(){return m.length>0&&!m.some(w=>w==="object"||w==="array")}function y(w,T){const A=a.name("item"),k=(0,e.checkDataTypes)(m,A,h.opts.strictNumbers,e.DataType.Wrong),I=a.const("indices",(0,t._)`{}`);a.for((0,t._)`;${w}--;`,()=>{a.let(A,(0,t._)`${u}[${w}]`),a.if(k,(0,t._)`continue`),m.length>1&&a.if((0,t._)`typeof ${A} == "string"`,(0,t._)`${A} += "_"`),a.if((0,t._)`typeof ${I}[${A}] == "number"`,()=>{a.assign(T,(0,t._)`${I}[${A}]`),o.error(),a.assign(p,!1).break()}).code((0,t._)`${I}[${A}] = ${w}`)})}function x(w,T){const A=(0,n.useFunc)(a,r.default),k=a.name("outer");a.label(k).for((0,t._)`;${w}--;`,()=>a.for((0,t._)`${T} = ${w}; ${T}--;`,()=>a.if((0,t._)`${A}(${u}[${w}], ${u}[${T}])`,()=>{o.error(),a.assign(p,!1).break(k)})))}}};return q5.default=s,q5}var G5={},k0e;function gzt(){if(k0e)return G5;k0e=1,Object.defineProperty(G5,"__esModule",{value:!0});const e=Jr(),t=Ni(),n=Xee(),i={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:s})=>(0,e._)`{allowedValue: ${s}}`},code(s){const{gen:o,data:a,$data:u,schemaCode:l,schema:c}=s;u||c&&typeof c=="object"?s.fail$data((0,e._)`!${(0,t.useFunc)(o,n.default)}(${a}, ${l})`):s.fail((0,e._)`${c} !== ${a}`)}};return G5.default=i,G5}var Y5={},R0e;function yzt(){if(R0e)return Y5;R0e=1,Object.defineProperty(Y5,"__esModule",{value:!0});const e=Jr(),t=Ni(),n=Xee(),i={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:s})=>(0,e._)`{allowedValues: ${s}}`},code(s){const{gen:o,data:a,$data:u,schema:l,schemaCode:c,it:f}=s;if(!u&&l.length===0)throw new Error("enum must have non-empty array");const d=l.length>=f.opts.loopEnum;let h;const p=()=>h??(h=(0,t.useFunc)(o,n.default));let m;if(d||u)m=o.let("valid"),s.block$data(m,g);else{if(!Array.isArray(l))throw new Error("ajv implementation error");const y=o.const("vSchema",c);m=(0,e.or)(...l.map((x,w)=>b(y,w)))}s.pass(m);function g(){o.assign(m,!1),o.forOf("v",c,y=>o.if((0,e._)`${p()}(${a}, ${y})`,()=>o.assign(m,!0).break()))}function b(y,x){const w=l[x];return typeof w=="object"&&w!==null?(0,e._)`${p()}(${a}, ${y}[${x}])`:(0,e._)`${a} === ${w}`}}};return Y5.default=i,Y5}var I0e;function vzt(){if(I0e)return L5;I0e=1,Object.defineProperty(L5,"__esModule",{value:!0});const e=azt(),t=uzt(),n=czt(),r=fzt(),i=dzt(),s=hzt(),o=pzt(),a=mzt(),u=gzt(),l=yzt(),c=[e.default,t.default,n.default,r.default,i.default,s.default,o.default,a.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},u.default,l.default];return L5.default=c,L5}var K5={},cE={},P0e;function F5e(){if(P0e)return cE;P0e=1,Object.defineProperty(cE,"__esModule",{value:!0}),cE.validateAdditionalItems=void 0;const e=Jr(),t=Ni(),r={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:s}})=>(0,e.str)`must NOT have more than ${s} items`,params:({params:{len:s}})=>(0,e._)`{limit: ${s}}`},code(s){const{parentSchema:o,it:a}=s,{items:u}=o;if(!Array.isArray(u)){(0,t.checkStrictMode)(a,'"additionalItems" is ignored when "items" is not an array of schemas');return}i(s,u)}};function i(s,o){const{gen:a,schema:u,data:l,keyword:c,it:f}=s;f.items=!0;const d=a.const("len",(0,e._)`${l}.length`);if(u===!1)s.setParams({len:o.length}),s.pass((0,e._)`${d} <= ${o.length}`);else if(typeof u=="object"&&!(0,t.alwaysValidSchema)(f,u)){const p=a.var("valid",(0,e._)`${d} <= ${o.length}`);a.if((0,e.not)(p),()=>h(p)),s.ok(p)}function h(p){a.forRange("i",o.length,d,m=>{s.subschema({keyword:c,dataProp:m,dataPropType:t.Type.Num},p),f.allErrors||a.if((0,e.not)(p),()=>a.break())})}}return cE.validateAdditionalItems=i,cE.default=r,cE}var X5={},fE={},N0e;function $5e(){if(N0e)return fE;N0e=1,Object.defineProperty(fE,"__esModule",{value:!0}),fE.validateTuple=void 0;const e=Jr(),t=Ni(),n=G0(),r={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(s){const{schema:o,it:a}=s;if(Array.isArray(o))return i(s,"additionalItems",o);a.items=!0,!(0,t.alwaysValidSchema)(a,o)&&s.ok((0,n.validateArray)(s))}};function i(s,o,a=s.schema){const{gen:u,parentSchema:l,data:c,keyword:f,it:d}=s;m(l),d.opts.unevaluated&&a.length&&d.items!==!0&&(d.items=t.mergeEvaluated.items(u,a.length,d.items));const h=u.name("valid"),p=u.const("len",(0,e._)`${c}.length`);a.forEach((g,b)=>{(0,t.alwaysValidSchema)(d,g)||(u.if((0,e._)`${p} > ${b}`,()=>s.subschema({keyword:f,schemaProp:b,dataProp:b},h)),s.ok(h))});function m(g){const{opts:b,errSchemaPath:y}=d,x=a.length,w=x===g.minItems&&(x===g.maxItems||g[o]===!1);if(b.strictTuples&&!w){const T=`"${f}" is ${x}-tuple, but minItems or maxItems/${o} are not specified or different at path "${y}"`;(0,t.checkStrictMode)(d,T,b.strictTuples)}}}return fE.validateTuple=i,fE.default=r,fE}var D0e;function bzt(){if(D0e)return X5;D0e=1,Object.defineProperty(X5,"__esModule",{value:!0});const e=$5e(),t={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:n=>(0,e.validateTuple)(n,"items")};return X5.default=t,X5}var Q5={},O0e;function xzt(){if(O0e)return Q5;O0e=1,Object.defineProperty(Q5,"__esModule",{value:!0});const e=Jr(),t=Ni(),n=G0(),r=F5e(),s={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:o}})=>(0,e.str)`must NOT have more than ${o} items`,params:({params:{len:o}})=>(0,e._)`{limit: ${o}}`},code(o){const{schema:a,parentSchema:u,it:l}=o,{prefixItems:c}=u;l.items=!0,!(0,t.alwaysValidSchema)(l,a)&&(c?(0,r.validateAdditionalItems)(o,c):o.ok((0,n.validateArray)(o)))}};return Q5.default=s,Q5}var J5={},M0e;function _zt(){if(M0e)return J5;M0e=1,Object.defineProperty(J5,"__esModule",{value:!0});const e=Jr(),t=Ni(),r={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:i,max:s}})=>s===void 0?(0,e.str)`must contain at least ${i} valid item(s)`:(0,e.str)`must contain at least ${i} and no more than ${s} valid item(s)`,params:({params:{min:i,max:s}})=>s===void 0?(0,e._)`{minContains: ${i}}`:(0,e._)`{minContains: ${i}, maxContains: ${s}}`},code(i){const{gen:s,schema:o,parentSchema:a,data:u,it:l}=i;let c,f;const{minContains:d,maxContains:h}=a;l.opts.next?(c=d===void 0?1:d,f=h):c=1;const p=s.const("len",(0,e._)`${u}.length`);if(i.setParams({min:c,max:f}),f===void 0&&c===0){(0,t.checkStrictMode)(l,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(f!==void 0&&c>f){(0,t.checkStrictMode)(l,'"minContains" > "maxContains" is always invalid'),i.fail();return}if((0,t.alwaysValidSchema)(l,o)){let x=(0,e._)`${p} >= ${c}`;f!==void 0&&(x=(0,e._)`${x} && ${p} <= ${f}`),i.pass(x);return}l.items=!0;const m=s.name("valid");f===void 0&&c===1?b(m,()=>s.if(m,()=>s.break())):c===0?(s.let(m,!0),f!==void 0&&s.if((0,e._)`${u}.length > 0`,g)):(s.let(m,!1),g()),i.result(m,()=>i.reset());function g(){const x=s.name("_valid"),w=s.let("count",0);b(x,()=>s.if(x,()=>y(w)))}function b(x,w){s.forRange("i",0,p,T=>{i.subschema({keyword:"contains",dataProp:T,dataPropType:t.Type.Num,compositeRule:!0},x),w()})}function y(x){s.code((0,e._)`${x}++`),f===void 0?s.if((0,e._)`${x} >= ${c}`,()=>s.assign(m,!0).break()):(s.if((0,e._)`${x} > ${f}`,()=>s.assign(m,!1).break()),c===1?s.assign(m,!0):s.if((0,e._)`${x} >= ${c}`,()=>s.assign(m,!0)))}}};return J5.default=r,J5}var Vj={},L0e;function wzt(){return L0e||(L0e=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=Jr(),n=Ni(),r=G0();e.error={message:({params:{property:u,depsCount:l,deps:c}})=>{const f=l===1?"property":"properties";return(0,t.str)`must have ${f} ${c} when property ${u} is present`},params:({params:{property:u,depsCount:l,deps:c,missingProperty:f}})=>(0,t._)`{property: ${u},
    missingProperty: ${f},
    depsCount: ${l},
    deps: ${c}}`};const i={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(u){const[l,c]=s(u);o(u,l),a(u,c)}};function s({schema:u}){const l={},c={};for(const f in u){if(f==="__proto__")continue;const d=Array.isArray(u[f])?l:c;d[f]=u[f]}return[l,c]}function o(u,l=u.schema){const{gen:c,data:f,it:d}=u;if(Object.keys(l).length===0)return;const h=c.let("missing");for(const p in l){const m=l[p];if(m.length===0)continue;const g=(0,r.propertyInData)(c,f,p,d.opts.ownProperties);u.setParams({property:p,depsCount:m.length,deps:m.join(", ")}),d.allErrors?c.if(g,()=>{for(const b of m)(0,r.checkReportMissingProp)(u,b)}):(c.if((0,t._)`${g} && (${(0,r.checkMissingProp)(u,m,h)})`),(0,r.reportMissingProp)(u,h),c.else())}}e.validatePropertyDeps=o;function a(u,l=u.schema){const{gen:c,data:f,keyword:d,it:h}=u,p=c.name("valid");for(const m in l)(0,n.alwaysValidSchema)(h,l[m])||(c.if((0,r.propertyInData)(c,f,m,h.opts.ownProperties),()=>{const g=u.subschema({keyword:d,schemaProp:m},p);u.mergeValidEvaluated(g,p)},()=>c.var(p,!0)),u.ok(p))}e.validateSchemaDeps=a,e.default=i}(Vj)),Vj}var Z5={},F0e;function Ezt(){if(F0e)return Z5;F0e=1,Object.defineProperty(Z5,"__esModule",{value:!0});const e=Jr(),t=Ni(),r={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:i})=>(0,e._)`{propertyName: ${i.propertyName}}`},code(i){const{gen:s,schema:o,data:a,it:u}=i;if((0,t.alwaysValidSchema)(u,o))return;const l=s.name("valid");s.forIn("key",a,c=>{i.setParams({propertyName:c}),i.subschema({keyword:"propertyNames",data:c,dataTypes:["string"],propertyName:c,compositeRule:!0},l),s.if((0,e.not)(l),()=>{i.error(!0),u.allErrors||s.break()})}),i.ok(l)}};return Z5.default=r,Z5}var eP={},$0e;function B5e(){if($0e)return eP;$0e=1,Object.defineProperty(eP,"__esModule",{value:!0});const e=G0(),t=Jr(),n=dx(),r=Ni(),s={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:o})=>(0,t._)`{additionalProperty: ${o.additionalProperty}}`},code(o){const{gen:a,schema:u,parentSchema:l,data:c,errsCount:f,it:d}=o;if(!f)throw new Error("ajv implementation error");const{allErrors:h,opts:p}=d;if(d.props=!0,p.removeAdditional!=="all"&&(0,r.alwaysValidSchema)(d,u))return;const m=(0,e.allSchemaProperties)(l.properties),g=(0,e.allSchemaProperties)(l.patternProperties);b(),o.ok((0,t._)`${f} === ${n.default.errors}`);function b(){a.forIn("key",c,A=>{!m.length&&!g.length?w(A):a.if(y(A),()=>w(A))})}function y(A){let k;if(m.length>8){const I=(0,r.schemaRefOrVal)(d,l.properties,"properties");k=(0,e.isOwnProperty)(a,I,A)}else m.length?k=(0,t.or)(...m.map(I=>(0,t._)`${A} === ${I}`)):k=t.nil;return g.length&&(k=(0,t.or)(k,...g.map(I=>(0,t._)`${(0,e.usePattern)(o,I)}.test(${A})`))),(0,t.not)(k)}function x(A){a.code((0,t._)`delete ${c}[${A}]`)}function w(A){if(p.removeAdditional==="all"||p.removeAdditional&&u===!1){x(A);return}if(u===!1){o.setParams({additionalProperty:A}),o.error(),h||a.break();return}if(typeof u=="object"&&!(0,r.alwaysValidSchema)(d,u)){const k=a.name("valid");p.removeAdditional==="failing"?(T(A,k,!1),a.if((0,t.not)(k),()=>{o.reset(),x(A)})):(T(A,k),h||a.if((0,t.not)(k),()=>a.break()))}}function T(A,k,I){const O={keyword:"additionalProperties",dataProp:A,dataPropType:r.Type.Str};I===!1&&Object.assign(O,{compositeRule:!0,createErrors:!1,allErrors:!1}),o.subschema(O,k)}}};return eP.default=s,eP}var tP={},B0e;function Szt(){if(B0e)return tP;B0e=1,Object.defineProperty(tP,"__esModule",{value:!0});const e=y7(),t=G0(),n=Ni(),r=B5e(),i={keyword:"properties",type:"object",schemaType:"object",code(s){const{gen:o,schema:a,parentSchema:u,data:l,it:c}=s;c.opts.removeAdditional==="all"&&u.additionalProperties===void 0&&r.default.code(new e.KeywordCxt(c,r.default,"additionalProperties"));const f=(0,t.allSchemaProperties)(a);for(const g of f)c.definedProperties.add(g);c.opts.unevaluated&&f.length&&c.props!==!0&&(c.props=n.mergeEvaluated.props(o,(0,n.toHash)(f),c.props));const d=f.filter(g=>!(0,n.alwaysValidSchema)(c,a[g]));if(d.length===0)return;const h=o.name("valid");for(const g of d)p(g)?m(g):(o.if((0,t.propertyInData)(o,l,g,c.opts.ownProperties)),m(g),c.allErrors||o.else().var(h,!0),o.endIf()),s.it.definedProperties.add(g),s.ok(h);function p(g){return c.opts.useDefaults&&!c.compositeRule&&a[g].default!==void 0}function m(g){s.subschema({keyword:"properties",schemaProp:g,dataProp:g},h)}}};return tP.default=i,tP}var nP={},j0e;function Tzt(){if(j0e)return nP;j0e=1,Object.defineProperty(nP,"__esModule",{value:!0});const e=G0(),t=Jr(),n=Ni(),r=Ni(),i={keyword:"patternProperties",type:"object",schemaType:"object",code(s){const{gen:o,schema:a,data:u,parentSchema:l,it:c}=s,{opts:f}=c,d=(0,e.allSchemaProperties)(a),h=d.filter(w=>(0,n.alwaysValidSchema)(c,a[w]));if(d.length===0||h.length===d.length&&(!c.opts.unevaluated||c.props===!0))return;const p=f.strictSchema&&!f.allowMatchingProperties&&l.properties,m=o.name("valid");c.props!==!0&&!(c.props instanceof t.Name)&&(c.props=(0,r.evaluatedPropsToName)(o,c.props));const{props:g}=c;b();function b(){for(const w of d)p&&y(w),c.allErrors?x(w):(o.var(m,!0),x(w),o.if(m))}function y(w){for(const T in p)new RegExp(w).test(T)&&(0,n.checkStrictMode)(c,`property ${T} matches pattern ${w} (use allowMatchingProperties)`)}function x(w){o.forIn("key",u,T=>{o.if((0,t._)`${(0,e.usePattern)(s,w)}.test(${T})`,()=>{const A=h.includes(w);A||s.subschema({keyword:"patternProperties",schemaProp:w,dataProp:T,dataPropType:r.Type.Str},m),c.opts.unevaluated&&g!==!0?o.assign((0,t._)`${g}[${T}]`,!0):!A&&!c.allErrors&&o.if((0,t.not)(m),()=>o.break())})})}}};return nP.default=i,nP}var rP={},U0e;function Czt(){if(U0e)return rP;U0e=1,Object.defineProperty(rP,"__esModule",{value:!0});const e=Ni(),t={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(n){const{gen:r,schema:i,it:s}=n;if((0,e.alwaysValidSchema)(s,i)){n.fail();return}const o=r.name("valid");n.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},o),n.failResult(o,()=>n.reset(),()=>n.error())},error:{message:"must NOT be valid"}};return rP.default=t,rP}var iP={},z0e;function Azt(){if(z0e)return iP;z0e=1,Object.defineProperty(iP,"__esModule",{value:!0});const t={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:G0().validateUnion,error:{message:"must match a schema in anyOf"}};return iP.default=t,iP}var sP={},V0e;function kzt(){if(V0e)return sP;V0e=1,Object.defineProperty(sP,"__esModule",{value:!0});const e=Jr(),t=Ni(),r={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:i})=>(0,e._)`{passingSchemas: ${i.passing}}`},code(i){const{gen:s,schema:o,parentSchema:a,it:u}=i;if(!Array.isArray(o))throw new Error("ajv implementation error");if(u.opts.discriminator&&a.discriminator)return;const l=o,c=s.let("valid",!1),f=s.let("passing",null),d=s.name("_valid");i.setParams({passing:f}),s.block(h),i.result(c,()=>i.reset(),()=>i.error(!0));function h(){l.forEach((p,m)=>{let g;(0,t.alwaysValidSchema)(u,p)?s.var(d,!0):g=i.subschema({keyword:"oneOf",schemaProp:m,compositeRule:!0},d),m>0&&s.if((0,e._)`${d} && ${c}`).assign(c,!1).assign(f,(0,e._)`[${f}, ${m}]`).else(),s.if(d,()=>{s.assign(c,!0),s.assign(f,m),g&&i.mergeEvaluated(g,e.Name)})})}}};return sP.default=r,sP}var oP={},H0e;function Rzt(){if(H0e)return oP;H0e=1,Object.defineProperty(oP,"__esModule",{value:!0});const e=Ni(),t={keyword:"allOf",schemaType:"array",code(n){const{gen:r,schema:i,it:s}=n;if(!Array.isArray(i))throw new Error("ajv implementation error");const o=r.name("valid");i.forEach((a,u)=>{if((0,e.alwaysValidSchema)(s,a))return;const l=n.subschema({keyword:"allOf",schemaProp:u},o);n.ok(o),n.mergeEvaluated(l)})}};return oP.default=t,oP}var aP={},q0e;function Izt(){if(q0e)return aP;q0e=1,Object.defineProperty(aP,"__esModule",{value:!0});const e=Jr(),t=Ni(),r={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:s})=>(0,e.str)`must match "${s.ifClause}" schema`,params:({params:s})=>(0,e._)`{failingKeyword: ${s.ifClause}}`},code(s){const{gen:o,parentSchema:a,it:u}=s;a.then===void 0&&a.else===void 0&&(0,t.checkStrictMode)(u,'"if" without "then" and "else" is ignored');const l=i(u,"then"),c=i(u,"else");if(!l&&!c)return;const f=o.let("valid",!0),d=o.name("_valid");if(h(),s.reset(),l&&c){const m=o.let("ifClause");s.setParams({ifClause:m}),o.if(d,p("then",m),p("else",m))}else l?o.if(d,p("then")):o.if((0,e.not)(d),p("else"));s.pass(f,()=>s.error(!0));function h(){const m=s.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},d);s.mergeEvaluated(m)}function p(m,g){return()=>{const b=s.subschema({keyword:m},d);o.assign(f,d),s.mergeValidEvaluated(b,f),g?o.assign(g,(0,e._)`${m}`):s.setParams({ifClause:m})}}}};function i(s,o){const a=s.schema[o];return a!==void 0&&!(0,t.alwaysValidSchema)(s,a)}return aP.default=r,aP}var uP={},W0e;function Pzt(){if(W0e)return uP;W0e=1,Object.defineProperty(uP,"__esModule",{value:!0});const e=Ni(),t={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:n,parentSchema:r,it:i}){r.if===void 0&&(0,e.checkStrictMode)(i,`"${n}" without "if" is ignored`)}};return uP.default=t,uP}var G0e;function Nzt(){if(G0e)return K5;G0e=1,Object.defineProperty(K5,"__esModule",{value:!0});const e=F5e(),t=bzt(),n=$5e(),r=xzt(),i=_zt(),s=wzt(),o=Ezt(),a=B5e(),u=Szt(),l=Tzt(),c=Czt(),f=Azt(),d=kzt(),h=Rzt(),p=Izt(),m=Pzt();function g(b=!1){const y=[c.default,f.default,d.default,h.default,p.default,m.default,o.default,a.default,s.default,u.default,l.default];return b?y.push(t.default,r.default):y.push(e.default,n.default),y.push(i.default),y}return K5.default=g,K5}var lP={},cP={},Y0e;function Dzt(){if(Y0e)return cP;Y0e=1,Object.defineProperty(cP,"__esModule",{value:!0});const e=Jr(),n={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:r})=>(0,e.str)`must match format "${r}"`,params:({schemaCode:r})=>(0,e._)`{format: ${r}}`},code(r,i){const{gen:s,data:o,$data:a,schema:u,schemaCode:l,it:c}=r,{opts:f,errSchemaPath:d,schemaEnv:h,self:p}=c;if(!f.validateFormats)return;a?m():g();function m(){const b=s.scopeValue("formats",{ref:p.formats,code:f.code.formats}),y=s.const("fDef",(0,e._)`${b}[${l}]`),x=s.let("fType"),w=s.let("format");s.if((0,e._)`typeof ${y} == "object" && !(${y} instanceof RegExp)`,()=>s.assign(x,(0,e._)`${y}.type || "string"`).assign(w,(0,e._)`${y}.validate`),()=>s.assign(x,(0,e._)`"string"`).assign(w,y)),r.fail$data((0,e.or)(T(),A()));function T(){return f.strictSchema===!1?e.nil:(0,e._)`${l} && !${w}`}function A(){const k=h.$async?(0,e._)`(${y}.async ? await ${w}(${o}) : ${w}(${o}))`:(0,e._)`${w}(${o})`,I=(0,e._)`(typeof ${w} == "function" ? ${k} : ${w}.test(${o}))`;return(0,e._)`${w} && ${w} !== true && ${x} === ${i} && !${I}`}}function g(){const b=p.formats[u];if(!b){T();return}if(b===!0)return;const[y,x,w]=A(b);y===i&&r.pass(k());function T(){if(f.strictSchema===!1){p.logger.warn(I());return}throw new Error(I());function I(){return`unknown format "${u}" ignored in schema at path "${d}"`}}function A(I){const O=I instanceof RegExp?(0,e.regexpCode)(I):f.code.formats?(0,e._)`${f.code.formats}${(0,e.getProperty)(u)}`:void 0,M=s.scopeValue("formats",{key:u,ref:I,code:O});return typeof I=="object"&&!(I instanceof RegExp)?[I.type||"string",I.validate,(0,e._)`${M}.validate`]:["string",I,M]}function k(){if(typeof b=="object"&&!(b instanceof RegExp)&&b.async){if(!h.$async)throw new Error("async format in sync schema");return(0,e._)`await ${w}(${o})`}return typeof x=="function"?(0,e._)`${w}(${o})`:(0,e._)`${w}.test(${o})`}}}};return cP.default=n,cP}var K0e;function Ozt(){if(K0e)return lP;K0e=1,Object.defineProperty(lP,"__esModule",{value:!0});const t=[Dzt().default];return lP.default=t,lP}var Zx={},X0e;function Mzt(){return X0e||(X0e=1,Object.defineProperty(Zx,"__esModule",{value:!0}),Zx.contentVocabulary=Zx.metadataVocabulary=void 0,Zx.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],Zx.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]),Zx}var Q0e;function Lzt(){if(Q0e)return D5;Q0e=1,Object.defineProperty(D5,"__esModule",{value:!0});const e=ozt(),t=vzt(),n=Nzt(),r=Ozt(),i=Mzt(),s=[e.default,t.default,(0,n.default)(),r.default,i.metadataVocabulary,i.contentVocabulary];return D5.default=s,D5}var fP={},y3={},J0e;function Fzt(){if(J0e)return y3;J0e=1,Object.defineProperty(y3,"__esModule",{value:!0}),y3.DiscrError=void 0;var e;return function(t){t.Tag="tag",t.Mapping="mapping"}(e||(y3.DiscrError=e={})),y3}var Z0e;function $zt(){if(Z0e)return fP;Z0e=1,Object.defineProperty(fP,"__esModule",{value:!0});const e=Jr(),t=Fzt(),n=Kee(),r=v7(),i=Ni(),o={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:a,tagName:u}})=>a===t.DiscrError.Tag?`tag "${u}" must be string`:`value of tag "${u}" must be in oneOf`,params:({params:{discrError:a,tag:u,tagName:l}})=>(0,e._)`{error: ${a}, tag: ${l}, tagValue: ${u}}`},code(a){const{gen:u,data:l,schema:c,parentSchema:f,it:d}=a,{oneOf:h}=f;if(!d.opts.discriminator)throw new Error("discriminator: requires discriminator option");const p=c.propertyName;if(typeof p!="string")throw new Error("discriminator: requires propertyName");if(c.mapping)throw new Error("discriminator: mapping is not supported");if(!h)throw new Error("discriminator: requires oneOf keyword");const m=u.let("valid",!1),g=u.const("tag",(0,e._)`${l}${(0,e.getProperty)(p)}`);u.if((0,e._)`typeof ${g} == "string"`,()=>b(),()=>a.error(!1,{discrError:t.DiscrError.Tag,tag:g,tagName:p})),a.ok(m);function b(){const w=x();u.if(!1);for(const T in w)u.elseIf((0,e._)`${g} === ${T}`),u.assign(m,y(w[T]));u.else(),a.error(!1,{discrError:t.DiscrError.Mapping,tag:g,tagName:p}),u.endIf()}function y(w){const T=u.name("valid"),A=a.subschema({keyword:"oneOf",schemaProp:w},T);return a.mergeEvaluated(A,e.Name),T}function x(){var w;const T={},A=I(f);let k=!0;for(let L=0;L<h.length;L++){let H=h[L];if(H!=null&&H.$ref&&!(0,i.schemaHasRulesButRef)(H,d.self.RULES)){const B=H.$ref;if(H=n.resolveRef.call(d.self,d.schemaEnv.root,d.baseId,B),H instanceof n.SchemaEnv&&(H=H.schema),H===void 0)throw new r.default(d.opts.uriResolver,d.baseId,B)}const D=(w=H==null?void 0:H.properties)===null||w===void 0?void 0:w[p];if(typeof D!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${p}"`);k=k&&(A||I(H)),O(D,L)}if(!k)throw new Error(`discriminator: "${p}" must be required`);return T;function I({required:L}){return Array.isArray(L)&&L.includes(p)}function O(L,H){if(L.const)M(L.const,H);else if(L.enum)for(const D of L.enum)M(D,H);else throw new Error(`discriminator: "properties/${p}" must have "const" or "enum"`)}function M(L,H){if(typeof L!="string"||L in T)throw new Error(`discriminator: "${p}" values must be unique strings`);T[L]=H}}}};return fP.default=o,fP}const Bzt="http://json-schema.org/draft-07/schema#",jzt="http://json-schema.org/draft-07/schema#",Uzt="Core schema meta-schema",zzt={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},Vzt=["object","boolean"],Hzt={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},qzt={$schema:Bzt,$id:jzt,title:Uzt,definitions:zzt,type:Vzt,properties:Hzt,default:!0};var eme;function Wzt(){return eme||(eme=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const n=rzt(),r=Lzt(),i=$zt(),s=qzt,o=["/properties"],a="http://json-schema.org/draft-07/schema";class u extends n.default{_addVocabularies(){super._addVocabularies(),r.default.forEach(p=>this.addVocabulary(p)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const p=this.opts.$data?this.$dataMetaSchema(s,o):s;this.addMetaSchema(p,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}t.Ajv=u,e.exports=t=u,e.exports.Ajv=u,Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var l=y7();Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return l.KeywordCxt}});var c=Jr();Object.defineProperty(t,"_",{enumerable:!0,get:function(){return c._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return c.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return c.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return c.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return c.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return c.CodeGen}});var f=Yee();Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return f.default}});var d=v7();Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return d.default}})}(k5,k5.exports)),k5.exports}var Gzt=Wzt();const Qee=hc(Gzt),Yzt="#/definitions/StudyConfig",Kzt="http://json-schema.org/draft-07/schema#",Xzt=JSON.parse('{"Answer":{"additionalProperties":false,"description":"The Answer interface is used to define the properties of an answer. Answers are used to define the correct answer for a task. These are generally used in training tasks or if skip logic is required based on the answer.\\n\\nAnswers are used to defined correct answers for a task. These are generally used in training tasks or if skip logic is required based on the answer. The answer field is used to define the correct answer to the question. The acceptableLow and acceptableHigh fields are used to define a range of acceptable answers (these are currently only used for training). For example, if the correct answer is 5, and the acceptableLow is 4 and the acceptableHigh is 6, then any answer between 4 and 6 will be considered correct.\\n\\nHere\'s an example of how to use the Answer interface to define the correct answer to a question:\\n\\n```js { \\"type\\": \\"markdown\\", \\"path\\": \\"<study-name>/assets/question.md\\", \\"response\\": [  {    \\"id\\": \\"response1\\",    \\"prompt\\": \\"What is 2 + 2?\\",    \\"location\\": \\"belowStimulus\\",    \\"type\\": \\"numerical\\"  } ] \\"correctAnswer\\": [{  \\"id\\": \\"response1\\",  \\"answer\\": 4 }] } ```\\n\\nIn this example, the correct answer to the question \\"What is 2 + 2?\\" is 4. If the participant answers 4, they will be considered correct. If they answer anything other than 4, they will be considered incorrect.","properties":{"acceptableHigh":{"description":"The acceptable high value for the answer. This is used to define a range of acceptable answers.","type":"number"},"acceptableLow":{"description":"The acceptable low value for the answer. This is used to define a range of acceptable answers.","type":"number"},"answer":{"description":"The correct answer to the question."},"id":{"description":"The id of the answer. This is used to identify the answer in the data file.","type":"string"}},"required":["id","answer"],"type":"object"},"BaseComponents":{"additionalProperties":{"additionalProperties":false,"properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"config":{"description":"The vega or vega-lite configuration.","type":"object"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"anyOf":[{"additionalProperties":{},"description":"The parameters that are passed to the react component. These can be used within your react component to render different things.","type":"object"},{"additionalProperties":{},"description":"The parameters that are passed to the website (iframe). These can be used within your website to render different things.","type":"object"}],"description":"The parameters that are passed to the react component. These can be used within your react component to render different things."},"path":{"anyOf":[{"description":"The path to the markdown file. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the react component. This should be a relative path from the src/public folder.","type":"string"},{"description":"The path to the image. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the website. This should be a relative path from the public folder or could be an external website.","type":"string"},{"description":"The path to the vega file. This should be a relative path from the public folder.","type":"string"}],"description":"The path to the markdown file. This should be a relative path from the public folder."},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"style":{"additionalProperties":{"type":"string"},"description":"The style of the image. This is an object with css properties as keys and css values as values.","type":"object"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"enum":["markdown","react-component","image","website","questionnaire","vega"],"type":"string"}},"type":"object"},"description":"The baseComponents is an optional set of components which can help template other components. For example, suppose you have a single HTML file that you want to display to the user several times. Instead of having the same component twice in the `components` list, you can have a single baseComponent with all the information that the two HTML components will share. A great example is showing the same HTML component but with two different questions;\\n\\n Using baseComponents:\\n\\n```js \\"baseComponents\\": { \\"my-image-component\\": { \\"instructionLocation\\": \\"sidebar\\", \\"nextButtonLocation\\": \\"sidebar\\", \\"path\\": \\"<study-name>/assets/my-image.jpg\\", \\"response\\": [   {     \\"id\\": \\"my-image-id\\",     \\"options\\": [\\"Europe\\", \\"Japan\\", \\"USA\\"],     \\"prompt\\": \\"Your Selected Answer:\\",     \\"type\\": \\"dropdown\\"   } ], \\"type\\": \\"image\\" } } ``` In the above code snippet, we have a single base component which holds the information about the type of component, the path to the image, and the response (which is a dropdown containing three choices). Any component which contains the `\\"baseComponent\\":\\"my-image-component\\"` key-value pair will inherit each of these properties. Thus, if we have three different questions which have the same choices and are concerning the same image, we can define our components like below: ```js \\"components\\": { \\"q1\\": { \\"baseComponent\\": \\"my-image-component\\", \\"description\\": \\"Choosing section with largest GDP\\", \\"instruction\\": \\"Which region has the largest GDP?\\" }, \\"q2\\": { \\"baseComponent\\": \\"my-image-component\\", \\"description\\": \\"Choosing section with lowest GDP\\", \\"instruction\\": \\"Which region has the lowest GDP?\\" }, \\"q3\\": { \\"baseComponent\\": \\"my-image-component\\", \\"description\\": \\"Choosing section with highest exports of Wheat\\", \\"instruction\\": \\"Which region had the most Wheat exported in 2022?\\" } } ```","type":"object"},"CheckboxResponse":{"additionalProperties":false,"description":"The CheckboxResponse interface is used to define the properties of a checkbox response. CheckboxResponses render as a checkbox input with user specified options.\\n\\n```js { \\"id\\": \\"q7\\", \\"prompt\\": \\"Checkbox example (not required)\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"checkbox\\", \\"options\\": [\\"Option 1\\", \\"Option 2\\", \\"Option 3\\"] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"horizontal":{"description":"Whether to render the checkboxes horizontally. Defaults to false, so they render horizontally.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"maxSelections":{"description":"The maximum number of selections that are required.","type":"number"},"minSelections":{"description":"The minimum number of selections that are required.","type":"number"},"options":{"description":"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.","items":{"anyOf":[{"$ref":"#/definitions/StringOption"},{"type":"string"}]},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"checkbox","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"},"withOther":{"description":"Whether to render the checkboxes with an \\"other\\" option.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"ComponentBlock":{"additionalProperties":false,"description":"The ComponentBlock interface is used to define order properties within the sequence. This is used to define the order of components in a study and the skip logic. It supports random assignment of trials using a pure random assignment and a [latin square](https://en.wikipedia.org/wiki/Latin_square).\\n\\nThe pure random assignment is a random assignment with no guarantees. For example, one component _could_ show up in the first position 10 times in a row. However, this situation is unlikely.\\n\\nHere\'s a snippet that shows how to use the random order:\\n\\n```js { \\"order\\": \\"random\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ] } ``` This snippet would produce a random order of the components in the sequence array. For example, the resulting sequence array could be :\\n\\n```js [ [\\"component2\\", \\"component3\\", \\"component1\\"], [\\"component1\\", \\"component3\\", \\"component2\\"], [\\"component3\\", \\"component1\\", \\"component2\\"], ... ] ```\\n\\nThe latin square assignment is a random assignment with some guarantees. It ensures that each component is shown an equal number of times in each position. Here\'s a snippet that shows how to use the latin square order:\\n\\n```js { \\"order\\": \\"latinSquare\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ] } ```\\n\\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"component2\\", \\"component3\\"], [\\"component2\\", \\"component3\\", \\"component1\\"], [\\"component3\\", \\"component1\\", \\"component2\\"], ... ] ```\\n\\nThe fixed assignment is a fixed assignment of components. This is used when you want to show the components in a specific order. Here\'s a snippet that shows how to use the fixed order:\\n\\n```js { \\"order\\": \\"fixed\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ] } ```\\n\\nThis snippet would produce a fixed order of the components in the sequence array. The resulting sequence array would be:\\n\\n```js [ [\\"component1\\", \\"component2\\", \\"component3\\"], [\\"component1\\", \\"component2\\", \\"component3\\"], [\\"component1\\", \\"component2\\", \\"component3\\"], ... ] ```\\n\\nIn addition to the order property, the ComponentBlock interface also includes the `\\"numSamples\\"` property. This is used to reduce the number of components shown to a participant. This property respects the order property and the guarantees provided by the order property. For example, if you have three components in the components array and you set `\\"numSamples\\"` to 2, you would randomize across the three components while only showing a participant two of them. Here\'s a snippet that shows how to use the numSamples property:\\n\\n```js { \\"order\\": \\"latinSquare\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ], \\"numSamples\\": 2 } ```\\n\\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"component2\\"], [\\"component2\\", \\"component3\\"], [\\"component3\\", \\"component1\\"], ... ] ```\\n\\nThe interruptions property specifies an array of interruptions. These can be used for breaks or attention checks. Interruptions can be deterministic or random. Please see [InterruptionBlock](../../type-aliases/InterruptionBlock) for more specific information.\\n\\nThe skip property is used to define skip conditions. This is used to skip to a different component or block based on the response to a component or the number of correct or incorrect responses in a block. Please see [SkipConditions](../../type-aliases/SkipConditions) for more specific information.","properties":{"components":{"description":"The components that are included in the order.","items":{"anyOf":[{"type":"string"},{"$ref":"#/definitions/ComponentBlock"}]},"type":"array"},"id":{"description":"The id of the block. This is used to identify the block in the SkipConditions and is only required if you want to refer to the whole block in the condition.to property.","type":"string"},"interruptions":{"description":"The interruptions property specifies an array of interruptions. These can be used for breaks or attention checks.","items":{"$ref":"#/definitions/InterruptionBlock"},"type":"array"},"numSamples":{"description":"The number of samples to use for the random assignments. This means you can randomize across 3 components while only showing a participant 2 at a time.","type":"number"},"order":{"description":"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.","enum":["random","latinSquare","fixed"],"type":"string"},"skip":{"$ref":"#/definitions/SkipConditions","description":"The skip conditions for the block."}},"required":["order","components"],"type":"object"},"ComponentBlockCondition":{"additionalProperties":false,"description":"The ComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect components in a block. All answers on all components in the block are checked.\\n\\nAnswers are checked against the correct answers defined in the IndividualComponent\'s [CorrectAnswer](../Answer). If no correct answers are defined, the component is considered correct by default.\\n\\nYou might use this if a participant answers two questions in a block incorrectly. Here\'s an example of how to use the ComponentBlockCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"check\\": \\"block\\",   \\"condition\\": \\"numIncorrect\\",   \\"value\\": 2,   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, when the number of components with incorrect responses in the block is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.\\n\\nWhen the condition is met, the participant will immediately be redirected to the component or block specified in the `\\"to\\"` property. If no conditions are met, the participant will continue to the next component in the sequence.","properties":{"check":{"const":"block","description":"The check we\'ll perform.","type":"string"},"condition":{"description":"The condition to check.","enum":["numCorrect","numIncorrect"],"type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"},"value":{"description":"The number of correct or incorrect responses to check for.","type":"number"}},"required":["check","condition","value","to"],"type":"object"},"DeterministicInterruption":{"additionalProperties":false,"description":"The DeterministicInterruption interface is used to define an interruption that will be shown at a specific location in the block.\\n\\nFor example, if you want to show an interruption after the second component in the block, you would set firstLocation to 2. If you want to show an interruption after every 3 components, you would set spacing to 3. If you want to show an interruption after the second component and then every 3 components, you would set firstLocation to 2 and spacing to 3.\\n\\nThe components property is an array of the components that will be inserted at the location specified by firstLocation and spacing. These components should reference components in the StudyConfig.components section of the config.\\n\\nHere\'s an example of how to use the DeterministicInterruption:\\n\\n```js { \\"order\\": \\"fixed\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"component6\\" ], \\"interruptions\\": [ {   \\"firstLocation\\": 2,   \\"spacing\\": 3,   \\"components\\": [     \\"interruption1\\",     \\"interruption2\\"   ] } ] } ```\\n\\nThe resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"component2\\", \\"interruption1\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption2\\", \\"component6\\"], [\\"component1\\", \\"component2\\", \\"interruption1\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption2\\", \\"component6\\"], [\\"component1\\", \\"component2\\", \\"interruption1\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption2\\", \\"component6\\"], ... ] ```","properties":{"components":{"description":"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.","items":{"type":"string"},"type":"array"},"firstLocation":{"description":"The Location of the first instance of the interruption. If this is set to 2, the interruption will be shown after the second component (inserted at index 2).","type":"number"},"spacing":{"description":"The number of components between breaks.","type":"number"}},"required":["firstLocation","spacing","components"],"type":"object"},"DropdownResponse":{"additionalProperties":false,"description":"The DropdownResponse interface is used to define the properties of a dropdown response. DropdownResponses render as a select input with user specified options.\\n\\nExample: ```js { \\"id\\": \\"q-color\\", \\"prompt\\": \\"What is your favorite color?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"dropdown\\", \\"placeholder\\": \\"Please choose your favorite color\\", \\"options\\": [\\"Red\\", \\"Blue\\"] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"options":{"description":"The options that are displayed in the dropdown.","items":{"anyOf":[{"$ref":"#/definitions/StringOption"},{"type":"string"}]},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"dropdown","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"ImageComponent":{"additionalProperties":false,"description":"The ImageComponent interface is used to define the properties of an image component. This component is used to render an image with optional styling.\\n\\nFor example, to render an image with a path of `path/to/study/assets/image.jpg` and a max width of 50%, you would use the following snippet: ```js { \\"type\\": \\"image\\", \\"path\\": \\"<study-name>/assets/image.jpg\\", \\"style\\": { \\"maxWidth\\": \\"50%\\" } } ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"path":{"description":"The path to the image. This should be a relative path from the public folder.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"style":{"additionalProperties":{"type":"string"},"description":"The style of the image. This is an object with css properties as keys and css values as values.","type":"object"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"image","type":"string"}},"required":["path","response","type"],"type":"object"},"IndividualComponent":{"anyOf":[{"$ref":"#/definitions/MarkdownComponent"},{"$ref":"#/definitions/ReactComponent"},{"$ref":"#/definitions/ImageComponent"},{"$ref":"#/definitions/WebsiteComponent"},{"$ref":"#/definitions/QuestionnaireComponent"},{"$ref":"#/definitions/VegaComponent"}]},"IndividualComponentAllResponsesCondition":{"additionalProperties":false,"description":"The IndividualComponentAllResponsesCondition interface is used to define a SkipCondition based on all answers to a specific component. The skip logic will be checked for every component in the block that has the specified name.\\n\\n:::info\\n\\nIf you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.\\n\\n:::\\n\\n\\nHere\'s an example of how to use the IndividualComponentAllResponsesCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"name\\": \\"attentionCheck\\",   \\"check\\": \\"responses\\",   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, if all responses to the component with the ID \\"attentionCheck\\" are correct, the participant will be redirected to the end of the study. If any response is incorrect, the participant will continue to the next component in the sequence.","properties":{"check":{"const":"responses","description":"The check we\'ll perform.","type":"string"},"name":{"description":"The name of the component to check.","type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"}},"required":["name","check","to"],"type":"object"},"IndividualComponentSingleResponseCondition":{"additionalProperties":false,"description":"The IndividualComponentSingleResponseCondition interface is used to define a SkipCondition based on a single answer to a specific component. The skip logic will be checked for every component in the block that has the specified name.\\n\\n:::info\\n\\nIf you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.\\n\\n:::\\n\\nFor example, if you want to skip to a different component based on a response to a specific component, you would use the IndividualComponentSingleResponseCondition. Here\'s an example of how to use the IndividualComponentSingleResponseCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"name\\": \\"attentionCheck\\",   \\"check\\": \\"response\\",   \\"responseId\\": \\"attentionCheckResponse\\",   \\"value\\": \\"the right answer\\",   \\"comparison\\": \\"equal\\",   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, we assign our skip logic to the component whose ID is \\"attentionCheck\\". If the answer given to the response \\"attentionCheckResponse\\" is equal to \\"the right answer\\", then the user will be redirected to the end of the study. If the response is _not_ equal to \\"the right answer\\", then the participant will continue to the next component in the sequence.","properties":{"check":{"const":"response","description":"The check we\'ll perform.","type":"string"},"comparison":{"description":"The comparison to use.","enum":["equal","notEqual"],"type":"string"},"name":{"description":"The name of the component to check.","type":"string"},"responseId":{"description":"The response id to check.","type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"},"value":{"description":"The value to check.","type":["string","number"]}},"required":["name","check","responseId","value","comparison","to"],"type":"object"},"InheritedComponent":{"additionalProperties":false,"description":"An InheritedComponent is a component that inherits properties from a baseComponent. This is used to avoid repeating properties in components. This also means that components in the baseComponents object can be partially defined, while components in the components object can inherit from them and must be fully defined and include all properties (after potentially merging with a base component).","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"baseComponent":{"type":"string"},"config":{"description":"The vega or vega-lite configuration.","type":"object"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"anyOf":[{"additionalProperties":{},"description":"The parameters that are passed to the react component. These can be used within your react component to render different things.","type":"object"},{"additionalProperties":{},"description":"The parameters that are passed to the website (iframe). These can be used within your website to render different things.","type":"object"}],"description":"The parameters that are passed to the react component. These can be used within your react component to render different things."},"path":{"anyOf":[{"description":"The path to the markdown file. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the react component. This should be a relative path from the src/public folder.","type":"string"},{"description":"The path to the image. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the website. This should be a relative path from the public folder or could be an external website.","type":"string"},{"description":"The path to the vega file. This should be a relative path from the public folder.","type":"string"}],"description":"The path to the markdown file. This should be a relative path from the public folder."},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"style":{"additionalProperties":{"type":"string"},"description":"The style of the image. This is an object with css properties as keys and css values as values.","type":"object"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"enum":["markdown","react-component","image","website","questionnaire","vega"],"type":"string"}},"required":["baseComponent"],"type":"object"},"InterruptionBlock":{"anyOf":[{"$ref":"#/definitions/DeterministicInterruption"},{"$ref":"#/definitions/RandomInterruption"}],"description":"The InterruptionBlock interface is used to define interruptions in a block. These can be used for breaks or attention checks. Interruptions can be deterministic or random."},"LikertResponse":{"additionalProperties":false,"description":"The LikertResponse interface is used to define the properties of a likert response. LikertResponses render as radio buttons with a user specified number of options, which can be controlled through the numItems. For example, numItems: 5 will render 5 radio buttons, and numItems: 7 will render 7 radio buttons. LikertResponses can also have a description, and left and right labels. The left and right labels are used to label the left and right ends of the likert scale with values such as \'Strongly Disagree\' and \'Strongly Agree\'.\\n\\nExample for a five-point Likert Scale:\\n\\n```js { \\"id\\": \\"q-satisfaction\\", \\"prompt\\": \\"Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable).\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"likert\\", \\"leftLabel\\": \\"Not Enjoyable\\", \\"rightLabel\\": \\"Very Enjoyable\\", \\"numItems\\": 5 } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"leftLabel":{"description":"The left label of the likert scale. E.g Strongly Disagree","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"numItems":{"description":"The number of options to render.","type":"number"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"rightLabel":{"description":"The right label of the likert scale. E.g Strongly Agree","type":"string"},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"likert","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","numItems","prompt","type"],"type":"object"},"LongTextResponse":{"additionalProperties":false,"description":"The LongTextResponse interface is used to define the properties of a long text response. LongTextResponses render as a text area that accepts any text and can optionally have a placeholder. ```js { \\"id\\": \\"q-name\\", \\"prompt\\": \\"What is your first name?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"longText\\", \\"placeholder\\": \\"Please enter your first name\\" } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"longText","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"MarkdownComponent":{"additionalProperties":false,"description":"The MarkdownComponent interface is used to define the properties of a markdown component. The components can be used to render many different things, such as consent forms, instructions, and debriefs. Additionally, you can use the markdown component to render images, videos, and other media, with supporting text. Markdown components can have responses (e.g. in a consent form), or no responses (e.g. in a help text file). Here\'s an example with no responses for a simple help text file:\\n\\n```js { \\"type\\": \\"markdown\\", \\"path\\": \\"<study-name>/assets/help.md\\", \\"response\\": [] } ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"path":{"description":"The path to the markdown file. This should be a relative path from the public folder.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"markdown","type":"string"}},"required":["path","response","type"],"type":"object"},"MatrixResponse":{"additionalProperties":false,"description":"The MatrixResponse interface is used to define the properties of a matrix radio or matrix checkbox response. Question options are rendered as rows of the matrix, each row containing its own radio/checkbox group. Answer options are rendered as column headers of the matrix. These can be customized by passing in the custom strings into the answer options. Alternatively, `answerOptions` can be set to one of the following custom strings: \'satisfaction5\',\'satisfaction7\', \'likely5\', \'likely7\'. This will automatically generate the appropriate headers for the matrix.\\n\\nExample for a 5-scale satisfaction matrix with three questions:\\n\\n```js { \\"id\\": \\"multi-satisfaction\\", \\"prompt\\": \\"Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable) for the following items.\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"matrix-radio\\", \\"answerOptions\\": \\"satisfaction5\\", \\"questionOptions\\": [  \\"The tool we created\\",  \\"The technique we developed\\",  \\"The authors of the tools\\" ] } ```\\n\\nHere\'s an example using custom columns (answerOptions):\\n\\n```js { \\"id\\": \\"multi-custom\\", \\"prompt\\": \\"Which categories do the following items belong to?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"matrix-checkbox\\", \\"answerOptions\\": [  \\"Has Legs\\",  \\"Has Wings\\",  \\"Can Swim\\" ], \\"questionOptions\\": [  \\"Dog\\",  \\"Snake\\",  \\"Eagle\\",  \\"Salmon\\",  \\"Platypus\\" ]\\n\\n} ```","properties":{"answerOptions":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"const":"likely5","type":"string"},{"const":"likely7","type":"string"},{"const":"satisfaction5","type":"string"},{"const":"satisfaction7","type":"string"}],"description":"The answer options (columns). We provide some shortcuts for a likelihood scale (ranging from highly unlikely to highly likely) and a satisfaction scale (ranging from highly unsatisfied to highly satisfied) with either 5 or 7 options to choose from."},"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"questionOptions":{"description":"The question options (rows) are the prompts for each response you\'d like to record.","items":{"type":"string"},"type":"array"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"enum":["matrix-radio","matrix-checkbox"],"type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["answerOptions","id","prompt","questionOptions","type"],"type":"object"},"NumberOption":{"additionalProperties":false,"description":"The NumberOption interface is used to define the options for a slider response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.","properties":{"label":{"description":"The label displayed to participants.","type":"string"},"value":{"description":"The value stored in the participant\'s data.","type":"number"}},"required":["label","value"],"type":"object"},"NumericalResponse":{"additionalProperties":false,"description":"The NumericalResponse interface is used to define the properties of a numerical response. NumericalResponses render as a text input that only accepts numbers, and can optionally have a min and max value, or a placeholder.\\n\\nExample: ```js { \\"id\\": \\"q-numerical\\", \\"prompt\\": \\"Numerical example\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"numerical\\", \\"placeholder\\": \\"Enter your age, range from 0 - 120\\", \\"max\\": 120, \\"min\\": 0 } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"max":{"description":"The maximum value that is accepted in the input.","type":"number"},"min":{"description":"The minimum value that is accepted in the input.","type":"number"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"numerical","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"QuestionnaireComponent":{"additionalProperties":false,"description":"A QuestionnaireComponent is used to render simple questions that require a response. The main use case of this component type is to ask participants questions when you don\'t need to render a stimulus. Please note, that even though we\'re not using a stimulus, the responses still require a `location`. For example this could be used to collect demographic information from a participant using the following snippet:\\n\\n```js { \\"type\\": \\"questionnaire\\", \\"response\\": [  {    \\"id\\": \\"gender\\",    \\"prompt\\": \\"Gender:\\",    \\"location\\": \\"belowStimulus\\",    \\"type\\": \\"checkbox\\",    \\"options\\": [\\"Man\\", \\"Woman\\", \\"Genderqueer\\", \\"Third-gender\\", ...]  } ] } ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"questionnaire","type":"string"}},"required":["response","type"],"type":"object"},"RadioResponse":{"additionalProperties":false,"description":"The RadioResponse interface is used to define the properties of a radio response. Radios have only one allowable selection. RadioResponses render as a radio input with user specified options, and optionally left and right labels.\\n\\nExample: ```js { \\"id\\": \\"q-radio\\", \\"prompt\\": \\"Radio button example\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"radio\\", \\"options\\": [\\"Option 1\\", \\"Option 2\\"] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"horizontal":{"description":"Whether to render the radio buttons horizontally. Defaults to false, so they render horizontally.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"leftLabel":{"description":"The left label of the radio group. Used in Likert scales for example","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"options":{"description":"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.","items":{"anyOf":[{"$ref":"#/definitions/StringOption"},{"type":"string"}]},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"rightLabel":{"description":"The right label of the radio group. Used in Likert scales for example","type":"string"},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"radio","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"},"withOther":{"description":"Whether to render the radios with an \\"other\\" option.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"RandomInterruption":{"additionalProperties":false,"description":"The RandomInterruption interface is used to define an interruption that will be shown randomly in the block.\\n\\nFor example, if you want to show a single interruption randomly in the block, you would set `\\"spacing\\"` to \\"random\\" and `\\"numInterruptions\\"` to 1. If you want to show 3 interruptions randomly in the block, you would set `\\"spacing\\"` to \\"random\\" and `\\"numInterruptions\\"` to 3.\\n\\nThe components property is an array of the components that will be inserted randomly in the block. These components should reference components in the StudyConfig.components section of the config.\\n\\nHere\'s an example of how to use the RandomInterruption:\\n\\n```js { \\"order\\": \\"fixed\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"component6\\" ], \\"interruptions\\": [ {   \\"spacing\\": \\"random\\",   \\"numInterruptions\\": 3,   \\"components\\": [     \\"interruption1\\",     \\"interruption2\\"   ] } ] } ```\\n\\nThe resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"interruption1\\", \\"interruption2\\", \\"component2\\", \\"interruption1\\", \\"interruption2\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption1\\", \\"interruption2\\", \\"component6], [\\"component1\\", \\"interruption1\\", \\"interruption2\\", \\"component2\\", \\"interruption1\\", \\"interruption2\\", \\"component3\\", \\"component4\\", \\"interruption1\\", \\"interruption2\\", \\"component5\\", \\"component6], [\\"component1\\", \\"component2\\" \\"interruption1\\", \\"interruption2\\", \\"component3\\", \\"interruption1\\", \\"interruption2\\", \\"component4\\", \\"component5\\", \\"interruption1\\", \\"interruption2\\", \\"component6], ... ] ```","properties":{"components":{"description":"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.","items":{"type":"string"},"type":"array"},"numInterruptions":{"description":"The number of times the interruption will be randomly added","type":"number"},"spacing":{"const":"random","description":"If spacing is set to random, reVISit will add interruptions randomly. These interruptions will not ever be displayed as the first component in the block.","type":"string"}},"required":["spacing","numInterruptions","components"],"type":"object"},"ReactComponent":{"additionalProperties":false,"description":"The ReactComponent interface is used to define the properties of a react component. This component is used to render react code with certain parameters. These parameters can be used within your react code to render different things.\\n\\nUnlike other types of components, the path for a React component is relative to the `src/public/` folder. Similar to our standard assets, we suggest creating a folder named `src/public/{studyName}/assets` to house all of the React component assets for a particular study. Your React component which you link to in the path must be default exported from its file.\\n\\nReact components created this way have a generic prop type passed to the component on render, `<StimulusParams<T>>`, which has the following types.\\n\\n```ts { parameters: T; setAnswer: ({ status, provenanceGraph, answers }: { status: boolean, provenanceGraph?: TrrackedProvenance, answers: Record<string, any> }) => void } ```\\n\\nparameters is the same object passed in from the ReactComponent type below, allowing you to pass options in from the config to your component. setAnswer is a callback function allowing the creator of the ReactComponent to programmatically set the answer, as well as the provenance graph. This can be useful if you don\'t use the default answer interface, and instead have something more unique.\\n\\nSo, for example, if I had the following ReactComponent in my config ```js { type: \'react-component\'; path: \'my_study/CoolComponent.tsx\'; parameters: {  name: \'Zach\';  age: 26; } } ```\\n\\nMy react component, CoolComponent.tsx, would exist in src/public/my_study/assets, and look something like this\\n\\n```ts export default function CoolComponent({ parameters, setAnswer }: StimulusParams<{name: string, age: number}>) { // render something } ```\\n\\nFor in depth examples, see the following studies, and their associated codebases. https://revisit.dev/study/demo-click-accuracy-test (https://github.com/revisit-studies/study/tree/2.0.0-rc7/src/public/demo-click-accuracy-test/assets) https://revisit.dev/study/example-brush-interactions (https://github.com/revisit-studies/study/tree/2.0.0-rc7/src/public/example-brush-interactions/assets)","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"additionalProperties":{},"description":"The parameters that are passed to the react component. These can be used within your react component to render different things.","type":"object"},"path":{"description":"The path to the react component. This should be a relative path from the src/public folder.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"react-component","type":"string"}},"required":["path","response","type"],"type":"object"},"ReactiveResponse":{"additionalProperties":false,"description":"The ReactiveResponse interface is used to define the properties of a reactive response. ReactiveResponses render as a list, that is connected to a WebsiteComponent, VegaComponent, or ReactComponent. When data is sent from the components, it is displayed in the list.\\n\\n```js { \\"id\\": \\"reactiveResponse\\", \\"prompt\\": \\"Answer clicked in the stimulus\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"reactive\\" } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"reactive","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"RepeatedComponentBlockCondition":{"additionalProperties":false,"description":"The RepeatedComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect repeated components. You might use this if you need to check if an attention check was failed multiple times. This is similar to the [ComponentBlockCondition](../ComponentBlockCondition), but it only checks a specific repeated component.\\n\\nHere\'s an example of how to use the RepeatedComponentBlockCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"name\\": \\"attentionCheck\\",   \\"check\\": \\"repeatedComponent\\",   \\"condition\\": \\"numIncorrect\\",   \\"value\\": 2,   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, when the number of incorrect responses to the repeated component with the name \\"attentionCheck\\" is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.","properties":{"check":{"const":"repeatedComponent","description":"The check we\'ll perform.","type":"string"},"condition":{"description":"The condition to check.","enum":["numCorrect","numIncorrect"],"type":"string"},"name":{"description":"The name of the repeated component to check (e.g. attentionCheck).","type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"},"value":{"description":"The number of correct or incorrect responses to check for.","type":"number"}},"required":["name","check","condition","value","to"],"type":"object"},"Response":{"anyOf":[{"$ref":"#/definitions/NumericalResponse"},{"$ref":"#/definitions/ShortTextResponse"},{"$ref":"#/definitions/LongTextResponse"},{"$ref":"#/definitions/LikertResponse"},{"$ref":"#/definitions/DropdownResponse"},{"$ref":"#/definitions/SliderResponse"},{"$ref":"#/definitions/RadioResponse"},{"$ref":"#/definitions/CheckboxResponse"},{"$ref":"#/definitions/ReactiveResponse"},{"$ref":"#/definitions/MatrixResponse"}]},"ResponseBlockLocation":{"enum":["sidebar","aboveStimulus","belowStimulus"],"type":"string"},"ShortTextResponse":{"additionalProperties":false,"description":"The ShortTextResponse interface is used to define the properties of a short text response. ShortTextResponses render as a text input that accepts any text and can optionally have a placeholder.\\n\\n```js { \\"id\\": \\"q-short-text\\", \\"prompt\\": \\"Short text example\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"shortText\\", \\"placeholder\\": \\"Enter your answer here\\" } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"shortText","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"SkipConditions":{"description":"The SkipConditions interface is used to define skip conditions. This is used to skip to a different component/block based on the response to a component or based on the number of correct/incorrect responses in a block. Skip conditions work recursively: if you have a nested block, the parent blocks\' skip conditions will be considered when computing the skip logic.\\n\\nSkip conditions are evaluated in the order they are defined in the array. If a condition is met, the participant will be redirected to the component or block specified in the `\\"to\\"` property. If no conditions are met, the participant will continue to the next component in the sequence.\\n\\nSkip conditions allow you to jump to a different component or block. If you intend to skip to a block, you should specify a block id in the sequence. If you intend to skip to a component, you should specify a component id. Skipping backwards is not supported. Skipping to a repeated component will skip to the first instance of the component after the component that triggered the skip.\\n\\nPlease see the interface definitions for more specific information on the different types of skip conditions.","items":{"anyOf":[{"$ref":"#/definitions/IndividualComponentSingleResponseCondition"},{"$ref":"#/definitions/IndividualComponentAllResponsesCondition"},{"$ref":"#/definitions/ComponentBlockCondition"},{"$ref":"#/definitions/RepeatedComponentBlockCondition"}]},"type":"array"},"SliderResponse":{"additionalProperties":false,"description":"The SliderResponse interface is used to define the properties of a slider response. SliderResponses render as a slider input with user specified steps. For example, you could have steps of 0, 50, and 100.\\n\\nExample: ```js { \\"id\\": \\"q-slider\\", \\"prompt\\": \\"How are you feeling?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"slider\\", \\"options\\": [  {    \\"label\\": \\"Bad\\",    \\"value\\": 0  },  {    \\"label\\": \\"OK\\",    \\"value\\": 50  },  {    \\"label\\": \\"Good\\",    \\"value\\": 100  } ] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"options":{"description":"This defines the steps in the slider and the extent of the slider as an array of objects that have a label and a value.","items":{"$ref":"#/definitions/NumberOption"},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"slider","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"StringOption":{"additionalProperties":false,"description":"The StringOption interface is used to define the options for a dropdown, radio, or checkbox response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.","properties":{"label":{"description":"The label displayed to participants.","type":"string"},"value":{"description":"The value stored in the participant\'s data.","type":"string"}},"required":["label","value"],"type":"object"},"StudyConfig":{"additionalProperties":false,"description":"The StudyConfig interface is used to define the properties of a study configuration. This is a JSON object with four main components: the StudyMetadata, the UIConfig, the Components, and the Sequence. Below is the general template that should be followed when constructing a Study configuration file.\\n\\n```js { \\"$schema\\": \\"https://raw.githubusercontent.com/revisit-studies/study/v2.0.1/src/parser/StudyConfigSchema.json\\", \\"studyMetadata\\": {  ... }, \\"uiConfig\\": {  ... }, \\"components\\": {  ... }, \\"sequence\\": {  ... } } ```\\n\\n:::info For information about each of the individual pieces of the study configuration file, you can visit the documentation for each one individually. ::: <br/>\\n\\nThe `$schema` line is used to verify the schema. If you\'re using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration.","properties":{"$schema":{"description":"A required json schema property. This should point to the github link for the version of the schema you would like. The `$schema` line is used to verify the schema. If you\'re using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration. See examples for more information","type":"string"},"baseComponents":{"$ref":"#/definitions/BaseComponents","description":"The base components that are used in the study. These components can be used to template other components. See [BaseComponents](../../type-aliases/BaseComponents) for more information."},"components":{"additionalProperties":{"anyOf":[{"$ref":"#/definitions/IndividualComponent"},{"$ref":"#/definitions/InheritedComponent"}]},"description":"The components that are used in the study. They must be fully defined here with all properties. Some properties may be inherited from baseComponents.","type":"object"},"importedLibraries":{"description":"A list of libraries that are used in the study. This is used to import external libraries into the study. Library names are valid namespaces to be used later.","items":{"type":"string"},"type":"array"},"sequence":{"$ref":"#/definitions/ComponentBlock","description":"The order of the components in the study. This might include some randomness."},"studyMetadata":{"$ref":"#/definitions/StudyMetadata","description":"The metadata for the study. This is used to identify the study and version in the data file."},"uiConfig":{"$ref":"#/definitions/UIConfig","description":"The UI configuration for the study. This is used to configure the UI of the app."}},"required":["$schema","studyMetadata","uiConfig","components","sequence"],"type":"object"},"StudyMetadata":{"additionalProperties":false,"description":"The StudyMetadata is used to describe certain properties of a study. Some of this data is displayed on the landing page when running the app, such as the title and description. Below is an example of a StudyMetadata entry in your study configuration file:\\n\\n```js \\"studyMetadata\\" : { \\"title\\": \\"My New Study\\", \\"version\\": \\"pilot\\", \\"authors\\": [  \\"Jane Doe\\",  \\"John Doe\\" ], \\"date\\": \\"2024-04-01\\", \\"description\\": \\"This study is meant to test your ability.\\", \\"organizations\\": [  \\"The reVISit Team\\",  \\"The Other Team\\" ] } ```","properties":{"authors":{"description":"The authors of your study.","items":{"type":"string"},"type":"array"},"date":{"description":"The date of your study, may be useful for the researcher.","type":"string"},"description":{"description":"The description of your study, shown on the landing page.","type":"string"},"organizations":{"description":"The organizations that are associated with your study.","items":{"type":"string"},"type":"array"},"title":{"description":"The title of your study, shown on the landing page.","type":"string"},"version":{"description":"The version of your study. When you change a configuration file after a study has already been distributed to participants, you can change the version number so that the participants who see this new configuration file can be identified.","type":"string"}},"required":["title","version","authors","date","description","organizations"],"type":"object"},"UIConfig":{"additionalProperties":false,"description":"The UIConfig is used to configure the UI of the app. This includes the logo, contact email, and whether to show a progress bar. The UIConfig is also used to configure the sidebar, which can be used to display the task instructions and capture responses. Below is an example of how the UI Config would look in your study configuration (note, there are optional fields that are not shown here): ```js uiConfig:{ \\"contactEmail\\": \\"contact@revisit.dev\\", \\"helpTextPath\\": \\"<study-name>/assets/help.md\\", \\"logoPath\\": \\"<study-name>/assets/logo.jpg\\", \\"withProgressBar\\": true, \\"autoDownloadStudy\\": true \\"autoDownloadTime\\": 5000, \\"studyEndMsg\\": \\"Thank you for completing this study. You\'re the best!\\", \\"sidebar\\": true, \\"windowEventDebounceTime\\": 500, \\"urlParticipantIdParam\\": \\"PROLIFIC_ID\\", \\"numSequences\\": 500 } ``` In the above, the `path/to/assets/` path is referring to the path to your individual study assets. It is common practice to have your study directory contain an `assets` directory where all components and images relevant to your study reside. Note that this path is relative to the `public` folder of the repository - as is all other paths you define in reVISit (aside from React components whose paths are relative to `src/public`.)","properties":{"autoDownloadStudy":{"description":"Controls whether the study data is automatically downloaded at the end of the study.","type":"boolean"},"autoDownloadTime":{"description":"The time in milliseconds to wait before automatically downloading the study data.","type":"number"},"contactEmail":{"description":"The email address that used during the study if a participant clicks contact.","type":"string"},"enumerateQuestions":{"description":"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar.","type":"boolean"},"helpTextPath":{"description":"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported.","type":"string"},"logoPath":{"description":"The path to the logo image. This is displayed on the landing page and the header.","type":"string"},"nextOnEnter":{"description":"Whether enter key should move to the next question. Defaults to false.","type":"boolean"},"numSequences":{"description":"The number of sequences to generate for the study. This is used to generate the random sequences for the study. The default is 1000.","type":"number"},"participantNameField":{"description":"The default name field for a participant. Directs revisit to use the task and response id as a name in UI elements. For example, if you wanted the response \'prolificId\' from the task \'introduction\' to be the name, this field would be \'introduction.prolificId\'","type":"string"},"recordStudyAudio":{"description":"Whether or not we want to utilize think-aloud features. If true, will record audio on all components unless deactivated on individual components. Defaults to false.","type":"boolean"},"sidebar":{"description":"Controls whether the left sidebar is rendered at all. Required to be true if your response\'s location is set to sidebar for any question.","type":"boolean"},"sidebarWidth":{"description":"The width of the left sidebar. Defaults to 300.","type":"number"},"studyEndMsg":{"description":"The message to display when the study ends.","type":"string"},"timeoutReject":{"description":"Whether to redirect a timed out participant to a rejection page. This only works for components where the `nextButtonDisableTime` field is set.","type":"boolean"},"urlParticipantIdParam":{"description":"If the participant ID is passed in the URL, this is the name of the querystring parameter that is used to capture the participant ID (e.g. PROLIFIC_ID). This will allow a user to continue a study on different devices and browsers.","type":"string"},"windowEventDebounceTime":{"description":"Debounce time in milliseconds for automatically tracked window events. Defaults to 100. E.g 100 here means 1000ms / 100ms = 10 times a second, 200 here means 1000ms / 200ms = 5 times per second","type":"number"},"withProgressBar":{"description":"Controls whether the progress bar is rendered in the study.","type":"boolean"}},"required":["contactEmail","logoPath","withProgressBar","sidebar"],"type":"object"},"VegaComponent":{"anyOf":[{"$ref":"#/definitions/VegaComponentPath"},{"$ref":"#/definitions/VegaComponentConfig"}]},"VegaComponentConfig":{"additionalProperties":false,"description":"The VegaComponentConfig interface is used to define the properties of a Vega Component. This component is used to render a Vega/Vega-Lite Component by adding Vega/Vega-Lite specs within the reVISit config itself.\\n\\nTo do this, would use the following snippet: ```js { \\"type\\": \\"vega\\", \\"config\\": { ... vega specs here ...}, }\\n\\nIIf you are using Vega, you can use signals with `revisitAnswer` to send the user\'s responses back to the reVISit. For example, you can use the following snippet in your Vega spec\'s signals section: ```js { \\"signals\\": [  {    \\"name\\": \\"revisitAnswer\\",    \\"value\\": {},    \\"on\\": [      {        \\"events\\": \\"rect:click\\",        \\"update\\": \\"{responseId: \'vegaDemoResponse1\', response: datum.category}\\"      }    ]  } ] } In this example, when a user clicks on a rectangle in the Vega chart, the `revisitAnswer` signal is updated with the responseId and response. ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"config":{"description":"The vega or vega-lite configuration.","type":"object"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"vega","type":"string"}},"required":["config","response","type"],"type":"object"},"VegaComponentPath":{"additionalProperties":false,"description":"The VegaComponentPath interface is used to define the properties of a Vega Component. This component is used to render a Vega/Vega-Lite Component with path pointing to your Vega/Vega-Lite specs file.\\n\\nFor example, to render a vega based stimuli with a path of `<study-name>/assets/vega.spec.json`, you would use the following snippet: ```js { \\"type\\": \\"vega\\", \\"path\\": \\"<study-name>/assets/vega.spec.json\\", } ```\\n\\nIf you are using Vega, you can use signals with `revisitAnswer` to send the user\'s responses back to the reVISit. For example, you can use the following snippet in your Vega spec file\'s signals section: ```js { \\"signals\\": [  {    \\"name\\": \\"revisitAnswer\\",    \\"value\\": {},    \\"on\\": [      {        \\"events\\": \\"rect:click\\",        \\"update\\": \\"{responseId: \'vegaDemoResponse1\', response: datum.category}\\"      }    ]  } ] } In this example, when a user clicks on a rectangle in the Vega chart, the `revisitAnswer` signal is updated with the responseId and response. This signal is then passed to reVISit as the participant\'s response. ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"path":{"description":"The path to the vega file. This should be a relative path from the public folder.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"vega","type":"string"}},"required":["path","response","type"],"type":"object"},"WebsiteComponent":{"additionalProperties":false,"description":"The WebsiteComponent interface is used to define the properties of a website component. A WebsiteComponent is used to render an iframe with a website inside of it. This can be used to display an external website or an html file that is located in the public folder.\\n\\n```js { \\"type\\": \\"website\\", \\"path\\": \\"<study-name>/assets/website.html\\", } ```\\n\\nTo pass a data from the config to the website, you can use the `parameters` field as below:\\n\\n```js { \\"type\\": \\"website\\", \\"path\\": \\"<study-name>/website.html\\", \\"parameters\\": {  \\"barData\\": [0.32, 0.01, 1.2, 1.3, 0.82, 0.4, 0.3] } \\"response\\": [  {    \\"id\\": \\"barChart\\",    \\"prompt\\": \\"Your selected answer:\\",    \\"location\\": \\"belowStimulus\\",    \\"type\\": \\"reactive\\"  } ], } ``` In the `website.html` file, by including `revisit-communicate.js`, you can use the `Revisit.onDataReceive` method to retrieve the data, and `Revisit.postAnswers` to send the user\'s responses back to the reVISit as shown in the example below:\\n\\n```html <script src=\\"../../revisitUtilities/revisit-communicate.js\\"><\/script> <script> Revisit.onDataReceive((data) => {  const barData = data[\'barData\'];  ... });\\n\\n// Call out that \'barChart\' needs to match ID in \'response\' object Revisit.postAnswers({ barChart: userAnswer }); <\/script> ```\\n\\n If the html website implements Trrack library for provenance tracking, you can send the provenance graph back to reVISit by calling `Revisit.postProvenanceGraph` as shown in the example below. You need to call this each time the Trrack state is updated so that reVISit is kept aware of the changes in the provenance graph.\\n\\n```js const trrack = initializeTrrack({ initialState, registry });\\n\\n... Revisit.postProvenance(trrack.graph.backend); ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"additionalProperties":{},"description":"The parameters that are passed to the website (iframe). These can be used within your website to render different things.","type":"object"},"path":{"description":"The path to the website. This should be a relative path from the public folder or could be an external website.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"website","type":"string"}},"required":["path","response","type"],"type":"object"}}'),Qzt={$ref:Yzt,$schema:Kzt,definitions:Xzt},Jzt="#/definitions/GlobalConfig",Zzt="http://json-schema.org/draft-07/schema#",eVt={GlobalConfig:{additionalProperties:!1,description:"The GlobalConfig is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. See examples in the public folder for more information",type:"string"},configs:{additionalProperties:{additionalProperties:!1,description:"The key is used to identify the study config file. This key is used in the configList property.",properties:{path:{description:"The path to the study config file. This should be a relative path from the public folder.",type:"string"},test:{description:"Indicates whether the study is a test study. This is used to hide the study from the landing page.",type:"boolean"}},required:["path"],type:"object"},description:"A required property that specifies the options for the configList property.",type:"object"},configsList:{description:"A required property that is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",items:{type:"string"},type:"array"}},required:["$schema","configs","configsList"],type:"object"}},tVt={$ref:Jzt,$schema:Zzt,definitions:eVt},nVt="#/definitions/LibraryConfig",rVt="http://json-schema.org/draft-07/schema#",iVt=JSON.parse('{"Answer":{"additionalProperties":false,"description":"The Answer interface is used to define the properties of an answer. Answers are used to define the correct answer for a task. These are generally used in training tasks or if skip logic is required based on the answer.\\n\\nAnswers are used to defined correct answers for a task. These are generally used in training tasks or if skip logic is required based on the answer. The answer field is used to define the correct answer to the question. The acceptableLow and acceptableHigh fields are used to define a range of acceptable answers (these are currently only used for training). For example, if the correct answer is 5, and the acceptableLow is 4 and the acceptableHigh is 6, then any answer between 4 and 6 will be considered correct.\\n\\nHere\'s an example of how to use the Answer interface to define the correct answer to a question:\\n\\n```js { \\"type\\": \\"markdown\\", \\"path\\": \\"<study-name>/assets/question.md\\", \\"response\\": [  {    \\"id\\": \\"response1\\",    \\"prompt\\": \\"What is 2 + 2?\\",    \\"location\\": \\"belowStimulus\\",    \\"type\\": \\"numerical\\"  } ] \\"correctAnswer\\": [{  \\"id\\": \\"response1\\",  \\"answer\\": 4 }] } ```\\n\\nIn this example, the correct answer to the question \\"What is 2 + 2?\\" is 4. If the participant answers 4, they will be considered correct. If they answer anything other than 4, they will be considered incorrect.","properties":{"acceptableHigh":{"description":"The acceptable high value for the answer. This is used to define a range of acceptable answers.","type":"number"},"acceptableLow":{"description":"The acceptable low value for the answer. This is used to define a range of acceptable answers.","type":"number"},"answer":{"description":"The correct answer to the question."},"id":{"description":"The id of the answer. This is used to identify the answer in the data file.","type":"string"}},"required":["id","answer"],"type":"object"},"BaseComponents":{"additionalProperties":{"additionalProperties":false,"properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"config":{"description":"The vega or vega-lite configuration.","type":"object"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"anyOf":[{"additionalProperties":{},"description":"The parameters that are passed to the react component. These can be used within your react component to render different things.","type":"object"},{"additionalProperties":{},"description":"The parameters that are passed to the website (iframe). These can be used within your website to render different things.","type":"object"}],"description":"The parameters that are passed to the react component. These can be used within your react component to render different things."},"path":{"anyOf":[{"description":"The path to the markdown file. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the react component. This should be a relative path from the src/public folder.","type":"string"},{"description":"The path to the image. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the website. This should be a relative path from the public folder or could be an external website.","type":"string"},{"description":"The path to the vega file. This should be a relative path from the public folder.","type":"string"}],"description":"The path to the markdown file. This should be a relative path from the public folder."},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"style":{"additionalProperties":{"type":"string"},"description":"The style of the image. This is an object with css properties as keys and css values as values.","type":"object"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"enum":["markdown","react-component","image","website","questionnaire","vega"],"type":"string"}},"type":"object"},"description":"The baseComponents is an optional set of components which can help template other components. For example, suppose you have a single HTML file that you want to display to the user several times. Instead of having the same component twice in the `components` list, you can have a single baseComponent with all the information that the two HTML components will share. A great example is showing the same HTML component but with two different questions;\\n\\n Using baseComponents:\\n\\n```js \\"baseComponents\\": { \\"my-image-component\\": { \\"instructionLocation\\": \\"sidebar\\", \\"nextButtonLocation\\": \\"sidebar\\", \\"path\\": \\"<study-name>/assets/my-image.jpg\\", \\"response\\": [   {     \\"id\\": \\"my-image-id\\",     \\"options\\": [\\"Europe\\", \\"Japan\\", \\"USA\\"],     \\"prompt\\": \\"Your Selected Answer:\\",     \\"type\\": \\"dropdown\\"   } ], \\"type\\": \\"image\\" } } ``` In the above code snippet, we have a single base component which holds the information about the type of component, the path to the image, and the response (which is a dropdown containing three choices). Any component which contains the `\\"baseComponent\\":\\"my-image-component\\"` key-value pair will inherit each of these properties. Thus, if we have three different questions which have the same choices and are concerning the same image, we can define our components like below: ```js \\"components\\": { \\"q1\\": { \\"baseComponent\\": \\"my-image-component\\", \\"description\\": \\"Choosing section with largest GDP\\", \\"instruction\\": \\"Which region has the largest GDP?\\" }, \\"q2\\": { \\"baseComponent\\": \\"my-image-component\\", \\"description\\": \\"Choosing section with lowest GDP\\", \\"instruction\\": \\"Which region has the lowest GDP?\\" }, \\"q3\\": { \\"baseComponent\\": \\"my-image-component\\", \\"description\\": \\"Choosing section with highest exports of Wheat\\", \\"instruction\\": \\"Which region had the most Wheat exported in 2022?\\" } } ```","type":"object"},"CheckboxResponse":{"additionalProperties":false,"description":"The CheckboxResponse interface is used to define the properties of a checkbox response. CheckboxResponses render as a checkbox input with user specified options.\\n\\n```js { \\"id\\": \\"q7\\", \\"prompt\\": \\"Checkbox example (not required)\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"checkbox\\", \\"options\\": [\\"Option 1\\", \\"Option 2\\", \\"Option 3\\"] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"horizontal":{"description":"Whether to render the checkboxes horizontally. Defaults to false, so they render horizontally.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"maxSelections":{"description":"The maximum number of selections that are required.","type":"number"},"minSelections":{"description":"The minimum number of selections that are required.","type":"number"},"options":{"description":"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.","items":{"anyOf":[{"$ref":"#/definitions/StringOption"},{"type":"string"}]},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"checkbox","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"},"withOther":{"description":"Whether to render the checkboxes with an \\"other\\" option.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"ComponentBlock":{"additionalProperties":false,"description":"The ComponentBlock interface is used to define order properties within the sequence. This is used to define the order of components in a study and the skip logic. It supports random assignment of trials using a pure random assignment and a [latin square](https://en.wikipedia.org/wiki/Latin_square).\\n\\nThe pure random assignment is a random assignment with no guarantees. For example, one component _could_ show up in the first position 10 times in a row. However, this situation is unlikely.\\n\\nHere\'s a snippet that shows how to use the random order:\\n\\n```js { \\"order\\": \\"random\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ] } ``` This snippet would produce a random order of the components in the sequence array. For example, the resulting sequence array could be :\\n\\n```js [ [\\"component2\\", \\"component3\\", \\"component1\\"], [\\"component1\\", \\"component3\\", \\"component2\\"], [\\"component3\\", \\"component1\\", \\"component2\\"], ... ] ```\\n\\nThe latin square assignment is a random assignment with some guarantees. It ensures that each component is shown an equal number of times in each position. Here\'s a snippet that shows how to use the latin square order:\\n\\n```js { \\"order\\": \\"latinSquare\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ] } ```\\n\\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"component2\\", \\"component3\\"], [\\"component2\\", \\"component3\\", \\"component1\\"], [\\"component3\\", \\"component1\\", \\"component2\\"], ... ] ```\\n\\nThe fixed assignment is a fixed assignment of components. This is used when you want to show the components in a specific order. Here\'s a snippet that shows how to use the fixed order:\\n\\n```js { \\"order\\": \\"fixed\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ] } ```\\n\\nThis snippet would produce a fixed order of the components in the sequence array. The resulting sequence array would be:\\n\\n```js [ [\\"component1\\", \\"component2\\", \\"component3\\"], [\\"component1\\", \\"component2\\", \\"component3\\"], [\\"component1\\", \\"component2\\", \\"component3\\"], ... ] ```\\n\\nIn addition to the order property, the ComponentBlock interface also includes the `\\"numSamples\\"` property. This is used to reduce the number of components shown to a participant. This property respects the order property and the guarantees provided by the order property. For example, if you have three components in the components array and you set `\\"numSamples\\"` to 2, you would randomize across the three components while only showing a participant two of them. Here\'s a snippet that shows how to use the numSamples property:\\n\\n```js { \\"order\\": \\"latinSquare\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ], \\"numSamples\\": 2 } ```\\n\\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"component2\\"], [\\"component2\\", \\"component3\\"], [\\"component3\\", \\"component1\\"], ... ] ```\\n\\nThe interruptions property specifies an array of interruptions. These can be used for breaks or attention checks. Interruptions can be deterministic or random. Please see [InterruptionBlock](../../type-aliases/InterruptionBlock) for more specific information.\\n\\nThe skip property is used to define skip conditions. This is used to skip to a different component or block based on the response to a component or the number of correct or incorrect responses in a block. Please see [SkipConditions](../../type-aliases/SkipConditions) for more specific information.","properties":{"components":{"description":"The components that are included in the order.","items":{"anyOf":[{"type":"string"},{"$ref":"#/definitions/ComponentBlock"}]},"type":"array"},"id":{"description":"The id of the block. This is used to identify the block in the SkipConditions and is only required if you want to refer to the whole block in the condition.to property.","type":"string"},"interruptions":{"description":"The interruptions property specifies an array of interruptions. These can be used for breaks or attention checks.","items":{"$ref":"#/definitions/InterruptionBlock"},"type":"array"},"numSamples":{"description":"The number of samples to use for the random assignments. This means you can randomize across 3 components while only showing a participant 2 at a time.","type":"number"},"order":{"description":"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.","enum":["random","latinSquare","fixed"],"type":"string"},"skip":{"$ref":"#/definitions/SkipConditions","description":"The skip conditions for the block."}},"required":["order","components"],"type":"object"},"ComponentBlockCondition":{"additionalProperties":false,"description":"The ComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect components in a block. All answers on all components in the block are checked.\\n\\nAnswers are checked against the correct answers defined in the IndividualComponent\'s [CorrectAnswer](../Answer). If no correct answers are defined, the component is considered correct by default.\\n\\nYou might use this if a participant answers two questions in a block incorrectly. Here\'s an example of how to use the ComponentBlockCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"check\\": \\"block\\",   \\"condition\\": \\"numIncorrect\\",   \\"value\\": 2,   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, when the number of components with incorrect responses in the block is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.\\n\\nWhen the condition is met, the participant will immediately be redirected to the component or block specified in the `\\"to\\"` property. If no conditions are met, the participant will continue to the next component in the sequence.","properties":{"check":{"const":"block","description":"The check we\'ll perform.","type":"string"},"condition":{"description":"The condition to check.","enum":["numCorrect","numIncorrect"],"type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"},"value":{"description":"The number of correct or incorrect responses to check for.","type":"number"}},"required":["check","condition","value","to"],"type":"object"},"DeterministicInterruption":{"additionalProperties":false,"description":"The DeterministicInterruption interface is used to define an interruption that will be shown at a specific location in the block.\\n\\nFor example, if you want to show an interruption after the second component in the block, you would set firstLocation to 2. If you want to show an interruption after every 3 components, you would set spacing to 3. If you want to show an interruption after the second component and then every 3 components, you would set firstLocation to 2 and spacing to 3.\\n\\nThe components property is an array of the components that will be inserted at the location specified by firstLocation and spacing. These components should reference components in the StudyConfig.components section of the config.\\n\\nHere\'s an example of how to use the DeterministicInterruption:\\n\\n```js { \\"order\\": \\"fixed\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"component6\\" ], \\"interruptions\\": [ {   \\"firstLocation\\": 2,   \\"spacing\\": 3,   \\"components\\": [     \\"interruption1\\",     \\"interruption2\\"   ] } ] } ```\\n\\nThe resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"component2\\", \\"interruption1\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption2\\", \\"component6\\"], [\\"component1\\", \\"component2\\", \\"interruption1\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption2\\", \\"component6\\"], [\\"component1\\", \\"component2\\", \\"interruption1\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption2\\", \\"component6\\"], ... ] ```","properties":{"components":{"description":"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.","items":{"type":"string"},"type":"array"},"firstLocation":{"description":"The Location of the first instance of the interruption. If this is set to 2, the interruption will be shown after the second component (inserted at index 2).","type":"number"},"spacing":{"description":"The number of components between breaks.","type":"number"}},"required":["firstLocation","spacing","components"],"type":"object"},"DropdownResponse":{"additionalProperties":false,"description":"The DropdownResponse interface is used to define the properties of a dropdown response. DropdownResponses render as a select input with user specified options.\\n\\nExample: ```js { \\"id\\": \\"q-color\\", \\"prompt\\": \\"What is your favorite color?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"dropdown\\", \\"placeholder\\": \\"Please choose your favorite color\\", \\"options\\": [\\"Red\\", \\"Blue\\"] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"options":{"description":"The options that are displayed in the dropdown.","items":{"anyOf":[{"$ref":"#/definitions/StringOption"},{"type":"string"}]},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"dropdown","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"ImageComponent":{"additionalProperties":false,"description":"The ImageComponent interface is used to define the properties of an image component. This component is used to render an image with optional styling.\\n\\nFor example, to render an image with a path of `path/to/study/assets/image.jpg` and a max width of 50%, you would use the following snippet: ```js { \\"type\\": \\"image\\", \\"path\\": \\"<study-name>/assets/image.jpg\\", \\"style\\": { \\"maxWidth\\": \\"50%\\" } } ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"path":{"description":"The path to the image. This should be a relative path from the public folder.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"style":{"additionalProperties":{"type":"string"},"description":"The style of the image. This is an object with css properties as keys and css values as values.","type":"object"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"image","type":"string"}},"required":["path","response","type"],"type":"object"},"IndividualComponent":{"anyOf":[{"$ref":"#/definitions/MarkdownComponent"},{"$ref":"#/definitions/ReactComponent"},{"$ref":"#/definitions/ImageComponent"},{"$ref":"#/definitions/WebsiteComponent"},{"$ref":"#/definitions/QuestionnaireComponent"},{"$ref":"#/definitions/VegaComponent"}]},"IndividualComponentAllResponsesCondition":{"additionalProperties":false,"description":"The IndividualComponentAllResponsesCondition interface is used to define a SkipCondition based on all answers to a specific component. The skip logic will be checked for every component in the block that has the specified name.\\n\\n:::info\\n\\nIf you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.\\n\\n:::\\n\\n\\nHere\'s an example of how to use the IndividualComponentAllResponsesCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"name\\": \\"attentionCheck\\",   \\"check\\": \\"responses\\",   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, if all responses to the component with the ID \\"attentionCheck\\" are correct, the participant will be redirected to the end of the study. If any response is incorrect, the participant will continue to the next component in the sequence.","properties":{"check":{"const":"responses","description":"The check we\'ll perform.","type":"string"},"name":{"description":"The name of the component to check.","type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"}},"required":["name","check","to"],"type":"object"},"IndividualComponentSingleResponseCondition":{"additionalProperties":false,"description":"The IndividualComponentSingleResponseCondition interface is used to define a SkipCondition based on a single answer to a specific component. The skip logic will be checked for every component in the block that has the specified name.\\n\\n:::info\\n\\nIf you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.\\n\\n:::\\n\\nFor example, if you want to skip to a different component based on a response to a specific component, you would use the IndividualComponentSingleResponseCondition. Here\'s an example of how to use the IndividualComponentSingleResponseCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"name\\": \\"attentionCheck\\",   \\"check\\": \\"response\\",   \\"responseId\\": \\"attentionCheckResponse\\",   \\"value\\": \\"the right answer\\",   \\"comparison\\": \\"equal\\",   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, we assign our skip logic to the component whose ID is \\"attentionCheck\\". If the answer given to the response \\"attentionCheckResponse\\" is equal to \\"the right answer\\", then the user will be redirected to the end of the study. If the response is _not_ equal to \\"the right answer\\", then the participant will continue to the next component in the sequence.","properties":{"check":{"const":"response","description":"The check we\'ll perform.","type":"string"},"comparison":{"description":"The comparison to use.","enum":["equal","notEqual"],"type":"string"},"name":{"description":"The name of the component to check.","type":"string"},"responseId":{"description":"The response id to check.","type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"},"value":{"description":"The value to check.","type":["string","number"]}},"required":["name","check","responseId","value","comparison","to"],"type":"object"},"InheritedComponent":{"additionalProperties":false,"description":"An InheritedComponent is a component that inherits properties from a baseComponent. This is used to avoid repeating properties in components. This also means that components in the baseComponents object can be partially defined, while components in the components object can inherit from them and must be fully defined and include all properties (after potentially merging with a base component).","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"baseComponent":{"type":"string"},"config":{"description":"The vega or vega-lite configuration.","type":"object"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"anyOf":[{"additionalProperties":{},"description":"The parameters that are passed to the react component. These can be used within your react component to render different things.","type":"object"},{"additionalProperties":{},"description":"The parameters that are passed to the website (iframe). These can be used within your website to render different things.","type":"object"}],"description":"The parameters that are passed to the react component. These can be used within your react component to render different things."},"path":{"anyOf":[{"description":"The path to the markdown file. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the react component. This should be a relative path from the src/public folder.","type":"string"},{"description":"The path to the image. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the website. This should be a relative path from the public folder or could be an external website.","type":"string"},{"description":"The path to the vega file. This should be a relative path from the public folder.","type":"string"}],"description":"The path to the markdown file. This should be a relative path from the public folder."},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"style":{"additionalProperties":{"type":"string"},"description":"The style of the image. This is an object with css properties as keys and css values as values.","type":"object"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"enum":["markdown","react-component","image","website","questionnaire","vega"],"type":"string"}},"required":["baseComponent"],"type":"object"},"InterruptionBlock":{"anyOf":[{"$ref":"#/definitions/DeterministicInterruption"},{"$ref":"#/definitions/RandomInterruption"}],"description":"The InterruptionBlock interface is used to define interruptions in a block. These can be used for breaks or attention checks. Interruptions can be deterministic or random."},"LibraryConfig":{"additionalProperties":false,"description":"LibraryConfig is used to define the properties of a library configuration. This is a JSON object with three main components: baseComponents, components, and the sequences. Libraries are useful for defining components and sequences of these components that are to be reused across multiple studies. We (the reVISit team) provide several libraries that can be used in your study configurations. Check the public/libraries folder in the reVISit-studies repository for available libraries. We also plan to accept community contributions for libraries. If you have a library that you think would be useful for others, please reach out to us. We would love to include it in our repository.\\n\\nBelow is the general template that should be followed when constructing a Library configuration file.\\n\\n```js {  \\"$schema\\": \\"https://raw.githubusercontent.com/revisit-studies/study/v2.0.1/src/parser/LibraryConfigSchema.json\\",  \\"baseComponents\\": {    // BaseComponents here are defined exactly as is in the StudyConfig  },  \\"components\\": {    // Components here are defined exactly as is in the StudyConfig  },  \\"sequences\\": {   // Sequences here are defined as \\"key\\": \\"value\\" pairs where the key is the name of the sequence and the value is a ComponentBlock, just like in the StudyConfig  } } ```","properties":{"$schema":{"description":"A required json schema property. This should point to the github link for the version of the schema you would like. The `$schema` line is used to verify the schema. If you\'re using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration. See examples for more information","type":"string"},"baseComponents":{"$ref":"#/definitions/BaseComponents","description":"The base components that are used in the study. These components can be used to template other components. See [BaseComponents](../../type-aliases/BaseComponents) for more information."},"components":{"additionalProperties":{"anyOf":[{"$ref":"#/definitions/IndividualComponent"},{"$ref":"#/definitions/InheritedComponent"}]},"description":"The components that are used in the study. They must be fully defined here with all properties. Some properties may be inherited from baseComponents.","type":"object"},"description":{"description":"A description of the library.","type":"string"},"doi":{"description":"The DOI of the paper where the content of the library is based on.","type":"string"},"externalLink":{"description":"The external link to the paper/website where the content of the library is based on.","type":"string"},"reference":{"description":"The reference to the paper where the content of the library is based on.","type":"string"},"sequences":{"additionalProperties":{"$ref":"#/definitions/ComponentBlock"},"description":"The order of the components in the study. This might include some randomness.","type":"object"}},"required":["$schema","description","components","sequences"],"type":"object"},"LikertResponse":{"additionalProperties":false,"description":"The LikertResponse interface is used to define the properties of a likert response. LikertResponses render as radio buttons with a user specified number of options, which can be controlled through the numItems. For example, numItems: 5 will render 5 radio buttons, and numItems: 7 will render 7 radio buttons. LikertResponses can also have a description, and left and right labels. The left and right labels are used to label the left and right ends of the likert scale with values such as \'Strongly Disagree\' and \'Strongly Agree\'.\\n\\nExample for a five-point Likert Scale:\\n\\n```js { \\"id\\": \\"q-satisfaction\\", \\"prompt\\": \\"Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable).\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"likert\\", \\"leftLabel\\": \\"Not Enjoyable\\", \\"rightLabel\\": \\"Very Enjoyable\\", \\"numItems\\": 5 } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"leftLabel":{"description":"The left label of the likert scale. E.g Strongly Disagree","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"numItems":{"description":"The number of options to render.","type":"number"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"rightLabel":{"description":"The right label of the likert scale. E.g Strongly Agree","type":"string"},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"likert","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","numItems","prompt","type"],"type":"object"},"LongTextResponse":{"additionalProperties":false,"description":"The LongTextResponse interface is used to define the properties of a long text response. LongTextResponses render as a text area that accepts any text and can optionally have a placeholder. ```js { \\"id\\": \\"q-name\\", \\"prompt\\": \\"What is your first name?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"longText\\", \\"placeholder\\": \\"Please enter your first name\\" } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"longText","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"MarkdownComponent":{"additionalProperties":false,"description":"The MarkdownComponent interface is used to define the properties of a markdown component. The components can be used to render many different things, such as consent forms, instructions, and debriefs. Additionally, you can use the markdown component to render images, videos, and other media, with supporting text. Markdown components can have responses (e.g. in a consent form), or no responses (e.g. in a help text file). Here\'s an example with no responses for a simple help text file:\\n\\n```js { \\"type\\": \\"markdown\\", \\"path\\": \\"<study-name>/assets/help.md\\", \\"response\\": [] } ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"path":{"description":"The path to the markdown file. This should be a relative path from the public folder.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"markdown","type":"string"}},"required":["path","response","type"],"type":"object"},"MatrixResponse":{"additionalProperties":false,"description":"The MatrixResponse interface is used to define the properties of a matrix radio or matrix checkbox response. Question options are rendered as rows of the matrix, each row containing its own radio/checkbox group. Answer options are rendered as column headers of the matrix. These can be customized by passing in the custom strings into the answer options. Alternatively, `answerOptions` can be set to one of the following custom strings: \'satisfaction5\',\'satisfaction7\', \'likely5\', \'likely7\'. This will automatically generate the appropriate headers for the matrix.\\n\\nExample for a 5-scale satisfaction matrix with three questions:\\n\\n```js { \\"id\\": \\"multi-satisfaction\\", \\"prompt\\": \\"Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable) for the following items.\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"matrix-radio\\", \\"answerOptions\\": \\"satisfaction5\\", \\"questionOptions\\": [  \\"The tool we created\\",  \\"The technique we developed\\",  \\"The authors of the tools\\" ] } ```\\n\\nHere\'s an example using custom columns (answerOptions):\\n\\n```js { \\"id\\": \\"multi-custom\\", \\"prompt\\": \\"Which categories do the following items belong to?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"matrix-checkbox\\", \\"answerOptions\\": [  \\"Has Legs\\",  \\"Has Wings\\",  \\"Can Swim\\" ], \\"questionOptions\\": [  \\"Dog\\",  \\"Snake\\",  \\"Eagle\\",  \\"Salmon\\",  \\"Platypus\\" ]\\n\\n} ```","properties":{"answerOptions":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"const":"likely5","type":"string"},{"const":"likely7","type":"string"},{"const":"satisfaction5","type":"string"},{"const":"satisfaction7","type":"string"}],"description":"The answer options (columns). We provide some shortcuts for a likelihood scale (ranging from highly unlikely to highly likely) and a satisfaction scale (ranging from highly unsatisfied to highly satisfied) with either 5 or 7 options to choose from."},"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"questionOptions":{"description":"The question options (rows) are the prompts for each response you\'d like to record.","items":{"type":"string"},"type":"array"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"enum":["matrix-radio","matrix-checkbox"],"type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["answerOptions","id","prompt","questionOptions","type"],"type":"object"},"NumberOption":{"additionalProperties":false,"description":"The NumberOption interface is used to define the options for a slider response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.","properties":{"label":{"description":"The label displayed to participants.","type":"string"},"value":{"description":"The value stored in the participant\'s data.","type":"number"}},"required":["label","value"],"type":"object"},"NumericalResponse":{"additionalProperties":false,"description":"The NumericalResponse interface is used to define the properties of a numerical response. NumericalResponses render as a text input that only accepts numbers, and can optionally have a min and max value, or a placeholder.\\n\\nExample: ```js { \\"id\\": \\"q-numerical\\", \\"prompt\\": \\"Numerical example\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"numerical\\", \\"placeholder\\": \\"Enter your age, range from 0 - 120\\", \\"max\\": 120, \\"min\\": 0 } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"max":{"description":"The maximum value that is accepted in the input.","type":"number"},"min":{"description":"The minimum value that is accepted in the input.","type":"number"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"numerical","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"QuestionnaireComponent":{"additionalProperties":false,"description":"A QuestionnaireComponent is used to render simple questions that require a response. The main use case of this component type is to ask participants questions when you don\'t need to render a stimulus. Please note, that even though we\'re not using a stimulus, the responses still require a `location`. For example this could be used to collect demographic information from a participant using the following snippet:\\n\\n```js { \\"type\\": \\"questionnaire\\", \\"response\\": [  {    \\"id\\": \\"gender\\",    \\"prompt\\": \\"Gender:\\",    \\"location\\": \\"belowStimulus\\",    \\"type\\": \\"checkbox\\",    \\"options\\": [\\"Man\\", \\"Woman\\", \\"Genderqueer\\", \\"Third-gender\\", ...]  } ] } ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"questionnaire","type":"string"}},"required":["response","type"],"type":"object"},"RadioResponse":{"additionalProperties":false,"description":"The RadioResponse interface is used to define the properties of a radio response. Radios have only one allowable selection. RadioResponses render as a radio input with user specified options, and optionally left and right labels.\\n\\nExample: ```js { \\"id\\": \\"q-radio\\", \\"prompt\\": \\"Radio button example\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"radio\\", \\"options\\": [\\"Option 1\\", \\"Option 2\\"] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"horizontal":{"description":"Whether to render the radio buttons horizontally. Defaults to false, so they render horizontally.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"leftLabel":{"description":"The left label of the radio group. Used in Likert scales for example","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"options":{"description":"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.","items":{"anyOf":[{"$ref":"#/definitions/StringOption"},{"type":"string"}]},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"rightLabel":{"description":"The right label of the radio group. Used in Likert scales for example","type":"string"},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"radio","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"},"withOther":{"description":"Whether to render the radios with an \\"other\\" option.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"RandomInterruption":{"additionalProperties":false,"description":"The RandomInterruption interface is used to define an interruption that will be shown randomly in the block.\\n\\nFor example, if you want to show a single interruption randomly in the block, you would set `\\"spacing\\"` to \\"random\\" and `\\"numInterruptions\\"` to 1. If you want to show 3 interruptions randomly in the block, you would set `\\"spacing\\"` to \\"random\\" and `\\"numInterruptions\\"` to 3.\\n\\nThe components property is an array of the components that will be inserted randomly in the block. These components should reference components in the StudyConfig.components section of the config.\\n\\nHere\'s an example of how to use the RandomInterruption:\\n\\n```js { \\"order\\": \\"fixed\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"component6\\" ], \\"interruptions\\": [ {   \\"spacing\\": \\"random\\",   \\"numInterruptions\\": 3,   \\"components\\": [     \\"interruption1\\",     \\"interruption2\\"   ] } ] } ```\\n\\nThe resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"interruption1\\", \\"interruption2\\", \\"component2\\", \\"interruption1\\", \\"interruption2\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption1\\", \\"interruption2\\", \\"component6], [\\"component1\\", \\"interruption1\\", \\"interruption2\\", \\"component2\\", \\"interruption1\\", \\"interruption2\\", \\"component3\\", \\"component4\\", \\"interruption1\\", \\"interruption2\\", \\"component5\\", \\"component6], [\\"component1\\", \\"component2\\" \\"interruption1\\", \\"interruption2\\", \\"component3\\", \\"interruption1\\", \\"interruption2\\", \\"component4\\", \\"component5\\", \\"interruption1\\", \\"interruption2\\", \\"component6], ... ] ```","properties":{"components":{"description":"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.","items":{"type":"string"},"type":"array"},"numInterruptions":{"description":"The number of times the interruption will be randomly added","type":"number"},"spacing":{"const":"random","description":"If spacing is set to random, reVISit will add interruptions randomly. These interruptions will not ever be displayed as the first component in the block.","type":"string"}},"required":["spacing","numInterruptions","components"],"type":"object"},"ReactComponent":{"additionalProperties":false,"description":"The ReactComponent interface is used to define the properties of a react component. This component is used to render react code with certain parameters. These parameters can be used within your react code to render different things.\\n\\nUnlike other types of components, the path for a React component is relative to the `src/public/` folder. Similar to our standard assets, we suggest creating a folder named `src/public/{studyName}/assets` to house all of the React component assets for a particular study. Your React component which you link to in the path must be default exported from its file.\\n\\nReact components created this way have a generic prop type passed to the component on render, `<StimulusParams<T>>`, which has the following types.\\n\\n```ts { parameters: T; setAnswer: ({ status, provenanceGraph, answers }: { status: boolean, provenanceGraph?: TrrackedProvenance, answers: Record<string, any> }) => void } ```\\n\\nparameters is the same object passed in from the ReactComponent type below, allowing you to pass options in from the config to your component. setAnswer is a callback function allowing the creator of the ReactComponent to programmatically set the answer, as well as the provenance graph. This can be useful if you don\'t use the default answer interface, and instead have something more unique.\\n\\nSo, for example, if I had the following ReactComponent in my config ```js { type: \'react-component\'; path: \'my_study/CoolComponent.tsx\'; parameters: {  name: \'Zach\';  age: 26; } } ```\\n\\nMy react component, CoolComponent.tsx, would exist in src/public/my_study/assets, and look something like this\\n\\n```ts export default function CoolComponent({ parameters, setAnswer }: StimulusParams<{name: string, age: number}>) { // render something } ```\\n\\nFor in depth examples, see the following studies, and their associated codebases. https://revisit.dev/study/demo-click-accuracy-test (https://github.com/revisit-studies/study/tree/2.0.0-rc7/src/public/demo-click-accuracy-test/assets) https://revisit.dev/study/example-brush-interactions (https://github.com/revisit-studies/study/tree/2.0.0-rc7/src/public/example-brush-interactions/assets)","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"additionalProperties":{},"description":"The parameters that are passed to the react component. These can be used within your react component to render different things.","type":"object"},"path":{"description":"The path to the react component. This should be a relative path from the src/public folder.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"react-component","type":"string"}},"required":["path","response","type"],"type":"object"},"ReactiveResponse":{"additionalProperties":false,"description":"The ReactiveResponse interface is used to define the properties of a reactive response. ReactiveResponses render as a list, that is connected to a WebsiteComponent, VegaComponent, or ReactComponent. When data is sent from the components, it is displayed in the list.\\n\\n```js { \\"id\\": \\"reactiveResponse\\", \\"prompt\\": \\"Answer clicked in the stimulus\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"reactive\\" } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"reactive","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"RepeatedComponentBlockCondition":{"additionalProperties":false,"description":"The RepeatedComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect repeated components. You might use this if you need to check if an attention check was failed multiple times. This is similar to the [ComponentBlockCondition](../ComponentBlockCondition), but it only checks a specific repeated component.\\n\\nHere\'s an example of how to use the RepeatedComponentBlockCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"name\\": \\"attentionCheck\\",   \\"check\\": \\"repeatedComponent\\",   \\"condition\\": \\"numIncorrect\\",   \\"value\\": 2,   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, when the number of incorrect responses to the repeated component with the name \\"attentionCheck\\" is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.","properties":{"check":{"const":"repeatedComponent","description":"The check we\'ll perform.","type":"string"},"condition":{"description":"The condition to check.","enum":["numCorrect","numIncorrect"],"type":"string"},"name":{"description":"The name of the repeated component to check (e.g. attentionCheck).","type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"},"value":{"description":"The number of correct or incorrect responses to check for.","type":"number"}},"required":["name","check","condition","value","to"],"type":"object"},"Response":{"anyOf":[{"$ref":"#/definitions/NumericalResponse"},{"$ref":"#/definitions/ShortTextResponse"},{"$ref":"#/definitions/LongTextResponse"},{"$ref":"#/definitions/LikertResponse"},{"$ref":"#/definitions/DropdownResponse"},{"$ref":"#/definitions/SliderResponse"},{"$ref":"#/definitions/RadioResponse"},{"$ref":"#/definitions/CheckboxResponse"},{"$ref":"#/definitions/ReactiveResponse"},{"$ref":"#/definitions/MatrixResponse"}]},"ResponseBlockLocation":{"enum":["sidebar","aboveStimulus","belowStimulus"],"type":"string"},"ShortTextResponse":{"additionalProperties":false,"description":"The ShortTextResponse interface is used to define the properties of a short text response. ShortTextResponses render as a text input that accepts any text and can optionally have a placeholder.\\n\\n```js { \\"id\\": \\"q-short-text\\", \\"prompt\\": \\"Short text example\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"shortText\\", \\"placeholder\\": \\"Enter your answer here\\" } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"shortText","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"SkipConditions":{"description":"The SkipConditions interface is used to define skip conditions. This is used to skip to a different component/block based on the response to a component or based on the number of correct/incorrect responses in a block. Skip conditions work recursively: if you have a nested block, the parent blocks\' skip conditions will be considered when computing the skip logic.\\n\\nSkip conditions are evaluated in the order they are defined in the array. If a condition is met, the participant will be redirected to the component or block specified in the `\\"to\\"` property. If no conditions are met, the participant will continue to the next component in the sequence.\\n\\nSkip conditions allow you to jump to a different component or block. If you intend to skip to a block, you should specify a block id in the sequence. If you intend to skip to a component, you should specify a component id. Skipping backwards is not supported. Skipping to a repeated component will skip to the first instance of the component after the component that triggered the skip.\\n\\nPlease see the interface definitions for more specific information on the different types of skip conditions.","items":{"anyOf":[{"$ref":"#/definitions/IndividualComponentSingleResponseCondition"},{"$ref":"#/definitions/IndividualComponentAllResponsesCondition"},{"$ref":"#/definitions/ComponentBlockCondition"},{"$ref":"#/definitions/RepeatedComponentBlockCondition"}]},"type":"array"},"SliderResponse":{"additionalProperties":false,"description":"The SliderResponse interface is used to define the properties of a slider response. SliderResponses render as a slider input with user specified steps. For example, you could have steps of 0, 50, and 100.\\n\\nExample: ```js { \\"id\\": \\"q-slider\\", \\"prompt\\": \\"How are you feeling?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"slider\\", \\"options\\": [  {    \\"label\\": \\"Bad\\",    \\"value\\": 0  },  {    \\"label\\": \\"OK\\",    \\"value\\": 50  },  {    \\"label\\": \\"Good\\",    \\"value\\": 100  } ] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"options":{"description":"This defines the steps in the slider and the extent of the slider as an array of objects that have a label and a value.","items":{"$ref":"#/definitions/NumberOption"},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"slider","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"StringOption":{"additionalProperties":false,"description":"The StringOption interface is used to define the options for a dropdown, radio, or checkbox response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.","properties":{"label":{"description":"The label displayed to participants.","type":"string"},"value":{"description":"The value stored in the participant\'s data.","type":"string"}},"required":["label","value"],"type":"object"},"VegaComponent":{"anyOf":[{"$ref":"#/definitions/VegaComponentPath"},{"$ref":"#/definitions/VegaComponentConfig"}]},"VegaComponentConfig":{"additionalProperties":false,"description":"The VegaComponentConfig interface is used to define the properties of a Vega Component. This component is used to render a Vega/Vega-Lite Component by adding Vega/Vega-Lite specs within the reVISit config itself.\\n\\nTo do this, would use the following snippet: ```js { \\"type\\": \\"vega\\", \\"config\\": { ... vega specs here ...}, }\\n\\nIIf you are using Vega, you can use signals with `revisitAnswer` to send the user\'s responses back to the reVISit. For example, you can use the following snippet in your Vega spec\'s signals section: ```js { \\"signals\\": [  {    \\"name\\": \\"revisitAnswer\\",    \\"value\\": {},    \\"on\\": [      {        \\"events\\": \\"rect:click\\",        \\"update\\": \\"{responseId: \'vegaDemoResponse1\', response: datum.category}\\"      }    ]  } ] } In this example, when a user clicks on a rectangle in the Vega chart, the `revisitAnswer` signal is updated with the responseId and response. ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"config":{"description":"The vega or vega-lite configuration.","type":"object"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"vega","type":"string"}},"required":["config","response","type"],"type":"object"},"VegaComponentPath":{"additionalProperties":false,"description":"The VegaComponentPath interface is used to define the properties of a Vega Component. This component is used to render a Vega/Vega-Lite Component with path pointing to your Vega/Vega-Lite specs file.\\n\\nFor example, to render a vega based stimuli with a path of `<study-name>/assets/vega.spec.json`, you would use the following snippet: ```js { \\"type\\": \\"vega\\", \\"path\\": \\"<study-name>/assets/vega.spec.json\\", } ```\\n\\nIf you are using Vega, you can use signals with `revisitAnswer` to send the user\'s responses back to the reVISit. For example, you can use the following snippet in your Vega spec file\'s signals section: ```js { \\"signals\\": [  {    \\"name\\": \\"revisitAnswer\\",    \\"value\\": {},    \\"on\\": [      {        \\"events\\": \\"rect:click\\",        \\"update\\": \\"{responseId: \'vegaDemoResponse1\', response: datum.category}\\"      }    ]  } ] } In this example, when a user clicks on a rectangle in the Vega chart, the `revisitAnswer` signal is updated with the responseId and response. This signal is then passed to reVISit as the participant\'s response. ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"path":{"description":"The path to the vega file. This should be a relative path from the public folder.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"vega","type":"string"}},"required":["path","response","type"],"type":"object"},"WebsiteComponent":{"additionalProperties":false,"description":"The WebsiteComponent interface is used to define the properties of a website component. A WebsiteComponent is used to render an iframe with a website inside of it. This can be used to display an external website or an html file that is located in the public folder.\\n\\n```js { \\"type\\": \\"website\\", \\"path\\": \\"<study-name>/assets/website.html\\", } ```\\n\\nTo pass a data from the config to the website, you can use the `parameters` field as below:\\n\\n```js { \\"type\\": \\"website\\", \\"path\\": \\"<study-name>/website.html\\", \\"parameters\\": {  \\"barData\\": [0.32, 0.01, 1.2, 1.3, 0.82, 0.4, 0.3] } \\"response\\": [  {    \\"id\\": \\"barChart\\",    \\"prompt\\": \\"Your selected answer:\\",    \\"location\\": \\"belowStimulus\\",    \\"type\\": \\"reactive\\"  } ], } ``` In the `website.html` file, by including `revisit-communicate.js`, you can use the `Revisit.onDataReceive` method to retrieve the data, and `Revisit.postAnswers` to send the user\'s responses back to the reVISit as shown in the example below:\\n\\n```html <script src=\\"../../revisitUtilities/revisit-communicate.js\\"><\/script> <script> Revisit.onDataReceive((data) => {  const barData = data[\'barData\'];  ... });\\n\\n// Call out that \'barChart\' needs to match ID in \'response\' object Revisit.postAnswers({ barChart: userAnswer }); <\/script> ```\\n\\n If the html website implements Trrack library for provenance tracking, you can send the provenance graph back to reVISit by calling `Revisit.postProvenanceGraph` as shown in the example below. You need to call this each time the Trrack state is updated so that reVISit is kept aware of the changes in the provenance graph.\\n\\n```js const trrack = initializeTrrack({ initialState, registry });\\n\\n... Revisit.postProvenance(trrack.graph.backend); ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"additionalProperties":{},"description":"The parameters that are passed to the website (iframe). These can be used within your website to render different things.","type":"object"},"path":{"description":"The path to the website. This should be a relative path from the public folder or could be an external website.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"website","type":"string"}},"required":["path","response","type"],"type":"object"}}'),sVt={$ref:nVt,$schema:rVt,definitions:iVt},j5e=new Qee;j5e.addSchema(sVt);const oVt=j5e.getSchema("#/definitions/LibraryConfig");function U5e(e,t){return{...e,components:e.components.map(n=>typeof n=="object"?U5e(n,t):`$${t}.components.${n}`)}}function z5e(e,t,n=[]){return{...e,components:e.components.map(r=>{if(typeof r=="object")return z5e(r,t);const i=r.includes(".se.")?".se.":r.includes(".sequences.")?".sequences.":!1;if(typeof r=="string"&&r.startsWith("$")&&i){const[s,o]=r.split(i),a=s.slice(1);if(!t[a]){const c={message:`Library ${a} not found in imported libraries`,instancePath:"",params:{action:"check the library name"}};return n.push(c),r}let l=t[a].sequences[o];if(!l){const c={message:`Sequence ${o} not found in library ${s}`,instancePath:"",params:{action:"check the sequence name"}};return n.push(c),r}return l=U5e(l,a),l}return r})}}function aVt(e,t,n){Object.entries(n).forEach(([r,i])=>{Object.entries(i.components).forEach(([s,o])=>{var a;GT(o)&&!((a=i.baseComponents)!=null&&a[o.baseComponent])&&t.push({message:`Base component \`${o.baseComponent}\` is not defined in baseComponents object in library \`${r}\``,instancePath:`/importedLibraries/${r}/components/${s}`,params:{action:"add the base component to the baseComponents object"}})})})}function uVt(e,t){let n=!1,r;try{r=JSON.parse(e),n=oVt(r)}catch{n=!1}const i=[],s=[];return r?n||i.push({message:"Library config is not valid",instancePath:"",params:{action:"fix the errors in the library config"}}):i.push({message:`Could not find library \`${t}\``,instancePath:"/importedLibraries/",params:{action:"make sure the library is in the correct location"}}),{...r,errors:i,warnings:s}}async function lVt(e){const t=await(await fetch(`${ju}libraries/${e}/config.json`)).text();return uVt(t,e)}async function cVt(e,t,n){const r=e.map(async s=>{const o=await lVt(s);return o.errors&&t.push(...o.errors),o.warnings&&n.push(...o.warnings),[s,o]}),i=Object.fromEntries(await Promise.all(r));return Object.entries(i).forEach(([s,o])=>{o.components||delete i[s]}),e.forEach(s=>{i[s]&&(i[s].components=Object.fromEntries(Object.entries(i[s].components).map(([o,a])=>{if(GT(a)){const u=dSe.merge({},i[s].baseComponents[a.baseComponent],a);return delete u.baseComponent,[[`$${s}.components.${o}`,u],[`$${s}.co.${o}`,u]]}return[[`$${s}.components.${o}`,a],[`$${s}.co.${o}`,a]]}).reduce((o,[a,u])=>(o.push(a,u),o),[])))}),i}const V5e=new Qee;V5e.addSchema(tVt);const tme=V5e.getSchema("#/definitions/GlobalConfig"),H5e=new Qee;H5e.addSchema(Qzt);const nme=H5e.getSchema("#/definitions/StudyConfig");function fVt(e){const t=[];return[e.configsList.every(r=>e.configs[r]===void 0?(t.push({message:`Config ${r} is not defined in configs object, but is present in configsList`}),!1):!0),t]}function dVt(e){const t=JSON.parse(e),n=tme(t),r=fVt(t);if(n&&r[0])return t;throw console.error("Global config parsing errors",[...tme.errors||[],...r[1]]),Error("There was an issue validating your file global.json")}function q5e(e,t,n=[]){if(e.components.length===0){n.push({message:"Sequence has an empty components array",instancePath:"/sequence/",params:{action:"remove empty components block"}});return}e.id&&t.map((i,s)=>i===e.id?s:null).forEach(i=>{i!==null&&t.splice(i,1)}),e.components.forEach(r=>{typeof r=="string"?t.includes(r)&&t.map((s,o)=>s===r?o:null).forEach(s=>{s!==null&&t.splice(s,1)}):q5e(r,t,n)}),e.skip&&t.push(...e.skip.map(r=>r.to).filter(r=>r!=="end"))}function hVt(e,t){const n=[],r=[];aVt(e,n,t),Object.entries(e.components).forEach(([o,a])=>{var u;GT(a)&&!((u=e.baseComponents)!=null&&u[a.baseComponent])&&n.push({message:`Base component \`${a.baseComponent}\` is not defined in baseComponents object`,instancePath:`/components/${o}`,params:{action:"add the base component to the baseComponents object"}})});const i=uwe(e.sequence);i.forEach(o=>{var a;e.components[o]||n.push({message:(a=e.baseComponents)!=null&&a[o]?`Component \`${o}\` is a base component and cannot be used in the sequence`:`Component \`${o}\` is not defined in components object`,instancePath:"/sequence/",params:{action:"add the component to the components object"}})}),Object.keys(e.components).filter(o=>!i.includes(o)&&!o.includes(".se.")&&!o.includes(".sequences.")&&!o.includes(".co.")&&!o.includes(".components.")).forEach(o=>{r.push({message:`Component \`${o}\` is defined in components object but not used in the sequence`,instancePath:"/components/",params:{action:"remove the component from the components object or add it to the sequence"}})});const s=[];return q5e(e.sequence,s),s.forEach(o=>{n.push({message:`Skip target \`${o}\` does not occur after the skip block it is used in`,instancePath:"/sequence/",params:{action:"add the target to the sequence after the skip block"}})}),{errors:n,warnings:r}}async function Jee(e){let t=!1,n;try{n=JSON.parse(e),t=nme(n)}catch{t=!1}let r=nme.errors||[],i=[];if(t&&n){const s=n.importedLibraries||[],o=await cVt(s,r,i);Object.values(o).forEach(l=>{n.components={...n.components,...l.components},n.baseComponents={...n.baseComponents,...l.components}}),n.sequence=z5e(n.sequence,o,r);const{errors:a,warnings:u}=hVt(n,o);r=[...r,...a],i=[...i,...u]}else r=[...r,{message:"There was an issue validating your config file",instancePath:"root",params:{action:"fix the errors in your file or make sure the global config references the right file path"}}];return{...n,errors:r,warnings:i}}async function pVt(e){const t=await(await fetch(`${ju}${e}`)).text();return await Jee(t)}async function Zee(e,t){const n=t.configsList.find(r=>P1e(r)===e);if(n){const r=t.configs[n];return await pVt(`${r.path}`)}return null}async function mVt(e){const t={},n=e.configsList.map(async i=>Zee(i,e)),r=await Promise.all(n);return e.configsList.forEach((i,s)=>{t[i]=r[s]}),t}function gVt({globalConfig:e}){const t=Uw(),[n,r]=z.useState(null),i=e.configsList.includes(t)||t==="__revisit-widget";z.useEffect(()=>{if(t!=="__revisit-widget")return Zee(t,e).then(p=>{r(p)}),()=>{};if(e&&t){const p=m=>{m.data.type==="revisitWidget/CONFIG"&&Jee(m.data.payload).then(async g=>{r(g);const b=await Upe(g);window.parent.postMessage({type:"revisitWidget/SEQUENCE_ARRAY",payload:b},"*")})};return window.addEventListener("message",p),window.parent.postMessage({type:"revisitWidget/READY"},"*"),()=>{window.removeEventListener("message",p)}}return()=>{}},[e,t]);const[s,o]=z.useState([]),[a,u]=z.useState(null),{storageEngine:l}=Yo(),[c]=N1(),f=z.useMemo(()=>c.get("participantId"),[c]);z.useEffect(()=>{async function p(){if(!l||!n||!t)return;await l.initializeStudyDb(t,n),await l.getSequenceArray()||await l.setSequenceArray(await Upe(n));const g=n.uiConfig.urlParticipantIdParam&&c.get(n.uiConfig.urlParticipantIdParam)||void 0,b=Object.fromEntries(c.entries()),y=await fetch("https://api.ipify.org?format=json").catch(I=>""),x=y instanceof Response?await y.json():{ip:""},w={language:navigator.language,userAgent:navigator.userAgent,resolution:{width:window.screen.width,height:window.screen.height,availHeight:window.screen.availHeight,availWidth:window.screen.availWidth,colorDepth:window.screen.colorDepth,orientation:window.screen.orientation.type,pixelDepth:window.screen.pixelDepth},ip:x.ip},T=await l.initializeParticipantSession(t,b,n,w,f||g),A=await l.getModes(t),k=await aat(t,n,T.sequence,w,T.answers,A,T.participantId);u(k),o([{element:R.jsx(LUt,{}),children:[{path:"/",element:R.jsx(S5e,{to:o0(0),replace:!0})},{path:"/:index",element:n.errors.length>0?R.jsxs(R.Fragment,{children:[R.jsx(wo,{order:2,mb:8,children:"Error loading config"}),R.jsx(TP,{issues:n.errors,type:"error"})]}):R.jsx(rUt,{})}]}])}p()},[l,n,t,c,f]);const d=g1e(s);let h=null;return i?s.length===0?h=R.jsx(ih,{visible:!0}):h=d&&a?R.jsx(dwe.Provider,{value:a,children:R.jsx(aot,{store:a.store,children:d})}):R.jsx(gb,{}):h=R.jsx(gb,{}),h}function K8({studyIds:e}){const t=M0(),{studyId:n}=rg(),r=cp(),i=e.map(o=>({value:o,label:o})).sort((o,a)=>o.label.localeCompare(a.label)),s=r.pathname.includes("analysis");return R.jsx(hs.Header,{p:"md",children:R.jsxs(Dm,{mt:-7,align:"center",children:[R.jsx(Dm.Col,{span:6,children:R.jsxs(An,{align:"center",onClick:()=>t("/"),style:{cursor:"pointer"},children:[R.jsx(Hb,{w:40,src:`${ju}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),R.jsx(Jd,{w:"md"}),R.jsx(wo,{order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:s?"ReVISit Analytics Platform":"ReVISit Studies"})]})}),R.jsx(Dm.Col,{span:6,children:R.jsxs(An,{justify:"flex-end",direction:"row",children:[s&&R.jsxs(R.Fragment,{children:[R.jsx(wT,{allowDeselect:!1,placeholder:"Select Study",data:i,value:n,onChange:o=>t(`/analysis/stats/${o}`),mr:16}),R.jsx(Bn,{component:"a",href:`${ju}${n}`,target:"_blank",leftSection:R.jsx(C1e,{}),mr:"sm",children:"Go to Study"})]}),R.jsx(k1e,{onClick:()=>t("/settings"),style:{cursor:"pointer",marginTop:s?6:void 0}})]})})]})})}function W5e({visibleParticipants:e,studyId:t,gap:n,fileName:r}){const[i,{open:s,close:o}]=uq(!1),[a,u]=z.useState([]),l=async()=>typeof e=="function"?await e():e,c=async()=>{const d=await l(),h=r?`${r}.json`:`${t}_all.json`;zK(JSON.stringify(d,null,2),h)},f=async()=>{const d=await l();u(d),s()};return R.jsxs(R.Fragment,{children:[R.jsxs(co,{style:{gap:n},children:[R.jsx(Ys,{label:"Download all participants data as JSON",children:R.jsx(Bn,{variant:"light",disabled:e.length===0&&typeof e!="function",onClick:c,px:4,children:R.jsx(Vze,{})})}),R.jsx(Ys,{label:"Download all participants data as a tidy CSV",children:R.jsx(Bn,{variant:"light",disabled:e.length===0&&typeof e!="function",onClick:f,px:4,children:R.jsx(R1e,{})})})]}),i&&a.length>0&&R.jsx(hbt,{opened:i,close:o,filename:r?`${r}_tidy.csv`:`${t}_all_tidy.csv`,data:a,studyId:t})]})}function yVt({cellData:e}){return Number.isFinite(e.endTime)&&Number.isFinite(e.startTime)?R.jsx(zn.Td,{children:R.jsx(Jf,{miw:100,children:e.timedOut?R.jsx(Nt,{children:"Timed out"}):Object.entries(e.answer).map(([t,n])=>R.jsxs(He,{children:[R.jsxs(Nt,{fw:700,span:!0,children:[" ",`${t}: `]}),typeof n=="object"?R.jsx(Nt,{size:"xs",component:"pre",span:!0,children:`${JSON.stringify(n,null,2)}`}):R.jsx(Nt,{span:!0,children:n})]},`cell-${t}`))})}):R.jsx(zn.Td,{children:"N/A"})}function rme({cellData:e}){const t=(e.endTime-e.startTime)/1e3,n=RSe(e);return Number.isFinite(e.endTime)&&Number.isFinite(e.startTime)?R.jsxs(zn.Td,{children:[t.toFixed(1)," ","s",n&&R.jsxs(R.Fragment,{children:[R.jsx("br",{})," ","(",(n/1e3).toFixed(1)," ","s)"]})]}):R.jsx(zn.Td,{children:"N/A"})}function vVt(e){const{metaData:t}=e;return R.jsx(zn.Td,{children:R.jsx(UW,{w:200,hideLabel:"hide",maxHeight:50,showLabel:"more",children:R.jsxs(Jf,{gap:"xs",children:[R.jsxs(He,{children:["IP:"," ",t.ip]}),R.jsxs(He,{children:["Language:"," ",t.language]}),R.jsxs(He,{children:["Resolution:"," ",JSON.stringify(t.resolution)]}),R.jsxs(He,{children:["User Agent:"," ",t.userAgent]})]})})})}function bVt({visibleParticipants:e,studyConfig:t,refresh:n}){const{storageEngine:r}=Yo(),{studyId:i}=rg(),{user:s}=jT(),o=async(w,T)=>{if(r&&i)if(s.isAdmin){const A=T===""?"Rejected by admin":T;await r.rejectParticipant(i,w,A),await n()}else console.warn("You are not authorized to perform this action.")},[a,u]=z.useState([]),[l,c]=z.useState(!1),[f,d]=z.useState(!1),[h,p]=z.useState(""),m=async()=>{c(!0),d(!1);const w=a.map(async T=>await o(T,h));await Promise.all(w),u([]),await n(),c(!1)};function g(w){w==="all"?a.length===e.length?u([]):u(e.map(T=>T.participantId)):a.includes(w)?u(a.filter(T=>T!==w)):u([...a,w])}const b=fwe(t.sequence),y=[R.jsx(zn.Th,{children:R.jsx(An,{justify:"center",children:R.jsx(nc,{mb:-4,checked:a.length===e.length,onChange:()=>g("all")})})},"action"),R.jsx(zn.Th,{children:"ID"},"ID"),R.jsx(zn.Th,{children:"Status"},"status"),R.jsx(zn.Th,{children:"Tags"},"tags"),R.jsx(zn.Th,{children:"Meta"},"meta"),...b.flatMap(w=>[R.jsx(zn.Th,{children:w.componentName},`header-${w.componentName}-${w.timesSeenInBlock}`),R.jsxs(zn.Th,{children:[R.jsx("span",{style:{whiteSpace:"nowrap"},children:w.componentName})," ","Duration (clean)"]},`header-${w.componentName}-${w.timesSeenInBlock}-duration`)]),R.jsx(zn.Th,{children:"Total Duration (clean)"},"total-duration")],x=e.map(w=>R.jsxs(zn.Tr,{children:[R.jsx(zn.Td,{children:R.jsx(An,{justify:"center",children:R.jsx(nc,{mb:-4,checked:a.includes(w.participantId),onChange:()=>g(w.participantId)})})}),R.jsx(zn.Td,{style:{whiteSpace:"nowrap"},children:w.participantId}),R.jsx(zn.Td,{children:R.jsxs(An,{direction:"column",miw:100,children:[R.jsxs(An,{direction:"row",align:"center",children:[w.rejected?R.jsx(Ys,{label:"Rejected",children:R.jsx(hR,{size:16,color:"red",style:{marginBottom:-3}})}):w.completed?R.jsx(Ys,{label:"Completed",children:R.jsx(f9,{size:16,color:"teal",style:{marginBottom:-3}})}):R.jsx(Ys,{label:"In Progress",children:R.jsx(A1e,{size:16,color:"orange",style:{marginBottom:-3}})}),!w.completed&&R.jsxs(Nt,{size:"sm",mb:-1,ml:4,children:[(Object.entries(w.answers).filter(([T,A])=>A.endTime!==-1&&A.endTime!==void 0).length/(C0(w.sequence).length-1)*100).toFixed(2),"%"]})]}),w.rejected&&R.jsx(Nt,{mt:5,fz:10,children:w.rejected.reason})]})}),R.jsx(zn.Td,{children:R.jsx(An,{direction:"column",miw:100,children:(w.participantTags||[]).map(T=>R.jsxs(Nt,{fz:10,children:["-"," ",T]},`tag-${T}`))})}),w.metadata?R.jsx(vVt,{metaData:w.metadata}):R.jsx(zn.Td,{children:"N/A"}),b.map(T=>{const A=$Y(w.sequence,T.orderPath),k=A&&Object.entries(w.answers).sort((I,O)=>{const M=parseInt(I[0].slice(I[0].lastIndexOf("_")+1),10),L=parseInt(O[0].slice(O[0].lastIndexOf("_")+1),10);return M-L}).filter(([I])=>{const O=I.slice(0,I.lastIndexOf("_")),M=parseInt(I.slice(I.lastIndexOf("_")+1),10);return O===T.componentName&&M<=A[0].lastIndex&&M>=A[0].firstIndex});return k!==null&&k.length>=T.timesSeenInBlock+1&&k[T.timesSeenInBlock][1].endTime!==-1?R.jsxs(sr.Fragment,{children:[R.jsx(yVt,{cellData:k[T.timesSeenInBlock][1]}),R.jsx(rme,{cellData:k[T.timesSeenInBlock][1]})]},`cellgroup-${w.participantId}-${T.componentName}-${T.timesSeenInBlock}`):R.jsxs(sr.Fragment,{children:[R.jsx(zn.Td,{children:"N/A"}),R.jsx(zn.Td,{children:"N/A"})]},`cellgroup-${w.participantId}-${T.componentName}-${T.timesSeenInBlock}`)}),R.jsx(rme,{cellData:{startTime:Math.min(...Object.values(w.answers).filter(T=>T.endTime!==-1&&T.endTime!==void 0).map(T=>T.startTime)),endTime:Math.max(...Object.values(w.answers).filter(T=>T.endTime!==-1&&T.endTime!==void 0).map(T=>T.endTime)),answer:{},helpButtonClickedCount:0,incorrectAnswers:{},windowEvents:Object.values(w.answers).flatMap(T=>T.windowEvents),timedOut:!1}},`cell-${w.participantId}-total-duration`)]},w.participantId));return e.length>0?R.jsxs(R.Fragment,{children:[R.jsx(ih,{visible:l,overlayProps:{blur:2}}),R.jsxs(An,{justify:"space-between",mb:8,p:8,children:[R.jsx(co,{children:R.jsx(wT,{w:350,variant:"filled",placeholder:"Search for a participant ID",data:[...new Set(e.map(w=>w.participantId))],searchable:!0,value:null,leftSection:R.jsx(rVe,{size:14}),onChange:w=>w&&g(w)})}),R.jsxs(co,{children:[R.jsx(W5e,{visibleParticipants:e,studyId:i||""}),R.jsxs(Bn,{disabled:a.length===0||!s.isAdmin,onClick:()=>d(!0),color:"red",children:["Reject Participants (",a.length,")"]})]})]}),R.jsx(An,{direction:"column",style:{width:"100%",overflow:"auto"},children:R.jsxs(zn,{striped:!0,withTableBorder:!0,children:[R.jsx(zn.Thead,{children:R.jsx(zn.Tr,{children:y})}),R.jsx(zn.Tbody,{children:x})]})}),R.jsxs(Eo,{opened:f,onClose:()=>d(!1),title:R.jsxs(Nt,{children:["Reject Participants (",a.length,")"]}),children:[R.jsx(Ly,{label:"Please enter the reason for rejection.",onChange:w=>p(w.target.value)}),R.jsxs(An,{mt:"sm",justify:"right",children:[R.jsx(Bn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{d(!1),p("")},children:"Cancel"}),R.jsx(Bn,{color:"red",onClick:()=>m(),children:"Reject Participants"})]})]})]}):R.jsxs(R.Fragment,{children:[R.jsx(Jd,{h:"xl"}),R.jsx(An,{justify:"center",align:"center",children:R.jsx(Nt,{children:"No data available"})})]})}function xVt({studyId:e,refresh:t}){const[n,r]=z.useState(!1),[i,s]=z.useState(!1),[o,a]=z.useState(!1),[u,l]=z.useState(!1),[c,f]=z.useState(""),[d,h]=z.useState([]),[p,m]=z.useState(""),[g,b]=z.useState(""),[y,x]=z.useState(!1),[w,T]=z.useState(!1),{storageEngine:A}=Yo(),k=A,I=z.useCallback(async()=>{T(!0);const X=await k.getSnapshots(e);h(X),T(!1)},[k,e]);z.useEffect(()=>{I()},[I]);const O=async(X,...q)=>{x(!0);const te=await X(...q);te.status==="SUCCESS"?(I(),x(!1),await t(),te.notifications&&te.notifications.forEach(W=>{S4(W)})):(x(!1),S4({title:te.error.title,message:te.error.message,color:"red"}))},M=async()=>{await O(k.createSnapshot.bind(k),e,!1)},L=async()=>{m(""),r(!1),await O(k.createSnapshot.bind(k),e,!0)},H=async()=>{a(!1),await O(k.renameSnapshot.bind(k),c,g)},D=async X=>{await O(k.restoreSnapshot.bind(k),e,X)},B=async()=>{m(""),s(!1),await O(k.removeSnapshotOrLive.bind(k),c,!0)},U=async()=>{m(""),l(!1),await O(k.removeSnapshotOrLive.bind(k),e,!0)},G=()=>Kne({title:"Create a Snapshot",children:R.jsx(Nt,{mb:30,children:"This will create a snapshot of the live database without impacting the live data."}),labels:{confirm:"Create",cancel:"Cancel"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>M()}),ee=X=>Kne({title:"Restore Snapshot",children:R.jsx(Nt,{mb:30,children:"Restoring this snapshot will perform 2 actions. First, we will create a snapshot of the current live database, then we will restore the selected snapshot into the live database."}),labels:{confirm:"Restore",cancel:"Cancel"},confirmProps:{color:"red"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>D(X)}),ne=X=>{const q=/-snapshot-(.+)$/,te=X.match(q);return te&&te[1]?te[1].replace("T"," "):null},ue=async X=>{const q=X.slice(X.indexOf("-")+1);return await k.getAllParticipantsDataByStudy(q)};return R.jsxs(R.Fragment,{children:[R.jsx(ih,{visible:y}),R.jsxs(An,{justify:"space-between",align:"center",children:[R.jsxs(He,{style:{width:"70%"},children:[R.jsx(wo,{order:5,children:"Create a Snapshot"}),R.jsxs(Nt,{children:["This will create a snapshot of the live"," ",R.jsx(Nt,{span:!0,fw:700,children:e})," ","database. It will"," ",R.jsx(Nt,{span:!0,fw:700,fs:"italic",children:"not"})," ","remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),R.jsx(Ys,{label:"Create a snapshot",children:R.jsx(Bn,{onClick:G,children:"Snapshot"})})]}),R.jsx(Jd,{h:"lg"}),R.jsxs(An,{justify:"space-between",align:"center",children:[R.jsxs(He,{style:{width:"70%"},children:[R.jsx(wo,{order:5,children:"Archive Data"}),R.jsxs(Nt,{children:["This will create a snapshot of the live"," ",R.jsx(Nt,{span:!0,fw:700,children:e})," ","database. It will then remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),R.jsx(Ys,{label:"Snapshot and Delete Data",children:R.jsx(Bn,{color:"red",onClick:()=>r(!0),children:"Archive"})})]}),R.jsx(Jd,{h:"lg"}),R.jsxs(An,{justify:"space-between",align:"center",children:[R.jsxs(He,{style:{width:"70%"},children:[R.jsx(wo,{order:5,children:"Delete Data"}),R.jsxs(Nt,{children:["This will delete the live"," ",R.jsx(Nt,{span:!0,fw:700,children:e})," ","database. Since this does not create a snapshot the data will be permanently deleted and cannot be restored."]})]}),R.jsx(Ys,{label:"Delete Data",children:R.jsx(Bn,{color:"red",onClick:()=>l(!0),children:"Delete"})})]}),R.jsx(Jd,{h:"xl"}),R.jsxs(An,{direction:"column",children:[R.jsx(An,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:"xs",pb:"sm",children:R.jsx(wo,{order:5,children:"Snapshots"})}),R.jsxs(He,{style:{position:"relative"},children:[R.jsx(ih,{visible:w}),d.length>0?R.jsxs(zn,{children:[R.jsx(zn.Thead,{children:R.jsxs(zn.Tr,{children:[R.jsx(zn.Th,{children:"Snapshot Name"}),R.jsx(zn.Th,{children:"Date Created"}),R.jsx(zn.Th,{children:"Actions"})]})}),R.jsx(zn.Tbody,{children:d.map(X=>R.jsxs(zn.Tr,{children:[R.jsx(zn.Td,{children:X.alternateName}),R.jsx(zn.Td,{children:ne(X.originalName)}),R.jsx(zn.Td,{children:R.jsxs(An,{children:[R.jsx(Ys,{label:"Rename",children:R.jsx(Bn,{color:"green",variant:"light",px:4,style:{margin:"0px 5px"},onClick:()=>{a(!0),f(X.originalName)},children:R.jsx(Jze,{})})}),R.jsx(Ys,{label:"Restore Snapshot",children:R.jsx(Bn,{color:"blue",variant:"light",px:4,style:{margin:"0px 5px"},onClick:()=>{ee(X.originalName)},children:R.jsx(tVe,{})})}),R.jsx(Ys,{label:"Delete Snapshot",children:R.jsx(Bn,{color:"red",px:4,variant:"light",style:{margin:"0px 10px 0px 5px"},onClick:()=>{s(!0),f(X.originalName)},children:R.jsx(I1e,{})})}),R.jsx(W5e,{visibleParticipants:()=>ue(X.originalName),studyId:e,gap:"10px",fileName:X.alternateName})]})})]},X.originalName))})]}):R.jsx(Nt,{children:"No snapshots."})]})]}),R.jsxs(Eo,{opened:n,onClose:()=>{r(!1),m("")},title:R.jsx(Nt,{children:"Archive Data"}),children:[R.jsx(Nt,{mb:"sm",children:"This will create a snapshot of the live database and remove the data from the live database."}),R.jsx(Ly,{label:"To archive this data, please enter the name of the study.",placeholder:e,onChange:X=>m(X.target.value)}),R.jsxs(An,{mt:"sm",justify:"right",children:[R.jsx(Bn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{r(!1),m("")},children:"Cancel"}),R.jsx(Bn,{color:"red",onClick:L,disabled:p!==e,children:"Archive"})]})]}),R.jsxs(Eo,{opened:i,onClose:()=>{s(!1),m("")},title:R.jsx(Nt,{children:"Delete Snapshot"}),children:[R.jsxs(Nt,{mb:"sm",children:["This will permanently remove this snapshot. This action is"," ",R.jsx(Nt,{span:!0,fw:700,children:"irreversible"}),"."]}),R.jsx(Ly,{label:"To delete this snapshot, please enter the name of the study.",placeholder:e,onChange:X=>m(X.target.value)}),R.jsxs(An,{mt:"sm",justify:"right",children:[R.jsx(Bn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{s(!1),m("")},children:"Cancel"}),R.jsx(Bn,{color:"red",onClick:B,disabled:p!==e,children:"Delete"})]})]}),R.jsxs(Eo,{opened:o,onClose:()=>{a(!1),b("")},title:R.jsx(Nt,{children:"Rename Snapshot"}),children:[R.jsx(Ly,{label:"Enter the new name of the snapshot.",placeholder:c,onChange:X=>b(X.target.value)}),R.jsxs(An,{mt:"sm",justify:"right",children:[R.jsx(Bn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{a(!1),b("")},children:"Cancel"}),R.jsx(Bn,{color:"green",onClick:H,disabled:!g||g.length===0,children:"Rename"})]})]}),R.jsxs(Eo,{opened:u,onClose:()=>{l(!1),m("")},title:R.jsx(Nt,{children:"Delete Live Data"}),children:[R.jsxs(Nt,{mb:"sm",children:["This will permanently delete the live"," ",R.jsx(Nt,{span:!0,fw:700,children:e})," ","data. This action is"," ",R.jsx(Nt,{span:!0,fw:700,children:"irreversible"}),". Please consider using archive data to create a snapshot of the live data before deleting."]}),R.jsx(Ly,{label:"To delete this live data, please enter the name of the study.",placeholder:e,onChange:X=>m(X.target.value)}),R.jsxs(An,{mt:"sm",justify:"right",children:[R.jsx(Bn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{l(!1),m("")},children:"Cancel"}),R.jsx(Bn,{color:"red",onClick:U,disabled:p!==e,children:"Delete"})]})]})]})}function _Vt({studyId:e}){const{storageEngine:t}=Yo(),[n,r]=z.useState(!1),[i,s]=z.useState(!1),[o,a]=z.useState(!1),[u,l]=z.useState(!1);z.useEffect(()=>{(async()=>{if(t){const d=await t.getModes(e);s(d.dataCollectionEnabled),a(d.studyNavigatorEnabled),l(d.analyticsInterfacePubliclyAccessible),r(!0)}})()},[t,e]);const c=async(f,d)=>{t&&(await t.setMode(e,f,d),f==="dataCollectionEnabled"?s(d):f==="studyNavigatorEnabled"?a(d):f==="analyticsInterfacePubliclyAccessible"&&l(d))};return n&&R.jsxs(Jf,{children:[R.jsx(I_,{label:"Data Collection Enabled",checked:i,onChange:f=>c("dataCollectionEnabled",f.currentTarget.checked)}),R.jsx(I_,{label:"Study Navigator Enabled",checked:o,onChange:f=>c("studyNavigatorEnabled",f.currentTarget.checked)}),R.jsx(I_,{label:"Analytics Interface Publicly Accessible",checked:u,onChange:f=>c("analyticsInterfacePubliclyAccessible",f.currentTarget.checked)})]})}function wVt({studyId:e,refresh:t}){const{storageEngine:n}=Yo();return R.jsx(l1,{children:R.jsxs(Ql,{multiple:!0,variant:"contained",children:[R.jsxs(Ql.Item,{value:"ReVISit Modes",children:[R.jsx(Ql.Control,{children:R.jsx(wo,{order:5,children:"ReVISit Modes"})}),R.jsx(Ql.Panel,{children:R.jsx(_Vt,{studyId:e})})]},"modes"),R.jsxs(Ql.Item,{value:"Data Management",children:[R.jsx(Ql.Control,{disabled:(n==null?void 0:n.getEngine())==="localStorage",children:R.jsx(wo,{order:5,children:"Data Management"})}),R.jsx(Ql.Panel,{children:(n==null?void 0:n.getEngine())!=="localStorage"&&R.jsx(xVt,{studyId:e,refresh:t})})]},"dataManagement")]})})}function EVt({response:e,participantData:t,trialId:n,trialConfig:r}){const[i,{toggle:s}]=uq(!0),[o,a]=eR(),u=z.useMemo(()=>e.type==="metadata"?[]:t.map(d=>Object.entries(d.answers).filter(([h])=>h.slice(0,h.lastIndexOf("_"))===n)).map(d=>d.map(([,h])=>h.answer)).flat(),[t,e.type,n]),l=z.useMemo(()=>{var d;return e.type==="metadata"||(d=r.correctAnswer)==null?void 0:d.find(h=>h.id===e.id)},[e.id,e.type,r.correctAnswer]),c=z.useMemo(()=>{const f={height:"container",width:"container"};if(e.type==="shortText"||e.type==="longText")return{};if(e.type==="metadata"){const h=t.map(m=>Object.entries(m.answers).filter(([g])=>g.slice(0,g.lastIndexOf("_"))===n)).map(m=>m.filter(([g,b])=>b.endTime!==-1).map(([g,b])=>(b.endTime-b.startTime)/1e3)).flat();return{...f,data:{values:h},mark:"bar",encoding:{x:{field:"data",bin:!0,type:"quantitative",title:"Time (s)"},y:{aggregate:"count",type:"quantitative",title:"Count"}}}}const d={params:[{name:"correctAnswer",value:l==null?void 0:l.answer},{name:"variable",value:e.id}],transform:[{calculate:"datum[variable] === correctAnswer ? 'correct' : 'incorrect'",as:"result"},{calculate:"if(datum.result === 'correct', 0, if(datum.result === 'incorrect', 1, 2))",as:"order"}],color:{field:"result",type:"nominal",scale:{domain:["correct","incorrect"],range:["#69DB7C","#ADB5BD"]}},order:{field:"order"}};if(e.type==="numerical"||e.type==="slider"||e.type==="likert"){let h,p;return e.type==="numerical"&&(h=e.min,p=e.max),e.type==="slider"&&(h=Math.min(...e.options.map(g=>g.value)),p=Math.max(...e.options.map(g=>g.value))),e.type==="likert"&&(h=1,p=e.numItems),{...f,data:{values:u},mark:"bar",params:l!==void 0?d.params:void 0,transform:[{bin:e.type==="likert"?{step:1}:{maxbins:10},field:e.id,as:"bins"},...l!==void 0?d.transform:[]],encoding:{x:{field:"bins",scale:h!==void 0&&p!==void 0?{domain:[h,p]}:void 0,type:"quantitative",title:"Answer"},x2:{field:"bins_end"},y:{aggregate:"count",type:"quantitative",title:"Count",stack:!0},color:l!==void 0?d.color:void 0,order:l!==void 0?d.order:void 0}}}if(e.type==="radio"||e.type==="dropdown"||e.type==="checkbox")return{...f,data:{values:u},mark:"bar",params:l!==void 0?d.params:void 0,transform:l!==void 0?d.transform:void 0,encoding:{x:{field:e.id,type:"ordinal",title:"Answer"},y:{aggregate:"count",type:"quantitative",title:"Count"},color:l!==void 0?d.color:void 0}}},[t,u,e.id,e.max,e.min,e.numItems,e.options,e.type,n,l]);return R.jsxs(cT,{p:"lg",withBorder:!0,ref:o,children:[R.jsxs(An,{direction:"row",justify:"space-between",onClick:s,children:[R.jsxs(An,{align:"center",children:[e.type==="metadata"&&R.jsx(zze,{size:20}),e.type==="numerical"&&R.jsx(Xze,{size:20}),(e.type==="shortText"||e.type==="longText")&&R.jsx(Bze,{size:20}),e.type==="likert"&&R.jsx(qze,{size:20}),e.type==="dropdown"&&R.jsx(iVe,{size:20}),e.type==="slider"&&R.jsx(Dze,{size:20}),e.type==="radio"&&R.jsx(eVe,{size:20}),e.type==="checkbox"&&R.jsx(sVe,{size:20}),e.type==="reactive"&&R.jsx(Gze,{size:20}),R.jsx(wo,{order:5,ml:4,children:e.id})]}),R.jsx(Uze,{style:{rotate:i?"180deg":"none",transition:"rotate 200ms"}})]}),R.jsxs(FO,{in:i,mah:400,children:[R.jsx(He,{style:{top:0,position:"sticky",backgroundColor:"white",zIndex:2},py:"md",children:R.jsx(jm,{})}),R.jsxs(BW,{cols:2,h:360,children:[R.jsx(o1,{mih:200,children:e.type!=="metadata"&&e.type!=="shortText"&&e.type!=="longText"&&e.type!=="reactive"?R.jsx(npe,{spec:c,actions:!1,height:270,width:a.width/2-60-(l===void 0?0:60),padding:0,style:{justifySelf:"center"},renderer:"svg"}):R.jsxs(An,{direction:"column",gap:"xs",style:{overflowX:"clip"},children:[e.type==="metadata"&&R.jsx(ak,{block:!0,children:`${JSON.stringify(r,null,2)}`}),e.type!=="metadata"&&R.jsxs(R.Fragment,{children:[R.jsx(Nt,{fw:700,children:"Response Values: "}),u.map((f,d)=>R.jsx(An,{align:"center",gap:"xs",children:R.jsx(Nt,{children:f[e.id]})},d))]})]})}),R.jsx(o1,{mih:200,children:e.type==="metadata"?R.jsx(npe,{spec:c,actions:!1,width:a.width/2-60,height:270,padding:0,style:{justifySelf:"center"}}):R.jsxs(R.Fragment,{children:[R.jsx(Nt,{fw:700,children:"Response Specification: "}),R.jsx(ak,{block:!0,children:JSON.stringify(e,null,2)}),R.jsx("br",{}),l&&R.jsxs(R.Fragment,{children:[R.jsx(Nt,{fw:700,children:"Correct Answer: "}),R.jsx(ak,{block:!0,children:JSON.stringify(l,null,2)})]})]})})]})]})]})}function SVt({participantData:e,studyConfig:t,trialId:n}){const r=n&&n!=="end"&&N5e(t.components[n],t),i=z.useMemo(()=>[{id:"Config and Timing",type:"metadata"},...r?r.response:[]],[r]);return r?R.jsx(An,{w:"100%",direction:"column",gap:"xs",children:i.map(s=>R.jsx(EVt,{response:s,participantData:e,trialId:n,trialConfig:r},s.id))}):R.jsx(An,{justify:"center",align:"center",pt:"lg",pb:"md",w:"100%",children:R.jsx(Nt,{children:n!=="end"?"No trial selected":"The end component has no data."})})}function TVt({studyConfig:e,visibleParticipants:t}){const n=z.useMemo(()=>{let i=Qy(e.sequence);return i=BY(i,"root"),i.components.push("end"),i},[e.sequence]),{trialId:r}=rg();return R.jsx(cT,{shadow:"sm",p:"md",withBorder:!0,children:t.length===0?R.jsx(An,{justify:"center",align:"center",pt:"lg",pb:"md",children:R.jsx(Nt,{children:"No data available."})}):R.jsxs(An,{direction:"row",children:[R.jsx(He,{w:340,children:R.jsx(kO,{configSequence:n,participantSequence:n,fullSequence:n,participantView:!1,studyConfig:e,analysisNavigation:!0})}),R.jsx(jm,{orientation:"vertical",mx:"md"}),R.jsx(SVt,{participantData:t,studyConfig:e,trialId:r})]})})}function CVt({xScale:e,answer:t,height:n,labelHeight:r=0}){return R.jsx("g",{children:R.jsx("line",{stroke:"gray",strokeWidth:1,x1:e(t.startTime)+2,x2:e(t.startTime)+2,y1:n-45-r,y2:n-25})})}const dP=3,dE=25,hP=25,pP=20,ime=1,Hj=15;function AVt({xScale:e,answer:t,name:n,height:r,setSelectedTask:i,isSelected:s,labelHeight:o=0,isCorrect:a,hasCorrect:u}){const[l,c]=z.useState(!1),[f,{width:d}]=eR();return R.jsxs("g",{onClick:()=>i(n),onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),style:{cursor:"pointer"},children:[R.jsx("rect",{opacity:1,fill:l||s?"cornflowerblue":"lightgray",x:e(t.startTime)+ime,width:e(t.endTime)-e(t.startTime)-ime*2,y:r-dE,height:dE}),R.jsx("rect",{rx:3,opacity:1,x:e(t.startTime)-dP,width:d+dP*2+(u?Hj:0),y:r-dE-hP-o,height:pP,fill:"whitesmoke"}),R.jsx("line",{stroke:"black",strokeWidth:1,x1:e(t.startTime)-dP,x2:d+e(t.startTime)+dP+(u?Hj:0),y1:r-dE-hP+pP-o,y2:r-dE-hP+pP-o}),R.jsx("foreignObject",{x:e(t.startTime),width:d+(u?Hj:0),y:r-dE-hP-o,height:pP,children:R.jsx(u1,{style:{width:"fit-content"},children:R.jsxs(co,{wrap:"nowrap",gap:2,children:[R.jsx(Nt,{lineClamp:1,ref:f,mx:0,style:{width:"fit-content",fontWeight:600},size:"12px",children:n}),u?a?R.jsx(f9,{color:"var(--mantine-color-green-6)",style:{marginTop:2,strokeWidth:4},size:"14"}):R.jsx(hR,{color:"var(--mantine-color-red-6)",style:{marginTop:2,strokeWidth:4},size:14}):""]})})})]})}const sme=25,kVt=8,qj={left:20,top:0,right:20,bottom:0};function RVt({participantData:e,width:t,height:n,selectedTask:r,studyId:i,studyConfig:s,maxLength:o}){const a=z.useCallback(g=>{const b=g.split("_"),y=+b[b.length-1];window.open(`${ju}${i}/${o0(y)}?participantId=${e.participantId}`,"_blank")},[e.participantId,i]),u=z.useMemo(()=>{const g=Object.values(e.answers||{}).filter(x=>x.startTime).map(x=>[x.startTime,x.endTime]).flat(),b=ylt(g);return fM([qj.left,t-qj.left-qj.right]).domain([b[0],o?b[0]+o:b[1]]).clamp(!0)},[o,e.answers,t]),[l,c,f]=z.useMemo(()=>{let g=0;const b=Object.entries(e.answers||{}).filter(T=>!!T[1].startTime).sort((T,A)=>T[1].startTime-A[1].startTime);let y=0,x=0;const w=b.map((T,A)=>{const[k,I]=T,O=A>0?b[A-g-1]:null;O&&O[0].length*(kVt+1)+u(O[1].startTime)>u(I.startTime)?g+=1:g=0;const M=k.split("_"),L=M.slice(0,M.length-1).join("_"),H=s==null?void 0:s.components[L];let D=!0,B=!1;return H&&H.correctAnswer?(H.correctAnswer.forEach(U=>{const{id:G,answer:ee}=U;(!H||!H.correctAnswer||I.answer[G]!==ee)&&(D=!1)}),B=!0):B=!1,B&&(x+=1,D&&(y+=1)),{line:R.jsx(CVt,{labelHeight:g*sme,answer:I,height:n,xScale:u},k),label:R.jsx(Ys,{withinPortal:!0,position:"bottom-start",px:4,py:0,withArrow:!0,label:R.jsx(Jf,{gap:0,children:Object.entries(I.answer).map(U=>{var ue,X;const[G,ee]=U,ne=(X=(ue=H==null?void 0:H.correctAnswer)==null?void 0:ue.find(q=>q.id===G))==null?void 0:X.answer;return R.jsx(Nt,{children:`${G}: ${ee} ${ne?`[${ne}]`:""}`},G)})}),children:R.jsx("g",{children:R.jsx(AVt,{isCorrect:D,hasCorrect:B,labelHeight:g*sme,isSelected:r===k,setSelectedTask:a,answer:I,height:n,name:k,xScale:u},k)})})}});return[y,x,w]},[e.answers,u,s==null?void 0:s.components,n,r,a]),d=z.useMemo(()=>{if(!e.answers||Object.entries(e.answers).length===0)return 0;const g=Object.values(e.answers).filter(b=>b.startTime).sort((b,y)=>b.startTime-y.startTime);return new Date(g[g.length-1].endTime-(g[0]?g[0].startTime:0)).getTime()},[e]),h=z.useMemo(()=>Object.entries(e.answers||{}).sort((b,y)=>b[1].startTime-y[1].startTime).map(b=>{const[y,x]=b,w=[];let T=[-1,-1],A="visible";if(x.windowEvents)for(let k=0;k<x.windowEvents.length;k+=1)x.windowEvents[k][1]==="visibility"&&(x.windowEvents[k][2]==="hidden"&&A==="visible"?(T=[x.windowEvents[k][0],-1],A="hidden"):x.windowEvents[k][2]==="visible"&&A==="hidden"&&(T[1]=x.windowEvents[k][0],w.push(T),T=[-1,-1],A="visible"));return w.map((k,I)=>R.jsx(Ys,{withinPortal:!0,label:"Browsed away",children:R.jsx("rect",{x:u(k[0]),width:u(k[1])-u(k[0]),y:n-5,height:10})},I))}),[u,n,e.answers]),p=z.useMemo(()=>{if(s!=null&&s.uiConfig&&s.uiConfig.participantNameField){const[g,b]=s.uiConfig.participantNameField.split("."),y=Object.keys(e.answers).find(x=>x.startsWith(g));if(y)return`${e.answers[y].answer[b]}`}return null},[e.answers,s]),m=z.useMemo(()=>{if(!e.answers||Object.entries(e.answers).length===0)return"";const g=Object.values(e.answers).filter(y=>y.startTime).sort((y,x)=>y.startTime-x.startTime),b=new Date(g[g.length-1].endTime);return e.completed?`${b.toLocaleDateString()} ${b.toLocaleTimeString()}`:""},[e]);return R.jsx(u1,{children:R.jsxs(Jf,{gap:15,style:{width:"100%"},children:[R.jsx(jm,{size:"md"}),R.jsxs(co,{justify:"space-between",children:[R.jsxs(co,{justify:"center",children:[e.participantIndex?R.jsx(Nt,{children:`P-${e.participantIndex<10?"0":"none"}${e.participantIndex}`}):null,R.jsx(Nt,{size:"md",fw:700,children:p||e.participantId}),R.jsx(Nt,{size:"md",children:m}),e.completed?null:R.jsx(Nt,{size:"xl",c:"red",children:"Not completed"}),R.jsxs(co,{gap:10,children:[R.jsx(g0,{variant:"light",size:"lg",color:"green",leftSection:R.jsx(f9,{width:18,height:18,style:{paddingTop:1}}),pb:1,children:l}),R.jsx(g0,{variant:"light",size:"lg",color:"red",leftSection:R.jsx(hR,{width:18,height:18,style:{paddingTop:1}}),pb:1,children:c-l}),R.jsx(g0,{variant:"light",size:"lg",color:"gray",leftSection:R.jsx(Wze,{width:18,height:18,style:{paddingTop:1}}),pb:1,children:nq(d)})]})]}),R.jsx(Bn,{rightSection:R.jsx(T1e,{size:14}),component:"a",href:`${ju}${i}/${o0(0)}?participantId=${e.participantId}`,target:"_blank",children:"Go to replay"})]}),e.completed?R.jsxs("svg",{style:{width:t,height:n,overflow:"visible"},children:[f.map(g=>g.line),f.map(g=>g.label),h]}):null]})})}function IVt({visibleParticipants:e,studyConfig:t}){const{studyId:n}=rg(),[r,{width:i}]=eR(),[s,o]=z.useState(!1),a=z.useMemo(()=>s?Math.max(...e.map(l=>{const c=Math.min(...Object.values(l.answers).map(d=>d.startTime||0)),f=Math.max(...Object.values(l.answers).map(d=>d.endTime||0));return f&&c?f-c:0})):void 0,[s,e]);return R.jsxs(Jf,{ref:r,style:{width:"100%"},children:[R.jsx(co,{children:R.jsx(I_,{checked:s,label:"Scale by time",onChange:u=>o(u.currentTarget.checked)})}),e.map(u=>R.jsx(RVt,{maxLength:a,studyConfig:t,studyId:n||"",height:200,participantData:u,width:i},u.participantId))]})}function PVt({globalConfig:e}){const{studyId:t}=rg(),[n,r]=z.useState([]),[i,s]=z.useState(void 0),[o,a]=z.useState(!1),{storageEngine:u}=Yo(),l=M0(),{tab:c}=rg(),{user:f}=jT();z.useEffect(()=>{if(!t)return()=>{};if(t==="__revisit-widget"){const x=async w=>{if(w.data.type==="revisitWidget/CONFIG"&&u){const T=await Jee(w.data.payload);s(T)}};return window.addEventListener("message",x),window.parent.postMessage({type:"revisitWidget/READY"},"*"),()=>{window.removeEventListener("message",x)}}return Zee(t,e).then(x=>{x&&s(x)}),()=>{}},[t,e,u]);const d=z.useCallback(async()=>{if(a(!0),t){if(!i||!u)return;await u.initializeStudyDb(t,i);const x=await u.getAllParticipantsData();r(x),a(!1)}},[u,t,i]);z.useEffect(()=>{d()},[e,u,t,d]);const[h,p]=z.useState([]),[m,g,b]=z.useMemo(()=>{const x=n.filter(A=>!A.rejected&&A.completed),w=n.filter(A=>!A.rejected&&!A.completed),T=n.filter(A=>A.rejected);return p([...x,...w,...T]),[x,w,T]},[n]),y=z.useCallback(x=>{const w=[];x.includes("completed")&&w.push(...m),x.includes("inprogress")&&w.push(...g),x.includes("rejected")&&w.push(...b),p(w)},[m,g,b]);return R.jsxs(R.Fragment,{children:[R.jsx(K8,{studyIds:e.configsList}),R.jsx(hs.Main,{children:R.jsxs(l1,{fluid:!0,style:{height:"100%",position:"relative"},children:[R.jsx(ih,{visible:o}),R.jsxs(An,{direction:"row",align:"center",justify:"space-between",children:[R.jsx(wo,{order:5,children:t}),R.jsxs(An,{direction:"row",align:"center",children:[R.jsx(Nt,{mt:-2,size:"sm",children:"Participants: "}),R.jsx(nc.Group,{defaultValue:["completed","inprogress","rejected"],onChange:y,mb:"xs",mt:8,ml:"xs",children:R.jsxs(co,{children:[R.jsx(nc,{value:"completed",label:"Completed"}),R.jsx(nc,{value:"inprogress",label:"In Progress"}),R.jsx(nc,{value:"rejected",label:"Rejected"})]})})]})]}),R.jsx(Jd,{h:"xs"}),R.jsxs(ci,{variant:"outline",value:c,onChange:x=>l(`/analysis/stats/${t}/${x}`),style:{height:"100%"},children:[R.jsxs(ci.List,{children:[R.jsx(ci.Tab,{value:"table",leftSection:R.jsx(oVe,{size:16}),children:"Table View"}),R.jsx(ci.Tab,{value:"stats",leftSection:R.jsx(jze,{size:16}),children:"Trial Stats"}),R.jsx(ci.Tab,{value:"replay",leftSection:R.jsx(Zze,{size:16}),children:"Participant Replay"}),R.jsx(ci.Tab,{value:"manage",leftSection:R.jsx(k1e,{size:16}),disabled:!f.isAdmin,children:"Manage"})]}),R.jsx(ci.Panel,{value:"table",pt:"xs",children:i&&R.jsx(bVt,{visibleParticipants:h,studyConfig:i,refresh:d})}),R.jsx(ci.Panel,{value:"stats",pt:"xs",children:i&&R.jsx(TVt,{studyConfig:i,visibleParticipants:h})}),R.jsx(ci.Panel,{value:"replay",pt:"xs",children:R.jsx(IVt,{visibleParticipants:h,studyConfig:i})}),R.jsx(ci.Panel,{value:"manage",pt:"xs",children:t&&f.isAdmin?R.jsx(wVt,{studyId:t,refresh:d}):R.jsx(l1,{mt:20,children:R.jsx(Gy,{title:"Unauthorized Access",variant:"light",color:"red",icon:R.jsx(aG,{}),children:"You are not authorized to manage the data for this study."})})})]})]})})]})}function ome({children:e,paramToCheck:t,paramCallback:n}){const{user:r,verifyAdminStatus:i,logout:s}=jT(),{storageEngine:o}=Yo(),[a,u]=z.useState(!1),l=rg();return z.useEffect(()=>{(async()=>{if(a===!1)if(t&&n&&l[t]){const f=await n(l[t]);f&&u(f)}else u(!0);if(a)try{r&&await i(r)||s()}catch(f){s(),console.warn(f)}})()},[r.isAdmin,a]),r.determiningStatus||!o?R.jsx(ih,{visible:r.determiningStatus||!(o!=null&&o.getEngine())}):a&&!r.isAdmin&&!r.determiningStatus?R.jsx(nG,{to:"/login"}):R.jsx(R.Fragment,{children:e})}async function G5e(e,t){if(e instanceof r0){t(!0);const n=new Dy,r=kN();try{await Wit(r,n,V_e)}catch(i){S4({title:"Error",message:i.message,color:"red"})}finally{t(!1)}return r.currentUser}return null}function NVt(){const{user:e}=jT(),[t,n]=z.useState(!1),{storageEngine:r}=Yo();return z.useEffect(()=>{!e.determiningStatus&&!e.isAdmin&&e.adminVerification&&S4({title:"Unauthorized",message:"You are not authorized to use this application.",color:"red"})},[e.adminVerification]),!e.determiningStatus&&e.isAdmin?R.jsx(nG,{to:"/"}):R.jsx(l1,{children:R.jsx(vT,{padding:"lg",children:R.jsxs(An,{align:"center",direction:"column",justify:"center",children:[R.jsx(Hb,{maw:200,mt:50,mb:100,src:`${ju}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),R.jsxs(R.Fragment,{children:[R.jsx(Nt,{mb:20,children:"To access admin settings, please sign in using your Google account."}),R.jsx(Bn,{onClick:()=>G5e(r,n),leftSection:R.jsx(aVe,{}),variant:"filled",children:"Sign In With Google"})]}),R.jsx(ih,{visible:t})]})})})}function DVt(){const{user:e,triggerAuth:t,logout:n}=jT(),{storageEngine:r}=Yo(),[i,s]=z.useState(!1),[o,a]=z.useState([]),[u,l]=z.useState(!1),[c,f]=z.useState(!1),[d,h]=z.useState(!1),[p,m]=z.useState(!1),[g,b]=z.useState(!1),[y,x]=z.useState(""),[w,T]=z.useState(null),A=ywe({initialValues:{email:""},validate:{email:Uut("Invalid email")}});z.useEffect(()=>{(async()=>{if(l(!0),r instanceof r0){const B=await(r==null?void 0:r.getUserManagementData("authentication"));s((B==null?void 0:B.isEnabled)||!1);const U=await(r==null?void 0:r.getUserManagementData("adminUsers"));U&&U.adminUsersList&&a(U==null?void 0:U.adminUsersList.map(G=>G.email))}else s(!1);l(!1)})()},[r]);const k=async()=>{if(l(!0),r instanceof r0){const D=await G5e(r,l);D&&D.email?(T({email:D.email,uid:D.uid}),m(!0)):b(!0)}l(!1)},I=async D=>{l(!0),r instanceof r0&&D&&(await r.changeAuth(!0),await r.addAdminUser(D),a([D.email]),s(!0),t()),m(!1),l(!1)},O=async()=>{if(l(!0),r instanceof r0){await r.addAdminUser({email:A.values.email,uid:null});const D=await r.getUserManagementData("adminUsers");a((D==null?void 0:D.adminUsersList.map(B=>B.email))||[])}l(!1),f(!1),A.setValues({email:""})},M=D=>{h(!0),x(D)},L=async()=>{if(l(!0),r instanceof r0){await r.removeAdminUser(y);const D=await r.getUserManagementData("adminUsers");a((D==null?void 0:D.adminUsersList.map(B=>B.email))||[])}h(!1),l(!1)},H=z.useMemo(()=>r instanceof r0,[r]);return R.jsxs(R.Fragment,{children:[R.jsx(l1,{children:R.jsxs(vT,{withBorder:!0,style:{backgroundColor:"#FAFAFA"},children:[R.jsx(wo,{mb:20,order:3,children:"Authentication"}),i?R.jsx(An,{children:R.jsx(Nt,{children:"Authentication is enabled."})}):R.jsxs(An,{justify:"space-between",children:[R.jsx(He,{children:R.jsx(Nt,{children:"Authentication is currently disabled."})}),R.jsx(Ys,{label:"You can only enable auth when using Firebase",disabled:H,children:R.jsx(Bn,{onClick:D=>H?k():D.preventDefault(),color:"green","data-disabled":H?void 0:!0,style:{"&[dataDisabled]":{pointerEvents:"all"}},children:"Enable Authentication"})})]}),i?R.jsxs(An,{mt:40,direction:"column",children:[R.jsxs(An,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:15,pb:15,children:[R.jsx(wo,{order:6,children:"Enabled Users"}),R.jsx(uG,{style:{cursor:"pointer"},onClick:()=>f(!0)})]}),o.length>0?o.map(D=>{var B;return R.jsxs(An,{justify:"space-between",mb:10,children:[R.jsx(Nt,{children:D}),D===((B=e.user)==null?void 0:B.email)?R.jsx(Nt,{color:"blue",size:"xs",children:"You"}):R.jsx(Ub,{variant:"subtle",onClick:()=>M(D),children:R.jsx(I1e,{color:"red"})})]},D)}):null,R.jsx(An,{direction:"row",justify:"left",children:R.jsx(Bn,{onClick:()=>n(),mt:20,children:"Log out"})})]}):null]})}),R.jsx(Eo,{opened:c,onClose:()=>f(!1),title:"Add Admin User",children:R.jsxs(He,{component:"form",onSubmit:A.onSubmit(()=>O()),children:[R.jsx(Ly,{leftSection:R.jsx(Lze,{}),placeholder:"User Gmail Account",...A.getInputProps("email")}),R.jsxs(An,{mt:30,justify:"right",children:[R.jsx(Bn,{mr:5,variant:"subtle",color:"red",onClick:()=>f(!1),children:"Cancel"}),R.jsx(Bn,{type:"submit",children:"Save"})]})]})}),R.jsxs(Eo,{opened:d,size:"large",onClose:()=>h(!1),title:R.jsxs(Nt,{fw:700,children:["Remove",y,"?"]}),children:[R.jsxs(Nt,{mt:40,children:["Are you sure you want to remove",R.jsx("b",{children:y})," ","as an administrator?"]}),R.jsxs(An,{mt:40,justify:"right",children:[R.jsx(Bn,{mr:5,variant:"subtle",color:"red",onClick:()=>h(!1),children:"Cancel"}),R.jsx(Bn,{onClick:()=>L(),children:"Yes, I'm sure."})]})]}),R.jsxs(Eo,{opened:p,size:"md",onClose:()=>m(!1),title:R.jsx(Nt,{fw:700,children:"Enable Authentication?"}),children:[R.jsxs(Nt,{mt:40,children:["User"," ",R.jsx("b",{children:w==null?void 0:w.email})," ","will be added as an administrator to this application. After enabling authentication, you'll be able to add additional users below. This action cannot be undone."]}),R.jsxs(An,{mt:40,justify:"right",children:[R.jsx(Bn,{mr:5,variant:"subtle",color:"red",onClick:()=>m(!1),children:"Cancel"}),R.jsx(Bn,{onClick:()=>I(w),children:"Yes, I'm sure."})]})]}),R.jsxs(Eo,{opened:g,size:"md",onClose:()=>b(!1),title:R.jsx(Nt,{fw:700,children:"An Error Occurred."}),children:[R.jsxs(Nt,{mt:40,children:["An error has occurred when trying to enable authentication. Please consult the"," ",R.jsx("a",{href:"https://revisit.dev/docs/data-and-deployment/authentication-authorization/adding-removing-ui/",target:"_blank",rel:"noreferrer",children:"documentation"})," ","for more information."]}),R.jsx(An,{mt:40,justify:"right",children:R.jsx(Bn,{mr:5,onClick:()=>b(!1),children:"Okay"})})]}),R.jsx(ih,{visible:u})]})}class OVt extends H_e{constructor(){super("localStorage");jc(this,"studyDatabase");jc(this,"studyId")}async connect(){this.connected=!0}async initializeStudyDb(n,r){this.studyId=n,this.studyDatabase=await xE.createInstance({name:n});const i=await this.getCurrentConfigHash(),s=await IN(JSON.stringify(r));i&&i!==s&&(await this.studyDatabase.removeItem("sequenceArray"),await this.clearCurrentParticipantId()),this.studyDatabase.setItem("currentConfigHash",s);const o=await this.studyDatabase.getItem("configs");await this.studyDatabase.setItem("configs",{...o,[s]:r})}getAudio(n,r){return console.warn("not yet implemented",r),Promise.resolve(void 0)}async saveAudio(n){return console.warn("not yet implemented",n),Promise.resolve()}async initializeParticipantSession(n,r,i,s,o){var h;if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(o),!this.currentParticipantId)throw new Error("Participant not initialized");const a=await this.studyDatabase.getItem(this.currentParticipantId);if(a)return a;const u=await this.getModes(n),l=await IN(JSON.stringify(i)),{currentRow:c,creationIndex:f}=await this.getSequence(),d={participantId:this.currentParticipantId,participantConfigHash:l,sequence:c,participantIndex:f,answers:{},searchParams:r,metadata:s,completed:!1,rejected:!1,participantTags:[]};return u.dataCollectionEnabled&&await((h=this.studyDatabase)==null?void 0:h.setItem(this.currentParticipantId,d)),d}async getCurrentConfigHash(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("currentConfigHash")}async getAllConfigsFromHash(n,r){return await xE.createInstance({name:r}).getItem("configs")||{}}async getCurrentParticipantId(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.studyDatabase.getItem("currentParticipant");if(n)return this.currentParticipantId=n,await this.studyDatabase.setItem("currentParticipant",n),n;if(r)return this.currentParticipantId=r,r;const i=RN();return await this.studyDatabase.setItem("currentParticipant",i),this.currentParticipantId=i,i}async clearCurrentParticipantId(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");await this.studyDatabase.removeItem("currentParticipant")}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const r=await this.studyDatabase.getItem(this.currentParticipantId);if(!r)throw new Error("Participant not initialized");r.answers=n,await this.studyDatabase.setItem(this.currentParticipantId,r)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");this.studyDatabase.setItem("sequenceArray",n)}async getSequence(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("sequenceArray");if(!n)throw new Error("Latin square not initialized");if(!this.studyId)throw new Error("Study ID not initialized");const r=await this.getModes(this.studyId),i=r.dataCollectionEnabled?n.pop():n[Math.floor(Math.random()*n.length-1)];if(!i)throw new Error("Latin square is empty");return r.dataCollectionEnabled&&await this.studyDatabase.setItem("sequenceArray",n),{currentRow:i,creationIndex:1e3-n.length}}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("sequenceArray")}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=[];return await this.studyDatabase.iterate((r,i)=>{i!=="config"&&i!=="currentParticipant"&&i!=="sequenceArray"&&i!=="configs"&&i!=="currentConfigHash"&&i!=="modes"&&n.push(r)}),n}async getAllParticipantsDataByStudy(n){const r=xE.createInstance({name:n}),i=[];return await r.iterate((s,o)=>{o!=="config"&&o!=="currentParticipant"&&o!=="sequenceArray"&&o!=="configs"&&o!=="currentConfigHash"&&o!=="modes"&&i.push(s)}),i}async getParticipantData(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=n||await this.studyDatabase.getItem("currentParticipant");return r?await this.studyDatabase.getItem(r):null}async getParticipantTags(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.participantTags}async addParticipantTags(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.getParticipantData();if(!r)throw new Error("Participant not initialized");r.participantTags=[...new Set([...r.participantTags,...n])],await this.studyDatabase.setItem(this.currentParticipantId,r)}async removeParticipantTags(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.getParticipantData();if(!r)throw new Error("Participant not initialized");r.participantTags=r.participantTags.filter(i=>!n.includes(i)),await this.studyDatabase.setItem(this.currentParticipantId,r)}async nextParticipant(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=RN();await this.studyDatabase.setItem("currentParticipant",n)}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.completed||(n.completed=!0,await this.studyDatabase.setItem(this.currentParticipantId,n)),!0}async validateUser(n){return!0}async rejectParticipant(n,r,i){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const s=await this.studyDatabase.getItem(r);if(!s)throw new Error("Participant not found");if(s.rejected)return;s.rejected={reason:i,timestamp:new Date().getTime()};const o=await this.studyDatabase.getItem("sequenceArray");o&&(o.unshift(s.sequence),this.setSequenceArray(o)),await this.studyDatabase.setItem(r,s)}async rejectCurrentParticipant(n,r){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");await this.rejectParticipant(n,this.currentParticipantId,r)}async setMode(n,r,i){this.studyDatabase=await xE.createInstance({name:n});const s=await this.studyDatabase.getItem("modes");if(!s)throw new Error("Modes not initialized");s[r]=i,this.studyDatabase.setItem("modes",s)}async getModes(n){this.studyDatabase=await xE.createInstance({name:n});const r=await this.studyDatabase.getItem("modes");if(r)return r;const i={dataCollectionEnabled:!0,studyNavigatorEnabled:!0,analyticsInterfacePubliclyAccessible:!0};return this.studyDatabase.setItem("modes",i),i}async getParticipantsStatusCounts(n){const r=await this.getAllParticipantsDataByStudy(n),i=r.filter(l=>l.completed&&!l.rejected).length,s=r.filter(l=>l.rejected).length,o=r.filter(l=>!l.completed&&!l.rejected).length,a=Math.min(...r.map(l=>Math.min(...Object.values(l.answers).map(c=>c.startTime)))),u=Math.max(...r.map(l=>Math.max(...Object.values(l.answers).map(c=>c.endTime))));return{completed:i,rejected:s,inProgress:o,minTime:a===1/0?null:a,maxTime:u===-1/0?null:u}}_verifyStudyDatabase(n){return n!==void 0}}async function MVt(){let e;{const t=new OVt;await t.connect(),e=t}return e}function v3({title:e}){const t=cp();return z.useEffect(()=>{document.title=e},[t,e]),null}async function LVt(){const t=await(await fetch(`${ju}global.json`)).text();return dVt(t)}function FVt(){const[e,t]=z.useState(null),[n,r]=z.useState({});z.useEffect(()=>{async function a(){e&&r(await mVt(e))}a()},[e]),z.useEffect(()=>{e||LVt().then(a=>{t(a)})},[e]);const{storageEngine:i,setStorageEngine:s}=Yo();z.useEffect(()=>{if(i!==void 0)return;async function a(){const u=await MVt();s(u)}a()},[s,i]);const o=async a=>i instanceof r0?!(await i.getModes(a)).analyticsInterfacePubliclyAccessible:!1;return e?R.jsx(gze,{basename:ju,children:R.jsx(Vst,{children:R.jsx(Pze,{children:R.jsxs(qUe,{children:[R.jsx(n_,{path:"/",element:R.jsxs(R.Fragment,{children:[R.jsx(v3,{title:"ReVISit | Home"}),R.jsxs(hs,{padding:"md",header:{height:70},children:[R.jsx(K8,{studyIds:e.configsList}),R.jsx(Wst,{globalConfig:e,studyConfigs:n})]})]})}),R.jsx(n_,{path:"/:studyId/*",element:R.jsxs(R.Fragment,{children:[R.jsx(v3,{title:"ReVISit | Study"}),R.jsx(gVt,{globalConfig:e})]})}),R.jsx(n_,{path:"/analysis/stats/:studyId/:tab/:trialId?",element:R.jsxs(R.Fragment,{children:[R.jsx(v3,{title:"ReVISit | Analysis"}),R.jsx(ome,{paramToCheck:"studyId",paramCallback:o,children:R.jsx(hs,{padding:"md",header:{height:70},children:R.jsx(PVt,{globalConfig:e})})})]})}),R.jsx(n_,{path:"/analysis/stats/:studyId",element:R.jsx(S5e,{to:"./table",replace:!0})}),R.jsx(n_,{path:"/settings",element:R.jsxs(ome,{children:[R.jsx(v3,{title:"ReVISit | Settings"}),R.jsxs(hs,{padding:"md",header:{height:70},children:[R.jsx(K8,{studyIds:e.configsList}),R.jsx(hs.Main,{children:R.jsx(DVt,{})})]})]})}),R.jsx(n_,{path:"/login",element:R.jsxs(R.Fragment,{children:[R.jsx(v3,{title:"ReVISit | Login"}),R.jsxs(hs,{padding:"md",header:{height:70},children:[R.jsx(K8,{studyIds:e.configsList}),R.jsx(hs.Main,{children:R.jsx(NVt,{})})]})]})})]})})})}):null}PNe.createRoot(document.getElementById("root")).render(R.jsx(sr.StrictMode,{children:R.jsx(eUe,{children:R.jsxs(Rme,{children:[R.jsx(P1,{}),R.jsx(FVt,{})]})})}))});export default $Vt();
